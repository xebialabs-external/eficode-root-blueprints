;
try {
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-plugin:data', location = 'js/data/data.js' */
(function(){if(!window.WRM){window.WRM={}}function a(c){if(!c){return c}return JSON.parse(c)}function b(d,c){return Object.prototype.hasOwnProperty.call(d,c)}WRM.data={claim:function(c){if(WRM._unparsedData&&b(WRM._unparsedData,c)){var g=WRM._unparsedData[c];try{var d=a(g);delete WRM._unparsedData[c];return d}catch(f){console&&console.log&&console.log("JSON Error parsing data with key "+c+": "+f)}}}};WRM.onData=function(d,c){if(!c){c=d;d=false}};if(typeof define==="function"){define("wrm/data",[],function(){return WRM.data})}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path', location = 'js/data/context-path.js' */
(function(){var a=null;(window.AJS||(window.AJS={}));AJS.contextPath=function(){if(a===null){a=WRM.data.claim("com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path")}return a};AJS.contextPath._reset=function(){a=null};if(typeof define==="function"){define("wrm/context-path",[],function(){return AJS.contextPath})}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-compatibility', location = 'src/js-vendor/jquery/jquery-compatibility.js' */
jQuery.noConflict();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-polyfills-console', location = 'src/js/aui/polyfills/console.js' */
("undefined"===typeof window?global:window).__c30f661a6916ee439c782cc0f3afb91d=function(){"use strict";"undefined"===typeof window.console?window.console={messages:[],log:function(a){this.messages.push(a)},show:function(){alert(this.messages.join("\n"));this.messages=[]}}:window.console.show=function(){};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-jquery', location = 'src/js/aui/jquery.js' */
("undefined"===typeof window?global:window).__bd7207540b95ff683caa1d3c0bfcc3d7=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=window.jQuery||window.Zepto;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-create-element', location = 'src/js/aui/create-element.js' */
("undefined"===typeof window?global:window).__23ef07a7ffd018f863640ca5236c2766=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__bd7207540b95ff683caa1d3c0bfcc3d7,c=b&&b.__esModule?b:{"default":b};a.default=function(){var a=null;arguments.length&&"string"===typeof arguments[0]&&(a=(0,c.default)(document.createElement(arguments[0])),2===arguments.length&&a.html(arguments[1]));"undefined"!==typeof console&&console.warn&&console.warn("AJS's create element functionality has been deprecated since 5.9.0.\nNo alternative will be provided.\nUse document.createElement() or jQuery.parseHTML(), or preferably use a templating library.");
return a};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-object-assign-4.0.1-index', location = 'node_modules/object-assign/index.js' */
("undefined"===typeof window?global:window).__264aaec7a36d2c0000702a2bc70b6514=function(){var h={},i=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;return h=Object.assign||function(e,h){var a,d;if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(e);for(var b,f=1;f<arguments.length;f++){a=Object(arguments[f]);for(var g in a)i.call(a,g)&&(d[g]=a[g]);if(Object.getOwnPropertySymbols){b=Object.getOwnPropertySymbols(a);for(var c=
0;c<b.length;c++)j.call(a,b[c])&&(d[b[c]]=a[b[c]])}}return d}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-globalize', location = 'src/js/aui/internal/globalize.js' */
("undefined"===typeof window?global:window).__9a668cbde1e182d8e721c23580356df2=function(){function d(){return e.default.apply(void 0,arguments)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){window[c]!==d&&(window[c]=(0,f.default)(d,window[c]));return window[c][a]=b};var a=__23ef07a7ffd018f863640ca5236c2766,e=a&&a.__esModule?a:{"default":a},f=(a=__264aaec7a36d2c0000702a2bc70b6514)&&a.__esModule?a:{"default":a},c="AJS";return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-deprecation', location = 'src/js/aui/internal/deprecation.js' */
("undefined"===typeof window?global:window).__c88c0dc6258c37804917fb6a0e4092fa=function(){function k(){"undefined"!==typeof console&&console.warn&&Function.prototype.apply.call(console.warn,console,arguments)}function h(c,b){if("function"===typeof c)return c;var a=!1,b=b||{};return function(d){var d=d?d:1,f=Error();(f=(f=f.stack||f.stacktrace)&&f.replace(/^Error\n/,"")||"")?(f=f.split("\n"),d=f[d+2]):d=f;d=d||"";if(!a||-1===n.indexOf(d)){n.push(d);a=!0;var f="DEPRECATED "+(b.deprecationType+" "||
"")+"- ",e;e=c;e=(e+="")?e.charAt(0).toUpperCase()+e.substring(1):"";f=f+e+" has been deprecated"+(b.sinceVersion?" since "+b.sinceVersion:"")+" and will be removed in "+(b.removeInVersion||"a future release")+".";b.alternativeName&&(f+=" Use "+b.alternativeName+" instead. ");b.extraInfo&&(f+=" "+b.extraInfo);d=""===d?" \n No stack trace of the deprecated usage is available in your current browser.":" \n "+d;b.extraObject?k(f+"\n",b.extraObject,d):k(f,d)}}}function o(c,b){var a=c.options.displayName,
a=a?" ("+a+")":"",d=l.default.extend({deprecationType:"CSS",extraObject:b},c.options);h("'"+c.selector+"' pattern"+a,d)()}function i(c,b,a){a=a||{};a.deprecationType=a.deprecationType||"JS";var d=h(b||c.name||"this function",a);return function(){d();return c.apply(this,arguments)}}function p(c,b,a){a=a||{};a.deprecationType=a.deprecationType||"JS";b=i(c,b,a);b.prototype=c.prototype;l.default.extend(b,c);return b}function m(c,b,a){if("function"===typeof c[b])a=a||{},a.deprecationType=a.deprecationType||
"JS",c[b]=i(c[b],a.displayName||b,a);else if(j){var d=c[b],a=a||{};a.deprecationType=a.deprecationType||"JS";var e=h(a.displayName||b,a);Object.defineProperty(c,b,{get:function(){e();return d},set:function(a){d=a;e();return a}})}}function q(c,b,a){var a=a||{},d;for(d in c)t.call(c,d)&&(a.deprecationType=a.deprecationType||"JS",a.displayName=b+d,a.alternativeName=a.alternativeNamePrefix&&a.alternativeNamePrefix+d,m(c,d,l.default.extend({},a)))}function u(c){return function(b){var a={selector:b,options:c||
{}};r.push(a);for(var b=document.querySelectorAll(b),d=0;d<b.length;d++)o(a,b[d])}}function s(c,b){window.MutationObserver?("string"===typeof c&&(c=[c]),c.forEach(u(b))):k("CSS could not be deprecated as Mutation Observer was not found.")}function v(c){return function(b){(c.matches||c.msMatchesSelector||c.webkitMatchesSelector||c.mozMatchesSelector||c.oMatchesSelector).call(c,b.selector)&&o(b,c)}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getMessageLogger=e.propertyDeprecationSupported=
e.obj=e.prop=e.css=e.construct=e.fn=void 0;var g=__bd7207540b95ff683caa1d3c0bfcc3d7,l=g&&g.__esModule?g:{"default":g},g=(g=__9a668cbde1e182d8e721c23580356df2)&&g.__esModule?g:{"default":g},t=Object.prototype.hasOwnProperty,n=[],r=[],j=!1;try{Object.defineProperty&&(Object.defineProperty({},"blam",{get:function(){},set:function(){}}),e.propertyDeprecationSupported=j=!0)}catch(x){}window.MutationObserver&&(new MutationObserver(function(c){c.forEach(function(b){for(var b=b.addedNodes,a=0;a<b.length;a++){var c=
b[a];1===c.nodeType&&r.forEach(v(c))}})})).observe(document,{childList:!0,subtree:!0});var w={fn:i,construct:p,css:s,prop:m,obj:q,propertyDeprecationSupported:j,getMessageLogger:h};(0,g.default)("deprecate",w);e.fn=i;e.construct=p;e.css=s;e.prop=m;e.obj=q;e.propertyDeprecationSupported=j;e.getMessageLogger=h;return e}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-polyfills-custom-event', location = 'src/js/aui/polyfills/custom-event.js' */
("undefined"===typeof window?global:window).__b4f5303c3f6b97d2fd503b5013ff8de7=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=void 0;a:{if(window.CustomEvent)try{var c=new window.CustomEvent("name",{bubbles:!1,cancelable:!0,detail:{x:"y"}});c.preventDefault();if(!0!==c.defaultPrevented)throw Error("Could not prevent default");if("name"!==c.type)throw Error("Could not set custom name");if("y"!==c.detail.x)throw Error("Could not set detail");a=window.CustomEvent;
break a}catch(e){}a=function(b,d){var d=d||{bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");a.initCustomEvent(b,!!d.bubbles,!!d.cancelable,d.detail);var c=a.preventDefault;a.preventDefault=function(){c.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(a){this.defaultPrevented=!0}};return a};a.prototype=window.Event.prototype}b.default=a;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-constants', location = 'node_modules/skatejs/lib/constants.js' */
("undefined"===typeof window?global:window).__9d236359921e13b5fcf3157e2c735602=function(){var d={exports:{}},e=d.exports,i={module:d,exports:e},a;a=function(f,a,g){var c=("undefined"===typeof window?global:window).define,b,h,g=[g,a,f].filter(function(a){return"function"===typeof a})[0],a=[a,f,[]].filter(Array.isArray)[0];b=g.apply(null,a.map(function(a){return i[a]}));h=typeof b;"function"===typeof c&&c("string"===typeof f?f:"__9d236359921e13b5fcf3157e2c735602",a,g);"string"===h?b=String(b):"number"===
h?b=Number(b):"boolean"===h&&(b=Boolean(b));void 0!==b&&(e=d.exports=b)};a.amd=!0;var c=function(a){Object.defineProperty(a,"__esModule",{value:!0});a.ATTR_IGNORE="data-skate-ignore";a.TYPE_ATTRIBUTE="a";a.TYPE_CLASSNAME="c";a.TYPE_ELEMENT="t"};"function"===typeof a&&a.amd?a(["exports"],c):"undefined"!==typeof e&&c(e);return d.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-version', location = 'node_modules/skatejs/lib/version.js' */
("undefined"===typeof window?global:window).__14e4e8bfa403103c4675c6cb0be7a4a3=function(){var d={exports:{}},f=d.exports,i={module:d,exports:f},a;a=function(a,c,g){var e=("undefined"===typeof window?global:window).define,b,h,g=[g,c,a].filter(function(a){return"function"===typeof a})[0],c=[c,a,[]].filter(Array.isArray)[0];b=g.apply(null,c.map(function(a){return i[a]}));h=typeof b;"function"===typeof e&&e("string"===typeof a?a:"__14e4e8bfa403103c4675c6cb0be7a4a3",c,g);"string"===h?b=String(b):"number"===
h?b=Number(b):"boolean"===h&&(b=Boolean(b));void 0!==b&&(f=d.exports=b)};a.amd=!0;var e=function(a,c){c.exports="0.13.17"};"function"===typeof a&&a.amd?a(["exports","module"],e):"undefined"!==typeof f&&"undefined"!==typeof d&&e(f,d);return d.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-globals', location = 'node_modules/skatejs/lib/globals.js' */
("undefined"===typeof window?global:window).__6466b6e8107a8bd9775ee239234e3544=function(){var e={exports:{}},g=e.exports,j={module:e,exports:g,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3},b;b=function(c,f,d){var b=("undefined"===typeof window?global:window).define,a,h,d=[d,f,c].filter(function(a){return"function"===typeof a})[0],f=[f,c,[]].filter(Array.isArray)[0];a=d.apply(null,f.map(function(a){return j[a]}));h=typeof a;"function"===typeof b&&b("string"===
typeof c?c:"__6466b6e8107a8bd9775ee239234e3544",f,d);"string"===h?a=String(a):"number"===h?a=Number(a):"boolean"===h&&(a=Boolean(a));void 0!==a&&(g=e.exports=a)};b.amd=!0;var i=function(c,b,d){c="__skate_"+(d&&d.__esModule?d["default"]:d).replace(/[^\w]/g,"_");window[c]||(window[c]={observer:void 0,registry:{}});b.exports=window[c]};"function"===typeof b&&b.amd?b(["exports","module","./version"],i):"undefined"!==typeof g&&"undefined"!==typeof e&&i(g,e,__14e4e8bfa403103c4675c6cb0be7a4a3);return e.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-data', location = 'node_modules/skatejs/lib/data.js' */
("undefined"===typeof window?global:window).__e5ac83e1fd2c7d9ba811c5dc3cf8b392=function(){var e={exports:{}},f=e.exports,j={module:e,exports:f},b;b=function(b,c,g){var h=("undefined"===typeof window?global:window).define,a,d,g=[g,c,b].filter(function(a){return"function"===typeof a})[0],c=[c,b,[]].filter(Array.isArray)[0];a=g.apply(null,c.map(function(a){return j[a]}));d=typeof a;"function"===typeof h&&h("string"===typeof b?b:"__e5ac83e1fd2c7d9ba811c5dc3cf8b392",c,g);"string"===d?a=String(a):"number"===
d?a=Number(a):"boolean"===d&&(a=Boolean(a));void 0!==a&&(f=e.exports=a)};b.amd=!0;var i=function(b,c){c.exports=function(b,c){var a=void 0===c?"":c,d=b.__SKATE_DATA||(b.__SKATE_DATA={});return a&&(d[a]||(d[a]={}))||d}};"function"===typeof b&&b.amd?b(["exports","module"],i):"undefined"!==typeof f&&"undefined"!==typeof e&&i(f,e);return e.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-mutation-observer', location = 'node_modules/skatejs/lib/mutation-observer.js' */
/*

 Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
("undefined"===typeof window?global:window).__04e4ad44d1846e5700205516c1a42717=function(){var k={exports:{}},n=k.exports,t={module:k,exports:n},i;i=function(g,o,p){var f=("undefined"===typeof window?global:window).define,d,l,p=[p,o,g].filter(function(d){return"function"===typeof d})[0],o=[o,g,[]].filter(Array.isArray)[0];d=p.apply(null,o.map(function(d){return t[d]}));l=typeof d;"function"===typeof f&&f("string"===typeof g?g:"__04e4ad44d1846e5700205516c1a42717",o,p);"string"===l?d=String(d):"number"===
l?d=Number(d):"boolean"===l&&(d=Boolean(d));void 0!==d&&(n=k.exports=d)};i.amd=!0;var q=function(){var g=window;if("undefined"===typeof WeakMap){var o=Object.defineProperty,p=Date.now()%1E9,f=function(){this.name="__st"+(1E9*Math.random()>>>0)+(p++ +"__")};f.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:o(a,this.name,{value:[a,b],writable:!0});return this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){var b=a[this.name];if(!b||b[0]!==
a)return!1;b[0]=b[1]=void 0;return!0},has:function(a){var b=a[this.name];return!b?!1:b[0]===a}};window.WeakMap=f}var d=function(){u=!1;var a=v;v=[];a.sort(function(b,a){return b.uid_-a.uid_});var b=!1;a.forEach(function(a){var e=a.takeRecords();a.nodes_.forEach(function(b){(b=m.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})});e.length&&(a.callback_(e,a),b=!0)});b&&d()},l=function(a,b){for(var c=a;c;c=c.parentNode){var e=m.get(c);if(e)for(var w=0;w<e.length;w++){var d=
e[w],h=d.options;if(c===a||h.subtree)(h=b(h))&&d.enqueue(h)}}},f=function(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++t},i=function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null},k=function(a,b){return r=new i(a,b)},n=function(a){if(j)return j;var b=r,c=new i(b.type,b.target);c.addedNodes=b.addedNodes.slice();c.removedNodes=b.removedNodes.slice();c.previousSibling=
b.previousSibling;c.nextSibling=b.nextSibling;c.attributeName=b.attributeName;c.attributeNamespace=b.attributeNamespace;c.oldValue=b.oldValue;j=c;j.oldValue=a;return j},q=function(a,b,c){this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[]};if(!g.JsMutationObserver){var m=new WeakMap,s;if(/Trident|Edge/.test(navigator.userAgent))s=setTimeout;else if(window.setImmediate)s=window.setImmediate;else{var x=[],y=String(Math.random());window.addEventListener("message",function(a){a.data===
y&&(a=x,x=[],a.forEach(function(b){b()}))});s=function(a){x.push(a);window.postMessage(y,"*")}}var u=!1,v=[],t=0;f.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var c=m.get(a);c||m.set(a,c=[]);for(var e,d=0;d<c.length;d++)if(c[d].observer===
this){e=c[d];e.removeListeners();e.options=b;break}e||(e=new q(this,a,b),c.push(e),this.nodes_.push(a));e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var a=m.get(a),b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var r,j;q.prototype={enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var e=b[c-1]===a?b[c-
1]:j&&(b[c-1]===j||b[c-1]===r)?j:null;if(e){b[c-1]=e;return}}else v.push(this.observer),u||(u=!0,s(d));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},
removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=m.get(a);b||m.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=
this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(b){this.removeListeners_(b);for(var b=m.get(b),a=0;a<b.length;a++)if(b[a]===this){b.splice(a,1);break}},this)},handleEvent:function(a){a.stopImmediatePropagation();switch(a.type){case "DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,e=a.target,d=new k("attributes",e);d.attributeName=b;d.attributeNamespace=c;var f=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;l(e,function(a){if(a.attributes&&(!a.attributeFilter||
!a.attributeFilter.length||!(-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c))))return a.attributeOldValue?n(f):d});break;case "DOMCharacterDataModified":e=a.target;d=k("characterData",e);f=a.prevValue;l(e,function(a){if(a.characterData)return a.characterDataOldValue?n(f):d});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var h=a.target,g;"DOMNodeInserted"===a.type?(e=[h],g=[]):(e=[],g=[h]);var i=h.previousSibling,h=h.nextSibling,d=k("childList",
a.target.parentNode);d.addedNodes=e;d.removedNodes=g;d.previousSibling=i;d.nextSibling=h;l(a.relatedNode,function(a){if(a.childList)return d})}r=j=void 0}};g.JsMutationObserver=f;g.MutationObserver||(g.MutationObserver=f,f._isPolyfilled=!0)}};"function"===typeof i&&i.amd?i(["exports"],q):"undefined"!==typeof n&&q(n);return k.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-utils', location = 'node_modules/skatejs/lib/utils.js' */
("undefined"===typeof window?global:window).__e41b80779e59ba9fc2f4dc8f4297bd33=function(){var f={exports:{}},j=f.exports,l={module:f,exports:j,"./constants":__9d236359921e13b5fcf3157e2c735602,"./constants":__9d236359921e13b5fcf3157e2c735602},d;d=function(b,i,g){var d=("undefined"===typeof window?global:window).define,c,e,g=[g,i,b].filter(function(a){return"function"===typeof a})[0],i=[i,b,[]].filter(Array.isArray)[0];c=g.apply(null,i.map(function(a){return l[a]}));e=typeof c;"function"===typeof d&&
d("string"===typeof b?b:"__e41b80779e59ba9fc2f4dc8f4297bd33",i,g);"string"===e?c=String(c):"number"===e?c=Number(c):"boolean"===e&&(c=Boolean(c));void 0!==c&&(j=f.exports=c)};d.amd=!0;var k=function(b,d){function g(a,m){return Object.prototype.hasOwnProperty.call(a,m)}b.hasOwn=g;b.camelCase=function(a){return a.split(/-/g).map(function(a,b){return 0===b?a:a[0].toUpperCase()+a.substring(1)}).join("")};b.elementContains=function(a,b){return a===document&&!a.contains?document.head.contains(b)||document.body.contains(b):
a.contains?a.contains(b):e.call(a,b)};b.debounce=function(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1;a()},1))}};b.getClosestIgnoredElement=function(a){for(;a instanceof Element;){if(a.hasAttribute(f))return a;a=a.parentNode}};b.inherit=function(a,b,c){for(var d=Object.getOwnPropertyNames(b),g=d.length,f=0;f<g;f++){var e=d[f];if(c||void 0===a[e]){var h=Object.getOwnPropertyDescriptor(b,e);h.get||h.set||!h.writable||!h.enumerable||!h.configurable?Object.defineProperty(a,e,h):
a[e]=b[e]}}return a};b.objEach=function(a,b){for(var c in a)g(a,c)&&b(a[c],c)};b.supportsNativeCustomElements=function(){return"function"===typeof document.registerElement};b.isValidNativeCustomElementName=function(a){return 0<a.indexOf("-")};Object.defineProperty(b,"__esModule",{value:!0});var f=d.ATTR_IGNORE,c=window.HTMLElement.prototype;b.elementPrototype=c;var e=c.contains};"function"===typeof d&&d.amd?d(["exports","./constants"],k):"undefined"!==typeof j&&k(j,__9d236359921e13b5fcf3157e2c735602);
return f.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-registry', location = 'node_modules/skatejs/lib/registry.js' */
("undefined"===typeof window?global:window).__2964ebf30f320caf67e277ab8abf2b53=function(){var h={exports:{}},l=h.exports,o={module:h,exports:l,"./constants":__9d236359921e13b5fcf3157e2c735602,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./constants":__9d236359921e13b5fcf3157e2c735602,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33},b;b=function(b,d,f){var k=("undefined"===typeof window?global:window).define,
a,n,f=[f,d,b].filter(function(a){return"function"===typeof a})[0],d=[d,b,[]].filter(Array.isArray)[0];a=f.apply(null,d.map(function(a){return o[a]}));n=typeof a;"function"===typeof k&&k("string"===typeof b?b:"__2964ebf30f320caf67e277ab8abf2b53",d,f);"string"===n?a=String(a):"number"===n?a=Number(a):"boolean"===n&&(a=Boolean(a));void 0!==a&&(l=h.exports=a)};b.amd=!0;var m=function(b,d,f,k,a){var h=f.TYPE_ATTRIBUTE,l=f.TYPE_CLASSNAME,m=f.TYPE_ELEMENT,i=k&&k.__esModule?k["default"]:k,p=a.hasOwn,o=a.isValidNativeCustomElementName,
q=a.supportsNativeCustomElements;d.exports={clear:function(){i.registry={};return this},get:function(e){return p(i.registry,e)&&i.registry[e]},getForElement:function(e){var a=e.attributes,b=a.length,f=[],j=a.is,d=j&&(j.value||j.nodeValue),j=(e.tagName||e.localName).toLowerCase(),c=d||j,g;this.isType(c,m)&&(c=i.registry[c],g=c["extends"],d?j===g&&f.push(c):g||f.push(c));for(d=0;d<b;d++)c=a[d].nodeName,this.isType(c,h)&&(c=i.registry[c],g=c["extends"],(!g||j===g)&&f.push(c));(a=e.classList)?e=a:(e=
e.attributes,e=e["class"]&&e["class"].nodeValue.split(/\s+/)||[]);a=e.length;for(b=0;b<a;b++)c=e[b],this.isType(c,l)&&(c=i.registry[c],g=c["extends"],(!g||j===g)&&f.push(c));return f},isType:function(a,b){var d=this.get(a);return d&&d.type===b},isNativeCustomElement:function(a){return q()&&this.isType(a,m)&&o(a)},set:function(a,b){if(p(i.registry,a))throw Error('A component definition of type "'+b.type+'" with the ID of "'+a+'" already exists.');i.registry[a]=b;return this}}};"function"===typeof b&&
b.amd?b(["exports","module","./constants","./globals","./utils"],m):"undefined"!==typeof l&&"undefined"!==typeof h&&m(l,h,__9d236359921e13b5fcf3157e2c735602,__6466b6e8107a8bd9775ee239234e3544,__e41b80779e59ba9fc2f4dc8f4297bd33);return h.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-lifecycle', location = 'node_modules/skatejs/lib/lifecycle.js' */
("undefined"===typeof window?global:window).__3fef6ec7435c6573502a7e24c04dbfbc=function(){var o={exports:{}},m=o.exports,s={module:o,exports:m,"./constants":__9d236359921e13b5fcf3157e2c735602,"./data":__e5ac83e1fd2c7d9ba811c5dc3cf8b392,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./constants":__9d236359921e13b5fcf3157e2c735602,"./data":__e5ac83e1fd2c7d9ba811c5dc3cf8b392,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,
"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33},k;k=function(i,f,l){var k=("undefined"===typeof window?global:window).define,d,j,l=[l,f,i].filter(function(d){return"function"===typeof d})[0],f=[f,i,[]].filter(Array.isArray)[0];d=l.apply(null,f.map(function(d){return s[d]}));j=typeof d;"function"===typeof k&&k("string"===typeof i?i:"__3fef6ec7435c6573502a7e24c04dbfbc",f,l);"string"===j?d=String(d):"number"===j?d=Number(d):"boolean"===j&&(d=Boolean(d));
void 0!==d&&(m=o.exports=d)};k.amd=!0;var q=function(i,f,l,k,d,j){function o(e,b,a){Object.defineProperty(e,a,{get:function(){return this.getAttribute(b)},set:function(a){void 0===a?this.removeAttribute(b):this.setAttribute(b,a)}})}function m(e,b,a){var d,f,c=a.name,h=a.newValue,g;t&&(g=r(e,"cachedAttributeOldValues"));var a=t&&p(g,c)?g[c]:a.oldValue,i="string"===typeof h,u="string"===typeof a,n=(b=b.attributes)&&b[c];!u&&i?f="created":u&&i?f="updated":u&&!i&&(f="removed");t&&("removed"===f?delete g[c]:
g[c]=h);n&&"function"===typeof n[f]?d=n[f]:n&&"function"===typeof n.fallback?d=n.fallback:"function"===typeof n?d=n:"function"===typeof b&&(d=b);d&&d(e,{type:f,name:c,newValue:void 0===h?null:h,oldValue:void 0===a?null:a})}function q(e,b){var a=r(e,b.id);if(!a.created){a.created=!0;C(e,b.prototype,!0);b.template&&!e.hasAttribute(b.resolvedAttribute)&&b.template(e);e.removeAttribute(b.unresolvedAttribute);e.setAttribute(b.resolvedAttribute,"");var d=function(a,b){return function(d){if(!b)return a(e,
d,e);for(var c=d.target;c&&c!==document&&c!==e.parentNode;){var f;var g=c;f=b;D&&(g=g.cloneNode(),document.createElement("div").appendChild(g));f=w.call(g,f);if(f)return a(e,d,c);c=c.parentNode}}};"object"===typeof b.events&&E(b.events,function(a,b){var c,f;f=b.split(" ");c=f.shift();f=f.join(" ");e.addEventListener(c,d(a,f),!!f&&("blur"===c||"focus"===c))});var f=e.attributes;b.attributes&&!v.isNativeCustomElement(b.id)&&(new window.MutationObserver(function(a){a.forEach(function(a){var c=a.attributeName,
d=f[c];m(e,b,{name:c,newValue:d&&(d.value||d.nodeValue),oldValue:a.oldValue})})})).observe(e,{attributes:!0,attributeOldValue:!0});a=b.attributes;if("object"===typeof a)for(var c in a){var h=F(c);p(a,c)&&!p(e,h)&&o(e,c,h)}c=b.attributes;if("object"===typeof c)for(var g in c)p(c,g)&&(p(c[g],"value")&&!e.hasAttribute(g))&&(a=c[g].value,a="function"===typeof a?a(e):a,e.setAttribute(g,a));h=e.attributes;c=[];a=h.length;for(g=0;g<a;g++)c.push(h[g]);for(g=0;g<a;g++)h=c[g],m(e,b,{name:h.nodeName,newValue:h.value||
h.nodeValue});b.created&&b.created(e)}}function x(e,b){var a=r(e,b.id);!a.attached&&G(document,e)&&(a.attached=!0,b.attached&&b.attached(e),a.detached=!1)}function y(e,b){var a=r(e,b.id);a.detached||(a.detached=!0,b.detached&&b.detached(e),a.attached=!1)}function z(e){for(var b=0;b<e.length;b++){var a=e[b];if(!(a.nodeType!==A.ELEMENT_NODE||a.attributes[s])){for(var d=v.getForElement(a),f=d.length,c=0;c<f;c++){var h=a,g=d[c];q(h,g);x(h,g)}a=a.childNodes||[];a.length&&z(a)}}}function B(e){for(var b=
0;b<e.length;b++){var a=e[b];if(a.nodeType===A.ELEMENT_NODE){B(a.childNodes);for(var d=v.getForElement(a),f=d.length,c=0;c<f;c++)y(a,d[c])}}}Object.defineProperty(i,"__esModule",{value:!0});var s=f.ATTR_IGNORE,r=l&&l.__esModule?l["default"]:l,v=d&&d.__esModule?d["default"]:d,F=j.camelCase,G=j.elementContains,p=j.hasOwn,C=j.inherit,E=j.objEach,A=window.Node,f=window.HTMLElement.prototype,w=f.matches||f.msMatchesSelector||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector,D=!w.call(document.createElement("div"),
"div"),t=/Edge/.test(navigator.userAgent);i.initElements=z;i.removeElements=B;i.triggerAttached=x;i.triggerAttributeChanged=m;i.triggerCreated=q;i.triggerDetached=y};"function"===typeof k&&k.amd?k("exports ./constants ./data ./mutation-observer ./registry ./utils".split(" "),q):"undefined"!==typeof m&&q(m,__9d236359921e13b5fcf3157e2c735602,__e5ac83e1fd2c7d9ba811c5dc3cf8b392,__04e4ad44d1846e5700205516c1a42717,__2964ebf30f320caf67e277ab8abf2b53,__e41b80779e59ba9fc2f4dc8f4297bd33);return o.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-fix-ie-innerhtml', location = 'node_modules/skatejs/lib/fix-ie-innerhtml.js' */
("undefined"===typeof window?global:window).__5bf8bab9193a36a76f2f07e8489c8bac=function(){var f={exports:{}},h=f.exports,k={module:f,exports:h},d;d=function(g,c,b){var e=("undefined"===typeof window?global:window).define,a,i,b=[b,c,g].filter(function(a){return"function"===typeof a})[0],c=[c,g,[]].filter(Array.isArray)[0];a=b.apply(null,c.map(function(a){return k[a]}));i=typeof a;"function"===typeof e&&e("string"===typeof g?g:"__5bf8bab9193a36a76f2f07e8489c8bac",c,b);"string"===i?a=String(a):"number"===
i?a=Number(a):"boolean"===i&&(a=Boolean(a));void 0!==a&&(h=f.exports=a)};d.amd=!0;var j=function(){function g(a,c){var b=a.childNodes;if(b)for(var e=b.length,d=0;d<e;d++){var f=b[d];c(f,a);g(f,c)}}var c=/MSIE/.test(navigator.userAgent),b=/Trident/.test(navigator.userAgent),e=window.HTMLElement.prototype;if(c||b)if(c=Object.getOwnPropertyDescriptor(e,"innerHTML"),!c||!c.get._hasBeenEnhanced){b&&(window.MutationObserver=window.JsMutationObserver||window.MutationObserver);var a=Object.getOwnPropertyDescriptor(e,
"innerHTML"),b=function(){return a.get.call(this)};b._hasBeenEnhanced=!0;Object.defineProperty(e,"innerHTML",{get:b,set:function(b){g(this,function(a,b){var c=document.createEvent("MutationEvent");c.initMutationEvent("DOMNodeRemoved",true,false,b,null,null,null,null);a.dispatchEvent(c)});a.set.call(this,b)}})}};"function"===typeof d&&d.amd?d(["exports"],j):"undefined"!==typeof h&&j(h);return f.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-document-observer', location = 'node_modules/skatejs/lib/document-observer.js' */
("undefined"===typeof window?global:window).__b7cb55ffd65d50bc7384d171b3fbf223=function(){var c={exports:{}},f=c.exports,j={module:c,exports:f,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,"./fix-ie-innerhtml":__5bf8bab9193a36a76f2f07e8489c8bac,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,
"./fix-ie-innerhtml":__5bf8bab9193a36a76f2f07e8489c8bac,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33},d;d=function(d,e,b){var k=("undefined"===typeof window?global:window).define,a,g,b=[b,e,d].filter(function(a){return"function"===typeof a})[0],e=[e,d,[]].filter(Array.isArray)[0];a=b.apply(null,e.map(function(a){return j[a]}));g=typeof a;"function"===typeof k&&k("string"===typeof d?d:"__b7cb55ffd65d50bc7384d171b3fbf223",e,b);"string"===g?a=String(a):"number"===g?a=Number(a):"boolean"===g&&(a=Boolean(a));
void 0!==a&&(f=c.exports=a)};d.amd=!0;var i=function(d,e,b,c,a,g,f){function i(a){for(var d=a.length,c=0;c<d;c++){var b=a[c],e=b.addedNodes,b=b.removedNodes;e&&(e.length&&!l(e[0].parentNode))&&j(e);b&&b.length&&m(b)}}var h=b&&b.__esModule?b["default"]:b,j=c.initElements,m=c.removeElements,l=f.getClosestIgnoredElement;e.exports={register:function(a){a&&this.unregister();h.observer||(a=new window.MutationObserver(i),a.observe(document,{childList:!0,subtree:!0}),h.observer=a);return this},unregister:function(){h.observer&&
(h.observer.disconnect(),h.observer=void 0);return this}}};"function"===typeof d&&d.amd?d("exports module ./globals ./lifecycle ./mutation-observer ./fix-ie-innerhtml ./utils".split(" "),i):"undefined"!==typeof f&&"undefined"!==typeof c&&i(f,c,__6466b6e8107a8bd9775ee239234e3544,__3fef6ec7435c6573502a7e24c04dbfbc,__04e4ad44d1846e5700205516c1a42717,__5bf8bab9193a36a76f2f07e8489c8bac,__e41b80779e59ba9fc2f4dc8f4297bd33);return c.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-skate', location = 'node_modules/skatejs/lib/skate.js' */
("undefined"===typeof window?global:window).__23d805956abb7113753ee633dcc7a634=function(){var g={exports:{}},e=g.exports,n={module:g,exports:e,"./constants":__9d236359921e13b5fcf3157e2c735602,"./document-observer":__b7cb55ffd65d50bc7384d171b3fbf223,"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3,"./constants":__9d236359921e13b5fcf3157e2c735602,"./document-observer":__b7cb55ffd65d50bc7384d171b3fbf223,
"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3},c;c=function(k,h,d){var c=("undefined"===typeof window?global:window).define,a,j,d=[d,h,k].filter(function(a){return"function"===typeof a})[0],h=[h,k,[]].filter(Array.isArray)[0];a=d.apply(null,h.map(function(a){return n[a]}));j=typeof a;"function"===typeof c&&c("string"===typeof k?k:"__23d805956abb7113753ee633dcc7a634",
h,d);"string"===j?a=String(a):"number"===j?a=Number(a):"boolean"===j&&(a=Boolean(a));void 0!==a&&(e=g.exports=a)};c.amd=!0;var m=function(c,h,d,g,a,j,e,m){function f(i,b){b=l({},b);b=l(b,f.defaults);b.id=i;o.set(i,b);if(o.isNativeCustomElement(i)){var a=b["extends"]?document.createElement(b["extends"]).constructor.prototype:r.prototype;a.isPrototypeOf(b.prototype)||(b.prototype=l(Object.create(a),b.prototype,!0));a={prototype:l(b.prototype,{createdCallback:function(){s(this,b)},attachedCallback:function(){v(this,
b)},detachedCallback:function(){w(this,b)},attributeChangedCallback:function(a,i,c){x(this,b,{name:a,oldValue:i,newValue:c})}})};b["extends"]&&(a["extends"]=b["extends"]);return document.registerElement(i,a)}y();z.register(!!b.detached);if(o.isType(i,p)){var c=b,d=function(){var a;a=c["extends"];var b=c.id;a?(a=document.createElement(a),a.setAttribute("is",b)):a=document.createElement(b);c.prototype=d.prototype;s(a,c);return a};d.prototype=c.prototype;return d}}var q=function(a){return a&&a.__esModule?
a["default"]:a},c=d.TYPE_ATTRIBUTE,n=d.TYPE_CLASSNAME,p=d.TYPE_ELEMENT,z=q(g),s=a.triggerCreated,v=a.triggerAttached,w=a.triggerDetached,x=a.triggerAttributeChanged,t=a.initElements,o=q(j),d=e.debounce,l=e.inherit,e=q(m),r=window.HTMLElement,u=!!document.attachEvent,y=d(function(){var a=function(){t(document.documentElement.childNodes)},b;b=u?"complete"===document.readyState:"interactive"===document.readyState||"complete"===document.readyState;b?a():u?window.addEventListener("load",a):document.addEventListener("DOMContentLoaded",
a)});f.init=function(a){var b=a;if(!a)return a;"string"===typeof a?b=a=document.querySelectorAll(a):a instanceof r&&(b=[a]);t(b);return a};f.type={ATTRIBUTE:c,CLASSNAME:n,ELEMENT:p};f.version=e;f.defaults={attributes:void 0,events:void 0,"extends":void 0,id:"",prototype:{},resolvedAttribute:"resolved",template:void 0,type:p,unresolvedAttribute:"unresolved"};var A=window.skate;f.noConflict=function(){window.skate=A;return f};window.skate=f;h.exports=f};"function"===typeof c&&c.amd?c("exports module ./constants ./document-observer ./lifecycle ./registry ./utils ./version".split(" "),
m):"undefined"!==typeof e&&"undefined"!==typeof g&&m(e,g,__9d236359921e13b5fcf3157e2c735602,__b7cb55ffd65d50bc7384d171b3fbf223,__3fef6ec7435c6573502a7e24c04dbfbc,__2964ebf30f320caf67e277ab8abf2b53,__e41b80779e59ba9fc2f4dc8f4297bd33,__14e4e8bfa403103c4675c6cb0be7a4a3);return g.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-tether-0.6.5-tether', location = 'node_modules/tether/tether.js' */
("undefined"===typeof window?global:window).__74afe8b96acdee164fa987a4fdd7afc1=function(){var I={exports:{}},W=I.exports,X={module:I,exports:W},P;P=function(w,p,x){var B=("undefined"===typeof window?global:window).define,l,v,x=[x,p,w].filter(function(l){return"function"===typeof l})[0],p=[p,w,[]].filter(Array.isArray)[0];l=x.apply(null,p.map(function(l){return X[l]}));v=typeof l;"function"===typeof B&&B("string"===typeof w?w:"__74afe8b96acdee164fa987a4fdd7afc1",p,x);"string"===v?l=String(l):"number"===
v?l=Number(l):"boolean"===v&&(l=Boolean(l));void 0!==l&&(W=I.exports=l)};P.amd=!0;(function(w){var p,x,B,l,v,Q,R,Y,C,X={}.hasOwnProperty,ya=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},za=[].slice;null==this.Tether&&(this.Tether={modules:[]});var oa;oa=0;Y=function(){return oa++};C={};v=function(a){var b,c,d;d=a._tetherZeroElement;if(d==null){d=a.createElement("div");d.setAttribute("data-tether-id",Y());l(d.style,{top:0,left:0,position:"absolute"});
a.body.appendChild(d);a._tetherZeroElement=d}b=d.getAttribute("data-tether-id");if(C[b]==null){C[b]={};d=d.getBoundingClientRect();for(c in d){a=d[c];C[b][c]=a}x(function(){return C[b]=void 0})}return C[b]};l=function(a){var b,c,d,e,h,f;a==null&&(a={});b=[];Array.prototype.push.apply(b,arguments);f=b.slice(1);e=0;for(h=f.length;e<h;e++)if(b=f[e])for(c in b)if(X.call(b,c)){d=b[c];a[c]=d}return a};R=function(a,b){var c,d,e,h,f;if(a.classList!=null){h=b.split(" ");f=[];d=0;for(e=h.length;d<e;d++){c=
h[d];c.trim()&&f.push(a.classList.remove(c))}return f}return a.className=a.className.replace(RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")};p=function(a,b){var c,d,e,h,f;if(a.classList!=null){h=b.split(" ");f=[];d=0;for(e=h.length;d<e;d++){c=h[d];c.trim()&&f.push(a.classList.add(c))}return f}R(a,b);return a.className=a.className+(" "+b)};Q=function(a,b){return a.classList!=null?a.classList.contains(b):RegExp("(^| )"+b+"( |$)","gi").test(a.className)};B=[];x=function(a){return B.push(a)};
var g=function(){};g.prototype.on=function(a,b,c,d){var e;d==null&&(d=false);if(this.bindings==null)this.bindings={};if((e=this.bindings)[a]==null)e[a]=[];return this.bindings[a].push({handler:b,ctx:c,once:d})};g.prototype.once=function(a,b,c){return this.on(a,b,c,true)};g.prototype.off=function(a,b){var c,d;if(((c=this.bindings)!=null?c[a]:void 0)!=null){if(b==null)return delete this.bindings[a];c=0;for(d=[];c<this.bindings[a].length;)this.bindings[a][c].handler===b?d.push(this.bindings[a].splice(c,
1)):d.push(c++);return d}};g.prototype.trigger=function(){var a,b,c,d,e,h,f;c=arguments[0];a=2<=arguments.length?za.call(arguments,1):[];if((b=this.bindings)!=null&&b[c]){e=0;for(f=[];e<this.bindings[c].length;){h=this.bindings[c][e];d=h.handler;b=h.ctx;h=h.once;d.apply(b!=null?b:this,a);h?f.push(this.bindings[c].splice(e,1)):f.push(e++)}return f}};this.Tether.Utils={getScrollParent:function(a){var b,c,d;b=getComputedStyle(a).position;if(b==="fixed")return a;for(;a=a.parentNode;){try{c=getComputedStyle(a)}catch(e){}if(c==
null||/(auto|scroll)/.test(c.overflow+c["overflow-y"]+c["overflow-x"])&&(b!=="absolute"||(d=c.position)==="relative"||d==="absolute"||d==="fixed"))return a}return document.body},getBounds:function(a){var b,c,d,e,h;if(a===document){c=document;a=document.documentElement}else c=a.ownerDocument;d=c.documentElement;b={};h=a.getBoundingClientRect();for(e in h){a=h[e];b[e]=a}e=v(c);b.top=b.top-e.top;b.left=b.left-e.left;if(b.width==null)b.width=document.body.scrollWidth-b.left-b.right;if(b.height==null)b.height=
document.body.scrollHeight-b.top-b.bottom;b.top=b.top-d.clientTop;b.left=b.left-d.clientLeft;b.right=c.body.clientWidth-b.width-b.left;b.bottom=c.body.clientHeight-b.height-b.top;return b},getOffsetParent:function(a){return a.offsetParent||document.documentElement},extend:l,addClass:p,removeClass:R,hasClass:Q,updateClasses:function(a,b,c){var d,e,h;e=0;for(h=c.length;e<h;e++){d=c[e];ya.call(b,d)<0&&Q(a,d)&&R(a,d)}h=[];c=0;for(e=b.length;c<e;c++){d=b[c];Q(a,d)?h.push(void 0):h.push(p(a,d))}return h},
defer:x,flush:function(){var a,b;for(b=[];a=B.pop();)b.push(a());return b},uniqueId:Y,Evented:g,getScrollBarSize:function(){var a,b,c;a=document.createElement("div");a.style.width="100%";a.style.height="200px";b=document.createElement("div");l(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);c=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;if(c===a)a=b.clientWidth;
document.body.removeChild(b);b=c-a;return{width:b,height:b}}};var pa,qa,Z,D,J,$,aa,ra,S,T,ba,E,U,ca,sa,V,K,da,ea,fa,ga,z,F,ha,ta,Aa=[].slice;if(null==this.Tether)throw Error("You must include the utils.js file before tether.js");D=this.Tether;g=D.Utils;sa=g.getScrollParent;E=g.getBounds;U=g.getOffsetParent;T=g.extend;J=g.addClass;ga=g.removeClass;ha=g.updateClasses;S=g.defer;ba=g.flush;ca=g.getScrollBarSize;ta=function(a,b,c){c==null&&(c=1);return a+c>=b&&b>=a-c};a:{var A,G,L,M,g=document.createElement("div");
M=["transform","webkitTransform","OTransform","MozTransform","msTransform"];G=0;for(L=M.length;G<L;G++)if(A=M[G],void 0!==g.style[A]){F=A;break a}F=void 0}z=[];fa=function(){var a,b,c;b=0;for(c=z.length;b<c;b++){a=z[b];a.position(false)}return ba()};V=function(){var a;return(a=typeof performance!=="undefined"&&performance!==null?typeof performance.now==="function"?performance.now():void 0:void 0)!=null?a:+new Date};var N,H,O,ia;O=H=N=null;ia=function(){if(H!=null&&H>16){H=Math.min(H-16,250);O=setTimeout(ia,
250)}else if(!(N!=null&&V()-N<10)){if(O!=null){clearTimeout(O);O=null}N=V();fa();return H=V()-N}};L=["resize","scroll","touchmove"];M=[];A=0;for(G=L.length;A<G;A++)g=L[A],M.push(window.addEventListener(g,ia));pa={center:"center",left:"right",right:"left"};qa={middle:"middle",top:"bottom",bottom:"top"};Z={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"};ra=function(a,b){var c,d;c=a.left;d=a.top;c==="auto"&&(c=pa[b.left]);d==="auto"&&(d=qa[b.top]);return{left:c,top:d}};aa=function(a){var b,
c;return{left:(b=Z[a.left])!=null?b:a.left,top:(c=Z[a.top])!=null?c:a.top}};$=function(){var a,b,c,d,e,h;b=1<=arguments.length?Aa.call(arguments,0):[];c={top:0,left:0};e=0;for(h=b.length;e<h;e++){a=b[e];d=a.top;a=a.left;typeof d==="string"&&(d=parseFloat(d,10));typeof a==="string"&&(a=parseFloat(a,10));c.top=c.top+d;c.left=c.left+a}return c};K=function(a,b){if(typeof a.left==="string"&&a.left.indexOf("%")!==-1)a.left=parseFloat(a.left,10)/100*b.width;if(typeof a.top==="string"&&a.top.indexOf("%")!==
-1)a.top=parseFloat(a.top,10)/100*b.height;return a};da=ea=function(a){a=a.split(" ");return{top:a[0],left:a[1]}};g=function(a){var b=this.position,c=this;this.position=function(){return b.apply(c,arguments)};var d,e,h,f;z.push(this);this.history=[];this.setOptions(a,false);h=D.modules;d=0;for(e=h.length;d<e;d++){a=h[d];(f=a.initialize)!=null&&f.call(this)}this.position()};g.modules=[];g.prototype.getClass=function(a){var b,c;return(b=this.options.classes)!=null&&b[a]?this.options.classes[a]:((c=
this.options.classes)!=null?c[a]:void 0)!==false?this.options.classPrefix?""+this.options.classPrefix+"-"+a:a:""};g.prototype.setOptions=function(a,b){var c,d,e,h;this.options=a;b==null&&(b=true);c=this.options=T({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options);this.element=c.element;this.target=c.target;this.targetModifier=c.targetModifier;if(this.target==="viewport"){this.target=document.body;this.targetModifier="visible"}else if(this.target==="scroll-handle"){this.target=
document.body;this.targetModifier="scroll-handle"}h=["element","target"];d=0;for(e=h.length;d<e;d++){c=h[d];if(this[c]==null)throw Error("Tether Error: Both element and target must be defined");this[c].jquery!=null?this[c]=this[c][0]:typeof this[c]==="string"&&(this[c]=document.querySelector(this[c]))}J(this.element,this.getClass("element"));J(this.target,this.getClass("target"));if(!this.options.attachment)throw Error("Tether Error: You must provide an attachment");this.targetAttachment=da(this.options.targetAttachment);
this.attachment=da(this.options.attachment);this.offset=ea(this.options.offset);this.targetOffset=ea(this.options.targetOffset);this.scrollParent!=null&&this.disable();this.scrollParent=this.targetModifier==="scroll-handle"?this.target:sa(this.target);if(this.options.enabled!==false)return this.enable(b)};g.prototype.getTargetBounds=function(){var a,b,c,d,e,h;if(this.targetModifier!=null)switch(this.targetModifier){case "visible":if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,
height:innerHeight,width:innerWidth};a=E(this.target);d={height:a.height,width:a.width,top:a.top,left:a.left};d.height=Math.min(d.height,a.height-(pageYOffset-a.top));d.height=Math.min(d.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));d.height=Math.min(innerHeight,d.height);d.height=d.height-2;d.width=Math.min(d.width,a.width-(pageXOffset-a.left));d.width=Math.min(d.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));d.width=Math.min(innerWidth,d.width);d.width=d.width-2;if(d.top<
pageYOffset)d.top=pageYOffset;if(d.left<pageXOffset)d.left=pageXOffset;return d;case "scroll-handle":e=this.target;if(e===document.body){e=document.documentElement;a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}}else a=E(e);h=getComputedStyle(e);b=e.scrollWidth>e.clientWidth||"scroll"===[h.overflow,h.overflowX]||this.target!==document.body;c=0;b&&(c=15);c=a.height-parseFloat(h.borderTopWidth)-parseFloat(h.borderBottomWidth)-c;d={width:15,height:c*0.975*(c/e.scrollHeight),
left:a.left+a.width-parseFloat(h.borderLeftWidth)-15};b=0;c<408&&this.target===document.body&&(b=-1.1E-4*Math.pow(c,2)-0.00727*c+22.58);if(this.target!==document.body)d.height=Math.max(d.height,24);e=this.target.scrollTop/(e.scrollHeight-c);d.top=e*(c-d.height-b)+a.top+parseFloat(h.borderTopWidth);if(this.target===document.body)d.height=Math.max(d.height,24);return d}else return E(this.target)};g.prototype.clearCache=function(){return this._cache={}};g.prototype.cache=function(a,b){if(this._cache==
null)this._cache={};this._cache[a]==null&&(this._cache[a]=b.call(this));return this._cache[a]};g.prototype.enable=function(a){a==null&&(a=true);J(this.target,this.getClass("enabled"));J(this.element,this.getClass("enabled"));this.enabled=true;this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position);if(a)return this.position()};g.prototype.disable=function(){ga(this.target,this.getClass("enabled"));ga(this.element,this.getClass("enabled"));this.enabled=false;if(this.scrollParent!=
null)return this.scrollParent.removeEventListener("scroll",this.position)};g.prototype.destroy=function(){var a,b,c,d,e;this.disable();e=[];a=c=0;for(d=z.length;c<d;a=++c){b=z[a];if(b===this){z.splice(a,1);break}else e.push(void 0)}return e};g.prototype.updateAttachClasses=function(a,b){var c,d,e,h,f,t=this;if(a==null)a=this.attachment;if(b==null)b=this.targetAttachment;e=["left","top","bottom","right","middle","center"];(c=this._addAttachClasses)!=null&&c.length&&this._addAttachClasses.splice(0,
this._addAttachClasses.length);c=this._addAttachClasses!=null?this._addAttachClasses:this._addAttachClasses=[];a.top&&c.push(""+this.getClass("element-attached")+"-"+a.top);a.left&&c.push(""+this.getClass("element-attached")+"-"+a.left);b.top&&c.push(""+this.getClass("target-attached")+"-"+b.top);b.left&&c.push(""+this.getClass("target-attached")+"-"+b.left);d=[];h=0;for(f=e.length;h<f;h++){c=e[h];d.push(""+this.getClass("element-attached")+"-"+c)}h=0;for(f=e.length;h<f;h++){c=e[h];d.push(""+this.getClass("target-attached")+
"-"+c)}return S(function(){if(t._addAttachClasses!=null){ha(t.element,t._addAttachClasses,d);ha(t.target,t._addAttachClasses,d);return t._addAttachClasses=void 0}})};g.prototype.position=function(a){var b,c,d,e,h,f,t,m,j,k,g,o,i,n,q,l,y,r,s,p,u=this;a==null&&(a=true);if(this.enabled){this.clearCache();i=ra(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);b=this.cache("element-bounds",function(){return E(u.element)});g=b.width;c=b.height;if(g===0&&c===0&&this.lastSize!=
null){c=this.lastSize;g=c.width;c=c.height}else this.lastSize={width:g,height:c};d=q=this.cache("target-bounds",function(){return u.getTargetBounds()});t=K(aa(this.attachment),{width:g,height:c});n=K(aa(i),d);e=K(this.offset,{width:g,height:c});h=K(this.targetOffset,d);t=$(t,e);n=$(n,h);d=q.left+n.left-t.left;l=q.top+n.top-t.top;p=D.modules;y=0;for(s=p.length;y<s;y++){f=p[y];f=f.position.call(this,{left:d,top:l,targetAttachment:i,targetPos:q,attachment:this.attachment,elementPos:b,offset:t,targetOffset:n,
manualOffset:e,manualTargetOffset:h,scrollbarSize:m});if(!(f==null||typeof f!=="object")){if(f===false)return false;l=f.top;d=f.left}}b={page:{top:l,left:d},viewport:{top:l-pageYOffset,bottom:pageYOffset-l-c+innerHeight,left:d-pageXOffset,right:pageXOffset-d-g+innerWidth}};if(document.body.scrollWidth>window.innerWidth){m=this.cache("scrollbar-size",ca);b.viewport.bottom=b.viewport.bottom-m.height}if(document.body.scrollHeight>window.innerHeight){m=this.cache("scrollbar-size",ca);b.viewport.right=
b.viewport.right-m.width}if((k=document.body.style.position)!==""&&k!=="static"||(o=document.body.parentElement.style.position)!==""&&o!=="static"){b.page.bottom=document.body.scrollHeight-l-c;b.page.right=document.body.scrollWidth-d-g}if(((r=this.options.optimizations)!=null?r.moveElement:void 0)!==false&&this.targetModifier==null){j=this.cache("target-offsetparent",function(){return U(u.target)});g=this.cache("target-offsetparent-bounds",function(){return E(j)});k=getComputedStyle(j);getComputedStyle(this.element);
m={};i=["Top","Left","Bottom","Right"];r=0;for(c=i.length;r<c;r++){o=i[r];m[o.toLowerCase()]=parseFloat(k["border"+o+"Width"])}g.right=document.body.scrollWidth-g.left-g.width+m.right;g.bottom=document.body.scrollHeight-g.top-g.height+m.bottom;if(b.page.top>=g.top+m.top&&b.page.bottom>=g.bottom&&b.page.left>=g.left+m.left&&b.page.right>=g.right){o=j.scrollTop;k=j.scrollLeft;b.offset={top:b.page.top-g.top+o-m.top,left:b.page.left-g.left+k-m.left}}}this.move(b);this.history.unshift(b);this.history.length>
3&&this.history.pop();a&&ba();return true}};g.prototype.move=function(a){var b,c,d,e,h,f,g,m,j,k,l,o,i=this;if(this.element.parentNode!=null){f={};for(g in a){f[g]={};for(d in a[g]){c=false;l=this.history;j=0;for(k=l.length;j<k;j++){h=l[j];if(!ta((o=h[g])!=null?o[d]:void 0,a[g][d])){c=true;break}}c||(f[g][d]=true)}}b={top:"",left:"",right:"",bottom:""};h=function(a,c){var d,e;if(((d=i.options.optimizations)!=null?d.gpu:void 0)!==false){if(a.top){b.top=0;e=c.top}else{b.bottom=0;e=-c.bottom}if(a.left){b.left=
0;d=c.left}else{b.right=0;d=-c.right}b[F]="translateX("+Math.round(d)+"px) translateY("+Math.round(e)+"px)";if(F!=="msTransform")return b[F]=b[F]+" translateZ(0)"}else{a.top?b.top=""+c.top+"px":b.bottom=""+c.bottom+"px";return a.left?b.left=""+c.left+"px":b.right=""+c.right+"px"}};c=false;if((f.page.top||f.page.bottom)&&(f.page.left||f.page.right)){b.position="absolute";h(f.page,a.page)}else if((f.viewport.top||f.viewport.bottom)&&(f.viewport.left||f.viewport.right)){b.position="fixed";h(f.viewport,
a.viewport)}else if(f.offset!=null&&f.offset.top&&f.offset.left){b.position="absolute";e=this.cache("target-offsetparent",function(){return U(i.target)});U(this.element)!==e&&S(function(){i.element.parentNode.removeChild(i.element);return e.appendChild(i.element)});h(f.offset,a.offset);c=true}else{b.position="absolute";h({top:true,left:true},a.page)}if(!c&&this.element.parentNode.tagName!=="BODY"){this.element.parentNode.removeChild(this.element);document.body.appendChild(this.element)}m={};c=false;
for(d in b){f=b[d];a=this.element.style[d];if(a!==""&&f!==""&&(d==="top"||d==="left"||d==="bottom"||d==="right")){a=parseFloat(a);f=parseFloat(f)}if(a!==f){c=true;m[d]=b[d]}}if(c)return S(function(){return T(i.element.style,m)})}};D.position=fa;this.Tether=T(g,D);var ja,ua,ka,va,la,ma,u=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},g=this.Tether.Utils;la=g.getBounds;ka=g.extend;ma=g.updateClasses;ua=g.defer;ja=["left","top","right","bottom"];
va=function(a,b){var c,d,e,h,f;b==="scrollParent"?b=a.scrollParent:b==="window"&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]);if(b===document)b=b.documentElement;if(b.nodeType!=null){c=d=la(b);e=getComputedStyle(b);b=[c.left,c.top,d.width+c.left,d.height+c.top];c=h=0;for(f=ja.length;h<f;c=++h){d=ja[c];d=d[0].toUpperCase()+d.substr(1);b[c]=d==="Top"||d==="Left"?b[c]+parseFloat(e["border"+d+"Width"]):b[c]-parseFloat(e["border"+d+"Width"])}}return b};this.Tether.modules.push({position:function(a){var b,
c,d,e,h,f,g,m,j,k,l,o,i,n,q,p,y,r,s,w,x,v=this;i=a.top;j=a.left;a=a.targetAttachment;if(!this.options.constraints)return true;n=this.cache("element-bounds",function(){return la(v.element)});m=n.height;n=n.width;if(n===0&&m===0&&this.lastSize!=null){m=this.lastSize;n=m.width;m=m.height}o=this.cache("target-bounds",function(){return v.getTargetBounds()});l=o.height;o=o.width;k={};f={};c=[this.getClass("pinned"),this.getClass("out-of-bounds")];q=this.options.constraints;f=0;for(k=q.length;f<k;f++){g=
q[f];g.outOfBoundsClass&&c.push(g.outOfBoundsClass);g.pinnedClass&&c.push(g.pinnedClass)}k=0;for(p=c.length;k<p;k++){f=c[k];e=["left","top","right","bottom"];q=0;for(y=e.length;q<y;q++){g=e[q];c.push(""+f+"-"+g)}}b=[];k=ka({},a);f=ka({},this.attachment);y=this.options.constraints;q=0;for(p=y.length;q<p;q++){g=y[q];e=g.to;d=g.attachment;g=g.pin;d==null&&(d="");if(u.call(d," ")>=0){h=d.split(" ");d=h[0];h=h[1]}else h=d;e=va(this,e);if(d==="target"||d==="both"){if(i<e[1]&&k.top==="top"){i=i+l;k.top=
"bottom"}if(i+m>e[3]&&k.top==="bottom"){i=i-l;k.top="top"}}if(d==="together"){if(i<e[1]&&k.top==="top")if(f.top==="bottom"){i=i+l;k.top="bottom";i=i+m;f.top="top"}else if(f.top==="top"){i=i+l;k.top="bottom";i=i-m;f.top="bottom"}if(i+m>e[3]&&k.top==="bottom")if(f.top==="top"){i=i-l;k.top="top";i=i-m;f.top="bottom"}else if(f.top==="bottom"){i=i-l;k.top="top";i=i+m;f.top="top"}if(k.top==="middle")if(i+m>e[3]&&f.top==="top"){i=i-m;f.top="bottom"}else if(i<e[1]&&f.top==="bottom"){i=i+m;f.top="top"}}if(h===
"target"||h==="both"){if(j<e[0]&&k.left==="left"){j=j+o;k.left="right"}if(j+n>e[2]&&k.left==="right"){j=j-o;k.left="left"}}if(h==="together")if(j<e[0]&&k.left==="left")if(f.left==="right"){j=j+o;k.left="right";j=j+n;f.left="left"}else{if(f.left==="left"){j=j+o;k.left="right";j=j-n;f.left="right"}}else if(j+n>e[2]&&k.left==="right")if(f.left==="left"){j=j-o;k.left="left";j=j-n;f.left="right"}else{if(f.left==="right"){j=j-o;k.left="left";j=j+n;f.left="left"}}else if(k.left==="center")if(j+n>e[2]&&f.left===
"left"){j=j-n;f.left="right"}else if(j<e[0]&&f.left==="right"){j=j+n;f.left="left"}if(d==="element"||d==="both"){if(i<e[1]&&f.top==="bottom"){i=i+m;f.top="top"}if(i+m>e[3]&&f.top==="top"){i=i-m;f.top="bottom"}}if(h==="element"||h==="both"){if(j<e[0]&&f.left==="right"){j=j+n;f.left="left"}if(j+n>e[2]&&f.left==="left"){j=j-n;f.left="right"}}if(typeof g==="string"){s=r=h=d=void 0;r=g.split(",");s=[];h=0;for(d=r.length;h<d;h++){g=r[h];s.push(g.trim())}g=s}else g===true&&(g=["top","left","right","bottom"]);
g||(g=[]);h=[];d=[];if(i<e[1])if(u.call(g,"top")>=0){i=e[1];h.push("top")}else d.push("top");if(i+m>e[3])if(u.call(g,"bottom")>=0){i=e[3]-m;h.push("bottom")}else d.push("bottom");if(j<e[0])if(u.call(g,"left")>=0){j=e[0];h.push("left")}else d.push("left");if(j+n>e[2])if(u.call(g,"right")>=0){j=e[2]-n;h.push("right")}else d.push("right");if(h.length){e=(w=this.options.pinnedClass)!=null?w:this.getClass("pinned");b.push(e);s=0;for(r=h.length;s<r;s++){g=h[s];b.push(""+e+"-"+g)}}if(d.length){e=(x=this.options.outOfBoundsClass)!=
null?x:this.getClass("out-of-bounds");b.push(e);s=0;for(r=d.length;s<r;s++){g=d[s];b.push(""+e+"-"+g)}}if(u.call(h,"left")>=0||u.call(h,"right")>=0)f.left=k.left=false;if(u.call(h,"top")>=0||u.call(h,"bottom")>=0)f.top=k.top=false;(k.top!==a.top||k.left!==a.left||f.top!==this.attachment.top||f.left!==this.attachment.left)&&this.updateAttachClasses(f,k)}ua(function(){ma(v.target,b,c);return ma(v.element,b,c)});return{top:i,left:j}}});var wa,xa,na,g=this.Tether.Utils;xa=g.getBounds;na=g.updateClasses;
wa=g.defer;this.Tether.modules.push({position:function(a){var b,c,d,e,h,f,g,m,j,k,l,o,i,n=this;g=a.top;e=a.left;f=this.cache("element-bounds",function(){return xa(n.element)});a=f.height;f=f.width;m=this.getTargetBounds();d=g+a;h=e+f;a=[];if(g<=m.bottom&&d>=m.top){i=["left","right"];j=0;for(o=i.length;j<o;j++){f=i[j];((k=m[f])===e||k===h)&&a.push(f)}}if(e<=m.right&&h>=m.left){h=["top","bottom"];k=0;for(e=h.length;k<e;k++){f=h[k];((l=m[f])===g||l===d)&&a.push(f)}}c=[];b=[];g=["left","top","right",
"bottom"];c.push(this.getClass("abutted"));l=0;for(m=g.length;l<m;l++){f=g[l];c.push(""+this.getClass("abutted")+"-"+f)}a.length&&b.push(this.getClass("abutted"));g=0;for(l=a.length;g<l;g++){f=a[g];b.push(""+this.getClass("abutted")+"-"+f)}wa(function(){na(n.target,b,c);return na(n.element,b,c)});return true}});this.Tether.modules.push({position:function(a){var b,c,d;d=a.top;b=a.left;if(this.options.shift){a=function(a){return typeof a==="function"?a.call(this,{top:d,left:b}):a};c=a(this.options.shift);
if(typeof c==="string"){c=c.split(" ");c[1]||(c[1]=c[0]);a=c[0];c=c[1];a=parseFloat(a,10);c=parseFloat(c,10)}else{c=[c.top,c.left];a=c[0];c=c[1]}d=d+a;b=b+c;return{top:d,left:b}}}});w.Tether=this.Tether;"function"===typeof P?P([],function(){return w.Tether}):"object"===typeof W&&(I.exports=w.Tether)})(this);return I.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-version', location = 'src/js/aui/version.js' */
("undefined"===typeof window?global:window).__849973663ed3d680bf7bf58ac8b9aec5=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("version","7.10.1");b.default="7.10.1";return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-prevent-default', location = 'src/js/aui/prevent-default.js' */
("undefined"===typeof window?global:window).__9d16f59b4360a103098a80db6f5b5d72=function(){function c(a){a.preventDefault()}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("preventDefault",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-stop-event', location = 'src/js/aui/stop-event.js' */
("undefined"===typeof window?global:window).__39f8d3139fef802ea62bd4a466864168=function(){function b(a){a.stopPropagation();return!1}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=__c88c0dc6258c37804917fb6a0e4092fa,a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},b=(0,d.fn)(b,"stopEvent",{alternativeName:"preventDefault()",sinceVersion:"5.8.0"});(0,a.default)("stopEvent",b);c.default=b;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-index-of', location = 'src/js/aui/index-of.js' */
("undefined"===typeof window?global:window).__7c1c1d052861cfa4c39b964e56839f98=function(){function d(b,c,a){var d=b.length;for(a?0>a&&(a=Math.max(0,d+a)):a=0;a<d;a++)if(b[a]===c)return a;return-1}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b};(0,b.default)("indexOf",d);c.default=d;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-contains', location = 'src/js/aui/contains.js' */
("undefined"===typeof window?global:window).__81cf7c69f2449ab89d910da23ce7c956=function(){function d(a,b){return-1<(0,e.default)(a,b)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},c=__7c1c1d052861cfa4c39b964e56839f98,e=c&&c.__esModule?c:{"default":c};(0,a.default)("contains",d);b.default=d;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-include', location = 'src/js/aui/include.js' */
("undefined"===typeof window?global:window).__1272ae1ce601d10da74dda15283d7de0=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function b(a){if(!(0,f.default)(e,a)){e.push(a);var b=document.createElement("script");b.src=a;(0,g.default)("body").append(b)}}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var g=d(__bd7207540b95ff683caa1d3c0bfcc3d7),h=__c88c0dc6258c37804917fb6a0e4092fa,f=d(__81cf7c69f2449ab89d910da23ce7c956),i=d(__9a668cbde1e182d8e721c23580356df2),
e=[],b=(0,h.fn)(b,"include",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use a proper module loader instead."});(0,i.default)("include",b);c.default=b;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-toggle-class-name', location = 'src/js/aui/toggle-class-name.js' */
("undefined"===typeof window?global:window).__24be96774d1dc9be07992cc8431cd955=function(){function c(a,b){(a=(0,e.default)(a))&&a.toggleClass(b)}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"toggleClassName",{sinceVersion:"5.8.0"});(0,b.default)("toggleClassName",c);d.default=c;
return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-set-visible', location = 'src/js/aui/set-visible.js' */
("undefined"===typeof window?global:window).__0f0bf05abd4e432d62689fada588acec=function(){function d(a,b){if(a=(0,c.default)(a))(0,c.default)(a).each(function(){var a=(0,c.default)(this).hasClass("hidden");a&&b?(0,c.default)(this).removeClass("hidden"):!a&&!b&&(0,c.default)(this).addClass("hidden")})}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,c=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,
b=b&&b.__esModule?b:{"default":b},d=(0,a.fn)(d,"setVisible",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.addClass() / removeClass() instead."});(0,b.default)("setVisible",d);e.default=d;return e=e["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-set-current', location = 'src/js/aui/set-current.js' */
("undefined"===typeof window?global:window).__6a7d491adb2a09c02e4e3ac909eac82b=function(){function c(a,b){if(a=(0,e.default)(a))b?a.addClass("current"):a.removeClass("current")}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"setCurrent",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.addClass() / removeClass() instead."});
(0,b.default)("setCurrent",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-is-visible', location = 'src/js/aui/is-visible.js' */
("undefined"===typeof window?global:window).__5a60a658948a2c0860b04ed1622fa0a4=function(){function c(a){return!(0,e.default)(a).hasClass("hidden")}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"isVisible",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.hasClass() instead."});
(0,b.default)("isVisible",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-is-clipped', location = 'src/js/aui/is-clipped.js' */
("undefined"===typeof window?global:window).__ee776d9150ae4c2ceb7a2b4f89a0f3e4=function(){function c(a){a=(0,d.default)(a);return a.prop("scrollWidth")>a.prop("clientWidth")}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,d=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("isClipped",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-params', location = 'src/js/aui/params.js' */
("undefined"===typeof window?global:window).__ebc0de961d64dceea3e57e01410a830b=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};b.default=(0,a.default)("params",{});return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-populate-parameters', location = 'src/js/aui/populate-parameters.js' */
("undefined"===typeof window?global:window).__42c7868600dc182ad91aa15094975e87=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){a||(a=g.default);(0,f.default)(".parameters input").each(function(){var c=this.value,b=this.title||this.id;(0,f.default)(this).hasClass("list")?a[b]?a[b].push(c):a[b]=[c]:a[b]=c.match(/^(tru|fals)e$/i)?c.toLowerCase()==="true":c})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=d(__bd7207540b95ff683caa1d3c0bfcc3d7),
h=d(__9a668cbde1e182d8e721c23580356df2),g=d(__ebc0de961d64dceea3e57e01410a830b);(0,h.default)("populateParameters",e);b.default=e;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-log', location = 'src/js/aui/internal/log.js' */
("undefined"===typeof window?global:window).__2f5c294b01e66b15309518e39bcb949d=function(){function c(a){return function(){"undefined"!==typeof console&&console[a]&&Function.prototype.apply.call(console[a],console,arguments)}}var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.error=a.warn=a.log=void 0;var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},d=c("log"),e=c("warn"),f=c("error");(0,b.default)("error",f);(0,b.default)("log",d);(0,b.default)("warn",
e);a.log=d;a.warn=e;a.error=f;return a}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-to-init', location = 'src/js/aui/to-init.js' */
("undefined"===typeof window?global:window).__3ceeda9744dc906daba5ed46a442b9e1=function(){function f(a){(0,g.default)(function(){try{a.apply(this,arguments)}catch(b){d.log("Failed to run init function: "+b+"\n"+a.toString())}});return this}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,g=a&&a.__esModule?a:{"default":a},d;if((a=__2f5c294b01e66b15309518e39bcb949d)&&a.__esModule)d=a;else{var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(e[b]=a[b]);e.default=a;d=e}b=(b=__9a668cbde1e182d8e721c23580356df2)&&b.__esModule?b:{"default":b};(0,b.default)("toInit",f);c.default=f;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-firebug', location = 'src/js/aui/firebug.js' */
("undefined"===typeof window?global:window).__469e4c263aa7b3b7681fe7afc590fcf6=function(){function e(){}function d(){var a=(0,g.default)(document.createElement("script"));a.attr("src","https://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js");(0,g.default)("head").append(a);window.firebug?d.init():setTimeout(d,0)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.warnAboutFirebug=b.firebug=void 0;var a=__bd7207540b95ff683caa1d3c0bfcc3d7,g=a&&a.__esModule?a:{"default":a},
c;if((a=__c88c0dc6258c37804917fb6a0e4092fa)&&a.__esModule)c=a;else{var f={};if(null!=a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(f[c]=a[c]);f.default=a;c=f}a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};b.firebug=d=c.fn(d,"firebug",{sinceVersion:"5.1.0"});b.warnAboutFirebug=e=c.fn(e,"warnAboutFirebug",{sinceVersion:"5.8.0"});(0,a.default)("firebug",d);(0,a.default)("warnAboutFirebug",e);b.firebug=d;b.warnAboutFirebug=e;return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-clone', location = 'src/js/aui/clone.js' */
("undefined"===typeof window?global:window).__4702df1831e4f587867761c58d6065cc=function(){function c(a){return(0,d.default)(a).clone().removeAttr("id")}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,d=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("clone",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-alphanum', location = 'src/js/aui/alphanum.js' */
("undefined"===typeof window?global:window).__733a994f2a095ea240f8e22eea3e73b2=function(){function h(c,d){for(var c=(c+"").toLowerCase(),d=(d+"").toLowerCase(),b=/(\d+|\D+)/g,e=c.match(b),b=d.match(b),h=Math.max(e.length,b.length),a=0;a<h;a++){if(a===e.length)return-1;if(a===b.length)return 1;var f=parseInt(e[a],10)+"",g=parseInt(b[a],10)+"";if(f===e[a]&&g===b[a]&&f!==g)return(f-g)/Math.abs(f-g);if((f!==e[a]||g!==b[a])&&e[a]!==b[a])return e[a]<b[a]?-1:1}return 0}var d={};"use strict";Object.defineProperty(d,
"__esModule",{value:!0});var c=__9a668cbde1e182d8e721c23580356df2,c=c&&c.__esModule?c:{"default":c};(0,c.default)("alphanum",h);d.default=h;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-on-text-resize', location = 'src/js/aui/on-text-resize.js' */
("undefined"===typeof window?global:window).__d19ef2a63d3d038250056497229b8b7e=function(){function c(a){if("function"===typeof a)if(c["on-text-resize"])c["on-text-resize"].push(function(b){a(b)});else{var b=(0,e.default)("<div></div>");b.css({width:"1em",height:"1em",position:"absolute",top:"-9999em",left:"-9999em"});(0,e.default)("body").append(b);b.size=b.width();setInterval(function(){if(b.size!==b.width()){b.size=b.width();for(var a=0,d=c["on-text-resize"].length;a<d;a++)c["on-text-resize"][a](b.size)}},
0);c.em=b;c["on-text-resize"]=[function(b){a(b)}]}}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("onTextResize",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-unbind-text-resize', location = 'src/js/aui/unbind-text-resize.js' */
("undefined"===typeof window?global:window).__73c34f0fd40605f38dff315fb2d9163e=function(){function e(b){for(var a=0,c=d.default["on-text-resize"].length;a<c;a++)if(d.default["on-text-resize"][a]===b)return d.default["on-text-resize"].splice(a,1)}var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=__d19ef2a63d3d038250056497229b8b7e,d=c&&c.__esModule?c:{"default":c};(0,b.default)("unbindTextResize",e);a.default=
e;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-escape', location = 'src/js/aui/escape.js' */
("undefined"===typeof window?global:window).__ca63641f32276b57dde13a39951ecded=function(){function c(a){return d(a).replace(/%u\w{4}/gi,function(a){return unescape(a)})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},d=window.escape;(0,a.default)("escape",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-escape-html', location = 'src/js/aui/escape-html.js' */
("undefined"===typeof window?global:window).__75c0ba5c1d5da818c39f0ae31d9f5724=function(){function c(a){return a.replace(/[&"'<>`]/g,function(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"===typeof b[a]?b[a]:"&quot;"})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("escapeHtml",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-filter-by-search', location = 'src/js/aui/filter-by-search.js' */
("undefined"===typeof window?global:window).__188b1da071b0ba4a07b78a29f6581874=function(){function c(b,c,a){if(!c)return[];var e=a&&a.keywordsField||"keywords",d=a&&a.ignoreForCamelCase?"i":"",h=a&&a.matchBoundary?"\\b":"",f=[];c.split(a&&a.splitRegex||/\s+/).forEach(function(a){a=[RegExp(h+a,"i")];if(/^([A-Z][a-z]*) {2,}$/.test(this)){var b=this.replace(/([A-Z][a-z]*)/g,"\\b$1[^,]*");a.push(RegExp(b,d))}f.push(a)});var g=[];b.forEach(function(a){for(var b=0;b<f.length;b++){for(var c=!1,d=0;d<f[b].length;d++)if(f[b][d].test(a[e])){c=
!0;break}if(!c)return}g.push(a)});return g}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,d.fn)(c,"filterBySearch",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. If products require this function, this should be copied."});(0,b.default)("filterBySearch",c);e.default=c;return e=e["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-debounce', location = 'src/js/aui/debounce.js' */
("undefined"===typeof window?global:window).__797d10010c51da30b099c976f973e278=function(){function g(a,b){var c,d;return function(){var e=arguments,f=this;clearTimeout(c);c=setTimeout(function(){d=a.apply(f,e);f=e=null},b);return d}}function h(a,b){var c=null,d;return function(){var e=this,f=arguments;null===c&&(d=a.apply(e,f));clearTimeout(c);c=setTimeout(function(){c=e=f=null},b);return d}}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.default=g;b.debounceImmediate=h;var a=
__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("debounce",g);(0,a.default)("debounceImmediate",h);return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-unique-id', location = 'src/js/aui/unique-id.js' */
("undefined"===typeof window?global:window).__e1499ff20858265795f80d7a4fc9c0f4=function(){function e(a){d=f++ +"";b=a?a+d:"aui-uid-"+d;if(document.getElementById(b)&&(b=b+"-"+(new Date).getTime(),document.getElementById(b)))throw Error('Timestamped fallback ID "'+b+'" exists.');return b}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},d,b,f=0;(0,a.default)("id",e);c.default=e;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-add-id', location = 'src/js/aui/internal/add-id.js' */
("undefined"===typeof window?global:window).__720511231eacfd9a564b2acaf400d3c5=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){var c=(0,e.default)(a),d=b||!1;c.each(function(){var a=(0,e.default)(this);a.attr("id")||a.attr("id",(0,f.default)(d))})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=c(__bd7207540b95ff683caa1d3c0bfcc3d7),g=c(__9a668cbde1e182d8e721c23580356df2),f=c(__e1499ff20858265795f80d7a4fc9c0f4);(0,g.default)("_addID",d);
b.default=d;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-forms', location = 'src/js/aui/forms.js' */
("undefined"===typeof window?global:window).__373dfbf532dc7dad0a2fbd134ab1e791=function(){function c(a,b){var c=(0,d.default)(a);"undefined"===typeof b&&(b=!0);return c.each(function(){this.disabled=!b})}function e(){(0,d.default)(".icon-inline-help").click(function(){var a=(0,d.default)(this).siblings(".field-help");a.hasClass("hidden")?a.removeClass("hidden"):a.addClass("hidden")})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.inlineHelp=b.enable=void 0;var a=__bd7207540b95ff683caa1d3c0bfcc3d7,
d=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("enable",c);(0,a.default)("inlineHelp",e);b.enable=c;b.inlineHelp=e;return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-setup', location = 'src/js/aui/setup.js' */
("undefined"===typeof window?global:window).__b6d6016a041dc9cb00a2f1ccddcdabcf=function(){function b(a){return a&&a.__esModule?a:{"default":a}}"use strict";var c=b(__bd7207540b95ff683caa1d3c0bfcc3d7),d=b(__9a668cbde1e182d8e721c23580356df2),e=b(__42c7868600dc182ad91aa15094975e87),f=b(__849973663ed3d680bf7bf58ac8b9aec5);(0,c.default)(function(){var a=(0,c.default)("body");a.data("auiVersion")||a.attr("data-aui-version",f.default);(0,e.default)()});c.default.ajaxSettings.traditional=!0;(0,d.default)("$",
c.default);return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-format', location = 'src/js/aui/format.js' */
("undefined"===typeof window?global:window).__b9ecb36a7ca0505acec463b07515cb6c=function(){function l(g){var i=/'(?!')/g,o=/^\d+$/,p=/^(\d+),number$/,q=/^(\d+)\,choice\,(.+)/,r=/^(\d+)([#<])(.+)/,m=function(c){for(var h=!1,e=-1,a=0,b=0;b<c.length;b++){var d=c.charAt(b);"'"==d&&(h=!h);if(!h)if("{"===d)0===a&&(e=b),a++;else if("}"===d&&0<a&&(a--,0===a))return h=[],h.push(c.substring(0,b+1)),h.push(c.substring(0,e)),h.push(c.substring(e+1,b)),h}return null};return function(c){var h=arguments,e="";if(!c)return e;
for(var a=m(c);a;){var c=c.substring(a[0].length),e=e+a[1].replace(i,""),b=a[2],a=h,d="",f=void 0;if(b.match(o))d=a.length>++b?a[b]:"";else if(f=b.match(p))d=a.length>++f[1]?a[f[1]]:"";else if(f=b.match(q))if(b=a.length>++f[1]?a[f[1]]:null,null!==b){for(var f=f[2].split("|"),g=null,k=0;k<f.length;k++){var j=f[k].match(r),n=parseInt(j[1],10);if(b<n){d=g?g:j[3];break}if(b==n&&"#"==j[2]){d=j[3];break}k==f.length-1&&(d=j[3]);g=j[3]}a=[d].concat(Array.prototype.slice.call(a,1));d=l.apply(null,a)}e+=d;
a=m(c)}return e+=c.replace(i,"")}.apply(null,arguments)}var i={};Object.defineProperty(i,"__esModule",{value:!0});var g=__9a668cbde1e182d8e721c23580356df2,g=g&&g.__esModule?g:{"default":g};(0,g.default)("format",l);i.default=l;return i=i["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-animation', location = 'src/js/aui/internal/animation.js' */
("undefined"===typeof window?global:window).__5751b8a604ec61b53b208676ae78d41d=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.recomputeStyle=function(a){a=a.jquery?a[0]:a;window.getComputedStyle(a,null).getPropertyValue("left")};return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-blanket', location = 'src/js/aui/blanket.js' */
("undefined"===typeof window?global:window).__7f21a71921a14c7b5b83c94ec80f4db5=function(){function a(d,c){Array.prototype.forEach.call(document.body.children,function(a){!a.hasAttribute("aria-hidden")&&!a.classList.contains("aui-layer")&&(a.setAttribute("aria-hidden","true"),f.push(a))});b||(b=document.body);!0===d&&h();var e=!!a.$dim&&"false"===a.$dim.attr("aria-hidden");a.$dim&&(a.$dim.remove(),a.$dim=null);a.$dim=(0,i.default)("<div></div>").addClass("aui-blanket");a.$dim.attr("tabindex","0");
a.$dim.appendTo(document.body);e||((0,j.recomputeStyle)(a.$dim),a.cachedOverflow={overflow:b.style.overflow,overflowX:b.style.overflowX,overflowY:b.style.overflowY},b.style.overflowX="hidden",b.style.overflowY="hidden",b.style.overflow="hidden");a.$dim.attr("aria-hidden","false");c&&a.$dim.css({zIndex:c});return a.$dim}function g(){f.forEach(function(a){a.removeAttribute("aria-hidden")});f=[];a.$dim&&(a.$dim.attr("aria-hidden","true"),b&&(b.style.overflow=a.cachedOverflow.overflow,b.style.overflowX=
a.cachedOverflow.overflowX,b.style.overflowY=a.cachedOverflow.overflowY))}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.undim=c.dim=void 0;var e=__bd7207540b95ff683caa1d3c0bfcc3d7,i=e&&e.__esModule?e:{"default":e},e=__c88c0dc6258c37804917fb6a0e4092fa,j=__5751b8a604ec61b53b208676ae78d41d,d=__9a668cbde1e182d8e721c23580356df2,d=d&&d.__esModule?d:{"default":d},b,f=[],h=(0,e.getMessageLogger)("useShim",{extraInfo:"useShim has no alternative as it is now calculated by dim()."});
(0,d.default)("dim",a);(0,d.default)("undim",g);c.dim=a;c.undim=g;return c}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-plugins-jquery-aop', location = 'src/js-vendor/jquery/plugins/jquery.aop.js' */
("undefined"===typeof window?global:window).__af34b57a5ec480e648ba4e11f4ac56dc=function(){for(var g=!0,h,i=Object.prototype.toString,j={},q={1:"element",3:"textnode",9:"document",11:"fragment"},k="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),l=k.length;l--;){var m=k[l],n=window[m];if(n)try{j[i.call(new n)]=m.toLowerCase()}catch(r){}}h=function(a){return null==a&&(void 0===a?"undefined":"null")||
a.nodeType&&q[a.nodeType]||"number"==typeof a.length&&(a.callee&&"arguments"||a.alert&&"window"||a.item&&"nodelist")||j[i.call(a)]};var o=function(a,c,d){var f=a[c],b;1==d.type||2==d.type||3==d.type?b=function(){var a,b=null;try{a=f.apply(this,arguments)}catch(e){b=e}if(1==d.type)if(null==b)a=d.value.apply(this,[a,c]);else throw b;else 2==d.type&&null!=b?a=d.value.apply(this,[b,c]):3==d.type&&(a=d.value.apply(this,[a,b,c]));return a}:4==d.type?b=function(){d.value.apply(this,[arguments,c]);return f.apply(this,
arguments)}:6==d.type?b=function(){return d.value.apply(this,arguments)}:5==d.type&&(b=function(){var a=this,b=Array.prototype.slice.call(arguments);return d.value.apply(a,[{arguments:b,method:c,proceed:function(){return f.apply(a,b)}}])});b.unweave=function(){a[c]=f;pointcut=a=b=f=null};return a[c]=b},p=function(a,c,d){var f=[],b;for(b in a){var e=null;try{e=a[b]}catch(g){}null!=e&&(b.match(c.method)&&"function"==h(e))&&(f[f.length]={source:a,method:b,advice:d})}return f},e=function(a,c){var d="undefined"!=
typeof a.target.prototype?a.target.prototype:a.target,f=[];if(6!=c.type&&"undefined"==typeof d[a.method]){var b=p(a.target,a,c);0==b.length&&(b=p(d,a,c));for(var e in b)f[f.length]=o(b[e].source,b[e].method,b[e].advice)}else f[0]=o(d,a.method,c);return g?f:f[0]};jQuery.aop={after:function(a,c){return e(a,{type:1,value:c})},afterThrow:function(a,c){return e(a,{type:2,value:c})},afterFinally:function(a,c){return e(a,{type:3,value:c})},before:function(a,c){return e(a,{type:4,value:c})},around:function(a,
c){return e(a,{type:5,value:c})},introduction:function(a,c){return e(a,{type:6,value:c})},setup:function(a){g=a.regexMatch}};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-drop-down', location = 'src/js/aui/drop-down.js' */
("undefined"===typeof window?global:window).__00497a4f457d24a5ae71f7e09ff3cf48=function(){function r(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(d[b]=a[b]);d.default=a;return d}function d(c,h){var b=null,s=[],o=!1,q=(0,a.default)(document),g={item:"li:has(a)",activeClass:"active",alignment:"right",displayHandler:function(a){return a.name},escapeHandler:function(){this.hide("escape");return!1},hideHandler:function(){},moveHandler:function(){},
useDisabled:!1};a.default.extend(g,h);g.alignment={left:"left",right:"right"}[g.alignment.toLowerCase()]||"left";if(c&&c.jquery)b=c;else if("string"===typeof c)b=(0,a.default)(c);else if(c&&c.constructor===Array){for(var b=(0,a.default)("<div></div>").addClass("aui-dropdown").toggleClass("hidden",!!g.isHiddenByDefault),t=0,x=c.length;t<x;t++){for(var i=(0,a.default)("<ol></ol>"),e=0,n=c[t].length;e<n;e++){var j=(0,a.default)("<li></li>"),k=c[t][e];k.href?(j.append((0,a.default)("<a></a>").html("<span>"+
g.displayHandler(k)+"</span>").attr({href:k.href}).addClass(k.className)),a.default.data((0,a.default)("a > span",j)[0],"properties",k)):j.html(k.html).addClass(k.className);k.icon&&j.prepend((0,a.default)("<img />").attr("src",k.icon));k.insideSpanIcon&&j.children("a").prepend((0,a.default)("<span></span>").attr("class","icon"));k.iconFontClass&&j.children("a").prepend((0,a.default)("<span></span>").addClass("aui-icon aui-icon-small aui-iconfont-"+k.iconFontClass));a.default.data(j[0],"properties",
k);i.append(j)}t===x-1&&i.addClass("last");b.append(i)}(0,a.default)("body").append(b)}else throw Error("dropDown function was called with illegal parameter. Should be $ object, $ selector or array.");var l=function(){p(1)},m=function(){p(-1)},p=function(b){var c=!o,f=d.current.$[0],e=d.current.links,h=f.focused;o=!0;if(0!==e.length){f.focused="number"===typeof h?h:-1;if(!d.current)return y.log("move - not current, aborting"),!0;f.focused+=b;0>f.focused?f.focused=e.length-1:f.focused>=e.length&&(f.focused=
0);g.moveHandler((0,a.default)(e[f.focused]),0>b?"up":"down");c&&e.length?((0,a.default)(e[f.focused]).addClass(g.activeClass),o=!1):e.length||(o=!1)}},u=function(b){if(!d.current)return!0;var e=b.which,f=d.current.$[0],c=d.current.links;d.current.cleanActive();switch(e){case 40:l();break;case 38:m();break;case 27:return g.escapeHandler.call(d.current,b);case 13:return 0<=f.focused?g.selectionHandler?g.selectionHandler.call(d.current,b,(0,a.default)(c[f.focused])):"a"!=(0,a.default)(c[f.focused]).attr("nodeName")?
(0,a.default)("a",c[f.focused]).trigger("focus"):(0,a.default)(c[f.focused]).trigger("focus"):!0;default:return c.length&&(0,a.default)(c[f.focused]).addClass(g.activeClass),!0}b.stopPropagation();b.preventDefault();return!1},v=function(a){a&&a.which&&3==a.which||a&&a.button&&2==a.button||d.current&&d.current.hide("click")},w=function(b){return function(){d.current&&(d.current.cleanFocus(),this.originalClass=this.className,(0,a.default)(this).addClass(g.activeClass),d.current.$[0].focused=b)}},r=
function(b){if(b.button||b.metaKey||b.ctrlKey||b.shiftKey)return!0;d.current&&g.selectionHandler&&g.selectionHandler.call(d.current,b,(0,a.default)(this))};b.each(function(){var b=this,c=(0,a.default)(this),f={},e={reset:function(){f=a.default.extend(f,{$:c,links:(0,a.default)(g.item||"li:has(a)",b),cleanActive:function(){b.focused+1&&f.links.length&&(0,a.default)(f.links[b.focused]).removeClass(g.activeClass)},cleanFocus:function(){f.cleanActive();b.focused=-1},moveDown:l,moveUp:m,moveFocus:u,getFocusIndex:function(){return"number"===
typeof b.focused?b.focused:-1}});f.links.each(function(b){var c=(0,a.default)(this),d=!1;c.data("events")&&a.default.each(c.data("events"),function(b,c){a.default.each(c,function(b,a){if(r===a)return d=!0,!1})});d||(c.hover(w(b),f.cleanFocus),c.click(r))})},appear:function(a){a?(c.removeClass("hidden"),c.addClass("aui-dropdown-"+g.alignment)):c.addClass("hidden")},fade:function(a){a?c.fadeIn("fast"):c.fadeOut("fast")},scroll:function(a){a?c.slideDown("fast"):c.slideUp("fast")}};f.reset=e.reset;f.reset();
f.addControlProcess=function(b,c){a.default.aop.around({target:this,method:b},c)};f.addCallback=function(b,c){return a.default.aop.after({target:this,method:b},c)};f.show=function(c){if(!g.useDisabled||!this.$.closest(".aui-dd-parent").hasClass("disabled"))this.alignment=g.alignment,v(),d.current=this,this.method=c||this.method||"appear",this.timer=setTimeout(function(){q.click(v)},0),q.keydown(u),g.firstSelected&&this.links[0]&&w(0).call(this.links[0]),(0,a.default)(b.offsetParent).css({zIndex:2E3}),
e[this.method](!0),(0,a.default)(document).trigger("showLayer",["dropdown",d.current])};f.hide=function(b){this.method=this.method||"appear";(0,a.default)(c.get(0).offsetParent).css({zIndex:""});this.cleanFocus();e[this.method](!1);q.unbind("click",v).unbind("keydown",u);(0,a.default)(document).trigger("hideLayer",["dropdown",d.current]);d.current=null;return b};f.addCallback("reset",function(){g.firstSelected&&this.links[0]&&w(0).call(this.links[0])});d.iframes||(d.iframes=[]);d.createShims=function z(){(0,
a.default)("iframe").each(function(){if(!this.shim){this.shim=(0,a.default)("<div />").addClass("shim hidden").appendTo("body");d.iframes.push(this)}});return z}();f.addCallback("show",function(){(0,a.default)(d.iframes).each(function(){var b=(0,a.default)(this);if(b.is(":visible")){var c=b.offset();c.height=b.height();c.width=b.width();this.shim.css({left:c.left+"px",top:c.top+"px",height:c.height+"px",width:c.width+"px"}).removeClass("hidden")}})});f.addCallback("hide",function(){(0,a.default)(d.iframes).each(function(){this.shim.addClass("hidden")});
g.hideHandler()});s.push(f)});return s}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});var l=__bd7207540b95ff683caa1d3c0bfcc3d7,a=l&&l.__esModule?l:{"default":l};__af34b57a5ec480e648ba4e11f4ac56dc;var l=r(__c88c0dc6258c37804917fb6a0e4092fa),y=r(__2f5c294b01e66b15309518e39bcb949d),m=__9a668cbde1e182d8e721c23580356df2,m=m&&m.__esModule?m:{"default":m};d.getAdditionalPropertyValue=function(c,d){var b=c[0];(!b||"string"!==typeof b.tagName||"li"!==b.tagName.toLowerCase())&&y.log("dropDown.getAdditionalPropertyValue : item passed in should be an LI element wrapped by jQuery");
return(b=a.default.data(b,"properties"))?b[d]:null};d.removeAllAdditionalProperties=function(){};d.Standard=function(c){var h=[],b={selector:".aui-dd-parent",dropDown:".aui-dropdown",trigger:".aui-dd-trigger"};a.default.extend(b,c);var s=function(c,d,g,e){a.default.extend(e,{trigger:c});d.addClass("dd-allocated");g.addClass("hidden");!1==b.isHiddenByDefault&&e.show();e.addCallback("show",function(){d.addClass("active")});e.addCallback("hide",function(){d.removeClass("active")})},o=function(b,a,c,
e){e!=d.current&&(c.css({top:a.outerHeight()}),e.show(),b.stopImmediatePropagation());b.preventDefault()};if(b.useLiveEvents){var q=[],g=[];(0,a.default)(b.trigger).live("click",function(c){var h=(0,a.default)(this),i,e,n;if(0<=(i=a.default.inArray(this,q))){var j=g[i];e=j.dropdown;n=j.ddcontrol}else{i=h.closest(b.selector);e=i.find(b.dropDown);if(0===e.length)return;n=d(e,b)[0];if(!n)return;q.push(this);j={parent:i,dropdown:e,ddcontrol:n};s(h,i,e,n);g.push(j)}o(c,h,e,n)})}else c=this instanceof a.default?
this:(0,a.default)(b.selector),c=c.not(".dd-allocated").filter(":has("+b.dropDown+")").filter(":has("+b.trigger+")"),c.each(function(){var c=(0,a.default)(this),g=(0,a.default)(b.dropDown,this),i=(0,a.default)(b.trigger,this),e=d(g,b)[0];a.default.extend(e,{trigger:i});s(i,c,g,e);i.click(function(b){o(b,i,g,e)});h.push(e)});return h};d.Ajax=function(c){var h={cache:!0};a.default.extend(h,c||{});c=d.Standard.call(this,h);(0,a.default)(c).each(function(){var b=this;a.default.extend(b,{getAjaxOptions:function(c){var d=
function(a){h.formatResults&&(a=h.formatResults(a));h.cache&&b.cache.set(b.getAjaxOptions(),a);b.refreshSuccess(a)};return h.ajaxOptions?a.default.isFunction(h.ajaxOptions)?a.default.extend(h.ajaxOptions.call(b),{success:d}):a.default.extend(h.ajaxOptions,{success:d}):a.default.extend(c,{success:d})},refreshSuccess:function(b){this.$.html(b)},cache:function(){var b={};return{get:function(a){return b[(a.url+(a.data||"")).replace(/[\?\&]/gi,"")]},set:function(a,c){b[(a.url+(a.data||"")).replace(/[\?\&]/gi,
"")]=c},reset:function(){b={}}}}(),show:function(c){return function(){h.cache&&b.cache.get(b.getAjaxOptions())?(b.refreshSuccess(b.cache.get(b.getAjaxOptions())),c.call(b)):((0,a.default)(a.default.ajax(b.getAjaxOptions())).throbber({target:b.$,end:function(){b.reset()}}),c.call(b),b.iframeShim&&b.iframeShim.hide())}}(b.show),resetCache:function(){b.cache.reset()}});b.addCallback("refreshSuccess",function(){b.reset()})});return c};a.default.fn.dropDown=function(a,h){a=(a||"Standard").replace(/^([a-z])/,
function(a){return a.toUpperCase()});return d[a].call(this,h)};a.default.fn.dropDown=l.construct(a.default.fn.dropDown,"Dropdown constructor",{alternativeName:"Dropdown2"});(0,m.default)("dropDown",d);p.default=d;return p=p["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:dropdown', location = 'src/js-vendor/jquery/plugins/jquery.aop.js' */
("undefined"===typeof window?global:window).__af34b57a5ec480e648ba4e11f4ac56dc=function(){for(var g=!0,h,i=Object.prototype.toString,j={},q={1:"element",3:"textnode",9:"document",11:"fragment"},k="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),l=k.length;l--;){var m=k[l],n=window[m];if(n)try{j[i.call(new n)]=m.toLowerCase()}catch(r){}}h=function(a){return null==a&&(void 0===a?"undefined":"null")||
a.nodeType&&q[a.nodeType]||"number"==typeof a.length&&(a.callee&&"arguments"||a.alert&&"window"||a.item&&"nodelist")||j[i.call(a)]};var o=function(a,c,d){var f=a[c],b;1==d.type||2==d.type||3==d.type?b=function(){var a,b=null;try{a=f.apply(this,arguments)}catch(e){b=e}if(1==d.type)if(null==b)a=d.value.apply(this,[a,c]);else throw b;else 2==d.type&&null!=b?a=d.value.apply(this,[b,c]):3==d.type&&(a=d.value.apply(this,[a,b,c]));return a}:4==d.type?b=function(){d.value.apply(this,[arguments,c]);return f.apply(this,
arguments)}:6==d.type?b=function(){return d.value.apply(this,arguments)}:5==d.type&&(b=function(){var a=this,b=Array.prototype.slice.call(arguments);return d.value.apply(a,[{arguments:b,method:c,proceed:function(){return f.apply(a,b)}}])});b.unweave=function(){a[c]=f;pointcut=a=b=f=null};return a[c]=b},p=function(a,c,d){var f=[],b;for(b in a){var e=null;try{e=a[b]}catch(g){}null!=e&&(b.match(c.method)&&"function"==h(e))&&(f[f.length]={source:a,method:b,advice:d})}return f},e=function(a,c){var d="undefined"!=
typeof a.target.prototype?a.target.prototype:a.target,f=[];if(6!=c.type&&"undefined"==typeof d[a.method]){var b=p(a.target,a,c);0==b.length&&(b=p(d,a,c));for(var e in b)f[f.length]=o(b[e].source,b[e].method,b[e].advice)}else f[0]=o(d,a.method,c);return g?f:f[0]};jQuery.aop={after:function(a,c){return e(a,{type:1,value:c})},afterThrow:function(a,c){return e(a,{type:2,value:c})},afterFinally:function(a,c){return e(a,{type:3,value:c})},before:function(a,c){return e(a,{type:4,value:c})},around:function(a,
c){return e(a,{type:5,value:c})},introduction:function(a,c){return e(a,{type:6,value:c})},setup:function(a){g=a.regexMatch}};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-amdify', location = 'src/js/aui/internal/amdify.js' */
("undefined"===typeof window?global:window).__65f46acd493e225a8705ab04389e284d=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b){if(window.define){var c=window.define;c(a,[],function(){return b})}return b};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-skate', location = 'src/js/aui/internal/skate.js' */
("undefined"===typeof window?global:window).__7acfe7fd38bbf8b5bf76cc953770b033=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__23d805956abb7113753ee633dcc7a634,a=(a&&a.__esModule?a:{"default":a}).default.noConflict();b.default=a;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-underscorejs-underscore', location = 'src/js-vendor/underscorejs/underscore.js' */
("undefined"===typeof window?global:window).__f97340202cf7ae2d8f4dc9fc2d3264af=function(){var p={exports:{}},r=p.exports,x={module:p,exports:r},s;s=function(n,q,m){var k=("undefined"===typeof window?global:window).define,l,o,m=[m,q,n].filter(function(i){return"function"===typeof i})[0],q=[q,n,[]].filter(Array.isArray)[0];l=m.apply(null,q.map(function(i){return x[i]}));o=typeof l;"function"===typeof k&&k("string"===typeof n?n:"__f97340202cf7ae2d8f4dc9fc2d3264af",q,m);"string"===o?l=String(l):"number"===
o?l=Number(l):"boolean"===o&&(l=Boolean(l));void 0!==l&&(r=p.exports=l)};s.amd=!0;(function(){var n=this,q=n._,m={},k=Array.prototype,l=Object.prototype,o=k.push,i=k.slice,v=k.concat,t=l.toString,s=l.hasOwnProperty,E=k.forEach,F=k.map,G=k.reduce,H=k.reduceRight,I=k.filter,J=k.every,K=k.some,w=k.indexOf,L=k.lastIndexOf,l=Array.isArray,x=Object.keys,y=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof r?("undefined"!==
typeof p&&p.exports&&(r=p.exports=b),r._=b):n._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(E&&a.forEach===E)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===m)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,a[g[e]],g[e],a)===m)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(F&&a.map===F)return a.map(c,b);j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=
b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(G&&a.reduce===G){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,O){if(f)d=c.call(e,d,a,b,O);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(H&&a.reduceRight===H){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=
h.length;j(a,function(b,i,k){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,k);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;M(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(I&&a.filter===I)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};b.reject=function(a,c,d){return b.filter(a,function(a,b,
g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(J&&a.every===J)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return m});return!!e};var M=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(K&&a.some===K)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return m});return!!e};b.contains=b.include=function(a,c){return a==null?false:w&&a.indexOf===w?a.indexOf(c)!=-1:M(a,function(a){return a===
c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&
b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=
b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var z=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=z(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<d||d===void 0)return-1}return a.index-c.index}),"value")};
var A=function(a){return function(c,d,e){var f={},g=d==null?b.identity:z(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=A(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=A(function(a,c,b){a[c]=b});b.countBy=A(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,c,d,e){for(var d=d==null?b.identity:z(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):
a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,
b.identity)};var N=function(a,c,d){if(c&&b.every(a,b.isArray))return v.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?o.apply(d,a):N(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return N(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,
true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=v.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:
d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(w&&a.indexOf===w)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(L&&a.lastIndexOf===L)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=
1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var B=function(){};b.bind=function(a,c){var d,e;if(y&&a.bind===y)return y.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));B.prototype=a.prototype;var b=new B;B.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=
function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,
d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var k=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var j=new Date;!i&&d.leading===false&&(i=j);var l=b-(j-i);e=this;f=arguments;if(l<=0){clearTimeout(h);h=null;i=j;g=a.apply(e,f)}else!h&&d.trailing!==false&&(h=setTimeout(k,l));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=
new Date;var k=function(){var j=new Date-h;if(j<b)e=setTimeout(k,b-j);else{e=null;d||(i=a.apply(g,f))}},j=d&&!e;e||(e=setTimeout(k,b));j&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=null;return d}};b.wrap=function(a,b){return function(){var d=[a];o.apply(d,arguments);return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};
b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};
b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=v.apply(k,i.call(arguments,1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=v.apply(k,i.call(arguments,1)),e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===
void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var C=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=t.call(a);if(f!=t.call(c))return false;switch(f){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==
+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=C(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,
i)){g++;if(!(h=b.has(c,i)&&C(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return C(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===1)};b.isArray=l||function(a){return t.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),
function(a){b["is"+a]=function(b){return t.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a==="function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!=+a};b.isBoolean=function(a){return a===true||a===false||t.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===
void 0};b.has=function(a,b){return s.call(a,b)};b.noConflict=function(){n._=q;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};u.unescape=b.invert(u.escape);var P={escape:RegExp("["+b.keys(u.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(u.unescape).join("|")+
")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(P[a],function(b){return u[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];o.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var Q=0;b.uniqueId=function(a){var b=++Q+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,
interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||D).source,(d.interpolate||D).source,(d.evaluate||D).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(S,function(a){return"\\"+R[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));
d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{e=new Function(d.variable||"obj","_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};
b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
"function"===typeof window.define&&s("underscore",[],function(){return window._});return p.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-underscore', location = 'src/js/aui/underscore.js' */
("undefined"===typeof window?global:window).__b8debe7dbacd8c0f9a68380b427aca10=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__f97340202cf7ae2d8f4dc9fc2d3264af,a=a&&a.__esModule?a:{"default":a};window._||(window._=a.default);b.default=window._;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-spinner', location = 'src/js/aui/spinner.js' */
("undefined"===typeof window?global:window).__05bca48700965a7a8a29288c57bd100b=function(){function j(a){var d=f.MEDIUM.name;"string"===typeof a&&(a=a.toLowerCase(),-1<Object.keys(f).map(function(a){return a.toLowerCase()}).indexOf(a)&&(d=a));return d}function g(a){var d=k.default.find(f,function(b){return b.name===a._data.size})||f.MEDIUM,e=d.px,d=d.radius,b=a.querySelector("svg"),c=a.querySelector("circle");b.setAttribute("size",e);b.setAttribute("height",e);b.setAttribute("width",e);b.setAttribute("viewBox",
"0 0 "+e+" "+e);b=e/2;c.setAttribute("cx",b);c.setAttribute("cy",b);c.setAttribute("r",d);if(a._data.filled){if((c=a.parentNode)&&1===c.nodeType)d=a.getBoundingClientRect(),c=c.getBoundingClientRect(),c=c.top+c.height/2,e=d.top+e/2,a.querySelector("svg").style.top=c-e+"px"}else delete a.querySelector("svg").style.top}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.SIZE=void 0;var b=__23d805956abb7113753ee633dcc7a634,b=b&&b.__esModule?b:{"default":b},l=__c88c0dc6258c37804917fb6a0e4092fa,
i=__b8debe7dbacd8c0f9a68380b427aca10,k=i&&i.__esModule?i:{"default":i},f={SMALL:{name:"small",px:20,radius:9},MEDIUM:{name:"medium",px:30,radius:13.5},LARGE:{name:"large",px:50,radius:22.5}},m={filled:!1,size:f.MEDIUM.name},n=(0,l.getMessageLogger)("<aui-spinner> filled attribute",{sinceVersion:"7.9.4",removeInVersion:"9",extraInfo:"Add CSS to the parent element of the <aui-spinner>.\nUse CSS flexbox or grid to vertically align it.\nSee https://css-tricks.com/centering-css-complete-guide/ for techniques."}),
o=(0,l.getMessageLogger)("<aui-spinner> filled property",{sinceVersion:"7.9.4",removeInVersion:"9",extraInfo:"Add CSS to the parent element of the <aui-spinner>.\nUse CSS flexbox or grid to vertically align it.\nSee https://css-tricks.com/centering-css-complete-guide/ for techniques."}),b=(0,b.default)("aui-spinner",{template:function(a){a.innerHTML='<div class="aui-spinner spinner"><svg focusable="false"><circle></circle></svg></div>';g(a)},attached:function(a){g(a)},attributes:{filled:{created:function(a){n();
a._data.filled=!0;g(a)},removed:function(a){a._data.filled=!1;g(a)}},size:function(a,b){a._data.size=j(b.newValue);g(a)}},prototype:{get _data(){return this.__data||(this._data=k.default.defaults({},m))},set _data(a){return this.__data=a},set filled(a){o();a?this.setAttribute("filled",""):this.removeAttribute("filled")},set size(a){a=j(a);this.setAttribute("size",a)}}});h.default=b;h.SIZE=f;return h}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-button', location = 'src/js/aui/button.js' */
("undefined"===typeof window?global:window).__140df591716eb4582df81cdc5f79928b=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return a.hasAttribute("aria-busy")&&"true"===a.getAttribute("aria-busy")}"use strict";var c;var a=__2f5c294b01e66b15309518e39bcb949d;if(a&&a.__esModule)c=a;else{var b={};if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(b[f]=a[f]);b.default=a;c=b}var a=d(__65f46acd493e225a8705ab04389e284d),b=d(__7acfe7fd38bbf8b5bf76cc953770b033),
g=__05bca48700965a7a8a29288c57bd100b,h=d(g);(0,b.default)("aui-button",{type:b.default.type.CLASSNAME,created:function(a){a._spinner=new h.default;a._spinner.setAttribute("size",g.SIZE.SMALL.name)},prototype:{busy:function(){if("INPUT"===this.nodeName||e(this))return c.warn("It is not valid to call busy() on an input button."),this;this.appendChild(this._spinner);this.setAttribute("aria-busy",!0);this.setAttribute("busy","");return this},idle:function(){if("INPUT"===this.nodeName||!e(this))return c.warn("It is not valid to call idle() on an input button."),
this;this.removeChild(this._spinner);this.removeAttribute("aria-busy");this.removeAttribute("busy");return this},isBusy:function(){return"INPUT"===this.nodeName?(c.warn("It is not valid to call isBusy() on an input button."),!1):e(this)}}});(0,a.default)("aui/button");return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.soy.soy-template-plugin:soy-deps', location = 'js/soyutils.js' */
/*!
 * Copyright 2008 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var goog=goog||{};goog.global=this;COMPILED=true;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(a){return a!==void 0};goog.exportPath_=function(c,a,f){var d=c.split(".");var e=f||goog.global;if(!(d[0] in e)&&e.execScript){e.execScript("var "+d[0])}for(var b;d.length&&(b=d.shift());){if(!d.length&&goog.isDef(a)){e[b]=a}else{if(e[b]){e=e[b]}else{e=e[b]={}}}}};goog.define=function(b,a){var c=a;if(!COMPILED){if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,b)){c=goog.global.CLOSURE_UNCOMPILED_DEFINES[b]}else{if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,b)){c=goog.global.CLOSURE_DEFINES[b]}}}goog.exportPath_(b,c)};goog.DEBUG=true;goog.define("goog.LOCALE","en");goog.define("goog.TRUSTED_SITE",true);goog.define("goog.STRICT_MODE_COMPATIBLE",false);goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG);goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}}goog.constructNamespace_(a)};goog.constructNamespace_=function(a,c){if(!COMPILED){delete goog.implicitNamespaces_[a];var b=a;while((b=b.substring(0,b.lastIndexOf(".")))){if(goog.getObjectByName(b)){break}goog.implicitNamespaces_[b]=true}}goog.exportPath_(a,c)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(a){if(!goog.isString(a)||!a||a.search(goog.VALID_MODULE_RE_)==-1){throw Error("Invalid module identifier")}if(!goog.isInModuleLoader_()){throw Error("Module "+a+" has been loaded incorrectly.")}if(goog.moduleLoaderState_.moduleName){throw Error("goog.module may only be called once per module.")}goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(goog.isProvided_(a)){return a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a)}else{return null}}};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_()){throw new Error("goog.module.declareTestMethods must be called from within a goog.module")}goog.moduleLoaderState_.declareTestMethods=true};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_()){throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module")}if(!COMPILED&&!goog.moduleLoaderState_.moduleName){throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.")}goog.moduleLoaderState_.declareLegacyNamespace=true};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE){a=a||"";throw Error("Importing test-only code into non-debug environment"+(a?": "+a:"."))}};goog.forwardDeclare=function(a){};if(!COMPILED){goog.isProvided_=function(a){return(a in goog.loadedModules_)||(!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a)))};goog.implicitNamespaces_={"goog.module":true}}goog.getObjectByName=function(b,c){var d=b.split(".");var e=c||goog.global;for(var a;a=d.shift();){if(goog.isDefAndNotNull(e[a])){e=e[a]}else{return null}}return e};goog.globalize=function(d,b){var c=b||goog.global;for(var a in d){c[a]=d[a]}};goog.addDependency=function(f,e,l,d){if(goog.DEPENDENCIES_ENABLED){var g,a;var k=f.replace(/\\/g,"/");var h=goog.dependencies_;for(var c=0;g=e[c];c++){h.nameToPath[g]=k;h.pathIsModule[k]=!!d}for(var b=0;a=l[b];b++){if(!(k in h.requires)){h.requires[k]={}}h.requires[k][a]=true}}};goog.define("goog.ENABLE_DEBUG_LOADER",true);goog.logToConsole_=function(a){if(goog.global.console){goog.global.console.error(a)}};goog.require=function(b){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_){goog.maybeProcessDeferredDep_(b)}if(goog.isProvided_(b)){if(goog.isInModuleLoader_()){return goog.module.getInternal_(b)}else{return null}}if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(b);if(c){goog.included_[c]=true;goog.writeScripts_();return null}}var a="goog.require could not find: "+b;goog.logToConsole_(a);throw Error(a)}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.identityFunction=function(b,a){return b};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_){return a.instance_}if(goog.DEBUG){goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a}return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.define("goog.LOAD_MODULE_USING_EVAL",true);goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;if(goog.DEPENDENCIES_ENABLED){goog.included_={};goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write" in a};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else{if(!goog.inHtmlDocument_()){return}}var f=goog.global.document;var a=f.getElementsByTagName("script");for(var d=a.length-1;d>=0;--d){var c=(a[d]);var g=c.src;var e=g.lastIndexOf("?");var b=e==-1?g.length:e;if(g.substr(b-7,7)=="base.js"){goog.basePath=g.substr(0,b-7);return}}};goog.importScript_=function(c,a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(b(c,a)){goog.dependencies_.written[c]=true}};goog.IS_OLD_IE_=goog.global.document&&goog.global.document.all&&!goog.global.atob;goog.importModule_=function(b){var a='goog.retrieveAndExecModule_("'+b+'");';if(goog.importScript_("",a)){goog.dependencies_.written[b]=true}};goog.queuedModules_=[];goog.wrapModule_=function(b,a){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON)){return'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+b+"\n"}else{return"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+b+"\n")+");"}};goog.loadQueuedModules_=function(){var c=goog.queuedModules_.length;if(c>0){var a=goog.queuedModules_;goog.queuedModules_=[];for(var b=0;b<c;b++){var d=a[b];goog.maybeProcessDeferredPath_(d)}}};goog.maybeProcessDeferredDep_=function(a){if(goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)){var b=goog.getPathFromDeps_(a);goog.maybeProcessDeferredPath_(goog.basePath+b)}};goog.isDeferredModule_=function(a){var c=goog.getPathFromDeps_(a);if(c&&goog.dependencies_.pathIsModule[c]){var b=goog.basePath+c;return(b) in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(a){var b=goog.getPathFromDeps_(a);if(b&&(b in goog.dependencies_.requires)){for(var c in goog.dependencies_.requires[b]){if(!goog.isProvided_(c)&&!goog.isDeferredModule_(c)){return false}}}return true};goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}};goog.loadModule=function(d){var a=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined,declareTestMethods:false};var b;if(goog.isFunction(d)){b=d.call(goog.global,{})}else{if(goog.isString(d)){b=goog.loadModuleFromSource_.call(goog.global,d)}else{throw Error("Invalid module definition")}}var c=goog.moduleLoaderState_.moduleName;if(!goog.isString(c)||!c){throw Error('Invalid module name "'+c+'"')}if(goog.moduleLoaderState_.declareLegacyNamespace){goog.constructNamespace_(c,b)}else{if(goog.SEAL_MODULE_EXPORTS&&Object.seal){Object.seal(b)}}goog.loadedModules_[c]=b;if(goog.moduleLoaderState_.declareTestMethods){for(var e in b){if(e.indexOf("test",0)===0||e=="tearDown"||e=="setUp"||e=="setUpPage"||e=="tearDownPage"){goog.global[e]=b[e]}}}}finally{goog.moduleLoaderState_=a}};goog.loadModuleFromSource_=function(source){var exports={};eval(arguments[0]);return exports};goog.writeScriptTag_=function(e,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(c.readyState=="complete"){var f=/\bdeps.js$/.test(e);if(f){return false}else{throw Error('Cannot write "'+e+'" after document load')}}var d=goog.IS_OLD_IE_;if(b===undefined){if(!d){c.write('<script type="text/javascript" src="'+e+'"><\/script>')}else{var a=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";c.write('<script type="text/javascript" src="'+e+'"'+a+"><\/script>")}}else{c.write('<script type="text/javascript">'+b+"<\/script>")}return true}else{return false}};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(a,b){if(a.readyState=="complete"&&goog.lastNonModuleScriptIndex_==b){goog.loadQueuedModules_()}return true};goog.writeScripts_=function(){var a=[];var b={};var g=goog.dependencies_;function e(i){if(i in g.written){return}if(i in g.visited){if(!(i in b)){b[i]=true;a.push(i)}return}g.visited[i]=true;if(i in g.requires){for(var j in g.requires[i]){if(!goog.isProvided_(j)){if(j in g.nameToPath){e(g.nameToPath[j])}else{throw Error("Undefined nameToPath for "+j)}}}}if(!(i in b)){b[i]=true;a.push(i)}}for(var d in goog.included_){if(!g.written[d]){e(d)}}for(var c=0;c<a.length;c++){var d=a[c];goog.dependencies_.written[d]=true}var h=goog.moduleLoaderState_;goog.moduleLoaderState_=null;var f=false;for(var c=0;c<a.length;c++){var d=a[c];if(d){if(!g.pathIsModule[d]){goog.importScript_(goog.basePath+d)}else{f=true;goog.importModule_(goog.basePath+d)}}else{goog.moduleLoaderState_=h;throw Error("Undefined script input")}}goog.moduleLoaderState_=h};goog.getPathFromDeps_=function(a){if(a in goog.dependencies_.nameToPath){return goog.dependencies_.nameToPath[a]}else{return null}};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS){goog.importScript_(goog.basePath+"deps.js")}}goog.normalizePath_=function(c){var b=c.split("/");var a=0;while(a<b.length){if(b[a]=="."){b.splice(a,1)}else{if(a&&b[a]==".."&&b[a-1]&&b[a-1]!=".."){b.splice(--a,2)}else{a++}}}return b.join("/")};goog.retrieveAndExecModule_=function(g){if(!COMPILED){var d=g;g=goog.normalizePath_(g);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var b=null;var f=new goog.global.XMLHttpRequest();f.onload=function(){b=this.responseText};f.open("get",g,false);f.send();b=f.responseText;if(b!=null){var a=goog.wrapModule_(g,b);var e=goog.IS_OLD_IE_;if(e){goog.dependencies_.deferred[d]=a;goog.queuedModules_.push(d)}else{c(g,a)}}else{throw new Error("load of "+g+"failed")}}};goog.typeOf=function(c){var b=typeof c;if(b=="object"){if(c){if(c instanceof Array){return"array"}else{if(c instanceof Object){return b}}var a=Object.prototype.toString.call((c));if(a=="[object Window]"){return"object"}if((a=="[object Array]"||typeof c.length=="number"&&typeof c.splice!="undefined"&&typeof c.propertyIsEnumerable!="undefined"&&!c.propertyIsEnumerable("splice"))){return"array"}if((a=="[object Function]"||typeof c.call!="undefined"&&typeof c.propertyIsEnumerable!="undefined"&&!c.propertyIsEnumerable("call"))){return"function"}}else{return"null"}}else{if(b=="function"&&typeof c.call=="undefined"){return"object"}}return b};goog.isNull=function(a){return a===null};goog.isDefAndNotNull=function(a){return a!=null};goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(b){var a=goog.typeOf(b);return a=="array"||a=="object"&&typeof b.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};goog.isFunction=function(a){return goog.typeOf(a)=="function"};goog.isObject=function(b){var a=typeof b;return a=="object"&&b!=null||a=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return !!a[goog.UID_PROPERTY_]};goog.removeUid=function(b){if("removeAttribute" in b){b.removeAttribute(goog.UID_PROPERTY_)}try{delete b[goog.UID_PROPERTY_]}catch(a){}};goog.UID_PROPERTY_="closure_uid_"+((Math.random()*1000000000)>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(c){var b=goog.typeOf(c);if(b=="object"||b=="array"){if(c.clone){return c.clone()}var d=b=="array"?[]:{};for(var a in c){d[a]=goog.cloneObject(c[a])}return d}return c};goog.bindNative_=function(a,c,b){return(a.call.apply(a.bind,arguments))};goog.bindJs_=function(a,d,b){if(!a){throw new Error()}if(arguments.length>2){var c=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,c);return a.apply(d,e)}}else{return function(){return a.apply(d,arguments)}}};goog.bind=function(a,c,b){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){goog.bind=goog.bindNative_}else{goog.bind=goog.bindJs_}return goog.bind.apply(null,arguments)};goog.partial=function(b,c){var a=Array.prototype.slice.call(arguments,1);return function(){var d=a.slice();d.push.apply(d,arguments);return b.apply(this,d)}};goog.mixin=function(c,b){for(var a in b){c[a]=b[a]}};goog.now=(goog.TRUSTED_SITE&&Date.now)||(function(){return +new Date()});goog.globalEval=function(script){if(goog.global.execScript){goog.global.execScript(script,"JavaScript")}else{if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global._et_!="undefined"){delete goog.global._et_;goog.evalWorksForGlobals_=true}else{goog.evalWorksForGlobals_=false}}if(goog.evalWorksForGlobals_){goog.global.eval(script)}else{var doc=goog.global.document;var scriptElt=doc.createElement("script");scriptElt.type="text/javascript";scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else{throw Error("goog.globalEval not available")}}};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.getCssName=function(e,c){var d=function(f){return goog.cssNameMapping_[f]||f};var b=function(j){var h=j.split("-");var f=[];for(var g=0;g<h.length;g++){f.push(d(h[g]))}return f.join("-")};var a;if(goog.cssNameMapping_){a=goog.cssNameMappingStyle_=="BY_WHOLE"?d:b}else{a=function(f){return f}}if(c){return e+"-"+a(c)}else{return a(e)}};goog.setCssNameMapping=function(b,a){goog.cssNameMapping_=b;goog.cssNameMappingStyle_=a};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING){goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING}goog.getMsg=function(a,b){if(b){a=a.replace(/\{\$([^}]+)}/g,function(c,d){return d in b?b[d]:c})}return a};goog.getMsgWithFallback=function(d,c){return d};goog.exportSymbol=function(b,a,c){goog.exportPath_(b,a,c)};goog.exportProperty=function(b,a,c){b[a]=c};goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.base=function(g,d,h){var e=new Array(arguments.length-2);for(var f=2;f<arguments.length;f++){e[f-2]=arguments[f]}return a.prototype[d].apply(g,e)}};goog.base=function(g,c,j){var a=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||(goog.DEBUG&&!a)){throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C")}if(a.superClass_){var b=new Array(arguments.length-1);for(var e=1;e<arguments.length;e++){b[e-1]=arguments[e]}return a.superClass_.constructor.apply(g,b)}var f=new Array(arguments.length-2);for(var e=2;e<arguments.length;e++){f[e-2]=arguments[e]}var d=false;for(var h=g.constructor;h;h=h.superClass_&&h.superClass_.constructor){if(h.prototype[c]===a){d=true}else{if(d){return h.prototype[c].apply(g,f)}}}if(g[c]===a){return g.constructor.prototype[c].apply(g,f)}else{throw Error("goog.base called from a method of one name to a method of a different name")}};goog.scope=function(a){a.call(goog.global)};if(!COMPILED){goog.global.COMPILED=COMPILED}goog.defineClass=function(c,d){var b=d.constructor;var e=d.statics;if(!b||b==Object.prototype.constructor){b=function(){throw Error("cannot instantiate an interface (no constructor defined).")}}var a=goog.defineClass.createSealingConstructor_(b,c);if(c){goog.inherits(a,c)}delete d.constructor;delete d.statics;goog.defineClass.applyProperties_(a.prototype,d);if(e!=null){if(e instanceof Function){e(a)}else{goog.defineClass.applyProperties_(a,e)}}return a};goog.defineClass.ClassDescriptor;goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG);goog.defineClass.createSealingConstructor_=function(c,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]){return c}var a=function(){var d=c.apply(this,arguments)||this;d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_];if(this.constructor===a){Object.seal(d)}return d};return a}return c};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.defineClass.applyProperties_=function(d,c){var b;for(b in c){if(Object.prototype.hasOwnProperty.call(c,b)){d[b]=c[b]}}for(var a=0;a<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;a++){b=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[a];if(Object.prototype.hasOwnProperty.call(c,b)){d[b]=c[b]}}};goog.tagUnsealableClass=function(a){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES){a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true}};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";goog.DEBUG=false;goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.base=function(f,d,g){var e=Array.prototype.slice.call(arguments,2);return a.prototype[d].apply(f,e)}};if(!goog.userAgent){goog.userAgent=(function(){var b="";if("undefined"!==typeof navigator&&navigator&&"string"==typeof navigator.userAgent){b=navigator.userAgent}var a=b.indexOf("Opera")==0;return{jscript:{HAS_JSCRIPT:"ScriptEngine" in this},OPERA:a,IE:!a&&b.indexOf("MSIE")!=-1,WEBKIT:!a&&b.indexOf("WebKit")!=-1}})()}if(!goog.asserts){goog.asserts={assert:function(a){if(!a){throw Error("Assertion error")}},fail:function(a){}}}if(!goog.dom){goog.dom={};goog.dom.DomHelper=function(a){this.document_=a||document};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createDocumentFragment=function(){return this.document_.createDocumentFragment()}}if(!goog.format){goog.format={insertWordBreaks:function(j,a){j=String(j);var f=[];var h=0;var b=false;var k=false;var g=0;var d=0;for(var e=0,c=j.length;e<c;++e){var l=j.charCodeAt(e);if(g>=a&&l!=32){f[h++]=j.substring(d,e);d=e;f[h++]=goog.format.WORD_BREAK;g=0}if(b){if(l==62){b=false}}else{if(k){switch(l){case 59:k=false;++g;break;case 60:k=false;b=true;break;case 32:k=false;g=0;break}}else{switch(l){case 60:b=true;break;case 38:k=true;break;case 32:g=0;break;default:++g;break}}}}f[h++]=j.substring(d);return f.join("")},WORD_BREAK:goog.userAgent.WEBKIT?"<wbr></wbr>":goog.userAgent.OPERA?"&shy;":goog.userAgent.IE?"&#8203;":"<wbr>"}}if(!goog.i18n){goog.i18n={bidi:{}}}goog.i18n.bidi.IS_RTL=false;goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0,UNKNOWN:0};goog.i18n.bidi.toDir=function(b,a){if(typeof b=="number"){return b>0?goog.i18n.bidi.Dir.LTR:b<0?goog.i18n.bidi.Dir.RTL:a?null:goog.i18n.bidi.Dir.NEUTRAL}else{if(b==null){return null}else{return b?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR}}};goog.i18n.bidi.estimateDirection=function(h,c){var d=0;var a=0;var b=false;var g=soyshim.$$bidiStripHtmlIfNecessary_(h,c).split(soyshim.$$bidiWordSeparatorRe_);for(var f=0;f<g.length;f++){var e=g[f];if(soyshim.$$bidiRtlDirCheckRe_.test(e)){d++;a++}else{if(soyshim.$$bidiIsRequiredLtrRe_.test(e)){b=true}else{if(soyshim.$$bidiLtrCharRe_.test(e)){a++}else{if(soyshim.$$bidiHasNumeralsRe_.test(e)){b=true}}}}}return a==0?(b?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL):(d/a>soyshim.$$bidiRtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR)};goog.i18n.BidiFormatter=function(a){this.dir_=goog.i18n.bidi.toDir(a,true)};goog.i18n.BidiFormatter.prototype.getContextDir=function(){return this.dir_};goog.i18n.BidiFormatter.prototype.knownDirAttr=function(a){return !a||a==this.dir_?"":a<0?'dir="rtl"':'dir="ltr"'};goog.i18n.BidiFormatter.prototype.endEdge=function(){return this.dir_<0?"left":"right"};goog.i18n.BidiFormatter.prototype.mark=function(){return((this.dir_>0)?"\u200E":(this.dir_<0)?"\u200F":"")};goog.i18n.BidiFormatter.prototype.markAfterKnownDir=function(b,c,a){if(b==null){b=goog.i18n.bidi.estimateDirection(c,a)}return(this.dir_>0&&(b<0||soyshim.$$bidiIsRtlExitText_(c,a))?"\u200E":this.dir_<0&&(b>0||soyshim.$$bidiIsLtrExitText_(c,a))?"\u200F":"")};goog.i18n.BidiFormatter.prototype.spanWrapWithKnownDir=function(b,d,c){if(b==null){b=goog.i18n.bidi.estimateDirection(d,true)}var a=this.markAfterKnownDir(b,d,true);if(b>0&&this.dir_<=0){d='<span dir="ltr">'+d+"</span>"}else{if(b<0&&this.dir_>=0){d='<span dir="rtl">'+d+"</span>"}}return d+a};goog.i18n.BidiFormatter.prototype.startEdge=function(){return this.dir_<0?"right":"left"};goog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir=function(c,d,a){if(c==null){c=goog.i18n.bidi.estimateDirection(d,a)}var b=this.markAfterKnownDir(c,d,a);if(c>0&&this.dir_<=0){d="\u202A"+d+"\u202C"}else{if(c<0&&this.dir_>=0){d="\u202B"+d+"\u202C"}}return d+b};if(!goog.string){goog.string={newLineToBr:function(b,a){b=String(b);if(!goog.string.NEWLINE_TO_BR_RE_.test(b)){return b}return b.replace(/(\r\n|\r|\n)/g,a?"<br />":"<br>")},urlEncode:encodeURIComponent,NEWLINE_TO_BR_RE_:/[\r\n]/}}goog.string.StringBuffer=function(a,b){this.buffer_=goog.userAgent.jscript.HAS_JSCRIPT?[]:"";if(a!=null){this.append.apply(this,arguments)}};goog.string.StringBuffer.prototype.bufferLength_=0;goog.string.StringBuffer.prototype.append=function(c,b,e){if(goog.userAgent.jscript.HAS_JSCRIPT){if(b==null){this.buffer_[this.bufferLength_++]=c}else{var a=(this.buffer_);a.push.apply(a,arguments);this.bufferLength_=this.buffer_.length}}else{this.buffer_+=c;if(b!=null){for(var d=1;d<arguments.length;d++){this.buffer_+=arguments[d]}}}return this};goog.string.StringBuffer.prototype.clear=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};goog.string.StringBuffer.prototype.toString=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){var a=this.buffer_.join("");this.clear();if(a){this.append(a)}return a}else{return(this.buffer_)}};if(!goog.soy){goog.soy={renderAsElement:function(c,a,b,d){return(soyshim.$$renderWithWrapper_(c,a,d,true,b))},renderAsFragment:function(c,a,b,d){return soyshim.$$renderWithWrapper_(c,a,d,false,b)},renderElement:function(c,d,a,b){c.innerHTML=d(a,null,b)},data:{}}}goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:true}:{},JS:goog.DEBUG?{sanitizedContentJsChars:true}:{},JS_STR_CHARS:goog.DEBUG?{sanitizedContentJsStrChars:true}:{},URI:goog.DEBUG?{sanitizedContentUri:true}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:true}:{},CSS:goog.DEBUG?{sanitizedContentCss:true}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:true}:{}};goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly")};goog.soy.data.SanitizedContent.prototype.contentKind;goog.soy.data.SanitizedContent.prototype.contentDir=null;goog.soy.data.SanitizedContent.prototype.content;goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content};var soy={esc:{}};var soydata={};soydata.VERY_UNSAFE={};var soyshim={$$DEFAULT_TEMPLATE_DATA_:{}};soyshim.$$renderWithWrapper_=function(h,f,b,c,i){var d=b||document;var a=d.createElement("div");a.innerHTML=h(f||soyshim.$$DEFAULT_TEMPLATE_DATA_,undefined,i);if(a.childNodes.length==1){var g=a.firstChild;if(!c||g.nodeType==1){return(g)}}if(c){return a}var e=d.createDocumentFragment();while(a.firstChild){e.appendChild(a.firstChild)}return e};soyshim.$$bidiStripHtmlIfNecessary_=function(b,a){return a?b.replace(soyshim.$$BIDI_HTML_SKIP_RE_,""):b};soyshim.$$BIDI_HTML_SKIP_RE_=/<[^>]*>|&[^;]+;/g;soyshim.$$bidiLtrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";soyshim.$$bidiRtlChars_="\u0591-\u07FF\u200F\uFB1D-\uFDFF\uFE70-\uFEFC";soyshim.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soyshim.$$bidiLtrChars_+"]*["+soyshim.$$bidiRtlChars_+"]");soyshim.$$bidiLtrCharRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"]");soyshim.$$bidiIsRequiredLtrRe_=/^http:\/\/.*/;soyshim.$$bidiHasNumeralsRe_=/\d/;soyshim.$$bidiWordSeparatorRe_=/\s+/;soyshim.$$bidiRtlDetectionThreshold_=0.4;soyshim.$$bidiLtrExitDirCheckRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"][^"+soyshim.$$bidiRtlChars_+"]*$");soyshim.$$bidiRtlExitDirCheckRe_=new RegExp("["+soyshim.$$bidiRtlChars_+"][^"+soyshim.$$bidiLtrChars_+"]*$");soyshim.$$bidiIsLtrExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiLtrExitDirCheckRe_.test(b)};soyshim.$$bidiIsRtlExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiRtlExitDirCheckRe_.test(b)};soy.StringBuilder=goog.string.StringBuffer;soydata.SanitizedContentKind=goog.soy.data.SanitizedContentKind;soydata.isContentKind=function(a,b){return a!=null&&a.contentKind===b};soydata.getContentDir=function(a){if(a!=null){switch(a.contentDir){case goog.i18n.bidi.Dir.LTR:return goog.i18n.bidi.Dir.LTR;case goog.i18n.bidi.Dir.RTL:return goog.i18n.bidi.Dir.RTL;case goog.i18n.bidi.Dir.NEUTRAL:return goog.i18n.bidi.Dir.NEUTRAL}}return null};soydata.SanitizedHtml=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtml,goog.soy.data.SanitizedContent);soydata.SanitizedHtml.prototype.contentKind=soydata.SanitizedContentKind.HTML;soydata.SanitizedHtml.from=function(a){if(a!=null&&a.contentKind===soydata.SanitizedContentKind.HTML){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return(a)}return soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.esc.$$escapeHtmlHelper(String(a)),soydata.getContentDir(a))};soydata.SanitizedJs=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJs,goog.soy.data.SanitizedContent);soydata.SanitizedJs.prototype.contentKind=soydata.SanitizedContentKind.JS;soydata.SanitizedJs.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedJsStrChars=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJsStrChars,goog.soy.data.SanitizedContent);soydata.SanitizedJsStrChars.prototype.contentKind=soydata.SanitizedContentKind.JS_STR_CHARS;soydata.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedUri,goog.soy.data.SanitizedContent);soydata.SanitizedUri.prototype.contentKind=soydata.SanitizedContentKind.URI;soydata.SanitizedUri.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedHtmlAttribute=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtmlAttribute,goog.soy.data.SanitizedContent);soydata.SanitizedHtmlAttribute.prototype.contentKind=soydata.SanitizedContentKind.ATTRIBUTES;soydata.SanitizedHtmlAttribute.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedCss=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedCss,goog.soy.data.SanitizedContent);soydata.SanitizedCss.prototype.contentKind=soydata.SanitizedContentKind.CSS;soydata.SanitizedCss.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.UnsanitizedText=function(a,b){this.content=String(a);this.contentDir=b!=null?b:null};goog.inherits(soydata.UnsanitizedText,goog.soy.data.SanitizedContent);soydata.UnsanitizedText.prototype.contentKind=soydata.SanitizedContentKind.TEXT;soydata.$$EMPTY_STRING_={VALUE:""};soydata.$$makeSanitizedContentFactory_=function(b){function a(){}a.prototype=b.prototype;function c(e,f){var d=new a();d.content=String(e);if(f!==undefined){d.contentDir=f}return d}return c};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(b){function a(){}a.prototype=b.prototype;function c(e){var d=new a();d.content=String(e);return d}return c};soydata.markUnsanitizedText=function(a,b){return new soydata.UnsanitizedText(a,b)};soydata.VERY_UNSAFE.ordainSanitizedHtml=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.ordainSanitizedJs=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedJs);soydata.VERY_UNSAFE.ordainSanitizedJsStrChars=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedJsStrChars);soydata.VERY_UNSAFE.ordainSanitizedUri=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedUri);soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.ordainSanitizedCss=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedCss);soy.renderElement=goog.soy.renderElement;soy.renderAsFragment=function(d,b,a,c){return goog.soy.renderAsFragment(d,b,c,new goog.dom.DomHelper(a))};soy.renderAsElement=function(d,b,a,c){return goog.soy.renderAsElement(d,b,c,new goog.dom.DomHelper(a))};soy.$$IS_LOCALE_RTL=goog.i18n.bidi.IS_RTL;soy.$$augmentMap=function(a,d){function e(){}e.prototype=a;var b=new e();for(var c in d){b[c]=d[c]}return b};soy.$$checkMapKey=function(a){if((typeof a)!="string"){throw Error("Map literal's key expression must evaluate to string (encountered type \""+(typeof a)+'").')}return a};soy.$$getMapKeys=function(c){var b=[];for(var a in c){b.push(a)}return b};soy.$$getDelTemplateId=function(a){return a};soy.$$DELEGATE_REGISTRY_PRIORITIES_={};soy.$$DELEGATE_REGISTRY_FUNCTIONS_={};soy.$$registerDelegateFn=function(f,c,d,b){var e="key_"+f+":"+c;var a=soy.$$DELEGATE_REGISTRY_PRIORITIES_[e];if(a===undefined||d>a){soy.$$DELEGATE_REGISTRY_PRIORITIES_[e]=d;soy.$$DELEGATE_REGISTRY_FUNCTIONS_[e]=b}else{if(d==a){throw Error('Encountered two active delegates with the same priority ("'+f+":"+c+'").')}else{}}};soy.$$getDelegateFn=function(c,b,d){var a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+c+":"+b];if(!a&&b!=""){a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+c+":"]}if(a){return a}else{if(d){return soy.$$EMPTY_TEMPLATE_FN_}else{throw Error('Found no active impl for delegate call to "'+c+":"+b+'" (and not allowemptydefault="true").')}}};soy.$$EMPTY_TEMPLATE_FN_=function(a,c,b){return""};soydata.$$makeSanitizedContentFactoryForInternalBlocks_=function(b){function a(){}a.prototype=b.prototype;function c(e,f){var g=String(e);if(!g){return soydata.$$EMPTY_STRING_.VALUE}var d=new a();d.content=String(e);if(f!==undefined){d.contentDir=f}return d}return c};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_=function(b){function a(){}a.prototype=b.prototype;function c(e){var f=String(e);if(!f){return soydata.$$EMPTY_STRING_.VALUE}var d=new a();d.content=String(e);return d}return c};soydata.$$markUnsanitizedTextForInternalBlocks=function(a,b){var c=String(a);if(!c){return soydata.$$EMPTY_STRING_.VALUE}return new soydata.UnsanitizedText(c,b)};soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks=soydata.$$makeSanitizedContentFactoryForInternalBlocks_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.$$ordainSanitizedJsForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedJs);soydata.VERY_UNSAFE.$$ordainSanitizedUriForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedUri);soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.$$ordainSanitizedCssForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedCss);soy.$$escapeHtml=function(a){return soydata.SanitizedHtml.from(a)};soy.$$cleanHtml=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return(a)}return soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.$$stripHtmlTags(a,soy.esc.$$SAFE_TAG_WHITELIST_),soydata.getContentDir(a))};soy.$$escapeHtmlRcdata=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlHelper(a.content)}return soy.esc.$$escapeHtmlHelper(a)};soy.$$HTML5_VOID_ELEMENTS_=new RegExp("^<(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\\b");soy.$$stripHtmlTags=function(d,c){if(!c){return String(d).replace(soy.esc.$$HTML_TAG_REGEX_,"").replace(soy.esc.$$LT_REGEX_,"&lt;")}var b=String(d).replace(/\[/g,"&#91;");var a=[];b=b.replace(soy.esc.$$HTML_TAG_REGEX_,function(f,h){if(h){h=h.toLowerCase();if(c.hasOwnProperty(h)&&c[h]){var i=f.charAt(1)==="/"?"</":"<";var g=a.length;a[g]=i+h+">";return"["+g+"]"}}return""});b=soy.esc.$$normalizeHtmlHelper(b);var e=soy.$$balanceTags_(a);b=b.replace(/\[(\d+)\]/g,function(g,f){return a[f]});return b+e};soy.$$balanceTags_=function(c){var b=[];for(var d=0,f=c.length;d<f;++d){var a=c[d];if(a.charAt(1)==="/"){var e=b.length-1;while(e>=0&&b[e]!=a){e--}if(e<0){c[d]=""}else{c[d]=b.slice(e).reverse().join("");b.length=e}}else{if(!soy.$$HTML5_VOID_ELEMENTS_.test(a)){b.push("</"+a.substring(1))}}}return b.reverse().join("")};soy.$$escapeHtmlAttribute=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlAttributeNospace=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlNospaceHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlNospaceHelper(a)};soy.$$filterHtmlAttributes=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.ATTRIBUTES)){goog.asserts.assert(a.constructor===soydata.SanitizedHtmlAttribute);return a.content.replace(/([^"'\s])$/,"$1 ")}return soy.esc.$$filterHtmlAttributesHelper(a)};soy.$$filterHtmlElementName=function(a){return soy.esc.$$filterHtmlElementNameHelper(a)};soy.$$escapeJs=function(a){return soy.$$escapeJsString(a)};soy.$$escapeJsString=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.JS_STR_CHARS)){goog.asserts.assert(a.constructor===soydata.SanitizedJsStrChars);return a.content}return soy.esc.$$escapeJsStringHelper(a)};soy.$$escapeJsValue=function(a){if(a==null){return" null "}if(soydata.isContentKind(a,soydata.SanitizedContentKind.JS)){goog.asserts.assert(a.constructor===soydata.SanitizedJs);return a.content}switch(typeof a){case"boolean":case"number":return" "+a+" ";default:return"'"+soy.esc.$$escapeJsStringHelper(String(a))+"'"}};soy.$$escapeJsRegex=function(a){return soy.esc.$$escapeJsRegexHelper(a)};soy.$$problematicUriMarks_=/['()]/g;soy.$$pctEncode_=function(a){return"%"+a.charCodeAt(0).toString(16)};soy.$$escapeUri=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.URI)){goog.asserts.assert(a.constructor===soydata.SanitizedUri);return soy.$$normalizeUri(a)}var b=soy.esc.$$escapeUriHelper(a);soy.$$problematicUriMarks_.lastIndex=0;if(soy.$$problematicUriMarks_.test(b)){return b.replace(soy.$$problematicUriMarks_,soy.$$pctEncode_)}return b};soy.$$normalizeUri=function(a){return soy.esc.$$normalizeUriHelper(a)};soy.$$filterNormalizeUri=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.URI)){goog.asserts.assert(a.constructor===soydata.SanitizedUri);return soy.$$normalizeUri(a)}return soy.esc.$$filterNormalizeUriHelper(a)};soy.$$filterImageDataUri=function(a){return soydata.VERY_UNSAFE.ordainSanitizedUri(soy.esc.$$filterImageDataUriHelper(a))};soy.$$escapeCssString=function(a){return soy.esc.$$escapeCssStringHelper(a)};soy.$$filterCssValue=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.CSS)){goog.asserts.assert(a.constructor===soydata.SanitizedCss);return a.content}if(a==null){return""}return soy.esc.$$filterCssValueHelper(a)};soy.$$filterNoAutoescape=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.TEXT)){goog.asserts.fail("Tainted SanitizedContentKind.TEXT for |noAutoescape: `%s`",[a.content]);return"zSoyz"}return a};soy.$$changeNewlineToBr=function(b){var a=goog.string.newLineToBr(String(b),false);if(soydata.isContentKind(b,soydata.SanitizedContentKind.HTML)){return soydata.VERY_UNSAFE.ordainSanitizedHtml(a,soydata.getContentDir(b))}return a};soy.$$insertWordBreaks=function(c,b){var a=goog.format.insertWordBreaks(String(c),b);if(soydata.isContentKind(c,soydata.SanitizedContentKind.HTML)){return soydata.VERY_UNSAFE.ordainSanitizedHtml(a,soydata.getContentDir(c))}return a};soy.$$truncate=function(c,a,b){c=String(c);if(c.length<=a){return c}if(b){if(a>3){a-=3}else{b=false}}if(soy.$$isHighSurrogate_(c.charAt(a-1))&&soy.$$isLowSurrogate_(c.charAt(a))){a-=1}c=c.substring(0,a);if(b){c+="..."}return c};soy.$$isHighSurrogate_=function(a){return 55296<=a&&a<=56319};soy.$$isLowSurrogate_=function(a){return 56320<=a&&a<=57343};soy.$$bidiFormatterCache_={};soy.$$getBidiFormatterInstance_=function(a){return soy.$$bidiFormatterCache_[a]||(soy.$$bidiFormatterCache_[a]=new goog.i18n.BidiFormatter(a))};soy.$$bidiTextDir=function(d,a){var c=soydata.getContentDir(d);if(c!=null){return c}var b=a||soydata.isContentKind(d,soydata.SanitizedContentKind.HTML);return goog.i18n.bidi.estimateDirection(d+"",b)};soy.$$bidiDirAttr=function(b,f,a){var c=soy.$$getBidiFormatterInstance_(b);var e=soydata.getContentDir(f);if(e==null){var d=a||soydata.isContentKind(f,soydata.SanitizedContentKind.HTML);e=goog.i18n.bidi.estimateDirection(f+"",d)}return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute(c.knownDirAttr(e))};soy.$$bidiMarkAfter=function(b,e,a){var c=soy.$$getBidiFormatterInstance_(b);var d=a||soydata.isContentKind(e,soydata.SanitizedContentKind.HTML);return c.markAfterKnownDir(soydata.getContentDir(e),e+"",d)};soy.$$bidiSpanWrap=function(a,d){var c=soy.$$getBidiFormatterInstance_(a);var b=c.spanWrapWithKnownDir(soydata.getContentDir(d),d+"",true);return b};soy.$$bidiUnicodeWrap=function(a,f){var c=soy.$$getBidiFormatterInstance_(a);var d=soydata.isContentKind(f,soydata.SanitizedContentKind.HTML);var b=c.unicodeWrapWithKnownDir(soydata.getContentDir(f),f+"",d);var e=c.getContextDir();if(soydata.isContentKind(f,soydata.SanitizedContentKind.TEXT)){return new soydata.UnsanitizedText(b,e)}if(d){return soydata.VERY_UNSAFE.ordainSanitizedHtml(b,e)}if(soydata.isContentKind(f,soydata.SanitizedContentKind.JS_STR_CHARS)){return soydata.VERY_UNSAFE.ordainSanitizedJsStrChars(b,e)}return b};soy.esc.$$escapeUriHelper=function(a){return encodeURIComponent(String(a))};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_={"\x00":"\x26#0;","\x22":"\x26quot;","\x26":"\x26amp;","\x27":"\x26#39;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x09":"\x26#9;","\x0a":"\x26#10;","\x0b":"\x26#11;","\x0c":"\x26#12;","\x0d":"\x26#13;"," ":"\x26#32;","-":"\x26#45;","/":"\x26#47;","\x3d":"\x26#61;","`":"\x26#96;","\x85":"\x26#133;","\xa0":"\x26#160;","\u2028":"\x26#8232;","\u2029":"\x26#8233;"};soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_={"\x00":"\\x00","\x08":"\\x08","\x09":"\\t","\x0a":"\\n","\x0b":"\\x0b","\x0c":"\\f","\x0d":"\\r","\x22":"\\x22","\x26":"\\x26","\x27":"\\x27","/":"\\/","\x3c":"\\x3c","\x3d":"\\x3d","\x3e":"\\x3e","\\":"\\\\","\x85":"\\x85","\u2028":"\\u2028","\u2029":"\\u2029","$":"\\x24","(":"\\x28",")":"\\x29","*":"\\x2a","+":"\\x2b",",":"\\x2c","-":"\\x2d",".":"\\x2e",":":"\\x3a","?":"\\x3f","[":"\\x5b","]":"\\x5d","^":"\\x5e","{":"\\x7b","|":"\\x7c","}":"\\x7d"};soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_={"\x00":"\\0 ","\x08":"\\8 ","\x09":"\\9 ","\x0a":"\\a ","\x0b":"\\b ","\x0c":"\\c ","\x0d":"\\d ","\x22":"\\22 ","\x26":"\\26 ","\x27":"\\27 ","(":"\\28 ",")":"\\29 ","*":"\\2a ","/":"\\2f ",":":"\\3a ",";":"\\3b ","\x3c":"\\3c ","\x3d":"\\3d ","\x3e":"\\3e ","@":"\\40 ","\\":"\\5c ","{":"\\7b ","}":"\\7d ","\x85":"\\85 ","\xa0":"\\a0 ","\u2028":"\\2028 ","\u2029":"\\2029 "};soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[a]};soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_={"\x00":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\x08":"%08","\x09":"%09","\x0a":"%0A","\x0b":"%0B","\x0c":"%0C","\x0d":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20","\x22":"%22","\x27":"%27","(":"%28",")":"%29","\x3c":"%3C","\x3e":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_[a]};soy.esc.$$MATCHER_FOR_ESCAPE_HTML_=/[\x00\x22\x26\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_=/[\x00\x22\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g;soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i;soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_=/^data:image\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\/]+=*$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i;soy.esc.$$escapeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeJsStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeJsRegexHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeCssStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_)};soy.esc.$$filterCssValueHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(b)){return"zSoyz"}return b};soy.esc.$$normalizeUriHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterNormalizeUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(b)){return"#zSoyz"}return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterImageDataUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(b)){return"data:image/gif;base64,zSoyz"}return b};soy.esc.$$filterHtmlAttributesHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_.test(b)){return"zSoyz"}return b};soy.esc.$$filterHtmlElementNameHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(b)){return"zSoyz"}return b};soy.esc.$$HTML_TAG_REGEX_=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g;soy.esc.$$LT_REGEX_=/</g;soy.esc.$$SAFE_TAG_WHITELIST_={b:1,br:1,em:1,i:1,s:1,sub:1,sup:1,u:1};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.soy.soy-template-plugin:soy-deps', location = 'js/atlassian-deps.js' */
window.atl_soy=window.atl_soy||{};atl_soy.concat=function(d,c){if(d.concat){return d.concat(c)}var e={};for(var f in d){if(d.hasOwnProperty(f)){e[f]=d[f]}}for(var f in c){if(c.hasOwnProperty(f)){e[f]=c[f]}}return e};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-widget', location = 'src/js/aui/internal/widget.js' */
("undefined"===typeof window?global:window).__f6397c80406fe105a9ead0b34dba268d=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,d){var e="_aui-widget-"+a;return function(a,g){var b,c;f.default.isPlainObject(a)?c=a:(b=a,c=g);b=b&&(0,f.default)(b);!b||!b.data(e)?(c=new d(b,c||{}),b=c.$el,b.data(e,c)):c=b.data(e);return c}};var d=__bd7207540b95ff683caa1d3c0bfcc3d7,f=d&&d.__esModule?d:{"default":d};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-i18n-aui', location = 'src/js/aui/internal/i18n/aui.js' */
("undefined"===typeof window?global:window).__6f862c4c1a4dce4ede227d7c9ebe2e92=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={"aui.dropdown.async.error":"Error loading dropdown","aui.dropdown.async.loading":"Loading dropdown","aui.words.add":"Add","aui.words.update":"Update","aui.words.delete":"Delete","aui.words.remove":"Remove","aui.words.cancel":"Cancel","aui.words.loading":"Loading","aui.words.close":"Close","aui.enter.value":"Enter value","aui.words.more":"More",
"aui.words.moreitem":"More\u2026","aui.keyboard.shortcut.type.x":"Type ''{0}''","aui.keyboard.shortcut.then.x":"then ''{0}''","aui.keyboard.shortcut.or.x":"OR ''{0}''","aui.sidebar.expand.tooltip":"Expand sidebar ( [ )","aui.sidebar.collapse.tooltip":"Collapse sidebar ( [ )","aui.validation.message.maxlength":"Must be fewer than or equal to {0} characters","aui.validation.message.minlength":"Must be greater than or equal to {0} characters","aui.validation.message.exactlength":"Must be exactly {0} characters",
"aui.validation.message.matchingfield":"{0} and {1} do not match.","aui.validation.message.matchingfield-novalue":"These fields do not match.","aui.validation.message.doesnotcontain":"Do not include the phrase {0} in this field","aui.validation.message.pattern":"This field does not match the required format","aui.validation.message.required":"This is a required field","aui.validation.message.validnumber":"Please enter a valid number","aui.validation.message.min":"Enter a value greater than {0}","aui.validation.message.max":"Enter a value less than {0}",
"aui.validation.message.dateformat":"Enter a valid date","aui.validation.message.minchecked":"Tick at least {0,choice,0#0 checkboxes|1#1 checkbox|1<{0,number} checkboxes}.","aui.validation.message.maxchecked":"Tick at most {0,choice,0#0 checkboxes|1#1 checkbox|1<{0,number} checkboxes}.","aui.checkboxmultiselect.clear.selected":"Clear selected items","aui.select.no.suggestions":"No suggestions","aui.select.new.suggestions":"New suggestions added. Please use the up and down arrows to select.","aui.select.new.value":"new value",
"aui.toggle.on":"On","aui.toggle.off":"Off","ajs.datepicker.localisations.day-names.sunday":"Sunday","ajs.datepicker.localisations.day-names.monday":"Monday","ajs.datepicker.localisations.day-names.tuesday":"Tuesday","ajs.datepicker.localisations.day-names.wednesday":"Wednesday","ajs.datepicker.localisations.day-names.thursday":"Thursday","ajs.datepicker.localisations.day-names.friday":"Friday","ajs.datepicker.localisations.day-names.saturday":"Saturday","ajs.datepicker.localisations.day-names-min.sunday":"Sun",
"ajs.datepicker.localisations.day-names-min.monday":"Mon","ajs.datepicker.localisations.day-names-min.tuesday":"Tue","ajs.datepicker.localisations.day-names-min.wednesday":"Wed","ajs.datepicker.localisations.day-names-min.thursday":"Thu","ajs.datepicker.localisations.day-names-min.friday":"Fri","ajs.datepicker.localisations.day-names-min.saturday":"Sat","ajs.datepicker.localisations.first-day":0,"ajs.datepicker.localisations.is-RTL":!1,"ajs.datepicker.localisations.month-names.january":"January",
"ajs.datepicker.localisations.month-names.february":"February","ajs.datepicker.localisations.month-names.march":"March","ajs.datepicker.localisations.month-names.april":"April","ajs.datepicker.localisations.month-names.may":"May","ajs.datepicker.localisations.month-names.june":"June","ajs.datepicker.localisations.month-names.july":"July","ajs.datepicker.localisations.month-names.august":"August","ajs.datepicker.localisations.month-names.september":"September","ajs.datepicker.localisations.month-names.october":"October",
"ajs.datepicker.localisations.month-names.november":"November","ajs.datepicker.localisations.month-names.december":"December","ajs.datepicker.localisations.show-month-after-year":!1,"ajs.datepicker.localisations.year-suffix":null};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-i18n', location = 'src/js/aui/i18n.js' */
("undefined"===typeof window?global:window).__780f92e84f7b06d16e986a531e56e288=function(){function c(a){return a&&a.__esModule?a:{"default":a}}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=c(__b9ecb36a7ca0505acec463b07515cb6c),f=c(__9a668cbde1e182d8e721c23580356df2),d={keys:c(__6f862c4c1a4dce4ede227d7c9ebe2e92).default,getText:function(a){var b=Array.prototype.slice.call(arguments,1);return Object.prototype.hasOwnProperty.call(this.keys,a)?e.default.apply(null,[this.keys[a]].concat(b)):
a}};(0,f.default)("I18n",d);b.default=d;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-navigation', location = 'src/js/aui/navigation.js' */
("undefined"===typeof window?global:window).__7a3efe97736776c802c7260e27b6b534=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function b(a){this.$el=(0,d.default)(a).closest(".aui-nav");if(1<this.$el.length)return this.$el.map(function(a,d){return new b(d)})[0];if(this.$el.data("aui-navigation"))return this.$el.data("aui-navigation");this.$el.data("aui-navigation",this);this.$treeParent=this.$el.parent("li[aria-expanded]");this.$subtreeToggleIcon=this.$treeParent.children(".aui-nav-subtree-toggle").children("span.aui-icon");
this.hideMoreItems();this.$el.children("li:has(.aui-nav-selected)").addClass("aui-nav-child-selected");a=this.$el.children(".aui-nav-selected");a.parents(".aui-nav > [aria-expanded=false]").add(a.filter("[aria-expanded=false]")).each(function(){e((0,d.default)(this).children(".aui-nav")).expand()});this.$el.find("> li[aria-expanded] > .aui-nav-subtree-toggle").on("click",function(){e((0,d.default)(this).siblings(".aui-nav")).toggle()});return this}var f={};"use strict";Object.defineProperty(f,"__esModule",
{value:!0});__780f92e84f7b06d16e986a531e56e288;var d=c(__bd7207540b95ff683caa1d3c0bfcc3d7),g=c(__7acfe7fd38bbf8b5bf76cc953770b033),h=c(__9a668cbde1e182d8e721c23580356df2),i=c(__f6397c80406fe105a9ead0b34dba268d);b.prototype.isNested=function(){return 1===this.$treeParent.length};b.prototype.isCollapsed=function(){return"false"===this.$treeParent.attr("aria-expanded")};b.prototype.expand=function(){this.$treeParent.attr("aria-expanded","true");this.$subtreeToggleIcon.removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded");
this.hideMoreItems();return this};b.prototype.collapse=function(){this.$treeParent.attr("aria-expanded","false");this.$subtreeToggleIcon.removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed");return this};b.prototype.toggle=function(){this.isCollapsed()?this.expand():this.collapse();return this};b.prototype.hideMoreItems=function(){if(this.$el.is(".aui-nav:not([aria-expanded=false]) [data-more]")){var a=this.$el.attr("data-more")||"More\u2026",b=Math.abs(parseInt(this.$el.attr("data-more-limit")))||
5,c=this.$el.children("li"),e=c.length<=b+1,f=c.filter(".aui-nav-selected").length,g=c.filter(".aui-nav-more").length;if(e||f||g)return this;(0,d.default)("<li>",{"class":"aui-nav-more","aria-hidden":"true"}).append((0,d.default)("<a>",{href:"#","class":"aui-nav-item",text:a,click:function(a){a.preventDefault();(0,d.default)(this).parent().remove()}})).insertAfter(c.eq(b-1))}return this};var e=(0,i.default)("navigation",b);(0,g.default)("aui-nav",{type:g.default.type.CLASSNAME,attached:function(a){new b(a)},
detached:function(a){(0,d.default)(a).removeData()}});(0,h.default)("navigation",e);f.default=e;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-navigation', location = 'src/soy/navigation.soy' */
// This file was automatically generated from navigation.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.navigation.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.navigation == 'undefined') { aui.navigation = {}; }


aui.navigation.item = function(opt_data, opt_ignored) {
  return '<li class="' + ((opt_data.isSelected || opt_data.key && opt_data.selectedItemKey == opt_data.key) ? 'aui-nav-selected' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.isCollapsible && opt_data.children && opt_data.children.length > 0) ? 'aria-expanded="' + ((opt_data.isCollapsed) ? 'false' : 'true') + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.children && opt_data.children.length > 0 && opt_data.isCollapsible) ? '<a href="#" class="aui-nav-subtree-toggle">' + aui.icons.icon({icon: opt_data.isCollapsed ? 'collapsed' : 'expanded', size: 'small', useIconFont: true}) + '</a>' : '') + '<a class="aui-nav-item" href="' + soy.$$escapeHtml(opt_data.href) + '">' + ((opt_data.iconClass && ! opt_data.isChild) ? aui.icons.icon({icon: opt_data.iconClass, size: 'small', useIconFont: true}) : '') + ((opt_data.count == 0 || opt_data.count) ? '<aui-badge>' + soy.$$escapeHtml(opt_data.count) + '</aui-badge>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a>' + ((opt_data.children && opt_data.children.length > 0) ? aui.navigation.nav({items: opt_data.children, selectedItemKey: opt_data.selectedItemKey, isChild: true}) : '') + '</li>';
};
if (goog.DEBUG) {
  aui.navigation.item.soyTemplateName = 'aui.navigation.item';
}


aui.navigation.nav = function(opt_data, opt_ignored) {
  var output = '<ul class="aui-nav' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>';
  var itemList58 = opt_data.items;
  var itemListLen58 = itemList58.length;
  for (var itemIndex58 = 0; itemIndex58 < itemListLen58; itemIndex58++) {
    var itemData58 = itemList58[itemIndex58];
    output += aui.navigation.item(soy.$$augmentMap(itemData58, {isChild: opt_data.isChild, selectedItemKey: opt_data.selectedItemKey}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  aui.navigation.nav.soyTemplateName = 'aui.navigation.nav';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-template-html-0.0.0-dist-template-html', location = 'node_modules/skatejs-template-html/dist/template-html.js' */
("undefined"===typeof window?global:window).__2b1734744f1decec6fe4109762d4ff9c=function(){var i={exports:{}},u=i.exports,A={module:i,exports:u},l;l=function(a,b,f){var g=("undefined"===typeof window?global:window).define,e,c,f=[f,b,a].filter(function(d){return"function"===typeof d})[0],b=[b,a,[]].filter(Array.isArray)[0];e=f.apply(null,b.map(function(d){return A[d]}));c=typeof e;"function"===typeof g&&g("string"===typeof a?a:"__2b1734744f1decec6fe4109762d4ff9c",b,f);"string"===c?e=String(e):"number"===
c?e=Number(e):"boolean"===c&&(e=Boolean(e));void 0!==e&&(u=i.exports=e)};l.amd=!0;var v=function(a,b,f){a.__SKATE_TEMPLATE_HTML_DATA||(a.__SKATE_TEMPLATE_HTML_DATA={});a.__SKATE_TEMPLATE_HTML_DATA[b]=f;return a},q=function(a){var b={caption:"table",dd:"dl",dt:"dl",li:"ul",tbody:"table",td:"tr",thead:"table",tr:"tbody"},f=a.match(/\s*<([^\s>]+)/),b=document.createElement(f&&b[f[1]]||"div");b.innerHTML=a;return w(b.childNodes)},w=function(a){for(var b=document.createDocumentFragment();a&&a.length;)b.appendChild(a[0]);
return b},r=function(a,b){for(var f=[],g=a.nextSibling;g!==b;)f.push(g),g=g.nextSibling;return f},s=function(a){for(var b=a.defaultNodes,f=b.length,g=0;g<f;g++)a.container.insertBefore(b[g],a.endNode);a.isDefault=!0},t=function(a){for(var b=a.defaultNodes,f=b.length,g=0;g<f;g++){var e=b[g];e.parentNode.removeChild(e)}a.isDefault=!1},B=function(a,b){return{get:function(){var f=a[b];return"function"===typeof f?f.bind(a):f},set:function(f){a[b]=f}}},x=function(a){for(var b=a.childNodes,f=b.length,g=
[],e,a=0;a<f;a++){var c=b[a];if(8===c.nodeType){var d;d=c;var j=void 0,h=d.textContent.match(/^ (\/?)content (.*)/i);if(h){if(h[2])try{j=JSON.parse(h[2])}catch(p){throw Error('Unable to parse content comment data: "'+p+'" in "<\!--'+d.textContent+'--\>".');}d={data:j||{defaultContent:void 0,isDefault:void 0,selector:void 0},type:h[1]?"close":"open"}}else d=void 0;if(d)if("open"===d.type){if(e)throw Error('Cannot have an opening content placeholder after another content placeholder at the same level in the DOM tree: "'+
c.textContent+'" in "'+c.parentNode.innerHTML+'".');e={container:c.parentNode,contentNode:c,defaultNodes:d.data.defaultContent&&q(d.data.defaultContent).childNodes||[],isDefault:d.data.isDefault,selector:d.data.selector,startNode:c}}else if("close"===d.type){if(!e)throw Error('Unmatched closing content placeholder: "'+c.textContent+'" in "'+c.parentNode.innerHTML+'".');e.endNode=c;g.push(e);e=void 0}}else g=g.concat(x(c))}return g},k=function(){var a=[].slice.call(arguments).join("");return function(b){var f=
w(b.childNodes);b.innerHTML=a;var g=b.getElementsByTagName("content");if(g&&g.length){for(var e=[];g.length;){var c=g[0],d=c.parentNode,j=c.getAttribute("select"),h=document.createComment(" content "),p=document.createComment(" /content ");e.push({container:d,contentNode:c,defaultNodes:[].slice.call(c.childNodes),endNode:p,isDefault:!0,selector:j,startNode:h});d.replaceChild(p,c);d.insertBefore(h,p);h.textContent+=JSON.stringify({defaultContent:c.innerHTML,selector:j})+" "}v(b,"content",e)}f.childNodes.length&&
k.wrap(b).appendChild(f)}},y=window.DocumentFragment,m=window.HTMLElement.prototype,z=m.matches||m.msMatchesSelector||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector;k.wrap=function(a){var b;b=a.__SKATE_TEMPLATE_HTML_DATA?a.__SKATE_TEMPLATE_HTML_DATA.content:void 0;b||v(a,"content",x(a));var f;f=a.__SKATE_TEMPLATE_HTML_DATA?a.__SKATE_TEMPLATE_HTML_DATA.content:void 0;var g=f.length;b={childNodes:{get:function(){for(var d=[],j=0;j<g;j++){var h=f[j];h.isDefault||(d=d.concat(r(h.startNode,
h.endNode)))}return d}},firstChild:{get:function(){var d=this.childNodes;return d.length&&d[0]||null}},innerHTML:{get:function(){for(var d="",j=this.childNodes,h=j.length,a=0;a<h;a++)var b=j[a],d=d+(b.outerHTML||b.textContent);return d},set:function(d){for(var d=q(d),a=0;a<g;a++){for(var h=f[a],b=r(h.startNode,h.endNode),c=0;c<b.length;c++){var e=b[c];e.parentNode.removeChild(e)}b=d;if(c=h.selector){for(var c=b.querySelectorAll(c),e=c.length,i=[],n=0;n<e;n++){var o=c[n];o.parentNode===b&&i.push(o)}b=
i}else b=[].slice.call(b.childNodes)||[];for(c=0;c<b.length;c++)h.container.insertBefore(b[c],h.endNode);b.length?t(h):s(h)}}},lastChild:{get:function(){for(var d=g-1;-1<d;d--)if(!f[d].isDefault)return d=this.childNodes,d[d.length-1];return null}},outerHTML:{get:function(){var d=this.tagName.toLowerCase(),a="<"+d,b=this.attributes;if(b)for(var c=b.length,f=0;f<c;f++)var g=b[f],a=a+(" "+g.nodeName+'="'+g.nodeValue+'"');a=a+">"+this.innerHTML;return a+("</"+d+">")}},textContent:{get:function(){for(var d=
"",a=this.childNodes,b=this.childNodes.length,c=0;c<b;c++)d+=a[c].textContent;return d},set:function(d){var a;this.innerHTML="";for(var b=0;b<g;b++){var c=f[b];if(!c.selector){a=c;break}}a&&(d?(t(a),a.container.insertBefore(document.createTextNode(d),a.endNode)):s(a))}},appendChild:{value:function(d){if(d instanceof y)return[].slice.call(d.childNodes).forEach(function(a){this.appendChild(a)}.bind(this)),this;for(var a=0;a<g;a++){var b=f[a],c=b.selector;if(!c||d instanceof window.HTMLElement&&z.call(d,
c)){t(b);b.endNode.parentNode.insertBefore(d,b.endNode);break}}return this}},insertAdjacentHTML:{value:function(d,b){"afterbegin"===d?this.insertBefore(q(b),this.childNodes[0]):"beforeend"===d?this.appendChild(q(b)):a.insertAdjacentHTML(d,b);return this}},insertBefore:{value:function(a,b){if(!b)return this.appendChild(a);if(a instanceof y){var c=a.childNodes;if(c)for(var e=c.length,i=0;i<e;i++)this.insertBefore(c[i],b);return this}c=!1;e=0;a:for(;e<g;e++)for(var i=f[e],k=r(i.startNode,i.endNode),
m=k.length,n=0;n<m;n++){var o=k[n];o===b&&(c=!0);if(c){var l=i.selector;if(!l||z.call(a,l)){o.parentNode.insertBefore(a,o);break a}}}if(!c)throw Error("DOMException 8: The node before which the new node is to be inserted is not a child of this node.");return a}},removeChild:{value:function(a){for(var b=!1,c=0;c<g;c++){var e=f[c];if(e.container===a.parentNode){e.container.removeChild(a);b=!0;break}e.startNode.nextSibling===e.endNode&&s(e)}if(!b)throw Error("DOMException 8: The node in which you are trying to remove is not a child of this node.");
return a}},replaceChild:{value:function(a,b){for(var c=0;c<g;c++){var e=f[c];if(e.container===b.parentNode){e.container.replaceChild(a,b);break}}return this}}};var e={},c;for(c in a)c in b?Object.defineProperty(e,c,b[c]):Object.defineProperty(e,c,B(a,c));return e};window.skateTemplateHtml=k;"function"===typeof l&&l(function(){return k});"object"===typeof i&&(i.exports=k);return i.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-header-create-header', location = 'src/js/aui/internal/header/create-header.js' */
("undefined"===typeof window?global:window).__fb1ea8007a584168c1a1610db14baf17=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function k(a){this.element=a;this.$element=(0,f.default)(a);this.index=(0,f.default)("aui-header, .aui-header").index(a);this.$secondaryNav=this.$element.find(".aui-header-secondary .aui-nav").first();this.menuItems=[];this.totalWidth=0;this.rightMostNavItemIndex=this.$moreMenu=void 0;this.$applicationLogo=this.$element.find("#logo");this.primaryButtonsWidth=
this.moreMenuWidth=0;var b=(0,f.default)(this.$element[0].querySelector(".aui-header-primary"));this.$headerFind=function(a){return b.find(a)}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var f=d(__bd7207540b95ff683caa1d3c0bfcc3d7),n=d(__b4f5303c3f6b97d2fd503b5013ff8de7),o=d(__797d10010c51da30b099c976f973e278),p=d(__780f92e84f7b06d16e986a531e56e288),j=d(__7acfe7fd38bbf8b5bf76cc953770b033),l=d(__2b1734744f1decec6fe4109762d4ff9c),m=(0,f.default)(window);k.prototype={init:function(){var a=
this;this.element.setAttribute("data-aui-responsive","true");this.$headerFind(".aui-button").parent().each(function(){a.primaryButtonsWidth+=(0,f.default)(this).outerWidth(!0)});this.$headerFind(".aui-nav > li > a:not(.aui-button)").each(function(){var b=(0,f.default)(this).parent(),g=b.outerWidth(!0);a.totalWidth+=g;a.menuItems.push({$element:b,outerWidth:g})});this.rightMostNavItemIndex=this.menuItems.length-1;m.on("resize",this._resizeHandler=(0,o.default)(function(){a.constructResponsiveDropdown()},
100));var b=this.$applicationLogo.find("img");0!==b.length&&(b.attr("data-aui-responsive-header-index",this.index),b.on("load",function(){a.constructResponsiveDropdown()}));this.constructResponsiveDropdown();this.$headerFind(".aui-nav").css("width","auto")},destroy:function(){m.off("resize",this._resizeHandler)},calculateAvailableWidth:function(){var a=this.$secondaryNav.is(":visible")?this.$secondaryNav.offset().left:this.$element.outerWidth(),b=this.$applicationLogo.offset().left+this.$applicationLogo.outerWidth(!0)+
this.primaryButtonsWidth;return a-b},showResponsiveDropdown:function(){void 0===this.$moreMenu&&(this.$moreMenu=this.createResponsiveDropdownTrigger());this.$moreMenu.css("display","")},hideResponsiveDropdown:function(){void 0!==this.$moreMenu&&this.$moreMenu.css("display","none")},constructResponsiveDropdown:function(){if(this.menuItems.length){var a;a=this.calculateAvailableWidth(this.$element,this.primaryButtonsWidth);if(a>this.totalWidth)this.showAll();else{this.showResponsiveDropdown();a-=this.moreMenuWidth;
for(var b=-1;0<=a-this.menuItems[b+1].outerWidth;)a-=this.menuItems[b+1].outerWidth,b++;b<this.rightMostNavItemIndex?this.moveToResponsiveDropdown(this.rightMostNavItemIndex-b):this.rightMostNavItemIndex<b&&this.moveOutOfResponsiveDropdown(b-this.rightMostNavItemIndex)}}},createResponsiveDropdownTrigger:function(){var a=document.createElement("li"),b=document.createElement("aui-dropdown-menu");b.id="aui-responsive-header-dropdown-"+this.index;j.default.init(b);var c=document.createElement("aui-section");
c.id="aui-responsive-header-dropdown-list-"+this.index;j.default.init(c);l.default.wrap(b).appendChild(c);c=document.createElement("a");c.setAttribute("class","aui-dropdown2-trigger");c.setAttribute("href","#");c.id=b.id+"-trigger";c.setAttribute("aria-controls",b.id);c.innerHTML=p.default.getText("aui.words.more");a.appendChild(c);a.appendChild(b);0===this.primaryButtonsWidth?this.$headerFind(".aui-nav").append(a):this.$headerFind(".aui-nav > li > .aui-button:first").parent().before(a);this.moreMenuWidth=
(0,f.default)(a).outerWidth(!0);return(0,f.default)(a)},moveOutOfResponsiveDropdown:function(a){if(!(0>=a)){for(var b=(0,f.default)("#aui-responsive-header-dropdown-"+this.index),c=this.rightMostNavItemIndex+a,g=this.rightMostNavItemIndex+1;g<=c;g++){var i=this.menuItems[g].$element,e=i.children("a");e.attr("aria-controls")&&(e=(0,f.default)(document.getElementById(e.attr("aria-controls"))),e.removeClass("aui-dropdown2-sub-menu"),i.append(e));b.find("aui-item-link:first").remove();i.insertBefore(this.$moreMenu)}this.rightMostNavItemIndex+=
a}},moveToResponsiveDropdown:function(a){if(!(0>=a)){for(var b=l.default.wrap(this.$moreMenu[0].querySelector("aui-section")),c=this.rightMostNavItemIndex-a+1,g=this.rightMostNavItemIndex;g>=c;g--){var i=this.menuItems[g].$element,e=i.children("a");j.default.init(e);var d=document.createElement("aui-item-link");d.setAttribute("href",e.attr("href"));if(e.attr("aria-controls")){var h=(0,f.default)(document.getElementById(e.attr("aria-controls")));d.setAttribute("for",e.attr("aria-controls"));h.addClass("aui-dropdown2-sub-menu");
h.appendTo("body")}j.default.init(d);l.default.wrap(d).textContent=e.text();i.detach();b.insertBefore(d,b.firstChild);this.element.dispatchEvent(new n.default("aui-responsive-menu-item-created",{bubbles:!0,detail:{originalItem:i[0],newItem:d}}))}this.rightMostNavItemIndex-=a}},showAll:function(){this.moveOutOfResponsiveDropdown(this.menuItems.length-1-this.rightMostNavItemIndex);this.hideResponsiveDropdown()}};h.default=function(a){var b=a._header;b instanceof k||(b=new k(a),b.init(),a._header=b);
return b};return h=h["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-header', location = 'src/js/aui/header.js' */
("undefined"===typeof window?global:window).__96c527b2dea71f00bd040ef0cbcf4d70=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function f(){(0,g.default)(".aui-header").each(function(){(0,h.default)(this)})}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=e(__bd7207540b95ff683caa1d3c0bfcc3d7),h=e(__fb1ea8007a584168c1a1610db14baf17),b;var a=__c88c0dc6258c37804917fb6a0e4092fa;if(a&&a.__esModule)b=a;else{var c={};if(null!=a)for(b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(c[b]=a[b]);c.default=a;b=c}a=e(__9a668cbde1e182d8e721c23580356df2);(0,g.default)(f);c={};c.setup=b.fn(f,"responsiveheader.setup",{removeInVersion:"8.0.0",sinceVersion:"5.8.0",extraInfo:"No need to manually initialise anymore as this is now a web component."});(0,a.default)("responsiveheader",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-focus-manager', location = 'src/js/aui/focus-manager.js' */
("undefined"===typeof window?global:window).__36a458098fb180bab5c72993768eb373=function(){function c(){this._focusTrapStack=[];(0,d.default)(document).on("focusout",{focusTrapStack:this._focusTrapStack},j)}function j(a){var e=a.data.focusTrapStack;if(a.relatedTarget&&0!==e.length){var e=e[e.length-1],g=a.target,a=a.relatedTarget,b=e.find(":aui-tabbable"),c=(0,d.default)(b.first()),b=(0,d.default)(b.last());0===e.has(a).length&&a&&(c.is(g)?b.focus():b.is(g)&&c.focus())}}var f={};"use strict";Object.defineProperty(f,
"__esModule",{value:!0});var b=__bd7207540b95ff683caa1d3c0bfcc3d7,d=b&&b.__esModule?b:{"default":b},b=(b=__9a668cbde1e182d8e721c23580356df2)&&b.__esModule?b:{"default":b},h=function(a){return"visible"===d.default.css(a,"visibility")},i=function(a,e){var b=a.nodeName.toLowerCase();if("aui-select"===b)return!0;if("area"===b){var b=a.parentNode,c=b.name,f=(0,d.default)("img[usemap=#"+c+"]").get();return!a.href||!c||"map"!==b.nodeName.toLowerCase()?!1:f&&h(f)}c=/input|select|textarea|button|object/.test(b);
f=a.href||e;return(c?!a.disabled:"a"===b?f:e)&&h(a)};d.default.extend(d.default.expr[":"],{"aui-focusable":function(a){return i(a,!isNaN(d.default.attr(a,"tabindex")))},"aui-tabbable":function(a){var b=d.default.attr(a,"tabindex"),c=isNaN(b);return(c||0<=b)&&i(a,!c)}});c.defaultFocusSelector=":aui-tabbable";c.prototype.enter=function(a){a.data("_aui-focus-restore",(0,d.default)(document.activeElement));if("false"!==a.attr("data-aui-focus")){var b=a.attr("data-aui-focus-selector")||c.defaultFocusSelector;
(a.is(b)?a:a.find(b)).first().focus()}a.is(".aui-dialog2")&&this._focusTrapStack.push(a)};c.prototype.exit=function(a){a.is(".aui-dialog2")&&this._focusTrapStack.pop();var b=document.activeElement;if(a[0]===b||a.has(b).length)(0,d.default)(b).blur();if((b=a.data("_aui-focus-restore"))&&b.length)a.removeData("_aui-focus-restore"),b.focus()};c.global=new c;(0,b.default)("FocusManager",c);f.default=c;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-key-code', location = 'src/js/aui/key-code.js' */
("undefined"===typeof window?global:window).__3f6f6650e96d80fefaaf71feed8f822b=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},c={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,LEFT_SQUARE_BRACKET:91,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};(0,a.default)("keyCode",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-layer', location = 'src/js/aui/layer.js' */
("undefined"===typeof window?global:window).__bbe882dbb07e18e72992d5f992bba14c=function(){function i(a){return a&&a.__esModule?a:{"default":a}}function p(a,b,c){var e=f.default.Event(j+b),b=f.default.Event(k+b),d=new r.default(x+c,{bubbles:!0,cancelable:!0}),c=new r.default(y+c,{bubbles:!0,cancelable:!0});a.trigger(e);a.trigger(b,[a]);a[0].dispatchEvent(d);a[0].dispatchEvent(c);return!e.isDefaultPrevented()&&!b.isDefaultPrevented()&&!d.defaultPrevented&&!c.defaultPrevented}function s(a){this.$el=
(0,f.default)(a||'<div class="aui-layer" aria-hidden="true"></div>');this.$el.addClass("aui-layer")}function t(a){return(0,f.default)('[aria-controls="'+a.attr("id")+'"]')}function u(a,b){for(var c=a.length;c--;)if(b(a[c]))return c;return-1}function g(a,b){return u(a,function(a){return a[0]===b[0]})}function l(a){return u(a,function(a){return e(a).isBlanketed()})}function n(a,b){var c=l(a);b!==c&&(-1<c?(0,q.dim)(!1,a[c].css("z-index")-20):(0,q.undim)())}function h(a,b,c){if(!(0>b))for(var d=a.length-
1;d>=b;d--){var f=e(a[d]);if(c||!f.isPersistent())f._hideLayer(!0),a.splice(d,1)}}function d(){this._stack=[]}function v(a){if(!a.length)return!1;a=document.getElementById(a.attr("aria-controls"));return-1<d.global.indexOf(a)}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var f=i(__bd7207540b95ff683caa1d3c0bfcc3d7),q=__7f21a71921a14c7b5b83c94ec80f4db5,w=i(__36a458098fb180bab5c72993768eb373),z=i(__9a668cbde1e182d8e721c23580356df2),A=i(__3f6f6650e96d80fefaaf71feed8f822b),B=i(__f6397c80406fe105a9ead0b34dba268d),
r=i(__b4f5303c3f6b97d2fd503b5013ff8de7),j="_aui-internal-layer-",k="_aui-internal-layer-global-",x="aui-layer-",y="aui-",m=(0,f.default)(document);s.prototype={below:function(){return d.global.item(d.global.indexOf(this.$el)-1)},above:function(){return d.global.item(d.global.indexOf(this.$el)+1)},changeSize:function(a,b){this.$el.css("width",a);this.$el.css("height","content"===b?"":b);return this},on:function(a,b){this.$el.on(j+a,b);return this},off:function(a,b){this.$el.off(j+a,b);return this},
show:function(){if(this.isVisible())return this.$el.attr("aria-hidden","false"),this;if(!p(this.$el,"beforeShow","show"))return this;"none"===this.$el.css("display")&&this.$el.css("display","");d.global.push(this.$el);return this},hide:function(){if(!this.isVisible())return this.$el.attr("aria-hidden","true"),this;if(!p(this.$el,"beforeHide","hide"))return this;var a=this,b=this.$el.get(0),c=function(){a.isVisible()||(this.style.display="none")},e=function(a){"opacity"===a.propertyName&&(c.call(b),
b.removeEventListener("transitionend",e))},f=window.getComputedStyle(b).transitionProperty;f&&-1<f.indexOf("opacity")?b.addEventListener("transitionend",e):c.call(b);d.global.popUntil(this.$el);return this},isVisible:function(){return"false"===this.$el.attr("aria-hidden")},remove:function(){this.hide();this.$el.remove();this.$el=null},isBlanketed:function(){return"true"===this.$el.attr("data-aui-blanketed")},isPersistent:function(){var a=this.$el.attr("modal")||this.$el.attr("data-aui-modal"),b=this.$el[0].hasAttribute("persistent");
return"true"===a||b},_hideLayer:function(a){(this.isPersistent()||this.isBlanketed())&&w.default.global.exit(this.$el);a&&p(this.$el,"beforeHide","hide");this.$el.attr("aria-hidden","true");this.$el.css("z-index",this.$el.data("_aui-layer-cached-z-index")||"");this.$el.data("_aui-layer-cached-z-index","");this.$el.trigger(j+"hide");this.$el.trigger(k+"hide",[this.$el])},_showLayer:function(a){this.$el.parent().is("body")||this.$el.appendTo(document.body);this.$el.data("_aui-layer-cached-z-index",
this.$el.css("z-index"));this.$el.css("z-index",a);this.$el.attr("aria-hidden","false");(this.isPersistent()||this.isBlanketed())&&w.default.global.enter(this.$el);this.$el.trigger(j+"show");this.$el.trigger(k+"show",[this.$el])}};var e=(0,B.default)("layer",s);e.on=function(a,b,c){m.on(k+a,b,c);return this};e.off=function(a,b,c){m.off(k+a,b,c);return this};d.prototype={push:function(a){a=a instanceof f.default?a:(0,f.default)(a);if(0<=g(this._stack,a))throw Error("The given element is already an active layer.");
this.popLayersBeside(a);var b=e(a),c;c=this._stack;c.length?(c=parseInt(c[c.length-1].css("z-index"),10),c=(isNaN(c)?0:c)+100):c=0;c=Math.max(3E3,c);b._showLayer(c);b.isBlanketed()&&(0,q.dim)(!1,c-20);this._stack.push(a);return this},popLayersBeside:function(a){a=a instanceof f.default?a:(0,f.default)(a);0<t(a).length?(a=t(a),a=0<a.length?a.closest(".aui-layer"):void 0,a?(a=this.indexOf(a),h(this._stack,++a,!1)):h(this._stack,0,!1)):(a=l(this._stack),h(this._stack,++a,!1))},indexOf:function(a){return g(this._stack,
(0,f.default)(a))},item:function(a){return this._stack[a]},hideAll:function(){this._stack.reverse().forEach(function(a){a=e(a);!a.isBlanketed()&&!a.isPersistent()&&a.hide()});return this},getNextLowerNonPersistentOrBlanketedLayer:function(a){a=a instanceof f.default?a:(0,f.default)(a);a=g(this._stack,a);if(0>a)return null;var b;for(a--;0<=a;){b=this._stack[a];var c=e(b);if(!c.isPersistent()||c.isBlanketed())return b;a--}return null},getNextHigherNonPeristentAndNonBlanketedLayer:function(a){a=a instanceof
f.default?a:(0,f.default)(a);a=g(this._stack,a);if(0>a)return null;var b;for(a++;a<this._stack.length;){b=this._stack[a];var c=e(b);if(!c.isPersistent()&&!c.isBlanketed())return b;a++}return null},popUntil:function(a){var a=a instanceof f.default?a:(0,f.default)(a),b=g(this._stack,a);if(-1===b)return null;var c=l(this._stack);h(this._stack,b+1,e(a).isBlanketed());e(a)._hideLayer();this._stack.splice(b,1);n(this._stack,c);return a},getTopLayer:function(){return!this._stack.length?null:this._stack[this._stack.length-
1]},popTopIfNonPersistent:function(){var a=this.getTopLayer(),b=e(a);return!a||b.isPersistent()?null:this.popUntil(a)},popUntilTopBlanketed:function(){var a=l(this._stack);if(0>a)return null;var b=this._stack[a];if(e(b).isPersistent())return(a=this.getNextHigherNonPeristentAndNonBlanketedLayer(b))?(b=g(this._stack,a),h(this._stack,b,!0),a):null;h(this._stack,a,!0);n(this._stack,a);return b},popUntilTopPersistent:function(){var a=d.global.getTopLayer();if(a){var b=l(this._stack),c=e(a);c.isPersistent()?
c.isBlanketed()||(a=d.global.getNextLowerNonPersistentOrBlanketedLayer(a),c=e(a),a&&!c.isPersistent()&&(a=g(this._stack,a),h(this._stack,a,!0),n(this._stack,b))):(a=g(this._stack,a),h(this._stack,a,!0),n(this._stack,b))}}};m.on("keydown",function(a){a.keyCode===A.default.ESCAPE&&(d.global.popUntilTopPersistent(),a.preventDefault())});m.on("click",".aui-blanket",function(a){d.global.popUntilTopBlanketed()&&a.preventDefault()});m.on("click",function(a){var b=(0,f.default)(a.target);b.closest(".aui-blanket").length||
(a=b.closest("[aria-controls]"),b=b.closest(".aui-layer"),!b.length&&!v(a)?d.global.hideAll():!v(a)&&b.length&&(a=d.global.getNextHigherNonPeristentAndNonBlanketedLayer(b))&&e(a).hide())});d.global=new d;e.Manager=d;(0,z.default)("layer",e);o.default=e;return o=o["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-layer-manager', location = 'src/js/aui/layer-manager.js' */
("undefined"===typeof window?global:window).__d16d3e068aca500bb6ad86bf160d14ed=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},a=__bbe882dbb07e18e72992d5f992bba14c,a=a&&a.__esModule?a:{"default":a};(0,b.default)("LayerManager",a.default.Manager);c.default=a.default.Manager;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-alignment', location = 'src/js/aui/internal/alignment.js' */
("undefined"===typeof window?global:window).__df78b4690da2c4aae9e9dc85c77219d0=function(){function j(a,h){var b,c,e;b=a.getAttribute(k)||a.getAttribute("data-aui-"+k)||window;"string"===typeof b&&(b=document.querySelector(b));e=b;b=(a.getAttribute(l)||a.getAttribute("data-aui-"+l)||m).split(" ");c=n(b,2);b=c[0];c=c[1];if(!c||"auto"===c){var d=e;c="left";if(!d||d===window||d===document)d=document.documentElement;d&&(d.nodeType&&d.nodeType===Node.ELEMENT_NODE)&&(d=d.getBoundingClientRect(),h.getBoundingClientRect().left>
d.right/2&&(c="right"))}var d=o[b+" "+c]||o[m],i=a.hasAttribute(p)||a.hasAttribute("data-aui-"+p);e=new q.default({enabled:!1,element:a,target:h,attachment:d.el,targetAttachment:d.target,classPrefix:r,constraints:[{to:e===window?"window":e,attachment:!0===i?"none":"together"}]});b=s+b;c=t+c;-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className+=" "+b);-1===(" "+a.className+" ").indexOf(" "+c+" ")&&(a.className+=" "+c);this._auiTether=e}var f={};"use strict";Object.defineProperty(f,"__esModule",
{value:!0});var n;n=function(a,h){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var b=[],c=!0,e=!1,d=void 0;try{for(var i=a[Symbol.iterator](),f;!(c=(f=i.next()).done)&&!(b.push(f.value),h&&b.length===h);c=!0);}catch(g){e=!0,d=g}finally{try{if(!c&&i["return"])i["return"]()}finally{if(e)throw d;}}return b}throw new TypeError("Invalid attempt to destructure non-iterable instance");};var g=__74afe8b96acdee164fa987a4fdd7afc1,q=g&&g.__esModule?g:{"default":g},l="alignment",p="alignment-static",
k="alignment-container",r="aui-alignment",s="aui-alignment-side-",t="aui-alignment-snap-",m="right middle",o={"top left":{el:"bottom left",target:"top left"},"top center":{el:"bottom center",target:"top center"},"top right":{el:"bottom right",target:"top right"},"right top":{el:"top left",target:"top right"},"right middle":{el:"middle left",target:"middle right"},"right bottom":{el:"bottom left",target:"bottom right"},"bottom left":{el:"top left",target:"bottom left"},"bottom center":{el:"top center",
target:"bottom center"},"bottom right":{el:"top right",target:"bottom right"},"left top":{el:"top right",target:"top left"},"left middle":{el:"middle right",target:"middle left"},"left bottom":{el:"bottom right",target:"bottom left"},"submenu left":{el:"top left",target:"top right"},"submenu right":{el:"top right",target:"top left"}};j.prototype={destroy:function(){this._auiTether.destroy();return this},disable:function(){this._auiTether.disable();return this},enable:function(){this._auiTether.enable();
return this}};f.default=j;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-browser', location = 'src/js/aui/internal/browser.js' */
("undefined"===typeof window?global:window).__02837eb0ab28736e09825f2207c8fe9b=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.needsLayeringShim=function(){return f&&(g||h||i)};a.supportsCalc=function(){if("undefined"===typeof c){var a=document.createElement("div");a.style.cssText="height: -webkit-calc(20px + 0); height: calc(20px);";c=0<a.style.cssText.length}return c};a.supportsRequestAnimationFrame=function(){return!!window.requestAnimationFrame};a.supportsCssTransition=
function(){if("undefined"===typeof d){var a=(document.body||document.documentElement).style;d="string"===typeof a.transition||"string"===typeof a.WebkitTransition}return d};a.supportsVoiceOver=function(){return j};a.supportsDateField=function(){if("undefined"===typeof e){var a=document.createElement("input");a.setAttribute("type","date");e="date"===a.type}return e};a.supportsNewMouseEvent=function(){try{new MouseEvent("click")}catch(a){return!1}return!0};var b=navigator.userAgent.toLowerCase(),f=
/msie/.test(b),g=/windows nt 5.1/.test(b),h=/windows nt 6.0/.test(b),i=/windows nt 6.1/.test(b),j=/mac os x/.test(b),c,d,e;return a}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-state', location = 'src/js/aui/internal/state.js' */
("undefined"===typeof window?global:window).__60d0fde69902306f271d8ee27e7ed8ae=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(b){return{set:function(a,c){void 0===b._state&&(b._state={});b._state[a]=c},get:function(a){if(b._state)return b._state[a]}}};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dropdown2', location = 'src/js/aui/dropdown2.js' */
("undefined"===typeof window?global:window).__6a0fbb87ac5bb4a2fd7bf918d701c4a4=function(){function w(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;return b}function i(a){return a&&a.__esModule?a:{"default":a}}function x(a){return(0,c.default)(a).is('.checked, .aui-dropdown2-checked, [aria-checked="true"]')}function m(a,b){var e=a._triggeringElement||document.querySelector('[aria-controls="'+a.id+'"]');e&&b(e)}function s(a,
b){var e=(0,c.default)(a);b?(e.attr("aria-expanded","true"),e.addClass("active aui-dropdown2-active")):(e.attr("aria-expanded","false"),e.removeClass("active aui-dropdown2-active"))}function y(a){(0,g.default)(a).set("loading-state",z);(0,g.default)(a).set("hasErrorBeenShown",a.isVisible());j.default.wrap(a).innerHTML='\n        <div class="aui-message aui-message-error aui-dropdown-error">\n            <p>'+"Error loading dropdown"+"</p>\n        </div>\n    "}function A(a){if(a.src&&
(0,g.default)(a).get("loading-state")!==B)(0,g.default)(a).set("loading-state",B),(0,g.default)(a).set("hasErrorBeenShown",!1),m(a,function(a){a.setAttribute("aria-busy","true")}),j.default.wrap(a).innerHTML='\n        <div class="aui-dropdown-loading">\n            <aui-spinner size="small"></aui-spinner> '+"Loading dropdown"+"\n        </div>\n    ",c.default.ajax(a.src).done(function(b,e,h){200===h.status?((0,g.default)(a).set("loading-state",G),j.default.wrap(a).innerHTML=
b.map(function(a){var b=a.items.map(function(a){function b(e){return a[e]?e+' ="true"':""}var e="aui-item-"+a.type;return"\n                <"+e+" "+(a["for"]?'for="'+a["for"]+'"':"")+" "+(a.href?'href="'+a.href+'"':"")+" "+b("interactive")+"\n                    "+b("checked")+" "+b("disabled")+" "+b("hidden")+">\n                    "+a.content+"\n                </"+e+">"}).join("");return"\n            <aui-section "+(a.label?'label="'+a.label+'"':"")+">\n                "+b+"\n            </aui-section>"}).join("\n"),
d.default.init(a)):y(a)}).fail(function(){y(a)}).always(function(){m(a,function(a){a.setAttribute("aria-busy","false")})})}function C(a,b){return(0,c.default)(a).find('> ul > li, > .aui-dropdown2-section > ul > li, > div[role] > .aui-dropdown2-section > div[role="group"] > ul[role] > li[role], aui-item-link, aui-item-checkbox, aui-item-radio').filter(b).children('a, button, [role="checkbox"], [role="menuitemcheckbox"], [role="radio"], [role="menuitemradio"]')}function q(a){return C(a,function(){return-1===
this.className.indexOf("hidden")&&!this.hasAttribute("hidden")})}function D(a){var b=(0,c.default)(a);b.addClass("aui-dropdown2");(0,t.supportsVoiceOver)()&&b.find('> div[role="application"]').attr("role","presentation");a.hasAttribute("data-container")&&(b.attr("data-aui-alignment-container",b.attr("data-container")),b.removeAttr("data-container"));(0,k.default)(a);a.addEventListener("aui-layer-show",function(){(0,c.default)(a).trigger("aui-dropdown2-show");var b=(0,c.default)(a),h=b.find(".hidden").addClass("aui-dropdown2-hidden"),
l=b.find(".disabled").addClass("aui-dropdown2-disabled"),d=b.find(".interactive").addClass("aui-dropdown2-interactive");a._syncClasses=function(){h.removeClass("aui-dropdown2-hidden");l.removeClass("aui-dropdown2-disabled");d.removeClass("aui-dropdown2-interactive")};C(this,function(){return true}).each(function(){var a=(0,c.default)(this);a.attr("tabindex","-1");(a.hasClass("aui-dropdown2-disabled")||a.parent().hasClass("aui-dropdown2-hidden"))&&a.attr("aria-disabled",true)});m(a,function(b){s(b,
true);b=b.getAttribute("data-dropdown2-hide-location");b=document.getElementById(b)||a.parentNode;a._returnTo=b})});a.addEventListener("aui-layer-hide",function(){(0,c.default)(a).trigger("aui-dropdown2-hide");if(a._syncClasses){a._syncClasses();delete a._syncClasses}if(a._auiAlignment){a._auiAlignment.disable();a._auiAlignment.destroy()}a._returnTo&&a.parentNode&&a.parentNode!==a._returnTo&&a._returnTo.appendChild(a);(0,c.default)(a).removeClass("aui-dropdown2-in-buttons");q(a).removeClass("active aui-dropdown2-active");
m(a,function(a){var b=n===true;n=false;if(b){a.focus();s(a,a.hasSubmenu&&a.hasSubmenu())}else s(a,false)});delete a.isSubmenu;a._triggeringElement=null});b=(0,c.default)(a);b.on("keydown",function(b){if(b.keyCode===f.default.DOWN){a.focusNext();b.preventDefault()}else if(b.keyCode===f.default.UP){a.focusPrevious();b.preventDefault()}else if(b.keyCode===f.default.LEFT){if(a.isSubmenu){n=true;a.hide(b);b.preventDefault()}}else if(b.keyCode===f.default.ESCAPE)n=true;else if(b.keyCode===f.default.TAB){n=
true;a.hide(b)}});b.on("click keydown",'a, button, [role="menuitem"], [role="menuitemcheckbox"], [role="checkbox"], [role="menuitemradio"], [role="radio"]',function(b){var h=b.currentTarget,h=(0,c.default)(h),l=b.keyCode,d=l===f.default.ENTER,l=l===f.default.SPACE;if((!d||!h.is("a[href], button"))&&(b.type==="click"||d||l)){h=(0,c.default)(b.currentTarget);if(h.attr("aria-disabled")==="true")b.preventDefault();else if((!b.currentTarget.hasSubmenu||!b.currentTarget.hasSubmenu())&&!h.is(".aui-dropdown2-interactive")){h=
a;do{d=(0,k.default)(h);h=(0,k.default)(h).below();d.$el.is(".aui-dropdown2")&&d.hide(b)}while(h)}}});b.on("mouseenter",'a, button, [role="menuitem"], [role="menuitemcheckbox"], [role="checkbox"], [role="menuitemradio"], [role="radio"]',function(b){var c=b.currentTarget,c=c.hasSubmenu&&c.hasSubmenu();if(!b.isDefaultPrevented()&&!c)(b=(0,k.default)(a).above())&&(0,k.default)(b).hide()});a.hide();(0,c.default)(a).delegate(".aui-dropdown2-checkbox:not(.disabled):not(.aui-dropdown2-disabled)","click keydown",
function(a){if((a.type==="click"||a.keyCode===f.default.ENTER||a.keyCode===f.default.SPACE)&&!a.isDefaultPrevented()){this.isInteractive()&&a.preventDefault();this.isEnabled()&&(this.isChecked()?this.uncheck():this.check())}});(0,c.default)(a).delegate(".aui-dropdown2-radio:not(.checked):not(.aui-dropdown2-checked):not(.disabled):not(.aui-dropdown2-disabled)","click keydown",function(a){if((a.type==="click"||a.keyCode===f.default.ENTER||a.keyCode===f.default.SPACE)&&!a.isDefaultPrevented()){this.isInteractive()&&
a.preventDefault();a=(0,c.default)(this);if(this.isEnabled()&&this.isChecked()===false){a.closest("ul,[role=group]").find(".aui-dropdown2-checked").not(this).each(function(){this.uncheck()});this.check()}}})}"use strict";__780f92e84f7b06d16e986a531e56e288;__05bca48700965a7a8a29288c57bd100b;var c=i(__bd7207540b95ff683caa1d3c0bfcc3d7),j=i(__2b1734744f1decec6fe4109762d4ff9c),H=w(__c88c0dc6258c37804917fb6a0e4092fa),I=w(__2f5c294b01e66b15309518e39bcb949d),o=__797d10010c51da30b099c976f973e278,t=__02837eb0ab28736e09825f2207c8fe9b,
J=i(__df78b4690da2c4aae9e9dc85c77219d0),E=i(__b4f5303c3f6b97d2fd503b5013ff8de7),f=i(__3f6f6650e96d80fefaaf71feed8f822b),k=i(__bbe882dbb07e18e72992d5f992bba14c),g=i(__60d0fde69902306f271d8ee27e7ed8ae),d=i(__7acfe7fd38bbf8b5bf76cc953770b033),B="loading",z="error",G="success";(0,d.default)("aui-dropdown2-trigger",{type:d.default.type.CLASSNAME,created:function(a){function b(b){b.preventDefault();if(a.isEnabled()){var d=document.getElementById(e),f=(0,c.default)(a);f.parent().hasClass("aui-buttons")&&
d.classList.add("aui-dropdown2-in-buttons");f.parents().hasClass("aui-header")&&d.classList.add("aui-dropdown2-in-header");d.toggle(b);d.isSubmenu=a.hasSubmenu();return d}}var e=a.getAttribute("aria-controls");e||((e=a.getAttribute("aria-owns"))?(a.removeAttribute("aria-owns"),a.setAttribute("aria-controls",e)):I.error('Dropdown triggers need either a "aria-owns" or "aria-controls" attribute'));a.setAttribute("aria-haspopup",!0);a.setAttribute("aria-expanded",!1);"A"===a.nodeName&&!a.href&&a.setAttribute("href",
"#"+e);(0,c.default)(a).on("aui-button-invoke",b).on("click",b).on("keydown",function(c){var e=c.keyCode===f.default.ENTER||c.keyCode===f.default.SPACE,d=c.keyCode===f.default.RIGHT&&a.hasSubmenu(),g=(c.keyCode===f.default.UP||c.keyCode===f.default.DOWN)&&!a.hasSubmenu();if(e||d||g)(c=b(c))&&c.focusItem(0)}).on("mouseenter",function(b){b.preventDefault();if(a.isEnabled()){var c=document.getElementById(e),d=(0,g.default)(c).get("loading-state")==="unloaded",f=(0,g.default)(c).get("hasErrorBeenShown");
(d||f&&!c.isVisible())&&A(c);if(a.hasSubmenu()){c.show(b);c.isSubmenu=a.hasSubmenu()}return c}})},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")},hasSubmenu:function(){return-1!==(this.className||"").split(/\s+/).indexOf("aui-dropdown2-sub-trigger")}}});(0,c.default)(document).on("mousedown",".aui-dropdown2-trigger",function(){this.hasAttribute("resolved")||
(d.default.init(this),H.getMessageLogger("Dropdown2 lazy initialisation",{removeInVersion:"8.0.0",alternativeName:"initialisation on DOM insertion",sinceVersion:"5.8.0",extraInfo:"Dropdown2 triggers should have all necessary attributes on DOM insertion",deprecationType:"JS"})())});(0,d.default)("aui-dropdown2-sub-trigger",{type:d.default.type.CLASSNAME,created:function(a){a.className+=" aui-dropdown2-trigger";d.default.init(a)}});(0,c.default)(document).on("mouseenter",".aui-dropdown2-trigger-group a, .aui-dropdown2-trigger-group button",
function(a){var b=(0,c.default)(a.currentTarget);if(!b.is(".aui-dropdown2-active")&&!b.closest(".aui-dropdown2").length){var e=b.closest(".aui-dropdown2-trigger-group"),d=e.find(".aui-dropdown2-active");d.length&&b.is(".aui-dropdown2-trigger")&&(d.blur(),b.trigger("aui-button-invoke"),a.preventDefault());a=e.find(":focus");a.length&&b.is(".aui-dropdown2-trigger")&&a.blur()}});var n=!1;(0,c.default)(window).on("resize",(0,o.debounceImmediate)(function(){(0,c.default)(".aui-dropdown2").each(function(a,
b){d.default.init(b);b.isVisible()&&b.hide()})},1E3));var o={toggle:function(a){this.isVisible()?this.hide(a):this.show(a)},show:function(a){a&&(a.currentTarget&&a.currentTarget.classList.contains("aui-dropdown2-trigger"))&&(this._triggeringElement=a.currentTarget);(0,k.default)(this).show();var b=this;m(b,function(a){var d=a&&a.hasSubmenu&&a.hasSubmenu(),f=b.getAttribute("data-aui-alignment")==="submenu auto";if(!d&&f){var g=(0,c.default)(b),i=g.data("previous-data-aui-alignment");i?b.setAttribute("data-aui-alignment",
i):b.removeAttribute("data-aui-alignment");g.removeData("previous-data-aui-alignment");g.data("had-data-aui-alignment-static")||b.removeAttribute("data-aui-alignment-static");g.removeData("had-data-aui-alignment-static")}g=b.hasAttribute("data-aui-alignment");if(d&&!f){d=(0,c.default)(b);b.hasAttribute("data-aui-alignment")&&d.data("previous-data-aui-alignment",b.getAttribute("data-aui-alignment"));d.data("had-data-aui-alignment-static",b.hasAttribute("data-aui-alignment-static"));b.setAttribute("data-aui-alignment",
"submenu auto");b.setAttribute("data-aui-alignment-static",true)}else if(!g){b.setAttribute("data-aui-alignment","bottom auto");b.setAttribute("data-aui-alignment-static",true)}b._auiAlignment&&b._auiAlignment.destroy();b._auiAlignment=new J.default(b,a);b._auiAlignment.enable()});return this},hide:function(){(0,k.default)(this).hide();return this},focusNext:function(){var a=q(this),b=document.activeElement;a.last()[0]!==b&&(b=a.toArray().indexOf(b),this.focusItem(a.get(b+1)))},focusPrevious:function(){var a=
q(this),b=document.activeElement;a.first()[0]!==b&&(b=a.toArray().indexOf(b),this.focusItem(a.get(b-1)))},focusItem:function(a){var b=q(this);"number"===typeof a&&(a=b.get(a));a=(0,c.default)(a);a.focus();b.removeClass("active aui-dropdown2-active");a.addClass("active aui-dropdown2-active")},isVisible:function(){return(0,k.default)(this).isVisible()}},p={created:function(a){a=a.children[0];a.setAttribute("aria-disabled","true");a.className+=" aui-dropdown2-disabled"},removed:function(a){a=a.children[0];
a.setAttribute("aria-disabled","false");(0,c.default)(a).removeClass("aui-dropdown2-disabled")}},u={created:function(a){a.children[0].className+=" aui-dropdown2-interactive"},removed:function(a){a=a.children[0];(0,c.default)(a).removeClass("aui-dropdown2-interactive")}},F={created:function(a){var b=a.children[0];(0,c.default)(b).addClass("checked aui-dropdown2-checked");b.setAttribute("aria-checked",!0);a.dispatchEvent(new E.default("change",{bubbles:!0}))},removed:function(a){var b=a.children[0];
(0,c.default)(b).removeClass("checked aui-dropdown2-checked");b.setAttribute("aria-checked",!1);a.dispatchEvent(new E.default("change",{bubbles:!0}))}},v={created:function(a){p.created(a)},removed:function(a){p.removed(a)}},r=function(a){return{fallback:function(b,c){b.children[0].setAttribute(a,c.newValue)},removed:function(b){b.children[0].removeAttribute(a)}}};(0,d.default)("aui-item-link",{template:(0,j.default)('<a role="menuitem" tabindex="-1"><content></content></a>'),attributes:{disabled:p,
interactive:u,hidden:v,href:r("href"),"item-id":r("id"),"for":{created:function(a){var b=a.children[0];b.setAttribute("aria-controls",a.getAttribute("for"));(0,c.default)(b).addClass("aui-dropdown2-sub-trigger")},updated:function(a){a.children[0].setAttribute("aria-controls",a.getAttribute("for"))},removed:function(a){a=a.children[0];a.removeAttribute("aria-controls");(0,c.default)(a).removeClass("aui-dropdown2-sub-trigger")}}}});(0,d.default)("aui-item-checkbox",{template:(0,j.default)('<span role="checkbox" class="aui-dropdown2-checkbox" tabindex="-1"><content></content></span>'),
attributes:{"item-id":r("id"),disabled:p,interactive:u,checked:F,hidden:v}});(0,d.default)("aui-item-radio",{template:(0,j.default)('<span role="radio" class="aui-dropdown2-radio" tabindex="-1"><content></content></span>'),attributes:{"item-id":r("id"),disabled:p,interactive:u,checked:F,hidden:v}});(0,d.default)("aui-section",{template:(0,j.default)('\n        <strong aria-role="presentation" class="aui-dropdown2-heading"></strong>\n        <div role="group">\n            <content></content>\n        </div>\n    '),
attributes:{label:function(a,b){var c=a.children[1];a.children[0].textContent=b.newValue;c.setAttribute("aria-label",b.newValue)}},created:function(a){a.className+=" aui-dropdown2-section";a.setAttribute("role","presentation")}});(0,d.default)("aui-dropdown-menu",{template:(0,j.default)('\n        <div role="application">\n            <content></content>\n        </div>\n    '),created:function(a){a.setAttribute("role","menu");a.className="aui-dropdown2 aui-style-default aui-layer";(0,g.default)(a).set("loading-state",
"unloaded");d.default.init(a)},attributes:{src:{}},prototype:o,events:{"aui-layer-show":function(a){var b="unloaded"===(0,g.default)(a).get("loading-state"),c=(0,g.default)(a).get("hasErrorBeenShown");(b||c)&&A(a);if((0,g.default)(a).get("loading-state")===z)(0,g.default)(a).set("hasErrorBeenShown",!0)}}});(0,d.default)("aui-dropdown2",{type:d.default.type.CLASSNAME,created:D,prototype:o});(0,d.default)("data-aui-dropdown2",{type:d.default.type.ATTRIBUTE,created:D,prototype:o});(0,d.default)("aui-dropdown2-checkbox",
{type:d.default.type.CLASSNAME,created:function(a){var b=x(a);b&&(0,c.default)(a).addClass("checked aui-dropdown2-checked");a.setAttribute("aria-checked",b);a.setAttribute("tabindex","0");(0,t.supportsVoiceOver)()&&a.setAttribute("role","checkbox")},prototype:{isEnabled:function(){return!(null!==this.getAttribute("aria-disabled")&&"true"===this.getAttribute("aria-disabled"))},isChecked:function(){return null!==this.getAttribute("aria-checked")&&"true"===this.getAttribute("aria-checked")},isInteractive:function(){return(0,
c.default)(this).hasClass("aui-dropdown2-interactive")},uncheck:function(){"aui-item-checkbox"===this.parentNode.tagName.toLowerCase()&&this.parentNode.removeAttribute("checked");this.setAttribute("aria-checked","false");(0,c.default)(this).removeClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-uncheck")},check:function(){"aui-item-checkbox"===this.parentNode.tagName.toLowerCase()&&this.parentNode.setAttribute("checked","");this.setAttribute("aria-checked","true");
(0,c.default)(this).addClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-check")}}});(0,d.default)("aui-dropdown2-radio",{type:d.default.type.CLASSNAME,created:function(a){var b=x(a);b&&(0,c.default)(a).addClass("checked aui-dropdown2-checked");a.setAttribute("aria-checked",b);a.setAttribute("tabindex","0");(0,t.supportsVoiceOver)()&&a.setAttribute("role","radio")},prototype:{isEnabled:function(){return!(null!==this.getAttribute("aria-disabled")&&"true"===this.getAttribute("aria-disabled"))},
isChecked:function(){return null!==this.getAttribute("aria-checked")&&"true"===this.getAttribute("aria-checked")},isInteractive:function(){return(0,c.default)(this).hasClass("aui-dropdown2-interactive")},uncheck:function(){"aui-item-radio"===this.parentNode.tagName.toLowerCase()&&this.parentNode.removeAttribute("checked");this.setAttribute("aria-checked","false");(0,c.default)(this).removeClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-uncheck")},check:function(){"aui-item-radio"===
this.parentNode.tagName.toLowerCase()&&this.parentNode.setAttribute("checked","");this.setAttribute("aria-checked","true");(0,c.default)(this).addClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-check")}}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-fancy-file-input-2.0.3-dist-fancy-file-input', location = 'node_modules/fancy-file-input/dist/fancy-file-input.js' */
("undefined"===typeof window?global:window).__22a4d9f2966b7fbb6d0e3d6f80b96c9c=function(){var e={exports:{}},l=e.exports,m={module:e,exports:l,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7},d;d=function(b,a,j){var d=("undefined"===typeof window?global:window).define,c,f,j=[j,a,b].filter(function(a){return"function"===typeof a})[0],a=[a,b,[]].filter(Array.isArray)[0];c=j.apply(null,a.map(function(a){return m[a]}));f=typeof c;"function"===typeof d&&d("string"===
typeof b?b:"__22a4d9f2966b7fbb6d0e3d6f80b96c9c",a,j);"string"===f?c=String(c):"number"===f?c=Number(c):"boolean"===f&&(c=Boolean(c));void 0!==c&&(l=e.exports=c)};d.amd=!0;var g=this,i=function(b){function a(k,h){var c=b(k).data("FancyFileInput");if(c)return c;h=b.extend({},a.defaults,h);this.el=k;this.$el=b(k);this.$label=this.createLabel(h.buttonText);this._addLabelText();this.$clearButton=b("<button>",{text:this.$label.attr("data-ffi-clearButtonText")||h.clearButtonText,"class":"ffi-clear",type:"button",
tabindex:"-1"});this.multipleFileTextPattern=this.$label.attr("data-ffi-multipleFileTextPattern")||h.multipleFileTextPattern;this._eventNamespace=".ffi";this.CLASSES={disabled:"is-disabled",focused:"is-focused",active:"is-active",valid:"is-valid",invalid:"is-invalid"};this[this.isDisabled()?"disable":"enable"]();this.isFocused=!1}var d=/^.*[\\\/]/,e=/\{0\}/gi,c,f=3,g=document.createElement("div"),i=g.getElementsByTagName("i");do g.innerHTML="<\!--[if gt IE "+ ++f+"]><i></i><![endif]--\>";while(i[0]);
c=4<f?f:document.documentMode;a.defaults={buttonText:"Browse\u2026",clearButtonText:"Clear",multipleFileTextPattern:"{0} files"};a.prototype._addLabelText=function(){var a=b('label[for="'+this.el.id+'"]');a.length&&this.$el.attr("aria-label",a.text())};a.prototype.createLabel=function(a){var c=this.$el.parent(".ffi[data-ffi-button-text]");c.length||(c=this.$el.wrap(b("<label>",{"class":"ffi","data-ffi-button-text":a})).parent());return c};a.prototype.isDisabled=function(){return this.$el.is(":disabled")};
a.prototype.formatMultipleFileText=function(a){return this.multipleFileTextPattern.replace(e,a)};a.prototype.bindEvents=function(){this.$el.on("invalid"+this._eventNamespace,b.proxy(this.checkValidity,this)).on("change"+this._eventNamespace,b.proxy(this.change,this)).on("keydown"+this._eventNamespace,b.proxy(this.keydown,this)).on("mousedown"+this._eventNamespace,b.proxy(this.mousedown,this)).on("mouseup"+this._eventNamespace,b.proxy(this.mouseup,this)).on("focus"+this._eventNamespace,b.proxy(this.focus,
this)).on("blur"+this._eventNamespace,b.proxy(this.blur,this));this.$clearButton.on("click"+this._eventNamespace,b.proxy(this.clear,this))};a.prototype.unbindEvents=function(){this.$el.off(this._eventNamespace);this.$clearButton.off(this._eventNamespace)};a.prototype.fireEvent=function(a){this.$el.trigger(a+this._eventNamespace)};a.prototype.enable=function(){this.bindEvents();this.$el.prop("disabled",!1);this.$label.removeClass(this.CLASSES.disabled)};a.prototype.disable=function(){this.unbindEvents();
this.$el.prop("disabled",!0);this.$label.addClass(this.CLASSES.disabled)};a.prototype.clear=function(){this.$el.wrap("<form>").closest("form").get(0).reset();this.$el.unwrap();this.el.value="";this.change();return!1};a.prototype.focus=function(){var a=this;this.$label.addClass(this.CLASSES.focused);c&&!this.isFocused&&(this.isFocused=!0,setTimeout(function(){a.$el.blur();a.$el.focus()},0))};a.prototype.blur=function(){if(!c||!this.isFocused)this.$label.removeClass(this.CLASSES.focused),this.isFocused=
!1};a.prototype.mousedown=function(){this.$label.addClass(this.CLASSES.active)};a.prototype.mouseup=function(){this.$label.removeClass(this.CLASSES.active)};a.prototype.keydown=function(a){var b=a.which;if(8===b||46===b)this.clear(),a.preventDefault();if(c&&9===b){var d=this;this.isFocused=!1;this.$el.prop("disabled",!0);setTimeout(function(){d.$el.prop("disabled",!1).blur()},0)}};a.prototype.checkValidity=function(){if(this.el.required){var a=this.$el.is(":invalid");this.$label.toggleClass(this.CLASSES.invalid,
a).toggleClass(this.CLASSES.valid,!a)}};a.prototype.change=function(){var a,b="";this.checkValidity();a=this.el.multiple&&1<this.el.files.length?this.formatMultipleFileText(this.el.files.length):this.el.value;a.length?(b=a.replace(d,""),this.$clearButton.appendTo(this.$label)):this.$clearButton.detach();this.$el.focus();this.setFieldText(b);this.fireEvent("value-changed")};a.prototype.setFieldText=function(a){a.length?(this.$label.attr("data-ffi-value",a),this.fireEvent("value-added")):(this.$label.removeAttr("data-ffi-value"),
this.fireEvent("value-cleared"))};b.fn.fancyFileInput=function(c){return this.each(function(){var d=new a(this,c);b(this).data("FancyFileInput",d)})};return a};"function"===typeof d&&d.amd?d(["jquery"],function(b){return g.FancyFileInput=i(b)}):"object"===typeof e&&e.exports?e.exports=i(__bd7207540b95ff683caa1d3c0bfcc3d7):g.FancyFileInput=i(g.jQuery);return e.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-fancy-file-input', location = 'src/js/aui/fancy-file-input.js' */
("undefined"===typeof window?global:window).__4573fe1598bcafe466e0889a20eacc79=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});var b=__22a4d9f2966b7fbb6d0e3d6f80b96c9c;a.default=(b&&b.__esModule?b:{"default":b}).default;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:hotkeys', location = 'src/js/jquery/jquery.hotkeys.js' */
("undefined"===typeof window?global:window).__9cbbcefe7921e79cef26a868d04e53e6=function(){"use strict";var a=jQuery,c=function(a){this.num=0;this.timer=0<a?a:!1},k=function(h){if(a.isPlainObject(h.data)||a.isArray(h.data)||"string"===typeof h.data){var i=h.handler,g={timer:700,combo:[]},b=h.data;"string"===typeof b?g.combo=[b]:a.isArray(b)?g.combo=b:a.extend(g,b);g.combo=a.map(g.combo,function(a){return a.toLowerCase()});h.index=new c(g.timer);h.handler=function(d){if(!(this!==d.target&&(/textarea|select|input/i.test(d.target.nodeName)||
"true"===a(d.target).prop("contenteditable")))){var e="keypress"!==d.type?a.hotkeys.specialKeys[d.which]:null,b=String.fromCharCode(d.which).toLowerCase(),f="",c={};d.altKey&&"alt"!==e&&(f+="alt+");d.ctrlKey&&"ctrl"!==e&&(f+="ctrl+");d.metaKey&&(!d.ctrlKey&&"meta"!==e)&&(f+="meta+");d.shiftKey&&"shift"!==e&&(f+="shift+");d.metaKey&&"["===b&&(b=null);e&&(c[f+e]=!0);b&&(c[f+b]=!0);/shift+/.test(f)&&(c[f.replace("shift+","")+a.hotkeys.shiftNums[e||b]]=!0);e=h.index;b=g.combo;if(j(b[e.val()],c)){if(e.val()===
b.length-1)return e.reset(),i.apply(this,arguments);e.inc()}else e.reset(),j(b[0],c)&&e.inc()}}}},j=function(a,c){for(var g=a.split(" "),b=0,d=g.length;b<d;b++)if(c[g[b]])return!0;return!1};a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",
103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta",219:"[",221:"]"},keypressKeys:["<",">","?"],shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(a.hotkeys.keypressKeys,function(c,i){a.hotkeys.shiftNums[i]=i});c.prototype.val=
function(){return this.num};c.prototype.inc=function(){this.timer&&(clearTimeout(this.timeout),this.timeout=setTimeout(a.proxy(c.prototype.reset,this),this.timer));this.num++};c.prototype.reset=function(){this.timer&&clearTimeout(this.timeout);this.num=0};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:k}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-event', location = 'src/js/aui/event.js' */
("undefined"===typeof window?global:window).__c3d461933183f6cefe0176c2c75df7c9=function(){function g(a,b,c){try{return"function"===typeof c?(0,f.default)(window).bind(a,b,c):(0,f.default)(window).bind(a,b)}catch(e){d.log("error while binding: "+e.message)}}function h(a,b){try{return(0,f.default)(window).unbind(a,b)}catch(c){d.log("error while unbinding: "+c.message)}}function i(a,b){try{return(0,f.default)(window).trigger(a,b)}catch(c){d.log("error while triggering: "+c.message)}}var c={};"use strict";
Object.defineProperty(c,"__esModule",{value:!0});c.trigger=c.unbind=c.bind=void 0;var a=__bd7207540b95ff683caa1d3c0bfcc3d7,f=a&&a.__esModule?a:{"default":a},d;if((a=__2f5c294b01e66b15309518e39bcb949d)&&a.__esModule)d=a;else{var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b]);e.default=a;d=e}b=(b=__9a668cbde1e182d8e721c23580356df2)&&b.__esModule?b:{"default":b};(0,b.default)("bind",g);(0,b.default)("trigger",i);(0,b.default)("unbind",h);c.bind=g;c.unbind=h;c.trigger=
i;return c}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dialog', location = 'src/js/aui/dialog.js' */
("undefined"===typeof window?global:window).__aa116fc0f3815f1a600215af3b7b5390=function(){function s(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}function q(a){return a&&a.__esModule?a:{"default":a}}function o(a,b,c,g){if("object"!==("undefined"===typeof a?"undefined":x(a)))a={width:a,height:b,id:c},a=d.default.extend({},a,g);var a=d.default.extend({},{width:800,height:600,closeOnOutsideClick:!1,keypressListener:function(a){a.keyCode===
y.default.ESCAPE&&h.is(":visible")&&f.hide()}},a),h=(0,d.default)("<div></div>").addClass("aui-popup");a.id&&h.attr("id",a.id);var j=3E3;(0,d.default)(".aui-dialog").each(function(){var a=(0,d.default)(this);j=a.css("z-index")>j?a.css("z-index"):j});var z=function i(b,c){a.width=b=b||a.width;a.height=c=c||a.height;h.css({marginTop:-Math.round(c/2)+"px",marginLeft:-Math.round(b/2)+"px",width:b,height:c,"z-index":parseInt(j,10)+2});return i}(a.width,a.height);(0,d.default)("body").append(h);h.hide();
(0,A.enable)(h);var e=(0,d.default)(".aui-blanket"),p=function(a,b){var c=(0,d.default)(a,b);return c.length?(c.focus(),!0):!1},f={changeSize:function(b,c){(b&&b!=a.width||c&&c!=a.height)&&z(b,c);this.show()},show:function(){var b=function(){(0,d.default)(document).off("keydown",a.keypressListener).on("keydown",a.keypressListener);(0,t.dim)();e=(0,d.default)(".aui-blanket");0!==e.length&&a.closeOnOutsideClick&&e.click(function(){h.is(":visible")&&f.hide()});h.show();o.current=this;var b=h;if(0===
(0,d.default)(".dialog-page-body",b).find(":focus").length)if(a.focusSelector)p(a.focusSelector,b);else if(!p(":input:visible:enabled:first",(0,d.default)(".dialog-page-body",b)))if(!p(":input:visible:enabled:first",(0,d.default)(".dialog-button-panel",b)))p(":input:visible:enabled:first",(0,d.default)(".dialog-page-menu",b));(0,d.default)(document).trigger("showLayer",["popup",this])};b.call(this);this.show=b},hide:function(){(0,d.default)(document).unbind("keydown",a.keypressListener);e.unbind();
this.element.hide();if(0===(0,d.default)(".aui-dialog:visible").length)(0,t.undim)();var b=document.activeElement;this.element.has(b).length&&b.blur();(0,d.default)(document).trigger("hideLayer",["popup",this]);o.current=null;this.enable()},element:h,remove:function(){h.remove();this.element=null},disable:function(){this.disabled||(this.popupBlanket=(0,d.default)("<div class='dialog-blanket'> </div>").css({height:h.height(),width:h.width()}),h.append(this.popupBlanket),this.disabled=!0)},enable:function(){this.disabled&&
(this.disabled=!1,this.popupBlanket.remove(),this.popupBlanket=null)}};return f}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.popup=k.Dialog=void 0;var x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=q(__bd7207540b95ff683caa1d3c0bfcc3d7),y=q(__3f6f6650e96d80fefaaf71feed8f822b),B=s(__2f5c294b01e66b15309518e39bcb949d),
u=s(__c88c0dc6258c37804917fb6a0e4092fa),r=__c3d461933183f6cefe0176c2c75df7c9,t=__7f21a71921a14c7b5b83c94ec80f4db5,A=__373dfbf532dc7dad0a2fbd134ab1e791,v=q(__9a668cbde1e182d8e721c23580356df2),m,n=function(a,b,c,g){a.buttonpanel||a.addButtonPanel();this.page=a;this.onclick=c;this._onclick=function(b){return!0===c.call(this,a.dialog,a,b)};this.item=(0,d.default)("<button></button>").html(b).addClass("button-panel-button");g&&this.item.addClass(g);"function"===typeof c&&this.item.click(this._onclick);
a.buttonpanel.append(this.item);this.id=a.button.length;a.button[this.id]=this},C=function(a,b,c,g,h){a.buttonpanel||a.addButtonPanel();h||(h="#");this.page=a;this.onclick=c;this._onclick=function(b){return!0===c.call(this,a.dialog,a,b)};this.item=(0,d.default)("<a></a>").html(b).attr("href",h).addClass("button-panel-link");g&&this.item.addClass(g);"function"===typeof c&&this.item.click(this._onclick);a.buttonpanel.append(this.item);this.id=a.button.length;a.button[this.id]=this};m=function(a,b){var c=
"left"==a?-1:1;return function(a){var d=this.page[b];if(this.id!=(1==c?d.length-1:0)){c*=a||1;d[this.id+c].item[0>c?"before":"after"](this.item);d.splice(this.id,1);d.splice(this.id+c,0,this);for(var a=0,j=d.length;a<j;a++)"panel"==b&&this.page.curtab==d[a].id&&(this.page.curtab=a),d[a].id=a}return this}};var w=function(a){return function(){this.page[a].splice(this.id,1);for(var b=0,c=this.page[a].length;b<c;b++)this.page[a][b].id=b;this.item.remove()}},e=function(a,b,c){var g={};+a||(g=Object(a),
a=g.width,b=g.height,c=g.id);this.height=b||480;this.width=a||640;this.id=c;g=d.default.extend({},g,{width:this.width,height:this.height,id:this.id});this.popup=o(g);this.popup.element.addClass("aui-dialog");this.page=[];this.curpage=0;new f(this)};n.prototype.moveUp=n.prototype.moveLeft=m("left","button");n.prototype.moveDown=n.prototype.moveRight=m("right","button");n.prototype.remove=w("button");n.prototype.html=function(a){return this.item.html(a)};n.prototype.onclick=function(a){var b=this;if("undefined"===
typeof a)return this.onclick;this.item.unbind("click",this._onclick);this._onclick=function(c){return!0===a.call(this,b.page.dialog,b.page,c)};"function"===typeof a&&this.item.click(this._onclick)};var l=function(a,b,c,g,e){c instanceof d.default||(c=(0,d.default)(c));this.dialog=a.dialog;this.page=a;this.id=a.panel.length;this.button=(0,d.default)("<button></button>").html(b).addClass("item-button");e&&(this.button[0].id=e);this.item=(0,d.default)("<li></li>").append(this.button).addClass("page-menu-item");
this.body=(0,d.default)("<div></div>").append(c).addClass("dialog-panel-body").css("height",a.dialog.height+"px");this.padding=20;g&&this.body.addClass(g);var b=a.panel.length,j=this;a.menu.append(this.item);a.body.append(this.body);a.panel[b]=this;c=function(){var b;if(a.curtab+1){b=a.panel[a.curtab];b.body.hide();b.item.removeClass("selected");typeof b.onblur==="function"&&b.onblur()}a.curtab=j.id;j.body.show();j.item.addClass("selected");typeof j.onselect==="function"&&j.onselect();typeof a.ontabchange===
"function"&&a.ontabchange(j,b)};this.button.click?this.button.click(c):(B.log("atlassian-dialog:Panel:constructor - this.button.click false"),this.button.onclick=c);c();0==b?a.menu.css("display","none"):a.menu.show()};l.prototype.select=function(){this.button.click()};l.prototype.moveUp=l.prototype.moveLeft=m("left","panel");l.prototype.moveDown=l.prototype.moveRight=m("right","panel");l.prototype.remove=w("panel");l.prototype.html=function(a){return a?(this.body.html(a),this):this.body.html()};l.prototype.setPadding=
function(a){isNaN(+a)||(this.body.css("padding",+a),this.padding=+a,this.page.recalcSize());return this};var f=function(a,b){this.dialog=a;this.id=a.page.length;this.element=(0,d.default)("<div></div>").addClass("dialog-components");this.body=(0,d.default)("<div></div>").addClass("dialog-page-body");this.menu=(0,d.default)("<ul></ul>").addClass("dialog-page-menu").css("height",a.height+"px");this.body.append(this.menu);this.curtab;this.panel=[];this.button=[];b&&this.body.addClass(b);a.popup.element.append(this.element.append(this.menu).append(this.body));
a.page[a.page.length]=this};f.prototype.recalcSize=function(){for(var a=this.header?62:0,b=this.buttonpanel?52:0,c=this.panel.length;c--;){var d=this.dialog.height-a-b;this.panel[c].body.css("height",d);this.menu.css("height",d)}};f.prototype.addButtonPanel=function(){this.buttonpanel=(0,d.default)("<div></div>").addClass("dialog-button-panel");this.element.append(this.buttonpanel)};f.prototype.addPanel=function(a,b,c,d){new l(this,a,b,c,d);this.recalcSize();return this};f.prototype.addHeader=function(a,
b){this.header&&this.header.remove();this.header=(0,d.default)("<h2></h2>").text(a||"").addClass("dialog-title");b&&this.header.addClass(b);this.element.prepend(this.header);this.recalcSize();return this};f.prototype.addButton=function(a,b,c){new n(this,a,b,c);this.recalcSize();return this};f.prototype.addLink=function(a,b,c,d){new C(this,a,b,c,d);this.recalcSize();return this};f.prototype.gotoPanel=function(a){this.panel[a.id||a].select()};f.prototype.getCurrentPanel=function(){return this.panel[this.curtab]};
f.prototype.hide=function(){this.element.hide()};f.prototype.show=function(){this.element.show()};f.prototype.remove=function(){this.element.remove()};e.prototype.addHeader=function(a,b){this.page[this.curpage].addHeader(a,b);return this};e.prototype.addButton=function(a,b,c){this.page[this.curpage].addButton(a,b,c);return this};e.prototype.addLink=function(a,b,c,d){this.page[this.curpage].addLink(a,b,c,d);return this};e.prototype.addSubmit=function(a,b){this.page[this.curpage].addButton(a,b,"button-panel-submit-button");
return this};e.prototype.addCancel=function(a,b){this.page[this.curpage].addLink(a,b,"button-panel-cancel-link");return this};e.prototype.addButtonPanel=function(){this.page[this.curpage].addButtonPanel();return this};e.prototype.addPanel=function(a,b,c,d){this.page[this.curpage].addPanel(a,b,c,d);return this};e.prototype.addPage=function(a){new f(this,a);this.page[this.curpage].hide();this.curpage=this.page.length-1;return this};e.prototype.nextPage=function(){this.page[this.curpage++].hide();this.curpage>=
this.page.length&&(this.curpage=0);this.page[this.curpage].show();return this};e.prototype.prevPage=function(){this.page[this.curpage--].hide();0>this.curpage&&(this.curpage=this.page.length-1);this.page[this.curpage].show();return this};e.prototype.gotoPage=function(a){this.page[this.curpage].hide();this.curpage=a;0>this.curpage?this.curpage=this.page.length-1:this.curpage>=this.page.length&&(this.curpage=0);this.page[this.curpage].show();return this};e.prototype.getPanel=function(a,b){var c=null==
b?this.curpage:a;null==b&&(b=a);return this.page[c].panel[b]};e.prototype.getPage=function(a){return this.page[a]};e.prototype.getCurrentPanel=function(){return this.page[this.curpage].getCurrentPanel()};e.prototype.gotoPanel=function(a,b){null!=b&&this.gotoPage(a.id||a);this.page[this.curpage].gotoPanel("undefined"===typeof b?a:b)};e.prototype.show=function(){this.popup.show();(0,r.trigger)("show.dialog",{dialog:this});return this};e.prototype.hide=function(){this.popup.hide();(0,r.trigger)("hide.dialog",
{dialog:this});return this};e.prototype.remove=function(){this.popup.hide();this.popup.remove();(0,r.trigger)("remove.dialog",{dialog:this})};e.prototype.disable=function(){this.popup.disable();return this};e.prototype.enable=function(){this.popup.enable();return this};e.prototype.get=function(a){var b=[],c=this;(a+"").replace(RegExp('(?:^|,)\\s*(?:(page|panel|button|header)(?:#([^"][^ ]*|"[^"]*")|:(\\d+))?|#([^"][^ ]*|"[^"]*"))(?:\\s+(?:(page|panel|button|header)(?:#([^"][^ ]*|"[^"]*")|:(\\d+))?|#([^"][^ ]*|"[^"]*")))?\\s*(?=,|$)',
"ig"),function(a,d,e,g,h,f,i,l,k){d=d&&d.toLowerCase();a=[];"page"==d&&c.page[g]?(a.push(c.page[g]),d=(d=f)&&d.toLowerCase(),e=i,g=l,h=k):a=c.page;e=e&&(e+"").replace(/"/g,"");i&&(i+"").replace(/"/g,"");h=h&&(h+"").replace(/"/g,"");k&&(k+"").replace(/"/g,"");if(d||h)for(f=a.length;f--;){if(h||"panel"==d&&(e||!e&&null==g))for(i=a[f].panel.length;i--;)(a[f].panel[i].button.html()==h||a[f].panel[i].button.html()==e||"panel"==d&&!e&&null==g)&&b.push(a[f].panel[i]);if(h||"button"==d&&(e||!e&&null==g))for(i=
a[f].button.length;i--;)(a[f].button[i].item.html()==h||a[f].button[i].item.html()==e||"button"==d&&!e&&null==g)&&b.push(a[f].button[i]);a[f][d]&&a[f][d][g]&&b.push(a[f][d][g]);"header"==d&&a[f].header&&b.push(a[f].header)}else b=b.concat(a)});for(var d={length:b.length},a=b.length;a--;){d[a]=b[a];for(var e in b[a])e in d||function(a){d[a]=function(){for(var b=this.length;b--;)"function"===typeof this[b][a]&&this[b][a].apply(this[b],arguments)}}(e)}return d};e.prototype.updateHeight=function(){for(var a=
0,b=(0,d.default)(window).height()-62-52-100,c=0;this.getPanel(c);c++)this.getPanel(c).body.css({height:"auto",display:"block"}).outerHeight()>a&&(a=Math.min(b,this.getPanel(c).body.outerHeight())),c!==this.page[this.curpage].curtab&&this.getPanel(c).body.css({display:"none"});for(c=0;this.getPanel(c);c++)this.getPanel(c).body.css({height:a||this.height});this.page[0].menu.height(a);this.height=a+62+52+1;this.popup.changeSize(void 0,this.height)};e.prototype.isMaximised=function(){return this.popup.element.outerHeight()>=
(0,d.default)(window).height()-100};e.prototype.getCurPanel=function(){return this.getPanel(this.page[this.curpage].curtab)};e.prototype.getCurPanelButton=function(){return this.getCurPanel().button};k.Dialog=m=u.construct(e,"Dialog constructor",{alternativeName:"Dialog2"});k.popup=o=u.construct(o,"Dialog popup constructor",{alternatveName:"Dialog2"});(0,v.default)("Dialog",m);(0,v.default)("popup",o);k.Dialog=m;k.popup=o;return k}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-css.escape-1.5.0-css-escape', location = 'node_modules/css.escape/css.escape.js' */
("undefined"===typeof window?global:window).__312b790bc580bc1fc32e6982982466f9=function(){var f={exports:{}},i=f.exports,k={module:f,exports:i},c;c=function(d,g,e){var c=("undefined"===typeof window?global:window).define,b,a,e=[e,g,d].filter(function(a){return"function"===typeof a})[0],g=[g,d,[]].filter(Array.isArray)[0];b=e.apply(null,g.map(function(a){return k[a]}));a=typeof b;"function"===typeof c&&c("string"===typeof d?d:"__312b790bc580bc1fc32e6982982466f9",g,e);"string"===a?b=String(b):"number"===
a?b=Number(b):"boolean"===a&&(b=Boolean(b));void 0!==b&&(i=f.exports=b)};c.amd=!0;var h="undefined"!=typeof global?global:this,j=function(d){if(d.CSS&&d.CSS.escape)return d.CSS.escape;var c=function(e){for(var e=String(e),d=e.length,b=-1,a,c="",f=e.charCodeAt(0);++b<d;)a=e.charCodeAt(b),c=0==a?c+"\ufffd":1<=a&&31>=a||127==a||0==b&&48<=a&&57>=a||1==b&&48<=a&&57>=a&&45==f?c+("\\"+a.toString(16)+" "):0==b&&1==d&&45==a?c+("\\"+e.charAt(b)):128<=a||45==a||95==a||48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=
a?c+e.charAt(b):c+("\\"+e.charAt(b));return c};d.CSS||(d.CSS={});return d.CSS.escape=c};"object"==typeof i?f.exports=j(h):"function"==typeof c&&c.amd?c([],j.bind(h,h)):j(h);return f.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-inline-dialog', location = 'src/js/aui/inline-dialog.js' */
("undefined"===typeof window?global:window).__5546c99acc57dc40d4439021a21250a8=function(){function B(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d]);c.default=b;return c}function u(b){return b&&b.__esModule?b:{"default":b}}function w(b,c,l,a){a=a||[];a.hasOwnProperty("onTop")&&(E(),a.onTop&&void 0===a.gravity&&(a.gravity="s"));if("undefined"===typeof c&&(c=String(Math.random()).replace(".",""),(0,d.default)("#inline-dialog-"+
c+", #arrow-"+c+", #inline-dialog-shim-"+c).length))throw"GENERATED_IDENTIFIER_NOT_UNIQUE";var g=(0,F.default)(c),e=d.default.extend(!1,w.opts,a);"w"===e.gravity&&(e.offsetX=void 0===a.offsetX?10:a.offsetX,e.offsetY=void 0===a.offsetY?0:a.offsetY);var i,j,h,k=!1,o=!1,q=!1,m,t,f=(0,d.default)('<div id="inline-dialog-'+c+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+c+'" class="aui-inline-dialog-arrow arrow aui-css-arrow"></div></div>'),n=(0,d.default)("#arrow-"+
g,f),p=f.find(".contents");e.displayShadow||p.addClass("aui-inline-dialog-no-shadow");e.autoWidth?p.addClass("aui-inline-dialog-auto-width"):p.width(e.width);p.on({mouseenter:function(){clearTimeout(j);f.unbind("mouseenter")},mouseleave:function(){r()}});var s=function(){i||(i={popup:f,hide:function(){r(0)},id:c,show:function(){x()},persistent:e.persistent?true:false,reset:function(){var a=(0,d.default)(window).height(),a=Math.round(a*0.75);f.children(".aui-inline-dialog-contents").css("max-height",
a);a=e.calculatePositions(f,t,m,e);if(a.hasOwnProperty("displayAbove")){G();a.gravity=a.displayAbove?"s":"n"}f.css(a.popupCss);n.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");a.gravity==="s"&&!n.hasClass("aui-bottom-arrow")?n.addClass("aui-bottom-arrow"):a.gravity==="w"?n.addClass("aui-left-arrow"):a.gravity==="e"&&n.addClass("aui-right-arrow");n.css(a.arrowCss);f.fadeIn(e.fadeTime,function(){});if((0,H.needsLayeringShim)()){a=(0,d.default)("#inline-dialog-shim-"+g);a.length||(0,
d.default)(f).prepend((0,d.default)('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+c+'" frameBorder="0" src="javascript:false;"></iframe>'));a.css({width:p.outerWidth(),height:p.outerHeight()})}}});return i},x=function(){f.is(":visible")||(h=setTimeout(function(){if(q&&o){e.addActiveClass&&(0,d.default)(b).addClass("active");k=true;if(!e.persistent){if(!v){(0,d.default)("body").bind("click."+A,function(a){(0,d.default)(a.target).closest("#inline-dialog-"+g+" .contents").length===0&&
r(0)});v=true}(0,d.default)(document).on("keydown",B)}w.current=s();(0,d.default)(document).trigger("showLayer",["inlineDialog",s()]);s().reset()}},e.showDelay))},r=function(a){if(!(typeof a==="undefined"&&e.persistent)&&typeof f.get(0)._datePickerPopup==="undefined"){o=false;if(k&&e.preHideCallback.call(f[0].popup)){a=a==null?e.hideDelay:a;clearTimeout(j);clearTimeout(h);a!=null&&(j=setTimeout(function(){v&&(0,d.default)("body").unbind("click."+A);v=false;(0,d.default)(document).off("keydown",B);
e.addActiveClass&&(0,d.default)(b).removeClass("active");f.fadeOut(e.fadeTime,function(){e.hideCallback.call(f[0].popup)});o=k=false;(0,d.default)(document).trigger("hideLayer",["inlineDialog",s()]);w.current=null;if(!e.cacheContent)u=q=false},a))}}},z=function(a,b){var g=(0,d.default)(b);e.upfrontCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){x()}});f.each(function(){typeof this.popup!=="undefined"&&this.popup.hide()});e.closeOthers&&(0,d.default)(".aui-inline-dialog").each(function(){!this.popup.persistent&&
this.popup.hide()});t={target:g};m=a?{x:a.pageX,y:a.pageY}:{x:g.offset().left,y:g.offset().top};k||clearTimeout(h);o=true;g=function(){u=false;q=true;e.initCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){x()}});x()};if(!u){u=true;d.default.isFunction(l)?l(p,b,g):d.default.get(l,function(a,b,d){p.html(e.responseHandler(a,b,d));q=true;e.initCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){x()}});x()})}clearTimeout(j);k||x();return false};f[0].popup=s();var u=!1,y=
!1,C=function(){if(!y){(0,d.default)(e.container).append(f);y=true}},a=(0,d.default)(b);if(e.onHover)if(e.useLiveEvents)if(a.selector)(0,d.default)(document).on("mouseenter",a.selector,function(a){C();z(a,this)}).on("mouseleave",a.selector,function(){r()});else D.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.");else a.on({mouseenter:function(a){C();z(a,this)},mouseleave:function(){r()}});else if(!e.noBind)if(e.useLiveEvents)if(a.selector)(0,
d.default)(document).on("click",a.selector,function(a){C();k&&e.closeOnTriggerClick?f.hide():z(a,this);return false}).on("mouseleave",a.selector,function(){r()});else D.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.");else a.on("click",function(a){C();k&&e.closeOnTriggerClick?f.hide():z(a,this);return false}).on("mouseleave",function(){r()});var v=!1,A=c+".inline-dialog-check",B=function(a){a.keyCode===I.default.ESCAPE&&r(0)};f.show=
function(a,c){a&&a.stopPropagation();C();e.noBind&&(!b||!b.length)?z(a,c===void 0?a.target:c):z(a,b)};f.hide=function(){r(0)};f.refresh=function(){k&&s().reset()};f.getOptions=function(){return e};return f}function y(b){var b=(0,d.default)(b),c=d.default.extend({left:0,top:0},b.offset());return{left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()}}function J(b,c,l,a){var g,e,i,j,h,k,o,q,m=d.default.isFunction(a.offsetX)?a.offsetX(b,c,l,a):a.offsetX,t=d.default.isFunction(a.offsetY)?a.offsetY(b,
c,l,a):a.offsetY;d.default.isFunction(a.arrowOffsetX)&&a.arrowOffsetX(b,c,l,a);l=d.default.isFunction(a.arrowOffsetY)?a.arrowOffsetY(b,c,l,a):a.arrowOffsetY;h="body"!==a.container.toLowerCase();i=(0,d.default)(a.container);a=h?(0,d.default)(a.container).parent():(0,d.default)(window);j=h?i.offset():{left:0,top:0};h&&a.offset();g=c.target;h=g.offset();e=g[0].getBBox&&g[0].getBBox();c=a.scrollTop();q=a.scrollLeft();a.width();a=a.height();o=i.width();i.height();i=h.top-j.top;j=h.left-j.left;h=e?e.width:
g.outerWidth();k=e?e.height:g.outerHeight();g=b.width();e=b.height();var f=10,n=b.find(".arrow").outerHeight(),p=i-c,s=j-q,b=Math.floor(k/2);q=Math.floor(e/2);k=Math.floor(n/2);o=!(o-s-h-m-f>=g)&&s-m-f>=g?"e":"w";s=p+b-k;n=a-s-n;f=Math.min(f,s-5);f=Math.min(f,n-5);n=p+b;p=Math.max(n-f,0);n=Math.max(a-n-f,0);q-t>p?(m={top:c+f,left:"w"===o?j+h+m:j-g-m},t={top:i+b-(m.top+k)}):q+t>n?(m={top:c+a-e-f,left:"w"===o?j+h+m:j-g-m},t={top:i+b-(m.top+k)}):(m={top:i+b-q+t,left:"w"===o?j+h+m:j-g-m},t={top:q-k+l});
return{gravity:o,popupCss:m,arrowCss:t}}function K(b,c,l,a){var g=d.default.isFunction(a.offsetX)?a.offsetX(b,c,l,a):a.offsetX,e=d.default.isFunction(a.offsetY)?a.offsetY(b,c,l,a):a.offsetY,i=d.default.isFunction(a.arrowOffsetX)?a.arrowOffsetX(b,c,l,a):a.arrowOffsetX,j=y(window),h=y(c.target),c=y(b),b=y(b.find(".aui-inline-dialog-arrow")),k=h.left+h.width/2,o=(window.pageYOffset||document.documentElement.scrollTop)+j.height;c.top=h.top+h.height+~~e;c.left=h.left+~~g;g=j.width-(c.left+c.width+10);
b.left=k-c.left+~~i;b.top=-(b.height/2);i=h.top>c.height;if(i=!(c.top+c.height<o)&&i||i&&"s"===a.gravity)c.top=h.top-c.height-b.height/2,b.top=c.height;a.isRelativeToMouse?0>g?(c.right=10,c.left="auto",b.left=l.x-(j.width-c.width)):(c.left=l.x-20,b.left=l.x-c.left):0>g?(c.right=10,c.left="auto",l=j.width-c.right-c.width,b.right="auto",b.left=k-l-b.width/2):c.width<=h.width/2&&(b.left=c.width/2,c.left=k-c.width/2);return{gravity:i?"s":"n",displayAbove:i,popupCss:{left:c.left,top:c.top,right:c.right},
arrowCss:{left:b.left,top:b.top,right:b.right}}}var v={};Object.defineProperty(v,"__esModule",{value:!0});var d=u(__bd7207540b95ff683caa1d3c0bfcc3d7),H=__02837eb0ab28736e09825f2207c8fe9b,A=B(__c88c0dc6258c37804917fb6a0e4092fa),D=B(__2f5c294b01e66b15309518e39bcb949d),L=u(__9a668cbde1e182d8e721c23580356df2),I=u(__3f6f6650e96d80fefaaf71feed8f822b),F=u(__312b790bc580bc1fc32e6982982466f9);w.opts={onTop:!1,responseHandler:function(b){return b},closeOthers:!0,isRelativeToMouse:!1,addActiveClass:!0,onHover:!1,
useLiveEvents:!1,noBind:!1,fadeTime:100,persistent:!1,hideDelay:1E4,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:!0,displayShadow:!0,autoWidth:!1,gravity:"n",closeOnTriggerClick:!1,preHideCallback:function(){return!0},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(b,c,d,a){a=a||{};return("w"===a.gravity?J:K)(b,c,d,a)}};var w=A.construct(w,"Inline dialog constructor",{alternativeName:"inline dialog 2"}),
G=A.getMessageLogger("displayAbove","[remove version]",{alternativeName:"gravity",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2197."}),E=A.getMessageLogger("onTop","[remove version]",{alternativeName:"gravity",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2197."});(0,L.default)("InlineDialog",w);v.default=w;return v=v["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-template', location = 'src/js/aui/template.js' */
("undefined"===typeof window?global:window).__c4f1078a82b494cc09b37e0114acf4c9=function(){function i(b){return b&&b.__esModule?b:{"default":b}}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var g=i(__bd7207540b95ff683caa1d3c0bfcc3d7),m=i(__75c0ba5c1d5da818c39f0ae31d9f5724),n=i(__9a668cbde1e182d8e721c23580356df2),o=g.default,k=/\{([^\}]+)\}/g,p=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,l=function(b,a,d,f){var c=d;a.replace(p,function(b,a,d,e,g){a=a||e;c&&(a+
":html"in c?(c=c[a+":html"],f=!0):a in c&&(c=c[a]),g&&"function"===typeof c&&(c=c()))});if(null==c||c===d)c=b;c=String(c);return c=f?e.parseHtml(c):e.escape(c)},q=function(b){this.template=this.template.replace(k,function(a,d){return l(a,d,b,!0)});return this},r=function(b){this.template=this.template.replace(k,function(a,d){return l(a,d,b)});return this},s=function(){return this.template},e=function(b){function a(){return a.template}a.template=String(b);a.toString=a.valueOf=s;a.fill=r;a.fillHtml=
q;return a},h={},j=[];e.load=function(b){b=String(b);if(!h.hasOwnProperty(b)){1E3<=j.length&&delete h[j.shift()];j.push(b);var a=b,d,e=b;d=o("script").filter(function(){return this.getAttribute("title")===e});h[a]=d[0].text}return this(h[b])};e.escape=m.default;e.parseHtml=function(b){var a=document.createElement("div");a.innerHTML=b;b=a.querySelectorAll("script");Array.prototype.forEach.call(b,function(a){a.parentElement.removeChild(a)});return a.innerHTML};g=e;(0,n.default)("template",g);f.default=
g;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-messages', location = 'src/js/aui/messages.js' */
("undefined"===typeof window?global:window).__fe3af5ad0f8430f8b84d8607ffb6b96f=function(){function n(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b]);e.default=a;return e}function i(a){return a&&a.__esModule?a:{"default":a}}function f(a){d[a]=function(e,b){b||(b=e,e="#aui-message-bar");b.closeable=null!==b.closeable&&!1!==b.closeable;b.shadowed=null!==b.shadowed&&!1!==b.shadowed;var h=(b.title||"").toString().trim()?this.template:
this.templateAlt,c=b,h=(0,g.default)((0,q.default)(h).fill({type:a,closeable:c.closeable?"closeable":"",shadowed:c.shadowed?"shadowed":"",fadeout:c.fadeout?"fadeout":"",title:c.title||"","body:html":c.body||""}).toString());c.id&&(/[#\'\"\.\s]/g.test(c.id)?r.warn("Messages error: ID rejected, must not include spaces, hashes, dots or quotes."):h.attr("id",c.id));c=e;"prepend"===b.insert?h.prependTo(c):h.appendTo(c);b.closeable&&l(h);b.fadeout&&m(h,b.delay,b.duration);return h}}function l(a){(0,g.default)(a||
"div.aui-message.closeable").each(function(){var a=(0,g.default)(this),b=a.find(".aui-icon.icon-close"),b=0<b.length?b.first():(0,g.default)('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');a.addClass("closeable");a.append(b);a.unbind("click.aui-message").unbind("keydown.aui-message");a.on("click.aui-message",".aui-icon.icon-close",function(a){(0,g.default)(a.target).closest(".aui-message").closeMessage()}).on("keydown.aui-message",".aui-icon.icon-close",function(a){if(a.which===
o.default.ENTER||a.which===o.default.SPACE)(0,g.default)(a.target).closest(".aui-message").closeMessage(),a.preventDefault()})})}function m(a,e,b){e="undefined"!==typeof e?e:s;b="undefined"!==typeof b?b:t;(0,g.default)(a||"div.aui-message.fadeout").each(function(){function a(){c.stop(!0,!1).delay(e).fadeOut(b,function(){c.closeMessage()})}var c=(0,g.default)(this),d=!1,f=!1;c.focusin(function(){d=!0;c.stop(!0,!1).fadeTo(p,1)}).focusout(function(){d=!1;!d&&!f&&a()}).hover(function(){f=!0;c.stop(!0,
!1).fadeTo(p,1)},function(){f=!1;!d&&!f&&a()});a()})}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});var g=i(__bd7207540b95ff683caa1d3c0bfcc3d7),j=n(__c88c0dc6258c37804917fb6a0e4092fa),r=n(__2f5c294b01e66b15309518e39bcb949d),u=i(__9a668cbde1e182d8e721c23580356df2),o=i(__3f6f6650e96d80fefaaf71feed8f822b),v=i(__7acfe7fd38bbf8b5bf76cc953770b033),q=i(__c4f1078a82b494cc09b37e0114acf4c9),t=500,s=5E3,p=100,d={setup:function(){l();m()},makeCloseable:l,makeFadeout:m,template:'<div class="aui-message aui-message-{type} {closeable} {shadowed} {fadeout}"><p class="title"><strong>{title}</strong></p>{body}<\!-- .aui-message --\></div>',
templateAlt:'<div class="aui-message aui-message-{type} {closeable} {shadowed} {fadeout}">{body}<\!-- .aui-message --\></div>',createMessage:f};g.default.fn.closeMessage=function(){var a=(0,g.default)(this);a.hasClass("aui-message")&&a.hasClass("closeable")&&(a.stop(!0),a.trigger("messageClose",[this]),a.remove(),(0,g.default)(document).trigger("aui-message-close",[this]))};f("generic");f("error");f("warning");f("info");f("success");f("hint");(0,v.default)("aui-message",{created:function(a){var e=
a.innerHTML,b=a.getAttribute("type")||"info";a.innerHTML="";d[b](a,{body:e,closeable:a.getAttribute("closeable"),delay:a.getAttribute("delay"),duration:a.getAttribute("duration"),fadeout:a.getAttribute("fadeout"),title:a.getAttribute("title")})}});(0,g.default)(function(){d.setup()});j.prop(d,"makeCloseable",{extraInfo:'Use the "closeable" option in the constructor instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html'});j.prop(d,"createMessage",{extraInfo:"Use the provided convenience methods instead e.g. messages.info(). Docs: https://docs.atlassian.com/aui/latest/docs/messages.html"});
j.prop(d,"makeFadeout",{extraInfo:'Use the "fadeout" option in the constructor instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html'});j.prop(d,"generic",{extraInfo:"use the messages.info() method instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html"});j.prop(d,"hint",{extraInfo:"use the messages.info() method instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html"});(0,u.default)("messages",d);k.default=d;return k=k["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-tabs', location = 'src/js/aui/tabs.js' */
("undefined"===typeof window?global:window).__456d95c70c9c70591d123f9806734140=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function u(a){a=(0,e.default)(a);if(!a.hasClass("aui-tabs-responsive-trigger")){var b=(0,e.default)(a.attr("href").match(A)[0]);b.addClass("active-pane").attr("aria-hidden","false").siblings(".tabs-pane").removeClass("active-pane").attr("aria-hidden","true");var c=a.parents(".aui-tabs").find(".aui-tabs-responsive-trigger-item a").attr("aria-controls"),c=(0,
e.default)(document).find("#"+c);c.find("li a").attr("aria-checked",!1).removeClass("checked aui-dropdown2-checked");c.find("li").removeClass("active-tab");a.parent("li.menu-item").addClass("active-tab").siblings(".menu-item").removeClass("active-tab");a.hasClass("aui-tabs-responsive-item")&&(c=b.parent(".aui-tabs").find("li.menu-item:not(.aui-tabs-responsive-trigger-item)"),c.removeClass("active-tab"),c.find("a").removeClass("checked").removeAttr("aria-checked"));a.hasClass("aui-tabs-responsive-item")&&
b.parent(".aui-tabs").find("li.menu-item.aui-tabs-responsive-trigger-item").addClass("active-tab");a.closest(".tabs-menu").find("a").attr("aria-selected","false");a.attr("aria-selected","true");a.trigger("tabSelect",{tab:a,pane:b})}}function v(a){return void 0!==a.attr("data-aui-persist")&&"false"!==a.attr("data-aui-persist")}function w(a){var b=a.attr("id"),a=a.attr("data-aui-persist");return B+(b?b:"")+(a&&"true"!==a?"-"+a:"")}function x(a){m.change((0,e.default)(a.target).closest("a"));a&&a.preventDefault()}
function y(a){a.forEach(function(a,c){var d=(0,e.default)(a),g=d.find(".tabs-menu").first(),f=g.find("li:not(.aui-tabs-responsive-trigger-item)"),h=g.find(".aui-tabs-responsive-trigger").parent(),o=h.find("a"),k=o.attr("aria-controls"),k=(0,e.default)(document).find("#"+k).attr("aria-checked",!1),i=0<k.length,j=l.totalTabsWidth(f,k)>d.outerWidth();!i&&j&&(h=l.createResponsiveDropdownTrigger(g,c),k=l.createResponsiveDropdown(d,c));o.attr("aria-controls","aui-tabs-responsive-dropdown-"+c);o.attr("id",
"aui-tabs-responsive-trigger-"+c);o.attr("href","aui-tabs-responsive-trigger-"+c);k.attr("id","aui-tabs-responsive-dropdown-"+c);j&&(f=l.moveVisibleTabs(f.toArray(),d,h),f=l.totalVisibleTabWidth(f),d=d.outerWidth()-f-h.outerWidth(!0),0<d&&(f=k.find("li"),l.moveInvisibleTabs(f.toArray(),d,h)),k.on("click","a",x),g.is(":visible")&&g.hide().show());i&&!j&&(k.find("li").each(function(){l.moveTabOutOfDropdown((0,e.default)(this),h)}),l.removeResponsiveDropdown(k,h))})}function z(a){var b=(0,e.default)(a);
a.setAttribute("role","application");if(!b.data("aui-tab-events-bound")){var c=b.children("ul.tabs-menu");c.attr("role","tablist");c.children("li").attr("role","presentation");c.find("> .menu-item a").each(function(){var a=(0,e.default)(this),b=a.attr("href");(0,C.default)(a);a.attr("role","tab");(0,e.default)(b).attr("aria-labelledby",a.attr("id"));a.parent().hasClass("active-tab")?a.attr("aria-selected","true"):a.attr("aria-selected","false")});c.on("click","a",x);b.data("aui-tab-events-bound",
!0);[].slice.call(a.querySelectorAll(".tabs-pane")).forEach(D)}}function D(a){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",(0,e.default)(a).hasClass("active-pane")?"false":"true")}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});__2b1734744f1decec6fe4109762d4ff9c;var q;var i=__2f5c294b01e66b15309518e39bcb949d;if(i&&i.__esModule)q=i;else{var t={};if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);t.default=i;q=t}var E=j(__797d10010c51da30b099c976f973e278),
e=j(__bd7207540b95ff683caa1d3c0bfcc3d7),C=j(__720511231eacfd9a564b2acaf400d3c5);n=j(__9a668cbde1e182d8e721c23580356df2);var F=j(__ee776d9150ae4c2ceb7a2b4f89a0f3e4),r=j(__7acfe7fd38bbf8b5bf76cc953770b033),s=window.skateTemplateHtml,A=/#.*/,B="_internal-aui-tabs-",l={totalTabsWidth:function(a,b){var c=this.totalVisibleTabWidth(a),d=0;b.find("li").each(function(a,b){d+=parseInt(b.getAttribute("data-aui-tab-width"))});return c+d},totalVisibleTabWidth:function(a){var b=0;a.each(function(a,d){b+=(0,e.default)(d).outerWidth()});
return b},removeResponsiveDropdown:function(a,b){a.remove();b.remove()},createResponsiveDropdownTrigger:function(a,b){a.append('<li class="menu-item aui-tabs-responsive-trigger-item"><a class="aui-dropdown2-trigger aui-tabs-responsive-trigger aui-dropdown2-trigger-arrowless" id="aui-tabs-responsive-trigger-'+b+'" aria-haspopup="true" aria-controls="aui-tabs-responsive-dropdown-'+b+'" href="aui-tabs-responsive-dropdown-'+b+'">...</a></li>');return a.find(".aui-tabs-responsive-trigger-item")},createResponsiveDropdown:function(a,
b){a.append('<div class="aui-dropdown2 aui-style-default aui-tabs-responsive-dropdown" id="aui-tabs-responsive-dropdown-'+b+'"><ul></ul></div>');return a.find("#aui-tabs-responsive-dropdown-"+b)},findNewVisibleTabs:function(a,b,c){for(var d=0,g=0;d+c<=b&&g<a.length;g++)var f=(0,e.default)(a[g]).outerWidth(!0),d=d+f;return a.slice(0,g-1)},moveVisibleTabs:function(a,b,c){for(var d=c.find("a").attr("aria-controls"),d=(0,e.default)("#"+d),b=this.findNewVisibleTabs(a,b.outerWidth(),c.parent().outerWidth(!0)),
g=b.length-1,f=a.length-1;f>=g;f--){var h=(0,e.default)(a[f]);this.moveTabToResponsiveDropdown(h,d,c)}return(0,e.default)(b)},moveTabToResponsiveDropdown:function(a,b,c){var d=a.find("a");a.attr("data-aui-tab-width",a.outerWidth(!0));d.addClass("aui-dropdown2-radio aui-tabs-responsive-item");a.hasClass("active-tab")&&(d.addClass("aui-dropdown2-checked"),c.addClass("active-tab"));b.find("ul").prepend(a)},moveInvisibleTabs:function(a,b,c){for(var d=0;0<b&&d<a.length;d++){var g=(0,e.default)(a[d]),f=
parseInt(g.attr("data-aui-tab-width"),10);f<b&&this.moveTabOutOfDropdown(g,c);b-=f}},moveTabOutOfDropdown:function(a,b){a.find("a").hasClass("aui-dropdown2-checked")&&(a.addClass("active-tab"),b.removeClass("active-tab"));a.children("a").removeClass("aui-dropdown2-radio aui-tabs-responsive-item aui-dropdown2-checked");b.before(a)}},m={setup:function(){var a=(0,E.default)(y,200),b=(0,e.default)('.aui-tabs.horizontal-tabs[data-aui-responsive]:not([data-aui-responsive="false"]), aui-tabs[responsive]:not([responsive="false"])').toArray();
y(b);(0,e.default)(window).resize(function(){a(b)});var c=(0,e.default)(".aui-tabs:not(.aui-tabs-disabled)");c.each(function(){z(this)});for(var d=0,g=c.length;d<g;d++){var f=c.eq(d),h=c.get(d);if(v(f)&&window.localStorage)if(f.attr("id")){if(f=window.localStorage.getItem(w(f)))(h=h.querySelector('a[href$="'+f+'"]'))&&u(h)}else q.warn("A tab group must specify an id attribute if it specifies data-aui-persist.")}(0,e.default)(".aui-tabs.vertical-tabs").find("a").each(function(){var a=(0,e.default)(this);
a.attr("title")||(0,F.default)(a)&&a.attr("title",a.text())})},change:function(a){var a=(0,e.default)(a),b=a.closest(".aui-tabs");u(a);v(b)&&window.localStorage&&(b=a.closest(".aui-tabs"),b.attr("id")?(a=a.attr("href"))&&window.localStorage.setItem(w(b),a):q.warn("A tab group must specify an id attribute if it specifies data-aui-persist."))}};(0,e.default)(m.setup);(0,r.default)("aui-tabs",{created:function(a){(0,e.default)(a).addClass("aui-tabs horizontal-tabs");r.default.init(a);z(a)},template:s('<ul class="tabs-menu">',
'<content select="li[is=aui-tabs-tab]"></content>',"</ul>",'<content select="aui-tabs-pane"></content>'),prototype:{select:function(a){a=(0,e.default)(this.querySelectorAll("aui-tabs-pane")).index(a);-1<a&&m.change(this.querySelectorAll("li[is=aui-tabs-tab]")[a].children[0]);return this}}});var G=(0,r.default)("aui-tabs-tab",{"extends":"li",created:function(a){(0,e.default)(a).addClass("menu-item")},template:s('<a href="#">',"<strong>","<content></content>","</strong>","</a>")});(0,r.default)("aui-tabs-pane",
{attached:function(a){var b=(0,e.default)((0,e.default)(a).closest("aui-tabs").get(0)),c=(0,e.default)(a),b=b.find("aui-tabs-pane").index(c),d=new G,g=(0,e.default)(d);c.addClass("tabs-pane");d.firstChild.setAttribute("href","#"+a.id);s.wrap(d).textContent=c.attr("title");0===b&&c.addClass("active-pane");c.hasClass("active-pane")&&g.addClass("active-tab");c.siblings("ul").append(d)},template:s("<content></content>")});(0,n.default)("tabs",m);p.default=m;return p=p["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.core.js' */
(function(b){function h(a,c){var d=a.nodeName.toLowerCase();if("area"===d){var d=a.parentNode,e=d.name;if(!a.href||!e||"map"!==d.nodeName.toLowerCase())return!1;d=b("img[usemap=#"+e+"]")[0];return!!d&&i(d)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||c:c)&&i(a)}function i(a){return!b(a).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.24",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(a,c){return"number"===typeof a?this.each(function(){var d=
this;setTimeout(function(){b(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(void 0!==a)return this.css("zIndex",a);if(this.length)for(var a=b(this[0]),c;a.length&&a[0]!==document;){c=a.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c)return c;a=a.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),"1.7"===b.fn.jquery.substring(0,3)&&b.each(["Width","Height"],function(a,c){function d(a,c,d,f){b.each(e,function(){c-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;d&&(c-=parseFloat(b.curCSS(a,"border"+this+"Width",!0))||0);f&&(c-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g=
{innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+c]=function(a){return void 0===a?g["inner"+c].call(this):this.each(function(){b(this).css(f,d(this,a)+"px")})};b.fn["outer"+c]=function(a,e){return"number"!==typeof a?g["outer"+c].call(this,a):this.each(function(){b(this).css(f,d(this,a,!0,e)+"px")})}}),b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(c){return!!b.data(c,a)}}):
function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return h(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var c=b.attr(a,"tabindex"),d=isNaN(c);return(d||0<=c)&&h(a,!d)}}),b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));c.offsetHeight;b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===c.offsetHeight;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.curCSS||(b.curCSS=
b.css),b.extend(b.ui,{plugin:{add:function(a,c,d){var a=b.ui[a].prototype,e;for(e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([c,d[e]])}},call:function(a,c,b){if((c=a.plugins[c])&&a.element[0].parentNode)for(var e=0;e<c.length;e++)a.options[c[e][0]]&&c[e][1].apply(a.element,b)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,c){if(b(a).css("overflow")==="hidden")return false;var d=c&&c==="left"?"scrollLeft":
"scrollTop",e=false;if(a[d]>0)return true;a[d]=1;e=a[d]>0;a[d]=0;return e},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,c,d,e,f,g){return b.ui.isOverAxis(a,d,f)&&b.ui.isOverAxis(c,e,g)}}))})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.widget.js' */
(function(c){if(c.cleanData){var h=c.cleanData;c.cleanData=function(a){for(var b=0,d;null!=(d=a[b]);b++)try{c(d).triggerHandler("remove")}catch(e){}h(a)}}else{var i=c.fn.remove;c.fn.remove=function(a,b){return this.each(function(){b||(!a||c.filter(a,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(a){}});return i.call(c(this),a,b)})}}c.widget=function(a,b,d){var e=a.split(".")[0],f,a=a.split(".")[1];f=e+"-"+a;d||(d=b,b=c.Widget);c.expr[":"][f]=function(b){return!!c.data(b,
a)};c[e]=c[e]||{};c[e][a]=function(a,b){arguments.length&&this._createWidget(a,b)};b=new b;b.options=c.extend(!0,{},b.options);c[e][a].prototype=c.extend(!0,b,{namespace:e,widgetName:a,widgetEventPrefix:c[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);c.widget.bridge(a,c[e][a])};c.widget.bridge=function(a,b){c.fn[a]=function(d){var e="string"===typeof d,f=Array.prototype.slice.call(arguments,1),g=this,d=!e&&f.length?c.extend.apply(null,[!0,d].concat(f)):d;if(e&&"_"===d.charAt(0))return g;
e?this.each(function(){var b=c.data(this,a),e=b&&c.isFunction(b[d])?b[d].apply(b,f):b;if(e!==b&&void 0!==e)return g=e,!1}):this.each(function(){var e=c.data(this,a);e?e.option(d||{})._init():c.data(this,a,new b(d,this))});return g}};c.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){c.data(b,this.widgetName,this);this.element=c(b);this.options=c.extend(!0,{},this.options,this._getCreateOptions(),
a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(a,b){var d=a;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof a){if(void 0===b)return this.options[a];d={};d[a]=b}this._setOptions(d);return this},_setOptions:function(a){var b=this;c.each(a,function(a,c){b._setOption(a,c)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,d){var e,f=this.options[a],d=d||{},b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(e in a)e in b||(b[e]=a[e]);this.element.trigger(b,d);return!(c.isFunction(f)&&!1===f.call(this.element[0],b,d)||b.isDefaultPrevented())}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.mouse.js' */
(function(b){var d=!1;b(document).mouseup(function(){d=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(c){if(!0===b.data(c.target,a.widgetName+".preventClickEvent"))return b.removeData(c.target,a.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(!d){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,e=1==a.which,f="string"==typeof this.options.cancel&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=!1!==this._mouseStart(a),!this._mouseStarted))return a.preventDefault(),!0;!0===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);a.preventDefault();return d=!0}},_mouseMove:function(a){if(this._mouseMoved&&(b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button||!a.which))return this._mouseUp(a);if(a.which||a.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a));return!this._mouseStarted},
_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},
_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.draggable.js' */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||d(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);if(!this.handle)return!1;c.iframeFix&&d(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
d.ui.ddmanager&&(d.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);
this.originalPageX=a.pageX;this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this._mouseDrag(a,!0);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,c){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var b=this._uiHash();if(!1===this._trigger("drag",a,b))return this._mouseUp({}),!1;this.position=b.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var c=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(c=d.ui.ddmanager.drop(this,a));this.dropped&&(c=this.dropped,this.dropped=
!1);for(var b=this.element[0],f=!1;b&&(b=b.parentNode);)b==document&&(f=!0);if(!f&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var e=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",a)!==false&&e._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},
_mouseUp:function(a){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a);return d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var c=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;d(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(c=!0)});
return c},_createHelper:function(a){var c=this.options,a=d.isFunction(c.helper)?d(c.helper.apply(this.element[0],[a])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||
0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0]))&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:d(window).scrollLeft())+d("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:d(window).scrollTop())+(d("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=d(a.containment),c=a[0];if(c){a.offset();var b="hidden"!=d(c).css("overflow");this.containment=[(parseInt(d(c).css("borderLeftWidth"),10)||0)+(parseInt(d(c).css("paddingLeft"),
10)||0),(parseInt(d(c).css("borderTopWidth"),10)||0)+(parseInt(d(c).css("paddingTop"),10)||0),(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(d(c).css("borderLeftWidth"),10)||0)-(parseInt(d(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(d(c).css("borderTopWidth"),10)||0)-(parseInt(d(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,c){c||(c=this.position);var b="absolute"==a?1:-1,f="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:f.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:f.scrollLeft())*b)}},_generatePosition:function(a){var c=this.options,b="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
f=/(html|body)/i.test(b[0].tagName),e=a.pageX,h=a.pageY;if(this.originalPosition){var g;this.containment&&(this.relative_container?(g=this.relative_container.offset(),g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]):g=this.containment,a.pageX-this.offset.click.left<g[0]&&(e=g[0]+this.offset.click.left),a.pageY-this.offset.click.top<g[1]&&(h=g[1]+this.offset.click.top),a.pageX-this.offset.click.left>g[2]&&(e=g[2]+this.offset.click.left),
a.pageY-this.offset.click.top>g[3]&&(h=g[3]+this.offset.click.top));c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=g?!(h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3])?h:!(h-this.offset.click.top<g[1])?h-c.grid[1]:h+c.grid[1]:h,e=c.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,e=g?!(e-this.offset.click.left<g[0]||e-this.offset.click.left>g[2])?e:!(e-this.offset.click.left<
g[0])?e-c.grid[0]:e+c.grid[0]:e)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:b.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:b.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,c,b){b=b||this._uiHash();d.ui.plugin.call(this,a,[c,b]);"drag"==a&&(this.positionAbs=this._convertPositionTo("absolute"));return d.Widget.prototype._trigger.call(this,a,c,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.24"});
d.ui.plugin.add("draggable","connectToSortable",{start:function(a,c){var b=d(this).data("draggable"),f=b.options,e=d.extend({},c,{item:b.element});b.sortables=[];d(f.connectToSortable).each(function(){var c=d.data(this,"sortable");c&&!c.options.disabled&&(b.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",a,e))})},stop:function(a,c){var b=d(this).data("draggable"),f=d.extend({},c,{item:b.element});d.each(b.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,b.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,"original"==b.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,f))})},drag:function(a,c){var b=d(this).data("draggable"),f=this;d.each(b.sortables,function(){this.instance.positionAbs=
b.positionAbs;this.instance.helperProportions=b.helperProportions;this.instance.offset.click=b.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",a),b.dropped=this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),b._trigger("fromSortable",a),b.dropped=!1)})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),c=d(this).data("draggable").options;
a.css("cursor")&&(c._cursor=a.css("cursor"));a.css("cursor",c.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,c){var b=d(c.helper),f=d(this).data("draggable").options;b.css("opacity")&&(f._opacity=b.css("opacity"));b.css("opacity",f.opacity)},stop:function(a,c){var b=d(this).data("draggable").options;b._opacity&&d(c.helper).css("opacity",b._opacity)}});d.ui.plugin.add("draggable",
"scroll",{start:function(){var a=d(this).data("draggable");a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(a){var c=d(this).data("draggable"),b=c.options,f=!1;if(c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName){if(!b.axis||"x"!=b.axis)c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-c.overflowOffset.top<
b.scrollSensitivity&&(c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop-b.scrollSpeed);if(!b.axis||"y"!=b.axis)c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity?c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-c.overflowOffset.left<b.scrollSensitivity&&(c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft-b.scrollSpeed)}else{if(!b.axis||"x"!=b.axis)a.pageY-d(document).scrollTop()<b.scrollSensitivity?f=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity&&(f=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed));if(!b.axis||"y"!=b.axis)a.pageX-d(document).scrollLeft()<b.scrollSensitivity?f=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(f=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed))}!1!==f&&(d.ui.ddmanager&&!b.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(c,
a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("draggable"),c=a.options;a.snapElements=[];d(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var b=d(this),c=b.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(a,c){for(var b=d(this).data("draggable"),f=b.options,e=f.snapTolerance,h=c.offset.left,g=h+b.helperProportions.width,n=c.offset.top,
o=n+b.helperProportions.height,i=b.snapElements.length-1;0<=i;i--){var j=b.snapElements[i].left,l=j+b.snapElements[i].width,k=b.snapElements[i].top,m=k+b.snapElements[i].height;if(j-e<h&&h<l+e&&k-e<n&&n<m+e||j-e<h&&h<l+e&&k-e<o&&o<m+e||j-e<g&&g<l+e&&k-e<n&&n<m+e||j-e<g&&g<l+e&&k-e<o&&o<m+e){if("inner"!=f.snapMode){var p=Math.abs(k-o)<=e,q=Math.abs(m-n)<=e,r=Math.abs(j-g)<=e,s=Math.abs(l-h)<=e;p&&(c.position.top=b._convertPositionTo("relative",{top:k-b.helperProportions.height,left:0}).top-b.margins.top);
q&&(c.position.top=b._convertPositionTo("relative",{top:m,left:0}).top-b.margins.top);r&&(c.position.left=b._convertPositionTo("relative",{top:0,left:j-b.helperProportions.width}).left-b.margins.left);s&&(c.position.left=b._convertPositionTo("relative",{top:0,left:l}).left-b.margins.left)}var t=p||q||r||s;if("outer"!=f.snapMode&&(p=Math.abs(k-n)<=e,q=Math.abs(m-o)<=e,r=Math.abs(j-h)<=e,s=Math.abs(l-g)<=e,p&&(c.position.top=b._convertPositionTo("relative",{top:k,left:0}).top-b.margins.top),q&&(c.position.top=
b._convertPositionTo("relative",{top:m-b.helperProportions.height,left:0}).top-b.margins.top),r&&(c.position.left=b._convertPositionTo("relative",{top:0,left:j}).left-b.margins.left),s))c.position.left=b._convertPositionTo("relative",{top:0,left:l-b.helperProportions.width}).left-b.margins.left;!b.snapElements[i].snapping&&(p||q||r||s||t)&&b.options.snap.snap&&b.options.snap.snap.call(b.element,a,d.extend(b._uiHash(),{snapItem:b.snapElements[i].item}));b.snapElements[i].snapping=p||q||r||s||t}else b.snapElements[i].snapping&&
b.options.snap.release&&b.options.snap.release.call(b.element,a,d.extend(b._uiHash(),{snapItem:b.snapElements[i].item})),b.snapElements[i].snapping=!1}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options,a=d.makeArray(d(a.stack)).sort(function(a,c){return(parseInt(d(a).css("zIndex"),10)||0)-(parseInt(d(c).css("zIndex"),10)||0)});if(a.length){var c=parseInt(a[0].style.zIndex)||0;d(a).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+a.length}}});
d.ui.plugin.add("draggable","zIndex",{start:function(a,c){var b=d(c.helper),f=d(this).data("draggable").options;b.css("zIndex")&&(f._zIndex=b.css("zIndex"));b.css("zIndex",f.zIndex)},stop:function(a,c){var b=d(this).data("draggable").options;b._zIndex&&d(c.helper).css("zIndex",b._zIndex)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.sortable.js' */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){d.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,
b){"disabled"===a?(this.options[a]=b,this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){var c=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(a);var e=null,f=this;d(a.target).parents().each(function(){if(d.data(this,c.widgetName+"-item")==f)return e=d(this),!1});d.data(a.target,c.widgetName+"-item")==f&&(e=d(a.target));if(!e)return!1;if(this.options.handle&&
!b){var g=!1;d(this.options.handle,e).find("*").andSelf().each(function(){this==a.target&&(g=!0)});if(!g)return!1}this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,b,c){b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();b.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",b.cursor));b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!=
document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",a,this._uiHash(this));d.ui.ddmanager&&(d.ui.ddmanager.current=this);d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return!0},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var b=this.options,c=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-this.overflowOffset.top<
b.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed):(a.pageY-d(document).scrollTop()<b.scrollSensitivity?c=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity&&(c=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed)),a.pageX-d(document).scrollLeft()<b.scrollSensitivity?c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)));!1!==c&&(d.ui.ddmanager&&!b.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=
this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;0<=b;b--){var c=this.items[b],e=c.item[0],f=this._intersectsWithPointer(c);if(f&&c.instance===this.currentContainer&&e!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?
!d.ui.contains(this.element[0],e):1)){this.direction=1==f?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=
this,e=c.placeholder.offset();c.reverting=!0;d(this.helper).animate({left:e.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&(this.helper&&
this.helper[0].parentNode)&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||{};d(b).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?
b[1]:b[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,f=d+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,j=i+a.height,k=this.offset.click.top,l=this.offset.click.left;return"pointer"==this.options.tolerance||
this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?d+k>i&&d+k<j&&b+l>g&&b+l<h:g<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<d+this.helperProportions.height/2&&f-this.helperProportions.height/2<j},_intersectsWithPointer:function(a){var b="x"===this.options.axis||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),a="y"===this.options.axis||
d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),b=b&&a,a=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return!b?!1:this.floating?c&&"right"==c||"down"==a?2:1:a&&("down"==a?2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();
return this.floating&&e?"right"==e&&a||"left"==e&&!a:c&&("down"==c&&b||"up"==c&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:
a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();if(e&&a)for(a=e.length-1;0<=a;a--)for(var f=d(e[a]),g=f.length-1;0<=g;g--){var h=d.data(f[g],this.widgetName);h&&(h!=this&&!h.options.disabled)&&c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):
d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;0<=a;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?
this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;0<=f;f--)for(var g=d(e[f]),h=g.length-1;0<=h;h--){var i=d.data(g[h],this.widgetName);i&&(i!=this&&!i.options.disabled)&&(c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]),this.containers.push(i))}for(f=c.length-1;0<=f;f--){a=c[f][1];e=c[f][0];h=0;for(g=
e.length;h<g;h++)i=d(e[h]),i.data(this.widgetName+"-item",a),b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var b=this.items.length-1;0<=b;b--){var c=this.items[b];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;a||(c.width=e.outerWidth(),c.height=
e.outerHeight());e=e.offset();c.left=e.left;c.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;0<=b;b--)e=this.containers[b].element.offset(),this.containers[b].containerCache.left=e.left,this.containers[b].containerCache.top=e.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();
return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var a=d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];e||(a.style.visibility="hidden");return a},update:function(a,d){if(!e||c.forcePlaceholderSize)d.height()||d.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||
0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=null,c=null,e=this.containers.length-1;0<=e;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!b||
!d.ui.contains(this.containers[e].element[0],b.element[0]))b=this.containers[e],c=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",a,this._uiHash(this)),this.containers[e].containerCache.over=0);if(b)if(1===this.containers.length)this.containers[c]._trigger("over",a,this._uiHash(this)),this.containers[c].containerCache.over=1;else if(this.currentContainer!=this.containers[c]){for(var b=1E4,e=null,f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-
1;0<=g;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.containers[c].floating?this.items[g].item.offset().left:this.items[g].item.offset().top;Math.abs(h-f)<b&&(b=Math.abs(h-f),e=this.items[g],this.direction=0<h-f?"down":"up")}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[c],e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[c].element,!0),this._trigger("change",a,this._uiHash()),this.containers[c]._trigger("change",a,
this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",a,this._uiHash(this)),this.containers[c].containerCache.over=1}},_createHelper:function(a){var b=this.options,a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"==b.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||d("parent"!=b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]==this.currentItem[0]&&
(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==a[0].style.width||b.forceHelperSize)&&a.width(this.currentItem.width());(""==a[0].style.height||b.forceHelperSize)&&a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&
(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))&&
(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),
10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=
this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d("document"==a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(d("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=
d(a.containment)[0],a=d(a.containment).offset(),c="hidden"!=d(b).css("overflow");this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-
this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"==a?1:-1,e="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+
this.offset.relative.top*c+this.offset.parent.top*c-(d.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*c),left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-(d.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*c)}},_generatePosition:function(a){var b=this.options,c="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);"relative"==this.cssPosition&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=a.pageX,g=a.pageY;if(this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),
a.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),b.grid))g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1],g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g,f=this.originalPageX+Math.round((f-
this.originalPageX)/b.grid[0])*b.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f;return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+
(d.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==f.counter&&f.refreshPositions(!d)},0)},_clear:function(a,b){this.reverting=!1;var c=[];!this._noFinalSort&&
this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||
this.domPosition.parent!=this.currentItem.parent()[0])&&!b&&c.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&!b&&(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;0<=e;e--)b||c.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",
a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});d.extend(d.ui.sortable,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-jquery-jquery-hotkeys', location = 'src/js/jquery/jquery.hotkeys.js' */
("undefined"===typeof window?global:window).__9cbbcefe7921e79cef26a868d04e53e6=function(){"use strict";var a=jQuery,c=function(a){this.num=0;this.timer=0<a?a:!1},k=function(h){if(a.isPlainObject(h.data)||a.isArray(h.data)||"string"===typeof h.data){var i=h.handler,g={timer:700,combo:[]},b=h.data;"string"===typeof b?g.combo=[b]:a.isArray(b)?g.combo=b:a.extend(g,b);g.combo=a.map(g.combo,function(a){return a.toLowerCase()});h.index=new c(g.timer);h.handler=function(d){if(!(this!==d.target&&(/textarea|select|input/i.test(d.target.nodeName)||
"true"===a(d.target).prop("contenteditable")))){var e="keypress"!==d.type?a.hotkeys.specialKeys[d.which]:null,b=String.fromCharCode(d.which).toLowerCase(),f="",c={};d.altKey&&"alt"!==e&&(f+="alt+");d.ctrlKey&&"ctrl"!==e&&(f+="ctrl+");d.metaKey&&(!d.ctrlKey&&"meta"!==e)&&(f+="meta+");d.shiftKey&&"shift"!==e&&(f+="shift+");d.metaKey&&"["===b&&(b=null);e&&(c[f+e]=!0);b&&(c[f+b]=!0);/shift+/.test(f)&&(c[f.replace("shift+","")+a.hotkeys.shiftNums[e||b]]=!0);e=h.index;b=g.combo;if(j(b[e.val()],c)){if(e.val()===
b.length-1)return e.reset(),i.apply(this,arguments);e.inc()}else e.reset(),j(b[0],c)&&e.inc()}}}},j=function(a,c){for(var g=a.split(" "),b=0,d=g.length;b<d;b++)if(c[g[b]])return!0;return!1};a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",
103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta",219:"[",221:"]"},keypressKeys:["<",">","?"],shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(a.hotkeys.keypressKeys,function(c,i){a.hotkeys.shiftNums[i]=i});c.prototype.val=
function(){return this.num};c.prototype.inc=function(){this.timer&&(clearTimeout(this.timeout),this.timeout=setTimeout(a.proxy(c.prototype.reset,this),this.timer));this.num++};c.prototype.reset=function(){this.timer&&clearTimeout(this.timeout);this.num=0};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:k}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-jquery-jquery-moveto', location = 'src/js/jquery/jquery.moveto.js' */
("undefined"===typeof window?global:window).__c97e1197b9a36f8a538d0a5bc4856def=function(){"use strict";jQuery.fn.moveTo=function(a){var a=jQuery.extend({transition:!1,scrollOffset:35},a),c=this,b=c.offset().top;if((jQuery(window).scrollTop()+jQuery(window).height()-this.outerHeight()<b||jQuery(window).scrollTop()+a.scrollOffset>b)&&jQuery(window).height()>a.scrollOffset){b=jQuery(window).scrollTop()+a.scrollOffset>b?b-(jQuery(window).height()-this.outerHeight())+a.scrollOffset:b-a.scrollOffset;if(!jQuery.fn.moveTo.animating&&
a.transition)return jQuery(document).trigger("moveToStarted",this),jQuery.fn.moveTo.animating=!0,jQuery("html,body").animate({scrollTop:b},1E3,function(){jQuery(document).trigger("moveToFinished",c);delete jQuery.fn.moveTo.animating}),this;a=jQuery("html, body");a.is(":animated")&&(a.stop(),delete jQuery.fn.moveTo.animating);jQuery(document).trigger("moveToStarted");jQuery(window).scrollTop(b);setTimeout(function(){jQuery(document).trigger("moveToFinished",c)},100);return this}jQuery(document).trigger("moveToFinished",
this);return this};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-when-i-type', location = 'src/js/aui/when-i-type.js' */
("undefined"===typeof window?global:window).__dd5c235fc113ca31324f52b77811a4b6=function(){function o(c){return c&&c.__esModule?c:{"default":c}}function m(c){function i(a){!u.popup.current&&h&&h.fire(a)}function e(a){a.preventDefault()}function g(a){(a&&a.split?f.default.trim(a).split(" "):[a]).forEach(function(d){if(!(d instanceof Array)){for(var d=d.toString(),b=[],l="";d.length;){var a=d.match(/^(ctrl|meta|shift|alt)\+/i),c=d.match(v);a?(l+=a[0],d=d.substring(a[0].length)):(c?(b.push(l+c[0]),d=
d.substring(c[0].length)):(b.push(l+d[0]),d=d.substring(1)),l="")}d=b}a:{for(b=d.length;b--;)if(1<d[b].length&&"space"!==d[b]){b=!0;break a}b=!1}b=b?"keydown":"keypress";k.push(d);(0,f.default)(document).bind(b,d,i);(0,f.default)(document).bind(b+" keyup",d,e)})}function j(a,d,b){b?d+=" ("+AJS.format("Type \u0027\u0027{0}\u0027\u0027",a.shift()):(d=d.replace(/\)$/,""),d+=AJS.format("OR \u0027\u0027{0}\u0027\u0027",a.shift()));a.forEach(function(b){d=d+(" "+AJS.format("then \u0027\u0027{0}\u0027\u0027",
b))});return d+=")"}var k=[],h=f.default.Callbacks();g(c);return m.makeShortcut({executor:h,bindKeys:g,addShortcutsToTitle:function(a){for(var a=(0,f.default)(a),d=a.attr("title")||"",b=k.slice(),l=a.data("boundKeyCombos")||[],c=a.data("kbShortcutAppended")||"",e=!c,d=e?d:d.substring(0,d.length-c.length);b.length;){var i=b.shift();l.some(function(b){return w.default.isEqual(i,b)})||(c=j(i.slice(),c,e),e=!1)}s&&(c=c.replace(/Meta/ig,"\u2318").replace(/Shift/ig,"\u21e7"));a.attr("title",d+c);a.data("kbShortcutAppended",
c);a.data("boundKeyCombos",l.concat(k))},removeShortcutsFromTitle:function(a){var a=(0,f.default)(a),d=a.data("kbShortcutAppended");if(d){var b=a.attr("title");a.attr("title",b.replace(d,""));a.removeData("kbShortcutAppended");a.removeData("boundKeyCombos")}},keypressHandler:i,defaultPreventionHandler:e})}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});var f=o(__bd7207540b95ff683caa1d3c0bfcc3d7);__9cbbcefe7921e79cef26a868d04e53e6;__c97e1197b9a36f8a538d0a5bc4856def;var q;var g=
__2f5c294b01e66b15309518e39bcb949d;if(g&&g.__esModule)q=g;else{var r={};if(null!=g)for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(r[n]=g[n]);r.default=g;q=r}var u=__aa116fc0f3815f1a600215af3b7b5390;n=o(__9a668cbde1e182d8e721c23580356df2);var x=__02837eb0ab28736e09825f2207c8fe9b,y=o(__3f6f6650e96d80fefaaf71feed8f822b),w=o(__b8debe7dbacd8c0f9a68380b427aca10),s=-1!==navigator.platform.indexOf("Mac"),z=-1!==navigator.userAgent.indexOf("Safari"),v=/^(backspace|tab|r(ight|eturn)|s(hift|pace|croll)|c(trl|apslock)|alt|pa(use|ge(up|down))|e(sc|nd)|home|left|up|d(el|own)|insert|f\d\d?|numlock|meta)/i,
t=function(c){var f=c[0];f&&"MouseEvent"in window?(c=void 0,(0,x.supportsNewMouseEvent)()?c=new MouseEvent("click",{bubbles:!0,cancelable:!0}):(c=document.createEvent("MouseEvent"),c.initEvent("click",!0,!0)),f.dispatchEvent(c)):c.trigger("click")};m.makeShortcut=function(c){function i(b){return function(d,a){var a=a||{},c=a.focusedClass||"focused",i=a.hasOwnProperty("wrapAround")?a.wrapAround:!0,g=a.hasOwnProperty("escToCancel")?a.escToCancel:!0;e.add(function(){var a=(0,f.default)(d),e=a.filter("."+
c),h=0===e.length?void 0:{transition:!0};if(g)(0,f.default)(document).one("keydown",function(b){b.keyCode===y.default.ESCAPE&&e&&e.removeClass(c)});e.length&&e.removeClass(c);if((e=b(e,a,i))&&0<e.length)e.addClass(c),e.moveTo(h),e.is("a")?e.focus():e.find("a:first").focus()});return this}}var e=c.executor,g=c.bindKeys,j=c.addShortcutsToTitle,k=c.removeShortcutsFromTitle,h=c.keypressHandler,a=c.defaultPreventionHandler,d=[];return{moveToNextItem:i(function(b,a,d){var c;if(d&&0===b.length)return a.eq(0);
c=f.default.inArray(b.get(0),a);return c<a.length-1?a.eq(c+1):d?a.eq(0):b}),moveToPrevItem:i(function(b,a,d){var c;if(d&&0===b.length)return a.filter(":last");c=f.default.inArray(b.get(0),a);return 0<c?a.eq(c-1):d?a.filter(":last"):b}),click:function(b){d.push(b);j(b);e.add(function(){var a=(0,f.default)(b);t(a)});return this},goTo:function(b){e.add(function(){window.location.href=b});return this},followLink:function(b){d.push(b);j(b);e.add(function(){var a=(0,f.default)(b)[0];a&&{a:!0,link:!0}[a.nodeName.toLowerCase()]&&
(window.location.href=a.href)});return this},execute:function(b){var a=this;e.add(function(){b.apply(a,arguments)});return this},evaluate:function(b){b.call(this)},moveToAndClick:function(b){d.push(b);j(b);e.add(function(){var a=(0,f.default)(b);0<a.length&&(t(a),a.moveTo())});return this},moveToAndFocus:function(a){d.push(a);j(a);e.add(function(d){var c=(0,f.default)(a);0<c.length&&(c.focus(),c.moveTo&&c.moveTo(),c.is(":input")&&d.preventDefault())});return this},or:function(a){g(a);return this},
unbind:function(){(0,f.default)(document).unbind("keydown keypress",h).unbind("keydown keypress keyup",a);for(var b=0,c=d.length;b<c;b++)k(d[b]);d=[]}}};m.fromJSON=function(c,g){var e=[];c&&f.default.each(c,function(c,j){var k=j.op,h=j.param,a=void 0;if("execute"===k||"evaluate"===k)a=[new Function(h)];else if(/^\[[^\]\[]*,[^\]\[]*\]$/.test(h)){try{a=JSON.parse(h)}catch(d){q.error("When using a parameter array, array must be in strict JSON format: "+h)}f.default.isArray(a)||q.error("Badly formatted shortcut parameter. String or JSON Array of parameters required: "+
h)}else a=[h];f.default.each(j.keys,function(){var b=this;g&&s&&(b=f.default.map(b,function(a){return a.replace(/ctrl/i,"meta")}));b=m(b);b[k].apply(b,a);e.push(b)})});return e};(0,f.default)(document).bind("iframeAppended",function(c,g){(0,f.default)(g).load(function(){(0,f.default)(g).contents().bind("keyup keydown keypress",function(c){z&&"keypress"===c.type||(0,f.default)(c.target).is(":input")||f.default.event.trigger(c,arguments,document,!0)})})});(0,n.default)("whenIType",m);p.default=m;return p=
p["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-cookie', location = 'src/js/aui/cookie.js' */
("undefined"===typeof window?global:window).__a05104f0c9031fbd185c4b3e45f00b0d=function(){function l(a){a=RegExp("\\b"+a.replace(i,"\\$&")+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)");return(a=document.cookie.match(a))&&a[1].replace(o,"")}function j(a,f,c){var d=l(k),b=RegExp("(\\s|\\|)*\\b"+a.replace(i,"\\$&")+"=[^|]*[|]*"),d=(d||"").replace(b,"|");""!==f&&(a=a+"="+f,4020>d.length+a.length&&(d+="|"+a));d=d.replace(p,"|");a=k;c=c||365;f="";d='"'+d.replace(q,'\\"')+'"';c&&(f=new Date,f.setTime(+f+864E5*c),f=
"; expires="+f.toGMTString());document.cookie=a+"="+d+f+";path=/"}function m(a,b){var c;c=(c=l(k))||"";var d=RegExp(a.replace(i,"\\$&")+"=([^|]+)");c=(c=c.match(d))&&c[1];return null!=c?c:b}function n(a){j(a,"")}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.save=g.read=g.erase=void 0;var b;b=__c88c0dc6258c37804917fb6a0e4092fa;if(!b||!b.__esModule){var e={};if(null!=b)for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(e[h]=b[h]);e.default=b;b=e}var e=(e=__9a668cbde1e182d8e721c23580356df2)&&
e.__esModule?e:{"default":e},k="AJS.conglomerate.cookie",o=/(\\|^"|"$)/g,p=/\|\|+/g,q=/"/g,i=/[.*+?|^$()[\]{\\]/g;h={erase:n,read:m,save:j};(0,e.default)("cookie",h);(0,e.default)("Cookie",h);b.prop(AJS,"Cookie",{alternativeName:"cookie",sinceVersion:"5.8.0"});g.erase=n;g.read=m;g.save=j;return g}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.os.js' */
("undefined"===typeof window?global:window).__ca20c4650d99e267521ed54b29527012=function(){"use strict";jQuery.os={};var a=navigator.platform.toLowerCase();jQuery.os.windows=-1!=a.indexOf("win");jQuery.os.mac=-1!=a.indexOf("mac");jQuery.os.linux=-1!=a.indexOf("linux");return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js-vendor/jquery/plugins/jquery.form.js' */
(function(b){function m(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}b.fn.ajaxSubmit=function(a){function f(){function d(){var a=j.attr("target"),k=j.attr("action");c.setAttribute("target",f);"POST"!=c.getAttribute("method")&&c.setAttribute("method","POST");c.getAttribute("action")!=e.url&&c.setAttribute("action",e.url);e.skipEncodingOverride||
j.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&setTimeout(function(){s=!0;g()},e.timeout);var l=[];try{if(e.extraData)for(var m in e.extraData)l.push(b('<input type="hidden" name="'+m+'" value="'+e.extraData[m]+'" />').appendTo(c)[0]);i.appendTo("body");h.attachEvent?h.attachEvent("onload",g):h.addEventListener("load",g,!1);c.submit()}finally{c.setAttribute("action",k),a?c.setAttribute("target",a):j.removeAttr("target"),b(l).remove()}}function g(){if(!k.aborted){var a=
h.contentWindow?h.contentWindow.document:h.contentDocument?h.contentDocument:h.document;if(a&&a.location.href!=e.iframeSrc){h.detachEvent?h.detachEvent("onload",g):h.removeEventListener("load",g,!1);var d=!0;try{if(s)throw"timeout";var c="xml"==e.dataType||a.XMLDocument||b.isXMLDoc(a);m("isXml="+c);if(!c&&(window.opera&&(null==a.body||""==a.body.innerHTML))&&--w){m("requeing onLoad callback, DOM not available");setTimeout(g,250);return}k.responseText=a.body?a.body.innerHTML:a.documentElement?a.documentElement.innerHTML:
null;k.responseXML=a.XMLDocument?a.XMLDocument:a;k.getResponseHeader=function(a){return{"content-type":e.dataType}[a]};var f=/(json|script)/.test(e.dataType);if(f||e.textarea){var j=a.getElementsByTagName("textarea")[0];if(j)k.responseText=j.value;else if(f){var o=a.getElementsByTagName("pre")[0],q=a.getElementsByTagName("body")[0];o?k.responseText=o.textContent:q&&(k.responseText=q.innerHTML)}}else"xml"==e.dataType&&(!k.responseXML&&null!=k.responseText)&&(k.responseXML=x(k.responseText));var a=
k,p=e.dataType,c=e,t=a.getResponseHeader("content-type")||"",u="xml"===p||!p&&0<=t.indexOf("xml"),n=u?a.responseXML:a.responseText;u&&"parsererror"===n.documentElement.nodeName&&b.error&&b.error("parsererror");c&&c.dataFilter&&(n=c.dataFilter(n,p));"string"===typeof n&&("json"===p||!p&&0<=t.indexOf("json")?n=y(n):("script"===p||!p&&0<=t.indexOf("javascript"))&&b.globalEval(n));v=n}catch(r){m("error caught:",r),d=!1,k.error=r,e.error&&e.error.call(e.context,k,"error",r),l&&b.event.trigger("ajaxError",
[k,e,r])}k.aborted&&(m("upload aborted"),d=!1);d&&(e.success&&e.success.call(e.context,v,"success",k),l&&b.event.trigger("ajaxSuccess",[k,e]));l&&b.event.trigger("ajaxComplete",[k,e]);l&&!--b.active&&b.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,k,d?"success":"error");setTimeout(function(){i.removeData("form-plugin-onload");i.remove();k.responseXML=null},100)}}}var c=j[0];if(b(":input[name=submit],:input[id=submit]",c).length)alert('Error: Form elements must not have name or id of "submit".');
else{var e=b.extend(!0,{},b.ajaxSettings,a);e.context=e.context||e;var f="jqFormIO"+(new Date).getTime(),i=b('<iframe id="'+f+'" name="'+f+'" src="'+e.iframeSrc+'" />'),h=i[0];i.css({position:"absolute",top:"-1000px",left:"-1000px"});var k={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){m("aborting upload...");this.aborted=1;i.attr("src",e.iframeSrc);k.error="aborted";
e.error&&e.error.call(e.context,k,"error","aborted");l&&b.event.trigger("ajaxError",[k,e,"aborted"]);e.complete&&e.complete.call(e.context,k,"error")}},l=e.global;l&&!b.active++&&b.event.trigger("ajaxStart");l&&b.event.trigger("ajaxSend",[k,e]);if(e.beforeSend&&!1===e.beforeSend.call(e.context,k,e))e.global&&b.active--;else if(!k.aborted){var s=0,o=c.clk;if(o){var q=o.name;q&&!o.disabled&&(e.extraData=e.extraData||{},e.extraData[q]=o.value,"image"==o.type&&(e.extraData[q+".x"]=c.clk_x,e.extraData[q+
".y"]=c.clk_y))}e.forceSync?d():setTimeout(d,10);var v,w=50,x=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},y=b.parseJSON||function(a){return window.eval("("+a+")")}}}}if(!this.length)return m("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var c=
this.attr("action");(c="string"===typeof c?b.trim(c):"")&&(c=(c.match(/^([^#]+)/)||[])[1]);c=c||window.location.href||"";a=b.extend(!0,{url:c,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);c={};this.trigger("form-pre-serialize",[this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return m("ajaxSubmit: submit aborted via beforeSerialize callback"),
this;var d,g,i=this.formToArray(a.semantic);if(a.data)for(d in a.extraData=a.data,a.data)if(a.data[d]instanceof Array)for(var h in a.data[d])i.push({name:d,value:a.data[d][h]});else g=a.data[d],g=b.isFunction(g)?g():g,i.push({name:d,value:g});if(a.beforeSubmit&&!1===a.beforeSubmit(i,this,a))return m("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[i,this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;d=b.param(i);
"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+d,a.data=null):a.data=d;var j=this,l=[];a.resetForm&&l.push(function(){j.resetForm()});a.clearForm&&l.push(function(){j.clearForm()});if(!a.dataType&&a.target){var s=a.success||function(){};l.push(function(d){var c=a.replaceTarget?"replaceWith":"html";b(a.target)[c](d).each(s,arguments)})}else a.success&&l.push(a.success);a.success=function(b,d,c){for(var e=a.context||a,g=0,f=l.length;g<f;g++)l[g].apply(e,[b,d,c||j,j])};d=0<b("input:file",
this).length;h="multipart/form-data"==j.attr("enctype")||"multipart/form-data"==j.attr("encoding");!1!==a.iframe&&(d||a.iframe||h)?a.closeKeepAlive?b.get(a.closeKeepAlive,f):f():b.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){if(0===this.length){var f=this.selector,c=this.context;if(!b.isReady&&f)return m("DOM not ready, queuing ajaxForm"),b(function(){b(f,c).ajaxForm(a)}),this;m("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));
return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.isDefaultPrevented()||(d.preventDefault(),b(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var c=a.target,f=b(c);if(!f.is(":submit,input:image")){c=f.closest(":submit");if(0==c.length)return;c=c[0]}var h=this;h.clk=c;"image"==c.type&&(void 0!=a.offsetX?(h.clk_x=a.offsetX,h.clk_y=a.offsetY):"function"==typeof b.fn.offset?(f=f.offset(),h.clk_x=a.pageX-f.left,h.clk_y=a.pageY-f.top):(h.clk_x=a.pageX-c.offsetLeft,
h.clk_y=a.pageY-c.offsetTop));setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a){var f=[];if(0===this.length)return f;var c=this[0],d=a?c.getElementsByTagName("*"):c.elements;if(!d)return f;var g,i,h,j,l,m;g=0;for(l=d.length;g<l;g++)if(i=d[g],h=i.name)if(a&&c.clk&&"image"==i.type)!i.disabled&&c.clk==i&&(f.push({name:h,value:b(i).val()}),f.push({name:h+".x",value:c.clk_x},
{name:h+".y",value:c.clk_y}));else if((j=b.fieldValue(i,!0))&&j.constructor==Array){i=0;for(m=j.length;i<m;i++)f.push({name:h,value:j[i]})}else null!==j&&"undefined"!=typeof j&&f.push({name:h,value:j});if(!a&&c.clk&&(a=b(c.clk),d=a[0],(h=d.name)&&!d.disabled&&"image"==d.type))f.push({name:h,value:a.val()}),f.push({name:h+".x",value:c.clk_x},{name:h+".y",value:c.clk_y});return f};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var f=[];this.each(function(){var c=
this.name;if(c){var d=b.fieldValue(this,a);if(d&&d.constructor==Array)for(var g=0,i=d.length;g<i;g++)f.push({name:c,value:d[g]});else null!==d&&"undefined"!=typeof d&&f.push({name:this.name,value:d})}});return b.param(f)};b.fn.fieldValue=function(a){for(var f=[],c=0,d=this.length;c<d;c++){var g=b.fieldValue(this[c],a);null===g||("undefined"==typeof g||g.constructor==Array&&!g.length)||(g.constructor==Array?b.merge(f,g):f.push(g))}return f};b.fieldValue=function(a,f){var c=a.name,d=a.type,g=a.tagName.toLowerCase();
void 0===f&&(f=!0);if(f&&(!c||a.disabled||"reset"==d||"button"==d||("checkbox"==d||"radio"==d)&&!a.checked||("submit"==d||"image"==d)&&a.form&&a.form.clk!=a||"select"==g&&-1==a.selectedIndex))return null;if("select"==g){var i=a.selectedIndex;if(0>i)return null;for(var c=[],g=a.options,h=(d="select-one"==d)?i+1:g.length,i=d?i:0;i<h;i++){var j=g[i];if(j.selected){var l=j.value;l||(l=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(d)return l;c.push(l)}}return c}return b(a).val()};
b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==b?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==b&&(this.selectedIndex=-1)})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};
b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var f=this.type;"checkbox"==f||"radio"==f?this.checked=a:"option"==this.tagName.toLowerCase()&&(f=b(this).parent("select"),a&&(f[0]&&"select-one"==f[0].type)&&f.find("option").selected(!1),this.selected=a)})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.is-dirty.js' */
jQuery.fn.isDirty=function(){var b,d=[];window.onbeforeunload=function(){var a=window.onbeforeunload;!1!==b&&jQuery.each(d,function(){if(this.initVal!==$(this).val())return b=!0,!1});if(b)return window.onbeforeunload=null,window.setTimeout(function(){jQuery(document).bind("mousemove",function(){window.onbeforeunload=a;jQuery(document).unbind("mousemove",arguments.callee)})},1E3),b=void 0,AJS.params.dirtyMessage||""};return function(a){function c(b){var a=jQuery(this);jQuery.fn.isDirty.fieldInFocus=
a;-1===jQuery.inArray(this,d)&&(this.initVal=a.val(),d.push(this),a.die(b.type,c))}if(0!==this.length)return jQuery(":not(:input)").live("click",function(){delete jQuery.fn.isDirty.fieldInFocus}),jQuery(":input[type != hidden]",this.selector).bind("keydown",c).bind("keypress",c).bind("click",c),jQuery(a.ignoreUnloadFromElems).live("mousedown",function(){b=!1}),this.each(function(){var a=this.onsubmit;this.onsubmit=function(){b=!1;if(a)return a.apply(this,arguments)};$(this).submit(function(){b=!1})}),
this}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.progressbar.js' */
(function(a){a.fn.progressBar=function(e,h){var f=a.extend({height:"1em",showPercentage:!0},h),b=this.attr("id")+"-incomplete-bar",c=this.attr("id")+"-complete-bar",g=this.attr("id")+"-percent-complete-text";if(0==a("#"+b).length){var d=a(document.createElement("div"));d.attr("id",b);d.css({width:"90%",border:"solid 1px #ccc","float":"left","margin-right":"0.5em"});d.addClass("progress-background-color");b=a(document.createElement("div"));b.attr("id",c);b.addClass("progress-fill-color");b.css({height:f.height,
width:e+"%"});c=a(document.createElement("span"));c.attr("id",g);c.addClass("percent-complete-text");c.html(e+"%");d.append(b);this.append(d);f.showPercentage&&this.append(c)}else a("#"+c).css("width",e+"%"),a("#"+g).html(e+"%")}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.selection.js' */
(function(e){document.selection?(e.fn.selection=function(d){var a=this[0];this.focus();if(!a)return!1;if(null==d)return document.selection.createRange().text;var c=a.scrollTop,b=document.selection.createRange();b.text=d;b.select();a.focus();a.scrollTop=c},e.fn.selectionRange=function(d,a){var c=this[0];this.focus();var b=document.selection.createRange();if(null==d){var e=this.val(),g=e.length,f=b.duplicate();f.moveToElementText(c);f.setEndPoint("StartToEnd",b);c=g-f.text.replace(/\u000D/g,"").length;
f.setEndPoint("StartToStart",b);b=g-f.text.replace(/\u000D/g,"").length;c!=b&&"\n"==e.charAt(c+1)&&(c+=1);return{end:c,start:b,text:e.substring(b,c),textBefore:e.substring(0,b),textAfter:e.substring(c)}}b.moveToElementText(c);b.collapse(!0);b.moveStart("character",d);b.moveEnd("character",a-d);b.select()}):(e.fn.selection=function(d){var a=this[0];if(!a)return!1;if(null==d)return a.setSelectionRange?a.value.substring(a.selectionStart,a.selectionEnd):!1;var c=a.scrollTop;if(a.setSelectionRange){var b=
a.selectionStart;a.value=a.value.substring(0,b)+d+a.value.substring(a.selectionEnd);a.selectionStart=b;a.selectionEnd=b+d.length}a.focus();a.scrollTop=c},e.fn.selectionRange=function(d,a){if(null==d){var c={start:this[0].selectionStart,end:this[0].selectionEnd},b=this.val();c.text=b.substring(c.start,c.end);c.textBefore=b.substring(0,c.start);c.textAfter=b.substring(c.end);return c}this[0].selectionStart=d;this[0].selectionEnd=a});e.fn.wrapSelection=function(d,a){this.selection(d+this.selection()+
(a||""))}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.throbber.js' */
jQuery.fn.throbber=function(d){var e=[],g={isLatentThreshold:100,minThrobberDisplay:200,loadingClass:"loading"};d(document).ajaxComplete(function(a,b){d(e).each(function(a){b===this.get(0)&&(this.hideThrobber(),e.splice(a,1))})});return function(a){var b,f,c=function(a,b){c.t=setTimeout(function(){clearTimeout(c.t);c.t=void 0;a()},b)},a=d.extend(g,a||{});if(!a.target)return this;f=jQuery(a.target);e.push(d.extend(this,{showThrobber:function(){c(function(){b||(f.addClass(a.loadingClass),c(function(){b&&
b()},a.minThrobberDisplay))},a.isLatentThreshold)},hideThrobber:function(){b=function(){f.removeClass(a.loadingClass);a.end&&a.end()};c.t||b()}}));this.showThrobber();return this}}(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/aui.soy' */
// This file was automatically generated from aui.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.renderExtraAttributes = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.extraAttributes) {
    if (Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]') {
      var attrList7 = soy.$$getMapKeys(opt_data.extraAttributes);
      var attrListLen7 = attrList7.length;
      for (var attrIndex7 = 0; attrIndex7 < attrListLen7; attrIndex7++) {
        var attrData7 = attrList7[attrIndex7];
        output += ' ' + soy.$$escapeHtml(attrData7) + '="' + soy.$$escapeHtml(opt_data.extraAttributes[attrData7]) + '"';
      }
    } else {
      output += ' ' + soy.$$filterNoAutoescape(opt_data.extraAttributes);
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.renderExtraAttributes.soyTemplateName = 'aui.renderExtraAttributes';
}


aui.renderExtraClasses = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.extraClasses) {
    if ((opt_data.extraClasses) instanceof Array) {
      var classList23 = opt_data.extraClasses;
      var classListLen23 = classList23.length;
      for (var classIndex23 = 0; classIndex23 < classListLen23; classIndex23++) {
        var classData23 = classList23[classIndex23];
        output += ' ' + soy.$$escapeHtml(classData23);
      }
    } else {
      output += ' ' + soy.$$escapeHtml(opt_data.extraClasses);
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.renderExtraClasses.soyTemplateName = 'aui.renderExtraClasses';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/badges.soy' */
// This file was automatically generated from badges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.badges.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.badges == 'undefined') { aui.badges = {}; }


aui.badges.badge = function(opt_data, opt_ignored) {
  return '<aui-badge' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</aui-badge>';
};
if (goog.DEBUG) {
  aui.badges.badge.soyTemplateName = 'aui.badges.badge';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/buttons.soy' */
// This file was automatically generated from buttons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.buttons.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.buttons == 'undefined') { aui.buttons = {}; }


aui.buttons.button = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.href || opt_data.href == '') {
    output += '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + aui.buttons.buttonAttributes(soy.$$augmentMap(opt_data, {tagName: 'a'})) + '>' + aui.buttons.buttonIcon(opt_data) + ((opt_data.hasLabel) ? '<span class="aui-button-label">' : '') + soy.$$escapeHtml(opt_data.text) + ((opt_data.hasLabel) ? '</span>' : '') + '</a>';
  } else if (opt_data.tagName == 'input') {
    output += '<input type="' + soy.$$escapeHtml(opt_data.inputType ? opt_data.inputType : 'button') + '" ' + aui.buttons.buttonAttributes(opt_data) + ' value="' + soy.$$escapeHtml(opt_data.text) + '" />';
  } else {
    var theTagName__soy29 = opt_data.tagName ? opt_data.tagName : 'button';
    output += '<' + soy.$$escapeHtml(theTagName__soy29) + aui.buttons.buttonAttributes(soy.$$augmentMap(opt_data, {tagName: theTagName__soy29})) + '>' + aui.buttons.buttonIcon(opt_data) + ((opt_data.hasLabel) ? '<span class="aui-button-label">' : '') + soy.$$escapeHtml(opt_data.text) + ((opt_data.hasLabel) ? '</span>' : '') + '</' + soy.$$escapeHtml(theTagName__soy29) + '>';
  }
  return output;
};
if (goog.DEBUG) {
  aui.buttons.button.soyTemplateName = 'aui.buttons.button';
}


aui.buttons.buttons = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-buttons' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.buttons.buttons.soyTemplateName = 'aui.buttons.buttons';
}


aui.buttons.buttonAttributes = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-button' + ((opt_data.splitButtonType == 'main') ? ' aui-button-split-main' : '') + ((opt_data.dropdown2Target) ? ' aui-dropdown2-trigger' + ((opt_data.splitButtonType == 'more') ? ' aui-button-split-more' : '') : '');
  switch (opt_data.type) {
    case 'primary':
      output += ' aui-button-primary';
      break;
    case 'link':
      output += ' aui-button-link';
      break;
    case 'subtle':
      output += ' aui-button-subtle';
      break;
    case 'text':
      output += ' aui-button-text';
      break;
  }
  output += aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.isPressed) ? ' aria-pressed="' + soy.$$escapeHtml(opt_data.isPressed) + '"' : '') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' + ((opt_data.isDisabled == true) ? (opt_data.tagName == 'button' || opt_data.tagName == 'input') ? ' disabled="disabled" ' : '' : '') : '') + ((opt_data.dropdown2Target) ? ' aria-owns="' + soy.$$escapeHtml(opt_data.dropdown2Target) + '" aria-haspopup="true"' : '') + ((opt_data.tagName == 'a') ? ' tabindex="0"' : '');
  return output;
};
if (goog.DEBUG) {
  aui.buttons.buttonAttributes.soyTemplateName = 'aui.buttons.buttonAttributes';
}


aui.buttons.buttonIcon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.iconType) ? '<span class="' + ((opt_data.iconType == 'aui') ? 'aui-icon' : '') + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) + ' ' : '') + '</span>' : '');
};
if (goog.DEBUG) {
  aui.buttons.buttonIcon.soyTemplateName = 'aui.buttons.buttonIcon';
}


aui.buttons.splitButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data.splitButtonMain, {splitButtonType: 'main'})) + aui.buttons.button(soy.$$augmentMap(opt_data.splitButtonMore, {splitButtonType: 'more'}));
};
if (goog.DEBUG) {
  aui.buttons.splitButton.soyTemplateName = 'aui.buttons.splitButton';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/dropdown.soy' */
// This file was automatically generated from dropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dropdown.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dropdown == 'undefined') { aui.dropdown = {}; }


aui.dropdown.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<a' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dd-trigger' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><span class="dropdown-text">' + ((opt_data.accessibilityText) ? soy.$$escapeHtml(opt_data.accessibilityText) : '') + '</span>' + ((! (opt_data.showIcon == false)) ? '<span class="icon icon-dropdown"></span>' : '') + '</a>';
};
if (goog.DEBUG) {
  aui.dropdown.trigger.soyTemplateName = 'aui.dropdown.trigger';
}


aui.dropdown.menu = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'ul') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown hidden' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'ul') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.menu.soyTemplateName = 'aui.dropdown.menu';
}


aui.dropdown.parent = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dd-parent' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.parent.soyTemplateName = 'aui.dropdown.parent';
}


aui.dropdown.item = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'li') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="dropdown-item' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a href="' + soy.$$escapeHtml(opt_data.url ? opt_data.url : '#') + '">' + soy.$$escapeHtml(opt_data.text) + '</a></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'li') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.item.soyTemplateName = 'aui.dropdown.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/dropdown2.soy' */
// This file was automatically generated from dropdown2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dropdown2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dropdown2 == 'undefined') { aui.dropdown2 = {}; }


aui.dropdown2.dropdown2 = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.trigger(soy.$$augmentMap(opt_data.trigger, {menu: opt_data.menu})) + aui.dropdown2.contents(opt_data.menu);
};
if (goog.DEBUG) {
  aui.dropdown2.dropdown2.soyTemplateName = 'aui.dropdown2.dropdown2';
}


aui.dropdown2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {extraClasses: 'aui-dropdown2-trigger' + aui.renderExtraClasses(opt_data)}));
};
if (goog.DEBUG) {
  aui.dropdown2.trigger.soyTemplateName = 'aui.dropdown2.trigger';
}


aui.dropdown2.contents = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2' + aui.renderExtraClasses(opt_data) + '" role="menu" aria-hidden="true"' + aui.renderExtraAttributes(opt_data) + '><div role="application">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div></div>';
};
if (goog.DEBUG) {
  aui.dropdown2.contents.soyTemplateName = 'aui.dropdown2.contents';
}


aui.dropdown2.section = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.label) ? '<strong role="presentation" class="aui-dropdown2-heading">' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.dropdown2.section.soyTemplateName = 'aui.dropdown2.section';
}


aui.dropdown2.itemGroup = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' role="presentation" class="aui-dropdown2-section' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.label) ? '<strong role="presentation" class="aui-dropdown2-heading">' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<div role="group"' + ((opt_data.label) ? ' aria-label="' + soy.$$escapeHtml(opt_data.label) + '"' : '') + '>' + aui.dropdown2.itemList(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  aui.dropdown2.itemGroup.soyTemplateName = 'aui.dropdown2.itemGroup';
}


aui.dropdown2.itemList = function(opt_data, opt_ignored) {
  var output = '<ul' + ((opt_data.isTruncated) ? ' class="aui-list-truncate"' : '') + ' role="presentation">';
  var itemList76 = opt_data.items;
  var itemListLen76 = itemList76.length;
  for (var itemIndex76 = 0; itemIndex76 < itemListLen76; itemIndex76++) {
    var itemData76 = itemList76[itemIndex76];
    output += '<li ' + ((itemData76.isHidden) ? 'class="aui-dropdown2-hidden" aria-hidden="true"' : '') + ' role="presentation">';
    switch (itemData76.itemType) {
      case 'checkbox':
        output += aui.dropdown2.menuCheckbox(itemData76);
        break;
      case 'radio':
        output += aui.dropdown2.menuRadio(itemData76);
        break;
      default:
        output += aui.dropdown2.menuLink(itemData76);
    }
    output += '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  aui.dropdown2.itemList.soyTemplateName = 'aui.dropdown2.itemList';
}


aui.dropdown2.menuLink = function(opt_data, opt_ignored) {
  return '<a role="menuitem" tabindex="-1" class="' + aui.renderExtraClasses(opt_data) + ((opt_data.submenuTarget) ? ' aui-dropdown2-sub-trigger' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + ((opt_data.submenuTarget) ? ' aria-controls="' + soy.$$escapeHtml(opt_data.submenuTarget) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuLink.soyTemplateName = 'aui.dropdown2.menuLink';
}


aui.dropdown2.menuCheckbox = function(opt_data, opt_ignored) {
  return '<span role="menuitemcheckbox" tabindex="-1" class="aui-dropdown2-checkbox' + ((opt_data.isInteractive) ? ' aui-dropdown2-interactive' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + ((opt_data.isChecked) ? ' aui-dropdown2-checked' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isChecked) ? ' aria-checked="' + soy.$$escapeHtml(opt_data.isChecked) + '"' : ' aria-checked="false"') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuCheckbox.soyTemplateName = 'aui.dropdown2.menuCheckbox';
}


aui.dropdown2.menuRadio = function(opt_data, opt_ignored) {
  return '<span role="menuitemradio" tabindex="-1" class="aui-dropdown2-radio' + ((opt_data.isInteractive) ? ' aui-dropdown2-interactive' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + ((opt_data.isChecked) ? ' aui-dropdown2-checked' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isChecked) ? ' aria-checked="' + soy.$$escapeHtml(opt_data.isChecked) + '"' : ' aria-checked="false"') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuRadio.soyTemplateName = 'aui.dropdown2.menuRadio';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/form.soy' */
// This file was automatically generated from form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.form.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.form == 'undefined') { aui.form = {}; }


aui.form.form = function(opt_data, opt_ignored) {
  return '<form' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui' + ((opt_data.isUnsectioned) ? ' unsectioned' : '') + ((opt_data.isLongLabels) ? ' long-label' : '') + ((opt_data.isTopLabels) ? ' top-label' : '') + aui.renderExtraClasses(opt_data) + '" action="' + soy.$$escapeHtml(opt_data.action) + '" method="' + soy.$$escapeHtml(opt_data.method ? opt_data.method : 'post') + '"' + ((opt_data.enctype) ? ' enctype="' + soy.$$escapeHtml(opt_data.enctype) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</form>';
};
if (goog.DEBUG) {
  aui.form.form.soyTemplateName = 'aui.form.form';
}


aui.form.formDescription = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.form.formDescription.soyTemplateName = 'aui.form.formDescription';
}


aui.form.fieldset = function(opt_data, opt_ignored) {
  var output = '';
  var hasClass__soy51 = opt_data.isInline || opt_data.isDateSelect || opt_data.isGroup || opt_data.extraClasses;
  output += '<fieldset' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((hasClass__soy51) ? ' class="' + soy.$$escapeHtml(opt_data.isInline ? 'inline' : opt_data.isDateSelect ? 'date-select' : opt_data.isGroup ? 'group' : '') + aui.renderExtraClasses(opt_data) + '"' : '') + aui.renderExtraAttributes(opt_data) + '><legend><span>' + soy.$$filterNoAutoescape(opt_data.legendContent) + '</span></legend>' + soy.$$filterNoAutoescape(opt_data.content) + '</fieldset>';
  return output;
};
if (goog.DEBUG) {
  aui.form.fieldset.soyTemplateName = 'aui.form.fieldset';
}


aui.form.fieldGroup = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldGroup.soyTemplateName = 'aui.form.fieldGroup';
}


aui.form.buttons = function(opt_data, opt_ignored) {
  return '<div class="buttons-container' + ((opt_data.alignment) ? ' ' + soy.$$escapeHtml(opt_data.alignment) : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><div class="buttons">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  aui.form.buttons.soyTemplateName = 'aui.form.buttons';
}


aui.form.label = function(opt_data, opt_ignored) {
  return '<label' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.forField) ? ' for="' + soy.$$escapeHtml(opt_data.forField) + '"' : '') + ((opt_data.extraClasses) ? ' class="' + aui.renderExtraClasses(opt_data) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label>';
};
if (goog.DEBUG) {
  aui.form.label.soyTemplateName = 'aui.form.label';
}


aui.form.input = function(opt_data, opt_ignored) {
  var output = '';
  var baseType__soy126 = '';
  switch (opt_data.type) {
    case 'password':
    case 'email':
    case 'url':
    case 'tel':
    case 'search':
      baseType__soy126 += 'text';
      break;
    case 'submit':
    case 'reset':
      baseType__soy126 += 'button';
      break;
    default:
      baseType__soy126 += soy.$$escapeHtml(opt_data.type);
  }
  output += '<input class="' + soy.$$escapeHtml(baseType__soy126) + aui.renderExtraClasses(opt_data) + ((opt_data.icon && baseType__soy126 == 'text') ? ' aui-field-has-icon' : '') + '" type="' + soy.$$escapeHtml(opt_data.type) + '" name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.value) ? ' value="' + soy.$$escapeHtml(opt_data.value) + '"' : '') + (((opt_data.type == 'checkbox' || opt_data.type == 'radio') && opt_data.isChecked) ? ' checked="checked"' : '') + ((baseType__soy126 == 'text' && opt_data.type != 'password' && opt_data.maxLength) ? ' maxlength="' + soy.$$escapeHtml(opt_data.maxLength) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.type != 'password' && opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.placeholderText) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholderText) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '/>' + ((opt_data.icon && baseType__soy126 == 'text') ? aui.icons.icon({icon: opt_data.icon, useIconFont: true, size: 'small'}) : '');
  return output;
};
if (goog.DEBUG) {
  aui.form.input.soyTemplateName = 'aui.form.input';
}


aui.form.renderValidationArguments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.validationArguments) {
    var argumentList203 = soy.$$getMapKeys(opt_data.validationArguments);
    var argumentListLen203 = argumentList203.length;
    for (var argumentIndex203 = 0; argumentIndex203 < argumentListLen203; argumentIndex203++) {
      var argumentData203 = argumentList203[argumentIndex203];
      output += (argumentData203 == 'required' || argumentData203 == 'pattern' || argumentData203 == 'min' || argumentData203 == 'max' || argumentData203 == 'minlength' || argumentData203 == 'maxlength') ? ' ' + soy.$$escapeHtml(argumentData203) + '="' + soy.$$escapeHtml(opt_data.validationArguments[argumentData203]) + '"' : ' ' + soy.$$escapeHtml('data-aui-validation-' + argumentData203) + '="' + soy.$$escapeHtml(opt_data.validationArguments[argumentData203]) + '"';
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.renderValidationArguments.soyTemplateName = 'aui.form.renderValidationArguments';
}


aui.form.renderTooltipArguments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.tooltipArguments) {
    var argumentList221 = soy.$$getMapKeys(opt_data.tooltipArguments);
    var argumentListLen221 = argumentList221.length;
    for (var argumentIndex221 = 0; argumentIndex221 < argumentListLen221; argumentIndex221++) {
      var argumentData221 = argumentList221[argumentIndex221];
      output += ' ' + soy.$$escapeHtml('data-aui-notification-' + argumentData221) + '="' + soy.$$escapeHtml(opt_data.tooltipArguments[argumentData221]) + '"';
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.renderTooltipArguments.soyTemplateName = 'aui.form.renderTooltipArguments';
}


aui.form.renderInfoMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.infoMessage) ? ' data-aui-notification-info="' + soy.$$escapeHtml(opt_data.infoMessage) + '"' : '');
};
if (goog.DEBUG) {
  aui.form.renderInfoMessage.soyTemplateName = 'aui.form.renderInfoMessage';
}


aui.form.renderFieldComponentAttribute = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.infoMessage) ? ' data-aui-notification-field' : '') + ((opt_data.validationArguments) ? ' data-aui-validation-field' : '');
};
if (goog.DEBUG) {
  aui.form.renderFieldComponentAttribute.soyTemplateName = 'aui.form.renderFieldComponentAttribute';
}


aui.form.submit = function(opt_data, opt_ignored) {
  return '' + aui.form.button(soy.$$augmentMap(opt_data, {tagName: 'input', inputType: 'submit'}));
};
if (goog.DEBUG) {
  aui.form.submit.soyTemplateName = 'aui.form.submit';
}


aui.form.button = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data, {extraClasses: opt_data.extraClasses, extraAttributes: '' + ((opt_data.name) ? 'name="' + soy.$$escapeHtml(opt_data.name) + '"' : '') + aui.renderExtraAttributes(opt_data)}));
};
if (goog.DEBUG) {
  aui.form.button.soyTemplateName = 'aui.form.button';
}


aui.form.linkButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data, {tagName: 'a', type: 'link', href: opt_data.href ? opt_data.href : opt_data.url, extraClasses: 'cancel' + aui.renderExtraClasses(opt_data), extraAttributes: '' + ((opt_data.name) ? 'name="' + soy.$$escapeHtml(opt_data.name) + '"' : '') + aui.renderExtraAttributes(opt_data)}));
};
if (goog.DEBUG) {
  aui.form.linkButton.soyTemplateName = 'aui.form.linkButton';
}


aui.form.textarea = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<textarea name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="textarea' + aui.renderExtraClasses(opt_data) + ' ' + ((opt_data.icon) ? 'aui-field-has-icon' : '') + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.rows) ? ' rows="' + soy.$$escapeHtml(opt_data.rows) + '"' : '') + ((opt_data.cols) ? ' cols="' + soy.$$escapeHtml(opt_data.cols) + '"' : '') + ((opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + ((opt_data.placeholderText) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholderText) + '"' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '>' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '</textarea>' + ((opt_data.icon) ? aui.icons.icon({icon: opt_data.icon, useIconFont: true, size: 'small'}) : '');
};
if (goog.DEBUG) {
  aui.form.textarea.soyTemplateName = 'aui.form.textarea';
}


aui.form.select = function(opt_data, opt_ignored) {
  var output = '<select' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'multi-select' : 'select') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + ((opt_data.isMultiple) ? ' multiple' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '>' + ((opt_data.defaultOption) ? aui.form.optionOrOptgroup(soy.$$augmentMap(opt_data.defaultOption, {defaultValue: opt_data.value})) : '');
  var optionList379 = opt_data.options;
  var optionListLen379 = optionList379.length;
  for (var optionIndex379 = 0; optionIndex379 < optionListLen379; optionIndex379++) {
    var optionData379 = optionList379[optionIndex379];
    output += aui.form.optionOrOptgroup(soy.$$augmentMap(optionData379, {defaultValue: opt_data.value}));
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  aui.form.select.soyTemplateName = 'aui.form.select';
}


aui.form.optionOrOptgroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.options) {
    output += '<optgroup label="' + soy.$$escapeHtml(opt_data.text) + '"' + ((opt_data.disabled) ? ' disabled' : '') + '>';
    var optionList394 = opt_data.options;
    var optionListLen394 = optionList394.length;
    for (var optionIndex394 = 0; optionIndex394 < optionListLen394; optionIndex394++) {
      var optionData394 = optionList394[optionIndex394];
      output += aui.form.optionOrOptgroup(soy.$$augmentMap(optionData394, {defaultValue: opt_data.defaultValue}));
    }
    output += '</optgroup>';
  } else {
    output += '<option value="' + soy.$$escapeHtml(opt_data.value) + '"' + ((opt_data.selected || opt_data.defaultValue == opt_data.value) ? ' selected' : '') + ((opt_data.disabled) ? ' disabled' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.optionOrOptgroup.soyTemplateName = 'aui.form.optionOrOptgroup';
}


aui.form.value = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-value' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</span>';
};
if (goog.DEBUG) {
  aui.form.value.soyTemplateName = 'aui.form.value';
}


aui.form.field = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var isCheckboxOrRadio__soy428 = opt_data.type == 'checkbox' || opt_data.type == 'radio';
  var fieldWidthClass__soy429 = opt_data.fieldWidth ? opt_data.fieldWidth + '-field ' : '';
  var fieldClasses__soy430 = fieldWidthClass__soy429 + (opt_data.extraFieldClasses ? opt_data.extraFieldClasses : '');
  output += '<div class="' + ((isCheckboxOrRadio__soy428) ? soy.$$escapeHtml(opt_data.type) : 'field-group') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.labelContent && ! isCheckboxOrRadio__soy428) ? aui.form.label({forField: opt_data.id, isRequired: opt_data.isRequired, content: opt_data.labelContent}) : '');
  switch (opt_data.type) {
    case 'textarea':
      output += aui.form.textarea({id: opt_data.id, name: opt_data.name, value: opt_data.value, rows: opt_data.rows, cols: opt_data.cols, autocomplete: opt_data.autocomplete, placeholderText: opt_data.placeholderText, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy430, icon: opt_data.icon, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
    case 'select':
      output += aui.form.select({id: opt_data.id, name: opt_data.name, value: opt_data.value, options: opt_data.options, isMultiple: opt_data.isMultiple, size: opt_data.size, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy430, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
    case 'value':
      output += aui.form.value({id: opt_data.id, content: '' + soy.$$escapeHtml(opt_data.value), extraClasses: fieldClasses__soy430});
      break;
    case 'text':
    case 'password':
    case 'email':
    case 'url':
    case 'tel':
    case 'search':
    case 'file':
    case 'radio':
    case 'checkbox':
    case 'button':
    case 'submit':
    case 'reset':
      output += aui.form.input({id: opt_data.id, name: opt_data.name, type: opt_data.type, value: opt_data.value, maxLength: opt_data.maxLength, size: opt_data.size, autocomplete: opt_data.autocomplete, placeholderText: opt_data.placeholderText, isChecked: opt_data.isChecked, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy430, icon: opt_data.icon, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
  }
  output += ((opt_data.labelContent && isCheckboxOrRadio__soy428) ? aui.form.label({forField: opt_data.id, isRequired: opt_data.isRequired, content: opt_data.labelContent}) : '') + ((opt_data.descriptionText || opt_data.descriptionContent) ? aui.form.fieldDescription({text: opt_data.descriptionText, content: opt_data.descriptionContent}) : '');
  if (opt_data.errorTexts) {
    var errorList516 = opt_data.errorTexts;
    var errorListLen516 = errorList516.length;
    for (var errorIndex516 = 0; errorIndex516 < errorListLen516; errorIndex516++) {
      var errorData516 = errorList516[errorIndex516];
      output += aui.form.fieldError({message: errorData516});
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  aui.form.field.soyTemplateName = 'aui.form.field';
}


aui.form.fieldError = function(opt_data, opt_ignored) {
  return '<div class="error' + aui.renderExtraClasses(opt_data) + '">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldError.soyTemplateName = 'aui.form.fieldError';
}


aui.form.fieldDescription = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="description' + aui.renderExtraClasses(opt_data) + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : (opt_data.message) ? soy.$$escapeHtml(opt_data.message) : soy.$$filterNoAutoescape(opt_data.content)) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldDescription.soyTemplateName = 'aui.form.fieldDescription';
}


aui.form.textField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'text'}));
};
if (goog.DEBUG) {
  aui.form.textField.soyTemplateName = 'aui.form.textField';
}


aui.form.textareaField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'textarea'}));
};
if (goog.DEBUG) {
  aui.form.textareaField.soyTemplateName = 'aui.form.textareaField';
}


aui.form.passwordField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'password'}));
};
if (goog.DEBUG) {
  aui.form.passwordField.soyTemplateName = 'aui.form.passwordField';
}


aui.form.fileField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'file'}));
};
if (goog.DEBUG) {
  aui.form.fileField.soyTemplateName = 'aui.form.fileField';
}


aui.form.selectField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'select'}));
};
if (goog.DEBUG) {
  aui.form.selectField.soyTemplateName = 'aui.form.selectField';
}


aui.form.checkboxField = function(opt_data, opt_ignored) {
  var param561 = '' + ((opt_data.isMatrix) ? '<div class="matrix">' : '');
  var fieldList565 = opt_data.fields;
  var fieldListLen565 = fieldList565.length;
  for (var fieldIndex565 = 0; fieldIndex565 < fieldListLen565; fieldIndex565++) {
    var fieldData565 = fieldList565[fieldIndex565];
    param561 += aui.form.field(soy.$$augmentMap(fieldData565, {type: 'checkbox', labelContent: '' + soy.$$escapeHtml(fieldData565.labelText), extraFieldClasses: opt_data.extraFieldClasses}));
  }
  param561 += ((opt_data.isMatrix) ? '</div>' : '') + ((opt_data.descriptionText || opt_data.descriptionContent || opt_data.errorTexts && opt_data.errorTexts.length) ? aui.form.field({descriptionText: opt_data.descriptionText, descriptionContent: opt_data.descriptionContent, errorTexts: opt_data.errorTexts, isDisabled: false}) : '');
  var output = '' + aui.form.fieldset({legendContent: opt_data.legendContent + (opt_data.isRequired ? '<span class="aui-icon icon-required"></span>' : ''), isGroup: true, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: param561});
  return output;
};
if (goog.DEBUG) {
  aui.form.checkboxField.soyTemplateName = 'aui.form.checkboxField';
}


aui.form.radioField = function(opt_data, opt_ignored) {
  var param589 = '' + ((opt_data.isMatrix) ? '<div class="matrix">' : '');
  var fieldList593 = opt_data.fields;
  var fieldListLen593 = fieldList593.length;
  for (var fieldIndex593 = 0; fieldIndex593 < fieldListLen593; fieldIndex593++) {
    var fieldData593 = fieldList593[fieldIndex593];
    param589 += aui.form.field(soy.$$augmentMap(fieldData593, {type: 'radio', name: opt_data.name ? opt_data.name : opt_data.id, labelContent: '' + soy.$$escapeHtml(fieldData593.labelText), extraFieldClasses: opt_data.extraFieldClasses}));
  }
  param589 += ((opt_data.isMatrix) ? '</div>' : '') + ((opt_data.descriptionText || opt_data.descriptionContent || opt_data.errorTexts && opt_data.errorTexts.length) ? aui.form.field({descriptionText: opt_data.descriptionText, descriptionContent: opt_data.descriptionContent, errorTexts: opt_data.errorTexts, isDisabled: false}) : '');
  var output = '' + aui.form.fieldset({legendContent: opt_data.legendContent + (opt_data.isRequired ? '<span class="aui-icon icon-required"></span>' : ''), isGroup: true, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: param589});
  return output;
};
if (goog.DEBUG) {
  aui.form.radioField.soyTemplateName = 'aui.form.radioField';
}


aui.form.valueField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'value'}));
};
if (goog.DEBUG) {
  aui.form.valueField.soyTemplateName = 'aui.form.valueField';
}


aui.form.emailField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'email'}));
};
if (goog.DEBUG) {
  aui.form.emailField.soyTemplateName = 'aui.form.emailField';
}


aui.form.urlField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'url'}));
};
if (goog.DEBUG) {
  aui.form.urlField.soyTemplateName = 'aui.form.urlField';
}


aui.form.telephoneField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'tel'}));
};
if (goog.DEBUG) {
  aui.form.telephoneField.soyTemplateName = 'aui.form.telephoneField';
}


aui.form.searchField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'search'}));
};
if (goog.DEBUG) {
  aui.form.searchField.soyTemplateName = 'aui.form.searchField';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/group.soy' */
// This file was automatically generated from group.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.group.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.group == 'undefined') { aui.group = {}; }


aui.group.group = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-group' + ((opt_data.isSplit) ? ' aui-group-split' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.group.group.soyTemplateName = 'aui.group.group';
}


aui.group.item = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-item' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.group.item.soyTemplateName = 'aui.group.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/labels.soy' */
// This file was automatically generated from labels.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.labels.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.labels == 'undefined') { aui.labels = {}; }


aui.labels.label = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url && opt_data.isCloseable == true) ? '<span' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-label aui-label-closeable aui-label-split' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a class="aui-label-split-main" href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a><span class="aui-label-split-close" >' + aui.labels.closeIcon(opt_data) + '</span></span>' : '<' + soy.$$escapeHtml(opt_data.url ? 'a' : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-label' + ((opt_data.isCloseable) ? ' aui-label-closeable' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.url) ? ' href="' + soy.$$escapeHtml(opt_data.url) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + ((opt_data.isCloseable) ? aui.labels.closeIcon(opt_data) : '') + '</' + soy.$$escapeHtml(opt_data.url ? 'a' : 'span') + '>');
};
if (goog.DEBUG) {
  aui.labels.label.soyTemplateName = 'aui.labels.label';
}


aui.labels.closeIcon = function(opt_data, opt_ignored) {
  return '<span tabindex="0" class="aui-icon aui-icon-close"' + ((opt_data.hasTitle != false) ? ' title="' + aui.labels.closeIconText(opt_data) + '"' : '') + '>' + aui.labels.closeIconText(opt_data) + '</span>';
};
if (goog.DEBUG) {
  aui.labels.closeIcon.soyTemplateName = 'aui.labels.closeIcon';
}


aui.labels.closeIconText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closeIconText) ? soy.$$escapeHtml(opt_data.closeIconText) : '(' + soy.$$escapeHtml("Remove") + ' ' + soy.$$escapeHtml(opt_data.text) + ')');
};
if (goog.DEBUG) {
  aui.labels.closeIconText.soyTemplateName = 'aui.labels.closeIconText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/message.soy' */
// This file was automatically generated from message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.message.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.message == 'undefined') { aui.message = {}; }


aui.message.info = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'info'}));
};
if (goog.DEBUG) {
  aui.message.info.soyTemplateName = 'aui.message.info';
}


aui.message.warning = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'warning'}));
};
if (goog.DEBUG) {
  aui.message.warning.soyTemplateName = 'aui.message.warning';
}


aui.message.error = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'error'}));
};
if (goog.DEBUG) {
  aui.message.error.soyTemplateName = 'aui.message.error';
}


aui.message.success = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'success'}));
};
if (goog.DEBUG) {
  aui.message.success.soyTemplateName = 'aui.message.success';
}


aui.message.hint = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'hint'}));
};
if (goog.DEBUG) {
  aui.message.hint.soyTemplateName = 'aui.message.hint';
}


aui.message.generic = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'generic'}));
};
if (goog.DEBUG) {
  aui.message.generic.soyTemplateName = 'aui.message.generic';
}


aui.message.message = function(opt_data, opt_ignored) {
  var output = '';
  var theTagName__soy21 = opt_data.tagName ? opt_data.tagName : 'div';
  var theType__soy22 = opt_data.type ? opt_data.type : 'generic';
  output += '<' + soy.$$escapeHtml(theTagName__soy21) + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-message aui-message-' + soy.$$escapeHtml(theType__soy22) + ' ' + soy.$$escapeHtml(theType__soy22) + ((opt_data.isCloseable) ? ' closeable' : '') + ((opt_data.isShadowed) ? ' shadowed' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.titleContent) ? '<p class="title"><strong>' + soy.$$filterNoAutoescape(opt_data.titleContent) + '</strong></p>' : '') + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.isCloseable) ? '<span class="aui-icon icon-close" role="button" tabindex="0"></span>' : '') + '</' + soy.$$escapeHtml(theTagName__soy21) + '>';
  return output;
};
if (goog.DEBUG) {
  aui.message.message.soyTemplateName = 'aui.message.message';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/page.soy' */
// This file was automatically generated from page.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.page.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.page == 'undefined') { aui.page = {}; }


aui.page.document = function(opt_data, opt_ignored, opt_ijData) {
  return '<!DOCTYPE html><html lang="' + soy.$$escapeHtml(opt_ijData.language ? opt_ijData.language : 'en') + '">' + aui.page.documentHTMLContent(opt_data, null, opt_ijData) + '</html>';
};
if (goog.DEBUG) {
  aui.page.document.soyTemplateName = 'aui.page.document';
}


aui.page.documentHTMLContent = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  var thePageSize__soy9 = opt_data.pageSize ? opt_data.pageSize : opt_data.focusedPageSize ? opt_data.focusedPageSize : 'xlarge';
  output += '<head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>' + soy.$$escapeHtml(opt_data.windowTitle) + '</title>' + ((opt_data.headContent) ? soy.$$filterNoAutoescape(opt_data.headContent) : '') + '</head><body' + ((opt_data.pageType) ? (opt_data.pageType == 'generic') ? (opt_data.extraClasses) ? ' class="' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : '' : (opt_data.pageType == 'focused') ? ' class="aui-page-focused aui-page-focused-' + soy.$$escapeHtml(thePageSize__soy9) + ' aui-page-size-' + soy.$$escapeHtml(thePageSize__soy9) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : (opt_data.pageType == 'notification') ? ' class="aui-page-notification aui-page-size-' + soy.$$escapeHtml(thePageSize__soy9) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : (opt_data.pageType == 'sidebar') ? ' class="aui-page-sidebar' + soy.$$escapeHtml(opt_data.sidebarState ? ' aui-sidebar-' + opt_data.sidebarState : '') + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : ' class="aui-page-' + soy.$$escapeHtml(opt_data.pageType) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : ' class="' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</body>';
  return output;
};
if (goog.DEBUG) {
  aui.page.documentHTMLContent.soyTemplateName = 'aui.page.documentHTMLContent';
}


aui.page.page = function(opt_data, opt_ignored, opt_ijData) {
  return '<div id="page"><header id="header" role="banner">' + soy.$$filterNoAutoescape(opt_data.headerContent) + '</header><!-- #header --><section id="content" role="main">' + soy.$$filterNoAutoescape(opt_data.contentContent) + '</section><!-- #content --><footer id="footer" role="contentinfo">' + soy.$$filterNoAutoescape(opt_data.footerContent) + '</footer><!-- #footer --></div><!-- #page -->';
};
if (goog.DEBUG) {
  aui.page.page.soyTemplateName = 'aui.page.page';
}


aui.page.header = function(opt_data, opt_ignored, opt_ijData) {
  return ((opt_data.bannerContent) ? '<div class="aui-banner aui-banner-error" role="banner">' + soy.$$filterNoAutoescape(opt_data.bannerContent) + '</div>' : '') + '<nav' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-header aui-dropdown2-trigger-group' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + aui.renderExtraAttributes(opt_data, null, opt_ijData) + ' role="navigation"><div class="aui-header-inner">' + ((opt_data.headerBeforeContent) ? '<div class="aui-header-before">' + soy.$$filterNoAutoescape(opt_data.headerBeforeContent) + '</div>' : '') + '<div class="aui-header-primary"><h1 id="logo" class="aui-header-logo' + ((opt_data.headerLogoImageUrl) ? ' aui-header-logo-custom' : (opt_data.logo) ? ' aui-header-logo-' + soy.$$escapeHtml(opt_data.logo) : '') + '"><a href="' + soy.$$escapeHtml(opt_data.headerLink ? opt_data.headerLink : '/') + '">' + ((opt_data.headerLogoImageUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.headerLogoImageUrl) + '" alt="' + soy.$$escapeHtml(opt_data.headerLogoText) + '" />' : '<span class="aui-header-logo-device">' + soy.$$escapeHtml(opt_data.headerLogoText ? opt_data.headerLogoText : '') + '</span>') + ((opt_data.headerText) ? '<span class="aui-header-logo-text">' + soy.$$escapeHtml(opt_data.headerText) + '</span>' : '') + '</a></h1>' + ((opt_data.primaryNavContent) ? soy.$$filterNoAutoescape(opt_data.primaryNavContent) : '') + '</div>' + ((opt_data.secondaryNavContent) ? '<div class="aui-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryNavContent) + '</div>' : '') + ((opt_data.headerAfterContent) ? '<div class="aui-header-after">' + soy.$$filterNoAutoescape(opt_data.headerAfterContent) + '</div>' : '') + '</div><!-- .aui-header-inner--></nav><!-- .aui-header -->';
};
if (goog.DEBUG) {
  aui.page.header.soyTemplateName = 'aui.page.header';
}


aui.page.pagePanel = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ' class="aui-page-panel' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '><div class="aui-page-panel-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-panel-inner --></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '><!-- .aui-page-panel -->';
};
if (goog.DEBUG) {
  aui.page.pagePanel.soyTemplateName = 'aui.page.pagePanel';
}


aui.page.pagePanelNav = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ' class="aui-page-panel-nav' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '><!-- .aui-page-panel-nav -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelNav.soyTemplateName = 'aui.page.pagePanelNav';
}


aui.page.pagePanelContent = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ' class="aui-page-panel-content' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '><!-- .aui-page-panel-content -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelContent.soyTemplateName = 'aui.page.pagePanelContent';
}


aui.page.pagePanelSidebar = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'aside') + ' class="aui-page-panel-sidebar' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'aside') + '><!-- .aui-page-panel-sidebar -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelSidebar.soyTemplateName = 'aui.page.pagePanelSidebar';
}


aui.page.pagePanelItem = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ' class="aui-page-panel-item' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '><!-- .aui-page-panel-item -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelItem.soyTemplateName = 'aui.page.pagePanelItem';
}


aui.page.pageHeader = function(opt_data, opt_ignored, opt_ijData) {
  return '<header class="aui-page-header' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '><div class="aui-page-header-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-inner --></header><!-- .aui-page-header -->';
};
if (goog.DEBUG) {
  aui.page.pageHeader.soyTemplateName = 'aui.page.pageHeader';
}


aui.page.pageHeaderImage = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-image' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-image -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderImage.soyTemplateName = 'aui.page.pageHeaderImage';
}


aui.page.pageHeaderMain = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-main' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-main -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderMain.soyTemplateName = 'aui.page.pageHeaderMain';
}


aui.page.pageHeaderActions = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-actions' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-actions -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderActions.soyTemplateName = 'aui.page.pageHeaderActions';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/panel.soy' */
// This file was automatically generated from panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.panel = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-panel' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.panel.soyTemplateName = 'aui.panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/table.soy' */
// This file was automatically generated from table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.table = function(opt_data, opt_ignored) {
  return '<table' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.columnsContent) ? soy.$$filterNoAutoescape(opt_data.columnsContent) : '') + ((opt_data.captionContent) ? '<caption>' + soy.$$filterNoAutoescape(opt_data.captionContent) + '</caption>' : '') + ((opt_data.theadContent) ? '<thead>' + soy.$$filterNoAutoescape(opt_data.theadContent) + '</thead>' : '') + ((opt_data.tfootContent) ? '<tfoot>' + soy.$$filterNoAutoescape(opt_data.tfootContent) + '</tfoot>' : '') + ((! opt_data.contentIncludesTbody) ? '<tbody>' : '') + soy.$$filterNoAutoescape(opt_data.content) + ((! opt_data.contentIncludesTbody) ? '</tbody>' : '') + '</table>';
};
if (goog.DEBUG) {
  aui.table.soyTemplateName = 'aui.table';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/tabs.soy' */
// This file was automatically generated from tabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.tabs = function(opt_data, opt_ignored) {
  var output = '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-tabs ' + soy.$$escapeHtml(opt_data.isVertical ? 'vertical-tabs' : 'horizontal-tabs') + ((opt_data.isDisabled) ? ' aui-tabs-disabled' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><ul class="tabs-menu">';
  var itemList19 = opt_data.menuItems;
  var itemListLen19 = itemList19.length;
  for (var itemIndex19 = 0; itemIndex19 < itemListLen19; itemIndex19++) {
    var itemData19 = itemList19[itemIndex19];
    output += aui.tabMenuItem(itemData19);
  }
  output += '</ul>' + soy.$$filterNoAutoescape(opt_data.paneContent) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
  return output;
};
if (goog.DEBUG) {
  aui.tabs.soyTemplateName = 'aui.tabs';
}


aui.tabMenuItem = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="menu-item' + ((opt_data.isActive) ? ' active-tab' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  aui.tabMenuItem.soyTemplateName = 'aui.tabMenuItem';
}


aui.tabPane = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="tabs-pane' + ((opt_data.isActive) ? ' active-pane' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.tabPane.soyTemplateName = 'aui.tabPane';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/toolbar.soy' */
// This file was automatically generated from toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.toolbar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.toolbar == 'undefined') { aui.toolbar = {}; }


aui.toolbar.toolbar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.toolbar.toolbar.soyTemplateName = 'aui.toolbar.toolbar';
}


aui.toolbar.split = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-split toolbar-split-' + soy.$$escapeHtml(opt_data.split) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.toolbar.split.soyTemplateName = 'aui.toolbar.split';
}


aui.toolbar.group = function(opt_data, opt_ignored) {
  return '<ul' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</ul>';
};
if (goog.DEBUG) {
  aui.toolbar.group.soyTemplateName = 'aui.toolbar.group';
}


aui.toolbar.item = function(opt_data, opt_ignored) {
  return '<li ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-item' + ((opt_data.isPrimary) ? ' primary' : '') + ((opt_data.isActive) ? ' active' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  aui.toolbar.item.soyTemplateName = 'aui.toolbar.item';
}


aui.toolbar.trigger = function(opt_data, opt_ignored) {
  return '<a' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-trigger' + aui.renderExtraClasses(opt_data) + '" href="' + soy.$$escapeHtml(opt_data.url ? opt_data.url : '#') + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</a>';
};
if (goog.DEBUG) {
  aui.toolbar.trigger.soyTemplateName = 'aui.toolbar.trigger';
}


aui.toolbar.button = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.toolbar.item({isActive: opt_data.isActive, isPrimary: opt_data.isPrimary, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.toolbar.trigger({url: opt_data.url, title: opt_data.title, content: '' + ((opt_data.iconClass) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>' : '') + ((opt_data.text) ? '<span class="trigger-text">' + soy.$$escapeHtml(opt_data.text) + '</span>' : '')})});
};
if (goog.DEBUG) {
  aui.toolbar.button.soyTemplateName = 'aui.toolbar.button';
}


aui.toolbar.link = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.item({id: opt_data.id, extraClasses: 'toolbar-item-link' + aui.renderExtraClasses(opt_data), extraAttributes: opt_data.extraAttributes, content: '' + aui.toolbar.trigger({url: opt_data.url, content: '' + soy.$$escapeHtml(opt_data.text)})});
};
if (goog.DEBUG) {
  aui.toolbar.link.soyTemplateName = 'aui.toolbar.link';
}


aui.toolbar.dropdownInternal = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.item({isPrimary: opt_data.isPrimary, id: opt_data.id, extraClasses: '' + soy.$$filterNoAutoescape(opt_data.itemClass) + aui.renderExtraClasses(opt_data), extraAttributes: opt_data.extraAttributes, content: '' + ((opt_data.splitButtonContent) ? soy.$$filterNoAutoescape(opt_data.splitButtonContent) : '') + aui.dropdown.parent({content: '' + aui.dropdown.trigger({extraClasses: 'toolbar-trigger', accessibilityText: opt_data.text}) + aui.dropdown.menu({content: opt_data.dropdownItemsContent})})});
};
if (goog.DEBUG) {
  aui.toolbar.dropdownInternal.soyTemplateName = 'aui.toolbar.dropdownInternal';
}


aui.toolbar.dropdown = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.dropdownInternal({isPrimary: opt_data.isPrimary, id: opt_data.id, itemClass: 'toolbar-dropdown', extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, text: opt_data.text, dropdownItemsContent: opt_data.dropdownItemsContent});
};
if (goog.DEBUG) {
  aui.toolbar.dropdown.soyTemplateName = 'aui.toolbar.dropdown';
}


aui.toolbar.splitButton = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.dropdownInternal({isPrimary: opt_data.isPrimary, id: opt_data.id, itemClass: 'toolbar-splitbutton', extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, dropdownItemsContent: opt_data.dropdownItemsContent, splitButtonContent: '' + aui.toolbar.trigger({url: opt_data.url, content: '' + soy.$$escapeHtml(opt_data.text)})});
};
if (goog.DEBUG) {
  aui.toolbar.splitButton.soyTemplateName = 'aui.toolbar.splitButton';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/toolbar2.soy' */
// This file was automatically generated from toolbar2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.toolbar2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.toolbar2 == 'undefined') { aui.toolbar2 = {}; }


aui.toolbar2.toolbar2 = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ' role="toolbar"><div class="aui-toolbar2-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  aui.toolbar2.toolbar2.soyTemplateName = 'aui.toolbar2.toolbar2';
}


aui.toolbar2.item = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2-' + soy.$$escapeHtml(opt_data.item) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.toolbar2.item.soyTemplateName = 'aui.toolbar2.item';
}


aui.toolbar2.group = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.toolbar2.group.soyTemplateName = 'aui.toolbar2.group';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/progress-tracker.soy' */
// This file was automatically generated from progress-tracker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.progressTracker.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.progressTracker == 'undefined') { aui.progressTracker = {}; }


aui.progressTracker.progressTracker = function(opt_data, opt_ignored) {
  var output = '<ol' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-progress-tracker' + ((opt_data.isInverted) ? ' aui-progress-tracker-inverted' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>';
  var param18 = '';
  var currentStepList19 = opt_data.steps;
  var currentStepListLen19 = currentStepList19.length;
  for (var currentStepIndex19 = 0; currentStepIndex19 < currentStepListLen19; currentStepIndex19++) {
    var currentStepData19 = currentStepList19[currentStepIndex19];
    if (currentStepData19['isCurrent']) {
      var stepList22 = opt_data.steps;
      var stepListLen22 = stepList22.length;
      for (var stepIndex22 = 0; stepIndex22 < stepListLen22; stepIndex22++) {
        var stepData22 = stepList22[stepIndex22];
        param18 += aui.progressTracker.step(soy.$$augmentMap(stepData22, {width: Math.round(100 / opt_data.steps.length * 10000) / 10000, href: stepIndex22 < currentStepIndex19 ? stepData22['href'] : null}));
      }
    }
  }
  output += aui.progressTracker.content({steps: opt_data.steps, content: param18});
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  aui.progressTracker.progressTracker.soyTemplateName = 'aui.progressTracker.progressTracker';
}


aui.progressTracker.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.content != '') {
    output += soy.$$filterNoAutoescape(opt_data.content);
  } else {
    var stepList36 = opt_data.steps;
    var stepListLen36 = stepList36.length;
    for (var stepIndex36 = 0; stepIndex36 < stepListLen36; stepIndex36++) {
      var stepData36 = stepList36[stepIndex36];
      output += aui.progressTracker.step(soy.$$augmentMap(stepData36, {isCurrent: stepIndex36 == 0, width: Math.round(100 / opt_data.steps.length * 10000) / 10000, href: null}));
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.progressTracker.content.soyTemplateName = 'aui.progressTracker.content';
}


aui.progressTracker.step = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-progress-tracker-step' + ((opt_data.isCurrent) ? ' aui-progress-tracker-step-current' : '') + aui.renderExtraClasses(opt_data) + '" style="width: ' + soy.$$escapeHtml(opt_data.width) + '%;"' + aui.renderExtraAttributes(opt_data) + '><' + soy.$$escapeHtml(opt_data.href ? 'a' : 'span') + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</' + soy.$$escapeHtml(opt_data.href ? 'a' : 'span') + '></li>';
};
if (goog.DEBUG) {
  aui.progressTracker.step.soyTemplateName = 'aui.progressTracker.step';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/expander.soy' */
// This file was automatically generated from expander.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.expander.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.expander == 'undefined') { aui.expander = {}; }


aui.expander.content = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-expander-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.initiallyExpanded) ? ' aria-expanded="' + soy.$$escapeHtml(opt_data.initiallyExpanded) + '"' : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.expander.content.soyTemplateName = 'aui.expander.content';
}


aui.expander.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tag ? opt_data.tag : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.replaceText) ? ' data-replace-text="' + soy.$$escapeHtml(opt_data.replaceText) + '"' : '') + ((opt_data.replaceSelector) ? ' data-replace-selector="' + soy.$$escapeHtml(opt_data.replaceSelector) + '"' : '') + ' class="aui-expander-trigger' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ' aria-controls="' + soy.$$escapeHtml(opt_data.contentId) + '"' + ((opt_data.collapsible) ? ' data-collapsible="' + soy.$$escapeHtml(opt_data.collapsible) + '"' : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tag ? opt_data.tag : 'div') + '>';
};
if (goog.DEBUG) {
  aui.expander.trigger.soyTemplateName = 'aui.expander.trigger';
}


aui.expander.revealText = function(opt_data, opt_ignored) {
  return '' + aui.expander.content({id: opt_data.contentId, content: '' + soy.$$escapeHtml(opt_data.contentContent) + aui.expander.trigger({id: opt_data.triggerId, contentId: opt_data.contentId, tag: 'a', content: '<span class=\'reveal-text-trigger-text\'>Show more</span>', replaceSelector: '.reveal-text-trigger-text', replaceText: 'Show less', extraAttributes: opt_data.triggerExtraAttributes, extraClasses: ((opt_data.triggerExtraClasses) ? soy.$$escapeHtml(opt_data.triggerExtraClasses) + '  ' : '') + ' aui-expander-reveal-text'}), extraAttributes: opt_data.contentExtraAttributes, extraClasses: opt_data.contentExtraClasses});
};
if (goog.DEBUG) {
  aui.expander.revealText.soyTemplateName = 'aui.expander.revealText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.avatar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.avatar == 'undefined') { aui.avatar = {}; }


aui.avatar.avatar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + soy.$$escapeHtml(opt_data.isProject ? ' aui-avatar-project' : '') + soy.$$escapeHtml(opt_data.badgeContent ? ' aui-avatar-badged' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.avatarImageUrl) + '"' + ((opt_data.accessibilityText) ? ' alt="' + soy.$$escapeHtml(opt_data.accessibilityText) + '"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.imageClasses) ? ' class="' + soy.$$escapeHtml(opt_data.imageClasses) + '"' : '') + ' /></span>' + ((opt_data.badgeContent) ? soy.$$filterNoAutoescape(opt_data.badgeContent) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.avatar.avatar.soyTemplateName = 'aui.avatar.avatar';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.icons.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.icons == 'undefined') { aui.icons = {}; }


aui.icons.icon = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-icon' + ((opt_data.useIconFont) ? ' aui-icon-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'small') : '') + ' aui' + soy.$$escapeHtml(opt_data.useIconFont ? '-iconfont' : '-icon') + soy.$$escapeHtml(opt_data.iconFontSet ? '-' + opt_data.iconFontSet : '') + '-' + soy.$$escapeHtml(opt_data.icon) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.accessibilityText) ? soy.$$escapeHtml(opt_data.accessibilityText) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.icons.icon.soyTemplateName = 'aui.icons.icon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/lozenges.soy' */
// This file was automatically generated from lozenges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.lozenges.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.lozenges == 'undefined') { aui.lozenges = {}; }


aui.lozenges.lozenge = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ' class="aui-lozenge' + soy.$$escapeHtml(opt_data.type ? ' aui-lozenge-' + opt_data.type : '') + soy.$$escapeHtml(opt_data.isSubtle ? ' aui-lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.maxLength) ? soy.$$truncate(soy.$$escapeHtml(opt_data.text), opt_data.maxLength, true) : soy.$$escapeHtml(opt_data.text)) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.lozenges.lozenge.soyTemplateName = 'aui.lozenges.lozenge';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/sidebar.soy' */
// This file was automatically generated from sidebar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.sidebar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.sidebar == 'undefined') { aui.sidebar = {}; }


aui.sidebar.sidebar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.state) ? ' aria-expanded="' + ((opt_data.state == 'collapsed') ? 'false' : 'true') + '"' : '') + ' class="aui-sidebar ' + ((opt_data.isAnimated) ? 'aui-is-animated' : '') + aui.renderExtraClasses(opt_data) + '" ' + ((opt_data.isResponsive == false) ? 'data-aui-responsive="false"' : '') + aui.renderExtraAttributes(opt_data) + '><div class="aui-sidebar-wrapper"><div class="aui-sidebar-body">' + soy.$$filterNoAutoescape(opt_data.headerContent) + soy.$$filterNoAutoescape(opt_data.content) + '</div><div class="aui-sidebar-footer">' + ((opt_data.footerContent) ? soy.$$filterNoAutoescape(opt_data.footerContent) : (opt_data.settingsButtonUrl && opt_data.settingsText) ? '<a href="' + soy.$$escapeHtml(opt_data.settingsButtonUrl) + '" class="aui-button aui-button-subtle aui-sidebar-settings-button' + ((opt_data.isSettingsButtonSelected) ? ' aui-sidebar-settings-selected' : '') + '" data-tooltip="' + soy.$$escapeHtml(opt_data.settingsTooltip ? opt_data.settingsTooltip : opt_data.settingsText) + '"><span class="aui-icon aui-icon-small aui-iconfont-configure"></span><span class="aui-button-label">' + soy.$$escapeHtml(opt_data.settingsText) + '</span></a>' : '') + '<a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="' + soy.$$escapeHtml("Expand sidebar ( [ )") + '" href="#"><span class="aui-icon aui-icon-small"></span></a></div>' + ((opt_data.isResizable) ? '<div class="aui-sidebar-handle"></div>' : '') + '</div></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.sidebar.sidebar.soyTemplateName = 'aui.sidebar.sidebar';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-jquery-tipsy', location = 'src/js-vendor/jquery/jquery.tipsy.js' */
("undefined"===typeof window?global:window).__a24ba4444f815d1bb1238bd3e691d1e5=function(){var b=jQuery,i=function(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},j=function(a,c){this.$element=b(a);this.options=c;this.enabled=!0;this.fixTitle()},k=0;j.prototype={show:function(){if(i(this.$element[0])){var a=this.getTitle();if(a&&this.enabled){var c=this.tip();c.find(".tipsy-inner")[this.options.html?"html":"text"](a);c[0].className="tipsy";c.remove().css({top:0,left:0,visibility:"hidden",
display:"block"}).appendTo(document.body);var d=this;this.options.hoverable&&c.hover(function(){d.hoverTooltip=!0},function(){"in"!=d.hoverState&&(d.hoverTooltip=!1,"manual"!=d.options.trigger&&d.$element.trigger("hover"==d.options.trigger?"mouseleave.tipsy":"blur.tipsy"))});this.options.className&&c.addClass("function"==typeof this.options.className?this.options.className.call(this.$element[0]):this.options.className);var a=b.extend({},this.$element.offset(),{width:this.$element[0].getBoundingClientRect().width,
height:this.$element[0].getBoundingClientRect().height}),e={},f=c[0].offsetWidth,h=c[0].offsetHeight,g="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0]):this.options.gravity;2===g.length&&(e.left="w"===g.charAt(1)?a.left+a.width/2-15:a.left+a.width/2-f+15);switch(g.charAt(0)){case "n":"undefined"===typeof e.left&&(e.left=a.left+a.width/2-f/2);e.top=a.top+a.height+this.options.offset;break;case "s":"undefined"===typeof e.left&&(e.left=a.left+a.width/2-f/2,c.css(e),
h=c[0].offsetHeight);e.top=a.top-h-this.options.offset;break;case "e":e.left=a.left-f-this.options.offset;e.top=a.top+a.height/2-h/2;break;case "w":e.left=a.left+a.width+this.options.offset,e.top=a.top+a.height/2-h/2}c.css(e).addClass("tipsy-"+g);c.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+g.charAt(0);this.options.fade?c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):c.css({visibility:"visible",opacity:this.options.opacity});
this.options.aria&&(a="tipsyuid"+k++,c.attr("id",a),this.$element.attr("aria-describedby",a))}}},destroy:function(){this.$element.removeData("tipsy");this.unbindHandlers();this.hide()},unbindHandlers:function(){this.options.live?b(this.$element.context).off(".tipsy"):this.$element.unbind(".tipsy")},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){b(this).remove()}):this.tip().remove();this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var a=
this.$element;if(a.attr("title")||"string"!=typeof a.attr("original-title"))a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,d=this.options;this.fixTitle();d=this.options;"string"==typeof d.title?a=b.attr("title"==d.title?"original-title":d.title):"function"==typeof d.title&&(a=d.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||d.fallback},tip:function(){this.$tip||(this.$tip=b('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>').attr("role",
"tooltip"),this.$tip.data("tipsy-pointee",this.$element[0]));return this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};b.fn.tipsy=function(a){function c(c){var d=b.data(c,"tipsy");d||(d=new j(c,b.fn.tipsy.elementOptions(c,a)),b.data(c,"tipsy",d));return d}function d(){var b=c(this);b.hoverState="in";0==a.delayIn?b.show():
(b.fixTitle(),setTimeout(function(){"in"==b.hoverState&&b.show()},a.delayIn))}function e(){var b=c(this);b.hoverState="out";0==a.delayOut?b.hide():setTimeout(function(){"out"==b.hoverState&&!b.hoverTooltip&&b.hide()},a.delayOut)}if(!0===a)return this.data("tipsy");if("string"==typeof a){var f=this.data("tipsy");if(f)f[a]();return this}a=b.extend({},b.fn.tipsy.defaults,a);a.hoverable&&(a.delayOut=a.delayOut||20);a.live||this.each(function(){c(this)});if("manual"!=a.trigger){var f="hover"==a.trigger?
"mouseenter.tipsy focus.tipsy":"focus.tipsy",h="hover"==a.trigger?"mouseleave.tipsy blur.tipsy":"blur.tipsy";if(a.live)b(this.context).on(f,this.selector,d).on(h,this.selector,e);else this.bind(f,d).bind(h,e)}return this};b.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:0.8,title:"title",trigger:"hover"};b.fn.tipsy.revalidate=function(){b(".tipsy").each(function(){var a=b.data(this,"tipsy-pointee");(!a||
!i(a))&&b(this).remove()})};b.fn.tipsy.elementOptions=function(a,c){return b.metadata?b.extend({},c,b(a).metadata()):c};b.fn.tipsy.autoNS=function(){return b(this).offset().top>b(document).scrollTop()+b(window).height()/2?"s":"n"};b.fn.tipsy.autoWE=function(){return b(this).offset().left>b(document).scrollLeft()+b(window).width()/2?"e":"w"};b.fn.tipsy.autoBounds=function(a,c){return function(){var d=c[0],e=1<c.length?c[1]:!1,f=b(document).scrollTop()+a,h=b(document).scrollLeft()+a,g=b(this);g.offset().top<
f&&(d="n");g.offset().left<h&&(e="w");b(window).width()+b(document).scrollLeft()-g.offset().left<a&&(e="e");b(window).height()+b(document).scrollTop()-g.offset().top<a&&(d="s");return d+(e?e:"")}};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-tipsy', location = 'src/js/aui/tipsy.js' */
("undefined"===typeof window?global:window).__91a8066d92a8341f0d81bc7b246889b6=function(){"use strict";__a24ba4444f815d1bb1238bd3e691d1e5;return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-tooltip', location = 'src/js/aui/tooltip.js' */
("undefined"===typeof window?global:window).__9736345f6947949dc28f91f6cd21cbe6=function(){function f(a,b,c){a.tipsy(c);"destroy"===c&&(b.live?(0,d.default)(a.context).off(".tipsy",a.selector):a.unbind(".tipsy"));return a}function g(a,b){a.tipsy(b);if(b&&b.hideOnClick&&("hover"===b.trigger||!b.trigger&&"hover"===a.tipsy.defaults.trigger)){var c=function(){(0,d.default)(this).tipsy("hide")};if(b.live)(0,d.default)(a.context).on("click.tipsy",a.selector,c);else a.bind("click.tipsy",c)}return a}"use strict";
var e=__bd7207540b95ff683caa1d3c0bfcc3d7,d=e&&e.__esModule?e:{"default":e};__a24ba4444f815d1bb1238bd3e691d1e5;d.default.fn.tooltip=function(a){var b=d.default.extend({},d.default.fn.tooltip.defaults,a);return b.live?("string"===typeof a?f(this,b,a):g(this,b),this):this.each(function(){var c=(0,d.default)(this);"string"===typeof a?f(c,b,a):g(c,b);return c})};d.default.fn.tooltip.defaults={opacity:1,offset:1,delayIn:500,hoverable:!0,hideOnClick:!0,aria:!0};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-plugins-jquery-select2', location = 'src/js-vendor/jquery/plugins/jquery.select2.js' */
("undefined"===typeof window?global:window).__20a7a9bbaf9ff38842d86ac547491891=function(){var y=jQuery;"undefined"==typeof y.fn.each2&&y.extend(y.fn,{each2:function(a){for(var b=y([0]),c=-1,d=this.length;++c<d&&(b.context=b[0]=this[c])&&!1!==a.call(b[0],c,b););return this}});var e=jQuery,w=function(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=O[g]||g;return b},k=function(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1},m=function(a,
b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1},B=function(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c},G=function(a){a.on("keydown",function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),
a.trigger("keyup-change"))})},H=function(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}},j=function(a){a.preventDefault();a.stopPropagation()},z=function(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))},
I=function(a,b,c,d){var g=w(a.toUpperCase()).indexOf(w(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))},J=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},K=function(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(l){window.clearTimeout(b);
b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,l.term,l.page,l.context):null,d="function"===typeof d?d.call(h,l.term,l.page,l.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=
a.results(b,l.page);l.callback(b)}});c=t.call(h,f)},d)}},L=function(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},n;if(c==="")a.callback(b());else{n=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){n(b,
i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){n(b,d.results)});a.callback(d)}}},M=function(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}},r=function(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");
},o=function(a){return e.isFunction(a)?a():a},N=function(a){var b=0;e.each(a,function(a,d){d.children?b+=N(d.children):b++});return b},P=function(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&
null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(m(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}},C=function(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c};if(void 0===window.Select2){var f,s,D,E,A,v,x={x:0,y:0},F;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=
a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A",
"\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C",
"\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E",
"\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H",
"\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K",
"\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N",
"\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O",
"\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R",
"\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U",
"\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W",
"\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a",
"\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};s=e(document);var Q=1;A=function(){return Q++};s.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});s=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);
this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+A());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.attr("style",a.element.attr("style"));this.container.css(o(a.containerCss));this.container.addClass(o(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",j);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(a.dropdownCssClass));
this.dropdown.data("select2",this);this.dropdown.on("click",j);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",j);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));
var h=this.results,l=H(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=k(a.target,h.get())&&l(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),j(a)):0>g&&b.get(0).scrollHeight-
b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});G(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});
e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");void 0===i&&(i=!1);this.readonly(i);if(!(i=F)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}F=i;this.autofocus=a.element.prop("autofocus");
a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},
optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:m(a.attr("locked"),"locked")||m(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var l,j,m,k,o,u,q,b=a.sortResults(b,c,d);l=0;for(j=b.length;l<j;l=l+1){m=b[l];o=m.disabled===true;k=!o&&t(m)!==void 0;u=m.children&&m.children.length>0;q=e("<li></li>");q.addClass("select2-results-dept-"+h);q.addClass("select2-result");q.addClass(k?"select2-result-selectable":"select2-result-unselectable");
o&&q.addClass("select2-disabled");u&&q.addClass("select2-result-with-children");q.addClass(g.opts.formatResultCssClass(m));k=e(document.createElement("div"));k.addClass("select2-result-label");o=a.formatResult(m,k,d,g.opts.escapeMarkup);o!==void 0&&k.html(o);q.append(k);if(u){u=e("<ul></ul>");u.addClass("select2-result-sub");f(m.children,u,h+1);q.append(u)}q.data("select2-data",m);c.append(q)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:false},d=a.term,e,f,p;p=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){p(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&
e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){p(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=K.call(a.element,a.ajax)}else if("data"in a)a.query=L(a.data);else if("tags"in a&&(a.query=M(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===
a.initSelection))a.initSelection=function(b,c){var d=[];e(B(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(m(this.id,b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(o(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});
c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",
val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},
enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),
d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),n=h.scrollLeft()+f,j=h.scrollTop()+i,c=b.top+c,p=b.left,j=c+g<=j,m=b.top-g>=this.body().scrollTop(),k=a.outerWidth(!1),r=p+k<=n,s;a.hasClass("select2-drop-above")?(g=!0,!m&&j&&(s=!0,g=!1)):(g=!1,!j&&m&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),n=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,p=b.left,k=a.outerWidth(!1),r=p+k<=
n,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),k=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:F.width),k>d?d=k:k=d,r=p+k<=n):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(n=this.body().offset(),c-=n.top,p-=n.left);r||(p=b.left+d-k);d={left:p,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=
c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,o(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;
this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),
a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+
" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");
this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return o(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),
0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var n=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&n&&m(f,n))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;n=this.getMaximumSelectionSize();
if(1<=n&&(f=this.data(),e.isArray(f)&&f.length>=n&&r(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(n)+"</li>");return}d.val().length<h.minimumInputLength?(r(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?r(h.formatInputTooLong,"formatInputTooLong")?
c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var l;j==this.queryCount&&(this.opened()?
(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(l=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==l&&null!==l&&void 0!==i.id(l)&&null!==i.id(l)&&0===e(f.results).filter(function(){return m(i.id(this),i.id(l))}).length&&f.results.unshift(l)),0===f.results.length&&r(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),
page:this.resultsPage,context:null}),!0===f.more&&r(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});
this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=
this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||
"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==a&&this.container.css("width",a)}});D=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.ENTER:this.selectHighlighted();j(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
j(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
j(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();j(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){j(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=m(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(N(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});E=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=B(b.val(),a.separator),f=[];a.query({matcher:function(b,c,d){(b=e.grep(g,function(b){return m(b,a.id(d))}).length)&&f.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<g.length;c++)for(var e=g[c],j=0;j<f.length;j++){var k=f[j];if(m(e,a.id(k))){b.push(k);f.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),l=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&l.length?g=l:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=l.length?l:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),j(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),j(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:this.selectHighlighted();j(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);j(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b),b.which===f.ENTER&&j(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",j).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),j(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=k(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=k(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
r(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return B(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,j="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],m=["val","data"],o={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new E:new D,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],j))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(o[d]&&(d=o[d]),f=c[d].apply(c,a.slice(1))),0<=k(a[0],i)||k(a[0],m)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=w(""+b).toUpperCase().indexOf(w(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:P,escapeMarkup:J,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:K,local:L,tags:M},util:{debounce:H,markMatch:I,escapeMarkup:J,stripDiacritics:w},"class":{"abstract":s,single:D,multi:E}}}return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-select2', location = 'src/js/aui/select2.js' */
("undefined"===typeof window?global:window).__0b1c96d06e662d84c9324a075c8f5c66=function(){"use strict";var b=__bd7207540b95ff683caa1d3c0bfcc3d7,d=b&&b.__esModule?b:{"default":b};__20a7a9bbaf9ff38842d86ac547491891;var e=d.default.fn.select2;d.default.fn.auiSelect2=function(b){var c;if(d.default.isPlainObject(b)){var a=d.default.extend({},b);c=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+c+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+
c+(a.dropdownCssClass?" "+a.dropdownCssClass:"");c=Array.prototype.slice.call(arguments,1);c.unshift(a)}else c=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];return e.apply(this,c)};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-banner', location = 'src/js/aui/banner.js' */
("undefined"===typeof window?global:window).__9ddbad97e939bfc5a88a654192fe88be=function(){function b(a){return a&&a.__esModule?a:{"default":a}}function e(a){a=(0,c.default)((0,g.default)('<div class="aui-banner aui-banner-{type}" role="banner">{body}</div>').fill({type:"error","body:html":a.body||""}).toString());(0,c.default)("#"+f).find(".aui-banner").get().forEach(function(a){"true"===a.getAttribute("aria-hidden")&&(0,c.default)(a).remove()});var b=(0,c.default)("#"+f);if(!b.length)throw Error("You must implement the application header");
a.prependTo(b);(0,h.recomputeStyle)(a);a.attr("aria-hidden","false");return a[0]}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var c=b(__bd7207540b95ff683caa1d3c0bfcc3d7),h=__5751b8a604ec61b53b208676ae78d41d,i=b(__65f46acd493e225a8705ab04389e284d),j=b(__9a668cbde1e182d8e721c23580356df2),g=b(__c4f1078a82b494cc09b37e0114acf4c9),f="header";(0,i.default)("aui/banner",e);(0,j.default)("banner",e);d.default=e;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:ajs', location = '/scripts/aui-overrides.js' */
//=============================================================================================
//=============================================================================================
//=============================================================================================
(function ($, Dialog, trigger) {
    Dialog.prototype.remove = function() {
        this.popup.hide();
        this.popup.remove();
        if ($.fx.off) {
            $('div.aui-blanket').remove();
        }
        trigger('remove.dialog', { dialog: this });
    };
})(AJS.$, AJS.Dialog, AJS.trigger);

//=============================================================================================
//=============================================================================================
//=============================================================================================

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dialog2', location = 'src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__9d1f3fc8db7cce1507b836363b13471d=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__bd7207540b95ff683caa1d3c0bfcc3d7),j=f(__65f46acd493e225a8705ab04389e284d),k=f(__9a668cbde1e182d8e721c23580356df2),
b=f(__bbe882dbb07e18e72992d5f992bba14c),l=f(__f6397c80406fe105a9ead0b34dba268d),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-backbone-backbone', location = 'src/js-vendor/backbone/backbone.js' */
("undefined"===typeof window?global:window).__ad983a4feaa36b28083059de7c56c7a4=function(){var o={exports:{}},m=o.exports,v={module:o,exports:m,underscore:__f97340202cf7ae2d8f4dc9fc2d3264af,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7,underscore:__f97340202cf7ae2d8f4dc9fc2d3264af,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7},i;i=function(h,f,d){var i=("undefined"===typeof window?global:window).define,j,k,d=[d,f,h].filter(function(d){return"function"===typeof d})[0],f=[f,h,[]].filter(Array.isArray)[0];j=
d.apply(null,f.map(function(d){return v[d]}));k=typeof j;"function"===typeof i&&i("string"===typeof h?h:"__ad983a4feaa36b28083059de7c56c7a4",f,d);"string"===k?j=String(j):"number"===k?j=Number(j):"boolean"===k&&(j=Boolean(j));void 0!==j&&(m=o.exports=j)};i.amd=!0;var h=this,q=function(h,f,d,i){var h=this,j=h.Backbone,k=[],o=k.push,m=k.slice,q=k.splice;f.VERSION="1.0.0";f.$=i;f.noConflict=function(){h.Backbone=j;return this};f.emulateHTTP=!1;f.emulateJSON=!1;var l=f.Events={on:function(a,b,c){if(!s(this,
"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!s(this,"once",a,[b,c])||!b)return this;var e=this,g=d.once(function(){e.off(a,g);b.apply(this,arguments)});g._callback=b;return this.on(a,g,c)},off:function(a,b,c){var e,g,w,f,h,i,j,k;if(!this._events||!s(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;f=a?[a]:d.keys(this._events);h=0;for(i=f.length;h<
i;h++)if(a=f[h],w=this._events[a]){this._events[a]=e=[];if(b||c){j=0;for(k=w.length;j<k;j++)g=w[j],(b&&b!==g.callback&&b!==g.callback._callback||c&&c!==g.context)&&e.push(g)}e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=m.call(arguments,1);if(!s(this,"trigger",a,b))return this;var c=this._events[a],e=this._events.all;c&&x(c,b);e&&x(e,arguments);return this},stopListening:function(a,b,c){var e=this._listeners;if(!e)return this;var d=!b&&!c;"object"===
typeof b&&(c=this);a&&((e={})[a._listenerId]=a);for(var f in e)e[f].off(b,c,this),d&&delete this._listeners[f];return this}},r=/\s+/,s=function(a,b,c,e){if(!c)return!0;if("object"===typeof c){for(var d in c)a[b].apply(a,[d,c[d]].concat(e));return!1}if(r.test(c)){c=c.split(r);d=0;for(var f=c.length;d<f;d++)a[b].apply(a,[c[d]].concat(e));return!1}return!0},x=function(a,b){var c,e=-1,d=a.length,f=b[0],h=b[1],i=b[2];switch(b.length){case 0:for(;++e<d;)(c=a[e]).callback.call(c.ctx);break;case 1:for(;++e<
d;)(c=a[e]).callback.call(c.ctx,f);break;case 2:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,h);break;case 3:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,h,i);break;default:for(;++e<d;)(c=a[e]).callback.apply(c.ctx,b)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){l[b]=function(b,e,g){var f=this._listeners||(this._listeners={}),h=b._listenerId||(b._listenerId=d.uniqueId("l"));f[h]=b;"object"===typeof e&&(g=this);b[a](e,g,this);return this}});l.bind=l.on;l.unbind=l.off;d.extend(f,l);var p=
f.Model=function(a,b){var c,e=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};d.extend(this,d.pick(b,v));b.parse&&(e=this.parse(e,b)||{});if(c=d.result(this,"defaults"))e=d.defaults({},e,c);this.set(e,b);this.changed={};this.initialize.apply(this,arguments)},v=["url","urlRoot","collection"];d.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},sync:function(){return f.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var e,g,f,h,i,j,k;if(null==a)return this;"object"===typeof a?(g=a,c=b):(g={})[a]=b;c||(c={});if(!this._validate(g,c))return!1;f=c.unset;h=c.silent;a=[];i=this._changing;this._changing=!0;i||(this._previousAttributes=d.clone(this.attributes),this.changed={});k=this.attributes;j=this._previousAttributes;this.idAttribute in g&&(this.id=g[this.idAttribute]);
for(e in g)b=g[e],d.isEqual(k[e],b)||a.push(e),d.isEqual(j[e],b)?delete this.changed[e]:this.changed[e]=b,f?delete k[e]:k[e]=b;if(!h){a.length&&(this._pending=!0);b=0;for(e=a.length;b<e;b++)this.trigger("change:"+a[b],this,k[a[b]],c)}if(i)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=
void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,c=!1,e=this._changing?this._previousAttributes:this.attributes,g;for(g in a)if(!d.isEqual(e[g],b=a[g]))(c||(c={}))[g]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},
fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(e){if(!b.set(b.parse(e,a),a))return false;c&&c(b,e,a);b.trigger("sync",b,e,a)};t(this,a);return this.sync("read",this,a)},save:function(a,b,c){var e,g=this.attributes;null==a||"object"===typeof a?(e=a,c=b):(e={})[a]=b;if(e&&(!c||!c.wait)&&!this.set(e,c))return!1;c=d.extend({validate:!0},c);if(!this._validate(e,c))return!1;e&&c.wait&&(this.attributes=d.extend({},g,e));void 0===c.parse&&(c.parse=
!0);var f=this,h=c.success;c.success=function(a){f.attributes=g;var b=f.parse(a,c);c.wait&&(b=d.extend(e||{},b));if(d.isObject(b)&&!f.set(b,c))return false;h&&h(f,a,c);f.trigger("sync",f,a,c)};t(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=e);a=this.sync(a,this,c);e&&c.wait&&(this.attributes=g);return a},destroy:function(a){var a=a?d.clone(a):{},b=this,c=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&e();c&&
c(b,d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;t(this,a);var g=this.sync("delete",this,a);a.wait||e();return g},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||y();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},d.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=d.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,d.extend(b||{},{validationError:c}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){p.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.attributes);return d[a].apply(d,b)}});var u=f.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,d.extend({silent:!0},b))},A={add:!0,remove:!0,merge:!0},B={add:!0,merge:!1,remove:!1};d.extend(u.prototype,l,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return f.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.defaults(b||{},B))},remove:function(a,b){a=d.isArray(a)?
a.slice():[a];b||(b={});var c,e,g,f;c=0;for(e=a.length;c<e;c++)if(f=this.get(a[c]))delete this._byId[f.id],delete this._byId[f.cid],g=this.indexOf(f),this.models.splice(g,1),this.length--,b.silent||(b.index=g,f.trigger("remove",f,this,b)),this._removeReference(f);return this},set:function(a,b){b=d.defaults(b||{},A);b.parse&&(a=this.parse(a,b));d.isArray(a)||(a=a?[a]:[]);var c,e,g,f,h,i=b.at,j=this.comparator&&null==i&&!1!==b.sort,k=d.isString(this.comparator)?this.comparator:null,l=[],m=[],n={};c=
0;for(e=a.length;c<e;c++)if(g=this._prepareModel(a[c],b))(f=this.get(g))?(b.remove&&(n[f.cid]=!0),b.merge&&(f.set(g.attributes,b),j&&(!h&&f.hasChanged(k))&&(h=!0))):b.add&&(l.push(g),g.on("all",this._onModelEvent,this),this._byId[g.cid]=g,null!=g.id&&(this._byId[g.id]=g));if(b.remove){c=0;for(e=this.length;c<e;++c)n[(g=this.models[c]).cid]||m.push(g);m.length&&this.remove(m,b)}l.length&&(j&&(h=!0),this.length+=l.length,null!=i?q.apply(this.models,[i,0].concat(l)):o.apply(this.models,l));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(e=l.length;c<e;c++)(g=l[c]).trigger("add",g,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,e=this.models.length;c<e;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var e in a)if(a[e]!==b.get(e))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var e=d.isFunction(b)?b:function(a){return a.get(b)};return d.sortedIndex(this.models,a,e,c)},pluck:function(a){return d.invoke(this.models,"get",
a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(e){c[a.reset?"reset":"set"](e,a);b&&b(c,e,a);c.trigger("sync",c,e,a)};t(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,e=b.success;b.success=function(a,b,d){d.wait&&c.add(a,d);e&&e(a,b,d)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof p)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,e){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,e),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){u.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.models);return d[a].apply(d,b)}});
d.each(["groupBy","countBy","sortBy"],function(a){u.prototype[a]=function(b,c){var e=d.isFunction(b)?b:function(a){return a.get(b)};return d[a](this.models,e,c)}});var i=f.View=function(a){this.cid=d.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},C=/^(\S+)\s*(.*)$/,D="model collection el id attributes className tagName events".split(" ");d.extend(i.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof f.$?a:f.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];d.isFunction(c)||(c=this[a[b]]);if(c){var e=b.match(C),g=e[1],e=e[2],c=d.bind(c,this),g=g+(".delegateEvents"+this.cid);
if(""===e)this.$el.on(g,c);else this.$el.on(g,e,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=d.extend({},d.result(this,"options"),a));d.extend(this,d.pick(a,D));this.options=a},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var a=d.extend({},d.result(this,"attributes"));this.id&&(a.id=d.result(this,"id"));this.className&&(a["class"]=d.result(this,"className"));a=f.$("<"+
d.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});f.sync=function(a,b,c){var e=E[a];d.defaults(c||(c={}),{emulateHTTP:f.emulateHTTP,emulateJSON:f.emulateJSON});var g={type:e,dataType:"json"};c.url||(g.url=d.result(b,"url")||y());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))g.contentType="application/json",g.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(c.emulateHTTP&&("PUT"===
e||"DELETE"===e||"PATCH"===e)){g.type="POST";c.emulateJSON&&(g.data._method=e);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e);if(h)return h.apply(this,arguments)}}"GET"!==g.type&&!c.emulateJSON&&(g.processData=!1);if("PATCH"===g.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=f.ajax(d.extend(g,c));b.trigger("request",b,a,c);return a};var E=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};f.ajax=function(){return f.$.ajax.apply(f.$,arguments)};var k=f.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(k.prototype,l,{initialize:function(){},route:function(a,b,c){d.isRegExp(a)||(a=this._routeToRegExp(a));d.isFunction(b)&&(c=b,b="");c||(c=this[b]);var e=this;f.history.route(a,
function(d){d=e._extractParameters(a,d);c&&c.apply(e,d);e.trigger.apply(e,["route:"+b].concat(d));e.trigger("route",b,d);f.history.trigger("route",e,b,d)});return this},navigate:function(a,b){f.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,c){return c?a:"([^/]+)"}).replace(H,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return d.map(c,function(a){return a?decodeURIComponent(a):null})}});var n=f.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,J=/^\/+|\/+$/g,K=/msie [\w.]+/,L=/\/$/;n.started=!1;d.extend(n.prototype,l,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(L,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(z,"")},start:function(a){if(n.started)throw Error("Backbone.history has already been started");n.started=!0;this.options=d.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=K.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(J,"/");b&&this._wantsHashChange&&(this.iframe=f.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)f.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)f.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(z,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){f.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);n.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!n.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});f.history=new n;p.extend=u.extend=k.extend=i.extend=n.extend=function(a,b){var c=this,e;e=a&&d.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};d.extend(e,c,b);var f=function(){this.constructor=e};f.prototype=c.prototype;e.prototype=new f;a&&d.extend(e.prototype,a);e.__super__=c.prototype;return e};var y=function(){throw Error('A "url" property or function must be specified');},t=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return f};if("function"===typeof i&&i.amd)i(["underscore","jquery","exports"],function(i,f,d){h.Backbone=q(h,d,i,f)});else if("undefined"!==typeof m){i=__f97340202cf7ae2d8f4dc9fc2d3264af;
var r;try{r=__bd7207540b95ff683caa1d3c0bfcc3d7}catch(M){}q(h,m,i,r)}else h.Backbone=q(h,{},h._,h.jQuery||h.Zepto||h.ender||h.$);return o.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-backbone', location = 'src/js/aui/backbone.js' */
("undefined"===typeof window?global:window).__fa226178965fdea8a278a23624815dae=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__ad983a4feaa36b28083059de7c56c7a4,a=a&&a.__esModule?a:{"default":a};window.Backbone||(window.Backbone=a.default);b.default=window.Backbone;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/util/shims/backbone.js' */
define('backbone', function() {
    return window.Backbone;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/bower/backbone.babysitter/backbone.babysitter.js' */
// Backbone.BabySitter
// -------------------
// v0.1.6
//
// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.babysitter

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  'use strict';

  var previousChildViewContainer = Backbone.ChildViewContainer;

  // BabySitter.ChildViewContainer
  // -----------------------------
  //
  // Provide a container to store, retrieve and
  // shut down child views.
  
  Backbone.ChildViewContainer = (function (Backbone, _) {
  
    // Container Constructor
    // ---------------------
  
    var Container = function(views){
      this._views = {};
      this._indexByModel = {};
      this._indexByCustom = {};
      this._updateLength();
  
      _.each(views, this.add, this);
    };
  
    // Container Methods
    // -----------------
  
    _.extend(Container.prototype, {
  
      // Add a view to this container. Stores the view
      // by `cid` and makes it searchable by the model
      // cid (and model itself). Optionally specify
      // a custom key to store an retrieve the view.
      add: function(view, customIndex){
        var viewCid = view.cid;
  
        // store the view
        this._views[viewCid] = view;
  
        // index it by model
        if (view.model){
          this._indexByModel[view.model.cid] = viewCid;
        }
  
        // index by custom
        if (customIndex){
          this._indexByCustom[customIndex] = viewCid;
        }
  
        this._updateLength();
        return this;
      },
  
      // Find a view by the model that was attached to
      // it. Uses the model's `cid` to find it.
      findByModel: function(model){
        return this.findByModelCid(model.cid);
      },
  
      // Find a view by the `cid` of the model that was attached to
      // it. Uses the model's `cid` to find the view `cid` and
      // retrieve the view using it.
      findByModelCid: function(modelCid){
        var viewCid = this._indexByModel[modelCid];
        return this.findByCid(viewCid);
      },
  
      // Find a view by a custom indexer.
      findByCustom: function(index){
        var viewCid = this._indexByCustom[index];
        return this.findByCid(viewCid);
      },
  
      // Find by index. This is not guaranteed to be a
      // stable index.
      findByIndex: function(index){
        return _.values(this._views)[index];
      },
  
      // retrieve a view by its `cid` directly
      findByCid: function(cid){
        return this._views[cid];
      },
  
      // Remove a view
      remove: function(view){
        var viewCid = view.cid;
  
        // delete model index
        if (view.model){
          delete this._indexByModel[view.model.cid];
        }
  
        // delete custom index
        _.any(this._indexByCustom, function(cid, key) {
          if (cid === viewCid) {
            delete this._indexByCustom[key];
            return true;
          }
        }, this);
  
        // remove the view from the container
        delete this._views[viewCid];
  
        // update the length
        this._updateLength();
        return this;
      },
  
      // Call a method on every view in the container,
      // passing parameters to the call method one at a
      // time, like `function.call`.
      call: function(method){
        this.apply(method, _.tail(arguments));
      },
  
      // Apply a method on every view in the container,
      // passing parameters to the call method one at a
      // time, like `function.apply`.
      apply: function(method, args){
        _.each(this._views, function(view){
          if (_.isFunction(view[method])){
            view[method].apply(view, args || []);
          }
        });
      },
  
      // Update the `.length` attribute on this container
      _updateLength: function(){
        this.length = _.size(this._views);
      }
    });
  
    // Borrowing this code from Backbone.Collection:
    // http://backbonejs.org/docs/backbone.html#section-106
    //
    // Mix in methods from Underscore, for iteration, and other
    // collection related features.
    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',
      'select', 'reject', 'every', 'all', 'some', 'any', 'include',
      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',
      'last', 'without', 'isEmpty', 'pluck', 'reduce'];
  
    _.each(methods, function(method) {
      Container.prototype[method] = function() {
        var views = _.values(this._views);
        var args = [views].concat(_.toArray(arguments));
        return _[method].apply(_, args);
      };
    });
  
    // return the public API
    return Container;
  })(Backbone, _);
  

  Backbone.ChildViewContainer.VERSION = '0.1.6';

  Backbone.ChildViewContainer.noConflict = function () {
    Backbone.ChildViewContainer = previousChildViewContainer;
    return this;
  };

  return Backbone.ChildViewContainer;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/bower/backbone.marionette/backbone.marionette.js' */
// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v2.4.1
//
// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore', 'backbone.wreqr', 'backbone.babysitter'], function(Backbone, _) {
      return (root.Marionette = root.Mn = factory(root, Backbone, _));
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    var Wreqr = require('backbone.wreqr');
    var BabySitter = require('backbone.babysitter');
    module.exports = factory(root, Backbone, _);
  } else {
    root.Marionette = root.Mn = factory(root, root.Backbone, root._);
  }

}(this, function(root, Backbone, _) {
  'use strict';

  var previousMarionette = root.Marionette;
  var previousMn = root.Mn;

  var Marionette = Backbone.Marionette = {};

  Marionette.VERSION = '2.4.1';

  Marionette.noConflict = function() {
    root.Marionette = previousMarionette;
    root.Mn = previousMn;
    return this;
  };

  // Get the Deferred creator for later use
  Marionette.Deferred = Backbone.$.Deferred;

  Marionette.FEATURES = {
  };
  
  Marionette.isEnabled = function(name) {
    return !!Marionette.FEATURES[name];
  };
  
  /* jshint unused: false *//* global console */
  
  // Helpers
  // -------
  
  // Marionette.extend
  // -----------------
  
  // Borrow the Backbone `extend` method so we can use it as needed
  Marionette.extend = Backbone.Model.extend;
  
  // Marionette.isNodeAttached
  // -------------------------
  
  // Determine if `el` is a child of the document
  Marionette.isNodeAttached = function(el) {
    return Backbone.$.contains(document.documentElement, el);
  };
  
  // Merge `keys` from `options` onto `this`
  Marionette.mergeOptions = function(options, keys) {
    if (!options) { return; }
    _.extend(this, _.pick(options, keys));
  };
  
  // Marionette.getOption
  // --------------------
  
  // Retrieve an object, function or other value from a target
  // object or its `options`, with `options` taking precedence.
  Marionette.getOption = function(target, optionName) {
    if (!target || !optionName) { return; }
    if (target.options && (target.options[optionName] !== undefined)) {
      return target.options[optionName];
    } else {
      return target[optionName];
    }
  };
  
  // Proxy `Marionette.getOption`
  Marionette.proxyGetOption = function(optionName) {
    return Marionette.getOption(this, optionName);
  };
  
  // Similar to `_.result`, this is a simple helper
  // If a function is provided we call it with context
  // otherwise just return the value. If the value is
  // undefined return a default value
  Marionette._getValue = function(value, context, params) {
    if (_.isFunction(value)) {
      value = params ? value.apply(context, params) : value.call(context);
    }
    return value;
  };
  
  // Marionette.normalizeMethods
  // ----------------------
  
  // Pass in a mapping of events => functions or function names
  // and return a mapping of events => functions
  Marionette.normalizeMethods = function(hash) {
    return _.reduce(hash, function(normalizedHash, method, name) {
      if (!_.isFunction(method)) {
        method = this[method];
      }
      if (method) {
        normalizedHash[name] = method;
      }
      return normalizedHash;
    }, {}, this);
  };
  
  // utility method for parsing @ui. syntax strings
  // into associated selector
  Marionette.normalizeUIString = function(uiString, ui) {
    return uiString.replace(/@ui\.[a-zA-Z_$0-9]*/g, function(r) {
      return ui[r.slice(4)];
    });
  };
  
  // allows for the use of the @ui. syntax within
  // a given key for triggers and events
  // swaps the @ui with the associated selector.
  // Returns a new, non-mutated, parsed events hash.
  Marionette.normalizeUIKeys = function(hash, ui) {
    return _.reduce(hash, function(memo, val, key) {
      var normalizedKey = Marionette.normalizeUIString(key, ui);
      memo[normalizedKey] = val;
      return memo;
    }, {});
  };
  
  // allows for the use of the @ui. syntax within
  // a given value for regions
  // swaps the @ui with the associated selector
  Marionette.normalizeUIValues = function(hash, ui, properties) {
    _.each(hash, function(val, key) {
      if (_.isString(val)) {
        hash[key] = Marionette.normalizeUIString(val, ui);
      } else if (_.isObject(val) && _.isArray(properties)) {
        _.extend(val, Marionette.normalizeUIValues(_.pick(val, properties), ui));
        /* Value is an object, and we got an array of embedded property names to normalize. */
        _.each(properties, function(property) {
          var propertyVal = val[property];
          if (_.isString(propertyVal)) {
            val[property] = Marionette.normalizeUIString(propertyVal, ui);
          }
        });
      }
    });
    return hash;
  };
  
  // Mix in methods from Underscore, for iteration, and other
  // collection related features.
  // Borrowing this code from Backbone.Collection:
  // http://backbonejs.org/docs/backbone.html#section-121
  Marionette.actAsCollection = function(object, listProperty) {
    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',
      'select', 'reject', 'every', 'all', 'some', 'any', 'include',
      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',
      'last', 'without', 'isEmpty', 'pluck'];
  
    _.each(methods, function(method) {
      object[method] = function() {
        var list = _.values(_.result(this, listProperty));
        var args = [list].concat(_.toArray(arguments));
        return _[method].apply(_, args);
      };
    });
  };
  
  var deprecate = Marionette.deprecate = function(message, test) {
    if (_.isObject(message)) {
      message = (
        message.prev + ' is going to be removed in the future. ' +
        'Please use ' + message.next + ' instead.' +
        (message.url ? ' See: ' + message.url : '')
      );
    }
  
    if ((test === undefined || !test) && !deprecate._cache[message]) {
      deprecate._warn('Deprecation warning: ' + message);
      deprecate._cache[message] = true;
    }
  };
  
  deprecate._warn = typeof console !== 'undefined' && (console.warn || console.log) || function() {};
  deprecate._cache = {};
  
  /* jshint maxstatements: 14, maxcomplexity: 7 */
  
  // Trigger Method
  // --------------
  
  Marionette._triggerMethod = (function() {
    // split the event name on the ":"
    var splitter = /(^|:)(\w)/gi;
  
    // take the event section ("section1:section2:section3")
    // and turn it in to uppercase name
    function getEventName(match, prefix, eventName) {
      return eventName.toUpperCase();
    }
  
    return function(context, event, args) {
      var noEventArg = arguments.length < 3;
      if (noEventArg) {
        args = event;
        event = args[0];
      }
  
      // get the method name from the event name
      var methodName = 'on' + event.replace(splitter, getEventName);
      var method = context[methodName];
      var result;
  
      // call the onMethodName if it exists
      if (_.isFunction(method)) {
        // pass all args, except the event name
        result = method.apply(context, noEventArg ? _.rest(args) : args);
      }
  
      // trigger the event, if a trigger method exists
      if (_.isFunction(context.trigger)) {
        if (noEventArg + args.length > 1) {
          context.trigger.apply(context, noEventArg ? args : [event].concat(_.drop(args, 0)));
        } else {
          context.trigger(event);
        }
      }
  
      return result;
    };
  })();
  
  // Trigger an event and/or a corresponding method name. Examples:
  //
  // `this.triggerMethod("foo")` will trigger the "foo" event and
  // call the "onFoo" method.
  //
  // `this.triggerMethod("foo:bar")` will trigger the "foo:bar" event and
  // call the "onFooBar" method.
  Marionette.triggerMethod = function(event) {
    return Marionette._triggerMethod(this, arguments);
  };
  
  // triggerMethodOn invokes triggerMethod on a specific context
  //
  // e.g. `Marionette.triggerMethodOn(view, 'show')`
  // will trigger a "show" event or invoke onShow the view.
  Marionette.triggerMethodOn = function(context) {
    var fnc = _.isFunction(context.triggerMethod) ?
                  context.triggerMethod :
                  Marionette.triggerMethod;
  
    return fnc.apply(context, _.rest(arguments));
  };
  
  // DOM Refresh
  // -----------
  
  // Monitor a view's state, and after it has been rendered and shown
  // in the DOM, trigger a "dom:refresh" event every time it is
  // re-rendered.
  
  Marionette.MonitorDOMRefresh = function(view) {
  
    // track when the view has been shown in the DOM,
    // using a Marionette.Region (or by other means of triggering "show")
    function handleShow() {
      view._isShown = true;
      triggerDOMRefresh();
    }
  
    // track when the view has been rendered
    function handleRender() {
      view._isRendered = true;
      triggerDOMRefresh();
    }
  
    // Trigger the "dom:refresh" event and corresponding "onDomRefresh" method
    function triggerDOMRefresh() {
      if (view._isShown && view._isRendered && Marionette.isNodeAttached(view.el)) {
        if (_.isFunction(view.triggerMethod)) {
          view.triggerMethod('dom:refresh');
        }
      }
    }
  
    view.on({
      show: handleShow,
      render: handleRender
    });
  };
  
  /* jshint maxparams: 5 */
  
  // Bind Entity Events & Unbind Entity Events
  // -----------------------------------------
  //
  // These methods are used to bind/unbind a backbone "entity" (e.g. collection/model)
  // to methods on a target object.
  //
  // The first parameter, `target`, must have the Backbone.Events module mixed in.
  //
  // The second parameter is the `entity` (Backbone.Model, Backbone.Collection or
  // any object that has Backbone.Events mixed in) to bind the events from.
  //
  // The third parameter is a hash of { "event:name": "eventHandler" }
  // configuration. Multiple handlers can be separated by a space. A
  // function can be supplied instead of a string handler name.
  
  (function(Marionette) {
    'use strict';
  
    // Bind the event to handlers specified as a string of
    // handler names on the target object
    function bindFromStrings(target, entity, evt, methods) {
      var methodNames = methods.split(/\s+/);
  
      _.each(methodNames, function(methodName) {
  
        var method = target[methodName];
        if (!method) {
          throw new Marionette.Error('Method "' + methodName +
            '" was configured as an event handler, but does not exist.');
        }
  
        target.listenTo(entity, evt, method);
      });
    }
  
    // Bind the event to a supplied callback function
    function bindToFunction(target, entity, evt, method) {
      target.listenTo(entity, evt, method);
    }
  
    // Bind the event to handlers specified as a string of
    // handler names on the target object
    function unbindFromStrings(target, entity, evt, methods) {
      var methodNames = methods.split(/\s+/);
  
      _.each(methodNames, function(methodName) {
        var method = target[methodName];
        target.stopListening(entity, evt, method);
      });
    }
  
    // Bind the event to a supplied callback function
    function unbindToFunction(target, entity, evt, method) {
      target.stopListening(entity, evt, method);
    }
  
    // generic looping function
    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {
      if (!entity || !bindings) { return; }
  
      // type-check bindings
      if (!_.isObject(bindings)) {
        throw new Marionette.Error({
          message: 'Bindings must be an object or function.',
          url: 'marionette.functions.html#marionettebindentityevents'
        });
      }
  
      // allow the bindings to be a function
      bindings = Marionette._getValue(bindings, target);
  
      // iterate the bindings and bind them
      _.each(bindings, function(methods, evt) {
  
        // allow for a function as the handler,
        // or a list of event names as a string
        if (_.isFunction(methods)) {
          functionCallback(target, entity, evt, methods);
        } else {
          stringCallback(target, entity, evt, methods);
        }
  
      });
    }
  
    // Export Public API
    Marionette.bindEntityEvents = function(target, entity, bindings) {
      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);
    };
  
    Marionette.unbindEntityEvents = function(target, entity, bindings) {
      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);
    };
  
    // Proxy `bindEntityEvents`
    Marionette.proxyBindEntityEvents = function(entity, bindings) {
      return Marionette.bindEntityEvents(this, entity, bindings);
    };
  
    // Proxy `unbindEntityEvents`
    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {
      return Marionette.unbindEntityEvents(this, entity, bindings);
    };
  })(Marionette);
  

  // Error
  // -----
  
  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];
  
  Marionette.Error = Marionette.extend.call(Error, {
    urlRoot: 'http://marionettejs.com/docs/v' + Marionette.VERSION + '/',
  
    constructor: function(message, options) {
      if (_.isObject(message)) {
        options = message;
        message = options.message;
      } else if (!options) {
        options = {};
      }
  
      var error = Error.call(this, message);
      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));
  
      this.captureStackTrace();
  
      if (options.url) {
        this.url = this.urlRoot + options.url;
      }
    },
  
    captureStackTrace: function() {
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, Marionette.Error);
      }
    },
  
    toString: function() {
      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');
    }
  });
  
  Marionette.Error.extend = Marionette.extend;
  
  // Callbacks
  // ---------
  
  // A simple way of managing a collection of callbacks
  // and executing them at a later point in time, using jQuery's
  // `Deferred` object.
  Marionette.Callbacks = function() {
    this._deferred = Marionette.Deferred();
    this._callbacks = [];
  };
  
  _.extend(Marionette.Callbacks.prototype, {
  
    // Add a callback to be executed. Callbacks added here are
    // guaranteed to execute, even if they are added after the
    // `run` method is called.
    add: function(callback, contextOverride) {
      var promise = _.result(this._deferred, 'promise');
  
      this._callbacks.push({cb: callback, ctx: contextOverride});
  
      promise.then(function(args) {
        if (contextOverride) { args.context = contextOverride; }
        callback.call(args.context, args.options);
      });
    },
  
    // Run all registered callbacks with the context specified.
    // Additional callbacks can be added after this has been run
    // and they will still be executed.
    run: function(options, context) {
      this._deferred.resolve({
        options: options,
        context: context
      });
    },
  
    // Resets the list of callbacks to be run, allowing the same list
    // to be run multiple times - whenever the `run` method is called.
    reset: function() {
      var callbacks = this._callbacks;
      this._deferred = Marionette.Deferred();
      this._callbacks = [];
  
      _.each(callbacks, function(cb) {
        this.add(cb.cb, cb.ctx);
      }, this);
    }
  });
  
  // Controller
  // ----------
  
  // A multi-purpose object to use as a controller for
  // modules and routers, and as a mediator for workflow
  // and coordination of other objects, views, and more.
  Marionette.Controller = function(options) {
    this.options = options || {};
  
    if (_.isFunction(this.initialize)) {
      this.initialize(this.options);
    }
  };
  
  Marionette.Controller.extend = Marionette.extend;
  
  // Controller Methods
  // --------------
  
  // Ensure it can trigger events with Backbone.Events
  _.extend(Marionette.Controller.prototype, Backbone.Events, {
    destroy: function() {
      Marionette._triggerMethod(this, 'before:destroy', arguments);
      Marionette._triggerMethod(this, 'destroy', arguments);
  
      this.stopListening();
      this.off();
      return this;
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod,
  
    // A handy way to merge options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption
  
  });
  
  // Object
  // ------
  
  // A Base Class that other Classes should descend from.
  // Object borrows many conventions and utilities from Backbone.
  Marionette.Object = function(options) {
    this.options = _.extend({}, _.result(this, 'options'), options);
  
    this.initialize.apply(this, arguments);
  };
  
  Marionette.Object.extend = Marionette.extend;
  
  // Object Methods
  // --------------
  
  // Ensure it can trigger events with Backbone.Events
  _.extend(Marionette.Object.prototype, Backbone.Events, {
  
    //this is a noop method intended to be overridden by classes that extend from this base
    initialize: function() {},
  
    destroy: function() {
      this.triggerMethod('before:destroy');
      this.triggerMethod('destroy');
      this.stopListening();
  
      return this;
    },
  
    // Import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod,
  
    // A handy way to merge options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    // Proxy `bindEntityEvents` to enable binding view's events from another entity.
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  /* jshint maxcomplexity: 16, maxstatements: 45, maxlen: 120 */
  
  // Region
  // ------
  
  // Manage the visual regions of your composite application. See
  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/
  
  Marionette.Region = Marionette.Object.extend({
    constructor: function(options) {
  
      // set options temporarily so that we can get `el`.
      // options will be overriden by Object.constructor
      this.options = options || {};
      this.el = this.getOption('el');
  
      // Handle when this.el is passed in as a $ wrapped element.
      this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;
  
      if (!this.el) {
        throw new Marionette.Error({
          name: 'NoElError',
          message: 'An "el" must be specified for a region.'
        });
      }
  
      this.$el = this.getEl(this.el);
      Marionette.Object.call(this, options);
    },
  
    // Displays a backbone view instance inside of the region.
    // Handles calling the `render` method for you. Reads content
    // directly from the `el` attribute. Also calls an optional
    // `onShow` and `onDestroy` method on your view, just after showing
    // or just before destroying the view, respectively.
    // The `preventDestroy` option can be used to prevent a view from
    // the old view being destroyed on show.
    // The `forceShow` option can be used to force a view to be
    // re-rendered if it's already shown in the region.
    show: function(view, options) {
      if (!this._ensureElement()) {
        return;
      }
  
      this._ensureViewIsIntact(view);
  
      var showOptions     = options || {};
      var isDifferentView = view !== this.currentView;
      var preventDestroy  = !!showOptions.preventDestroy;
      var forceShow       = !!showOptions.forceShow;
  
      // We are only changing the view if there is a current view to change to begin with
      var isChangingView = !!this.currentView;
  
      // Only destroy the current view if we don't want to `preventDestroy` and if
      // the view given in the first argument is different than `currentView`
      var _shouldDestroyView = isDifferentView && !preventDestroy;
  
      // Only show the view given in the first argument if it is different than
      // the current view or if we want to re-show the view. Note that if
      // `_shouldDestroyView` is true, then `_shouldShowView` is also necessarily true.
      var _shouldShowView = isDifferentView || forceShow;
  
      if (isChangingView) {
        this.triggerMethod('before:swapOut', this.currentView, this, options);
      }
  
      if (this.currentView) {
        delete this.currentView._parent;
      }
  
      if (_shouldDestroyView) {
        this.empty();
  
      // A `destroy` event is attached to the clean up manually removed views.
      // We need to detach this event when a new view is going to be shown as it
      // is no longer relevant.
      } else if (isChangingView && _shouldShowView) {
        this.currentView.off('destroy', this.empty, this);
      }
  
      if (_shouldShowView) {
  
        // We need to listen for if a view is destroyed
        // in a way other than through the region.
        // If this happens we need to remove the reference
        // to the currentView since once a view has been destroyed
        // we can not reuse it.
        view.once('destroy', this.empty, this);
        view.render();
  
        view._parent = this;
  
        if (isChangingView) {
          this.triggerMethod('before:swap', view, this, options);
        }
  
        this.triggerMethod('before:show', view, this, options);
        Marionette.triggerMethodOn(view, 'before:show', view, this, options);
  
        if (isChangingView) {
          this.triggerMethod('swapOut', this.currentView, this, options);
        }
  
        // An array of views that we're about to display
        var attachedRegion = Marionette.isNodeAttached(this.el);
  
        // The views that we're about to attach to the document
        // It's important that we prevent _getNestedViews from being executed unnecessarily
        // as it's a potentially-slow method
        var displayedViews = [];
  
        var triggerBeforeAttach = showOptions.triggerBeforeAttach || this.triggerBeforeAttach;
        var triggerAttach = showOptions.triggerAttach || this.triggerAttach;
  
        if (attachedRegion && triggerBeforeAttach) {
          displayedViews = this._displayedViews(view);
          this._triggerAttach(displayedViews, 'before:');
        }
  
        this.attachHtml(view);
        this.currentView = view;
  
        if (attachedRegion && triggerAttach) {
          displayedViews = this._displayedViews(view);
          this._triggerAttach(displayedViews);
        }
  
        if (isChangingView) {
          this.triggerMethod('swap', view, this, options);
        }
  
        this.triggerMethod('show', view, this, options);
        Marionette.triggerMethodOn(view, 'show', view, this, options);
  
        return this;
      }
  
      return this;
    },
  
    triggerBeforeAttach: true,
    triggerAttach: true,
  
    _triggerAttach: function(views, prefix) {
      var eventName = (prefix || '') + 'attach';
      _.each(views, function(view) {
        Marionette.triggerMethodOn(view, eventName, view, this);
      }, this);
    },
  
    _displayedViews: function(view) {
      return _.union([view], _.result(view, '_getNestedViews') || []);
    },
  
    _ensureElement: function() {
      if (!_.isObject(this.el)) {
        this.$el = this.getEl(this.el);
        this.el = this.$el[0];
      }
  
      if (!this.$el || this.$el.length === 0) {
        if (this.getOption('allowMissingEl')) {
          return false;
        } else {
          throw new Marionette.Error('An "el" ' + this.$el.selector + ' must exist in DOM');
        }
      }
      return true;
    },
  
    _ensureViewIsIntact: function(view) {
      if (!view) {
        throw new Marionette.Error({
          name: 'ViewNotValid',
          message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'
        });
      }
  
      if (view.isDestroyed) {
        throw new Marionette.Error({
          name: 'ViewDestroyedError',
          message: 'View (cid: "' + view.cid + '") has already been destroyed and cannot be used.'
        });
      }
    },
  
    // Override this method to change how the region finds the DOM
    // element that it manages. Return a jQuery selector object scoped
    // to a provided parent el or the document if none exists.
    getEl: function(el) {
      return Backbone.$(el, Marionette._getValue(this.options.parentEl, this));
    },
  
    // Override this method to change how the new view is
    // appended to the `$el` that the region is managing
    attachHtml: function(view) {
      this.$el.contents().detach();
  
      this.el.appendChild(view.el);
    },
  
    // Destroy the current view, if there is one. If there is no
    // current view, it does nothing and returns immediately.
    empty: function(options) {
      var view = this.currentView;
  
      var preventDestroy = Marionette._getValue(options, 'preventDestroy', this);
      // If there is no view in the region
      // we should not remove anything
      if (!view) { return; }
  
      view.off('destroy', this.empty, this);
      this.triggerMethod('before:empty', view);
      if (!preventDestroy) {
        this._destroyView();
      }
      this.triggerMethod('empty', view);
  
      // Remove region pointer to the currentView
      delete this.currentView;
  
      if (preventDestroy) {
        this.$el.contents().detach();
      }
  
      return this;
    },
  
    // call 'destroy' or 'remove', depending on which is found
    // on the view (if showing a raw Backbone view or a Marionette View)
    _destroyView: function() {
      var view = this.currentView;
  
      if (view.destroy && !view.isDestroyed) {
        view.destroy();
      } else if (view.remove) {
        view.remove();
  
        // appending isDestroyed to raw Backbone View allows regions
        // to throw a ViewDestroyedError for this view
        view.isDestroyed = true;
      }
    },
  
    // Attach an existing view to the region. This
    // will not call `render` or `onShow` for the new view,
    // and will not replace the current HTML for the `el`
    // of the region.
    attachView: function(view) {
      this.currentView = view;
      return this;
    },
  
    // Checks whether a view is currently present within
    // the region. Returns `true` if there is and `false` if
    // no view is present.
    hasView: function() {
      return !!this.currentView;
    },
  
    // Reset the region by destroying any existing view and
    // clearing out the cached `$el`. The next time a view
    // is shown via this region, the region will re-query the
    // DOM for the region's `el`.
    reset: function() {
      this.empty();
  
      if (this.$el) {
        this.el = this.$el.selector;
      }
  
      delete this.$el;
      return this;
    }
  
  },
  
  // Static Methods
  {
  
    // Build an instance of a region by passing in a configuration object
    // and a default region class to use if none is specified in the config.
    //
    // The config object should either be a string as a jQuery DOM selector,
    // a Region class directly, or an object literal that specifies a selector,
    // a custom regionClass, and any options to be supplied to the region:
    //
    // ```js
    // {
    //   selector: "#foo",
    //   regionClass: MyCustomRegion,
    //   allowMissingEl: false
    // }
    // ```
    //
    buildRegion: function(regionConfig, DefaultRegionClass) {
      if (_.isString(regionConfig)) {
        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);
      }
  
      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {
        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);
      }
  
      if (_.isFunction(regionConfig)) {
        return this._buildRegionFromRegionClass(regionConfig);
      }
  
      throw new Marionette.Error({
        message: 'Improper region configuration type.',
        url: 'marionette.region.html#region-configuration-types'
      });
    },
  
    // Build the region from a string selector like '#foo-region'
    _buildRegionFromSelector: function(selector, DefaultRegionClass) {
      return new DefaultRegionClass({el: selector});
    },
  
    // Build the region from a configuration object
    // ```js
    // { selector: '#foo', regionClass: FooRegion, allowMissingEl: false }
    // ```
    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {
      var RegionClass = regionConfig.regionClass || DefaultRegionClass;
      var options = _.omit(regionConfig, 'selector', 'regionClass');
  
      if (regionConfig.selector && !options.el) {
        options.el = regionConfig.selector;
      }
  
      return new RegionClass(options);
    },
  
    // Build the region directly from a given `RegionClass`
    _buildRegionFromRegionClass: function(RegionClass) {
      return new RegionClass();
    }
  });
  
  // Region Manager
  // --------------
  
  // Manage one or more related `Marionette.Region` objects.
  Marionette.RegionManager = Marionette.Controller.extend({
    constructor: function(options) {
      this._regions = {};
      this.length = 0;
  
      Marionette.Controller.call(this, options);
  
      this.addRegions(this.getOption('regions'));
    },
  
    // Add multiple regions using an object literal or a
    // function that returns an object literal, where
    // each key becomes the region name, and each value is
    // the region definition.
    addRegions: function(regionDefinitions, defaults) {
      regionDefinitions = Marionette._getValue(regionDefinitions, this, arguments);
  
      return _.reduce(regionDefinitions, function(regions, definition, name) {
        if (_.isString(definition)) {
          definition = {selector: definition};
        }
        if (definition.selector) {
          definition = _.defaults({}, definition, defaults);
        }
  
        regions[name] = this.addRegion(name, definition);
        return regions;
      }, {}, this);
    },
  
    // Add an individual region to the region manager,
    // and return the region instance
    addRegion: function(name, definition) {
      var region;
  
      if (definition instanceof Marionette.Region) {
        region = definition;
      } else {
        region = Marionette.Region.buildRegion(definition, Marionette.Region);
      }
  
      this.triggerMethod('before:add:region', name, region);
  
      region._parent = this;
      this._store(name, region);
  
      this.triggerMethod('add:region', name, region);
      return region;
    },
  
    // Get a region by name
    get: function(name) {
      return this._regions[name];
    },
  
    // Gets all the regions contained within
    // the `regionManager` instance.
    getRegions: function() {
      return _.clone(this._regions);
    },
  
    // Remove a region by name
    removeRegion: function(name) {
      var region = this._regions[name];
      this._remove(name, region);
  
      return region;
    },
  
    // Empty all regions in the region manager, and
    // remove them
    removeRegions: function() {
      var regions = this.getRegions();
      _.each(this._regions, function(region, name) {
        this._remove(name, region);
      }, this);
  
      return regions;
    },
  
    // Empty all regions in the region manager, but
    // leave them attached
    emptyRegions: function() {
      var regions = this.getRegions();
      _.invoke(regions, 'empty');
      return regions;
    },
  
    // Destroy all regions and shut down the region
    // manager entirely
    destroy: function() {
      this.removeRegions();
      return Marionette.Controller.prototype.destroy.apply(this, arguments);
    },
  
    // internal method to store regions
    _store: function(name, region) {
      if (!this._regions[name]) {
        this.length++;
      }
  
      this._regions[name] = region;
    },
  
    // internal method to remove a region
    _remove: function(name, region) {
      this.triggerMethod('before:remove:region', name, region);
      region.empty();
      region.stopListening();
  
      delete region._parent;
      delete this._regions[name];
      this.length--;
      this.triggerMethod('remove:region', name, region);
    }
  });
  
  Marionette.actAsCollection(Marionette.RegionManager.prototype, '_regions');
  

  // Template Cache
  // --------------
  
  // Manage templates stored in `<script>` blocks,
  // caching them for faster access.
  Marionette.TemplateCache = function(templateId) {
    this.templateId = templateId;
  };
  
  // TemplateCache object-level methods. Manage the template
  // caches from these method calls instead of creating
  // your own TemplateCache instances
  _.extend(Marionette.TemplateCache, {
    templateCaches: {},
  
    // Get the specified template by id. Either
    // retrieves the cached version, or loads it
    // from the DOM.
    get: function(templateId, options) {
      var cachedTemplate = this.templateCaches[templateId];
  
      if (!cachedTemplate) {
        cachedTemplate = new Marionette.TemplateCache(templateId);
        this.templateCaches[templateId] = cachedTemplate;
      }
  
      return cachedTemplate.load(options);
    },
  
    // Clear templates from the cache. If no arguments
    // are specified, clears all templates:
    // `clear()`
    //
    // If arguments are specified, clears each of the
    // specified templates from the cache:
    // `clear("#t1", "#t2", "...")`
    clear: function() {
      var i;
      var args = _.toArray(arguments);
      var length = args.length;
  
      if (length > 0) {
        for (i = 0; i < length; i++) {
          delete this.templateCaches[args[i]];
        }
      } else {
        this.templateCaches = {};
      }
    }
  });
  
  // TemplateCache instance methods, allowing each
  // template cache object to manage its own state
  // and know whether or not it has been loaded
  _.extend(Marionette.TemplateCache.prototype, {
  
    // Internal method to load the template
    load: function(options) {
      // Guard clause to prevent loading this template more than once
      if (this.compiledTemplate) {
        return this.compiledTemplate;
      }
  
      // Load the template and compile it
      var template = this.loadTemplate(this.templateId, options);
      this.compiledTemplate = this.compileTemplate(template, options);
  
      return this.compiledTemplate;
    },
  
    // Load a template from the DOM, by default. Override
    // this method to provide your own template retrieval
    // For asynchronous loading with AMD/RequireJS, consider
    // using a template-loader plugin as described here:
    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs
    loadTemplate: function(templateId, options) {
      var template = Backbone.$(templateId).html();
  
      if (!template || template.length === 0) {
        throw new Marionette.Error({
          name: 'NoTemplateError',
          message: 'Could not find template: "' + templateId + '"'
        });
      }
  
      return template;
    },
  
    // Pre-compile the template before caching it. Override
    // this method if you do not need to pre-compile a template
    // (JST / RequireJS for example) or if you want to change
    // the template engine used (Handebars, etc).
    compileTemplate: function(rawTemplate, options) {
      return _.template(rawTemplate, options);
    }
  });
  
  // Renderer
  // --------
  
  // Render a template with data by passing in the template
  // selector and the data to render.
  Marionette.Renderer = {
  
    // Render a template with data. The `template` parameter is
    // passed to the `TemplateCache` object to retrieve the
    // template function. Override this method to provide your own
    // custom rendering and template handling for all of Marionette.
    render: function(template, data) {
      if (!template) {
        throw new Marionette.Error({
          name: 'TemplateNotFoundError',
          message: 'Cannot render the template since its false, null or undefined.'
        });
      }
  
      var templateFunc = _.isFunction(template) ? template : Marionette.TemplateCache.get(template);
  
      return templateFunc(data);
    }
  };
  

  /* jshint maxlen: 114, nonew: false */
  // View
  // ----
  
  // The core view class that other Marionette views extend from.
  Marionette.View = Backbone.View.extend({
    isDestroyed: false,
  
    constructor: function(options) {
      _.bindAll(this, 'render');
  
      options = Marionette._getValue(options, this);
  
      // this exposes view options to the view initializer
      // this is a backfill since backbone removed the assignment
      // of this.options
      // at some point however this may be removed
      this.options = _.extend({}, _.result(this, 'options'), options);
  
      this._behaviors = Marionette.Behaviors(this);
  
      Backbone.View.call(this, this.options);
  
      Marionette.MonitorDOMRefresh(this);
    },
  
    // Get the template for this view
    // instance. You can set a `template` attribute in the view
    // definition or pass a `template: "whatever"` parameter in
    // to the constructor options.
    getTemplate: function() {
      return this.getOption('template');
    },
  
    // Serialize a model by returning its attributes. Clones
    // the attributes to allow modification.
    serializeModel: function(model) {
      return model.toJSON.apply(model, _.rest(arguments));
    },
  
    // Mix in template helper methods. Looks for a
    // `templateHelpers` attribute, which can either be an
    // object literal, or a function that returns an object
    // literal. All methods and attributes from this object
    // are copies to the object passed in.
    mixinTemplateHelpers: function(target) {
      target = target || {};
      var templateHelpers = this.getOption('templateHelpers');
      templateHelpers = Marionette._getValue(templateHelpers, this);
      return _.extend(target, templateHelpers);
    },
  
    // normalize the keys of passed hash with the views `ui` selectors.
    // `{"@ui.foo": "bar"}`
    normalizeUIKeys: function(hash) {
      var uiBindings = _.result(this, '_uiBindings');
      return Marionette.normalizeUIKeys(hash, uiBindings || _.result(this, 'ui'));
    },
  
    // normalize the values of passed hash with the views `ui` selectors.
    // `{foo: "@ui.bar"}`
    normalizeUIValues: function(hash, properties) {
      var ui = _.result(this, 'ui');
      var uiBindings = _.result(this, '_uiBindings');
      return Marionette.normalizeUIValues(hash, uiBindings || ui, properties);
    },
  
    // Configure `triggers` to forward DOM events to view
    // events. `triggers: {"click .foo": "do:foo"}`
    configureTriggers: function() {
      if (!this.triggers) { return; }
  
      // Allow `triggers` to be configured as a function
      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));
  
      // Configure the triggers, prevent default
      // action and stop propagation of DOM events
      return _.reduce(triggers, function(events, value, key) {
        events[key] = this._buildViewTrigger(value);
        return events;
      }, {}, this);
    },
  
    // Overriding Backbone.View's delegateEvents to handle
    // the `triggers`, `modelEvents`, and `collectionEvents` configuration
    delegateEvents: function(events) {
      this._delegateDOMEvents(events);
      this.bindEntityEvents(this.model, this.getOption('modelEvents'));
      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));
  
      _.each(this._behaviors, function(behavior) {
        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));
        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));
      }, this);
  
      return this;
    },
  
    // internal method to delegate DOM events and triggers
    _delegateDOMEvents: function(eventsArg) {
      var events = Marionette._getValue(eventsArg || this.events, this);
  
      // normalize ui keys
      events = this.normalizeUIKeys(events);
      if (_.isUndefined(eventsArg)) {this.events = events;}
  
      var combinedEvents = {};
  
      // look up if this view has behavior events
      var behaviorEvents = _.result(this, 'behaviorEvents') || {};
      var triggers = this.configureTriggers();
      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};
  
      // behavior events will be overriden by view events and or triggers
      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);
  
      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);
    },
  
    // Overriding Backbone.View's undelegateEvents to handle unbinding
    // the `triggers`, `modelEvents`, and `collectionEvents` config
    undelegateEvents: function() {
      Backbone.View.prototype.undelegateEvents.apply(this, arguments);
  
      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));
      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));
  
      _.each(this._behaviors, function(behavior) {
        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));
        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));
      }, this);
  
      return this;
    },
  
    // Internal helper method to verify whether the view hasn't been destroyed
    _ensureViewIsIntact: function() {
      if (this.isDestroyed) {
        throw new Marionette.Error({
          name: 'ViewDestroyedError',
          message: 'View (cid: "' + this.cid + '") has already been destroyed and cannot be used.'
        });
      }
    },
  
    // Default `destroy` implementation, for removing a view from the
    // DOM and unbinding it. Regions will call this method
    // for you. You can specify an `onDestroy` method in your view to
    // add custom code that is called after the view is destroyed.
    destroy: function() {
      if (this.isDestroyed) { return this; }
  
      var args = _.toArray(arguments);
  
      this.triggerMethod.apply(this, ['before:destroy'].concat(args));
  
      // mark as destroyed before doing the actual destroy, to
      // prevent infinite loops within "destroy" event handlers
      // that are trying to destroy other views
      this.isDestroyed = true;
      this.triggerMethod.apply(this, ['destroy'].concat(args));
  
      // unbind UI elements
      this.unbindUIElements();
  
      this.isRendered = false;
  
      // remove the view from the DOM
      this.remove();
  
      // Call destroy on each behavior after
      // destroying the view.
      // This unbinds event listeners
      // that behaviors have registered for.
      _.invoke(this._behaviors, 'destroy', args);
  
      return this;
    },
  
    bindUIElements: function() {
      this._bindUIElements();
      _.invoke(this._behaviors, this._bindUIElements);
    },
  
    // This method binds the elements specified in the "ui" hash inside the view's code with
    // the associated jQuery selectors.
    _bindUIElements: function() {
      if (!this.ui) { return; }
  
      // store the ui hash in _uiBindings so they can be reset later
      // and so re-rendering the view will be able to find the bindings
      if (!this._uiBindings) {
        this._uiBindings = this.ui;
      }
  
      // get the bindings result, as a function or otherwise
      var bindings = _.result(this, '_uiBindings');
  
      // empty the ui so we don't have anything to start with
      this.ui = {};
  
      // bind each of the selectors
      _.each(bindings, function(selector, key) {
        this.ui[key] = this.$(selector);
      }, this);
    },
  
    // This method unbinds the elements specified in the "ui" hash
    unbindUIElements: function() {
      this._unbindUIElements();
      _.invoke(this._behaviors, this._unbindUIElements);
    },
  
    _unbindUIElements: function() {
      if (!this.ui || !this._uiBindings) { return; }
  
      // delete all of the existing ui bindings
      _.each(this.ui, function($el, name) {
        delete this.ui[name];
      }, this);
  
      // reset the ui element to the original bindings configuration
      this.ui = this._uiBindings;
      delete this._uiBindings;
    },
  
    // Internal method to create an event handler for a given `triggerDef` like
    // 'click:foo'
    _buildViewTrigger: function(triggerDef) {
      var hasOptions = _.isObject(triggerDef);
  
      var options = _.defaults({}, (hasOptions ? triggerDef : {}), {
        preventDefault: true,
        stopPropagation: true
      });
  
      var eventName = hasOptions ? options.event : triggerDef;
  
      return function(e) {
        if (e) {
          if (e.preventDefault && options.preventDefault) {
            e.preventDefault();
          }
  
          if (e.stopPropagation && options.stopPropagation) {
            e.stopPropagation();
          }
        }
  
        var args = {
          view: this,
          model: this.model,
          collection: this.collection
        };
  
        this.triggerMethod(eventName, args);
      };
    },
  
    setElement: function() {
      var ret = Backbone.View.prototype.setElement.apply(this, arguments);
  
      // proxy behavior $el to the view's $el.
      // This is needed because a view's $el proxy
      // is not set until after setElement is called.
      _.invoke(this._behaviors, 'proxyViewProperties', this);
  
      return ret;
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: function() {
      var ret = Marionette._triggerMethod(this, arguments);
  
      this._triggerEventOnBehaviors(arguments);
      this._triggerEventOnParentLayout(arguments[0], _.rest(arguments));
  
      return ret;
    },
  
    _triggerEventOnBehaviors: function(args) {
      var triggerMethod = Marionette._triggerMethod;
      var behaviors = this._behaviors;
      // Use good ol' for as this is a very hot function
      for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {
        triggerMethod(behaviors[i], args);
      }
    },
  
    _triggerEventOnParentLayout: function(eventName, args) {
      var layoutView = this._parentLayoutView();
      if (!layoutView) {
        return;
      }
  
      // invoke triggerMethod on parent view
      var eventPrefix = Marionette.getOption(layoutView, 'childViewEventPrefix');
      var prefixedEventName = eventPrefix + ':' + eventName;
  
      Marionette._triggerMethod(layoutView, [prefixedEventName, this].concat(args));
  
      // call the parent view's childEvents handler
      var childEvents = Marionette.getOption(layoutView, 'childEvents');
      var normalizedChildEvents = layoutView.normalizeMethods(childEvents);
  
      if (!!normalizedChildEvents && _.isFunction(normalizedChildEvents[eventName])) {
        normalizedChildEvents[eventName].apply(layoutView, [this].concat(args));
      }
    },
  
    // This method returns any views that are immediate
    // children of this view
    _getImmediateChildren: function() {
      return [];
    },
  
    // Returns an array of every nested view within this view
    _getNestedViews: function() {
      var children = this._getImmediateChildren();
  
      if (!children.length) { return children; }
  
      return _.reduce(children, function(memo, view) {
        if (!view._getNestedViews) { return memo; }
        return memo.concat(view._getNestedViews());
      }, children);
    },
  
    // Internal utility for building an ancestor
    // view tree list.
    _getAncestors: function() {
      var ancestors = [];
      var parent  = this._parent;
  
      while (parent) {
        ancestors.push(parent);
        parent = parent._parent;
      }
  
      return ancestors;
    },
  
    // Returns the containing parent view.
    _parentLayoutView: function() {
      var ancestors = this._getAncestors();
      return _.find(ancestors, function(parent) {
        return parent instanceof Marionette.LayoutView;
      });
    },
  
    // Imports the "normalizeMethods" to transform hashes of
    // events=>function references/names to a hash of events=>function references
    normalizeMethods: Marionette.normalizeMethods,
  
    // A handy way to merge passed-in options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    // Proxy `bindEntityEvents` to enable binding view's events from another entity.
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  // Item View
  // ---------
  
  // A single item view implementation that contains code for rendering
  // with underscore.js templates, serializing the view's model or collection,
  // and calling several methods on extended views, such as `onRender`.
  Marionette.ItemView = Marionette.View.extend({
  
    // Setting up the inheritance chain which allows changes to
    // Marionette.View.prototype.constructor which allows overriding
    constructor: function() {
      Marionette.View.apply(this, arguments);
    },
  
    // Serialize the model or collection for the view. If a model is
    // found, the view's `serializeModel` is called. If a collection is found,
    // each model in the collection is serialized by calling
    // the view's `serializeCollection` and put into an `items` array in
    // the resulting data. If both are found, defaults to the model.
    // You can override the `serializeData` method in your own view definition,
    // to provide custom serialization for your view's data.
    serializeData: function() {
      if (!this.model && !this.collection) {
        return {};
      }
  
      var args = [this.model || this.collection];
      if (arguments.length) {
        args.push.apply(args, arguments);
      }
  
      if (this.model) {
        return this.serializeModel.apply(this, args);
      } else {
        return {
          items: this.serializeCollection.apply(this, args)
        };
      }
    },
  
    // Serialize a collection by serializing each of its models.
    serializeCollection: function(collection) {
      return collection.toJSON.apply(collection, _.rest(arguments));
    },
  
    // Render the view, defaulting to underscore.js templates.
    // You can override this in your view definition to provide
    // a very specific rendering for your view. In general, though,
    // you should override the `Marionette.Renderer` object to
    // change how Marionette renders views.
    render: function() {
      this._ensureViewIsIntact();
  
      this.triggerMethod('before:render', this);
  
      this._renderTemplate();
      this.isRendered = true;
      this.bindUIElements();
  
      this.triggerMethod('render', this);
  
      return this;
    },
  
    // Internal method to render the template with the serialized data
    // and template helpers via the `Marionette.Renderer` object.
    // Throws an `UndefinedTemplateError` error if the template is
    // any falsely value but literal `false`.
    _renderTemplate: function() {
      var template = this.getTemplate();
  
      // Allow template-less item views
      if (template === false) {
        return;
      }
  
      if (!template) {
        throw new Marionette.Error({
          name: 'UndefinedTemplateError',
          message: 'Cannot render the template since it is null or undefined.'
        });
      }
  
      // Add in entity data and template helpers
      var data = this.mixinTemplateHelpers(this.serializeData());
  
      // Render and add to el
      var html = Marionette.Renderer.render(template, data, this);
      this.attachElContent(html);
  
      return this;
    },
  
    // Attaches the content of a given view.
    // This method can be overridden to optimize rendering,
    // or to render in a non standard way.
    //
    // For example, using `innerHTML` instead of `$el.html`
    //
    // ```js
    // attachElContent: function(html) {
    //   this.el.innerHTML = html;
    //   return this;
    // }
    // ```
    attachElContent: function(html) {
      this.$el.html(html);
  
      return this;
    }
  });
  
  /* jshint maxstatements: 14 */
  
  // Collection View
  // ---------------
  
  // A view that iterates over a Backbone.Collection
  // and renders an individual child view for each model.
  Marionette.CollectionView = Marionette.View.extend({
  
    // used as the prefix for child view events
    // that are forwarded through the collectionview
    childViewEventPrefix: 'childview',
  
    // flag for maintaining the sorted order of the collection
    sort: true,
  
    // constructor
    // option to pass `{sort: false}` to prevent the `CollectionView` from
    // maintaining the sorted order of the collection.
    // This will fallback onto appending childView's to the end.
    //
    // option to pass `{comparator: compFunction()}` to allow the `CollectionView`
    // to use a custom sort order for the collection.
    constructor: function(options) {
  
      this.once('render', this._initialEvents);
      this._initChildViewStorage();
  
      Marionette.View.apply(this, arguments);
  
      this.on('show', this._onShowCalled);
  
      this.initRenderBuffer();
    },
  
    // Instead of inserting elements one by one into the page,
    // it's much more performant to insert elements into a document
    // fragment and then insert that document fragment into the page
    initRenderBuffer: function() {
      this._bufferedChildren = [];
    },
  
    startBuffering: function() {
      this.initRenderBuffer();
      this.isBuffering = true;
    },
  
    endBuffering: function() {
      this.isBuffering = false;
      this._triggerBeforeShowBufferedChildren();
  
      this.attachBuffer(this);
  
      this._triggerShowBufferedChildren();
      this.initRenderBuffer();
    },
  
    _triggerBeforeShowBufferedChildren: function() {
      if (this._isShown) {
        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'before:show'));
      }
    },
  
    _triggerShowBufferedChildren: function() {
      if (this._isShown) {
        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'show'));
  
        this._bufferedChildren = [];
      }
    },
  
    // Internal method for _.each loops to call `Marionette.triggerMethodOn` on
    // a child view
    _triggerMethodOnChild: function(event, childView) {
      Marionette.triggerMethodOn(childView, event);
    },
  
    // Configured the initial events that the collection view
    // binds to.
    _initialEvents: function() {
      if (this.collection) {
        this.listenTo(this.collection, 'add', this._onCollectionAdd);
        this.listenTo(this.collection, 'remove', this._onCollectionRemove);
        this.listenTo(this.collection, 'reset', this.render);
  
        if (this.getOption('sort')) {
          this.listenTo(this.collection, 'sort', this._sortViews);
        }
      }
    },
  
    // Handle a child added to the collection
    _onCollectionAdd: function(child, collection, opts) {
      var index;
      if (opts.at !== undefined) {
        index = opts.at;
      } else {
        index = _.indexOf(this._filteredSortedModels(), child);
      }
  
      if (this._shouldAddChild(child, index)) {
        this.destroyEmptyView();
        var ChildView = this.getChildView(child);
        this.addChild(child, ChildView, index);
      }
    },
  
    // get the child view by model it holds, and remove it
    _onCollectionRemove: function(model) {
      var view = this.children.findByModel(model);
      this.removeChildView(view);
      this.checkEmpty();
    },
  
    _onShowCalled: function() {
      this.children.each(_.partial(this._triggerMethodOnChild, 'show'));
    },
  
    // Render children views. Override this method to
    // provide your own implementation of a render function for
    // the collection view.
    render: function() {
      this._ensureViewIsIntact();
      this.triggerMethod('before:render', this);
      this._renderChildren();
      this.isRendered = true;
      this.triggerMethod('render', this);
      return this;
    },
  
    // Reorder DOM after sorting. When your element's rendering
    // do not use their index, you can pass reorderOnSort: true
    // to only reorder the DOM after a sort instead of rendering
    // all the collectionView
    reorder: function() {
      var children = this.children;
      var models = this._filteredSortedModels();
      var modelsChanged = _.find(models, function(model) {
        return !children.findByModel(model);
      });
  
      // If the models we're displaying have changed due to filtering
      // We need to add and/or remove child views
      // So render as normal
      if (modelsChanged) {
        this.render();
      } else {
        // get the DOM nodes in the same order as the models
        var els = _.map(models, function(model) {
          return children.findByModel(model).el;
        });
  
        // since append moves elements that are already in the DOM,
        // appending the elements will effectively reorder them
        this.triggerMethod('before:reorder');
        this._appendReorderedChildren(els);
        this.triggerMethod('reorder');
      }
    },
  
    // Render view after sorting. Override this method to
    // change how the view renders after a `sort` on the collection.
    // An example of this would be to only `renderChildren` in a `CompositeView`
    // rather than the full view.
    resortView: function() {
      if (Marionette.getOption(this, 'reorderOnSort')) {
        this.reorder();
      } else {
        this.render();
      }
    },
  
    // Internal method. This checks for any changes in the order of the collection.
    // If the index of any view doesn't match, it will render.
    _sortViews: function() {
      var models = this._filteredSortedModels();
  
      // check for any changes in sort order of views
      var orderChanged = _.find(models, function(item, index) {
        var view = this.children.findByModel(item);
        return !view || view._index !== index;
      }, this);
  
      if (orderChanged) {
        this.resortView();
      }
    },
  
    // Internal reference to what index a `emptyView` is.
    _emptyViewIndex: -1,
  
    // Internal method. Separated so that CompositeView can append to the childViewContainer
    // if necessary
    _appendReorderedChildren: function(children) {
      this.$el.append(children);
    },
  
    // Internal method. Separated so that CompositeView can have
    // more control over events being triggered, around the rendering
    // process
    _renderChildren: function() {
      this.destroyEmptyView();
      this.destroyChildren();
  
      if (this.isEmpty(this.collection)) {
        this.showEmptyView();
      } else {
        this.triggerMethod('before:render:collection', this);
        this.startBuffering();
        this.showCollection();
        this.endBuffering();
        this.triggerMethod('render:collection', this);
  
        // If we have shown children and none have passed the filter, show the empty view
        if (this.children.isEmpty()) {
          this.showEmptyView();
        }
      }
    },
  
    // Internal method to loop through collection and show each child view.
    showCollection: function() {
      var ChildView;
  
      var models = this._filteredSortedModels();
  
      _.each(models, function(child, index) {
        ChildView = this.getChildView(child);
        this.addChild(child, ChildView, index);
      }, this);
    },
  
    // Allow the collection to be sorted by a custom view comparator
    _filteredSortedModels: function() {
      var models;
      var viewComparator = this.getViewComparator();
  
      if (viewComparator) {
        if (_.isString(viewComparator) || viewComparator.length === 1) {
          models = this.collection.sortBy(viewComparator, this);
        } else {
          models = _.clone(this.collection.models).sort(_.bind(viewComparator, this));
        }
      } else {
        models = this.collection.models;
      }
  
      // Filter after sorting in case the filter uses the index
      if (this.getOption('filter')) {
        models = _.filter(models, function(model, index) {
          return this._shouldAddChild(model, index);
        }, this);
      }
  
      return models;
    },
  
    // Internal method to show an empty view in place of
    // a collection of child views, when the collection is empty
    showEmptyView: function() {
      var EmptyView = this.getEmptyView();
  
      if (EmptyView && !this._showingEmptyView) {
        this.triggerMethod('before:render:empty');
  
        this._showingEmptyView = true;
        var model = new Backbone.Model();
        this.addEmptyView(model, EmptyView);
  
        this.triggerMethod('render:empty');
      }
    },
  
    // Internal method to destroy an existing emptyView instance
    // if one exists. Called when a collection view has been
    // rendered empty, and then a child is added to the collection.
    destroyEmptyView: function() {
      if (this._showingEmptyView) {
        this.triggerMethod('before:remove:empty');
  
        this.destroyChildren();
        delete this._showingEmptyView;
  
        this.triggerMethod('remove:empty');
      }
    },
  
    // Retrieve the empty view class
    getEmptyView: function() {
      return this.getOption('emptyView');
    },
  
    // Render and show the emptyView. Similar to addChild method
    // but "add:child" events are not fired, and the event from
    // emptyView are not forwarded
    addEmptyView: function(child, EmptyView) {
  
      // get the emptyViewOptions, falling back to childViewOptions
      var emptyViewOptions = this.getOption('emptyViewOptions') ||
                            this.getOption('childViewOptions');
  
      if (_.isFunction(emptyViewOptions)) {
        emptyViewOptions = emptyViewOptions.call(this, child, this._emptyViewIndex);
      }
  
      // build the empty view
      var view = this.buildChildView(child, EmptyView, emptyViewOptions);
  
      view._parent = this;
  
      // Proxy emptyView events
      this.proxyChildEvents(view);
  
      // trigger the 'before:show' event on `view` if the collection view
      // has already been shown
      if (this._isShown) {
        Marionette.triggerMethodOn(view, 'before:show');
      }
  
      // Store the `emptyView` like a `childView` so we can properly
      // remove and/or close it later
      this.children.add(view);
  
      // Render it and show it
      this.renderChildView(view, this._emptyViewIndex);
  
      // call the 'show' method if the collection view
      // has already been shown
      if (this._isShown) {
        Marionette.triggerMethodOn(view, 'show');
      }
    },
  
    // Retrieve the `childView` class, either from `this.options.childView`
    // or from the `childView` in the object definition. The "options"
    // takes precedence.
    // This method receives the model that will be passed to the instance
    // created from this `childView`. Overriding methods may use the child
    // to determine what `childView` class to return.
    getChildView: function(child) {
      var childView = this.getOption('childView');
  
      if (!childView) {
        throw new Marionette.Error({
          name: 'NoChildViewError',
          message: 'A "childView" must be specified'
        });
      }
  
      return childView;
    },
  
    // Render the child's view and add it to the
    // HTML for the collection view at a given index.
    // This will also update the indices of later views in the collection
    // in order to keep the children in sync with the collection.
    addChild: function(child, ChildView, index) {
      var childViewOptions = this.getOption('childViewOptions');
      childViewOptions = Marionette._getValue(childViewOptions, this, [child, index]);
  
      var view = this.buildChildView(child, ChildView, childViewOptions);
  
      // increment indices of views after this one
      this._updateIndices(view, true, index);
  
      this._addChildView(view, index);
  
      view._parent = this;
  
      return view;
    },
  
    // Internal method. This decrements or increments the indices of views after the
    // added/removed view to keep in sync with the collection.
    _updateIndices: function(view, increment, index) {
      if (!this.getOption('sort')) {
        return;
      }
  
      if (increment) {
        // assign the index to the view
        view._index = index;
      }
  
      // update the indexes of views after this one
      this.children.each(function(laterView) {
        if (laterView._index >= view._index) {
          laterView._index += increment ? 1 : -1;
        }
      });
    },
  
    // Internal Method. Add the view to children and render it at
    // the given index.
    _addChildView: function(view, index) {
      // set up the child view event forwarding
      this.proxyChildEvents(view);
  
      this.triggerMethod('before:add:child', view);
  
      // trigger the 'before:show' event on `view` if the collection view
      // has already been shown
      if (this._isShown && !this.isBuffering) {
        Marionette.triggerMethodOn(view, 'before:show');
      }
  
      // Store the child view itself so we can properly
      // remove and/or destroy it later
      this.children.add(view);
      this.renderChildView(view, index);
  
      if (this._isShown && !this.isBuffering) {
        Marionette.triggerMethodOn(view, 'show');
      }
  
      this.triggerMethod('add:child', view);
    },
  
    // render the child view
    renderChildView: function(view, index) {
      view.render();
      this.attachHtml(this, view, index);
      return view;
    },
  
    // Build a `childView` for a model in the collection.
    buildChildView: function(child, ChildViewClass, childViewOptions) {
      var options = _.extend({model: child}, childViewOptions);
      return new ChildViewClass(options);
    },
  
    // Remove the child view and destroy it.
    // This function also updates the indices of
    // later views in the collection in order to keep
    // the children in sync with the collection.
    removeChildView: function(view) {
  
      if (view) {
        this.triggerMethod('before:remove:child', view);
  
        // call 'destroy' or 'remove', depending on which is found
        if (view.destroy) {
          view.destroy();
        } else if (view.remove) {
          view.remove();
        }
  
        delete view._parent;
        this.stopListening(view);
        this.children.remove(view);
        this.triggerMethod('remove:child', view);
  
        // decrement the index of views after this one
        this._updateIndices(view, false);
      }
  
      return view;
    },
  
    // check if the collection is empty
    isEmpty: function() {
      return !this.collection || this.collection.length === 0;
    },
  
    // If empty, show the empty view
    checkEmpty: function() {
      if (this.isEmpty(this.collection)) {
        this.showEmptyView();
      }
    },
  
    // You might need to override this if you've overridden attachHtml
    attachBuffer: function(collectionView) {
      collectionView.$el.append(this._createBuffer(collectionView));
    },
  
    // Create a fragment buffer from the currently buffered children
    _createBuffer: function(collectionView) {
      var elBuffer = document.createDocumentFragment();
      _.each(collectionView._bufferedChildren, function(b) {
        elBuffer.appendChild(b.el);
      });
      return elBuffer;
    },
  
    // Append the HTML to the collection's `el`.
    // Override this method to do something other
    // than `.append`.
    attachHtml: function(collectionView, childView, index) {
      if (collectionView.isBuffering) {
        // buffering happens on reset events and initial renders
        // in order to reduce the number of inserts into the
        // document, which are expensive.
        collectionView._bufferedChildren.splice(index, 0, childView);
      } else {
        // If we've already rendered the main collection, append
        // the new child into the correct order if we need to. Otherwise
        // append to the end.
        if (!collectionView._insertBefore(childView, index)) {
          collectionView._insertAfter(childView);
        }
      }
    },
  
    // Internal method. Check whether we need to insert the view into
    // the correct position.
    _insertBefore: function(childView, index) {
      var currentView;
      var findPosition = this.getOption('sort') && (index < this.children.length - 1);
      if (findPosition) {
        // Find the view after this one
        currentView = this.children.find(function(view) {
          return view._index === index + 1;
        });
      }
  
      if (currentView) {
        currentView.$el.before(childView.el);
        return true;
      }
  
      return false;
    },
  
    // Internal method. Append a view to the end of the $el
    _insertAfter: function(childView) {
      this.$el.append(childView.el);
    },
  
    // Internal method to set up the `children` object for
    // storing all of the child views
    _initChildViewStorage: function() {
      this.children = new Backbone.ChildViewContainer();
    },
  
    // Handle cleanup and other destroying needs for the collection of views
    destroy: function() {
      if (this.isDestroyed) { return this; }
  
      this.triggerMethod('before:destroy:collection');
      this.destroyChildren();
      this.triggerMethod('destroy:collection');
  
      return Marionette.View.prototype.destroy.apply(this, arguments);
    },
  
    // Destroy the child views that this collection view
    // is holding on to, if any
    destroyChildren: function() {
      var childViews = this.children.map(_.identity);
      this.children.each(this.removeChildView, this);
      this.checkEmpty();
      return childViews;
    },
  
    // Return true if the given child should be shown
    // Return false otherwise
    // The filter will be passed (child, index, collection)
    // Where
    //  'child' is the given model
    //  'index' is the index of that model in the collection
    //  'collection' is the collection referenced by this CollectionView
    _shouldAddChild: function(child, index) {
      var filter = this.getOption('filter');
      return !_.isFunction(filter) || filter.call(this, child, index, this.collection);
    },
  
    // Set up the child view event forwarding. Uses a "childview:"
    // prefix in front of all forwarded events.
    proxyChildEvents: function(view) {
      var prefix = this.getOption('childViewEventPrefix');
  
      // Forward all child view events through the parent,
      // prepending "childview:" to the event name
      this.listenTo(view, 'all', function() {
        var args = _.toArray(arguments);
        var rootEvent = args[0];
        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));
  
        args[0] = prefix + ':' + rootEvent;
        args.splice(1, 0, view);
  
        // call collectionView childEvent if defined
        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {
          childEvents[rootEvent].apply(this, args.slice(1));
        }
  
        this.triggerMethod.apply(this, args);
      });
    },
  
    _getImmediateChildren: function() {
      return _.values(this.children._views);
    },
  
    getViewComparator: function() {
      return this.getOption('viewComparator');
    }
  });
  
  /* jshint maxstatements: 17, maxlen: 117 */
  
  // Composite View
  // --------------
  
  // Used for rendering a branch-leaf, hierarchical structure.
  // Extends directly from CollectionView and also renders an
  // a child view as `modelView`, for the top leaf
  Marionette.CompositeView = Marionette.CollectionView.extend({
  
    // Setting up the inheritance chain which allows changes to
    // Marionette.CollectionView.prototype.constructor which allows overriding
    // option to pass '{sort: false}' to prevent the CompositeView from
    // maintaining the sorted order of the collection.
    // This will fallback onto appending childView's to the end.
    constructor: function() {
      Marionette.CollectionView.apply(this, arguments);
    },
  
    // Configured the initial events that the composite view
    // binds to. Override this method to prevent the initial
    // events, or to add your own initial events.
    _initialEvents: function() {
  
      // Bind only after composite view is rendered to avoid adding child views
      // to nonexistent childViewContainer
  
      if (this.collection) {
        this.listenTo(this.collection, 'add', this._onCollectionAdd);
        this.listenTo(this.collection, 'remove', this._onCollectionRemove);
        this.listenTo(this.collection, 'reset', this._renderChildren);
  
        if (this.getOption('sort')) {
          this.listenTo(this.collection, 'sort', this._sortViews);
        }
      }
    },
  
    // Retrieve the `childView` to be used when rendering each of
    // the items in the collection. The default is to return
    // `this.childView` or Marionette.CompositeView if no `childView`
    // has been defined
    getChildView: function(child) {
      var childView = this.getOption('childView') || this.constructor;
  
      return childView;
    },
  
    // Serialize the model for the view.
    // You can override the `serializeData` method in your own view
    // definition, to provide custom serialization for your view's data.
    serializeData: function() {
      var data = {};
  
      if (this.model) {
        data = _.partial(this.serializeModel, this.model).apply(this, arguments);
      }
  
      return data;
    },
  
    // Renders the model and the collection.
    render: function() {
      this._ensureViewIsIntact();
      this._isRendering = true;
      this.resetChildViewContainer();
  
      this.triggerMethod('before:render', this);
  
      this._renderTemplate();
      this._renderChildren();
  
      this._isRendering = false;
      this.isRendered = true;
      this.triggerMethod('render', this);
      return this;
    },
  
    _renderChildren: function() {
      if (this.isRendered || this._isRendering) {
        Marionette.CollectionView.prototype._renderChildren.call(this);
      }
    },
  
    // Render the root template that the children
    // views are appended to
    _renderTemplate: function() {
      var data = {};
      data = this.serializeData();
      data = this.mixinTemplateHelpers(data);
  
      this.triggerMethod('before:render:template');
  
      var template = this.getTemplate();
      var html = Marionette.Renderer.render(template, data, this);
      this.attachElContent(html);
  
      // the ui bindings is done here and not at the end of render since they
      // will not be available until after the model is rendered, but should be
      // available before the collection is rendered.
      this.bindUIElements();
      this.triggerMethod('render:template');
    },
  
    // Attaches the content of the root.
    // This method can be overridden to optimize rendering,
    // or to render in a non standard way.
    //
    // For example, using `innerHTML` instead of `$el.html`
    //
    // ```js
    // attachElContent: function(html) {
    //   this.el.innerHTML = html;
    //   return this;
    // }
    // ```
    attachElContent: function(html) {
      this.$el.html(html);
  
      return this;
    },
  
    // You might need to override this if you've overridden attachHtml
    attachBuffer: function(compositeView) {
      var $container = this.getChildViewContainer(compositeView);
      $container.append(this._createBuffer(compositeView));
    },
  
    // Internal method. Append a view to the end of the $el.
    // Overidden from CollectionView to ensure view is appended to
    // childViewContainer
    _insertAfter: function(childView) {
      var $container = this.getChildViewContainer(this, childView);
      $container.append(childView.el);
    },
  
    // Internal method. Append reordered childView'.
    // Overidden from CollectionView to ensure reordered views
    // are appended to childViewContainer
    _appendReorderedChildren: function(children) {
      var $container = this.getChildViewContainer(this);
      $container.append(children);
    },
  
    // Internal method to ensure an `$childViewContainer` exists, for the
    // `attachHtml` method to use.
    getChildViewContainer: function(containerView, childView) {
      if ('$childViewContainer' in containerView) {
        return containerView.$childViewContainer;
      }
  
      var container;
      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');
      if (childViewContainer) {
  
        var selector = Marionette._getValue(childViewContainer, containerView);
  
        if (selector.charAt(0) === '@' && containerView.ui) {
          container = containerView.ui[selector.substr(4)];
        } else {
          container = containerView.$(selector);
        }
  
        if (container.length <= 0) {
          throw new Marionette.Error({
            name: 'ChildViewContainerMissingError',
            message: 'The specified "childViewContainer" was not found: ' + containerView.childViewContainer
          });
        }
  
      } else {
        container = containerView.$el;
      }
  
      containerView.$childViewContainer = container;
      return container;
    },
  
    // Internal method to reset the `$childViewContainer` on render
    resetChildViewContainer: function() {
      if (this.$childViewContainer) {
        delete this.$childViewContainer;
      }
    }
  });
  
  // Layout View
  // -----------
  
  // Used for managing application layoutViews, nested layoutViews and
  // multiple regions within an application or sub-application.
  //
  // A specialized view class that renders an area of HTML and then
  // attaches `Region` instances to the specified `regions`.
  // Used for composite view management and sub-application areas.
  Marionette.LayoutView = Marionette.ItemView.extend({
    regionClass: Marionette.Region,
  
    options: {
      destroyImmediate: false
    },
  
    // used as the prefix for child view events
    // that are forwarded through the layoutview
    childViewEventPrefix: 'childview',
  
    // Ensure the regions are available when the `initialize` method
    // is called.
    constructor: function(options) {
      options = options || {};
  
      this._firstRender = true;
      this._initializeRegions(options);
  
      Marionette.ItemView.call(this, options);
    },
  
    // LayoutView's render will use the existing region objects the
    // first time it is called. Subsequent calls will destroy the
    // views that the regions are showing and then reset the `el`
    // for the regions to the newly rendered DOM elements.
    render: function() {
      this._ensureViewIsIntact();
  
      if (this._firstRender) {
        // if this is the first render, don't do anything to
        // reset the regions
        this._firstRender = false;
      } else {
        // If this is not the first render call, then we need to
        // re-initialize the `el` for each region
        this._reInitializeRegions();
      }
  
      return Marionette.ItemView.prototype.render.apply(this, arguments);
    },
  
    // Handle destroying regions, and then destroy the view itself.
    destroy: function() {
      if (this.isDestroyed) { return this; }
      // #2134: remove parent element before destroying the child views, so
      // removing the child views doesn't retrigger repaints
      if (this.getOption('destroyImmediate') === true) {
        this.$el.remove();
      }
      this.regionManager.destroy();
      return Marionette.ItemView.prototype.destroy.apply(this, arguments);
    },
  
    showChildView: function(regionName, view) {
      return this.getRegion(regionName).show(view);
    },
  
    getChildView: function(regionName) {
      return this.getRegion(regionName).currentView;
    },
  
    // Add a single region, by name, to the layoutView
    addRegion: function(name, definition) {
      var regions = {};
      regions[name] = definition;
      return this._buildRegions(regions)[name];
    },
  
    // Add multiple regions as a {name: definition, name2: def2} object literal
    addRegions: function(regions) {
      this.regions = _.extend({}, this.regions, regions);
      return this._buildRegions(regions);
    },
  
    // Remove a single region from the LayoutView, by name
    removeRegion: function(name) {
      delete this.regions[name];
      return this.regionManager.removeRegion(name);
    },
  
    // Provides alternative access to regions
    // Accepts the region name
    // getRegion('main')
    getRegion: function(region) {
      return this.regionManager.get(region);
    },
  
    // Get all regions
    getRegions: function() {
      return this.regionManager.getRegions();
    },
  
    // internal method to build regions
    _buildRegions: function(regions) {
      var defaults = {
        regionClass: this.getOption('regionClass'),
        parentEl: _.partial(_.result, this, 'el')
      };
  
      return this.regionManager.addRegions(regions, defaults);
    },
  
    // Internal method to initialize the regions that have been defined in a
    // `regions` attribute on this layoutView.
    _initializeRegions: function(options) {
      var regions;
      this._initRegionManager();
  
      regions = Marionette._getValue(this.regions, this, [options]) || {};
  
      // Enable users to define `regions` as instance options.
      var regionOptions = this.getOption.call(options, 'regions');
  
      // enable region options to be a function
      regionOptions = Marionette._getValue(regionOptions, this, [options]);
  
      _.extend(regions, regionOptions);
  
      // Normalize region selectors hash to allow
      // a user to use the @ui. syntax.
      regions = this.normalizeUIValues(regions, ['selector', 'el']);
  
      this.addRegions(regions);
    },
  
    // Internal method to re-initialize all of the regions by updating the `el` that
    // they point to
    _reInitializeRegions: function() {
      this.regionManager.invoke('reset');
    },
  
    // Enable easy overriding of the default `RegionManager`
    // for customized region interactions and business specific
    // view logic for better control over single regions.
    getRegionManager: function() {
      return new Marionette.RegionManager();
    },
  
    // Internal method to initialize the region manager
    // and all regions in it
    _initRegionManager: function() {
      this.regionManager = this.getRegionManager();
      this.regionManager._parent = this;
  
      this.listenTo(this.regionManager, 'before:add:region', function(name) {
        this.triggerMethod('before:add:region', name);
      });
  
      this.listenTo(this.regionManager, 'add:region', function(name, region) {
        this[name] = region;
        this.triggerMethod('add:region', name, region);
      });
  
      this.listenTo(this.regionManager, 'before:remove:region', function(name) {
        this.triggerMethod('before:remove:region', name);
      });
  
      this.listenTo(this.regionManager, 'remove:region', function(name, region) {
        delete this[name];
        this.triggerMethod('remove:region', name, region);
      });
    },
  
    _getImmediateChildren: function() {
      return _.chain(this.regionManager.getRegions())
        .pluck('currentView')
        .compact()
        .value();
    }
  });
  

  // Behavior
  // --------
  
  // A Behavior is an isolated set of DOM /
  // user interactions that can be mixed into any View.
  // Behaviors allow you to blackbox View specific interactions
  // into portable logical chunks, keeping your views simple and your code DRY.
  
  Marionette.Behavior = Marionette.Object.extend({
    constructor: function(options, view) {
      // Setup reference to the view.
      // this comes in handle when a behavior
      // wants to directly talk up the chain
      // to the view.
      this.view = view;
      this.defaults = _.result(this, 'defaults') || {};
      this.options  = _.extend({}, this.defaults, options);
      // Construct an internal UI hash using
      // the views UI hash and then the behaviors UI hash.
      // This allows the user to use UI hash elements
      // defined in the parent view as well as those
      // defined in the given behavior.
      this.ui = _.extend({}, _.result(view, 'ui'), _.result(this, 'ui'));
  
      Marionette.Object.apply(this, arguments);
    },
  
    // proxy behavior $ method to the view
    // this is useful for doing jquery DOM lookups
    // scoped to behaviors view.
    $: function() {
      return this.view.$.apply(this.view, arguments);
    },
  
    // Stops the behavior from listening to events.
    // Overrides Object#destroy to prevent additional events from being triggered.
    destroy: function() {
      this.stopListening();
  
      return this;
    },
  
    proxyViewProperties: function(view) {
      this.$el = view.$el;
      this.el = view.el;
    }
  });
  
  /* jshint maxlen: 143 */
  // Behaviors
  // ---------
  
  // Behaviors is a utility class that takes care of
  // gluing your behavior instances to their given View.
  // The most important part of this class is that you
  // **MUST** override the class level behaviorsLookup
  // method for things to work properly.
  
  Marionette.Behaviors = (function(Marionette, _) {
    // Borrow event splitter from Backbone
    var delegateEventSplitter = /^(\S+)\s*(.*)$/;
  
    function Behaviors(view, behaviors) {
  
      if (!_.isObject(view.behaviors)) {
        return {};
      }
  
      // Behaviors defined on a view can be a flat object literal
      // or it can be a function that returns an object.
      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));
  
      // Wraps several of the view's methods
      // calling the methods first on each behavior
      // and then eventually calling the method on the view.
      Behaviors.wrap(view, behaviors, _.keys(methods));
      return behaviors;
    }
  
    var methods = {
      behaviorTriggers: function(behaviorTriggers, behaviors) {
        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);
        return triggerBuilder.buildBehaviorTriggers();
      },
  
      behaviorEvents: function(behaviorEvents, behaviors) {
        var _behaviorsEvents = {};
  
        _.each(behaviors, function(b, i) {
          var _events = {};
          var behaviorEvents = _.clone(_.result(b, 'events')) || {};
  
          // Normalize behavior events hash to allow
          // a user to use the @ui. syntax.
          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, getBehaviorsUI(b));
  
          var j = 0;
          _.each(behaviorEvents, function(behaviour, key) {
            var match     = key.match(delegateEventSplitter);
  
            // Set event name to be namespaced using the view cid,
            // the behavior index, and the behavior event index
            // to generate a non colliding event namespace
            // http://api.jquery.com/event.namespace/
            var eventName = match[1] + '.' + [this.cid, i, j++, ' '].join('');
            var selector  = match[2];
  
            var eventKey  = eventName + selector;
            var handler   = _.isFunction(behaviour) ? behaviour : b[behaviour];
  
            _events[eventKey] = _.bind(handler, b);
          }, this);
  
          _behaviorsEvents = _.extend(_behaviorsEvents, _events);
        }, this);
  
        return _behaviorsEvents;
      }
    };
  
    _.extend(Behaviors, {
  
      // Placeholder method to be extended by the user.
      // The method should define the object that stores the behaviors.
      // i.e.
      //
      // ```js
      // Marionette.Behaviors.behaviorsLookup: function() {
      //   return App.Behaviors
      // }
      // ```
      behaviorsLookup: function() {
        throw new Marionette.Error({
          message: 'You must define where your behaviors are stored.',
          url: 'marionette.behaviors.html#behaviorslookup'
        });
      },
  
      // Takes care of getting the behavior class
      // given options and a key.
      // If a user passes in options.behaviorClass
      // default to using that. Otherwise delegate
      // the lookup to the users `behaviorsLookup` implementation.
      getBehaviorClass: function(options, key) {
        if (options.behaviorClass) {
          return options.behaviorClass;
        }
  
        // Get behavior class can be either a flat object or a method
        return Marionette._getValue(Behaviors.behaviorsLookup, this, [options, key])[key];
      },
  
      // Iterate over the behaviors object, for each behavior
      // instantiate it and get its grouped behaviors.
      parseBehaviors: function(view, behaviors) {
        return _.chain(behaviors).map(function(options, key) {
          var BehaviorClass = Behaviors.getBehaviorClass(options, key);
  
          var behavior = new BehaviorClass(options, view);
          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));
  
          return [behavior].concat(nestedBehaviors);
        }).flatten().value();
      },
  
      // Wrap view internal methods so that they delegate to behaviors. For example,
      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.
      // i.e.
      //
      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`
      wrap: function(view, behaviors, methodNames) {
        _.each(methodNames, function(methodName) {
          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);
        });
      }
    });
  
    // Class to build handlers for `triggers` on behaviors
    // for views
    function BehaviorTriggersBuilder(view, behaviors) {
      this._view      = view;
      this._behaviors = behaviors;
      this._triggers  = {};
    }
  
    _.extend(BehaviorTriggersBuilder.prototype, {
      // Main method to build the triggers hash with event keys and handlers
      buildBehaviorTriggers: function() {
        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);
        return this._triggers;
      },
  
      // Internal method to build all trigger handlers for a given behavior
      _buildTriggerHandlersForBehavior: function(behavior, i) {
        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};
  
        triggersHash = Marionette.normalizeUIKeys(triggersHash, getBehaviorsUI(behavior));
  
        _.each(triggersHash, _.bind(this._setHandlerForBehavior, this, behavior, i));
      },
  
      // Internal method to create and assign the trigger handler for a given
      // behavior
      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {
        // Unique identifier for the `this._triggers` hash
        var triggerKey = trigger.replace(/^\S+/, function(triggerName) {
          return triggerName + '.' + 'behaviortriggers' + i;
        });
  
        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);
      }
    });
  
    function getBehaviorsUI(behavior) {
      return behavior._uiBindings || behavior.ui;
    }
  
    return Behaviors;
  
  })(Marionette, _);
  

  // App Router
  // ----------
  
  // Reduce the boilerplate code of handling route events
  // and then calling a single method on another object.
  // Have your routers configured to call the method on
  // your object, directly.
  //
  // Configure an AppRouter with `appRoutes`.
  //
  // App routers can only take one `controller` object.
  // It is recommended that you divide your controller
  // objects in to smaller pieces of related functionality
  // and have multiple routers / controllers, instead of
  // just one giant router and controller.
  //
  // You can also add standard routes to an AppRouter.
  
  Marionette.AppRouter = Backbone.Router.extend({
  
    constructor: function(options) {
      this.options = options || {};
  
      Backbone.Router.apply(this, arguments);
  
      var appRoutes = this.getOption('appRoutes');
      var controller = this._getController();
      this.processAppRoutes(controller, appRoutes);
      this.on('route', this._processOnRoute, this);
    },
  
    // Similar to route method on a Backbone Router but
    // method is called on the controller
    appRoute: function(route, methodName) {
      var controller = this._getController();
      this._addAppRoute(controller, route, methodName);
    },
  
    // process the route event and trigger the onRoute
    // method call, if it exists
    _processOnRoute: function(routeName, routeArgs) {
      // make sure an onRoute before trying to call it
      if (_.isFunction(this.onRoute)) {
        // find the path that matches the current route
        var routePath = _.invert(this.getOption('appRoutes'))[routeName];
        this.onRoute(routeName, routePath, routeArgs);
      }
    },
  
    // Internal method to process the `appRoutes` for the
    // router, and turn them in to routes that trigger the
    // specified method on the specified `controller`.
    processAppRoutes: function(controller, appRoutes) {
      if (!appRoutes) { return; }
  
      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes
  
      _.each(routeNames, function(route) {
        this._addAppRoute(controller, route, appRoutes[route]);
      }, this);
    },
  
    _getController: function() {
      return this.getOption('controller');
    },
  
    _addAppRoute: function(controller, route, methodName) {
      var method = controller[methodName];
  
      if (!method) {
        throw new Marionette.Error('Method "' + methodName + '" was not found on the controller');
      }
  
      this.route(route, methodName, _.bind(method, controller));
    },
  
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    triggerMethod: Marionette.triggerMethod,
  
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  // Application
  // -----------
  
  // Contain and manage the composite application as a whole.
  // Stores and starts up `Region` objects, includes an
  // event aggregator as `app.vent`
  Marionette.Application = Marionette.Object.extend({
    constructor: function(options) {
      this._initializeRegions(options);
      this._initCallbacks = new Marionette.Callbacks();
      this.submodules = {};
      _.extend(this, options);
      this._initChannel();
      Marionette.Object.call(this, options);
    },
  
    // Command execution, facilitated by Backbone.Wreqr.Commands
    execute: function() {
      this.commands.execute.apply(this.commands, arguments);
    },
  
    // Request/response, facilitated by Backbone.Wreqr.RequestResponse
    request: function() {
      return this.reqres.request.apply(this.reqres, arguments);
    },
  
    // Add an initializer that is either run at when the `start`
    // method is called, or run immediately if added after `start`
    // has already been called.
    addInitializer: function(initializer) {
      this._initCallbacks.add(initializer);
    },
  
    // kick off all of the application's processes.
    // initializes all of the regions that have been added
    // to the app, and runs all of the initializer functions
    start: function(options) {
      this.triggerMethod('before:start', options);
      this._initCallbacks.run(options, this);
      this.triggerMethod('start', options);
    },
  
    // Add regions to your app.
    // Accepts a hash of named strings or Region objects
    // addRegions({something: "#someRegion"})
    // addRegions({something: Region.extend({el: "#someRegion"}) });
    addRegions: function(regions) {
      return this._regionManager.addRegions(regions);
    },
  
    // Empty all regions in the app, without removing them
    emptyRegions: function() {
      return this._regionManager.emptyRegions();
    },
  
    // Removes a region from your app, by name
    // Accepts the regions name
    // removeRegion('myRegion')
    removeRegion: function(region) {
      return this._regionManager.removeRegion(region);
    },
  
    // Provides alternative access to regions
    // Accepts the region name
    // getRegion('main')
    getRegion: function(region) {
      return this._regionManager.get(region);
    },
  
    // Get all the regions from the region manager
    getRegions: function() {
      return this._regionManager.getRegions();
    },
  
    // Create a module, attached to the application
    module: function(moduleNames, moduleDefinition) {
  
      // Overwrite the module class if the user specifies one
      var ModuleClass = Marionette.Module.getClass(moduleDefinition);
  
      var args = _.toArray(arguments);
      args.unshift(this);
  
      // see the Marionette.Module object for more information
      return ModuleClass.create.apply(ModuleClass, args);
    },
  
    // Enable easy overriding of the default `RegionManager`
    // for customized region interactions and business-specific
    // view logic for better control over single regions.
    getRegionManager: function() {
      return new Marionette.RegionManager();
    },
  
    // Internal method to initialize the regions that have been defined in a
    // `regions` attribute on the application instance
    _initializeRegions: function(options) {
      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};
  
      this._initRegionManager();
  
      // Enable users to define `regions` in instance options.
      var optionRegions = Marionette.getOption(options, 'regions');
  
      // Enable region options to be a function
      if (_.isFunction(optionRegions)) {
        optionRegions = optionRegions.call(this, options);
      }
  
      // Overwrite current regions with those passed in options
      _.extend(regions, optionRegions);
  
      this.addRegions(regions);
  
      return this;
    },
  
    // Internal method to set up the region manager
    _initRegionManager: function() {
      this._regionManager = this.getRegionManager();
      this._regionManager._parent = this;
  
      this.listenTo(this._regionManager, 'before:add:region', function() {
        Marionette._triggerMethod(this, 'before:add:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'add:region', function(name, region) {
        this[name] = region;
        Marionette._triggerMethod(this, 'add:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'before:remove:region', function() {
        Marionette._triggerMethod(this, 'before:remove:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'remove:region', function(name) {
        delete this[name];
        Marionette._triggerMethod(this, 'remove:region', arguments);
      });
    },
  
    // Internal method to setup the Wreqr.radio channel
    _initChannel: function() {
      this.channelName = _.result(this, 'channelName') || 'global';
      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);
      this.vent = _.result(this, 'vent') || this.channel.vent;
      this.commands = _.result(this, 'commands') || this.channel.commands;
      this.reqres = _.result(this, 'reqres') || this.channel.reqres;
    }
  });
  
  /* jshint maxparams: 9 */
  
  // Module
  // ------
  
  // A simple module system, used to create privacy and encapsulation in
  // Marionette applications
  Marionette.Module = function(moduleName, app, options) {
    this.moduleName = moduleName;
    this.options = _.extend({}, this.options, options);
    // Allow for a user to overide the initialize
    // for a given module instance.
    this.initialize = options.initialize || this.initialize;
  
    // Set up an internal store for sub-modules.
    this.submodules = {};
  
    this._setupInitializersAndFinalizers();
  
    // Set an internal reference to the app
    // within a module.
    this.app = app;
  
    if (_.isFunction(this.initialize)) {
      this.initialize(moduleName, app, this.options);
    }
  };
  
  Marionette.Module.extend = Marionette.extend;
  
  // Extend the Module prototype with events / listenTo, so that the module
  // can be used as an event aggregator or pub/sub.
  _.extend(Marionette.Module.prototype, Backbone.Events, {
  
    // By default modules start with their parents.
    startWithParent: true,
  
    // Initialize is an empty function by default. Override it with your own
    // initialization logic when extending Marionette.Module.
    initialize: function() {},
  
    // Initializer for a specific module. Initializers are run when the
    // module's `start` method is called.
    addInitializer: function(callback) {
      this._initializerCallbacks.add(callback);
    },
  
    // Finalizers are run when a module is stopped. They are used to teardown
    // and finalize any variables, references, events and other code that the
    // module had set up.
    addFinalizer: function(callback) {
      this._finalizerCallbacks.add(callback);
    },
  
    // Start the module, and run all of its initializers
    start: function(options) {
      // Prevent re-starting a module that is already started
      if (this._isInitialized) { return; }
  
      // start the sub-modules (depth-first hierarchy)
      _.each(this.submodules, function(mod) {
        // check to see if we should start the sub-module with this parent
        if (mod.startWithParent) {
          mod.start(options);
        }
      });
  
      // run the callbacks to "start" the current module
      this.triggerMethod('before:start', options);
  
      this._initializerCallbacks.run(options, this);
      this._isInitialized = true;
  
      this.triggerMethod('start', options);
    },
  
    // Stop this module by running its finalizers and then stop all of
    // the sub-modules for this module
    stop: function() {
      // if we are not initialized, don't bother finalizing
      if (!this._isInitialized) { return; }
      this._isInitialized = false;
  
      this.triggerMethod('before:stop');
  
      // stop the sub-modules; depth-first, to make sure the
      // sub-modules are stopped / finalized before parents
      _.invoke(this.submodules, 'stop');
  
      // run the finalizers
      this._finalizerCallbacks.run(undefined, this);
  
      // reset the initializers and finalizers
      this._initializerCallbacks.reset();
      this._finalizerCallbacks.reset();
  
      this.triggerMethod('stop');
    },
  
    // Configure the module with a definition function and any custom args
    // that are to be passed in to the definition function
    addDefinition: function(moduleDefinition, customArgs) {
      this._runModuleDefinition(moduleDefinition, customArgs);
    },
  
    // Internal method: run the module definition function with the correct
    // arguments
    _runModuleDefinition: function(definition, customArgs) {
      // If there is no definition short circut the method.
      if (!definition) { return; }
  
      // build the correct list of arguments for the module definition
      var args = _.flatten([
        this,
        this.app,
        Backbone,
        Marionette,
        Backbone.$, _,
        customArgs
      ]);
  
      definition.apply(this, args);
    },
  
    // Internal method: set up new copies of initializers and finalizers.
    // Calling this method will wipe out all existing initializers and
    // finalizers.
    _setupInitializersAndFinalizers: function() {
      this._initializerCallbacks = new Marionette.Callbacks();
      this._finalizerCallbacks = new Marionette.Callbacks();
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod
  });
  
  // Class methods to create modules
  _.extend(Marionette.Module, {
  
    // Create a module, hanging off the app parameter as the parent object.
    create: function(app, moduleNames, moduleDefinition) {
      var module = app;
  
      // get the custom args passed in after the module definition and
      // get rid of the module name and definition function
      var customArgs = _.drop(arguments, 3);
  
      // Split the module names and get the number of submodules.
      // i.e. an example module name of `Doge.Wow.Amaze` would
      // then have the potential for 3 module definitions.
      moduleNames = moduleNames.split('.');
      var length = moduleNames.length;
  
      // store the module definition for the last module in the chain
      var moduleDefinitions = [];
      moduleDefinitions[length - 1] = moduleDefinition;
  
      // Loop through all the parts of the module definition
      _.each(moduleNames, function(moduleName, i) {
        var parentModule = module;
        module = this._getModule(parentModule, moduleName, app, moduleDefinition);
        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);
      }, this);
  
      // Return the last module in the definition chain
      return module;
    },
  
    _getModule: function(parentModule, moduleName, app, def, args) {
      var options = _.extend({}, def);
      var ModuleClass = this.getClass(def);
  
      // Get an existing module of this name if we have one
      var module = parentModule[moduleName];
  
      if (!module) {
        // Create a new module if we don't have one
        module = new ModuleClass(moduleName, app, options);
        parentModule[moduleName] = module;
        // store the module on the parent
        parentModule.submodules[moduleName] = module;
      }
  
      return module;
    },
  
    // ## Module Classes
    //
    // Module classes can be used as an alternative to the define pattern.
    // The extend function of a Module is identical to the extend functions
    // on other Backbone and Marionette classes.
    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.
    getClass: function(moduleDefinition) {
      var ModuleClass = Marionette.Module;
  
      if (!moduleDefinition) {
        return ModuleClass;
      }
  
      // If all of the module's functionality is defined inside its class,
      // then the class can be passed in directly. `MyApp.module("Foo", FooModule)`.
      if (moduleDefinition.prototype instanceof ModuleClass) {
        return moduleDefinition;
      }
  
      return moduleDefinition.moduleClass || ModuleClass;
    },
  
    // Add the module definition and add a startWithParent initializer function.
    // This is complicated because module definitions are heavily overloaded
    // and support an anonymous function, module class, or options object
    _addModuleDefinition: function(parentModule, module, def, args) {
      var fn = this._getDefine(def);
      var startWithParent = this._getStartWithParent(def, module);
  
      if (fn) {
        module.addDefinition(fn, args);
      }
  
      this._addStartWithParent(parentModule, module, startWithParent);
    },
  
    _getStartWithParent: function(def, module) {
      var swp;
  
      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {
        swp = module.constructor.prototype.startWithParent;
        return _.isUndefined(swp) ? true : swp;
      }
  
      if (_.isObject(def)) {
        swp = def.startWithParent;
        return _.isUndefined(swp) ? true : swp;
      }
  
      return true;
    },
  
    _getDefine: function(def) {
      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {
        return def;
      }
  
      if (_.isObject(def)) {
        return def.define;
      }
  
      return null;
    },
  
    _addStartWithParent: function(parentModule, module, startWithParent) {
      module.startWithParent = module.startWithParent && startWithParent;
  
      if (!module.startWithParent || !!module.startWithParentIsConfigured) {
        return;
      }
  
      module.startWithParentIsConfigured = true;
  
      parentModule.addInitializer(function(options) {
        if (module.startWithParent) {
          module.start(options);
        }
      });
    }
  });
  

  return Marionette;
}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/util/shims/marionette.js' */
(function(window) {
    'use strict';

    _.extend(Marionette.Renderer, {

        render: function(template, data, context) {
            if (!template) {
                throw new window.Marionette.Error({
                    name: 'TemplateNotFoundError',
                    message: 'Cannot render the template since its false, null or undefined.'
                });
            }

            var templateFunc = _.isFunction(template) ?
                template : window.Marionette.TemplateCache.get(template);

            return templateFunc.call(context, data);
        }

    });

    define('marionette', function () {
        return window.Marionette;
    });

})(window || this);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog2', location = '/widget/dialog2/dialog2.js' */
define("widget/dialog2",["jquery","marionette"],function(t,i){"use strict";var o=[{onClick:function(t){return t.hide()},text:"Close",type:"link"}];return i.ItemView.extend({initialize:function(t){var i=this;this.validateOptions(t);var e=t.id,n=t.size,r=void 0===n?"medium":n,a=t.buttons,d=void 0===a?o:a,s=t.warning,l=void 0!==s&&s,u=t.modal,f=void 0!==u&&u,h=t.removeOnHide,c=void 0!==h&&h,g=t.extraClasses,w=void 0===g?"":g,v=t.extraAttributes,x=void 0===v?"":v,C=t.titleText,b=t.titleContent,m=t.content,A=t.footerHintText,E=t.footerHintContent,y=t.footerActionContent,T=void 0===y?" ":y;this.dialog=AJS.dialog2(aui.dialog.dialog2({id:e,size:r,modal:f,removeOnHide:c,extraClasses:"widget-dialog2 "+w+" "+(l?"aui-dialog2-warning":""),extraAttributes:x,titleText:C,titleContent:b,content:m,footerHintText:A,footerHintContent:E,footerActionContent:T})),this.addButtons(d),this.dialog.on("show",function(){return i.triggerMethod("dialog:show")}),this.dialog.on("hide",function(){return i.triggerMethod("dialog:hide")})},validateOptions:function(t){var i=t.content,o=t.titleText,e=t.titleContent,n=t.buttons;if(!i)throw new Error("Content is required");if(!o&&!e)throw new Error("Either titleText or titleContent is required");if(n){if(!Array.isArray(n))throw new Error("Buttons should be an Array");n.forEach(function(t){if("function"!=typeof t.onClick)throw new Error("onClick handler for a button has to be a function");if(!t.text)throw new Error("Text of a button is required")})}},onDestroy:function(){try{this.dialog.remove()}catch(t){}},show:function(){this.dialog.show()},hide:function(){this.dialog.hide(),t.fx.off&&t("div.aui-blanket").remove()},addButtons:function(t){t.forEach(this.addButton,this)},addButton:function(i){var o=this,e=this.dialog.$el,n=e.find(".aui-dialog2-footer-actions"),r=i.extraClasses,a=i.text,d=i.type,s=i.onClick;t(aui.buttons.button({extraClasses:r,text:a,type:d})).on("click",function(){return s(o)}).appendTo(n)}},{SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge",show:function(t){var i=new this(t);return i.show(),i}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-page-visibility-manager', location = '/widget/page-visibility-manager/page-visibility-manager.js' */
define("widget/page-visibility-manager",["jquery"],function(i){"use strict";var t=i(document),e=i(window),n=void 0,d=void 0,s=function(i){t.attr("atlHidden",i)},a=function(){s(document[n])};if(void 0!==document.hidden)d="visibilitychange",n="visibilityState";else if(void 0!==document.mozHidden)d="mozvisibilitychange",n="mozVisibilityState";else if(void 0!==document.msHidden)d="msvisibilitychange",n="msVisibilityState";else if(void 0!==document.webkitHidden)d="webkitvisibilitychange",n="webkitVisibilityState";else if(d="atlvisibilitychange",n="atlVisibilityState",document.createEvent){var c=document.createEvent("Event");c.initEvent(d,!1,!1),e.focus(function(){s("visible"),document.dispatchEvent(c)}),e.blur(function(){s("hidden"),document.dispatchEvent(c)})}return"atlvisibilitychange"!==d?(a(),t.on(d,a)):s(document.hasFocus?document.hasFocus()?"visible":"hidden":"visible"),{isPageVisible:function(){return"visible"===t.attr("atlHidden")},attachVisibilityChangeHandler:function(i){t.on(d,i)},setUp:function(i,t){var e=this,n=t||function(){},d=i||function(){},s=this.attachVisibilityChangeHandler,a=function(i){e.isPageVisible()?d(i):n(i)};a(!0),s(function(){a(!1)})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-simple-select2', location = '/widget/simple-select2/simple-select2.js' */
define("widget/simple-select2",["jquery"],function(e){"use strict";return function(t){var s=e(t);return s.removeClass("widget-simple-select2--multiple"),s.auiSelect2({dropdownCssClass:"widget-simple-select2__dropdown",formatResult:bamboo.widget.simpleSelect2.result}),s}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-simple-select2', location = '/widget/simple-select2/simple-select2.soy' */
// This file was automatically generated from simple-select2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.simpleSelect2.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.simpleSelect2 == 'undefined') { bamboo.widget.simpleSelect2 = {}; }


bamboo.widget.simpleSelect2.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.text);
};
if (goog.DEBUG) {
  bamboo.widget.simpleSelect2.result.soyTemplateName = 'bamboo.widget.simpleSelect2.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-datepicker', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
("undefined"===typeof window?global:window).__0aea4f4257d4af7c80e8cb23a2b3d6a1=function(){(function(d){function B(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass=
"ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};d.extend(this._defaults,this.regional[""]);this.dpDiv=C(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function C(a){return a.bind("mouseout",
function(a){a=d(a.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");a.length&&a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!d.datepicker._isDisabledDatepicker(D.inline?a.parent()[0]:D.input[0])&&b.length)b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b.addClass("ui-state-hover"),b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover"),b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")})}function z(a,b){d.extend(a,b);for(var c in b)if(null==b[c]||void 0==b[c])a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.24"}});var x=(new Date).getTime(),D;d.extend(B.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){z(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null,e;for(e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==e;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var j=this._newInst(d(a),f);j.settings=d.extend({},b||{},c||{});"input"==e?this._connectDatepicker(a,j):f&&this._inlineDatepicker(a,j)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:C(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");("focus"==
c||"both"==c)&&a.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0])d.datepicker._hideDatepicker();
else{d.datepicker._datepickerShowing&&d.datepicker._lastInput!=a[0]&&d.datepicker._hideDatepicker();d.datepicker._showDatepicker(a[0])}return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),
b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a));z(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);
this._pos=f?f.length?f:[f.pageX,f.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);
d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=d.map(this._disabledInputs,
function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled",
"disabled");this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==
b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};"string"==typeof b&&(f={},f[b]=c);if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,!0),j=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");z(e.settings,f);null!==j&&(void 0!==f.dateFormat&&void 0===f.minDate)&&(e.settings.minDate=this._formatDate(e,j));null!==g&&(void 0!==f.dateFormat&&void 0===f.maxDate)&&(e.settings.maxDate=this._formatDate(e,g));this._attachments(d(a),
e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=
d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),
!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,
a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){var b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat")),c=String.fromCharCode(void 0==
a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||-1<b.indexOf(c)}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a)))d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a)}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&
(a=d("input",a.parentNode)[0]);if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&(d.datepicker._curInst.dpDiv.stop(!0,!0),b&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0]));var c=d.datepicker._get(b,"beforeShow"),c=c?c.apply(a,[a,b]):{};if(!1!==c){z(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);d.datepicker._inDialog&&
(a.value="");d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;d(a).parents().each(function(){e=e|d(this).css("position")=="fixed";return!e});e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){var c=d.datepicker._get(b,"showAnim"),f=d.datepicker._get(b,"duration"),h=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
!0;if(d.effects&&d.effects[c])b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h);else b.dpDiv[c||"show"](c?f:null,h);(!c||!f)&&h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);D=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),
height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&(d.datepicker._datepickerShowing&&
a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement)&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=
a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,j=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+(c?0:d(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:d(document).scrollTop());b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+j?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,
b.top+f>i&&i>f?Math.abs(f+j):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){var a=this._get(b,"showAnim"),c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b)};if(d.effects&&d.effects[a])b.dpDiv.hide(a,
d.datepicker._get(b,"showOptions"),c,e);else b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,e);a||e();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){var a=d(a.target),b=d.datepicker._getInst(a[0]);(a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||a.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=b)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var a=d(a),e=this._getInst(a[0]);
this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var a=d(a),b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},
_selectMonthYear:function(a,b,c){var a=d(a),e=this._getInst(a[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);!d(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(f[0])&&(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,
f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){var c=d(a),c=this._getInst(c[0]),b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=
null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(null==
a||null==b)throw"Invalid arguments";b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,j=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,i=c=-1,p=-1,r=-1,k=!1,m=function(b){(b=y+1<a.length&&
a.charAt(y+1)==b)&&y++;return b},l=function(a){var c=m(a),a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(u).match(a);if(!a)throw"Missing number at position "+u;u+=a[0].length;return parseInt(a[0],10)},n=function(a,c,e){var a=d.map(m(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;d.each(a,function(a,c){var d=c[1];if(b.substr(u,d.length).toLowerCase()==d.toLowerCase())return f=c[0],u+=d.length,!1});if(-1!=f)return f+
1;throw"Unknown name at position "+u;},s=function(){if(b.charAt(u)!=a.charAt(y))throw"Unexpected literal at position "+u;u++},u=0,y=0;y<a.length;y++)if(k)"'"==a.charAt(y)&&!m("'")?k=!1:s();else switch(a.charAt(y)){case "d":p=l("d");break;case "D":n("D",f,h);break;case "o":r=l("o");break;case "m":i=l("m");break;case "M":i=n("M",j,g);break;case "y":c=l("y");break;case "@":var v=new Date(l("@")),c=v.getFullYear(),i=v.getMonth()+1,p=v.getDate();break;case "!":v=new Date((l("!")-this._ticksTo1970)/1E4);
c=v.getFullYear();i=v.getMonth()+1;p=v.getDate();break;case "'":m("'")?s():k=!0;break;default:s()}if(u<b.length)throw"Extra/unparsed characters found in date: "+b.substring(u);-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<r){i=1;p=r;do{e=this._getDaysInMonth(c,i-1);if(p<=e)break;i++;p-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,i-1,p));if(v.getFullYear()!=c||v.getMonth()+1!=i||v.getDate()!=p)throw"Invalid date";return v},
ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,
c=(c?c.monthNames:null)||this._defaults.monthNames,j=function(b){(b=r+1<a.length&&a.charAt(r+1)==b)&&r++;return b},g=function(a,b,c){b=""+b;if(j(a))for(;b.length<c;)b="0"+b;return b},i="",p=!1;if(b)for(var r=0;r<a.length;r++)if(p)"'"==a.charAt(r)&&!j("'")?p=!1:i+=a.charAt(r);else switch(a.charAt(r)){case "d":i+=g("d",b.getDate(),2);break;case "D":var k;k=b.getDay();var m=d,l=f;k=j("D")?l[k]:m[k];i+=k;break;case "o":i+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":i+=g("m",b.getMonth()+1,2);break;case "M":k=b.getMonth();m=h;l=c;k=j("M")?l[k]:m[k];i+=k;break;case "y":i+=j("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":i+=b.getTime();break;case "!":i+=1E4*b.getTime()+this._ticksTo1970;break;case "'":j("'")?i+="'":p=!0;break;default:i+=a.charAt(r)}return i},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=f+1<a.length&&a.charAt(f+1)==b)&&f++;return b},
f=0;f<a.length;f++)if(c)"'"==a.charAt(f)&&!d("'")?c=!1:b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var j=
this._getFormatConfig(a);try{f=this.parseDate(c,d,j)||h}catch(g){this.log(g),d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){if(null==b||""===b)b=c;else{var e;if("string"==
typeof b)a:{try{e=d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),b,d.datepicker._getFormatConfig(a));break a}catch(f){}var h=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,a=h.getFullYear();e=h.getMonth();for(var h=h.getDate(),j=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=j.exec(b);g;){switch(g[2]||"d"){case "d":case "D":h+=parseInt(g[1],10);break;case "w":case "W":h+=7*parseInt(g[1],10);break;case "m":case "M":e+=parseInt(g[1],10);h=Math.min(h,d.datepicker._getDaysInMonth(a,
e));break;case "y":case "Y":a+=parseInt(g[1],10),h=Math.min(h,d.datepicker._getDaysInMonth(a,e))}g=j.exec(b)}e=new Date(a,e,h)}else"number"==typeof b?isNaN(b)?b=c:(a=new Date,a.setDate(a.getDate()+b),b=a):b=new Date(b.getTime()),e=b;b=e}if(b=b&&"Invalid Date"==b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,
b,c){var d=!b,f=a.selectedMonth,h=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(f!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){d(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+x].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+x].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+
x].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),
f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),j=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),p=1!=j[0]||1!=j[1],r=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),g=a.drawMonth-g,l=a.drawYear;0>g&&(g+=12,l--);if(m)for(var n=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-j[0]*j[1]+1,m.getDate())),
n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(l,g,1))>n;)g--,0>g&&(g=11,l--);a.drawMonth=g;a.drawYear=l;var n=this._get(a,"prevText"),n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(l,g-i,1)),this._getFormatConfig(a)),n=this._canAdjustMonth(a,-1,l,g)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+
n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>",s=this._get(a,"nextText"),s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(l,g+i,1)),this._getFormatConfig(a)),f=this._canAdjustMonth(a,1,l,g)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+s+"</span></a>",i=this._get(a,"currentText"),s=this._get(a,"gotoCurrent")&&a.currentDay?r:b,i=!h?i:this.formatDate(i,s,this._getFormatConfig(a)),h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>":"",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
i+"</button>":"")+(c?"":h)+"</div>":"",h=parseInt(this._get(a,"firstDay"),10),h=isNaN(h)?0:h,i=this._get(a,"showWeek"),s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var u=this._get(a,"dayNamesMin"),y=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),x=this._get(a,"beforeShowDay"),z=this._get(a,"showOtherMonths"),D=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var B=this._getDefaultDate(a),E="",F=0;F<j[0];F++){var I="";this.maxRows=4;for(var G=0;G<j[1];G++){var C=
this._daylightSavingAdjust(new Date(l,g,a.selectedDay)),t=" ui-corner-all",q="";if(p){q+='<div class="ui-datepicker-group';if(1<j[1])switch(G){case 0:q+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case j[1]-1:q+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:q+=" ui-datepicker-group-middle",t=""}q+='">'}for(var q=q+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&0==F?c?f:n:"")+(/all|right/.test(t)&&
0==F?c?n:f:"")+this._generateMonthYearHeader(a,g,l,k,m,0<F||0<G,y,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),w=i?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",t=0;7>t;t++)var o=(t+h)%7,w=w+("<th"+(5<=(t+h+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+s[o]+'">'+u[o]+"</span></th>");q+=w+"</tr></thead><tbody>";w=this._getDaysInMonth(l,g);l==a.selectedYear&&g==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,w));t=(this._getFirstDayOfMonth(l,
g)-h+7)%7;w=Math.ceil((t+w)/7);this.maxRows=w=p?this.maxRows>w?this.maxRows:w:w;for(var o=this._daylightSavingAdjust(new Date(l,g,1-t)),L=0;L<w;L++){for(var q=q+"<tr>",J=!i?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(o)+"</td>",t=0;7>t;t++){var H=x?x.apply(a.input?a.input[0]:null,[o]):[!0,""],A=o.getMonth()!=g,K=A&&!D||!H[0]||k&&o<k||m&&o>m,J=J+('<td class="'+(5<=(t+h+6)%7?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(o.getTime()==C.getTime()&&g==a.selectedMonth&&
a._keyEvent||B.getTime()==o.getTime()&&B.getTime()==C.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!z?"":" "+H[1]+(o.getTime()==r.getTime()?" "+this._currentClass:"")+(o.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!A||z)&&H[2]?' title="'+H[2]+'"':"")+(K?"":' data-handler="selectDay" data-event="click" data-month="'+o.getMonth()+'" data-year="'+o.getFullYear()+'"')+">"+(A&&!z?"&#xa0;":K?'<span class="ui-state-default">'+o.getDate()+"</span>":
'<a class="ui-state-default'+(o.getTime()==b.getTime()?" ui-state-highlight":"")+(o.getTime()==r.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+'" href="#">'+o.getDate()+"</a>")+"</td>");o.setDate(o.getDate()+1);o=this._daylightSavingAdjust(o)}q+=J+"</tr>"}g++;11<g&&(g=0,l++);q+="</tbody></table>"+(p?"</div>"+(0<j[0]&&G==j[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");I+=q}E+=I}E+=e+(d.browser.msie&&7>parseInt(d.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=!1;return E},_generateMonthYearHeader:function(a,b,c,d,f,h,j,g){var i=this._get(a,"changeMonth"),p=this._get(a,"changeYear"),r=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',m="";if(h||!i)m+='<span class="ui-datepicker-month">'+j[b]+"</span>";else{for(var j=d&&d.getFullYear()==c,l=f&&f.getFullYear()==c,m=m+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',n=0;12>n;n++)if((!j||n>=d.getMonth())&&(!l||n<=f.getMonth()))m+='<option value="'+
n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";m+="</select>"}r||(k+=m+(h||!i||!p?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",h||!p)k+='<span class="ui-datepicker-year">'+c+"</span>";else{var g=this._get(a,"yearRange").split(":"),s=(new Date).getFullYear(),j=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?s+parseInt(a,10):parseInt(a,10);return isNaN(a)?s:a},b=j(g[0]),g=Math.max(b,j(g[1]||"")),b=d?Math.max(b,d.getFullYear()):b,g=f?Math.min(g,f.getFullYear()):
g;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}k+=this._get(a,"yearSuffix");r&&(k+=(h||!i||!p?"&#xa0;":"")+m);return k+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),f=a.drawMonth+("M"==c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"==c?b:0),d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),
d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new B;d.datepicker.initialized=!1;d.datepicker.uuid=
(new Date).getTime();d.datepicker.version="1.8.24";window["DP_jQuery_"+x]=d})(jQuery);return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-position', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.position.js' */
(function(c){c.ui=c.ui||{};var k=/left|center|right/,l=/top|center|bottom/,n=c.fn.position,o=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return n.apply(this,arguments);var b=c.extend({},b),a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),f=b.offset?b.offset.split(" "):[0,0],h,j,e;9===d.nodeType?(h=a.width(),j=a.height(),e={top:0,left:0}):d.setTimeout?(h=a.width(),j=a.height(),e={top:a.scrollTop(),left:a.scrollLeft()}):d.preventDefault?(b.at="left top",h=j=0,e={top:b.of.pageY,left:b.of.pageX}):
(h=a.outerWidth(),j=a.outerHeight(),e=a.offset());c.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=k.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=k.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b[this]=a});1===g.length&&(g[1]=g[0]);f[0]=parseInt(f[0],10)||0;1===f.length&&(f[1]=f[0]);f[1]=parseInt(f[1],10)||0;"right"===b.at[0]?e.left+=h:"center"===b.at[0]&&(e.left+=h/2);"bottom"===b.at[1]?e.top+=j:"center"===b.at[1]&&
(e.top+=j/2);e.left+=f[0];e.top+=f[1];return this.each(function(){var a=c(this),d=a.outerWidth(),m=a.outerHeight(),k=parseInt(c.curCSS(this,"marginLeft",true))||0,l=parseInt(c.curCSS(this,"marginTop",true))||0,n=d+k+(parseInt(c.curCSS(this,"marginRight",true))||0),o=m+l+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},e),p;if(b.my[0]==="right")i.left=i.left-d;else if(b.my[0]==="center")i.left=i.left-d/2;if(b.my[1]==="bottom")i.top=i.top-m;else if(b.my[1]==="center")i.top=i.top-m/2;
p={left:i.left-k,top:i.top-l};c.each(["left","top"],function(a,e){if(c.ui.position[g[a]])c.ui.position[g[a]][e](i,{targetWidth:h,targetHeight:j,elemWidth:d,elemHeight:m,collisionPosition:p,collisionWidth:n,collisionHeight:o,offset:f,my:b.my,at:b.at})});c.fn.bgiframe&&a.bgiframe();a.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=0<d?b.left-d:Math.max(b.left-a.collisionPosition.left,
b.left)},top:function(b,a){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=0<d?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if("center"!==a.at[0]){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft(),g="left"===a.my[0]?-a.elemWidth:"right"===a.my[0]?a.elemWidth:0,f="left"===a.at[0]?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=0>a.collisionPosition.left?g+f+h:0<d?g+f+h:0}},top:function(b,
a){if("center"!==a.at[1]){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop(),g="top"===a.my[1]?-a.elemHeight:"bottom"===a.my[1]?a.elemHeight:0,f="top"===a.at[1]?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=0>a.collisionPosition.top?g+f+h:0<d?g+f+h:0}}}};c.offset.setOffset||(c.offset.setOffset=function(b,a){/static/.test(c.curCSS(b,"position"))&&(b.style.position="relative");var d=c(b),g=d.offset(),f=parseInt(c.curCSS(b,"top",!0),10)||0,h=parseInt(c.curCSS(b,
"left",!0),10)||0,g={top:a.top-g.top+f,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)},c.fn.offset=function(b){var a=this[0];return!a||!a.ownerDocument?null:b?c.isFunction(b)?this.each(function(a){c(this).offset(b.call(this,a,c(this).offset()))}):this.each(function(){c.offset.setOffset(this,b)}):o.call(this)});c.curCSS||(c.curCSS=c.css)})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.droppable.js' */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(a){return a.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){"accept"==a&&(this.accept=d.isFunction(b)?b:function(a){return a.is(b)});d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
a,this.ui(b))},_out:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(b))},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var a=d.data(this,
"droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope==c.options.scope&&a.accept.call(a.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(a,{offset:a.element.offset()}),a.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],c.currentItem||c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(c)),this.element):
!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.24"});d.ui.intersect=function(a,b,c){if(!b.offset)return!1;var f=(a.positionAbs||a.position.absolute).left,g=f+a.helperProportions.width,e=(a.positionAbs||a.position.absolute).top,h=e+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;switch(c){case "fit":return i<=f&&g<=k&&j<=e&&h<=l;
case "intersect":return i<f+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<e+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(e>=j&&e<=l||h>=j&&h<=l||e<j&&h>l)&&(f>=i&&f<=k||g>=i&&g<=k||f<i&&g>k);default:return!1}};
d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],f=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),e=0;a:for(;e<c.length;e++)if(!(c[e].options.disabled||a&&!c[e].accept.call(c[e].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[e].element[0]){c[e].proportions.height=0;continue a}c[e].visible="none"!=c[e].element.css("display");c[e].visible&&("mousedown"==
f&&c[e]._activate.call(c[e],b),c[e].offset=c[e].element.offset(),c[e].proportions={width:c[e].element[0].offsetWidth,height:c[e].element[0].offsetHeight})}},drop:function(a,b){var c=!1;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options&&(!this.options.disabled&&(this.visible&&d.ui.intersect(a,this,this.options.tolerance))&&(c=this._drop.call(this,b)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)))this.isout=1,this.isover=
0,this._deactivate.call(this,b)});return c},dragStart:function(a,b){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var c=d.ui.intersect(a,this,this.options.tolerance);if(c=!c&&1==this.isover?"isout":c&&0==
this.isover?"isover":null){var f;if(this.options.greedy){var g=this.options.scope,e=this.element.parents(":data(droppable)").filter(function(){return d.data(this,"droppable").options.scope===g});e.length&&(f=d.data(e[0],"droppable"),f.greedyChild="isover"==c?1:0)}f&&"isover"==c&&(f.isover=0,f.isout=1,f._out.call(f,b));this[c]=1;this["isout"==c?"isover":"isout"]=0;this["isover"==c?"_over":"_out"].call(this,b);f&&"isout"==c&&(f.isout=0,f.isover=1,f._over.call(f,b))}}})},dragStop:function(a,b){a.element.parents(":not(body,html)").unbind("scroll.droppable");
a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.resizable.js' */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");this.handles=
{};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle ui-resizable-'+f+'"></div>');g.css({zIndex:a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(a){var a=a||this.element,b;for(b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=e(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var c=
e(this.handles[b],this.element),d=0,d=/sw|ne|nw|se|n|s/.test(b)?c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(c,d);this._proportionallyResize()}e(this.handles[b])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(!a.disabled){e(this).removeClass("ui-resizable-autohide");b._handles.show()}},function(){if(!a.disabled&&!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}}));this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(a){e(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=!1,c;for(c in this.handles)e(this.handles[c])[0]==b.target&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),
d=this.element;this.resizing=!0;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};(d.is(".ui-draggable")||/absolute/.test(d.css("position")))&&d.css({position:"absolute",top:c.top,left:c.left});this._renderProxy();var c=j(this.helper.css("left")),f=j(this.helper.css("top"));a.containment&&(c+=e(a.containment).scrollLeft()||0,f+=e(a.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:
{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",
"auto"==a?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return!1;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var a=this.options;if(this._helper){var c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),c=d&&e.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,d=d?0:this.sizeDiff.width,d={width:this.helper.width()-d,height:this.helper.height()-c},c=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;a.animate||this.element.css(e.extend(d,{top:f,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var a=
this.options,c,d,e,a={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:Infinity,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:Infinity};if(this._aspectRatio||b)if(b=a.minHeight*this.aspectRatio,d=a.minWidth/this.aspectRatio,c=a.maxHeight*this.aspectRatio,e=a.maxWidth/this.aspectRatio,b>a.minWidth&&(a.minWidth=b),d>a.minHeight&&(a.minHeight=d),c<a.maxWidth&&(a.maxWidth=c),e<a.maxHeight)a.maxHeight=e;this._vBoundaries=a},_updateCache:function(b){this.offset=
this.helper.offset();i(b.left)&&(this.position.left=b.left);i(b.top)&&(this.position.top=b.top);i(b.height)&&(this.size.height=b.height);i(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;i(b.height)?b.width=b.height*this.aspectRatio:i(b.width)&&(b.height=b.width/this.aspectRatio);"sw"==d&&(b.left=a.left+(c.width-b.width),b.top=null);"nw"==d&&(b.top=a.top+(c.height-b.height),b.left=a.left+(c.width-b.width));return b},_respectSize:function(b){var a=
this._vBoundaries,c=this.axis,d=i(b.width)&&a.maxWidth&&a.maxWidth<b.width,e=i(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=i(b.width)&&a.minWidth&&a.minWidth>b.width,h=i(b.height)&&a.minHeight&&a.minHeight>b.height;g&&(b.width=a.minWidth);h&&(b.height=a.minHeight);d&&(b.width=a.maxWidth);e&&(b.height=a.maxHeight);var k=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,m=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);g&&m&&(b.left=k-a.minWidth);d&&m&&(b.left=k-a.maxWidth);
h&&c&&(b.top=l-a.minHeight);e&&c&&(b.top=l-a.maxHeight);(a=!b.width&&!b.height)&&!b.left&&b.top?b.top=null:a&&(!b.top&&b.left)&&(b.left=null);return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),
c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}if(!e.browser.msie||!e(b).is(":hidden")&&!e(b).parents(":hidden").length)c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');
var a=e.browser.msie&&7>e.browser.version,c=a?1:0,a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-
a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,
c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);"resize"!=b&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,{version:"1.8.24"});e.ui.plugin.add("resizable","alsoResize",
{start:function(){var b=e(this).data("resizable").options,a=function(a){e(a).each(function(){var a=e(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof b.alsoResize&&!b.alsoResize.parentNode?b.alsoResize.length?(b.alsoResize=b.alsoResize[0],a(b.alsoResize)):e.each(b.alsoResize,function(b){a(b)}):a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable"),d=c.options,
f=c.originalSize,g=c.originalPosition,h={height:c.size.height-f.height||0,width:c.size.width-f.width||0,top:c.position.top-g.top||0,left:c.position.left-g.left||0},i=function(b,c){e(b).each(function(){var b=e(this),d=e(this).data("resizable-alsoresize"),f={},g=c&&c.length?c:b.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(g,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&0<=c&&(f[b]=c||null)});b.css(f)})};"object"==typeof d.alsoResize&&!d.alsoResize.nodeType?
e.each(d.alsoResize,function(a,b){i(a,b)}):i(d.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height,f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g},g=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||
null,h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:c.width,height:c.height});a._updateCache(c);a._propagate("resize",b)}})}});e.ui.plugin.add("resizable",
"containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c)if(b.containerElement=e(a),/document/.test(c)||c==document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var d=e(a),f=[];e(["Top","Right","Left","Bottom"]).each(function(a,
b){f[a]=j(d.css("padding"+b))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};var c=b.containerOffset,g=b.containerSize.height,h=b.containerSize.width,h=e.ui.hasScroll(a,"left")?a.scrollWidth:h,g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,f=a.position,b=a._aspectRatio||b.shiftKey,
g={top:0,left:0},h=a.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(g=d);if(f.left<(a._helper?d.left:0))a.size.width+=a._helper?a.position.left-d.left:a.position.left-g.left,b&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=c.helper?d.left:0;if(f.top<(a._helper?d.top:0))a.size.height+=a._helper?a.position.top-d.top:a.position.top,b&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?d.top:0;a.offset.left=a.parentData.left+a.position.left;a.offset.top=
a.parentData.top+a.position.top;c=Math.abs(a.offset.left-g.left+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));f&&g&&(c-=a.parentData.left);c+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-c,b&&(a.size.height=a.size.width/a.aspectRatio));d+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-d,
b&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,g=g.outerHeight()-b.sizeDiff.height;b._helper&&(!a.animate&&/relative/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&(!a.animate&&/static/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});
e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof a.ghost?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=
e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid="number"==typeof a.grid?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1),a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);/^(se|s|e)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):
/^(ne)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a):(/^(sw)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a),b.position.left=f.left-h)}});var j=function(b){return parseInt(b,10)||0},i=function(b){return!isNaN(parseInt(b,10))}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.selectable.js' */
(function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var f;this.refresh=function(){f=e(b.options.filter,b.element[0]);f.addClass("ui-selectee");f.each(function(){var b=e(this),c=b.offset();e.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,
selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var f=
this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=e(d.filter,this.element[0]);this._trigger("start",b);e(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=e.data(this,"selectable-item");c.startselected=!0;!b.metaKey&&!b.ctrlKey&&(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),
c.unselecting=!0,f._trigger("unselecting",b,{unselecting:c.element}))});e(b.target).parents().andSelf().each(function(){var c=e.data(this,"selectable-item");if(c){var d=!b.metaKey&&!b.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");c.unselecting=!d;c.selecting=d;(c.selected=d)?f._trigger("selecting",b,{selecting:c.element}):f._trigger("unselecting",b,{unselecting:c.element});return!1}})}},_mouseDrag:function(b){var f=
this;this.dragged=!0;if(!this.options.disabled){var d=this.options,c=this.opos[0],g=this.opos[1],i=b.pageX,j=b.pageY;if(c>i)var h=i,i=c,c=h;g>j&&(h=j,j=g,g=h);this.helper.css({left:c,top:g,width:i-c,height:j-g});this.selectees.each(function(){var a=e.data(this,"selectable-item");if(a&&a.element!=f.element[0]){var h=false;d.tolerance=="touch"?h=!(a.left>i||a.right<c||a.top>j||a.bottom<g):d.tolerance=="fit"&&(h=a.left>c&&a.right<i&&a.top>g&&a.bottom<j);if(h){if(a.selected){a.$element.removeClass("ui-selected");
a.selected=false}if(a.unselecting){a.$element.removeClass("ui-unselecting");a.unselecting=false}if(!a.selecting){a.$element.addClass("ui-selecting");a.selecting=true;f._trigger("selecting",b,{selecting:a.element})}}else{if(a.selecting)if((b.metaKey||b.ctrlKey)&&a.startselected){a.$element.removeClass("ui-selecting");a.selecting=false;a.$element.addClass("ui-selected");a.selected=true}else{a.$element.removeClass("ui-selecting");a.selecting=false;if(a.startselected){a.$element.addClass("ui-unselecting");
a.unselecting=true}f._trigger("unselecting",b,{unselecting:a.element})}if(a.selected&&!b.metaKey&&!b.ctrlKey&&!a.startselected){a.$element.removeClass("ui-selected");a.selected=false;a.$element.addClass("ui-unselecting");a.unselecting=true;f._trigger("unselecting",b,{unselecting:a.element})}}}});return!1}},_mouseStop:function(b){var f=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=
!1;d.startselected=!1;f._trigger("unselected",b,{unselected:d.element})});e(".ui-selecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;f._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return!1}});e.extend(e.ui.selectable,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.accordion.js' */
(function(d){d.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var a=this,b=a.options;a.running=0;a.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");
a.headers=a.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){b.disabled||d(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){b.disabled||d(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){b.disabled||d(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){b.disabled||d(this).removeClass("ui-state-focus")});a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(b.navigation){var c=a.element.find("a").filter(b.navigationFilter).eq(0);if(c.length){var f=c.closest(".ui-accordion-header");a.active=f.length?f:c.closest(".ui-accordion-content").prev()}}a.active=a._findActive(a.active||b.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");a.active.next().addClass("ui-accordion-content-active");a._createIcons();a.resize();a.element.attr("role","tablist");a.headers.attr("role","tab").bind("keydown.accordion",
function(b){return a._keydown(b)}).next().attr("role","tabpanel");a.headers.not(a.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();a.active.length?a.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0);d.browser.safari||a.headers.find("a").attr("tabIndex",-1);b.event&&a.headers.bind(b.event.split(" ").join(".accordion ")+".accordion",function(b){a._clickHandler.call(a,b,this);b.preventDefault()})},_createIcons:function(){var a=
this.options;a.icons&&(d("<span></span>").addClass("ui-icon "+a.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var a=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");(a.autoHeight||a.fillHeight)&&b.css("height","");return d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"active"==a&&this.activate(b);"icons"==a&&(this._destroyIcons(),
b&&this._createIcons());if("disabled"==a)this.headers.add(this.headers.next())[b?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(a){if(!this.options.disabled&&!a.altKey&&!a.ctrlKey){var b=d.ui.keyCode,c=this.headers.length,f=this.headers.index(a.target),g=!1;switch(a.keyCode){case b.RIGHT:case b.DOWN:g=this.headers[(f+1)%c];break;case b.LEFT:case b.UP:g=this.headers[(f-1+c)%c];break;case b.SPACE:case b.ENTER:this._clickHandler({target:a.target},a.target),a.preventDefault()}return g?
(d(a.target).attr("tabIndex",-1),d(g).attr("tabIndex",0),g.focus(),!1):!0}},resize:function(){var a=this.options,b;if(a.fillSpace){if(d.browser.msie){var c=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height();d.browser.msie&&this.element.parent().css("overflow",c);this.headers.each(function(){b-=d(this).outerHeight(!0)});this.headers.next().each(function(){d(this).height(Math.max(0,b-d(this).innerHeight()+d(this).height()))}).css("overflow",
"auto")}else a.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,d(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;a=this._findActive(a)[0];this._clickHandler({target:a},a);return this},_findActive:function(a){return a?"number"===typeof a?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):!1===a?d([]):this.headers.filter(":eq(0)")},_clickHandler:function(a,b){var c=this.options;if(!c.disabled)if(a.target){var f=d(a.currentTarget||
b),g=f[0]===this.active[0];c.active=c.collapsible&&g?!1:this.headers.index(f);if(!(this.running||!c.collapsible&&g)){var i=this.active,e=f.next(),h=this.active.next(),k={options:c,newHeader:g&&c.collapsible?d([]):f,oldHeader:this.active,newContent:g&&c.collapsible?d([]):e,oldContent:h},j=this.headers.index(this.active[0])>this.headers.index(f[0]);this.active=g?d([]):f;this._toggle(e,h,k,g,j);i.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);
g||(f.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(c.icons.header).addClass(c.icons.headerSelected),f.next().addClass("ui-accordion-content-active"))}}else if(c.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);this.active.next().addClass("ui-accordion-content-active");var h=this.active.next(),
k={options:c,newHeader:d([]),oldHeader:c.active,newContent:d([]),oldContent:h},e=this.active=d([]);this._toggle(e,h,k)}},_toggle:function(a,b,c,f,g){var i=this,e=i.options;i.toShow=a;i.toHide=b;i.data=c;var h=function(){if(i)return i._completed.apply(i,arguments)};i._trigger("changestart",null,i.data);i.running=0===b.size()?a.size():b.size();if(e.animated){c={};c=e.collapsible&&f?{toShow:d([]),toHide:b,complete:h,down:g,autoHeight:e.autoHeight||e.fillSpace}:{toShow:a,toHide:b,complete:h,down:g,autoHeight:e.autoHeight||
e.fillSpace};e.proxied||(e.proxied=e.animated);e.proxiedDuration||(e.proxiedDuration=e.duration);e.animated=d.isFunction(e.proxied)?e.proxied(c):e.proxied;e.duration=d.isFunction(e.proxiedDuration)?e.proxiedDuration(c):e.proxiedDuration;var f=d.ui.accordion.animations,k=e.duration,j=e.animated;j&&(!f[j]&&!d.easing[j])&&(j="slide");f[j]||(f[j]=function(a){this.slide(a,{easing:j,duration:k||700})});f[j](c)}else e.collapsible&&f?a.toggle():(b.hide(),a.show()),h(!0);b.prev().attr({"aria-expanded":"false",
"aria-selected":"false",tabIndex:-1}).blur();a.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}});d.extend(d.ui.accordion,{version:"1.8.24",
animations:{slide:function(a,b){a=d.extend({easing:"swing",duration:300},a,b);if(a.toHide.size())if(a.toShow.size()){var c=a.toShow.css("overflow"),f=0,g={},i={},e,h=a.toShow;e=h[0].style.width;h.width(h.parent().width()-parseFloat(h.css("paddingLeft"))-parseFloat(h.css("paddingRight"))-(parseFloat(h.css("borderLeftWidth"))||0)-(parseFloat(h.css("borderRightWidth"))||0));d.each(["height","paddingTop","paddingBottom"],function(b,c){i[c]="hide";var e=(""+d.css(a.toShow[0],c)).match(/^([\d+-.]+)(.*)$/);
g[c]={value:e[1],unit:e[2]||"px"}});a.toShow.css({height:0,overflow:"hidden"}).show();a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(i,{step:function(b,c){"height"==c.prop&&(f=0===c.end-c.start?0:(c.now-c.start)/(c.end-c.start));a.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:a.duration,easing:a.easing,complete:function(){a.autoHeight||a.toShow.css("height","");a.toShow.css({width:e,overflow:c});a.complete()}})}else a.toHide.animate({height:"hide",
paddingTop:"hide",paddingBottom:"hide"},a);else a.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},a)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1E3:200})}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.autocomplete.js' */
(function(d){var c=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,c;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(b){if(!a.options.disabled&&
!a.element.propAttr("readOnly")){c=!1;var f=d.ui.keyCode;switch(b.keyCode){case f.PAGE_UP:a._move("previousPage",b);break;case f.PAGE_DOWN:a._move("nextPage",b);break;case f.UP:a._keyEvent("previous",b);break;case f.DOWN:a._keyEvent("next",b);break;case f.ENTER:case f.NUMPAD_ENTER:a.menu.active&&(c=!0,b.preventDefault());case f.TAB:if(!a.menu.active)break;a.menu.select(b);break;case f.ESCAPE:a.element.val(a.term);a.close(b);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=
a.element.val()&&(a.selectedItem=null,a.search(null,b))},a.options.delay)}}}).bind("keypress.autocomplete",function(a){c&&(c=!1,a.preventDefault())}).bind("focus.autocomplete",function(){a.options.disabled||(a.selectedItem=null,a.previous=a.element.val())}).bind("blur.autocomplete",function(b){a.options.disabled||(clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b);a._change(b)},150))});this._initSource();this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||
"body",b)[0]).mousedown(function(b){var c=a.menu.element[0];d(b.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(b){b.target!==a.element[0]&&(b.target!==c&&!d.ui.contains(c,b.target))&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,d){var c=d.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:c})&&/^key/.test(b.originalEvent.type)&&a.element.val(c.value)},selected:function(c,d){var e=d.item.data("item.autocomplete"),
h=a.previous;a.element[0]!==b.activeElement&&(a.element.focus(),a.previous=h,setTimeout(function(){a.previous=h;a.selectedItem=e},1));!1!==a._trigger("select",c,{item:e})&&a.element.val(e.value);a.term=a.element.val();a.close(c);a.selectedItem=e},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe();a.beforeunloadHandler=function(){a.element.removeAttr("autocomplete")};
d(window).bind("beforeunload",a.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d(window).unbind("beforeunload",this.beforeunloadHandler);d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(d(b||
"body",this.element[0].ownerDocument)[0]);"disabled"===a&&(b&&this.xhr)&&this.xhr.abort()},_initSource:function(){var a=this,b,c;d.isArray(this.options.source)?(b=this.options.source,this.source=function(a,c){c(d.ui.autocomplete.filter(b,a.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(b,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):this.source=this.options.source},search:function(a,
b){a=null!=a?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&
a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:d.map(a,function(a){return"string"===typeof a?{label:a,value:a}:d.extend({label:a.label||
a.value,value:a.value||a.label},a)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,b){var c=
this;d.each(b,function(b,d){c._renderItem(a,d)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,
b),b.preventDefault()}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var c=RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(a){return c.test(a.label||a.value||a)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var c=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){d(a.target).closest(".ui-menu-item a").length&&(a.preventDefault(),c.select(a))});this.refresh()},refresh:function(){var c=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(a){c.activate(a,d(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(c,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,d=this.element.scrollTop(),g=this.element.height();0>b?this.element.scrollTop(d+b):b>=g&&this.element.scrollTop(d+b-g+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",c,{item:a})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(c,a,b){this.active?(c=this.active[c+"All"](".ui-menu-item").eq(0),c.length?this.activate(b,
c):this.activate(b,this.element.children(a))):this.activate(b,this.element.children(a))},nextPage:function(c){if(this.hasScroll())if(!this.active||this.last())this.activate(c,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:last"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(c){if(this.hasScroll())if(!this.active||this.first())this.activate(c,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a+b-d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:first"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[d.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.button.js' */
(function(b){var g,h,i,e,k=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},j=function(a){var c=a.name,d=a.form,f=b([]);c&&(f=d?b(d).find("[name='"+c+"']"):b("[name='"+c+"']",a.ownerDocument).filter(function(){return!this.form}));return f};b.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",k);"boolean"!==typeof this.options.disabled?
this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,d="checkbox"===this.type||"radio"===this.type,f="ui-state-hover"+(!d?" ui-state-active":"");null===c.label&&(c.label=this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!c.disabled){b(this).addClass("ui-state-hover");
this===g&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||b(this).removeClass(f)}).bind("click.button",function(a){if(c.disabled){a.preventDefault();a.stopImmediatePropagation()}});this.element.bind("focus.button",function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){a.buttonElement.removeClass("ui-state-focus")});d&&(this.element.bind("change.button",function(){e||a.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(!c.disabled){e=
false;h=a.pageX;i=a.pageY}}).bind("mouseup.button",function(a){if(!c.disabled&&(h!==a.pageX||i!==a.pageY))e=true}));"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");var d=
a.element[0];j(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;b(this).addClass("ui-state-active");g=this;b(document).one("mouseup",function(){g=null})}).bind("mouseup.button",function(){if(c.disabled)return false;b(this).removeClass("ui-state-active")}).bind("keydown.button",function(a){if(c.disabled)return false;(a.keyCode==b.ui.keyCode.SPACE||
a.keyCode==b.ui.keyCode.ENTER)&&b(this).addClass("ui-state-active")}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if("checkbox"===this.type||
"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b);this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b)));this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=
this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||
this.buttonElement.removeAttr("title");b.Widget.prototype.destroy.call(this)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments);"disabled"===a?c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?j(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=b("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),d=this.options.icons,f=d.primary&&d.secondary,e=[];d.primary||d.secondary?(this.options.text&&e.push("ui-button-text-icon"+(f?"s":d.primary?"-primary":"-secondary")),d.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||
(e.push(f?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||a.attr("title",c))):e.push("ui-button-text-only");a.addClass(e.join(" "))}}});b.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,c){"disabled"===a&&this.buttons.button("option",a,c);b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a="rtl"===
this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
b.Widget.prototype.destroy.call(this)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.dialog.js' */
(function(c){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},j={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};c.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;0>b&&c(this).css("top",a.top-b)}},resizable:!0,
show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=c.ui.dialog.getTitleId(a.element),e=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){if(b.closeOnEscape&&
!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}}).attr({role:"dialog","aria-labelledby":d}).mousedown(function(c){a.moveToTop(false,c)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(e),g=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){g.addClass("ui-state-hover")},function(){g.removeClass("ui-state-hover")}).focus(function(){g.addClass("ui-state-focus")}).blur(function(){g.removeClass("ui-state-focus")}).click(function(c){a.close(c);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(g);d=c("<span></span>").addClass("ui-dialog-title").attr("id",d).prependTo(f);this._title(d);c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose)&&
(b.beforeClose=b.beforeclose);f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=!1;c.fn.bgiframe&&e.bgiframe()},_title:function(a){this.options.title||a.html("&#160;");a.text(this.options.title)},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(!1!==b._trigger("beforeClose",a))return b.overlay&&b.overlay.destroy(),b.uiDialog.unbind("keypress.ui-dialog"),b._isOpen=!1,b.options.hide?b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)}):(b.uiDialog.hide(),b._trigger("close",a)),c.ui.dialog.overlay.resize(),b.options.modal&&(d=0,c(".ui-dialog").each(function(){if(this!==
b.uiDialog[0]){e=c(this).css("z-index");isNaN(e)||(d=Math.max(d,e))}}),c.ui.dialog.maxZ=d),b},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this.options;if(d.modal&&!a||!d.stack&&!d.modal)return this._trigger("focus",b);d.zIndex>c.ui.dialog.maxZ&&(c.ui.dialog.maxZ=d.zIndex);this.overlay&&(c.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ));d={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};c.ui.dialog.maxZ+=
1;this.uiDialog.css("z-index",c.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",b);return this},open:function(){if(!this._isOpen){var a=this.options,b=this.uiDialog;this.overlay=a.modal?new c.ui.dialog.overlay(this):null;this._size();this._position(a.position);b.show(a.show);this.moveToTop(!0);a.modal&&b.bind("keydown.ui-dialog",function(a){if(a.keyCode===c.ui.keyCode.TAB){var b=c(":tabbable",this),f=b.filter(":first"),b=b.filter(":last");if(a.target===b[0]&&!a.shiftKey)return f.focus(1),
!1;if(a.target===f[0]&&a.shiftKey)return b.focus(1),!1}});c(this.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(a){var b=this,d=!1,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();"object"===typeof a&&
null!==a&&c.each(a,function(){return!(d=!0)});d&&(c.each(a,function(a,d){var d=c.isFunction(d)?{click:d,text:a}:d,e=c('<button type="button"></button>').click(function(){d.click.apply(b.element[0],arguments)}).appendTo(f);c.each(d,function(a,b){if("click"!==a)if(a in e)e[a](b);else e.attr(a,b)});c.fn.button&&e.button()}),e.appendTo(b.uiDialog))},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var b=this,d=b.options,e=c(document),f;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(e,h){f="auto"===d.height?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",e,a(h))},drag:function(c,d){b._trigger("drag",c,a(d))},stop:function(g,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(f);b._trigger("dragStop",g,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(a){return{originalPosition:a.originalPosition,
originalSize:a.originalSize,position:a.position,size:a.size}}var a=void 0===a?this.options.resizable:a,d=this,e=d.options,f=d.uiDialog.css("position"),a="string"===typeof a?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(a,e){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",a,b(e))},resize:function(a,c){d._trigger("resize",
a,b(c))},stop:function(a,f){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",a,b(f));c.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)b=a.split?a.split(" "):
[a[0],a[1]],1===b.length&&(b[1]=b[0]),c.each(["left","top"],function(a,c){+b[a]===b[a]&&(d[a]=b[a],b[a]=c)}),a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")};a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=!1;c.each(a,function(a,c){b._setOption(a,c);a in
i&&(e=!0);a in j&&(d[a]=c)});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":this._createButtons(b);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":d.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?d.addClass("ui-dialog-disabled"):
d.removeClass("ui-dialog-disabled");break;case "draggable":var e=d.is(":data(draggable)");e&&!b&&d.draggable("destroy");!e&&b&&this._makeDraggable();break;case "position":this._position(b);break;case "resizable":(e=d.is(":data(resizable)"))&&!b&&d.resizable("destroy");e&&"string"===typeof b&&d.resizable("option","handles",b);!e&&!1!==b&&this._makeResizable(b);break;case "title":this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}c.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var a=
this.options,b,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});a.minWidth>a.width&&(a.width=a.minWidth);b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);"auto"===a.height?c.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),a=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(a,d))):this.element.height(Math.max(a.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){0===this.instances.length&&
(setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(a){if(c(a.target).zIndex()<c.ui.dialog.overlay.maxZ)return!1})},1),c(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&(!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===c.ui.keyCode.ESCAPE)&&(a.close(b),b.preventDefault())}),c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize));var b=(this.oldInstances.pop()||c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);-1!=b&&this.oldInstances.push(this.instances.splice(b,1)[0]);0===this.instances.length&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;return c.browser.msie&&7>c.browser.version?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),
b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<b?c(window).height()+"px":a+"px"):c(document).height()+"px"},width:function(){var a,b;return c.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<b?c(window).width()+"px":a+"px"):c(document).width()+"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,
height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.progressbar.js' */
(function(b){b.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();b.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(void 0===a)return this._value();this._setOption("value",a);return this},_setOption:function(a,c){"value"===a&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));b.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}});b.extend(b.ui.progressbar,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.slider.js' */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=b.values&&b.values.length||1,e=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(b.range){if(!0===b.range&&(b.values||(b.values=[this._valueMin(),this._valueMin()]),b.values.length&&2!==b.values.length))b.values=[b.values[0],b.values[0]];this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))}for(var g=c.length;g<f;g+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=c.add(d(e.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){b.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){b.disabled?d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(a){d(this).data("index.ui-slider-handle",
a)});this.handles.keydown(function(b){var c=d(this).data("index.ui-slider-handle"),e,f,g;if(!a.options.disabled){switch(b.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(b.preventDefault(),!a._keySliding&&(a._keySliding=!0,d(this).addClass("ui-state-active"),e=a._start(b,c),!1===e))return}g=a.options.step;e=a.options.values&&a.options.values.length?
f=a.values(c):f=a.value();switch(b.keyCode){case d.ui.keyCode.HOME:f=a._valueMin();break;case d.ui.keyCode.END:f=a._valueMax();break;case d.ui.keyCode.PAGE_UP:f=a._trimAlignValue(e+(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:f=a._trimAlignValue(e-(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(e===a._valueMax())return;f=a._trimAlignValue(e+g);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(e===a._valueMin())return;f=a._trimAlignValue(e-
g)}a._slide(b,c,f)}}).keyup(function(b){var c=d(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(b,c),a._change(b,c),d(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},
_mouseCapture:function(a){var b=this.options,c,f,e,g,h;if(b.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:a.pageX,y:a.pageY});f=this._valueMax()-this._valueMin()+1;g=this;this.handles.each(function(b){var a=Math.abs(c-g.values(b));f>a&&(f=a,e=d(this),h=b)});!0===b.range&&this.values(1)===b.min&&(h+=1,e=d(this.handles[h]));if(!1===this._start(a,h))return!1;this._mouseSliding=
!0;g._handleIndex=h;e.addClass("ui-state-active").focus();b=e.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-b.left-e.width()/2,top:a.pageY-b.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,h,c);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,
y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;"horizontal"===this.orientation?(b=this.elementSize.width,a=a.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+b*a;return this._trimAlignValue(b)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());return this._trigger("start",
a,c)},_slide:function(a,b,c){var d;if(this.options.values&&this.options.values.length){d=this.values(b?0:1);if(2===this.options.values.length&&!0===this.options.range&&(0===b&&c>d||1===b&&c<d))c=d;c!==this.values(b)&&(d=this.values(),d[b]=c,a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:d}),this.values(b?0:1),!1!==a&&this.values(b,c,!0))}else c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:c}),!1!==a&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],
value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,
0);else return this._value()},values:function(a,b){var c,f,e;if(1<arguments.length)this.options.values[a]=this._trimAlignValue(b),this._refreshValue(),this._change(null,a);else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(e=0;e<c.length;e+=1)c[e]=this._trimAlignValue(f[e]),this._change(null,e);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):this.value();else return this._values()},_setOption:function(a,b){var c,
f=0;d.isArray(this.options.values)&&(f=this.options.values.length);d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":b?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=
this._trimAlignValue(b[c]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%b,a=a-c;2*Math.abs(c)>=b&&(a+=0<c?b:-b);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=this.options.range,b=this.options,c=this,f=!this._animateOff?b.animate:!1,e,g=
{},h,k,i,j;if(this.options.values&&this.options.values.length)this.handles.each(function(a){e=100*((c.values(a)-c._valueMin())/(c._valueMax()-c._valueMin()));g["horizontal"===c.orientation?"left":"bottom"]=e+"%";d(this).stop(1,1)[f?"animate":"css"](g,b.animate);if(!0===c.options.range)if("horizontal"===c.orientation){if(0===a)c.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({width:e-h+"%"},{queue:!1,duration:b.animate})}else{if(0===a)c.range.stop(1,
1)[f?"animate":"css"]({bottom:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({height:e-h+"%"},{queue:!1,duration:b.animate})}h=e});else{k=this.value();i=this._valueMin();j=this._valueMax();e=j!==i?100*((k-i)/(j-i)):0;g["horizontal"===c.orientation?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](g,b.animate);if("min"===a&&"horizontal"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},b.animate);if("max"===a&&"horizontal"===this.orientation)this.range[f?
"animate":"css"]({width:100-e+"%"},{queue:!1,duration:b.animate});if("min"===a&&"vertical"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},b.animate);if("max"===a&&"vertical"===this.orientation)this.range[f?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:b.animate})}}});d.extend(d.ui.slider,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.tabs.js' */
(function(d){var n=0,o=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,d){"selected"==a?this.options.collapsible&&d==this.options.selected||this.select(d):
(this.options[a]=d,this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++n},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++o);return d.cookie.apply(null,[a].concat(d.makeArray(arguments)))},_ui:function(a,d){return{tab:a,panel:d,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=
d(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(a){function e(b,a){b.css("display","");!d.support.opacity&&a.opacity&&b[0].style.removeAttribute("filter")}var b=this,c=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(a,e){var h=d(e).attr("href"),f=h.split("#")[0],k;if(f&&(f===location.toString().split("#")[0]||
(k=d("base")[0])&&f===k.href))h=e.hash,e.href=h;g.test(h)?b.panels=b.panels.add(b.element.find(b._sanitizeSelector(h))):h&&"#"!==h?(d.data(e,"href.tabs",h),d.data(e,"load.tabs",h.replace(/#.*$/,"")),h=b._tabId(e),e.href="#"+h,f=b.element.find("#"+h),f.length||(f=d(c.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(b.panels[a-1]||b.list),f.data("destroy.tabs",!0)),b.panels=b.panels.add(f)):c.disabled.push(a)});a?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===c.selected?(location.hash&&this.anchors.each(function(b,a){if(a.hash==location.hash)return c.selected=b,!1}),"number"!==typeof c.selected&&c.cookie&&(c.selected=parseInt(b._cookie(),10)),"number"!==typeof c.selected&&this.lis.filter(".ui-tabs-selected").length&&(c.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"))),c.selected=c.selected||(this.lis.length?0:-1)):null===c.selected&&(c.selected=-1),c.selected=0<=c.selected&&this.anchors[c.selected]||0>c.selected?c.selected:0,c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(a){return b.lis.index(a)}))).sort(),-1!=d.inArray(c.selected,c.disabled)&&c.disabled.splice(d.inArray(c.selected,c.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),
0<=c.selected&&this.anchors.length&&(b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active"),b.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[c.selected],b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash))[0]))}),this.load(c.selected)),d(window).bind("unload",function(){b.lis.add(b.anchors).unbind(".tabs");b.lis=b.anchors=b.panels=null})):c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);for(var a=0,f;f=this.lis[a];a++)d(f)[-1!=d.inArray(a,c.disabled)&&!d(f).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");!1===c.cache&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if("mouseover"!==c.event){var k=function(b,a){a.is(":not(.ui-state-disabled)")&&a.addClass("ui-state-"+b)};this.lis.bind("mouseover.tabs",
function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){d(this).removeClass("ui-state-hover")});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){d(this).closest("li").removeClass("ui-state-focus")})}var j,i;c.fx&&(d.isArray(c.fx)?(j=c.fx[0],i=c.fx[1]):j=i=c.fx);var l=i?function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.hide().removeClass("ui-tabs-hide").animate(i,i.duration||"normal",
function(){e(c,i);b._trigger("show",null,b._ui(a,c[0]))})}:function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.removeClass("ui-tabs-hide");b._trigger("show",null,b._ui(a,c[0]))},m=j?function(a,c){c.animate(j,j.duration||"normal",function(){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");e(c,j);b.element.dequeue("tabs")})}:function(a,c){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");b.element.dequeue("tabs")};
this.anchors.bind(c.event+".tabs",function(){var a=this,e=d(a).closest("li"),f=b.panels.filter(":not(.ui-tabs-hide)"),g=b.element.find(b._sanitizeSelector(a.hash));if(e.hasClass("ui-tabs-selected")&&!c.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||b.panels.filter(":animated").length||b._trigger("select",null,b._ui(this,g[0]))===false){this.blur();return false}c.selected=b.anchors.index(this);b.abort();if(c.collapsible){if(e.hasClass("ui-tabs-selected")){c.selected=
-1;c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){m(a,f)}).dequeue("tabs");this.blur();return false}if(!f.length){c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this));this.blur();return false}}c.cookie&&b._cookie(c.selected,c.cookie);if(g.length){f.length&&b.element.queue("tabs",function(){m(a,f)});b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(a){"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},destroy:function(){var a=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var a=
d.data(this,"href.tabs");a&&(this.href=a);var b=d(this).unbind(".tabs");d.each(["href","load","cache"],function(a,d){b.removeData(d+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});a.cookie&&this._cookie(null,a.cookie);return this},add:function(a,
e,b){void 0===b&&(b=this.anchors.length);var c=this,g=this.options,e=d(g.tabTemplate.replace(/#\{href\}/g,a).replace(/#\{label\}/g,e)),a=!a.indexOf("#")?a.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var f=c.element.find("#"+a);f.length||(f=d(g.panelTemplate).attr("id",a).data("destroy.tabs",!0));f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");b>=this.lis.length?(e.appendTo(this.list),f.appendTo(this.list[0].parentNode)):
(e.insertBefore(this.lis[b]),f.insertBefore(this.panels[b]));g.disabled=d.map(g.disabled,function(a){return a>=b?++a:a});this._tabify();1==this.anchors.length&&(g.selected=0,e.addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))}),this.load(0));this._trigger("add",null,this._ui(this.anchors[b],this.panels[b]));return this},remove:function(a){var a=this._getIndex(a),e=this.options,b=this.lis.eq(a).remove(),
c=this.panels.eq(a).remove();b.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(a+(a+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(b){return b!=a}),function(b){return b>=a?--b:b});this._tabify();this._trigger("remove",null,this._ui(b.find("a")[0],c[0]));return this},enable:function(a){var a=this._getIndex(a),e=this.options;if(-1!=d.inArray(a,e.disabled))return this.lis.eq(a).removeClass("ui-state-disabled"),e.disabled=d.grep(e.disabled,function(b){return b!=
a}),this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a])),this},disable:function(a){var a=this._getIndex(a),d=this.options;a!=d.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),d.disabled.push(a),d.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])));return this},select:function(a){a=this._getIndex(a);if(-1==a)if(this.options.collapsible&&-1!=this.options.selected)a=this.options.selected;else return this;this.anchors.eq(a).trigger(this.options.event+
".tabs");return this},load:function(a){var a=this._getIndex(a),e=this,b=this.options,c=this.anchors.eq(a)[0],g=d.data(c,"load.tabs");this.abort();if(!g||0!==this.element.queue("tabs").length&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(a).addClass("ui-state-processing");if(b.spinner){var f=d("span",c);f.data("label.tabs",f.html()).html(b.spinner)}this.xhr=d.ajax(d.extend({},b.ajaxOptions,{url:g,success:function(f,g){e.element.find(e._sanitizeSelector(c.hash)).html(f);e._cleanup();
b.cache&&d.data(c,"cache.tabs",!0);e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.success(f,g)}catch(i){}},error:function(d,f){e._cleanup();e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.error(d,f,a,c)}catch(g){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(!1,!0);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));this.xhr&&(this.xhr.abort(),delete this.xhr);this._cleanup();
return this},url:function(a,d){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.24"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(a,d){var b=this,c=this.options,g=b._rotate||(b._rotate=function(d){clearTimeout(b.rotation);b.rotation=setTimeout(function(){var a=c.selected;b.select(++a<b.anchors.length?a:0)},a);d&&d.stopPropagation()}),f=b._unrotate||(b._unrotate=!d?function(a){a.clientX&&
b.rotate(null)}:function(){g()});a?(this.element.bind("tabsshow",g),this.anchors.bind(c.event+".tabs",f),g()):(clearTimeout(b.rotation),this.element.unbind("tabsshow",g),this.anchors.unbind(c.event+".tabs",f),delete this._rotate,delete this._unrotate);return this}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.core.js' */
jQuery.effects||function(d){function l(a){var b;return a&&a.constructor==Array&&3==a.length?a:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3])]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],
16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?m.transparent:m[d.trim(a).toLowerCase()]}function n(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var f=a.length;f--;)c=a[f],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"===
typeof a[c]&&(b[c]=a[c]);return b}function o(a){var b,c;for(b in a)c=a[b],(null==c||d.isFunction(c)||b in q||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(c)))&&delete a[b];return a}function r(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function i(a,b,c,e){"object"==typeof a&&(e=b,c=null,b=a,a=b.effect);d.isFunction(b)&&(e=b,c=null,b={});if("number"==typeof b||d.fx.speeds[b])e=c,c=b,b={};d.isFunction(c)&&(e=c,c=null);b=b||{};c=c||b.duration;c=d.fx.off?0:"number"==typeof c?
c:c in d.fx.speeds?d.fx.speeds[c]:d.fx.speeds._default;e=e||b.complete;return[a,b,c,e]}function j(a){return!a||("number"===typeof a||d.fx.speeds[a])||"string"===typeof a&&!d.effects[a]?!0:!1}d.effects={};d.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(a,b){d.fx.step[b]=function(a){if(!a.colorInit){var e;e=a.elem;var f=b,g;do{g=(d.curCSS||d.css)(e,f);if(g!=""&&g!="transparent"||d.nodeName(e,"body"))break;
f="backgroundColor"}while(e=e.parentNode);e=l(g);a.start=e;a.end=l(a.end);a.colorInit=true}a.elem.style[b]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var m={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},p=["add","remove","toggle"],q={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};d.effects.animateClass=function(a,b,c,e){d.isFunction(c)&&(e=c,c=null);return this.queue(function(){var f=
d(this),g=f.attr("style")||" ",h=o(n.call(this)),i,j=f.attr("class")||"";d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});i=o(n.call(this));f.attr("class",j);f.animate(r(h,i),{queue:false,duration:b,easing:c,complete:function(){d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});if(typeof f.attr("style")=="object"){f.attr("style").cssText="";f.attr("style").cssText=g}else f.attr("style",g);e&&e.apply(this,arguments);d.dequeue(this)}})})};d.fn.extend({_addClass:d.fn.addClass,addClass:function(a,
b,c,e){return b?d.effects.animateClass.apply(this,[{add:a},b,c,e]):this._addClass(a)},_removeClass:d.fn.removeClass,removeClass:function(a,b,c,e){return b?d.effects.animateClass.apply(this,[{remove:a},b,c,e]):this._removeClass(a)},_toggleClass:d.fn.toggleClass,toggleClass:function(a,b,c,e,f){return"boolean"==typeof b||void 0===b?c?d.effects.animateClass.apply(this,[b?{add:a}:{remove:a},c,e,f]):this._toggleClass(a,b):d.effects.animateClass.apply(this,[{toggle:a},b,c,e])},switchClass:function(a,b,c,
e,f){return d.effects.animateClass.apply(this,[{add:b,remove:a},c,e,f])}});d.extend(d.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=
1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=d("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}a.wrap(c);
(a[0]===e||d.contains(a[0],e))&&d(e).focus();c=a.parent();"static"==a.css("position")?(c.css({position:"relative"}),a.css({position:"relative"})):(d.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),d.each(["top","left","bottom","right"],function(c,d){b[d]=a.css(d);isNaN(parseInt(b[d],10))&&(b[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(b).show()},removeWrapper:function(a){var b,c=document.activeElement;return a.parent().is(".ui-effects-wrapper")?
(b=a.parent().replaceWith(a),(a[0]===c||d.contains(a[0],c))&&d(c).focus(),b):a},setTransition:function(a,b,c,e){e=e||{};d.each(b,function(b,d){var h=a.cssUnit(d);0<h[0]&&(e[d]=h[0]*c+h[1])});return e}});d.fn.extend({effect:function(a,b,c,e){var f=i.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},f=g.options.mode,h=d.effects[a];return d.fx.off||!h?f?this[f](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):h.call(this,g)},_show:d.fn.show,show:function(a){if(j(a))return this._show.apply(this,
arguments);var b=i.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:d.fn.hide,hide:function(a){if(j(a))return this._hide.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:d.fn.toggle,toggle:function(a){if(j(a)||"boolean"===typeof a||d.isFunction(a))return this.__toggle.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="toggle";return this.effect.apply(this,b)},cssUnit:function(a){var b=this.css(a),
c=[];d.each(["em","px","%","pt"],function(a,d){0<b.indexOf(d)&&(c=[parseFloat(b),d])});return c}});var k={};d.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){k[b]=function(b){return Math.pow(b,a+2)}});d.extend(k,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,
--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});d.each(k,function(a,b){d.easing["easeIn"+a]=b;d.easing["easeOut"+a]=function(a){return 1-b(1-a)};d.easing["easeInOut"+a]=function(a){return 0.5>a?b(2*a)/2:b(-2*a+2)/-2+1}})}(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.blind.js' */
(function(b){b.effects.blind=function(c){return this.queue(function(){var a=b(this),g=["position","top","bottom","left","right"],f=b.effects.setMode(a,c.options.mode||"hide"),d=c.options.direction||"vertical";b.effects.save(a,g);a.show();var e=b.effects.createWrapper(a).css({overflow:"hidden"}),h="vertical"==d?"height":"width",d="vertical"==d?e.height():e.width();"show"==f&&e.css(h,0);var i={};i[h]="show"==f?d:0;e.animate(i,c.duration,c.options.easing,function(){"hide"==f&&a.hide();b.effects.restore(a,
g);b.effects.removeWrapper(a);c.callback&&c.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.bounce.js' */
(function(e){e.effects.bounce=function(b){return this.queue(function(){var a=e(this),l=["position","top","bottom","left","right"],h=e.effects.setMode(a,b.options.mode||"effect"),d=b.options.direction||"up",c=b.options.distance||20,m=b.options.times||5,i=b.duration||250;/show|hide/.test(h)&&l.push("opacity");e.effects.save(a,l);a.show();e.effects.createWrapper(a);var f="up"==d||"down"==d?"top":"left",d="up"==d||"left"==d?"pos":"neg",c=b.options.distance||("top"==f?a.outerHeight(!0)/3:a.outerWidth(!0)/
3);"show"==h&&a.css("opacity",0).css(f,"pos"==d?-c:c);"hide"==h&&(c/=2*m);"hide"!=h&&m--;if("show"==h){var g={opacity:1};g[f]=("pos"==d?"+=":"-=")+c;a.animate(g,i/2,b.options.easing);c/=2;m--}for(g=0;g<m;g++){var j={},k={};j[f]=("pos"==d?"-=":"+=")+c;k[f]=("pos"==d?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing);c="hide"==h?2*c:c/2}"hide"==h?(g={opacity:0},g[f]=("pos"==d?"-=":"+=")+c,a.animate(g,i/2,b.options.easing,function(){a.hide();e.effects.restore(a,l);e.effects.removeWrapper(a);
b.callback&&b.callback.apply(this,arguments)})):(j={},k={},j[f]=("pos"==d?"-=":"+=")+c,k[f]=("pos"==d?"+=":"-=")+c,a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing,function(){e.effects.restore(a,l);e.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)}));a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.clip.js' */
(function(b){b.effects.clip=function(e){return this.queue(function(){var a=b(this),h="position top bottom left right height width".split(" "),f=b.effects.setMode(a,e.options.mode||"hide"),c=e.options.direction||"vertical";b.effects.save(a,h);a.show();var d=b.effects.createWrapper(a).css({overflow:"hidden"}),d="IMG"==a[0].tagName?d:a,i="vertical"==c?"height":"width",j="vertical"==c?"top":"left",c="vertical"==c?d.height():d.width();"show"==f&&(d.css(i,0),d.css(j,c/2));var g={};g[i]="show"==f?c:0;g[j]=
"show"==f?0:c/2;d.animate(g,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){f=="hide"&&a.hide();b.effects.restore(a,h);b.effects.removeWrapper(a);e.callback&&e.callback.apply(a[0],arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.drop.js' */
(function(c){c.effects.drop=function(d){return this.queue(function(){var a=c(this),h="position top bottom left right opacity".split(" "),e=c.effects.setMode(a,d.options.mode||"hide"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a);var f="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",g=d.options.distance||("top"==f?a.outerHeight(!0)/2:a.outerWidth(!0)/2);"show"==e&&a.css("opacity",0).css(f,"pos"==b?-g:g);var i={opacity:"show"==e?1:0};i[f]=("show"==
e?"pos"==b?"+=":"-=":"pos"==b?"-=":"+=")+g;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.explode.js' */
(function(j){j.effects.explode=function(a){return this.queue(function(){var c=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,d=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode="toggle"==a.options.mode?j(this).is(":visible")?"hide":"show":a.options.mode;var b=j(this).show().css("visibility","hidden"),e=b.offset();e.top-=parseInt(b.css("marginTop"),10)||0;e.left-=parseInt(b.css("marginLeft"),10)||0;for(var h=b.outerWidth(!0),i=b.outerHeight(!0),f=0;f<c;f++)for(var g=
0;g<d;g++)b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*(h/d),top:-f*(i/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:i/c,left:e.left+g*(h/d)+("show"==a.options.mode?(g-Math.floor(d/2))*(h/d):0),top:e.top+f*(i/c)+("show"==a.options.mode?(f-Math.floor(c/2))*(i/c):0),opacity:"show"==a.options.mode?0:1}).animate({left:e.left+g*(h/d)+("show"==a.options.mode?0:(g-Math.floor(d/2))*(h/d)),top:e.top+
f*(i/c)+("show"==a.options.mode?0:(f-Math.floor(c/2))*(i/c)),opacity:"show"==a.options.mode?1:0},a.duration||500);setTimeout(function(){"show"==a.options.mode?b.css({visibility:"visible"}):b.css({visibility:"visible"}).hide();a.callback&&a.callback.apply(b[0]);b.dequeue();j("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.fade.js' */
(function(b){b.effects.fade=function(a){return this.queue(function(){var c=b(this),d=b.effects.setMode(c,a.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.fold.js' */
(function(c){c.effects.fold=function(a){return this.queue(function(){var b=c(this),j=["position","top","bottom","left","right"],d=c.effects.setMode(b,a.options.mode||"hide"),g=a.options.size||15,h=!!a.options.horizFirst,k=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,j);b.show();var e=c.effects.createWrapper(b).css({overflow:"hidden"}),f="show"==d!=h,l=f?["width","height"]:["height","width"],f=f?[e.width(),e.height()]:[e.height(),e.width()],i=/([0-9]+)%/.exec(g);i&&(g=parseInt(i[1],
10)/100*f["hide"==d?0:1]);"show"==d&&e.css(h?{height:0,width:g}:{height:g,width:0});h={};i={};h[l[0]]="show"==d?f[0]:g;i[l[1]]="show"==d?f[1]:0;e.animate(h,k,a.options.easing).animate(i,k,a.options.easing,function(){"hide"==d&&b.hide();c.effects.restore(b,j);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.highlight.js' */
(function(b){b.effects.highlight=function(c){return this.queue(function(){var a=b(this),e=["backgroundImage","backgroundColor","opacity"],d=b.effects.setMode(a,c.options.mode||"show"),f={backgroundColor:a.css("backgroundColor")};"hide"==d&&(f.opacity=0);b.effects.save(a,e);a.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(f,{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){d=="hide"&&a.hide();b.effects.restore(a,e);d=="show"&&!b.support.opacity&&
this.style.removeAttribute("filter");c.callback&&c.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.pulsate.js' */
(function(e){e.effects.pulsate=function(a){return this.queue(function(){var b=e(this),d=e.effects.setMode(b,a.options.mode||"show"),g=2*(a.options.times||5)-1,h=a.duration?a.duration/2:e.fx.speeds._default/2,f=b.is(":visible"),c=0;f||(b.css("opacity",0).show(),c=1);("hide"==d&&f||"show"==d&&!f)&&g--;for(d=0;d<g;d++)b.animate({opacity:c},h,a.options.easing),c=(c+1)%2;b.animate({opacity:c},h,a.options.easing,function(){c==0&&b.hide();a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.scale.js' */
(function(c){c.effects.puff=function(b){return this.queue(function(){var a=c(this),d=c.effects.setMode(a,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,i=e/100,g={height:a.height(),width:a.width()};c.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*i,width:g.width*i}});a.effect("scale",b.options,b.duration,b.callback);a.dequeue()})};c.effects.scale=function(b){return this.queue(function(){var a=c(this),d=c.extend(!0,{},b.options),e=c.effects.setMode(a,
b.options.mode||"effect"),i=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",f=b.options.origin;"effect"!=e&&(d.origin=f||["middle","center"],d.restore=!0);f={height:a.height(),width:a.width()};a.from=b.options.from||("show"==e?{height:0,width:0}:f);a.to={height:f.height*("horizontal"!=g?i/100:1),width:f.width*("vertical"!=g?i/100:1)};if(b.options.fade&&("show"==e&&(a.from.opacity=0,a.to.opacity=1),"hide"==e))a.from.opacity=1,a.to.opacity=
0;d.from=a.from;d.to=a.to;d.mode=e;a.effect("size",d,b.duration,b.callback);a.dequeue()})};c.effects.size=function(b){return this.queue(function(){var a=c(this),d="position top bottom left right width height overflow opacity".split(" "),e="position top bottom left right overflow opacity".split(" "),i=["width","height","overflow"],g=["fontSize"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],j=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=c.effects.setMode(a,
b.options.mode||"effect"),q=b.options.restore||!1,n=b.options.scale||"both",k=b.options.origin,h={height:a.height(),width:a.width()};a.from=b.options.from||h;a.to=b.options.to||h;k&&(k=c.effects.getBaseline(k,h),a.from.top=(h.height-a.from.height)*k.y,a.from.left=(h.width-a.from.width)*k.x,a.to.top=(h.height-a.to.height)*k.y,a.to.left=(h.width-a.to.width)*k.x);var l=a.from.height/h.height,o=a.from.width/h.width,m=a.to.height/h.height,p=a.to.width/h.width;if("box"==n||"both"==n)if(l!=m&&(d=d.concat(f),
a.from=c.effects.setTransition(a,f,l,a.from),a.to=c.effects.setTransition(a,f,m,a.to)),o!=p)d=d.concat(j),a.from=c.effects.setTransition(a,j,o,a.from),a.to=c.effects.setTransition(a,j,p,a.to);if(("content"==n||"both"==n)&&l!=m)d=d.concat(g),a.from=c.effects.setTransition(a,g,l,a.from),a.to=c.effects.setTransition(a,g,m,a.to);c.effects.save(a,q?d:e);a.show();c.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);if("content"==n||"both"==n)f=f.concat(["marginTop","marginBottom"]).concat(g),
j=j.concat(["marginLeft","marginRight"]),i=d.concat(f).concat(j),a.find("*[width]").each(function(){var a=c(this);q&&c.effects.save(a,i);var d=a.height(),e=a.width();a.from={height:d*l,width:e*o};a.to={height:d*m,width:e*p};if(l!=m){a.from=c.effects.setTransition(a,f,l,a.from);a.to=c.effects.setTransition(a,f,m,a.to)}if(o!=p){a.from=c.effects.setTransition(a,j,o,a.from);a.to=c.effects.setTransition(a,j,p,a.to)}a.css(a.from);a.animate(a.to,b.duration,b.options.easing,function(){q&&c.effects.restore(a,
i)})});a.animate(a.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){a.to.opacity===0&&a.css("opacity",a.from.opacity);r=="hide"&&a.hide();c.effects.restore(a,q?d:e);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.shake.js' */
(function(d){d.effects.shake=function(a){return this.queue(function(){var b=d(this),j=["position","top","bottom","left","right"];d.effects.setMode(b,a.options.mode||"effect");var c=a.options.direction||"left",e=a.options.distance||20,l=a.options.times||3,f=a.duration||a.options.duration||140;d.effects.save(b,j);b.show();d.effects.createWrapper(b);var g="up"==c||"down"==c?"top":"left",h="up"==c||"left"==c?"pos":"neg",c={},i={},k={};c[g]=("pos"==h?"-=":"+=")+e;i[g]=("pos"==h?"+=":"-=")+2*e;k[g]=("pos"==
h?"-=":"+=")+2*e;b.animate(c,f,a.options.easing);for(e=1;e<l;e++)b.animate(i,f,a.options.easing).animate(k,f,a.options.easing);b.animate(i,f,a.options.easing).animate(c,f/2,a.options.easing,function(){d.effects.restore(b,j);d.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.slide.js' */
(function(c){c.effects.slide=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right"],f=c.effects.setMode(a,d.options.mode||"show"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a).css({overflow:"hidden"});var g="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",e=d.options.distance||("top"==g?a.outerHeight(!0):a.outerWidth(!0));"show"==f&&a.css(g,"pos"==b?isNaN(e)?"-"+e:-e:e);var i={};i[g]=("show"==f?"pos"==
b?"+=":"-=":"pos"==b?"-=":"+=")+e;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==f&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.transfer.js' */
(function(e){e.effects.transfer=function(a){return this.queue(function(){var b=e(this),c=e(a.options.to),d=c.offset(),c={top:d.top,left:d.left,height:c.innerHeight(),width:c.innerWidth()},d=b.offset(),f=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:d.top,left:d.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(c,a.duration,a.options.easing,function(){f.remove();a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'src/js-vendor/jquery/jquery.ui.menu.js' */
(function(d){d.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){d(b.target).closest(".ui-menu-item a").length&&(b.preventDefault(),a.select(b))});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(b){a.activate(b,d(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,e=this.element.attr("scrollTop"),d=this.element.height();0>c?this.element.attr("scrollTop",e+c):c>d&&this.element.attr("scrollTop",e+c-d+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(a,b,c){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(c,a):this.activate(c,this.element.children(b))):
this.activate(c,this.element.children(b))},nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(":first"));else{var b=this.active.offset().top,c=this.element.height(),e=this.element.children("li").filter(function(){var a=d(this).offset().top-b-c+d(this).height();return 10>a&&-10<a});e.length||(e=this.element.children(":last"));this.activate(a,e)}else this.activate(a,this.element.children(!this.active||this.last()?":first":":last"))},previousPage:function(a){if(this.hasScroll())if(!this.active||
this.first())this.activate(a,this.element.children(":last"));else{var b=this.active.offset().top,c=this.element.height();result=this.element.children("li").filter(function(){var a=d(this).offset().top-b+c-d(this).height();return 10>a&&-10<a});result.length||(result=this.element.children(":first"));this.activate(a,result)}else this.activate(a,this.element.children(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",
a,{item:this.active})}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:jQuery.cookie', location = '/bower/jquery.cookie/jquery.cookie.js' */
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD
		define(['jquery'], factory);
	} else if (typeof exports === 'object') {
		// CommonJS
		factory(require('jquery'));
	} else {
		// Browser globals
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function encode(s) {
		return config.raw ? s : encodeURIComponent(s);
	}

	function decode(s) {
		return config.raw ? s : decodeURIComponent(s);
	}

	function stringifyCookieValue(value) {
		return encode(config.json ? JSON.stringify(value) : String(value));
	}

	function parseCookieValue(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape...
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}

		try {
			// Replace server-side written pluses with spaces.
			// If we can't decode the cookie, ignore it, it's unusable.
			// If we can't parse the cookie, ignore it, it's unusable.
			s = decodeURIComponent(s.replace(pluses, ' '));
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	function read(s, converter) {
		var value = config.raw ? s : parseCookieValue(s);
		return $.isFunction(converter) ? converter(value) : value;
	}

	var config = $.cookie = function (key, value, options) {

		// Write

		if (value !== undefined && !$.isFunction(value)) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setTime(+t + days * 864e+5);
			}

			return (document.cookie = [
				encode(key), '=', stringifyCookieValue(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// Read

		var result = key ? undefined : {};

		// To prevent the for loop in the first place assign an empty array
		// in case there are no cookies at all. Also prevents odd result when
		// calling $.cookie().
		var cookies = document.cookie ? document.cookie.split('; ') : [];

		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = parts.join('=');

			if (key && key === name) {
				// If second argument (value) is a function it's a converter...
				result = read(cookie, value);
				break;
			}

			// Prevent storing a cookie that we couldn't decode.
			if (!key && (cookie = read(cookie)) !== undefined) {
				result[name] = cookie;
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) === undefined) {
			return false;
		}

		// Must not alter options, thus extending a fresh object...
		$.cookie(key, '', $.extend({}, options, { expires: -1 }));
		return !$.cookie(key);
	};

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:extraJQuery', location = '/scripts/jquery/tablesorter-2.0.3/jquery.tablesorter.min.js' */

(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'.',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}if(!p){p=detectParserForColumn(table,cells[i]);}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}list.push(p);}}if(table.config.debug){log(parsersDebug);}return list;};function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];}}return parsers[0];}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}return false;}function buildCache(table){if(table.config.debug){var cacheTime=new Date();}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}cols.push(i);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}return cache;};function getElementText(config,node){if(!node)return"";var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;}else{t=node.innerHTML;}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);}else{t=$(node).text();}}return t;}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}}if(table.config.appender){table.config.appender(table,rows);}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0;};$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);}table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}return $tableHeaders;};function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;}else{i=(v==(0||1))?v:0;}return i;}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}return false;}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}return cache;};function sortText(a,b){return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){var DECIMAL='\\'+config.decimal;var exp='/(^[+]?0('+DECIMAL+'0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)'+DECIMAL+'(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*'+DECIMAL+'0+$)/';return RegExp(exp).test($.trim(s));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}$("tr:visible",table.tBodies[0]).filter(':even').removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(':odd').removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/bower/backbone.wreqr/backbone.wreqr.js' */
// Backbone.Wreqr (Backbone.Marionette)
// ----------------------------------
// v1.3.2
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.wreqr


(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  "use strict";

  var previousWreqr = Backbone.Wreqr;

  var Wreqr = Backbone.Wreqr = {};

  Backbone.Wreqr.VERSION = '1.3.2';

  Backbone.Wreqr.noConflict = function () {
    Backbone.Wreqr = previousWreqr;
    return this;
  };

  // Handlers
  // --------
  // A registry of functions to call, given a name
  
  Wreqr.Handlers = (function(Backbone, _){
    "use strict";
    
    // Constructor
    // -----------
  
    var Handlers = function(options){
      this.options = options;
      this._wreqrHandlers = {};
      
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    Handlers.extend = Backbone.Model.extend;
  
    // Instance Members
    // ----------------
  
    _.extend(Handlers.prototype, Backbone.Events, {
  
      // Add multiple handlers using an object literal configuration
      setHandlers: function(handlers){
        _.each(handlers, function(handler, name){
          var context = null;
  
          if (_.isObject(handler) && !_.isFunction(handler)){
            context = handler.context;
            handler = handler.callback;
          }
  
          this.setHandler(name, handler, context);
        }, this);
      },
  
      // Add a handler for the given name, with an
      // optional context to run the handler within
      setHandler: function(name, handler, context){
        var config = {
          callback: handler,
          context: context
        };
  
        this._wreqrHandlers[name] = config;
  
        this.trigger("handler:add", name, handler, context);
      },
  
      // Determine whether or not a handler is registered
      hasHandler: function(name){
        return !! this._wreqrHandlers[name];
      },
  
      // Get the currently registered handler for
      // the specified name. Throws an exception if
      // no handler is found.
      getHandler: function(name){
        var config = this._wreqrHandlers[name];
  
        if (!config){
          return;
        }
  
        return function(){
          return config.callback.apply(config.context, arguments);
        };
      },
  
      // Remove a handler for the specified name
      removeHandler: function(name){
        delete this._wreqrHandlers[name];
      },
  
      // Remove all handlers from this registry
      removeAllHandlers: function(){
        this._wreqrHandlers = {};
      }
    });
  
    return Handlers;
  })(Backbone, _);
  
  // Wreqr.CommandStorage
  // --------------------
  //
  // Store and retrieve commands for execution.
  Wreqr.CommandStorage = (function(){
    "use strict";
  
    // Constructor function
    var CommandStorage = function(options){
      this.options = options;
      this._commands = {};
  
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    // Instance methods
    _.extend(CommandStorage.prototype, Backbone.Events, {
  
      // Get an object literal by command name, that contains
      // the `commandName` and the `instances` of all commands
      // represented as an array of arguments to process
      getCommands: function(commandName){
        var commands = this._commands[commandName];
  
        // we don't have it, so add it
        if (!commands){
  
          // build the configuration
          commands = {
            command: commandName, 
            instances: []
          };
  
          // store it
          this._commands[commandName] = commands;
        }
  
        return commands;
      },
  
      // Add a command by name, to the storage and store the
      // args for the command
      addCommand: function(commandName, args){
        var command = this.getCommands(commandName);
        command.instances.push(args);
      },
  
      // Clear all commands for the given `commandName`
      clearCommands: function(commandName){
        var command = this.getCommands(commandName);
        command.instances = [];
      }
    });
  
    return CommandStorage;
  })();
  
  // Wreqr.Commands
  // --------------
  //
  // A simple command pattern implementation. Register a command
  // handler and execute it.
  Wreqr.Commands = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      // default storage type
      storageType: Wreqr.CommandStorage,
  
      constructor: function(options){
        this.options = options || {};
  
        this._initializeStorage(this.options);
        this.on("handler:add", this._executeCommands, this);
  
        Wreqr.Handlers.prototype.constructor.apply(this, arguments);
      },
  
      // Execute a named command with the supplied args
      execute: function(name){
        name = arguments[0];
        var args = _.rest(arguments);
  
        if (this.hasHandler(name)){
          this.getHandler(name).apply(this, args);
        } else {
          this.storage.addCommand(name, args);
        }
  
      },
  
      // Internal method to handle bulk execution of stored commands
      _executeCommands: function(name, handler, context){
        var command = this.storage.getCommands(name);
  
        // loop through and execute all the stored command instances
        _.each(command.instances, function(args){
          handler.apply(context, args);
        });
  
        this.storage.clearCommands(name);
      },
  
      // Internal method to initialize storage either from the type's
      // `storageType` or the instance `options.storageType`.
      _initializeStorage: function(options){
        var storage;
  
        var StorageType = options.storageType || this.storageType;
        if (_.isFunction(StorageType)){
          storage = new StorageType();
        } else {
          storage = StorageType;
        }
  
        this.storage = storage;
      }
    });
  
  })(Wreqr, _);
  
  // Wreqr.RequestResponse
  // ---------------------
  //
  // A simple request/response implementation. Register a
  // request handler, and return a response from it
  Wreqr.RequestResponse = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      request: function(name){
        if (this.hasHandler(name)) {
          return this.getHandler(name).apply(this, _.rest(arguments));
        }
      }
    });
  
  })(Wreqr, _);
  
  // Event Aggregator
  // ----------------
  // A pub-sub object that can be used to decouple various parts
  // of an application through event-driven architecture.
  
  Wreqr.EventAggregator = (function(Backbone, _){
    "use strict";
    var EA = function(){};
  
    // Copy the `extend` function used by Backbone's classes
    EA.extend = Backbone.Model.extend;
  
    // Copy the basic Backbone.Events on to the event aggregator
    _.extend(EA.prototype, Backbone.Events);
  
    return EA;
  })(Backbone, _);
  
  // Wreqr.Channel
  // --------------
  //
  // An object that wraps the three messaging systems:
  // EventAggregator, RequestResponse, Commands
  Wreqr.Channel = (function(Wreqr){
    "use strict";
  
    var Channel = function(channelName) {
      this.vent        = new Backbone.Wreqr.EventAggregator();
      this.reqres      = new Backbone.Wreqr.RequestResponse();
      this.commands    = new Backbone.Wreqr.Commands();
      this.channelName = channelName;
    };
  
    _.extend(Channel.prototype, {
  
      // Remove all handlers from the messaging systems of this channel
      reset: function() {
        this.vent.off();
        this.vent.stopListening();
        this.reqres.removeAllHandlers();
        this.commands.removeAllHandlers();
        return this;
      },
  
      // Connect a hash of events; one for each messaging system
      connectEvents: function(hash, context) {
        this._connect('vent', hash, context);
        return this;
      },
  
      connectCommands: function(hash, context) {
        this._connect('commands', hash, context);
        return this;
      },
  
      connectRequests: function(hash, context) {
        this._connect('reqres', hash, context);
        return this;
      },
  
      // Attach the handlers to a given message system `type`
      _connect: function(type, hash, context) {
        if (!hash) {
          return;
        }
  
        context = context || this;
        var method = (type === 'vent') ? 'on' : 'setHandler';
  
        _.each(hash, function(fn, eventName) {
          this[type][method](eventName, _.bind(fn, context));
        }, this);
      }
    });
  
  
    return Channel;
  })(Wreqr);
  
  // Wreqr.Radio
  // --------------
  //
  // An object that lets you communicate with many channels.
  Wreqr.radio = (function(Wreqr, _){
    "use strict";
  
    var Radio = function() {
      this._channels = {};
      this.vent = {};
      this.commands = {};
      this.reqres = {};
      this._proxyMethods();
    };
  
    _.extend(Radio.prototype, {
  
      channel: function(channelName) {
        if (!channelName) {
          throw new Error('Channel must receive a name');
        }
  
        return this._getChannel( channelName );
      },
  
      _getChannel: function(channelName) {
        var channel = this._channels[channelName];
  
        if(!channel) {
          channel = new Wreqr.Channel(channelName);
          this._channels[channelName] = channel;
        }
  
        return channel;
      },
  
      _proxyMethods: function() {
        _.each(['vent', 'commands', 'reqres'], function(system) {
          _.each( messageSystems[system], function(method) {
            this[system][method] = proxyMethod(this, system, method);
          }, this);
        }, this);
      }
    });
  
  
    var messageSystems = {
      vent: [
        'on',
        'off',
        'trigger',
        'once',
        'stopListening',
        'listenTo',
        'listenToOnce'
      ],
  
      commands: [
        'execute',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ],
  
      reqres: [
        'request',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ]
    };
  
    var proxyMethod = function(radio, system, method) {
      return function(channelName) {
        var messageSystem = radio._getChannel(channelName)[system];
  
        return messageSystem[method].apply(messageSystem, _.rest(arguments));
      };
    };
  
    return new Radio();
  
  })(Wreqr, _);
  

  return Backbone.Wreqr;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/bower/backbone-brace/backbone.brace.js' */
(function (root, factory) {
    // Global to export
    var rootExport = 'Brace';
    // Store a reference to any other copies of Brace include (if any)
    var previousBrace = root[rootExport];

    // noConflict will return this version of Brace and reset the global
    // Brace variable to the previously loaded version of Brace (or undefined
    // if there was no previous version loaded).
    /**
     * Returns the current copy of Brace and sets the global Brace object to the
     * previous version (or undefined if there was no previous version loaded).
     *
     * @returns Object A reference to this version of Brace.
     */
    var noConflict = function () {
        root[rootExport] = previousBrace;
        return this;
    };

    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['underscore', 'backbone'], factory);
    } else if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory(require('underscore'), require('backbone'));
    } else {
        // Browser globals
        var _brace = factory(root._, root.Backbone);
        _brace.noConflict = noConflict;
        root[rootExport] = _brace;
    }
}(this, function (_, Backbone) {

    var Brace = {};

    // ## Helper functions

    // Given an array, this function will return an object where each
    //     property name is an element of the original array. The value
    //     of each property will be null.
    // Given anything else, this function will return the object untouched.
    /**
     * This function is used to ensure a consistent shape for the namedAttributes property.
     * namedAttributes accepts two formats:
     * - An array like ['attr1', 'attr2'] if you don't care about the type of any attribute.
     * - An object like { attr1 : type1, attr2 : type2 } to specify an expected type.
     *
     * @param maybeArray {*} thing to transform into an object
     */
    function asObject(maybeArray) {
        if (_.isArray(maybeArray)) {
            return _.reduce(maybeArray, function(obj, prop) {
                obj[prop] =  null;
                return obj;
            }, {});
        }
        return maybeArray;
    }

    // Return a value of the specified type, generated from the value parameter.
    // If type conversion is necessary, this function will generate a new object using
    // `new type(value)`
    //
    // `value` Any value. null and undefined values will be untouched.
    //
    // `type` When given:
    //
    // * a falsy value: this function will do no type conversion.
    // * a string: this function will throw if `typeof value !== type`, and return value otherwise.
    // * an Array: this function will be recursively called for each element in value using
    //   type's first element as the type. E.g.,
    //         `ensureType([ Number ], [ 1 ])` will recursively call `ensureType(Number, 1)`
    //   It will return a new array consisting of the result of each recursive call.
    // * a Backbone.Collection constructor: this function may be recursively called for each element in
    //     value using type.model as the type. E.g.,
    //         `ensureType({ model : Number, __proto__ : Backbone.Collection.prototype }, [ 1 ])` will
    //         recursively call `ensureType(Number, 1)`
    //     It will return a Backbone.Collection via new type({array of recursive results})
    // * a function: This will check value instanceof type, and if false, will return `new type(value)`
    //     Otherwise it will return value directly
    /**
     * @param value {*}
     * @param type {Array|function(new:*, *)|string|false|null|undefined}
     */
    function ensureType(type, value) {
        /*jshint newcap: false */
        if (!type || value == null) {
            return value;
        }

        if (type === String && _.isString(value)) {
            return value;
        }
        if (type === Number && _.isNumber(value)) {
            return value;
        }
        if (type === Boolean && _.isBoolean(value)) {
            return value;
        }

        if (typeof type === 'string' || type instanceof String) {
            if (typeof value !== ""+type) {
                throw "The typeof " + value + " is " + typeof value + " but expected it to be " + type;
            }
            return value;
        }

        if (_.isArray(type) || type === Array) {
            if (!isArrayLike(value)) {
                throw "Array type expected, but nonnull, non-Array value provided.";
            }
            return type === Array || !type[0] ?
                value :
                _.map(value, _.bind(ensureType, null, type[0]));
        }

        if (typeof type !== 'function') {
            throw "Invalid expected type " + type +
            '. Should be falsy, String, Array, Backbone.Collection constructor, or function.';
        }

        if (value instanceof type) {
            return value;
        }

        if (isCollectionConstructor(type)) {
            return new type(ensureType([ type.model ], value));
        }

        return new type(value);
    }

    // Returns true if obj is extend()'ed from Backbone.Collection (or from another collection)
    /**
     * @param obj {*} object to check
     * @param rootConstructor {?function(new:Backbone.Collection)} optional constructor that inherits from
     *        Backbone.Collection. Will check that obj is extend()'ed from this instead of Backbone.Collection.
     */
    function isCollectionConstructor(obj, rootConstructor) {
        return  obj && (
            // obj *distantly* extends Backbone.Collection (most likely case)
            obj.__super__ instanceof (rootConstructor || Backbone.Collection) ||

            // obj *directly* extends Backbone.Collection (e.g., Brace.Collection)
            // !(fn.prototype instanceof fn), so the above check doesn't catch this case.
            obj.__super__ === (rootConstructor || Backbone.Collection).prototype ||

            // obj *is* Backbone.Collection
            obj === (rootConstructor || Backbone.Collection)
        );
    }

    // array-like is currently defined by "has a length property, and is not a string or
    // function or Backbone.Collection."
    // Backbone.Collections are excluded because you can't do collection[0] to access models.
    function isArrayLike(value) {
        return _.has(value,'length') && !(
            value instanceof String ||
            _.has({'string':1, 'function':1}, typeof value) ||
            value instanceof Backbone.Collection
        );
    }

    // With namedAttributes, we want to allow both the mixin, and the extender to define types.
    // We want to take the stricter of the two types where possible.
    // Where the types conflict, throw an error.
    function nonConflictedTypes(obj, refObj) {
        var newObj = {};
        _.each(obj, function(val, key) {
            if (!refObj[key] || assumes(val, refObj[key])) {
                newObj[key] = val;
            } else if (!val || assumes(refObj[key], val)) {
                return;
            } else {
                throw key + " has conflicted type descriptors.";
            }
        });
        return newObj;
    }

    // One type *assumes* another when the conditions for meeting its
    // type-check are a super set of the assumed type's conditions.
    // E.g., `[ 'string' ]` assumes `Array` because you can't have an array of strings without an array.
    function assumes(assumer, assumed) {
        if (!assumed || assumed === assumer) {
            return true;
        }
        // if it's a string, only the previous strict equality check would have sufficed.
        if (!assumer || typeof assumer === 'string') {
            return false;
        }
        if (assumer instanceof Array) {
            return assumed === Array ||
                (assumed instanceof Array && assumes(assumer[0], assumed[0]));
        }
        if (typeof assumed !== 'function') {
            return false;
        }
        if (isCollectionConstructor(assumed)) {
            return isCollectionConstructor(assumer, assumed);
        }
        return assumer.prototype instanceof assumed;
    }

    /**
     * @param {Object?} object
     * @return {Object} plain object
     */
    function nestedToJSON(object) {
        if (_.isObject(object)) {
            return _.reduce(object, function(memo, value, key) {
                if (value && _.isFunction(value.toJSON)) {
                    memo[key] = value.toJSON();
                } else if (_.isArray(value)) {
                    memo[key] = _.map(value, function(el) {
                        if (el && _.isFunction(el.toJSON)) {
                            return el.toJSON();
                        } else {
                            return el;
                        }
                    });
                }
                return memo;
            }, object);
        } else {
            return object;
        }
    }

    function createToJSON(previousToJSON) {
        return function toJSON() {
            var json = previousToJSON.call(this);
            return nestedToJSON(json);
        };
    }

    // ## Brace.Mixins ##
    // Mixin utilities
    Brace.Mixins = {
        // Creates a camelCased method name
        createMethodName: function(prefix, suffix) {
            return prefix + suffix.charAt(0).toUpperCase() + suffix.substr(1);
        },

        // Applies a mixin to the given constructor's prototype.
        applyMixin: function(ctor, mixin) {
            _.forEach(_.keys(mixin), function(key) {
                var proto = ctor.prototype;

                // `initialize` is not mixed in - we compose the mixin's initialize with the existing initialize method (if it exists).
                if ("initialize" === key) {
                    var oldInitialize = proto.initialize;
                    proto.initialize = function() {
                        if (oldInitialize) {
                            oldInitialize.apply(this, arguments);
                        }
                        mixin.initialize.apply(this, arguments);
                    };
                    return;
                }
                // `validate` is not mixed in - we compose the mixin's validate with the existing validate method (if it exists).
                if ("validate" === key) {
                    var oldValidate = proto.validate;
                    proto.validate = function() {
                        if (oldValidate) {
                            var errors = oldValidate.apply(this, arguments);
                            if (errors) {
                                return errors;
                            }
                        }
                        return mixin.validate.apply(this, arguments);
                    };
                    return;
                }
                // `defaults` are not mixed in - we compose the mixin's defaults with existing defaults if they exist
                if ("defaults" === key) {
                    var defaults = proto.defaults || (proto.defaults = {});
                    var mixinDefaults = mixin[key];
                    for (var id in mixinDefaults) {
                        if (defaults.hasOwnProperty(id)) {
                            throw "Mixin error: class already has default '" + id + "' defined";
                        }
                        defaults[id] = mixinDefaults[id];
                    }
                    return;
                }
                // `namedAttributes` are added to the mixin, and we mixin in getters and setters for each attribute.
                if ("namedAttributes" === key) {
                    var protoAttrs = asObject(proto.namedAttributes) || {};
                    var mixinAttrs = asObject(mixin[key]);
                    proto.namedAttributes = _.extend(protoAttrs, nonConflictedTypes(mixinAttrs, protoAttrs));
                    return;
                }

                // `namedEvents` are added to the mixin, and we mix in on and trigger methods for each event.
                if ("namedEvents" === key) {
                    // `events` must be an array
                    if (!_.isArray(mixin[key])) {
                        throw "Expects events member on mixin to be an array";
                    }
                    if (!proto.namedEvents) {
                        proto.namedEvents = [];
                    }
                    proto.namedEvents = _.uniq(proto.namedEvents.concat(mixin[key]));
                    return;
                }
                // Name collisions with other mixins or or the object we're mixing into result in violent and forceful disapproval.
                if (proto.hasOwnProperty(key)) {
                    throw "Mixin error: class already has property '" + key + "' defined";
                }
                proto[key] = mixin[key];
            }, this);
        }
    };

    // ## Brace.AttributesMixinCreator ##
    Brace.AttributesMixinCreator = {

        // Creates a mixin of getter and setter methods for each item in the given attribute list.
        // A getter and setter for `id` is always generated.
        create: function(attributes, idAttribute) {
            var methods = {};

            if (!attributes) {
                attributes = {};
            }

            if (!_.has(attributes, "id")) {
                attributes.id = null;
            }

            _.each(attributes, function (expectedType, attrName) {
                // TODO: has, escape, unset
                var setter = Brace.Mixins.createMethodName("set", attrName);
                methods[setter] = function (val,options) {
                    return this.set(attrName, val, options);
                };
                var getter = Brace.Mixins.createMethodName("get", attrName);
                methods[getter] = function () {
                    return this.get(attrName);
                };
            });

            // If an idAttribute is specified
            //
            //    * the ID is going to be of the same type as that attribute
            //    * alias the ID's getter/setter to that attribute's getter/setter
            //    * Don't alias if the idAttribute is set to 'id'
            if (typeof idAttribute === 'string' && typeof attributes[idAttribute] !== 'undefined' && idAttribute !== 'id') {
                attributes.id = attributes[idAttribute];
                var idGetter = Brace.Mixins.createMethodName("get", idAttribute);
                var idSetter = Brace.Mixins.createMethodName("set", idAttribute);
                methods.getId = function() { return this[idGetter](); };
                methods.setId = function(val, options) { return this[idSetter](val, options); };
            }

            return methods;
        },
        /**
         * See JSDoc for this function in the backbone.brace file.
         *
         * Expose the ensureType function for people with custom constructors that don't call
         * .set() to initialize attributes. Hopefully this is rarely used, as I would
         * consider not calling .set() to be a code smell.
         *
         * @param type
         * @param value
         */
        ensureType : ensureType
    };

    // ## Brace.EventsMixinCreator ##
    Brace.EventsMixinCreator = {

        // Creates a mixin of on and trigger methods for each item in the given list of events.
        create: function(events) {
            var eventMethods = {};
            var createEvent = function(eventName) {
                // TODO: off
                var binder = Brace.Mixins.createMethodName("on", eventName);
                eventMethods[binder] = function() {
                    return this.on.apply(this, [eventName].concat(_.toArray(arguments)));
                };
                var trigger = Brace.Mixins.createMethodName("trigger", eventName);
                eventMethods[trigger] = function() {
                    return this.trigger.apply(this, [eventName].concat(_.toArray(arguments)));
                };
            };
            _.each(events, _.bind(createEvent,this));

            return eventMethods;
        }
    };

     // Generates an `extend` method that overrides Backbone's default `extend`. The new extend calls Backbone's `extend`, then:
     //
     //   * Adds all mixins specified in the `mixins` array
     //   * Adds a `Brace.EventsMixinCreator` to mix in on and trigger methods for events specified in the `namedEvents` array
     //   * Adds a `Brace.AttributesMixinCreator` to mix in get and set methods for attributes specified in the `attributes` array
    function generateMixinExtend(oldExtend) {
        return function newExtend(protoProps, classProps) {
            var child;
            var cleanProtoProps = _.extend({}, protoProps);
            // Remove `mixins` - we don't want to see them on the created prototype. Note that we do want to see `namedAttributes` and `namedEvents` for debugging
            var mixins;
            if (protoProps && protoProps.mixins) {
                mixins = protoProps.mixins;
                delete cleanProtoProps.mixins;
            }
            child = oldExtend.call(this, cleanProtoProps, classProps);

            if (this.prototype.namedEvents) {
                Brace.Mixins.applyMixin(child, { namedEvents : this.prototype.namedEvents });
            }
            if (this.prototype.namedAttributes) {
                Brace.Mixins.applyMixin(child, { namedAttributes : this.prototype.namedAttributes });
            }

            if (mixins) {
                _.each(protoProps.mixins, function(mixin) {
                    Brace.Mixins.applyMixin(child, mixin);
                });
            }
            if (child.prototype.namedEvents) {
                Brace.Mixins.applyMixin(child, Brace.EventsMixinCreator.create(child.prototype.namedEvents));
            }
            if (child.prototype.namedAttributes) {
                child.prototype.namedAttributes = asObject(child.prototype.namedAttributes);
                Brace.Mixins.applyMixin(child, Brace.AttributesMixinCreator.create(child.prototype.namedAttributes, child.prototype.idAttribute));
            }

            if (child.prototype.toJSON) {
                child.prototype.toJSON = createToJSON(child.prototype.toJSON);
            }

            child.extend = newExtend;
            return child;
        };
    }

    // Overrides Backbone's `get` and `set` methods to validate that the attribute being get / set is a namedAttribute.
    function overrideSetGet(ctor, childCtor) {
        var proto = ctor.prototype;
        var childProto = childCtor.prototype;

        var oldSet = proto.set;
        childProto.set = function(key, value, options) {
            // TODO: has, escape, unset
            var attrs,
                attributes = this.namedAttributes;

            if (!attributes || key == null) {
                return oldSet.apply(this, arguments);
            }

            if (_.isObject(key)) {
                attrs = _.clone(key);
                options = value;
            } else {
                attrs = {};
                attrs[key] = value;
            }

            for (var attr in attrs) {
                if (!_.has(attrs, attr)) {
                    continue;
                }
                if (!_.has(attributes, attr)) {
                    throw "Attribute '" + attr + "' does not exist";
                }
                attrs[attr] = ensureType(attributes[attr], attrs[attr]);
            }

            return oldSet.call(this, attrs, options);
        };

        var oldGet = proto.get;
        childProto.get = function(attr) {
            if (this.namedAttributes && !_.has(this.namedAttributes, attr)) {
                throw "Attribute '" + attr + "' does not exist";
            }
            return oldGet.apply(this, arguments);
        };
    }

    // Overrides Backbone's `parse` method to parse only namedAttributes
    function overrideParse(ctor, childCtor) {
        var proto = ctor.prototype;
        var childProto = childCtor.prototype;

        var oldParse = proto.parse;
        childProto.parse = function(response, options) {
            return _.pick(oldParse(response, options), _.keys(this.namedAttributes));
        };
    }

    // Applies extensions to the given constructor function. Sets `extend` to a method generated by `generateMixinExtend`
    function applyExtensions(ctor) {
        var child = ctor.extend();
        var oldExtend = ctor.extend;
        child.extend = generateMixinExtend(oldExtend);
        return child;
    }


    // Applies extensions to the given constructor function. Sets `extend` to a method generated by `generateMixinExtend`
    function applyModelExtensions(ctor) {
        var child = applyExtensions(ctor);
        overrideSetGet(ctor, child);
        overrideParse(ctor, child);
        return child;
    }

    // Extend base Backbone classes
    Brace.Model = applyModelExtensions(Backbone.Model);
    Brace.Collection = applyExtensions(Backbone.Collection);
    Brace.View = applyExtensions(Backbone.View);
    Brace.Router = applyExtensions(Backbone.Router);
    var Evented = function() {
        this.initialize.apply(this, arguments);
    };
    _.extend(Evented.prototype, Backbone.Events, {
        initialize: function() {}
    });
    Evented.extend = Backbone.Model.extend;
    Brace.Evented = applyExtensions(Evented);

    return Brace;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/bower/backbone-computedfields/backbone.computedfields.js' */
// Backbone.ComputedFields, v0.0.9
// Copyright (c)2014 alexander.beletsky@gmail.com
// Distributed under MIT license
// https://github.com/alexanderbeletsky/backbone-computedfields

Backbone.ComputedFields = (function(Backbone, _){

    var ComputedFields = function (model) {
        this.model = model;
        this._computedFields = [];

        this.initialize();
    };

    _.extend(ComputedFields.prototype, {
        initialize: function () {
            _.bindAll(
                this,
                '_bindModelEvents',
                '_computeFieldValue',
                '_dependentFields',
                '_isModelInitialized',
                '_lookUpComputedFields',
                '_thenComputedChanges',
                '_thenDependentChanges',
                '_toJSON',
                '_wrapJSON',
                'initialize'
            );

            this._lookUpComputedFields();
            this._bindModelEvents();
            this._wrapJSON();
        },

        _lookUpComputedFields: function () {
            for (var obj in this.model.computed) {
                var field = this.model.computed[obj];

                if (field && (field.set || field.get)) {
                    this._computedFields.push({name: obj, field: field});
                }
            }
        },

        _bindModelEvents: function () {
            _.each(this._computedFields, function (computedField) {
                var fieldName = computedField.name;
                var field = computedField.field;

                var updateComputed = _.bind(function () {
                    var value = this._computeFieldValue(field);
                    this.model.set(fieldName, value, { skipChangeEvent: true });
                }, this);

                var updateDependent = _.bind(function (model, value, options) {
                    if (options && options.skipChangeEvent) {
                        return;
                    }

                    if (field.set) {
                        var fields = this._dependentFields(field.depends);
                        value = value || this.model.get(fieldName);

                        field.set.call(this.model, value, fields);
                        this.model.set(fields, options);
                    }
                }, this);

                this._thenDependentChanges(field.depends, updateComputed);
                this._thenComputedChanges(fieldName, updateDependent);

                if (this._isModelInitialized()) {
                    updateComputed();
                }
            }, this);
        },

        _isModelInitialized: function () {
            return !_.isEmpty(this.model.attributes);
        },

        _thenDependentChanges: function (depends, callback) {
            _.each(depends, function (name) {
                if (typeof (name) === 'string') {
                    this.model.on('change:' + name, callback);
                }

                if (typeof (name) === 'function') {
                    name.call(this.model, callback);
                }
            }, this);
        },

        _thenComputedChanges: function (fieldName, callback) {
            this.model.on('change:' + fieldName, callback);
        },

        _wrapJSON: function () {
            this.model.toJSON = _.wrap(this.model.toJSON, this._toJSON);
        },

        _toJSON: function (toJSON) {
            var args = Array.prototype.slice.call(arguments, 1),
                attributes = toJSON.apply(this.model, args),
                strip = !!(args[0] || {}).computedFields;

            var stripped = strip ? {} : _.reduce(this._computedFields, function (memo, computed) {
                if (computed.field.toJSON === false) {
                    memo.push(computed.name);
                }
                return memo;
            },[]);

            return _.omit(attributes, stripped);
        },

        _computeFieldValue: function (computedField) {
            if (computedField && computedField.get) {
                var fields = this._dependentFields(computedField.depends);
                return computedField.get.call(this.model, fields);
            }
        },

        _dependentFields: function (depends) {
            return _.reduce(depends, function (memo, field) {
                memo[field] = this.model.get(field);
                return memo;
            }, {}, this);
        }

    });

    return ComputedFields;

})(Backbone, _);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/util/shims/backbone.js' */
define('backbone', function() {
    return window.Backbone;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/util/shims/brace.js' */
define('brace', function() {
    return window.Brace;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-namespace', location = '/util/namespace.js' */
/**
 * Get/set the value at a compound namespace,
 * gracefully adding values where missing.
 *
 * @param {string} namespace
 * @param {Object} [context=window]
 * @param {Object} [value={}]
 * @deprecated
 */
AJS.namespace = function (namespace, context, value) {
    var names = namespace.split(".");
    context = context || window;
    for (var i = 0, n = names.length - 1; i < n; i++) {
        var x = context[names[i]];
        context = (x != null) ? x : context[names[i]] = {};
    }
    context[names[i]] = value || context[names[i]] || {};
    return context[names[i]];
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:skate-0.12.6', location = 'libs/skate/0.12.6/skate-0.12.6.js' */
'use strict';(function e(a,h,g){function b(c,k){if(!h[c]){if(!a[c]){var l="function"==typeof require&&require;if(!k&&l)return l(c,!0);if(f)return f(c,!0);k=Error("Cannot find module '"+c+"'");throw k.code="MODULE_NOT_FOUND",k;}k=h[c]={exports:{}};a[c][0].call(k.exports,function(f){var k=a[c][1][f];return b(k?k:f)},k,k.exports,e,a,h,g)}return h[c].exports}for(var f="function"==typeof require&&require,l=0;l<g.length;l++)b(g[l]);return b})({1:[function(a,h,g){Object.defineProperty(g,"__esModule",{value:!0});
"use strict";g.ATTR_IGNORE="data-skate-ignore";g.types={ANY:"act",ATTR:"a",CLASS:"c",NOATTR:"ct",NOCLASS:"at",NOTAG:"ac",TAG:"t"}},{}],2:[function(a,h,g){h.exports={get:function(a,b){if(a.__SKATE_DATA)return a.__SKATE_DATA[b]},set:function(a,b,f){a.__SKATE_DATA||(a.__SKATE_DATA={});a.__SKATE_DATA[b]=f;return a}}},{}],3:[function(a,h,g){function r(a){for(var f=a.length,b=0;b<f;b++){var d=a[b],k=d.addedNodes;d=d.removedNodes;k&&k.length&&!v(k[0].parentNode)&&l(k);d&&d.length&&c(d)}}g=function(a){return a&&
a.__esModule?a["default"]:a};var b=g(a("./globals")),f=a("./lifecycle"),l=f.initElements,c=f.removeElements,k=g(a("./mutation-observer")),v=a("./utils").getClosestIgnoredElement;h.exports={register:function(a){a&&(k.fixIe(),this.unregister());b.observer||(a=new k(r),a.observe(document,{childList:!0,subtree:!0}),b.observer=a);return this},unregister:function(){b.observer&&(b.observer.disconnect(),b.observer=void 0);return this}}},{"./globals":4,"./lifecycle":5,"./mutation-observer":6,"./utils":9}],
4:[function(a,h,g){window.__skate||(window.__skate={observer:void 0,registry:{}});h.exports=window.__skate},{}],5:[function(a,h,g){function r(a,d,c){if(q.get(a,d.id+":lifecycle:"+c))return!0;q.set(a,d.id+":lifecycle:"+c,!0);return!1}function b(a,d){function m(c,m,f,k){if(d.attributes&&d.attributes[m]&&"function"===typeof d.attributes[m][c])var b=d.attributes[m][c];else d.attributes&&"function"===typeof d.attributes[m]?b=d.attributes[m]:"function"===typeof d.attributes&&(b=d.attributes);b&&b(a,{type:c,
name:m,newValue:f,oldValue:k})}var c,f=a.attributes,k=[],b=f.length;(new u(function(a){a.forEach(function(a){var d,c=a.attributeName,b=f[c];b&&null===a.oldValue?d="created":b&&null!==a.oldValue?d="updated":b||(d="removed");m(d,c,b?b.value||b.nodeValue:void 0,a.oldValue)})})).observe(a,{attributes:!0,attributeOldValue:!0});for(c=0;c<b;c++)k.push(f[c]);for(c=0;c<b;c++){var t=k[c];m("created",t.nodeName,t.value||t.nodeValue)}}function f(a,d){function c(d,c){return function(m){if(!c)return d(a,m,a);for(var b=
m.target;b&&b!==document&&b!==a.parentNode;){if(x.call(b,c))return d(a,m,b);b=b.parentNode}}}"object"===typeof d.events&&p(d.events,function(d,m){var b=m.split(" ");m=b.shift();b=b.join(" ");var f=!!b&&("blur"===m||"focus"===m);a.addEventListener(m,c(d,b),f)})}function l(a,c){r(a,c,"created")||(d(a,c.prototype,!0),c.template&&c.template(a),f(a,c),b(a,c),c.created&&c.created(a))}function c(a){for(var d=a.length,b=0;b<d;b++){var m=a[b];if(1===m.nodeType&&!m.attributes[v]){for(var f=n.getForElement(m),
k=f.length,g=0;g<k;g++){var h=m,p=f[g];l(h,p);r(h,p,"attached")||(h.removeAttribute(p.unresolvedAttribute),h.setAttribute(p.resolvedAttribute,""),p.attached&&p.attached(h))}m=m.childNodes;m.length&&c(m)}}}function k(a){for(var c=a.length,d=0;d<c;d++){var b=a[d];if(1===b.nodeType){k(b.childNodes);for(var m=n.getForElement(b),f=m.length,g=0;g<f;g++){var l=b,p=m[g];p.detached&&p.detached(l);q.set(l,p.id+":lifecycle:attached",!1)}}}}h=function(a){return a&&a.__esModule?a["default"]:a};Object.defineProperty(g,
"__esModule",{value:!0});"use strict";var v=a("./constants").ATTR_IGNORE,q=h(a("./data")),u=h(a("./mutation-observer")),n=h(a("./registry"));a=a("./utils");var d=a.inherit,p=a.objEach;a=window.HTMLElement.prototype;var x=a.matches||a.msMatchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector;g.triggerCreated=l;g.initElements=c;g.removeElements=k},{"./constants":1,"./data":2,"./mutation-observer":6,"./registry":7,"./utils":9}],6:[function(a,h,g){function r(a,c){return{addedNodes:null,
attributeName:null,attributeNamespace:null,nextSibling:null,oldValue:null,previousSibling:null,removedNodes:null,target:a,type:c||"childList"}}function b(a,c){if(a=a.childNodes)for(var d=a.length,m=0;m<d;m++){var f=a[m];c(f);b(f,c)}}function f(a){if(q&&!u)return new q(a);this.callback=a;this.elements=[]}a=a("./utils");var l=a.debounce,c=a.objEach,k=window.HTMLElement.prototype,v=window.HTMLElement.prototype.contains,q=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver,
u=!1,n=-1<window.navigator.userAgent.indexOf("Trident");f.fixIe=function(){if(n&&!u){var a=Object.getOwnPropertyDescriptor(k,"innerHTML");Object.defineProperty(k,"innerHTML",{get:function(){return a.get.call(this)},set:function(c){b(this,function(a){var c=document.createEvent("MutationEvent");c.initMutationEvent("DOMNodeRemoved",!0,!1,null,null,null,null,null);a.dispatchEvent(c)});a.set.call(this,c)}});u=!0}};Object.defineProperty(f,"isFixingIe",{get:function(){return u}});f.prototype={observe:function(a,
c){function b(a){g.push(a);n()}var d=this,f,k,g=[],h=[],n=l(function(){for(var b=g.length,m=0;m<b;m++){var l=g[m],q=l.target;if(q){l=l.type;var n=q.parentNode;if(c.childList&&(c.subtree||n===a)){var p=u&&"DOMNodeRemoved"===l,t;if(t=f){t=f;var y=q;t=1!==t.nodeType?!1:t.contains?t.contains(y):v.call(t,y)}if(p||!t)k&&k.target===n||h.push(k=r(n)),"DOMNodeInserted"===l?(k.addedNodes||(k.addedNodes=[]),k.addedNodes.push(q)):(k.removedNodes||(k.removedNodes=[]),k.removedNodes.push(q)),f=q}}}d.callback(h);
g=[];h=[];k=f=void 0}),p={},q=[],z=l(function(){var a=q.length;d.callback(q);q.splice(0,a)}),w={target:a,options:c,insertHandler:b,removeHandler:b,attributeHandler:function(b){var d=b.target;if(c.attributes&&(c.subtree||d===a)){var f=b.attrName,m=b.prevValue;b=b.newValue;d=r(d,"attributes");d.attributeName=f;c.attributeOldValue&&(d.oldValue=p[f]||m||null);q.push(d);c.attributeOldValue&&(p[f]=b);z()}}};this.elements.push(w);c.childList&&(a.addEventListener("DOMNodeInserted",w.insertHandler),a.addEventListener("DOMNodeRemoved",
w.removeHandler));c.attributes&&a.addEventListener("DOMAttrModified",w.attributeHandler);return this},disconnect:function(){c(this.elements,function(a){a.target.removeEventListener("DOMNodeInserted",a.insertHandler);a.target.removeEventListener("DOMNodeRemoved",a.removeHandler);a.target.removeEventListener("DOMAttrModified",a.attributeHandler)});this.elements=[];return this}};h.exports=f},{"./utils":9}],7:[function(a,h,g){function r(a,f){return l(b.registry,a)&&-1<b.registry[a].type.indexOf(f)}var b=
function(a){return a&&a.__esModule?a["default"]:a}(a("./globals")),f=a("./constants.js").types,l=a("./utils").hasOwn;h.exports={clear:function(){b.registry={};return this},getForElement:function(a){var c=a.attributes,g=c.length,l=[],h=c.is,n=h&&(h.value||h.nodeValue);h=a.tagName.toLowerCase();var d=n||h;if(r(d,f.TAG)){d=b.registry[d];var p=d["extends"];n?h===p&&l.push(d):p||l.push(d)}for(n=0;n<g;n++)d=c[n].nodeName,r(d,f.ATTR)&&(d=b.registry[d],(p=d["extends"])&&h!==p||l.push(d));(c=a.classList)?
a=c:(a=a.attributes,a=a["class"]&&a["class"].nodeValue.split(/\s+/)||[]);c=a.length;for(g=0;g<c;g++)d=a[g],r(d,f.CLASS)&&(d=b.registry[d],(p=d["extends"])&&h!==p||l.push(d));return l},has:function(a){return l(b.registry,a)},set:function(a,f){if(this.has(a))throw Error('A definition of type "'+f.type+'" with the ID of "'+a+'" already exists.');b.registry[a]=f;return this},remove:function(a){this.has(a)&&delete b.registry[a];return this}}},{"./constants.js":1,"./globals":4,"./utils":9}],8:[function(a,
h,g){function r(a){function b(){var f=a["extends"];var d=a.id;f?(f=document.createElement(f),f.setAttribute("is",d)):f=document.createElement(d);a.prototype=b.prototype;c(f,a);return f}b.prototype=a.prototype;return b}function b(a,c){c=u(c||{},b.defaults);c.id=a;if(v.has(c.id))throw Error('A definition of type "'+c.type+'" with the ID of "'+a+'" already exists.');v.set(c.id,c);p();f.register(c.remove);if(-1<c.type.indexOf(n.TAG))return r(c)}g=function(a){return a&&a.__esModule?a["default"]:a};var f=
g(a("./document-observer")),l=a("./lifecycle"),c=l.triggerCreated,k=l.initElements,v=g(a("./registry")),q=a("./utils");l=q.debounce;var u=q.inherit;g=g(a("./version"));var n=a("./constants").types,d=!!document.attachEvent,p=l(function(){var a=function(){k(document.getElementsByTagName("html"))};var c=d?"complete"===document.readyState:"interactive"===document.readyState||"complete"===document.readyState;c?a():d?window.addEventListener("load",a):document.addEventListener("DOMContentLoaded",a)});b.init=
function(a){if(a)return"string"===typeof a&&(a=document.querySelectorAll(a)),k("undefined"===typeof a.length?[a]:a),a};b.types=n;b.version=g;b.defaults={attributes:void 0,events:void 0,"extends":"",id:"",prototype:{},resolvedAttribute:"resolved",template:void 0,type:n.ANY,unresolvedAttribute:"unresolved"};var x=window.skate;b.noConflict=function(){window.skate=x;return this};window.skate=b;h.exports=b},{"./constants":1,"./document-observer":3,"./lifecycle":5,"./registry":7,"./utils":9,"./version":10}],
9:[function(a,h,g){function r(a,b){return Object.prototype.hasOwnProperty.call(a,b)}g.hasOwn=r;g.debounce=function(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1;a()},1))}};g.getClosestIgnoredElement=function(a){for(;a&&a!==document&&!(a instanceof DocumentFragment);){if(a.hasAttribute(b))return a;a=a.parentNode}};g.inherit=function(a,b,c){for(var f=Object.getOwnPropertyNames(b),g=f.length,h=0;h<g;h++){var l=f[h];if(c||void 0===a[l]){var n=Object.getOwnPropertyDescriptor(b,l);!n.get&&
!n.set&&n.writable&&n.enumerable&&n.configurable?a[l]=b[l]:Object.defineProperty(a,l,n)}}return a};g.objEach=function(a,b){for(var c in a)r(a,c)&&b(a[c],c)};Object.defineProperty(g,"__esModule",{value:!0});"use strict";var b=a("./constants").ATTR_IGNORE},{"./constants":1}],10:[function(a,h,g){h.exports="0.12.6"},{}]},{},[8]);(function(a){var h=a.skate.noConflict();define("atlassian/libs/skate-0.12.6",[],function(){return h})})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-require', location = '/util/require.js' */
(function (window) {

    'use strict';

    function fnFactory(fn) {
        return function () {
            return fn;
        };
    }

    var oldRequire = require;
    var logged = false;

    require = function (modules, cb) {
        if (typeof modules === 'string' && typeof cb === 'function') {
            if (!logged) {
                logged = true;
                /* [logging] */
                console.log('WARN: require() use with string an function has been deprecated in 2.11 and will throw an error in 3.0. Use an array of dependencies. (requiring ' + modules + ')');
                /* [logging] end */
            }
            modules = [ modules ];
        }

        //explicitly disallow use of Almond internal params.
        if (cb && typeof cb !== 'function') {
            throw new Error('Callback was not a function');
        }

        return oldRequire.call(window, modules, cb);
    };

    // predefined shims
    define('jquery', fnFactory(window.AJS ? window.AJS.$ : window.jQuery));
    define('underscore', fnFactory(window._));
    define('backbone', fnFactory(window.Backbone));
    define('brace', fnFactory(window.Brace));
    define('aui', fnFactory(window.AJS));
    define('ajs', ['aui'], function(AJS) { return AJS; });
    define('skate', ['atlassian/libs/skate-0.12.6'], function(skate) { return skate; });

})(window || this);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-mixins', location = '/bower/backbone.wreqr/backbone.wreqr.js' */
// Backbone.Wreqr (Backbone.Marionette)
// ----------------------------------
// v1.3.2
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.wreqr


(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  "use strict";

  var previousWreqr = Backbone.Wreqr;

  var Wreqr = Backbone.Wreqr = {};

  Backbone.Wreqr.VERSION = '1.3.2';

  Backbone.Wreqr.noConflict = function () {
    Backbone.Wreqr = previousWreqr;
    return this;
  };

  // Handlers
  // --------
  // A registry of functions to call, given a name
  
  Wreqr.Handlers = (function(Backbone, _){
    "use strict";
    
    // Constructor
    // -----------
  
    var Handlers = function(options){
      this.options = options;
      this._wreqrHandlers = {};
      
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    Handlers.extend = Backbone.Model.extend;
  
    // Instance Members
    // ----------------
  
    _.extend(Handlers.prototype, Backbone.Events, {
  
      // Add multiple handlers using an object literal configuration
      setHandlers: function(handlers){
        _.each(handlers, function(handler, name){
          var context = null;
  
          if (_.isObject(handler) && !_.isFunction(handler)){
            context = handler.context;
            handler = handler.callback;
          }
  
          this.setHandler(name, handler, context);
        }, this);
      },
  
      // Add a handler for the given name, with an
      // optional context to run the handler within
      setHandler: function(name, handler, context){
        var config = {
          callback: handler,
          context: context
        };
  
        this._wreqrHandlers[name] = config;
  
        this.trigger("handler:add", name, handler, context);
      },
  
      // Determine whether or not a handler is registered
      hasHandler: function(name){
        return !! this._wreqrHandlers[name];
      },
  
      // Get the currently registered handler for
      // the specified name. Throws an exception if
      // no handler is found.
      getHandler: function(name){
        var config = this._wreqrHandlers[name];
  
        if (!config){
          return;
        }
  
        return function(){
          return config.callback.apply(config.context, arguments);
        };
      },
  
      // Remove a handler for the specified name
      removeHandler: function(name){
        delete this._wreqrHandlers[name];
      },
  
      // Remove all handlers from this registry
      removeAllHandlers: function(){
        this._wreqrHandlers = {};
      }
    });
  
    return Handlers;
  })(Backbone, _);
  
  // Wreqr.CommandStorage
  // --------------------
  //
  // Store and retrieve commands for execution.
  Wreqr.CommandStorage = (function(){
    "use strict";
  
    // Constructor function
    var CommandStorage = function(options){
      this.options = options;
      this._commands = {};
  
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    // Instance methods
    _.extend(CommandStorage.prototype, Backbone.Events, {
  
      // Get an object literal by command name, that contains
      // the `commandName` and the `instances` of all commands
      // represented as an array of arguments to process
      getCommands: function(commandName){
        var commands = this._commands[commandName];
  
        // we don't have it, so add it
        if (!commands){
  
          // build the configuration
          commands = {
            command: commandName, 
            instances: []
          };
  
          // store it
          this._commands[commandName] = commands;
        }
  
        return commands;
      },
  
      // Add a command by name, to the storage and store the
      // args for the command
      addCommand: function(commandName, args){
        var command = this.getCommands(commandName);
        command.instances.push(args);
      },
  
      // Clear all commands for the given `commandName`
      clearCommands: function(commandName){
        var command = this.getCommands(commandName);
        command.instances = [];
      }
    });
  
    return CommandStorage;
  })();
  
  // Wreqr.Commands
  // --------------
  //
  // A simple command pattern implementation. Register a command
  // handler and execute it.
  Wreqr.Commands = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      // default storage type
      storageType: Wreqr.CommandStorage,
  
      constructor: function(options){
        this.options = options || {};
  
        this._initializeStorage(this.options);
        this.on("handler:add", this._executeCommands, this);
  
        Wreqr.Handlers.prototype.constructor.apply(this, arguments);
      },
  
      // Execute a named command with the supplied args
      execute: function(name){
        name = arguments[0];
        var args = _.rest(arguments);
  
        if (this.hasHandler(name)){
          this.getHandler(name).apply(this, args);
        } else {
          this.storage.addCommand(name, args);
        }
  
      },
  
      // Internal method to handle bulk execution of stored commands
      _executeCommands: function(name, handler, context){
        var command = this.storage.getCommands(name);
  
        // loop through and execute all the stored command instances
        _.each(command.instances, function(args){
          handler.apply(context, args);
        });
  
        this.storage.clearCommands(name);
      },
  
      // Internal method to initialize storage either from the type's
      // `storageType` or the instance `options.storageType`.
      _initializeStorage: function(options){
        var storage;
  
        var StorageType = options.storageType || this.storageType;
        if (_.isFunction(StorageType)){
          storage = new StorageType();
        } else {
          storage = StorageType;
        }
  
        this.storage = storage;
      }
    });
  
  })(Wreqr, _);
  
  // Wreqr.RequestResponse
  // ---------------------
  //
  // A simple request/response implementation. Register a
  // request handler, and return a response from it
  Wreqr.RequestResponse = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      request: function(name){
        if (this.hasHandler(name)) {
          return this.getHandler(name).apply(this, _.rest(arguments));
        }
      }
    });
  
  })(Wreqr, _);
  
  // Event Aggregator
  // ----------------
  // A pub-sub object that can be used to decouple various parts
  // of an application through event-driven architecture.
  
  Wreqr.EventAggregator = (function(Backbone, _){
    "use strict";
    var EA = function(){};
  
    // Copy the `extend` function used by Backbone's classes
    EA.extend = Backbone.Model.extend;
  
    // Copy the basic Backbone.Events on to the event aggregator
    _.extend(EA.prototype, Backbone.Events);
  
    return EA;
  })(Backbone, _);
  
  // Wreqr.Channel
  // --------------
  //
  // An object that wraps the three messaging systems:
  // EventAggregator, RequestResponse, Commands
  Wreqr.Channel = (function(Wreqr){
    "use strict";
  
    var Channel = function(channelName) {
      this.vent        = new Backbone.Wreqr.EventAggregator();
      this.reqres      = new Backbone.Wreqr.RequestResponse();
      this.commands    = new Backbone.Wreqr.Commands();
      this.channelName = channelName;
    };
  
    _.extend(Channel.prototype, {
  
      // Remove all handlers from the messaging systems of this channel
      reset: function() {
        this.vent.off();
        this.vent.stopListening();
        this.reqres.removeAllHandlers();
        this.commands.removeAllHandlers();
        return this;
      },
  
      // Connect a hash of events; one for each messaging system
      connectEvents: function(hash, context) {
        this._connect('vent', hash, context);
        return this;
      },
  
      connectCommands: function(hash, context) {
        this._connect('commands', hash, context);
        return this;
      },
  
      connectRequests: function(hash, context) {
        this._connect('reqres', hash, context);
        return this;
      },
  
      // Attach the handlers to a given message system `type`
      _connect: function(type, hash, context) {
        if (!hash) {
          return;
        }
  
        context = context || this;
        var method = (type === 'vent') ? 'on' : 'setHandler';
  
        _.each(hash, function(fn, eventName) {
          this[type][method](eventName, _.bind(fn, context));
        }, this);
      }
    });
  
  
    return Channel;
  })(Wreqr);
  
  // Wreqr.Radio
  // --------------
  //
  // An object that lets you communicate with many channels.
  Wreqr.radio = (function(Wreqr, _){
    "use strict";
  
    var Radio = function() {
      this._channels = {};
      this.vent = {};
      this.commands = {};
      this.reqres = {};
      this._proxyMethods();
    };
  
    _.extend(Radio.prototype, {
  
      channel: function(channelName) {
        if (!channelName) {
          throw new Error('Channel must receive a name');
        }
  
        return this._getChannel( channelName );
      },
  
      _getChannel: function(channelName) {
        var channel = this._channels[channelName];
  
        if(!channel) {
          channel = new Wreqr.Channel(channelName);
          this._channels[channelName] = channel;
        }
  
        return channel;
      },
  
      _proxyMethods: function() {
        _.each(['vent', 'commands', 'reqres'], function(system) {
          _.each( messageSystems[system], function(method) {
            this[system][method] = proxyMethod(this, system, method);
          }, this);
        }, this);
      }
    });
  
  
    var messageSystems = {
      vent: [
        'on',
        'off',
        'trigger',
        'once',
        'stopListening',
        'listenTo',
        'listenToOnce'
      ],
  
      commands: [
        'execute',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ],
  
      reqres: [
        'request',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ]
    };
  
    var proxyMethod = function(radio, system, method) {
      return function(channelName) {
        var messageSystem = radio._getChannel(channelName)[system];
  
        return messageSystem[method].apply(messageSystem, _.rest(arguments));
      };
    };
  
    return new Radio();
  
  })(Wreqr, _);
  

  return Backbone.Wreqr;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-mixins', location = '/util/mixins/events.js' */
define('util/events', [
    'underscore',
    'backbone',
    'exports'
], function(_, Backbone, exports) {

    'use strict';

    var EventBus = new Backbone.Wreqr.EventAggregator();
    var EventBusMixin = {

        onEvent: function(key, callback, object) {
            var handler = function(value, callback, object) {
                EventBus.on(value, _.bind(callback, object));
            };

            if (_.isArray(key)) {
                _.each(key, _.bind(function(value) {
                    handler(value, callback, object || this);
                }, this));
            }
            else {
                handler(key, callback, object || this);
            }
        },

        triggerEvent: function(key) {
            EventBus.trigger.apply(EventBus,
                [key, this].concat(
                    Array.prototype.slice.call(arguments, 1)
                )
            );
        },

        offEvent: function(events) {
            if (_.isArray(events)) {
                _.each(events, function(event) {
                    EventBus.off(event);
                });
            }
            else {
                EventBus.off(events);
            }
        },

        offEventNamespace: function(namespace) {
            if (namespace.length) {
                _.each(_.keys(EventBus._events), _.bind(function(event) {
                    if (event.indexOf(namespace + ':') === 0) {
                        this.offEvent(event);
                    }
                }, this));
            }
        },

        proxyEvents: function(key, events, object, bindMethod) {
            var scope = object || this, self = this;
            var proxyMethod = (bindMethod) ? scope[bindMethod] : scope.on;

            _.each(events, function(event) {
                proxyMethod.apply(scope, [event, function() {
                    self.triggerEvent(
                        [key, event].join(':'), scope
                    );
                }]);
            });
        }

    };

    exports.EventBus = EventBus;
    exports.EventBusMixin = EventBusMixin;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.EventBus', null, require('util/events').EventBus);
    AJS.namespace('Bamboo.EventBusMixin', null, require('util/events').EventBusMixin);
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-mixins', location = '/util/mixins/elements.js' */
define('util/elements', [
    'jquery',
    'underscore'
], function(
    $,
    _
) {

    'use strict';

    var Elements = {

        getElement: function(name) {
            var item = this.elements[name];

            if (_.isUndefined(item)) {
                throw '"' + name + '" not found in elements';
            }

            if (_.isString(item)) {
                this.elements[name] = {
                    selector: item,
                    query: this.$el.find(item)
                };

                item = this.elements[name];
            }

            return item.query;
        },

        clearElementsCache: function() {
            _.each(_.keys(this.elements), _.bind(function(key) {
                var item = this.elements[key];

                if (!_.isString(item)) {
                    this.elements[key] = item.selector;
                }
            }, this));
        },

        toggleContainer: function($selector, show) {
            if (!_.isUndefined(show)) {
                return $selector.toggle(!!show);
            }
            else {
                return $selector.hide();
            }
        }

    };

    return Elements;
});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.Util.Mixins.Elements', null, require('util/elements'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-help-dialog', location = '/widget/help/help-dialog.js' */
define('widget/help-dialog', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {

    'use strict';

    var HelpDialog = Brace.View.extend({

        mixins: [events.EventBusMixin],

        initialize: function() {
            AJS.InlineDialog(
                this.$el,
                this.$el.attr('id').replace(/[:\.]/g, "-"),
                _.bind(this.onDialogShow, this),
                {
                    hideDelay: null,
                    offsetX: -60,
                    arrowOffsetX: 0,
                    width: 420
                }
            );
        },

        onDialogShow: function(content, trigger, showPopup) {
            content.css({ padding: '20px' })
                .html((this.options.content || this.$el.find('span:first')).html());

            showPopup();
            return false;
        }
    });

    return HelpDialog;

});


/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.Widget.HelpDialog', null, require('widget/help-dialog'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-action-tip', location = '/widget/action-tip/action-tip.soy' */
// This file was automatically generated from action-tip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.actionTip.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.actionTip == 'undefined') { bamboo.widget.actionTip = {}; }


bamboo.widget.actionTip.dialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(opt_data.content) + '</p><button class="aui-button action-tip-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>';
};
if (goog.DEBUG) {
  bamboo.widget.actionTip.dialog.soyTemplateName = 'bamboo.widget.actionTip.dialog';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-action-tip', location = '/widget/action-tip/action-tip.js' */
define('widget/action-tip', [
    'jquery',
    'underscore',
    'backbone',
    'util/preferences'
], function(
    $,
    _,
    Backbone,
    preferencesManager
) {

    'use strict';

    var ActionTip = Backbone.View.extend({

        template: bamboo.widget.actionTip,

        preference: function(key) {
            return ['bamboo.user.actions', key].join('.');
        },

        defaults: {
            content: '',
            params: {
                onTop: false
            }
        },

        initialize: function(options) {
            this.settings = $.extend(this.defaults, options || {});

            if (!this.settings.label) {
                this.settings.label = $.trim(this.$el.text());
            }

            var params = $.extend({
                hideCallback: _.bind(this.onClose, this),
                container: 'body',
                noBind: true
            }, this.settings.params);

            this.dialog = AJS.InlineDialog(
                this.$el, this.$el.attr('id'),
                _.bind(this.onShow, this), params
            );

            this.registerEvents();
        },

        registerEvents: function() {
            this.$el.on('click', _.bind(this.onClick, this));

            $(document).on('keydown', _.bind(function(event) {
                if (event.keyCode === 27) this.hide();
            }, this.dialog));
        },

        onClick: function() {
            var value = false;

            if (this.settings.actionKey) {
                value = preferencesManager.getBoolean(
                    this.preference(this.settings.actionKey)
                );
            }

            if (!value) {
                this.dialog.show();
                return false;
            }

            this.dialog.remove();
        },

        onShow: function(dialog, trigger, show) {
            var content = this.template.dialog({
                label: this.settings.label,
                content: this.settings.content
            });

            dialog
                .html(content)
                .addClass('action-tip')
                .find('button').on('click', _.bind(function() {
                    this.onAction.call(this);
                    this.dialog.hide();
                }, this));

            show();
        },

        onClose: function() {
            if (this.clicked) {
                this.$el.click();
                this.dialog.remove();
            }
        },

        onAction: function() {
            if (this.settings.actionKey) {
                this.clicked = true;

                if (!this.settings.callback) {
                    preferencesManager.setValue(
                        this.preference(this.settings.actionKey)
                    );
                }
                else {
                    this.settings.callback.call(this);
                }
            }
        }

    });

    return ActionTip;
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:help-widget', location = '/widget/help/help.soy' */
// This file was automatically generated from help.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.help.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.help == 'undefined') { bamboo.widget.help = {}; }


bamboo.widget.help.panel = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + ' class="help-panel' + ((opt_data.type) ? ' help-panel-' + soy.$$escapeHtml(opt_data.type) : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.link) ? ' href="' + soy.$$escapeHtml(opt_data.link) + '"' : '') + aui.renderExtraAttributes(opt_data) + '><strong class="help-panel-title">' + soy.$$escapeHtml(opt_data.title) + '</strong><div class="help-panel-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + '>';
};
if (goog.DEBUG) {
  bamboo.widget.help.panel.soyTemplateName = 'bamboo.widget.help.panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:moment-js', location = '/bower/moment/moment.js' */
//! moment.js
//! version : 2.9.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

(function (undefined) {
    /************************************
        Constants
    ************************************/

    var moment,
        VERSION = '2.9.0',
        // the global-scope this is NOT the global object in Node.js
        globalScope = (typeof global !== 'undefined' && (typeof window === 'undefined' || window === global.window)) ? global : this,
        oldGlobalMoment,
        round = Math.round,
        hasOwnProperty = Object.prototype.hasOwnProperty,
        i,

        YEAR = 0,
        MONTH = 1,
        DATE = 2,
        HOUR = 3,
        MINUTE = 4,
        SECOND = 5,
        MILLISECOND = 6,

        // internal storage for locale config files
        locales = {},

        // extra moment internal properties (plugins register props here)
        momentProperties = [],

        // check for nodeJS
        hasModule = (typeof module !== 'undefined' && module && module.exports),

        // ASP.NET json date format regex
        aspNetJsonRegex = /^\/?Date\((\-?\d+)/i,
        aspNetTimeSpanJsonRegex = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,

        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
        isoDurationRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,

        // format tokens
        formattingTokens = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,
        localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,

        // parsing token regexes
        parseTokenOneOrTwoDigits = /\d\d?/, // 0 - 99
        parseTokenOneToThreeDigits = /\d{1,3}/, // 0 - 999
        parseTokenOneToFourDigits = /\d{1,4}/, // 0 - 9999
        parseTokenOneToSixDigits = /[+\-]?\d{1,6}/, // -999,999 - 999,999
        parseTokenDigits = /\d+/, // nonzero number of digits
        parseTokenWord = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, // any word (or two) characters or numbers including two/three word month in arabic.
        parseTokenTimezone = /Z|[\+\-]\d\d:?\d\d/gi, // +00:00 -00:00 +0000 -0000 or Z
        parseTokenT = /T/i, // T (ISO separator)
        parseTokenOffsetMs = /[\+\-]?\d+/, // 1234567890123
        parseTokenTimestampMs = /[\+\-]?\d+(\.\d{1,3})?/, // 123456789 123456789.123

        //strict parsing regexes
        parseTokenOneDigit = /\d/, // 0 - 9
        parseTokenTwoDigits = /\d\d/, // 00 - 99
        parseTokenThreeDigits = /\d{3}/, // 000 - 999
        parseTokenFourDigits = /\d{4}/, // 0000 - 9999
        parseTokenSixDigits = /[+-]?\d{6}/, // -999,999 - 999,999
        parseTokenSignedNumber = /[+-]?\d+/, // -inf - inf

        // iso 8601 regex
        // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)
        isoRegex = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,

        isoFormat = 'YYYY-MM-DDTHH:mm:ssZ',

        isoDates = [
            ['YYYYYY-MM-DD', /[+-]\d{6}-\d{2}-\d{2}/],
            ['YYYY-MM-DD', /\d{4}-\d{2}-\d{2}/],
            ['GGGG-[W]WW-E', /\d{4}-W\d{2}-\d/],
            ['GGGG-[W]WW', /\d{4}-W\d{2}/],
            ['YYYY-DDD', /\d{4}-\d{3}/]
        ],

        // iso time formats and regexes
        isoTimes = [
            ['HH:mm:ss.SSSS', /(T| )\d\d:\d\d:\d\d\.\d+/],
            ['HH:mm:ss', /(T| )\d\d:\d\d:\d\d/],
            ['HH:mm', /(T| )\d\d:\d\d/],
            ['HH', /(T| )\d\d/]
        ],

        // timezone chunker '+10:00' > ['10', '00'] or '-1530' > ['-', '15', '30']
        parseTimezoneChunker = /([\+\-]|\d\d)/gi,

        // getter and setter names
        proxyGettersAndSetters = 'Date|Hours|Minutes|Seconds|Milliseconds'.split('|'),
        unitMillisecondFactors = {
            'Milliseconds' : 1,
            'Seconds' : 1e3,
            'Minutes' : 6e4,
            'Hours' : 36e5,
            'Days' : 864e5,
            'Months' : 2592e6,
            'Years' : 31536e6
        },

        unitAliases = {
            ms : 'millisecond',
            s : 'second',
            m : 'minute',
            h : 'hour',
            d : 'day',
            D : 'date',
            w : 'week',
            W : 'isoWeek',
            M : 'month',
            Q : 'quarter',
            y : 'year',
            DDD : 'dayOfYear',
            e : 'weekday',
            E : 'isoWeekday',
            gg: 'weekYear',
            GG: 'isoWeekYear'
        },

        camelFunctions = {
            dayofyear : 'dayOfYear',
            isoweekday : 'isoWeekday',
            isoweek : 'isoWeek',
            weekyear : 'weekYear',
            isoweekyear : 'isoWeekYear'
        },

        // format function strings
        formatFunctions = {},

        // default relative time thresholds
        relativeTimeThresholds = {
            s: 45,  // seconds to minute
            m: 45,  // minutes to hour
            h: 22,  // hours to day
            d: 26,  // days to month
            M: 11   // months to year
        },

        // tokens to ordinalize and pad
        ordinalizeTokens = 'DDD w W M D d'.split(' '),
        paddedTokens = 'M D H h m s w W'.split(' '),

        formatTokenFunctions = {
            M    : function () {
                return this.month() + 1;
            },
            MMM  : function (format) {
                return this.localeData().monthsShort(this, format);
            },
            MMMM : function (format) {
                return this.localeData().months(this, format);
            },
            D    : function () {
                return this.date();
            },
            DDD  : function () {
                return this.dayOfYear();
            },
            d    : function () {
                return this.day();
            },
            dd   : function (format) {
                return this.localeData().weekdaysMin(this, format);
            },
            ddd  : function (format) {
                return this.localeData().weekdaysShort(this, format);
            },
            dddd : function (format) {
                return this.localeData().weekdays(this, format);
            },
            w    : function () {
                return this.week();
            },
            W    : function () {
                return this.isoWeek();
            },
            YY   : function () {
                return leftZeroFill(this.year() % 100, 2);
            },
            YYYY : function () {
                return leftZeroFill(this.year(), 4);
            },
            YYYYY : function () {
                return leftZeroFill(this.year(), 5);
            },
            YYYYYY : function () {
                var y = this.year(), sign = y >= 0 ? '+' : '-';
                return sign + leftZeroFill(Math.abs(y), 6);
            },
            gg   : function () {
                return leftZeroFill(this.weekYear() % 100, 2);
            },
            gggg : function () {
                return leftZeroFill(this.weekYear(), 4);
            },
            ggggg : function () {
                return leftZeroFill(this.weekYear(), 5);
            },
            GG   : function () {
                return leftZeroFill(this.isoWeekYear() % 100, 2);
            },
            GGGG : function () {
                return leftZeroFill(this.isoWeekYear(), 4);
            },
            GGGGG : function () {
                return leftZeroFill(this.isoWeekYear(), 5);
            },
            e : function () {
                return this.weekday();
            },
            E : function () {
                return this.isoWeekday();
            },
            a    : function () {
                return this.localeData().meridiem(this.hours(), this.minutes(), true);
            },
            A    : function () {
                return this.localeData().meridiem(this.hours(), this.minutes(), false);
            },
            H    : function () {
                return this.hours();
            },
            h    : function () {
                return this.hours() % 12 || 12;
            },
            m    : function () {
                return this.minutes();
            },
            s    : function () {
                return this.seconds();
            },
            S    : function () {
                return toInt(this.milliseconds() / 100);
            },
            SS   : function () {
                return leftZeroFill(toInt(this.milliseconds() / 10), 2);
            },
            SSS  : function () {
                return leftZeroFill(this.milliseconds(), 3);
            },
            SSSS : function () {
                return leftZeroFill(this.milliseconds(), 3);
            },
            Z    : function () {
                var a = this.utcOffset(),
                    b = '+';
                if (a < 0) {
                    a = -a;
                    b = '-';
                }
                return b + leftZeroFill(toInt(a / 60), 2) + ':' + leftZeroFill(toInt(a) % 60, 2);
            },
            ZZ   : function () {
                var a = this.utcOffset(),
                    b = '+';
                if (a < 0) {
                    a = -a;
                    b = '-';
                }
                return b + leftZeroFill(toInt(a / 60), 2) + leftZeroFill(toInt(a) % 60, 2);
            },
            z : function () {
                return this.zoneAbbr();
            },
            zz : function () {
                return this.zoneName();
            },
            x    : function () {
                return this.valueOf();
            },
            X    : function () {
                return this.unix();
            },
            Q : function () {
                return this.quarter();
            }
        },

        deprecations = {},

        lists = ['months', 'monthsShort', 'weekdays', 'weekdaysShort', 'weekdaysMin'],

        updateInProgress = false;

    // Pick the first defined of two or three arguments. dfl comes from
    // default.
    function dfl(a, b, c) {
        switch (arguments.length) {
            case 2: return a != null ? a : b;
            case 3: return a != null ? a : b != null ? b : c;
            default: throw new Error('Implement me');
        }
    }

    function hasOwnProp(a, b) {
        return hasOwnProperty.call(a, b);
    }

    function defaultParsingFlags() {
        // We need to deep clone this object, and es5 standard is not very
        // helpful.
        return {
            empty : false,
            unusedTokens : [],
            unusedInput : [],
            overflow : -2,
            charsLeftOver : 0,
            nullInput : false,
            invalidMonth : null,
            invalidFormat : false,
            userInvalidated : false,
            iso: false
        };
    }

    function printMsg(msg) {
        if (moment.suppressDeprecationWarnings === false &&
                typeof console !== 'undefined' && console.warn) {
            console.warn('Deprecation warning: ' + msg);
        }
    }

    function deprecate(msg, fn) {
        var firstTime = true;
        return extend(function () {
            if (firstTime) {
                printMsg(msg);
                firstTime = false;
            }
            return fn.apply(this, arguments);
        }, fn);
    }

    function deprecateSimple(name, msg) {
        if (!deprecations[name]) {
            printMsg(msg);
            deprecations[name] = true;
        }
    }

    function padToken(func, count) {
        return function (a) {
            return leftZeroFill(func.call(this, a), count);
        };
    }
    function ordinalizeToken(func, period) {
        return function (a) {
            return this.localeData().ordinal(func.call(this, a), period);
        };
    }

    function monthDiff(a, b) {
        // difference in months
        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
            // b is in (anchor - 1 month, anchor + 1 month)
            anchor = a.clone().add(wholeMonthDiff, 'months'),
            anchor2, adjust;

        if (b - anchor < 0) {
            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor - anchor2);
        } else {
            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor2 - anchor);
        }

        return -(wholeMonthDiff + adjust);
    }

    while (ordinalizeTokens.length) {
        i = ordinalizeTokens.pop();
        formatTokenFunctions[i + 'o'] = ordinalizeToken(formatTokenFunctions[i], i);
    }
    while (paddedTokens.length) {
        i = paddedTokens.pop();
        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], 2);
    }
    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, 3);


    function meridiemFixWrap(locale, hour, meridiem) {
        var isPm;

        if (meridiem == null) {
            // nothing to do
            return hour;
        }
        if (locale.meridiemHour != null) {
            return locale.meridiemHour(hour, meridiem);
        } else if (locale.isPM != null) {
            // Fallback
            isPm = locale.isPM(meridiem);
            if (isPm && hour < 12) {
                hour += 12;
            }
            if (!isPm && hour === 12) {
                hour = 0;
            }
            return hour;
        } else {
            // thie is not supposed to happen
            return hour;
        }
    }

    /************************************
        Constructors
    ************************************/

    function Locale() {
    }

    // Moment prototype object
    function Moment(config, skipOverflow) {
        if (skipOverflow !== false) {
            checkOverflow(config);
        }
        copyConfig(this, config);
        this._d = new Date(+config._d);
        // Prevent infinite loop in case updateOffset creates new moment
        // objects.
        if (updateInProgress === false) {
            updateInProgress = true;
            moment.updateOffset(this);
            updateInProgress = false;
        }
    }

    // Duration Constructor
    function Duration(duration) {
        var normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || 0,
            quarters = normalizedInput.quarter || 0,
            months = normalizedInput.month || 0,
            weeks = normalizedInput.week || 0,
            days = normalizedInput.day || 0,
            hours = normalizedInput.hour || 0,
            minutes = normalizedInput.minute || 0,
            seconds = normalizedInput.second || 0,
            milliseconds = normalizedInput.millisecond || 0;

        // representation for dateAddRemove
        this._milliseconds = +milliseconds +
            seconds * 1e3 + // 1000
            minutes * 6e4 + // 1000 * 60
            hours * 36e5; // 1000 * 60 * 60
        // Because of dateAddRemove treats 24 hours as different from a
        // day when working around DST, we need to store them separately
        this._days = +days +
            weeks * 7;
        // It is impossible translate months into days without knowing
        // which months you are are talking about, so we have to store
        // it separately.
        this._months = +months +
            quarters * 3 +
            years * 12;

        this._data = {};

        this._locale = moment.localeData();

        this._bubble();
    }

    /************************************
        Helpers
    ************************************/


    function extend(a, b) {
        for (var i in b) {
            if (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }

        if (hasOwnProp(b, 'toString')) {
            a.toString = b.toString;
        }

        if (hasOwnProp(b, 'valueOf')) {
            a.valueOf = b.valueOf;
        }

        return a;
    }

    function copyConfig(to, from) {
        var i, prop, val;

        if (typeof from._isAMomentObject !== 'undefined') {
            to._isAMomentObject = from._isAMomentObject;
        }
        if (typeof from._i !== 'undefined') {
            to._i = from._i;
        }
        if (typeof from._f !== 'undefined') {
            to._f = from._f;
        }
        if (typeof from._l !== 'undefined') {
            to._l = from._l;
        }
        if (typeof from._strict !== 'undefined') {
            to._strict = from._strict;
        }
        if (typeof from._tzm !== 'undefined') {
            to._tzm = from._tzm;
        }
        if (typeof from._isUTC !== 'undefined') {
            to._isUTC = from._isUTC;
        }
        if (typeof from._offset !== 'undefined') {
            to._offset = from._offset;
        }
        if (typeof from._pf !== 'undefined') {
            to._pf = from._pf;
        }
        if (typeof from._locale !== 'undefined') {
            to._locale = from._locale;
        }

        if (momentProperties.length > 0) {
            for (i in momentProperties) {
                prop = momentProperties[i];
                val = from[prop];
                if (typeof val !== 'undefined') {
                    to[prop] = val;
                }
            }
        }

        return to;
    }

    function absRound(number) {
        if (number < 0) {
            return Math.ceil(number);
        } else {
            return Math.floor(number);
        }
    }

    // left zero fill a number
    // see http://jsperf.com/left-zero-filling for performance comparison
    function leftZeroFill(number, targetLength, forceSign) {
        var output = '' + Math.abs(number),
            sign = number >= 0;

        while (output.length < targetLength) {
            output = '0' + output;
        }
        return (sign ? (forceSign ? '+' : '') : '-') + output;
    }

    function positiveMomentsDifference(base, other) {
        var res = {milliseconds: 0, months: 0};

        res.months = other.month() - base.month() +
            (other.year() - base.year()) * 12;
        if (base.clone().add(res.months, 'M').isAfter(other)) {
            --res.months;
        }

        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));

        return res;
    }

    function momentsDifference(base, other) {
        var res;
        other = makeAs(other, base);
        if (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } else {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }

        return res;
    }

    // TODO: remove 'name' arg after deprecation is removed
    function createAdder(direction, name) {
        return function (val, period) {
            var dur, tmp;
            //invert the arguments, but complain about it
            if (period !== null && !isNaN(+period)) {
                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');
                tmp = val; val = period; period = tmp;
            }

            val = typeof val === 'string' ? +val : val;
            dur = moment.duration(val, period);
            addOrSubtractDurationFromMoment(this, dur, direction);
            return this;
        };
    }

    function addOrSubtractDurationFromMoment(mom, duration, isAdding, updateOffset) {
        var milliseconds = duration._milliseconds,
            days = duration._days,
            months = duration._months;
        updateOffset = updateOffset == null ? true : updateOffset;

        if (milliseconds) {
            mom._d.setTime(+mom._d + milliseconds * isAdding);
        }
        if (days) {
            rawSetter(mom, 'Date', rawGetter(mom, 'Date') + days * isAdding);
        }
        if (months) {
            rawMonthSetter(mom, rawGetter(mom, 'Month') + months * isAdding);
        }
        if (updateOffset) {
            moment.updateOffset(mom, days || months);
        }
    }

    // check if is an array
    function isArray(input) {
        return Object.prototype.toString.call(input) === '[object Array]';
    }

    function isDate(input) {
        return Object.prototype.toString.call(input) === '[object Date]' ||
            input instanceof Date;
    }

    // compare two arrays, return the number of differences
    function compareArrays(array1, array2, dontConvert) {
        var len = Math.min(array1.length, array2.length),
            lengthDiff = Math.abs(array1.length - array2.length),
            diffs = 0,
            i;
        for (i = 0; i < len; i++) {
            if ((dontConvert && array1[i] !== array2[i]) ||
                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        return diffs + lengthDiff;
    }

    function normalizeUnits(units) {
        if (units) {
            var lowered = units.toLowerCase().replace(/(.)s$/, '$1');
            units = unitAliases[units] || camelFunctions[lowered] || lowered;
        }
        return units;
    }

    function normalizeObjectUnits(inputObject) {
        var normalizedInput = {},
            normalizedProp,
            prop;

        for (prop in inputObject) {
            if (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                if (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        return normalizedInput;
    }

    function makeList(field) {
        var count, setter;

        if (field.indexOf('week') === 0) {
            count = 7;
            setter = 'day';
        }
        else if (field.indexOf('month') === 0) {
            count = 12;
            setter = 'month';
        }
        else {
            return;
        }

        moment[field] = function (format, index) {
            var i, getter,
                method = moment._locale[field],
                results = [];

            if (typeof format === 'number') {
                index = format;
                format = undefined;
            }

            getter = function (i) {
                var m = moment().utc().set(setter, i);
                return method.call(moment._locale, m, format || '');
            };

            if (index != null) {
                return getter(index);
            }
            else {
                for (i = 0; i < count; i++) {
                    results.push(getter(i));
                }
                return results;
            }
        };
    }

    function toInt(argumentForCoercion) {
        var coercedNumber = +argumentForCoercion,
            value = 0;

        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
            if (coercedNumber >= 0) {
                value = Math.floor(coercedNumber);
            } else {
                value = Math.ceil(coercedNumber);
            }
        }

        return value;
    }

    function daysInMonth(year, month) {
        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
    }

    function weeksInYear(year, dow, doy) {
        return weekOfYear(moment([year, 11, 31 + dow - doy]), dow, doy).week;
    }

    function daysInYear(year) {
        return isLeapYear(year) ? 366 : 365;
    }

    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    }

    function checkOverflow(m) {
        var overflow;
        if (m._a && m._pf.overflow === -2) {
            overflow =
                m._a[MONTH] < 0 || m._a[MONTH] > 11 ? MONTH :
                m._a[DATE] < 1 || m._a[DATE] > daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :
                m._a[HOUR] < 0 || m._a[HOUR] > 24 ||
                    (m._a[HOUR] === 24 && (m._a[MINUTE] !== 0 ||
                                           m._a[SECOND] !== 0 ||
                                           m._a[MILLISECOND] !== 0)) ? HOUR :
                m._a[MINUTE] < 0 || m._a[MINUTE] > 59 ? MINUTE :
                m._a[SECOND] < 0 || m._a[SECOND] > 59 ? SECOND :
                m._a[MILLISECOND] < 0 || m._a[MILLISECOND] > 999 ? MILLISECOND :
                -1;

            if (m._pf._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
                overflow = DATE;
            }

            m._pf.overflow = overflow;
        }
    }

    function isValid(m) {
        if (m._isValid == null) {
            m._isValid = !isNaN(m._d.getTime()) &&
                m._pf.overflow < 0 &&
                !m._pf.empty &&
                !m._pf.invalidMonth &&
                !m._pf.nullInput &&
                !m._pf.invalidFormat &&
                !m._pf.userInvalidated;

            if (m._strict) {
                m._isValid = m._isValid &&
                    m._pf.charsLeftOver === 0 &&
                    m._pf.unusedTokens.length === 0 &&
                    m._pf.bigHour === undefined;
            }
        }
        return m._isValid;
    }

    function normalizeLocale(key) {
        return key ? key.toLowerCase().replace('_', '-') : key;
    }

    // pick the locale from the array
    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
    function chooseLocale(names) {
        var i = 0, j, next, locale, split;

        while (i < names.length) {
            split = normalizeLocale(names[i]).split('-');
            j = split.length;
            next = normalizeLocale(names[i + 1]);
            next = next ? next.split('-') : null;
            while (j > 0) {
                locale = loadLocale(split.slice(0, j).join('-'));
                if (locale) {
                    return locale;
                }
                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                    //the next array item is better than a shallower substring of this one
                    break;
                }
                j--;
            }
            i++;
        }
        return null;
    }

    function loadLocale(name) {
        var oldLocale = null;
        if (!locales[name] && hasModule) {
            try {
                oldLocale = moment.locale();
                require('./locale/' + name);
                // because defineLocale currently also sets the global locale, we want to undo that for lazy loaded locales
                moment.locale(oldLocale);
            } catch (e) { }
        }
        return locales[name];
    }

    // Return a moment from input, that is local/utc/utcOffset equivalent to
    // model.
    function makeAs(input, model) {
        var res, diff;
        if (model._isUTC) {
            res = model.clone();
            diff = (moment.isMoment(input) || isDate(input) ?
                    +input : +moment(input)) - (+res);
            // Use low-level api, because this fn is low-level api.
            res._d.setTime(+res._d + diff);
            moment.updateOffset(res, false);
            return res;
        } else {
            return moment(input).local();
        }
    }

    /************************************
        Locale
    ************************************/


    extend(Locale.prototype, {

        set : function (config) {
            var prop, i;
            for (i in config) {
                prop = config[i];
                if (typeof prop === 'function') {
                    this[i] = prop;
                } else {
                    this['_' + i] = prop;
                }
            }
            // Lenient ordinal parsing accepts just a number in addition to
            // number + (possibly) stuff coming from _ordinalParseLenient.
            this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + /\d{1,2}/.source);
        },

        _months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
        months : function (m) {
            return this._months[m.month()];
        },

        _monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
        monthsShort : function (m) {
            return this._monthsShort[m.month()];
        },

        monthsParse : function (monthName, format, strict) {
            var i, mom, regex;

            if (!this._monthsParse) {
                this._monthsParse = [];
                this._longMonthsParse = [];
                this._shortMonthsParse = [];
            }

            for (i = 0; i < 12; i++) {
                // make the regex if we don't have it already
                mom = moment.utc([2000, i]);
                if (strict && !this._longMonthsParse[i]) {
                    this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
                    this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
                }
                if (!strict && !this._monthsParse[i]) {
                    regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
                    this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
                }
                // test the regex
                if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
                    return i;
                } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
                    return i;
                } else if (!strict && this._monthsParse[i].test(monthName)) {
                    return i;
                }
            }
        },

        _weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
        weekdays : function (m) {
            return this._weekdays[m.day()];
        },

        _weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
        weekdaysShort : function (m) {
            return this._weekdaysShort[m.day()];
        },

        _weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
        weekdaysMin : function (m) {
            return this._weekdaysMin[m.day()];
        },

        weekdaysParse : function (weekdayName) {
            var i, mom, regex;

            if (!this._weekdaysParse) {
                this._weekdaysParse = [];
            }

            for (i = 0; i < 7; i++) {
                // make the regex if we don't have it already
                if (!this._weekdaysParse[i]) {
                    mom = moment([2000, 1]).day(i);
                    regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
                    this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
                }
                // test the regex
                if (this._weekdaysParse[i].test(weekdayName)) {
                    return i;
                }
            }
        },

        _longDateFormat : {
            LTS : 'h:mm:ss A',
            LT : 'h:mm A',
            L : 'MM/DD/YYYY',
            LL : 'MMMM D, YYYY',
            LLL : 'MMMM D, YYYY LT',
            LLLL : 'dddd, MMMM D, YYYY LT'
        },
        longDateFormat : function (key) {
            var output = this._longDateFormat[key];
            if (!output && this._longDateFormat[key.toUpperCase()]) {
                output = this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (val) {
                    return val.slice(1);
                });
                this._longDateFormat[key] = output;
            }
            return output;
        },

        isPM : function (input) {
            // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
            // Using charAt should be more compatible.
            return ((input + '').toLowerCase().charAt(0) === 'p');
        },

        _meridiemParse : /[ap]\.?m?\.?/i,
        meridiem : function (hours, minutes, isLower) {
            if (hours > 11) {
                return isLower ? 'pm' : 'PM';
            } else {
                return isLower ? 'am' : 'AM';
            }
        },


        _calendar : {
            sameDay : '[Today at] LT',
            nextDay : '[Tomorrow at] LT',
            nextWeek : 'dddd [at] LT',
            lastDay : '[Yesterday at] LT',
            lastWeek : '[Last] dddd [at] LT',
            sameElse : 'L'
        },
        calendar : function (key, mom, now) {
            var output = this._calendar[key];
            return typeof output === 'function' ? output.apply(mom, [now]) : output;
        },

        _relativeTime : {
            future : 'in %s',
            past : '%s ago',
            s : 'a few seconds',
            m : 'a minute',
            mm : '%d minutes',
            h : 'an hour',
            hh : '%d hours',
            d : 'a day',
            dd : '%d days',
            M : 'a month',
            MM : '%d months',
            y : 'a year',
            yy : '%d years'
        },

        relativeTime : function (number, withoutSuffix, string, isFuture) {
            var output = this._relativeTime[string];
            return (typeof output === 'function') ?
                output(number, withoutSuffix, string, isFuture) :
                output.replace(/%d/i, number);
        },

        pastFuture : function (diff, output) {
            var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
            return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);
        },

        ordinal : function (number) {
            return this._ordinal.replace('%d', number);
        },
        _ordinal : '%d',
        _ordinalParse : /\d{1,2}/,

        preparse : function (string) {
            return string;
        },

        postformat : function (string) {
            return string;
        },

        week : function (mom) {
            return weekOfYear(mom, this._week.dow, this._week.doy).week;
        },

        _week : {
            dow : 0, // Sunday is the first day of the week.
            doy : 6  // The week that contains Jan 1st is the first week of the year.
        },

        firstDayOfWeek : function () {
            return this._week.dow;
        },

        firstDayOfYear : function () {
            return this._week.doy;
        },

        _invalidDate: 'Invalid date',
        invalidDate: function () {
            return this._invalidDate;
        }
    });

    /************************************
        Formatting
    ************************************/


    function removeFormattingTokens(input) {
        if (input.match(/\[[\s\S]/)) {
            return input.replace(/^\[|\]$/g, '');
        }
        return input.replace(/\\/g, '');
    }

    function makeFormatFunction(format) {
        var array = format.match(formattingTokens), i, length;

        for (i = 0, length = array.length; i < length; i++) {
            if (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } else {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        return function (mom) {
            var output = '';
            for (i = 0; i < length; i++) {
                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];
            }
            return output;
        };
    }

    // format date using native date object
    function formatMoment(m, format) {
        if (!m.isValid()) {
            return m.localeData().invalidDate();
        }

        format = expandFormat(format, m.localeData());

        if (!formatFunctions[format]) {
            formatFunctions[format] = makeFormatFunction(format);
        }

        return formatFunctions[format](m);
    }

    function expandFormat(format, locale) {
        var i = 5;

        function replaceLongDateFormatTokens(input) {
            return locale.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = 0;
        while (i >= 0 && localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = 0;
            i -= 1;
        }

        return format;
    }


    /************************************
        Parsing
    ************************************/


    // get the regex to find the next token
    function getParseRegexForToken(token, config) {
        var a, strict = config._strict;
        switch (token) {
        case 'Q':
            return parseTokenOneDigit;
        case 'DDDD':
            return parseTokenThreeDigits;
        case 'YYYY':
        case 'GGGG':
        case 'gggg':
            return strict ? parseTokenFourDigits : parseTokenOneToFourDigits;
        case 'Y':
        case 'G':
        case 'g':
            return parseTokenSignedNumber;
        case 'YYYYYY':
        case 'YYYYY':
        case 'GGGGG':
        case 'ggggg':
            return strict ? parseTokenSixDigits : parseTokenOneToSixDigits;
        case 'S':
            if (strict) {
                return parseTokenOneDigit;
            }
            /* falls through */
        case 'SS':
            if (strict) {
                return parseTokenTwoDigits;
            }
            /* falls through */
        case 'SSS':
            if (strict) {
                return parseTokenThreeDigits;
            }
            /* falls through */
        case 'DDD':
            return parseTokenOneToThreeDigits;
        case 'MMM':
        case 'MMMM':
        case 'dd':
        case 'ddd':
        case 'dddd':
            return parseTokenWord;
        case 'a':
        case 'A':
            return config._locale._meridiemParse;
        case 'x':
            return parseTokenOffsetMs;
        case 'X':
            return parseTokenTimestampMs;
        case 'Z':
        case 'ZZ':
            return parseTokenTimezone;
        case 'T':
            return parseTokenT;
        case 'SSSS':
            return parseTokenDigits;
        case 'MM':
        case 'DD':
        case 'YY':
        case 'GG':
        case 'gg':
        case 'HH':
        case 'hh':
        case 'mm':
        case 'ss':
        case 'ww':
        case 'WW':
            return strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;
        case 'M':
        case 'D':
        case 'd':
        case 'H':
        case 'h':
        case 'm':
        case 's':
        case 'w':
        case 'W':
        case 'e':
        case 'E':
            return parseTokenOneOrTwoDigits;
        case 'Do':
            return strict ? config._locale._ordinalParse : config._locale._ordinalParseLenient;
        default :
            a = new RegExp(regexpEscape(unescapeFormat(token.replace('\\', '')), 'i'));
            return a;
        }
    }

    function utcOffsetFromString(string) {
        string = string || '';
        var possibleTzMatches = (string.match(parseTokenTimezone) || []),
            tzChunk = possibleTzMatches[possibleTzMatches.length - 1] || [],
            parts = (tzChunk + '').match(parseTimezoneChunker) || ['-', 0, 0],
            minutes = +(parts[1] * 60) + toInt(parts[2]);

        return parts[0] === '+' ? minutes : -minutes;
    }

    // function to convert string input to date
    function addTimeToArrayFromToken(token, input, config) {
        var a, datePartArray = config._a;

        switch (token) {
        // QUARTER
        case 'Q':
            if (input != null) {
                datePartArray[MONTH] = (toInt(input) - 1) * 3;
            }
            break;
        // MONTH
        case 'M' : // fall through to MM
        case 'MM' :
            if (input != null) {
                datePartArray[MONTH] = toInt(input) - 1;
            }
            break;
        case 'MMM' : // fall through to MMMM
        case 'MMMM' :
            a = config._locale.monthsParse(input, token, config._strict);
            // if we didn't find a month name, mark the date as invalid.
            if (a != null) {
                datePartArray[MONTH] = a;
            } else {
                config._pf.invalidMonth = input;
            }
            break;
        // DAY OF MONTH
        case 'D' : // fall through to DD
        case 'DD' :
            if (input != null) {
                datePartArray[DATE] = toInt(input);
            }
            break;
        case 'Do' :
            if (input != null) {
                datePartArray[DATE] = toInt(parseInt(
                            input.match(/\d{1,2}/)[0], 10));
            }
            break;
        // DAY OF YEAR
        case 'DDD' : // fall through to DDDD
        case 'DDDD' :
            if (input != null) {
                config._dayOfYear = toInt(input);
            }

            break;
        // YEAR
        case 'YY' :
            datePartArray[YEAR] = moment.parseTwoDigitYear(input);
            break;
        case 'YYYY' :
        case 'YYYYY' :
        case 'YYYYYY' :
            datePartArray[YEAR] = toInt(input);
            break;
        // AM / PM
        case 'a' : // fall through to A
        case 'A' :
            config._meridiem = input;
            // config._isPm = config._locale.isPM(input);
            break;
        // HOUR
        case 'h' : // fall through to hh
        case 'hh' :
            config._pf.bigHour = true;
            /* falls through */
        case 'H' : // fall through to HH
        case 'HH' :
            datePartArray[HOUR] = toInt(input);
            break;
        // MINUTE
        case 'm' : // fall through to mm
        case 'mm' :
            datePartArray[MINUTE] = toInt(input);
            break;
        // SECOND
        case 's' : // fall through to ss
        case 'ss' :
            datePartArray[SECOND] = toInt(input);
            break;
        // MILLISECOND
        case 'S' :
        case 'SS' :
        case 'SSS' :
        case 'SSSS' :
            datePartArray[MILLISECOND] = toInt(('0.' + input) * 1000);
            break;
        // UNIX OFFSET (MILLISECONDS)
        case 'x':
            config._d = new Date(toInt(input));
            break;
        // UNIX TIMESTAMP WITH MS
        case 'X':
            config._d = new Date(parseFloat(input) * 1000);
            break;
        // TIMEZONE
        case 'Z' : // fall through to ZZ
        case 'ZZ' :
            config._useUTC = true;
            config._tzm = utcOffsetFromString(input);
            break;
        // WEEKDAY - human
        case 'dd':
        case 'ddd':
        case 'dddd':
            a = config._locale.weekdaysParse(input);
            // if we didn't get a weekday name, mark the date as invalid
            if (a != null) {
                config._w = config._w || {};
                config._w['d'] = a;
            } else {
                config._pf.invalidWeekday = input;
            }
            break;
        // WEEK, WEEK DAY - numeric
        case 'w':
        case 'ww':
        case 'W':
        case 'WW':
        case 'd':
        case 'e':
        case 'E':
            token = token.substr(0, 1);
            /* falls through */
        case 'gggg':
        case 'GGGG':
        case 'GGGGG':
            token = token.substr(0, 2);
            if (input) {
                config._w = config._w || {};
                config._w[token] = toInt(input);
            }
            break;
        case 'gg':
        case 'GG':
            config._w = config._w || {};
            config._w[token] = moment.parseTwoDigitYear(input);
        }
    }

    function dayOfYearFromWeekInfo(config) {
        var w, weekYear, week, weekday, dow, doy, temp;

        w = config._w;
        if (w.GG != null || w.W != null || w.E != null) {
            dow = 1;
            doy = 4;

            // TODO: We need to take the current isoWeekYear, but that depends on
            // how we interpret now (local, utc, fixed offset). So create
            // a now version of current config (take local/utc/offset flags, and
            // create now).
            weekYear = dfl(w.GG, config._a[YEAR], weekOfYear(moment(), 1, 4).year);
            week = dfl(w.W, 1);
            weekday = dfl(w.E, 1);
        } else {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;

            weekYear = dfl(w.gg, config._a[YEAR], weekOfYear(moment(), dow, doy).year);
            week = dfl(w.w, 1);

            if (w.d != null) {
                // weekday -- low day numbers are considered next week
                weekday = w.d;
                if (weekday < dow) {
                    ++week;
                }
            } else if (w.e != null) {
                // local weekday -- counting starts from begining of week
                weekday = w.e + dow;
            } else {
                // default to begining of week
                weekday = dow;
            }
        }
        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);

        config._a[YEAR] = temp.year;
        config._dayOfYear = temp.dayOfYear;
    }

    // convert an array to a date.
    // the array should mirror the parameters below
    // note: all values past the year are optional and will default to the lowest possible value.
    // [year, month, day , hour, minute, second, millisecond]
    function dateFromConfig(config) {
        var i, date, input = [], currentDate, yearToUse;

        if (config._d) {
            return;
        }

        currentDate = currentDateArray(config);

        //compute day of the year from weeks and weekdays
        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
            dayOfYearFromWeekInfo(config);
        }

        //if the day of the year is set, figure out what it is
        if (config._dayOfYear) {
            yearToUse = dfl(config._a[YEAR], currentDate[YEAR]);

            if (config._dayOfYear > daysInYear(yearToUse)) {
                config._pf._overflowDayOfYear = true;
            }

            date = makeUTCDate(yearToUse, 0, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }

        // Default to current date.
        // * if no year, month, day of month are given, default to today
        // * if day of month is given, default month and year
        // * if month is given, default only year
        // * if year is given, don't default anything
        for (i = 0; i < 3 && config._a[i] == null; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }

        // Zero out whatever was not defaulted, including time
        for (; i < 7; i++) {
            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
        }

        // Check for 24:00:00.000
        if (config._a[HOUR] === 24 &&
                config._a[MINUTE] === 0 &&
                config._a[SECOND] === 0 &&
                config._a[MILLISECOND] === 0) {
            config._nextDay = true;
            config._a[HOUR] = 0;
        }

        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(null, input);
        // Apply timezone offset from input. The actual utcOffset can be changed
        // with parseZone.
        if (config._tzm != null) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
        }

        if (config._nextDay) {
            config._a[HOUR] = 24;
        }
    }

    function dateFromObject(config) {
        var normalizedInput;

        if (config._d) {
            return;
        }

        normalizedInput = normalizeObjectUnits(config._i);
        config._a = [
            normalizedInput.year,
            normalizedInput.month,
            normalizedInput.day || normalizedInput.date,
            normalizedInput.hour,
            normalizedInput.minute,
            normalizedInput.second,
            normalizedInput.millisecond
        ];

        dateFromConfig(config);
    }

    function currentDateArray(config) {
        var now = new Date();
        if (config._useUTC) {
            return [
                now.getUTCFullYear(),
                now.getUTCMonth(),
                now.getUTCDate()
            ];
        } else {
            return [now.getFullYear(), now.getMonth(), now.getDate()];
        }
    }

    // date from string and format string
    function makeDateFromStringAndFormat(config) {
        if (config._f === moment.ISO_8601) {
            parseISO(config);
            return;
        }

        config._a = [];
        config._pf.empty = true;

        // This array is used to make a Date, either with `new Date` or `Date.UTC`
        var string = '' + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = 0;

        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

        for (i = 0; i < tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
            if (parsedInput) {
                skipped = string.substr(0, string.indexOf(parsedInput));
                if (skipped.length > 0) {
                    config._pf.unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }
            // don't parse if it's not a known token
            if (formatTokenFunctions[token]) {
                if (parsedInput) {
                    config._pf.empty = false;
                }
                else {
                    config._pf.unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            }
            else if (config._strict && !parsedInput) {
                config._pf.unusedTokens.push(token);
            }
        }

        // add remaining unparsed input length to the string
        config._pf.charsLeftOver = stringLength - totalParsedInputLength;
        if (string.length > 0) {
            config._pf.unusedInput.push(string);
        }

        // clear _12h flag if hour is <= 12
        if (config._pf.bigHour === true && config._a[HOUR] <= 12) {
            config._pf.bigHour = undefined;
        }
        // handle meridiem
        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR],
                config._meridiem);
        dateFromConfig(config);
        checkOverflow(config);
    }

    function unescapeFormat(s) {
        return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
            return p1 || p2 || p3 || p4;
        });
    }

    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
    function regexpEscape(s) {
        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    // date from string and array of format strings
    function makeDateFromStringAndArray(config) {
        var tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        if (config._f.length === 0) {
            config._pf.invalidFormat = true;
            config._d = new Date(NaN);
            return;
        }

        for (i = 0; i < config._f.length; i++) {
            currentScore = 0;
            tempConfig = copyConfig({}, config);
            if (config._useUTC != null) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._pf = defaultParsingFlags();
            tempConfig._f = config._f[i];
            makeDateFromStringAndFormat(tempConfig);

            if (!isValid(tempConfig)) {
                continue;
            }

            // if there is any input that was not parsed add a penalty for that format
            currentScore += tempConfig._pf.charsLeftOver;

            //or tokens
            currentScore += tempConfig._pf.unusedTokens.length * 10;

            tempConfig._pf.score = currentScore;

            if (scoreToBeat == null || currentScore < scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }

    // date from iso format
    function parseISO(config) {
        var i, l,
            string = config._i,
            match = isoRegex.exec(string);

        if (match) {
            config._pf.iso = true;
            for (i = 0, l = isoDates.length; i < l; i++) {
                if (isoDates[i][1].exec(string)) {
                    // match[5] should be 'T' or undefined
                    config._f = isoDates[i][0] + (match[6] || ' ');
                    break;
                }
            }
            for (i = 0, l = isoTimes.length; i < l; i++) {
                if (isoTimes[i][1].exec(string)) {
                    config._f += isoTimes[i][0];
                    break;
                }
            }
            if (string.match(parseTokenTimezone)) {
                config._f += 'Z';
            }
            makeDateFromStringAndFormat(config);
        } else {
            config._isValid = false;
        }
    }

    // date from iso format or fallback
    function makeDateFromString(config) {
        parseISO(config);
        if (config._isValid === false) {
            delete config._isValid;
            moment.createFromInputFallback(config);
        }
    }

    function map(arr, fn) {
        var res = [], i;
        for (i = 0; i < arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        return res;
    }

    function makeDateFromInput(config) {
        var input = config._i, matched;
        if (input === undefined) {
            config._d = new Date();
        } else if (isDate(input)) {
            config._d = new Date(+input);
        } else if ((matched = aspNetJsonRegex.exec(input)) !== null) {
            config._d = new Date(+matched[1]);
        } else if (typeof input === 'string') {
            makeDateFromString(config);
        } else if (isArray(input)) {
            config._a = map(input.slice(0), function (obj) {
                return parseInt(obj, 10);
            });
            dateFromConfig(config);
        } else if (typeof(input) === 'object') {
            dateFromObject(config);
        } else if (typeof(input) === 'number') {
            // from milliseconds
            config._d = new Date(input);
        } else {
            moment.createFromInputFallback(config);
        }
    }

    function makeDate(y, m, d, h, M, s, ms) {
        //can't just apply() to create a date:
        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply
        var date = new Date(y, m, d, h, M, s, ms);

        //the date constructor doesn't accept years < 1970
        if (y < 1970) {
            date.setFullYear(y);
        }
        return date;
    }

    function makeUTCDate(y) {
        var date = new Date(Date.UTC.apply(null, arguments));
        if (y < 1970) {
            date.setUTCFullYear(y);
        }
        return date;
    }

    function parseWeekday(input, locale) {
        if (typeof input === 'string') {
            if (!isNaN(input)) {
                input = parseInt(input, 10);
            }
            else {
                input = locale.weekdaysParse(input);
                if (typeof input !== 'number') {
                    return null;
                }
            }
        }
        return input;
    }

    /************************************
        Relative Time
    ************************************/


    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
    }

    function relativeTime(posNegDuration, withoutSuffix, locale) {
        var duration = moment.duration(posNegDuration).abs(),
            seconds = round(duration.as('s')),
            minutes = round(duration.as('m')),
            hours = round(duration.as('h')),
            days = round(duration.as('d')),
            months = round(duration.as('M')),
            years = round(duration.as('y')),

            args = seconds < relativeTimeThresholds.s && ['s', seconds] ||
                minutes === 1 && ['m'] ||
                minutes < relativeTimeThresholds.m && ['mm', minutes] ||
                hours === 1 && ['h'] ||
                hours < relativeTimeThresholds.h && ['hh', hours] ||
                days === 1 && ['d'] ||
                days < relativeTimeThresholds.d && ['dd', days] ||
                months === 1 && ['M'] ||
                months < relativeTimeThresholds.M && ['MM', months] ||
                years === 1 && ['y'] || ['yy', years];

        args[2] = withoutSuffix;
        args[3] = +posNegDuration > 0;
        args[4] = locale;
        return substituteTimeAgo.apply({}, args);
    }


    /************************************
        Week of Year
    ************************************/


    // firstDayOfWeek       0 = sun, 6 = sat
    //                      the day of the week that starts the week
    //                      (usually sunday or monday)
    // firstDayOfWeekOfYear 0 = sun, 6 = sat
    //                      the first week is the week that contains the first
    //                      of this day of the week
    //                      (eg. ISO weeks use thursday (4))
    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {
        var end = firstDayOfWeekOfYear - firstDayOfWeek,
            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),
            adjustedMoment;


        if (daysToDayOfWeek > end) {
            daysToDayOfWeek -= 7;
        }

        if (daysToDayOfWeek < end - 7) {
            daysToDayOfWeek += 7;
        }

        adjustedMoment = moment(mom).add(daysToDayOfWeek, 'd');
        return {
            week: Math.ceil(adjustedMoment.dayOfYear() / 7),
            year: adjustedMoment.year()
        };
    }

    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {
        var d = makeUTCDate(year, 0, 1).getUTCDay(), daysToAdd, dayOfYear;

        d = d === 0 ? 7 : d;
        weekday = weekday != null ? weekday : firstDayOfWeek;
        daysToAdd = firstDayOfWeek - d + (d > firstDayOfWeekOfYear ? 7 : 0) - (d < firstDayOfWeek ? 7 : 0);
        dayOfYear = 7 * (week - 1) + (weekday - firstDayOfWeek) + daysToAdd + 1;

        return {
            year: dayOfYear > 0 ? year : year - 1,
            dayOfYear: dayOfYear > 0 ?  dayOfYear : daysInYear(year - 1) + dayOfYear
        };
    }

    /************************************
        Top Level Functions
    ************************************/

    function makeMoment(config) {
        var input = config._i,
            format = config._f,
            res;

        config._locale = config._locale || moment.localeData(config._l);

        if (input === null || (format === undefined && input === '')) {
            return moment.invalid({nullInput: true});
        }

        if (typeof input === 'string') {
            config._i = input = config._locale.preparse(input);
        }

        if (moment.isMoment(input)) {
            return new Moment(input, true);
        } else if (format) {
            if (isArray(format)) {
                makeDateFromStringAndArray(config);
            } else {
                makeDateFromStringAndFormat(config);
            }
        } else {
            makeDateFromInput(config);
        }

        res = new Moment(config);
        if (res._nextDay) {
            // Adding is smart enough around DST
            res.add(1, 'd');
            res._nextDay = undefined;
        }

        return res;
    }

    moment = function (input, format, locale, strict) {
        var c;

        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c = {};
        c._isAMomentObject = true;
        c._i = input;
        c._f = format;
        c._l = locale;
        c._strict = strict;
        c._isUTC = false;
        c._pf = defaultParsingFlags();

        return makeMoment(c);
    };

    moment.suppressDeprecationWarnings = false;

    moment.createFromInputFallback = deprecate(
        'moment construction falls back to js Date. This is ' +
        'discouraged and will be removed in upcoming major ' +
        'release. Please refer to ' +
        'https://github.com/moment/moment/issues/1407 for more info.',
        function (config) {
            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
        }
    );

    // Pick a moment m from moments so that m[fn](other) is true for all
    // other. This relies on the function fn to be transitive.
    //
    // moments should either be an array of moment objects or an array, whose
    // first element is an array of moment objects.
    function pickBy(fn, moments) {
        var res, i;
        if (moments.length === 1 && isArray(moments[0])) {
            moments = moments[0];
        }
        if (!moments.length) {
            return moment();
        }
        res = moments[0];
        for (i = 1; i < moments.length; ++i) {
            if (moments[i][fn](res)) {
                res = moments[i];
            }
        }
        return res;
    }

    moment.min = function () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isBefore', args);
    };

    moment.max = function () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isAfter', args);
    };

    // creating with utc
    moment.utc = function (input, format, locale, strict) {
        var c;

        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c = {};
        c._isAMomentObject = true;
        c._useUTC = true;
        c._isUTC = true;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;
        c._pf = defaultParsingFlags();

        return makeMoment(c).utc();
    };

    // creating with unix timestamp (in seconds)
    moment.unix = function (input) {
        return moment(input * 1000);
    };

    // duration
    moment.duration = function (input, key) {
        var duration = input,
            // matching against regexp is expensive, do it on demand
            match = null,
            sign,
            ret,
            parseIso,
            diffRes;

        if (moment.isDuration(input)) {
            duration = {
                ms: input._milliseconds,
                d: input._days,
                M: input._months
            };
        } else if (typeof input === 'number') {
            duration = {};
            if (key) {
                duration[key] = input;
            } else {
                duration.milliseconds = input;
            }
        } else if (!!(match = aspNetTimeSpanJsonRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y: 0,
                d: toInt(match[DATE]) * sign,
                h: toInt(match[HOUR]) * sign,
                m: toInt(match[MINUTE]) * sign,
                s: toInt(match[SECOND]) * sign,
                ms: toInt(match[MILLISECOND]) * sign
            };
        } else if (!!(match = isoDurationRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            parseIso = function (inp) {
                // We'd normally use ~~inp for this, but unfortunately it also
                // converts floats to ints.
                // inp may be undefined, so careful calling replace on it.
                var res = inp && parseFloat(inp.replace(',', '.'));
                // apply sign while we're at it
                return (isNaN(res) ? 0 : res) * sign;
            };
            duration = {
                y: parseIso(match[2]),
                M: parseIso(match[3]),
                d: parseIso(match[4]),
                h: parseIso(match[5]),
                m: parseIso(match[6]),
                s: parseIso(match[7]),
                w: parseIso(match[8])
            };
        } else if (duration == null) {// checks for null or undefined
            duration = {};
        } else if (typeof duration === 'object' &&
                ('from' in duration || 'to' in duration)) {
            diffRes = momentsDifference(moment(duration.from), moment(duration.to));

            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }

        ret = new Duration(duration);

        if (moment.isDuration(input) && hasOwnProp(input, '_locale')) {
            ret._locale = input._locale;
        }

        return ret;
    };

    // version number
    moment.version = VERSION;

    // default format
    moment.defaultFormat = isoFormat;

    // constant that refers to the ISO standard
    moment.ISO_8601 = function () {};

    // Plugins that add properties should also add the key here (null value),
    // so we can properly clone ourselves.
    moment.momentProperties = momentProperties;

    // This function will be called whenever a moment is mutated.
    // It is intended to keep the offset in sync with the timezone.
    moment.updateOffset = function () {};

    // This function allows you to set a threshold for relative time strings
    moment.relativeTimeThreshold = function (threshold, limit) {
        if (relativeTimeThresholds[threshold] === undefined) {
            return false;
        }
        if (limit === undefined) {
            return relativeTimeThresholds[threshold];
        }
        relativeTimeThresholds[threshold] = limit;
        return true;
    };

    moment.lang = deprecate(
        'moment.lang is deprecated. Use moment.locale instead.',
        function (key, value) {
            return moment.locale(key, value);
        }
    );

    // This function will load locale and then set the global locale.  If
    // no arguments are passed in, it will simply return the current global
    // locale key.
    moment.locale = function (key, values) {
        var data;
        if (key) {
            if (typeof(values) !== 'undefined') {
                data = moment.defineLocale(key, values);
            }
            else {
                data = moment.localeData(key);
            }

            if (data) {
                moment.duration._locale = moment._locale = data;
            }
        }

        return moment._locale._abbr;
    };

    moment.defineLocale = function (name, values) {
        if (values !== null) {
            values.abbr = name;
            if (!locales[name]) {
                locales[name] = new Locale();
            }
            locales[name].set(values);

            // backwards compat for now: also set the locale
            moment.locale(name);

            return locales[name];
        } else {
            // useful for testing
            delete locales[name];
            return null;
        }
    };

    moment.langData = deprecate(
        'moment.langData is deprecated. Use moment.localeData instead.',
        function (key) {
            return moment.localeData(key);
        }
    );

    // returns locale data
    moment.localeData = function (key) {
        var locale;

        if (key && key._locale && key._locale._abbr) {
            key = key._locale._abbr;
        }

        if (!key) {
            return moment._locale;
        }

        if (!isArray(key)) {
            //short-circuit everything else
            locale = loadLocale(key);
            if (locale) {
                return locale;
            }
            key = [key];
        }

        return chooseLocale(key);
    };

    // compare moment object
    moment.isMoment = function (obj) {
        return obj instanceof Moment ||
            (obj != null && hasOwnProp(obj, '_isAMomentObject'));
    };

    // for typechecking Duration objects
    moment.isDuration = function (obj) {
        return obj instanceof Duration;
    };

    for (i = lists.length - 1; i >= 0; --i) {
        makeList(lists[i]);
    }

    moment.normalizeUnits = function (units) {
        return normalizeUnits(units);
    };

    moment.invalid = function (flags) {
        var m = moment.utc(NaN);
        if (flags != null) {
            extend(m._pf, flags);
        }
        else {
            m._pf.userInvalidated = true;
        }

        return m;
    };

    moment.parseZone = function () {
        return moment.apply(null, arguments).parseZone();
    };

    moment.parseTwoDigitYear = function (input) {
        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
    };

    moment.isDate = isDate;

    /************************************
        Moment Prototype
    ************************************/


    extend(moment.fn = Moment.prototype, {

        clone : function () {
            return moment(this);
        },

        valueOf : function () {
            return +this._d - ((this._offset || 0) * 60000);
        },

        unix : function () {
            return Math.floor(+this / 1000);
        },

        toString : function () {
            return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
        },

        toDate : function () {
            return this._offset ? new Date(+this) : this._d;
        },

        toISOString : function () {
            var m = moment(this).utc();
            if (0 < m.year() && m.year() <= 9999) {
                if ('function' === typeof Date.prototype.toISOString) {
                    // native implementation is ~50x faster, use it when we can
                    return this.toDate().toISOString();
                } else {
                    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
                }
            } else {
                return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
            }
        },

        toArray : function () {
            var m = this;
            return [
                m.year(),
                m.month(),
                m.date(),
                m.hours(),
                m.minutes(),
                m.seconds(),
                m.milliseconds()
            ];
        },

        isValid : function () {
            return isValid(this);
        },

        isDSTShifted : function () {
            if (this._a) {
                return this.isValid() && compareArrays(this._a, (this._isUTC ? moment.utc(this._a) : moment(this._a)).toArray()) > 0;
            }

            return false;
        },

        parsingFlags : function () {
            return extend({}, this._pf);
        },

        invalidAt: function () {
            return this._pf.overflow;
        },

        utc : function (keepLocalTime) {
            return this.utcOffset(0, keepLocalTime);
        },

        local : function (keepLocalTime) {
            if (this._isUTC) {
                this.utcOffset(0, keepLocalTime);
                this._isUTC = false;

                if (keepLocalTime) {
                    this.subtract(this._dateUtcOffset(), 'm');
                }
            }
            return this;
        },

        format : function (inputString) {
            var output = formatMoment(this, inputString || moment.defaultFormat);
            return this.localeData().postformat(output);
        },

        add : createAdder(1, 'add'),

        subtract : createAdder(-1, 'subtract'),

        diff : function (input, units, asFloat) {
            var that = makeAs(input, this),
                zoneDiff = (that.utcOffset() - this.utcOffset()) * 6e4,
                anchor, diff, output, daysAdjust;

            units = normalizeUnits(units);

            if (units === 'year' || units === 'month' || units === 'quarter') {
                output = monthDiff(this, that);
                if (units === 'quarter') {
                    output = output / 3;
                } else if (units === 'year') {
                    output = output / 12;
                }
            } else {
                diff = this - that;
                output = units === 'second' ? diff / 1e3 : // 1000
                    units === 'minute' ? diff / 6e4 : // 1000 * 60
                    units === 'hour' ? diff / 36e5 : // 1000 * 60 * 60
                    units === 'day' ? (diff - zoneDiff) / 864e5 : // 1000 * 60 * 60 * 24, negate dst
                    units === 'week' ? (diff - zoneDiff) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst
                    diff;
            }
            return asFloat ? output : absRound(output);
        },

        from : function (time, withoutSuffix) {
            return moment.duration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);
        },

        fromNow : function (withoutSuffix) {
            return this.from(moment(), withoutSuffix);
        },

        calendar : function (time) {
            // We want to compare the start of today, vs this.
            // Getting start-of-today depends on whether we're locat/utc/offset
            // or not.
            var now = time || moment(),
                sod = makeAs(now, this).startOf('day'),
                diff = this.diff(sod, 'days', true),
                format = diff < -6 ? 'sameElse' :
                    diff < -1 ? 'lastWeek' :
                    diff < 0 ? 'lastDay' :
                    diff < 1 ? 'sameDay' :
                    diff < 2 ? 'nextDay' :
                    diff < 7 ? 'nextWeek' : 'sameElse';
            return this.format(this.localeData().calendar(format, this, moment(now)));
        },

        isLeapYear : function () {
            return isLeapYear(this.year());
        },

        isDST : function () {
            return (this.utcOffset() > this.clone().month(0).utcOffset() ||
                this.utcOffset() > this.clone().month(5).utcOffset());
        },

        day : function (input) {
            var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
            if (input != null) {
                input = parseWeekday(input, this.localeData());
                return this.add(input - day, 'd');
            } else {
                return day;
            }
        },

        month : makeAccessor('Month', true),

        startOf : function (units) {
            units = normalizeUnits(units);
            // the following switch intentionally omits break keywords
            // to utilize falling through the cases.
            switch (units) {
            case 'year':
                this.month(0);
                /* falls through */
            case 'quarter':
            case 'month':
                this.date(1);
                /* falls through */
            case 'week':
            case 'isoWeek':
            case 'day':
                this.hours(0);
                /* falls through */
            case 'hour':
                this.minutes(0);
                /* falls through */
            case 'minute':
                this.seconds(0);
                /* falls through */
            case 'second':
                this.milliseconds(0);
                /* falls through */
            }

            // weeks are a special case
            if (units === 'week') {
                this.weekday(0);
            } else if (units === 'isoWeek') {
                this.isoWeekday(1);
            }

            // quarters are also special
            if (units === 'quarter') {
                this.month(Math.floor(this.month() / 3) * 3);
            }

            return this;
        },

        endOf: function (units) {
            units = normalizeUnits(units);
            if (units === undefined || units === 'millisecond') {
                return this;
            }
            return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');
        },

        isAfter: function (input, units) {
            var inputMs;
            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');
            if (units === 'millisecond') {
                input = moment.isMoment(input) ? input : moment(input);
                return +this > +input;
            } else {
                inputMs = moment.isMoment(input) ? +input : +moment(input);
                return inputMs < +this.clone().startOf(units);
            }
        },

        isBefore: function (input, units) {
            var inputMs;
            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');
            if (units === 'millisecond') {
                input = moment.isMoment(input) ? input : moment(input);
                return +this < +input;
            } else {
                inputMs = moment.isMoment(input) ? +input : +moment(input);
                return +this.clone().endOf(units) < inputMs;
            }
        },

        isBetween: function (from, to, units) {
            return this.isAfter(from, units) && this.isBefore(to, units);
        },

        isSame: function (input, units) {
            var inputMs;
            units = normalizeUnits(units || 'millisecond');
            if (units === 'millisecond') {
                input = moment.isMoment(input) ? input : moment(input);
                return +this === +input;
            } else {
                inputMs = +moment(input);
                return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));
            }
        },

        min: deprecate(
                 'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',
                 function (other) {
                     other = moment.apply(null, arguments);
                     return other < this ? this : other;
                 }
         ),

        max: deprecate(
                'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',
                function (other) {
                    other = moment.apply(null, arguments);
                    return other > this ? this : other;
                }
        ),

        zone : deprecate(
                'moment().zone is deprecated, use moment().utcOffset instead. ' +
                'https://github.com/moment/moment/issues/1779',
                function (input, keepLocalTime) {
                    if (input != null) {
                        if (typeof input !== 'string') {
                            input = -input;
                        }

                        this.utcOffset(input, keepLocalTime);

                        return this;
                    } else {
                        return -this.utcOffset();
                    }
                }
        ),

        // keepLocalTime = true means only change the timezone, without
        // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
        // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
        // +0200, so we adjust the time as needed, to be valid.
        //
        // Keeping the time actually adds/subtracts (one hour)
        // from the actual represented time. That is why we call updateOffset
        // a second time. In case it wants us to change the offset again
        // _changeInProgress == true case, then we have to adjust, because
        // there is no such time in the given timezone.
        utcOffset : function (input, keepLocalTime) {
            var offset = this._offset || 0,
                localAdjust;
            if (input != null) {
                if (typeof input === 'string') {
                    input = utcOffsetFromString(input);
                }
                if (Math.abs(input) < 16) {
                    input = input * 60;
                }
                if (!this._isUTC && keepLocalTime) {
                    localAdjust = this._dateUtcOffset();
                }
                this._offset = input;
                this._isUTC = true;
                if (localAdjust != null) {
                    this.add(localAdjust, 'm');
                }
                if (offset !== input) {
                    if (!keepLocalTime || this._changeInProgress) {
                        addOrSubtractDurationFromMoment(this,
                                moment.duration(input - offset, 'm'), 1, false);
                    } else if (!this._changeInProgress) {
                        this._changeInProgress = true;
                        moment.updateOffset(this, true);
                        this._changeInProgress = null;
                    }
                }

                return this;
            } else {
                return this._isUTC ? offset : this._dateUtcOffset();
            }
        },

        isLocal : function () {
            return !this._isUTC;
        },

        isUtcOffset : function () {
            return this._isUTC;
        },

        isUtc : function () {
            return this._isUTC && this._offset === 0;
        },

        zoneAbbr : function () {
            return this._isUTC ? 'UTC' : '';
        },

        zoneName : function () {
            return this._isUTC ? 'Coordinated Universal Time' : '';
        },

        parseZone : function () {
            if (this._tzm) {
                this.utcOffset(this._tzm);
            } else if (typeof this._i === 'string') {
                this.utcOffset(utcOffsetFromString(this._i));
            }
            return this;
        },

        hasAlignedHourOffset : function (input) {
            if (!input) {
                input = 0;
            }
            else {
                input = moment(input).utcOffset();
            }

            return (this.utcOffset() - input) % 60 === 0;
        },

        daysInMonth : function () {
            return daysInMonth(this.year(), this.month());
        },

        dayOfYear : function (input) {
            var dayOfYear = round((moment(this).startOf('day') - moment(this).startOf('year')) / 864e5) + 1;
            return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
        },

        quarter : function (input) {
            return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
        },

        weekYear : function (input) {
            var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
            return input == null ? year : this.add((input - year), 'y');
        },

        isoWeekYear : function (input) {
            var year = weekOfYear(this, 1, 4).year;
            return input == null ? year : this.add((input - year), 'y');
        },

        week : function (input) {
            var week = this.localeData().week(this);
            return input == null ? week : this.add((input - week) * 7, 'd');
        },

        isoWeek : function (input) {
            var week = weekOfYear(this, 1, 4).week;
            return input == null ? week : this.add((input - week) * 7, 'd');
        },

        weekday : function (input) {
            var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
            return input == null ? weekday : this.add(input - weekday, 'd');
        },

        isoWeekday : function (input) {
            // behaves the same as moment#day except
            // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
            // as a setter, sunday should belong to the previous week.
            return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);
        },

        isoWeeksInYear : function () {
            return weeksInYear(this.year(), 1, 4);
        },

        weeksInYear : function () {
            var weekInfo = this.localeData()._week;
            return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
        },

        get : function (units) {
            units = normalizeUnits(units);
            return this[units]();
        },

        set : function (units, value) {
            var unit;
            if (typeof units === 'object') {
                for (unit in units) {
                    this.set(unit, units[unit]);
                }
            }
            else {
                units = normalizeUnits(units);
                if (typeof this[units] === 'function') {
                    this[units](value);
                }
            }
            return this;
        },

        // If passed a locale key, it will set the locale for this
        // instance.  Otherwise, it will return the locale configuration
        // variables for this instance.
        locale : function (key) {
            var newLocaleData;

            if (key === undefined) {
                return this._locale._abbr;
            } else {
                newLocaleData = moment.localeData(key);
                if (newLocaleData != null) {
                    this._locale = newLocaleData;
                }
                return this;
            }
        },

        lang : deprecate(
            'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
            function (key) {
                if (key === undefined) {
                    return this.localeData();
                } else {
                    return this.locale(key);
                }
            }
        ),

        localeData : function () {
            return this._locale;
        },

        _dateUtcOffset : function () {
            // On Firefox.24 Date#getTimezoneOffset returns a floating point.
            // https://github.com/moment/moment/pull/1871
            return -Math.round(this._d.getTimezoneOffset() / 15) * 15;
        }

    });

    function rawMonthSetter(mom, value) {
        var dayOfMonth;

        // TODO: Move this out of here!
        if (typeof value === 'string') {
            value = mom.localeData().monthsParse(value);
            // TODO: Another silent failure?
            if (typeof value !== 'number') {
                return mom;
            }
        }

        dayOfMonth = Math.min(mom.date(),
                daysInMonth(mom.year(), value));
        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
        return mom;
    }

    function rawGetter(mom, unit) {
        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();
    }

    function rawSetter(mom, unit, value) {
        if (unit === 'Month') {
            return rawMonthSetter(mom, value);
        } else {
            return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
        }
    }

    function makeAccessor(unit, keepTime) {
        return function (value) {
            if (value != null) {
                rawSetter(this, unit, value);
                moment.updateOffset(this, keepTime);
                return this;
            } else {
                return rawGetter(this, unit);
            }
        };
    }

    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor('Milliseconds', false);
    moment.fn.second = moment.fn.seconds = makeAccessor('Seconds', false);
    moment.fn.minute = moment.fn.minutes = makeAccessor('Minutes', false);
    // Setting the hour should keep the time, because the user explicitly
    // specified which hour he wants. So trying to maintain the same hour (in
    // a new timezone) makes sense. Adding/subtracting hours does not follow
    // this rule.
    moment.fn.hour = moment.fn.hours = makeAccessor('Hours', true);
    // moment.fn.month is defined separately
    moment.fn.date = makeAccessor('Date', true);
    moment.fn.dates = deprecate('dates accessor is deprecated. Use date instead.', makeAccessor('Date', true));
    moment.fn.year = makeAccessor('FullYear', true);
    moment.fn.years = deprecate('years accessor is deprecated. Use year instead.', makeAccessor('FullYear', true));

    // add plural methods
    moment.fn.days = moment.fn.day;
    moment.fn.months = moment.fn.month;
    moment.fn.weeks = moment.fn.week;
    moment.fn.isoWeeks = moment.fn.isoWeek;
    moment.fn.quarters = moment.fn.quarter;

    // add aliased format methods
    moment.fn.toJSON = moment.fn.toISOString;

    // alias isUtc for dev-friendliness
    moment.fn.isUTC = moment.fn.isUtc;

    /************************************
        Duration Prototype
    ************************************/


    function daysToYears (days) {
        // 400 years have 146097 days (taking into account leap year rules)
        return days * 400 / 146097;
    }

    function yearsToDays (years) {
        // years * 365 + absRound(years / 4) -
        //     absRound(years / 100) + absRound(years / 400);
        return years * 146097 / 400;
    }

    extend(moment.duration.fn = Duration.prototype, {

        _bubble : function () {
            var milliseconds = this._milliseconds,
                days = this._days,
                months = this._months,
                data = this._data,
                seconds, minutes, hours, years = 0;

            // The following code bubbles up values, see the tests for
            // examples of what that means.
            data.milliseconds = milliseconds % 1000;

            seconds = absRound(milliseconds / 1000);
            data.seconds = seconds % 60;

            minutes = absRound(seconds / 60);
            data.minutes = minutes % 60;

            hours = absRound(minutes / 60);
            data.hours = hours % 24;

            days += absRound(hours / 24);

            // Accurately convert days to years, assume start from year 0.
            years = absRound(daysToYears(days));
            days -= absRound(yearsToDays(years));

            // 30 days to a month
            // TODO (iskren): Use anchor date (like 1st Jan) to compute this.
            months += absRound(days / 30);
            days %= 30;

            // 12 months -> 1 year
            years += absRound(months / 12);
            months %= 12;

            data.days = days;
            data.months = months;
            data.years = years;
        },

        abs : function () {
            this._milliseconds = Math.abs(this._milliseconds);
            this._days = Math.abs(this._days);
            this._months = Math.abs(this._months);

            this._data.milliseconds = Math.abs(this._data.milliseconds);
            this._data.seconds = Math.abs(this._data.seconds);
            this._data.minutes = Math.abs(this._data.minutes);
            this._data.hours = Math.abs(this._data.hours);
            this._data.months = Math.abs(this._data.months);
            this._data.years = Math.abs(this._data.years);

            return this;
        },

        weeks : function () {
            return absRound(this.days() / 7);
        },

        valueOf : function () {
            return this._milliseconds +
              this._days * 864e5 +
              (this._months % 12) * 2592e6 +
              toInt(this._months / 12) * 31536e6;
        },

        humanize : function (withSuffix) {
            var output = relativeTime(this, !withSuffix, this.localeData());

            if (withSuffix) {
                output = this.localeData().pastFuture(+this, output);
            }

            return this.localeData().postformat(output);
        },

        add : function (input, val) {
            // supports only 2.0-style add(1, 's') or add(moment)
            var dur = moment.duration(input, val);

            this._milliseconds += dur._milliseconds;
            this._days += dur._days;
            this._months += dur._months;

            this._bubble();

            return this;
        },

        subtract : function (input, val) {
            var dur = moment.duration(input, val);

            this._milliseconds -= dur._milliseconds;
            this._days -= dur._days;
            this._months -= dur._months;

            this._bubble();

            return this;
        },

        get : function (units) {
            units = normalizeUnits(units);
            return this[units.toLowerCase() + 's']();
        },

        as : function (units) {
            var days, months;
            units = normalizeUnits(units);

            if (units === 'month' || units === 'year') {
                days = this._days + this._milliseconds / 864e5;
                months = this._months + daysToYears(days) * 12;
                return units === 'month' ? months : months / 12;
            } else {
                // handle milliseconds separately because of floating point math errors (issue #1867)
                days = this._days + Math.round(yearsToDays(this._months / 12));
                switch (units) {
                    case 'week': return days / 7 + this._milliseconds / 6048e5;
                    case 'day': return days + this._milliseconds / 864e5;
                    case 'hour': return days * 24 + this._milliseconds / 36e5;
                    case 'minute': return days * 24 * 60 + this._milliseconds / 6e4;
                    case 'second': return days * 24 * 60 * 60 + this._milliseconds / 1000;
                    // Math.floor prevents floating point math errors here
                    case 'millisecond': return Math.floor(days * 24 * 60 * 60 * 1000) + this._milliseconds;
                    default: throw new Error('Unknown unit ' + units);
                }
            }
        },

        lang : moment.fn.lang,
        locale : moment.fn.locale,

        toIsoString : deprecate(
            'toIsoString() is deprecated. Please use toISOString() instead ' +
            '(notice the capitals)',
            function () {
                return this.toISOString();
            }
        ),

        toISOString : function () {
            // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
            var years = Math.abs(this.years()),
                months = Math.abs(this.months()),
                days = Math.abs(this.days()),
                hours = Math.abs(this.hours()),
                minutes = Math.abs(this.minutes()),
                seconds = Math.abs(this.seconds() + this.milliseconds() / 1000);

            if (!this.asSeconds()) {
                // this is the same as C#'s (Noda) and python (isodate)...
                // but not other JS (goog.date)
                return 'P0D';
            }

            return (this.asSeconds() < 0 ? '-' : '') +
                'P' +
                (years ? years + 'Y' : '') +
                (months ? months + 'M' : '') +
                (days ? days + 'D' : '') +
                ((hours || minutes || seconds) ? 'T' : '') +
                (hours ? hours + 'H' : '') +
                (minutes ? minutes + 'M' : '') +
                (seconds ? seconds + 'S' : '');
        },

        localeData : function () {
            return this._locale;
        },

        toJSON : function () {
            return this.toISOString();
        }
    });

    moment.duration.fn.toString = moment.duration.fn.toISOString;

    function makeDurationGetter(name) {
        moment.duration.fn[name] = function () {
            return this._data[name];
        };
    }

    for (i in unitMillisecondFactors) {
        if (hasOwnProp(unitMillisecondFactors, i)) {
            makeDurationGetter(i.toLowerCase());
        }
    }

    moment.duration.fn.asMilliseconds = function () {
        return this.as('ms');
    };
    moment.duration.fn.asSeconds = function () {
        return this.as('s');
    };
    moment.duration.fn.asMinutes = function () {
        return this.as('m');
    };
    moment.duration.fn.asHours = function () {
        return this.as('h');
    };
    moment.duration.fn.asDays = function () {
        return this.as('d');
    };
    moment.duration.fn.asWeeks = function () {
        return this.as('weeks');
    };
    moment.duration.fn.asMonths = function () {
        return this.as('M');
    };
    moment.duration.fn.asYears = function () {
        return this.as('y');
    };

    /************************************
        Default Locale
    ************************************/


    // Set default locale, other locale will inherit from English.
    moment.locale('en', {
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (toInt(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });

    /* EMBED_LOCALES */

    /************************************
        Exposing Moment
    ************************************/

    function makeGlobal(shouldDeprecate) {
        /*global ender:false */
        if (typeof ender !== 'undefined') {
            return;
        }
        oldGlobalMoment = globalScope.moment;
        if (shouldDeprecate) {
            globalScope.moment = deprecate(
                    'Accessing Moment through the global scope is ' +
                    'deprecated, and will be removed in an upcoming ' +
                    'release.',
                    moment);
        } else {
            globalScope.moment = moment;
        }
    }

    // CommonJS module is defined
    if (hasModule) {
        module.exports = moment;
    } else if (typeof define === 'function' && define.amd) {
        define(function (require, exports, module) {
            if (module.config && module.config() && module.config().noGlobal === true) {
                // release the global variable
                globalScope.moment = oldGlobalMoment;
            }

            return moment;
        });
        makeGlobal(true);
    } else {
        makeGlobal();
    }
}).call(this);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:moment-js', location = '/bower/moment-timezone/moment-timezone-with-data-1970-2030.js' */
//! moment-timezone.js
//! version : 0.5.25
//! Copyright (c) JS Foundation and other contributors
//! license : MIT
//! github.com/moment/moment-timezone

(function (root, factory) {
	"use strict";

	/*global define*/
	if (typeof module === 'object' && module.exports) {
		module.exports = factory(require('moment')); // Node
	} else if (typeof define === 'function' && define.amd) {
		define(['moment'], factory);                 // AMD
	} else {
		factory(root.moment);                        // Browser
	}
}(this, function (moment) {
	"use strict";

	// Do not load moment-timezone a second time.
	// if (moment.tz !== undefined) {
	// 	logError('Moment Timezone ' + moment.tz.version + ' was already loaded ' + (moment.tz.dataVersion ? 'with data from ' : 'without any data') + moment.tz.dataVersion);
	// 	return moment;
	// }

	var VERSION = "0.5.25",
		zones = {},
		links = {},
		names = {},
		guesses = {},
		cachedGuess;

	if (!moment || typeof moment.version !== 'string') {
		logError('Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/');
	}

	var momentVersion = moment.version.split('.'),
		major = +momentVersion[0],
		minor = +momentVersion[1];

	// Moment.js version check
	if (major < 2 || (major === 2 && minor < 6)) {
		logError('Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js ' + moment.version + '. See momentjs.com');
	}

	/************************************
		Unpacking
	************************************/

	function charCodeToInt(charCode) {
		if (charCode > 96) {
			return charCode - 87;
		} else if (charCode > 64) {
			return charCode - 29;
		}
		return charCode - 48;
	}

	function unpackBase60(string) {
		var i = 0,
			parts = string.split('.'),
			whole = parts[0],
			fractional = parts[1] || '',
			multiplier = 1,
			num,
			out = 0,
			sign = 1;

		// handle negative numbers
		if (string.charCodeAt(0) === 45) {
			i = 1;
			sign = -1;
		}

		// handle digits before the decimal
		for (i; i < whole.length; i++) {
			num = charCodeToInt(whole.charCodeAt(i));
			out = 60 * out + num;
		}

		// handle digits after the decimal
		for (i = 0; i < fractional.length; i++) {
			multiplier = multiplier / 60;
			num = charCodeToInt(fractional.charCodeAt(i));
			out += num * multiplier;
		}

		return out * sign;
	}

	function arrayToInt (array) {
		for (var i = 0; i < array.length; i++) {
			array[i] = unpackBase60(array[i]);
		}
	}

	function intToUntil (array, length) {
		for (var i = 0; i < length; i++) {
			array[i] = Math.round((array[i - 1] || 0) + (array[i] * 60000)); // minutes to milliseconds
		}

		array[length - 1] = Infinity;
	}

	function mapIndices (source, indices) {
		var out = [], i;

		for (i = 0; i < indices.length; i++) {
			out[i] = source[indices[i]];
		}

		return out;
	}

	function unpack (string) {
		var data = string.split('|'),
			offsets = data[2].split(' '),
			indices = data[3].split(''),
			untils  = data[4].split(' ');

		arrayToInt(offsets);
		arrayToInt(indices);
		arrayToInt(untils);

		intToUntil(untils, indices.length);

		return {
			name       : data[0],
			abbrs      : mapIndices(data[1].split(' '), indices),
			offsets    : mapIndices(offsets, indices),
			untils     : untils,
			population : data[5] | 0
		};
	}

	/************************************
		Zone object
	************************************/

	function Zone (packedString) {
		if (packedString) {
			this._set(unpack(packedString));
		}
	}

	Zone.prototype = {
		_set : function (unpacked) {
			this.name       = unpacked.name;
			this.abbrs      = unpacked.abbrs;
			this.untils     = unpacked.untils;
			this.offsets    = unpacked.offsets;
			this.population = unpacked.population;
		},

		_index : function (timestamp) {
			var target = +timestamp,
				untils = this.untils,
				i;

			for (i = 0; i < untils.length; i++) {
				if (target < untils[i]) {
					return i;
				}
			}
		},

		parse : function (timestamp) {
			var target  = +timestamp,
				offsets = this.offsets,
				untils  = this.untils,
				max     = untils.length - 1,
				offset, offsetNext, offsetPrev, i;

			for (i = 0; i < max; i++) {
				offset     = offsets[i];
				offsetNext = offsets[i + 1];
				offsetPrev = offsets[i ? i - 1 : i];

				if (offset < offsetNext && tz.moveAmbiguousForward) {
					offset = offsetNext;
				} else if (offset > offsetPrev && tz.moveInvalidForward) {
					offset = offsetPrev;
				}

				if (target < untils[i] - (offset * 60000)) {
					return offsets[i];
				}
			}

			return offsets[max];
		},

		abbr : function (mom) {
			return this.abbrs[this._index(mom)];
		},

		offset : function (mom) {
			logError("zone.offset has been deprecated in favor of zone.utcOffset");
			return this.offsets[this._index(mom)];
		},

		utcOffset : function (mom) {
			return this.offsets[this._index(mom)];
		}
	};

	/************************************
		Current Timezone
	************************************/

	function OffsetAt(at) {
		var timeString = at.toTimeString();
		var abbr = timeString.match(/\([a-z ]+\)/i);
		if (abbr && abbr[0]) {
			// 17:56:31 GMT-0600 (CST)
			// 17:56:31 GMT-0600 (Central Standard Time)
			abbr = abbr[0].match(/[A-Z]/g);
			abbr = abbr ? abbr.join('') : undefined;
		} else {
			// 17:56:31 CST
			// 17:56:31 GMT+0800 ()
			abbr = timeString.match(/[A-Z]{3,5}/g);
			abbr = abbr ? abbr[0] : undefined;
		}

		if (abbr === 'GMT') {
			abbr = undefined;
		}

		this.at = +at;
		this.abbr = abbr;
		this.offset = at.getTimezoneOffset();
	}

	function ZoneScore(zone) {
		this.zone = zone;
		this.offsetScore = 0;
		this.abbrScore = 0;
	}

	ZoneScore.prototype.scoreOffsetAt = function (offsetAt) {
		this.offsetScore += Math.abs(this.zone.utcOffset(offsetAt.at) - offsetAt.offset);
		if (this.zone.abbr(offsetAt.at).replace(/[^A-Z]/g, '') !== offsetAt.abbr) {
			this.abbrScore++;
		}
	};

	function findChange(low, high) {
		var mid, diff;

		while ((diff = ((high.at - low.at) / 12e4 | 0) * 6e4)) {
			mid = new OffsetAt(new Date(low.at + diff));
			if (mid.offset === low.offset) {
				low = mid;
			} else {
				high = mid;
			}
		}

		return low;
	}

	function userOffsets() {
		var startYear = new Date().getFullYear() - 2,
			last = new OffsetAt(new Date(startYear, 0, 1)),
			offsets = [last],
			change, next, i;

		for (i = 1; i < 48; i++) {
			next = new OffsetAt(new Date(startYear, i, 1));
			if (next.offset !== last.offset) {
				change = findChange(last, next);
				offsets.push(change);
				offsets.push(new OffsetAt(new Date(change.at + 6e4)));
			}
			last = next;
		}

		for (i = 0; i < 4; i++) {
			offsets.push(new OffsetAt(new Date(startYear + i, 0, 1)));
			offsets.push(new OffsetAt(new Date(startYear + i, 6, 1)));
		}

		return offsets;
	}

	function sortZoneScores (a, b) {
		if (a.offsetScore !== b.offsetScore) {
			return a.offsetScore - b.offsetScore;
		}
		if (a.abbrScore !== b.abbrScore) {
			return a.abbrScore - b.abbrScore;
		}
		return b.zone.population - a.zone.population;
	}

	function addToGuesses (name, offsets) {
		var i, offset;
		arrayToInt(offsets);
		for (i = 0; i < offsets.length; i++) {
			offset = offsets[i];
			guesses[offset] = guesses[offset] || {};
			guesses[offset][name] = true;
		}
	}

	function guessesForUserOffsets (offsets) {
		var offsetsLength = offsets.length,
			filteredGuesses = {},
			out = [],
			i, j, guessesOffset;

		for (i = 0; i < offsetsLength; i++) {
			guessesOffset = guesses[offsets[i].offset] || {};
			for (j in guessesOffset) {
				if (guessesOffset.hasOwnProperty(j)) {
					filteredGuesses[j] = true;
				}
			}
		}

		for (i in filteredGuesses) {
			if (filteredGuesses.hasOwnProperty(i)) {
				out.push(names[i]);
			}
		}

		return out;
	}

	function rebuildGuess () {

		// use Intl API when available and returning valid time zone
		try {
			var intlName = Intl.DateTimeFormat().resolvedOptions().timeZone;
			if (intlName && intlName.length > 3) {
				var name = names[normalizeName(intlName)];
				if (name) {
					return name;
				}
				logError("Moment Timezone found " + intlName + " from the Intl api, but did not have that data loaded.");
			}
		} catch (e) {
			// Intl unavailable, fall back to manual guessing.
		}

		var offsets = userOffsets(),
			offsetsLength = offsets.length,
			guesses = guessesForUserOffsets(offsets),
			zoneScores = [],
			zoneScore, i, j;

		for (i = 0; i < guesses.length; i++) {
			zoneScore = new ZoneScore(getZone(guesses[i]), offsetsLength);
			for (j = 0; j < offsetsLength; j++) {
				zoneScore.scoreOffsetAt(offsets[j]);
			}
			zoneScores.push(zoneScore);
		}

		zoneScores.sort(sortZoneScores);

		return zoneScores.length > 0 ? zoneScores[0].zone.name : undefined;
	}

	function guess (ignoreCache) {
		if (!cachedGuess || ignoreCache) {
			cachedGuess = rebuildGuess();
		}
		return cachedGuess;
	}

	/************************************
		Global Methods
	************************************/

	function normalizeName (name) {
		return (name || '').toLowerCase().replace(/\//g, '_');
	}

	function addZone (packed) {
		var i, name, split, normalized;

		if (typeof packed === "string") {
			packed = [packed];
		}

		for (i = 0; i < packed.length; i++) {
			split = packed[i].split('|');
			name = split[0];
			normalized = normalizeName(name);
			zones[normalized] = packed[i];
			names[normalized] = name;
			addToGuesses(normalized, split[2].split(' '));
		}
	}

	function getZone (name, caller) {
		
		name = normalizeName(name);

		var zone = zones[name];
		var link;

		if (zone instanceof Zone) {
			return zone;
		}

		if (typeof zone === 'string') {
			zone = new Zone(zone);
			zones[name] = zone;
			return zone;
		}

		// Pass getZone to prevent recursion more than 1 level deep
		if (links[name] && caller !== getZone && (link = getZone(links[name], getZone))) {
			zone = zones[name] = new Zone();
			zone._set(link);
			zone.name = names[name];
			return zone;
		}

		return null;
	}

	function getNames () {
		var i, out = [];

		for (i in names) {
			if (names.hasOwnProperty(i) && (zones[i] || zones[links[i]]) && names[i]) {
				out.push(names[i]);
			}
		}

		return out.sort();
	}

	function addLink (aliases) {
		var i, alias, normal0, normal1;

		if (typeof aliases === "string") {
			aliases = [aliases];
		}

		for (i = 0; i < aliases.length; i++) {
			alias = aliases[i].split('|');

			normal0 = normalizeName(alias[0]);
			normal1 = normalizeName(alias[1]);

			links[normal0] = normal1;
			names[normal0] = alias[0];

			links[normal1] = normal0;
			names[normal1] = alias[1];
		}
	}

	function loadData (data) {
		addZone(data.zones);
		addLink(data.links);
		tz.dataVersion = data.version;
	}

	function zoneExists (name) {
		if (!zoneExists.didShowError) {
			zoneExists.didShowError = true;
				logError("moment.tz.zoneExists('" + name + "') has been deprecated in favor of !moment.tz.zone('" + name + "')");
		}
		return !!getZone(name);
	}

	function needsOffset (m) {
		var isUnixTimestamp = (m._f === 'X' || m._f === 'x');
		return !!(m._a && (m._tzm === undefined) && !isUnixTimestamp);
	}

	function logError (message) {
		if (typeof console !== 'undefined' && typeof console.error === 'function') {
			console.error(message);
		}
	}

	/************************************
		moment.tz namespace
	************************************/

	function tz (input) {
		var args = Array.prototype.slice.call(arguments, 0, -1),
			name = arguments[arguments.length - 1],
			zone = getZone(name),
			out  = moment.utc.apply(null, args);

		if (zone && !moment.isMoment(input) && needsOffset(out)) {
			out.add(zone.parse(out), 'minutes');
		}

		out.tz(name);

		return out;
	}

	tz.version      = VERSION;
	tz.dataVersion  = '';
	tz._zones       = zones;
	tz._links       = links;
	tz._names       = names;
	tz.add          = addZone;
	tz.link         = addLink;
	tz.load         = loadData;
	tz.zone         = getZone;
	tz.zoneExists   = zoneExists; // deprecated in 0.1.0
	tz.guess        = guess;
	tz.names        = getNames;
	tz.Zone         = Zone;
	tz.unpack       = unpack;
	tz.unpackBase60 = unpackBase60;
	tz.needsOffset  = needsOffset;
	tz.moveInvalidForward   = true;
	tz.moveAmbiguousForward = false;

	/************************************
		Interface with Moment.js
	************************************/

	var fn = moment.fn;

	moment.tz = tz;

	moment.defaultZone = null;

	moment.updateOffset = function (mom, keepTime) {
		var zone = moment.defaultZone,
			offset;

		if (mom._z === undefined) {
			if (zone && needsOffset(mom) && !mom._isUTC) {
				mom._d = moment.utc(mom._a)._d;
				mom.utc().add(zone.parse(mom), 'minutes');
			}
			mom._z = zone;
		}
		if (mom._z) {
			offset = mom._z.utcOffset(mom);
			if (Math.abs(offset) < 16) {
				offset = offset / 60;
			}
			if (mom.utcOffset !== undefined) {
				var z = mom._z;
				mom.utcOffset(-offset, keepTime);
				mom._z = z;
			} else {
				mom.zone(offset, keepTime);
			}
		}
	};

	fn.tz = function (name, keepTime) {
		if (name) {
			if (typeof name !== 'string') {
				throw new Error('Time zone name must be a string, got ' + name + ' [' + typeof name + ']');
			}
			this._z = getZone(name);
			if (this._z) {
				moment.updateOffset(this, keepTime);
			} else {
				logError("Moment Timezone has no data for " + name + ". See http://momentjs.com/timezone/docs/#/data-loading/.");
			}
			return this;
		}
		if (this._z) { return this._z.name; }
	};

	function abbrWrap (old) {
		return function () {
			if (this._z) { return this._z.abbr(this); }
			return old.call(this);
		};
	}

	function resetZoneWrap (old) {
		return function () {
			this._z = null;
			return old.apply(this, arguments);
		};
	}

	function resetZoneWrap2 (old) {
		return function () {
			if (arguments.length > 0) this._z = null;
			return old.apply(this, arguments);
		};
	}

	fn.zoneName  = abbrWrap(fn.zoneName);
	fn.zoneAbbr  = abbrWrap(fn.zoneAbbr);
	fn.utc       = resetZoneWrap(fn.utc);
	fn.local     = resetZoneWrap(fn.local);
	fn.utcOffset = resetZoneWrap2(fn.utcOffset);
	
	moment.tz.setDefault = function(name) {
		if (major < 2 || (major === 2 && minor < 9)) {
			logError('Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js ' + moment.version + '.');
		}
		moment.defaultZone = name ? getZone(name) : null;
		return moment;
	};

	// Cloning a moment should include the _z property.
	var momentProperties = moment.momentProperties;
	if (Object.prototype.toString.call(momentProperties) === '[object Array]') {
		// moment 2.8.1+
		momentProperties.push('_z');
		momentProperties.push('_a');
	} else if (momentProperties) {
		// moment 2.7.0
		momentProperties._z = null;
	}

	loadData({
		"version": "2019a",
		"zones": [
			"Africa/Abidjan|GMT|0|0||48e5",
			"Africa/Nairobi|EAT|-30|0||47e5",
			"Africa/Algiers|WET WEST CET CEST|0 -10 -10 -20|01012320102|3bX0 11A0 dDd0 17b0 11B0 1cN0 2Dy0 1cN0 1fB0 1cL0|26e5",
			"Africa/Lagos|WAT|-10|0||17e6",
			"Africa/Bissau|-01 GMT|10 0|01|cap0|39e4",
			"Africa/Maputo|CAT|-20|0||26e5",
			"Africa/Cairo|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|LX0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1WL0 rd0 1Rz0 wp0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1qL0 Xd0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1ny0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 WL0 1qN0 Rb0 1wp0 On0 1zd0 Lz0 1EN0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0|15e6",
			"Africa/Casablanca|+00 +01|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4mn0 SyN0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600|32e5",
			"Africa/Ceuta|WET WEST CET CEST|0 -10 -10 -20|0101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4VB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|85e3",
			"Africa/El_Aaiun|-01 +00 +01|10 0 -10|01212121212121212121212121212121212121212121212121212121212121212121|fi10 6L0 AL0 1Nd0 XX0 1Cp0 pz0 1cBB0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600|20e4",
			"Africa/Johannesburg|SAST|-20|0||84e5",
			"Africa/Juba|CAT CAST EAT|-20 -30 -30|0101010101010101010101010101010102|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0",
			"Africa/Khartoum|CAT CAST EAT|-20 -30 -30|01010101010101010101010101010101020|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0 HjL0|51e5",
			"Africa/Monrovia|MMT GMT|I.u 0|01|4SoI.u|11e5",
			"Africa/Ndjamena|WAT WAST|-10 -20|010|nNb0 Wn0|13e5",
			"Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00",
			"Africa/Tripoli|EET CET CEST|-20 -10 -20|0121212121212121210120120|tda0 A10 1db0 1cN0 1db0 1dd0 1db0 1eN0 1bb0 1e10 1cL0 1c10 1db0 1dd0 1db0 1cN0 1db0 1q10 fAn0 1ep0 1db0 AKq0 TA0 1o00|11e5",
			"Africa/Tunis|CET CEST|-10 -20|0101010101010101010|hOn0 WM0 1rA0 11c0 nwo0 Ko0 1cM0 1cM0 1rA0 10M0 zuM0 10N0 1aN0 1qM0 WM0 1qM0 11A0 1o00|20e5",
			"Africa/Windhoek|SAST CAT WAT|-20 -20 -10|01212121212121212121212121212121212121212121212121|Ndy0 9Io0 16P0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4",
			"America/Adak|BST BDT AHST HST HDT|b0 a0 a0 a0 90|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326",
			"America/Anchorage|AHST AHDT YST AKST AKDT|a0 90 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kc0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4",
			"America/Puerto_Rico|AST|40|0||24e5",
			"America/Araguaina|-03 -02|30 20|01010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 ny10 Lz0|14e4",
			"America/Argentina/Buenos_Aires|-03 -02|30 20|01010101010101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 A4p0 uL0 1qN0 WL0",
			"America/Argentina/Catamarca|-03 -02 -04|30 20 40|01010101210102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 7B0 8zb0 uL0",
			"America/Argentina/Cordoba|-03 -02 -04|30 20 40|01010101210101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0 1qN0 WL0",
			"America/Argentina/Jujuy|-03 -02 -04|30 20 40|010101202101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1ze0 TX0 1ld0 WK0 1wp0 TX0 A4p0 uL0",
			"America/Argentina/La_Rioja|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0",
			"America/Argentina/Mendoza|-03 -02 -04|30 20 40|01010120202102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1u20 SL0 1vd0 Tb0 1wp0 TW0 ri10 Op0 7TX0 uL0",
			"America/Argentina/Rio_Gallegos|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0",
			"America/Argentina/Salta|-03 -02 -04|30 20 40|010101012101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0",
			"America/Argentina/San_Juan|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rld0 m10 8lb0 uL0",
			"America/Argentina/San_Luis|-03 -02 -04|30 20 40|010101202020102020|9Rf0 Db0 zvd0 Bz0 1tB0 XX0 1q20 SL0 AN0 vDb0 m10 8lb0 8L0 jd0 1qN0 WL0 1qN0",
			"America/Argentina/Tucuman|-03 -02 -04|30 20 40|0101010121010201010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 4N0 8BX0 uL0 1qN0 WL0",
			"America/Argentina/Ushuaia|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rkN0 8p0 8zb0 uL0",
			"America/Asuncion|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|6FE0 3CL0 3Dd0 10L0 1pB0 10n0 1pB0 10n0 1pB0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1lB0 14n0 1dd0 1cL0 1fd0 WL0 1rd0 1aL0 1dB0 Xz0 1qp0 Xb0 1qN0 10L0 1rB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 WN0 1qL0 11B0 1nX0 1ip0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 TX0 1tB0 19X0 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0|28e5",
			"America/Panama|EST|50|0||15e5",
			"America/Bahia_Banderas|PST MST MDT CDT CST|80 70 60 50 60|012121212121212121212121212121343434343434343434343434343434343434343434|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|84e3",
			"America/Bahia|-03 -02|30 20|010101010101010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 l5B0 Rb0|27e5",
			"America/Barbados|AST ADT|40 30|010101010|i7G0 IL0 1ip0 17b0 1ip0 17b0 1ld0 13b0|28e4",
			"America/Belem|-03 -02|30 20|0101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0|20e5",
			"America/Belize|CST CDT|60 50|01010|9xG0 qn0 lxB0 mn0|57e3",
			"America/Boa_Vista|-04 -03|40 30|01010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 smp0 WL0 1tB0 2L0|62e2",
			"America/Bogota|-05 -04|50 40|010|Snh0 2en0|90e5",
			"America/Boise|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 Dd0 1Kn0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e4",
			"America/Cambridge_Bay|MST MDT CST CDT EST|70 60 60 50 50|01010101010101010101010101010101010101012342101010101010101010101010101010101010101010101010101010101010|p7J0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11A0 1nX0 2K0 WQ0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e2",
			"America/Campo_Grande|-04 -03|40 30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|77e4",
			"America/Cancun|CST EST EDT CDT|60 50 40 50|012121230303030303030303030303030303030301|t9G0 yLB0 1lb0 14p0 1lb0 14p0 Lz0 xB0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4",
			"America/Caracas|-04 -0430|40 4u|010|1wmv0 kqo0|29e5",
			"America/Cayenne|-03|30|0||58e3",
			"America/Chicago|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5",
			"America/Chihuahua|CST CDT MDT MST|60 50 60 70|01010232323232323232323232323232323232323232323232323232323232323232323|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|81e4",
			"America/Costa_Rica|CST CDT|60 50|010101010|mgS0 Db0 1Kp0 Db0 pRB0 15b0 1kp0 mL0|12e5",
			"America/Phoenix|MST|70|0||42e5",
			"America/Cuiaba|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 4a10 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|54e4",
			"America/Danmarkshavn|-03 -02 GMT|30 20 0|0101010101010101010101010101010102|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 DC0|8",
			"America/Dawson_Creek|PST PDT MST|80 70 70|0101012|Ka0 1cL0 1cN0 1fz0 1cN0 ML0|12e3",
			"America/Dawson|YST PST PDT|90 80 70|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|9ix0 fNd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|13e2",
			"America/Denver|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5",
			"America/Detroit|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|85H0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e5",
			"America/Edmonton|MST MDT|70 60|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E90 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|10e5",
			"America/Eirunepe|-05 -04|50 40|01010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0 yTd0 d5X0|31e3",
			"America/El_Salvador|CST CDT|60 50|01010|Gcu0 WL0 1qN0 WL0|11e5",
			"America/Tijuana|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fmy0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|20e5",
			"America/Fort_Nelson|PST PDT MST|80 70 70|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010102|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2",
			"America/Fort_Wayne|EST EDT|50 40|01010101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Fortaleza|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 5z0 2mN0 On0|34e5",
			"America/Glace_Bay|AST ADT|40 30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E60 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3",
			"America/Godthab|-03 -02|30 20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e3",
			"America/Goose_Bay|AST ADT ADDT|40 30 20|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|76e2",
			"America/Grand_Turk|EST EDT AST|50 40 40|01010101010101010101010101010101010101010101010101010101010101010101010101210101010101010101010101010|mG70 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2",
			"America/Guatemala|CST CDT|60 50|010101010|9tG0 An0 mtd0 Nz0 ifB0 17b0 zDB0 11z0|13e5",
			"America/Guayaquil|-05 -04|50 40|010|TKR0 rz0|27e5",
			"America/Guyana|-0345 -03 -04|3J 30 40|012|dyPJ Bxbf|80e4",
			"America/Halifax|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4",
			"America/Havana|CST CDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K50 1cL0 1cN0 1fz0 1cN0 14n0 1ld0 14L0 1kN0 15b0 1kp0 1cL0 1cN0 1fz0 1a10 1fz0 1fB0 11z0 14p0 1nX0 11B0 1nX0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 1a10 1in0 1a10 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 17c0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 11A0 6i00 Rc0 1wo0 U00 1tA0 Rc0 1wo0 U00 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5",
			"America/Hermosillo|PST MST MDT|80 70 60|01212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0|64e4",
			"America/Indiana/Knox|CST CDT EST|60 50 50|01010101010101010101010101010101010101010101210101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 z8o0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Marengo|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1e6p0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Petersburg|CST CDT EST EDT|60 50 50 40|0101010101010101210123232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 19co0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Tell_City|EST EDT CDT CST|50 40 50 60|01023232323232323232323232323232323232323232323232323|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Vevay|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1lnd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Vincennes|EST EDT CDT CST|50 40 50 60|01023201010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Winamac|EST EDT CDT CST|50 40 50 60|01023101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1za0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Inuvik|PST MST MDT|80 70 60|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|mGa0 2pz0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|35e2",
			"America/Iqaluit|EST EDT CST CDT|50 40 60 50|0101010101010101010101010101010101010101230101010101010101010101010101010101010101010101010101010101010|p7H0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|67e2",
			"America/Jamaica|EST EDT|50 40|010101010101010101010|9Kv0 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0|94e4",
			"America/Juneau|PST PDT YDT YST AKST AKDT|80 70 80 90 90 80|0101010101010101010102010101345454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cM0 1cM0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|33e3",
			"America/Kentucky/Louisville|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Kentucky/Monticello|CST CDT EST EDT|60 50 50 40|010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/La_Paz|-04|40|0||19e5",
			"America/Lima|-05 -04|50 40|010101010|CVF0 zX0 1O10 zX0 6Gp0 zX0 98p0 zX0|11e6",
			"America/Los_Angeles|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6",
			"America/Maceio|-03 -02|30 20|0101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 8Q10 WL0 1tB0 5z0 2mN0 On0|93e4",
			"America/Managua|CST EST CDT|60 50 50|010202010102020|86u0 4mn0 9Up0 Dz0 1K10 Dz0 s3F0 1KH0 DB0 9In0 k8p0 19X0 1o30 11y0|22e5",
			"America/Manaus|-04 -03|40 30|010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0|19e5",
			"America/Martinique|AST ADT|40 30|010|oXg0 19X0|39e4",
			"America/Matamoros|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|45e4",
			"America/Mazatlan|PST MST MDT|80 70 60|012121212121212121212121212121212121212121212121212121212121212121212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|44e4",
			"America/Menominee|EST CDT CST|50 50 60|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|85H0 1cM0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|85e2",
			"America/Merida|CST EST CDT|60 50 50|0102020202020202020202020202020202020202020202020202020202020202020202020|t9G0 2hz0 wu30 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|11e5",
			"America/Metlakatla|PST PDT AKST AKDT|80 70 90 80|0101010101010101010101010101023232302323232323232323232323232|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1hU10 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2",
			"America/Mexico_City|CST CDT|60 50|01010101010101010101010101010101010101010101010101010101010101010101010|13Vk0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|20e6",
			"America/Miquelon|AST -03 -02|40 30 20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|p9g0 gQ10 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2",
			"America/Moncton|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14n1 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 ReX 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|64e3",
			"America/Monterrey|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|41e5",
			"America/Montevideo|-03 -02 -0130 -0230|30 20 1u 2u|0101023010101010101010101010101010101010101010101010|JD0 jX0 4vB0 xz0 3Cp0 mmu 1a10 IMu Db0 4c10 uL0 1Nd0 An0 1SN0 uL0 mp0 28L0 iPB0 un0 1SN0 xz0 1zd0 Lz0 1zd0 Rb0 1zd0 On0 1wp0 Rb0 s8p0 1fB0 1ip0 11z0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0|17e5",
			"America/Toronto|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e5",
			"America/New_York|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6",
			"America/Nipigon|EST EDT|50 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avj0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|16e2",
			"America/Nome|BST BDT YST AKST AKDT|b0 a0 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cl0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|38e2",
			"America/Noronha|-02 -01|20 10|01010101010101010|CxC0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|30e2",
			"America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010123232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/North_Dakota/Center|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/North_Dakota/New_Salem|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Ojinaga|CST CDT MDT MST|60 50 60 70|01010232323232323232323232323232323232323232323232323232323232323232323|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3",
			"America/Pangnirtung|AST ADT EDT EST CST CDT|40 30 40 50 60 50|0101010101010101010101010101010232323232453232323232323232323232323232323232323232323232323232323232323|p7G0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1o00 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2",
			"America/Paramaribo|-0330 -03|3u 30|01|zSPu|24e4",
			"America/Port-au-Prince|EST EDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010|wu50 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14q0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 i6n0 1nX0 11B0 1nX0 d430 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5",
			"America/Rio_Branco|-05 -04|50 40|010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0 d5X0|31e4",
			"America/Porto_Velho|-04 -03|40 30|0101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0|37e4",
			"America/Punta_Arenas|-03 -04|30 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0",
			"America/Rainy_River|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avk0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|842",
			"America/Rankin_Inlet|CST CDT EST|60 50 50|0101010101010101010101010101010101010101012101010101010101010101010101010101010101010101010101010101010|p7I0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e2",
			"America/Recife|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|33e5",
			"America/Regina|CST|60|0||19e4",
			"America/Resolute|CST CDT EST|60 50 50|0101010101010101010101010101010101010101012101010101012101010101010101010101010101010101010101010101010|p7I0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|229",
			"America/Santarem|-04 -03|40 30|01010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0|21e4",
			"America/Santiago|-03 -04|30 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|62e5",
			"America/Santo_Domingo|-0430 EST AST|4u 50 40|0101010101212|ksu 1Cou yLu 1RAu wLu 1QMu xzu 1Q0u xXu 1PAu 13jB0 e00|29e5",
			"America/Sao_Paulo|-03 -02|30 20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|20e6",
			"America/Scoresbysund|-02 -01 +00|20 10 0|0102121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|oXg0 1a00 1cK0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|452",
			"America/Sitka|PST PDT YST AKST AKDT|80 70 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|90e2",
			"America/St_Johns|NST NDT NDDT|3u 2u 1u|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K5u 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4",
			"America/Swift_Current|MST CST|70 60|01|5E90|16e3",
			"America/Tegucigalpa|CST CDT|60 50|0101010|Gcu0 WL0 1qN0 WL0 GRd0 AL0|11e5",
			"America/Thule|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010|PHG0 1cL0 1cN0 1cL0 1fB0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|656",
			"America/Thunder_Bay|EST EDT|50 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4",
			"America/Vancouver|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5",
			"America/Whitehorse|PST PDT|80 70|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|p7K0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3",
			"America/Winnipeg|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|66e4",
			"America/Yakutat|YST YDT AKST AKDT|90 80 90 80|0101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|Kb0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cn0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|642",
			"America/Yellowknife|MST MDT|70 60|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|p7J0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3",
			"Antarctica/Casey|+08 +11|-80 -b0|0101010|1ARS0 T90 40P0 KL0 blz0 3m10|10",
			"Antarctica/Davis|+07 +05|-70 -50|01010|1ART0 VB0 3Wn0 KN0|70",
			"Pacific/Port_Moresby|+10|-a0|0||25e4",
			"Antarctica/Macquarie|AEDT AEST +11|-b0 -a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010102|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0|1",
			"Antarctica/Mawson|+06 +05|-60 -50|01|1ARU0|60",
			"Pacific/Auckland|NZST NZDT|-c0 -d0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|14e5",
			"Antarctica/Palmer|-03 -02 -04|30 20 40|01020202020202020202020202020202020202020202020202020202020202020202020|9Rf0 Db0 jsN0 14N0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40",
			"Antarctica/Rothera|-00 -03|0 30|01|gOo0|130",
			"Asia/Riyadh|+03|-30|0||57e5",
			"Antarctica/Troll|-00 +00 +02|0 0 -20|012121212121212121212121212121212121212121212121212121|1puo0 hd0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|40",
			"Asia/Urumqi|+06|-60|0||32e5",
			"Europe/Berlin|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXd0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e5",
			"Asia/Almaty|+06 +07 +05|-60 -70 -50|0101010101010101010102010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|15e5",
			"Asia/Amman|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|8kK0 KL0 1oN0 11b0 1oN0 11b0 1pd0 1dz0 1cp0 11b0 1op0 11b0 fO10 1db0 1e10 1cL0 1cN0 1cL0 1cN0 1fz0 1pd0 10n0 1ld0 14n0 1hB0 15b0 1ip0 19X0 1cN0 1cL0 1cN0 17b0 1ld0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1So0 y00 1fc0 1dc0 1co0 1dc0 1cM0 1cM0 1cM0 1o00 11A0 1lc0 17c0 1cM0 1cM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|25e5",
			"Asia/Anadyr|+13 +14 +12 +11|-d0 -e0 -c0 -b0|010202020202020202023202020202020202020202020202020202020232|rmX0 1db0 2q10 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|13e3",
			"Asia/Aqtau|+05 +06 +04|-50 -60 -40|0101010101010101010201010120202020202020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|15e4",
			"Asia/Aqtobe|+05 +06 +04|-50 -60 -40|01010101010101010102010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|27e4",
			"Asia/Ashgabat|+05 +06 +04|-50 -60 -40|01010101010101010101020|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0|41e4",
			"Asia/Atyrau|+05 +06 +04|-50 -60 -40|010101010101010101020101010101010102020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 2sp0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0",
			"Asia/Baghdad|+03 +04|-30 -40|01010101010101010101010101010101010101010101010101010|u190 11b0 1cp0 1dz0 1dd0 1db0 1cN0 1cp0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1de0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0|66e5",
			"Asia/Qatar|+04 +03|-40 -30|01|5QI0|96e4",
			"Asia/Baku|+04 +05 +03|-40 -50 -30|010101010101010101010201010101010101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 9Je0 1o00 11z0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5",
			"Asia/Bangkok|+07|-70|0||15e6",
			"Asia/Barnaul|+07 +08 +06|-70 -80 -60|01010101010101010101020101010102020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 p90 LE0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0",
			"Asia/Beirut|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|61a0 En0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1op0 11b0 dA10 17b0 1iN0 17b0 1iN0 17b0 1iN0 17b0 1vB0 SL0 1mp0 13z0 1iN0 17b0 1iN0 17b0 1jd0 12n0 1a10 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|22e5",
			"Asia/Bishkek|+06 +07 +05|-60 -70 -50|0101010101010101010102020202020202020202020202020|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2e00 1tX0 17b0 1ip0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1cPu 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|87e4",
			"Asia/Brunei|+08|-80|0||42e4",
			"Asia/Kolkata|IST|-5u|0||15e6",
			"Asia/Chita|+09 +10 +08|-90 -a0 -80|0101010101010101010102010101010101010101010101010101010101010120|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3re0|33e4",
			"Asia/Choibalsan|+07 +08 +10 +09|-70 -80 -a0 -90|012323232323232323232323232323232323232323232313131|jsF0 cKn0 1da0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 3Db0 h1f0 1cJ0 1cP0 1cJ0|38e3",
			"Asia/Shanghai|CST CDT|-80 -90|0101010101010|DKG0 Rb0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6",
			"Asia/Colombo|+0530 +0630 +06|-5u -6u -60|0120|14giu 11zu n3cu|22e5",
			"Asia/Dhaka|+06 +07|-60 -70|010|1A5R0 1i00|16e6",
			"Asia/Damascus|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|M00 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 Nb0 1AN0 Nb0 bcp0 19X0 1gp0 19X0 3ld0 1xX0 Vd0 1Bz0 Sp0 1vX0 10p0 1dz0 1cN0 1cL0 1db0 1db0 1g10 1an0 1ap0 1db0 1fd0 1db0 1cN0 1db0 1dd0 1db0 1cp0 1dz0 1c10 1dX0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 19z0 1fB0 1qL0 11B0 1on0 Wp0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0|26e5",
			"Asia/Dili|+09 +08|-90 -80|010|fpr0 Xld0|19e4",
			"Asia/Dubai|+04|-40|0||39e5",
			"Asia/Dushanbe|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2hB0|76e4",
			"Asia/Famagusta|EET EEST +03|-20 -30 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101012010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00",
			"Asia/Gaza|IST IDT EET EEST|-20 -30 -20 -30|010101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 11z0 1o10 14o0 1lA1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|18e5",
			"Asia/Hebron|IST IDT EET EEST|-20 -30 -20 -30|01010101010101010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 12L0 1mN0 14o0 1lc0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|25e4",
			"Asia/Ho_Chi_Minh|+08 +07|-80 -70|01|dfs0|90e5",
			"Asia/Hong_Kong|HKT HKST|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|73e5",
			"Asia/Hovd|+06 +07 +08|-60 -70 -80|01212121212121212121212121212121212121212121212121|jsG0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|81e3",
			"Asia/Irkutsk|+08 +09 +07|-80 -90 -70|010101010101010101010201010101010101010101010101010101010101010|rn40 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4",
			"Europe/Istanbul|EET EEST +04 +03|-20 -30 -40 -30|01010101010101010123232323231010101010101010101010101010101010101010101010101010101010101013|MK0 11z0 1o10 11z0 1qN0 11z0 1ze0 11B0 WM0 1qO0 WI0 1nX0 1rB0 10L0 11B0 1in0 17d0 1in0 2pX0 19E0 1fU0 16Q0 1iI0 16Q0 1iI0 1Vd0 pb0 3Kp0 14o0 1de0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1a00 1fA0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6",
			"Asia/Jakarta|WIB|-70|0||31e6",
			"Asia/Jayapura|WIT|-90|0||26e4",
			"Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 1hB0 1dX0 1ep0 1aL0 1eN0 17X0 1nf0 11z0 1tB0 19W0 1e10 17b0 1ep0 1gL0 18N0 1fz0 1eN0 17b0 1gq0 1gn0 19d0 1dz0 1c10 17X0 1hB0 1gn0 19d0 1dz0 1c10 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0|81e4",
			"Asia/Kabul|+0430|-4u|0||46e5",
			"Asia/Kamchatka|+12 +13 +11|-c0 -d0 -b0|0101010101010101010102010101010101010101010101010101010101020|rn00 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|18e4",
			"Asia/Karachi|+05 PKT PKST|-50 -50 -60|01212121|2Xv0 1fy00 1cL0 dK10 11b0 1610 1jX0|24e6",
			"Asia/Kathmandu|+0530 +0545|-5u -5J|01|CVuu|12e5",
			"Asia/Khandyga|+09 +10 +08 +11|-90 -a0 -80 -b0|01010101010101010101020101010101010101010101010131313131313131310|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 qK0 yN0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|66e2",
			"Asia/Krasnoyarsk|+07 +08 +06|-70 -80 -60|010101010101010101010201010101010101010101010101010101010101010|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|10e5",
			"Asia/Kuala_Lumpur|+0730 +08|-7u -80|01|td4u|71e5",
			"Asia/Macau|CST CDT|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|57e4",
			"Asia/Magadan|+11 +12 +10|-b0 -c0 -a0|0101010101010101010102010101010101010101010101010101010101010120|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Cq0|95e3",
			"Asia/Makassar|WITA|-80|0||15e5",
			"Asia/Manila|PST PDT|-80 -90|010|k0E0 1db0|24e6",
			"Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|32e4",
			"Asia/Novokuznetsk|+07 +08 +06|-70 -80 -60|0101010101010101010102010101010101010101010101010101010101020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|55e4",
			"Asia/Novosibirsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101020202020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 ml0 Os0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 4eN0|15e5",
			"Asia/Omsk|+06 +07 +05|-60 -70 -50|010101010101010101010201010101010101010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|12e5",
			"Asia/Oral|+05 +06 +04|-50 -60 -40|010101010101010202020202020202020202020202020|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 1cM0 IM0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|27e4",
			"Asia/Pontianak|WITA WIB|-80 -70|01|HNs0|23e4",
			"Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5",
			"Asia/Qostanay|+05 +06 +04|-50 -60 -40|0101010101010101010201010101010101010101010101|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0",
			"Asia/Qyzylorda|+05 +06|-50 -60|010101010101010101010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 3ao0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 zQl0|73e4",
			"Asia/Rangoon|+0630|-6u|0||48e5",
			"Asia/Sakhalin|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010202020202020202020202020202020|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 2pB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|58e4",
			"Asia/Samarkand|+05 +06|-50 -60|010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|36e4",
			"Asia/Seoul|KST KDT|-90 -a0|01010|Gf50 11A0 1o00 11A0|23e6",
			"Asia/Srednekolymsk|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010101010101010101010101010101010|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|35e2",
			"Asia/Taipei|CST CDT|-80 -90|0101010|akg0 1db0 1cN0 1db0 97B0 AL0|74e5",
			"Asia/Tashkent|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0|23e5",
			"Asia/Tbilisi|+04 +05 +03|-40 -50 -30|01010101010101010101020202010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cK0 1cL0 1cN0 1cL0 1cN0 2pz0 1cL0 1fB0 3Nz0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 An0 Os0 WM0|11e5",
			"Asia/Tehran|+0330 +04 +05 +0430|-3u -40 -50 -4u|0121030303030303030303030303030303030303030303030303030303030303030303030303030303030|j4ku TXu 1pz0 sN0 vAu 1cL0 1dB0 1en0 pNB0 UL0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 64p0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0|14e6",
			"Asia/Thimphu|+0530 +06|-5u -60|01|HcGu|79e3",
			"Asia/Tokyo|JST|-90|0||38e6",
			"Asia/Tomsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101010101010101010101020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 co0 1bB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Qp0|10e5",
			"Asia/Ulaanbaatar|+07 +08 +09|-70 -80 -90|01212121212121212121212121212121212121212121212121|jsF0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|12e5",
			"Asia/Ust-Nera|+09 +12 +11 +10|-90 -c0 -b0 -a0|0121212121212121212123212121212121212121212121212121212121212123|rn30 1d90 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|65e2",
			"Asia/Vladivostok|+10 +11 +09|-a0 -b0 -90|010101010101010101010201010101010101010101010101010101010101010|rn20 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4",
			"Asia/Yakutsk|+09 +10 +08|-90 -a0 -80|010101010101010101010201010101010101010101010101010101010101010|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|28e4",
			"Asia/Yekaterinburg|+05 +06 +04|-50 -60 -40|010101010101010101010201010101010101010101010101010101010101010|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|14e5",
			"Asia/Yerevan|+04 +05 +03|-40 -50 -30|01010101010101010101020202020101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 4RX0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|13e5",
			"Atlantic/Azores|-01 +00 WET|10 0 0|0101010101010101010101010101010121010101010101010101010101010101010101010101010101010101010101010101010101010|hAN0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|25e4",
			"Atlantic/Bermuda|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avi0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e3",
			"Atlantic/Canary|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXc0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4",
			"Atlantic/Cape_Verde|-02 -01|20 10|01|elE0|50e4",
			"Atlantic/Faroe|WET WEST|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|49e3",
			"Atlantic/Madeira|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hAM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e4",
			"Atlantic/South_Georgia|-02|20|0||30",
			"Atlantic/Stanley|-04 -03 -02|40 30 20|01212101010101010101010101010101010101010101010101010101|wrg0 WL0 1qL0 U10 1tz0 2mN0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 U10 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qN0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 U10 1tz0 U10 1tz0 U10|21e2",
			"Australia/Sydney|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|40e5",
			"Australia/Adelaide|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 WM0 1qM0 Rc0 1zc0 U00 1tA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|11e5",
			"Australia/Brisbane|AEST AEDT|-a0 -b0|010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0|20e5",
			"Australia/Broken_Hill|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|18e3",
			"Australia/Currie|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|746",
			"Australia/Darwin|ACST|-9u|0||12e4",
			"Australia/Eucla|+0845 +0945|-8J -9J|0101010101010|bHRf Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|368",
			"Australia/Hobart|AEDT AEST|-b0 -a0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|21e4",
			"Australia/Lord_Howe|AEST +1030 +1130 +11|-a0 -au -bu -b0|01212121213131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|raC0 1zdu Rb0 1zd0 On0 1zd0 On0 1zd0 On0 1zd0 TXu 1qMu WLu 1tAu WLu 1tAu TXu 1tAu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu 11zu 1o0u 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 11Au 1nXu 1qMu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu 11zu 1o0u WLu 1qMu 14nu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu|347",
			"Australia/Lindeman|AEST AEDT|-a0 -b0|0101010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0|10",
			"Australia/Melbourne|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|39e5",
			"Australia/Perth|AWST AWDT|-80 -90|0101010101010|bHS0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|18e5",
			"Europe/Brussels|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|21e5",
			"Pacific/Easter|-06 -07 -05|60 70 50|010101010101010101010101020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 2pA0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|30e2",
			"EET|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00",
			"Europe/Dublin|IST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Etc/GMT-1|+01|-10|0|",
			"Pacific/Guadalcanal|+11|-b0|0||11e4",
			"Pacific/Tarawa|+12|-c0|0||29e3",
			"Etc/GMT-13|+13|-d0|0|",
			"Etc/GMT-14|+14|-e0|0|",
			"Etc/GMT-2|+02|-20|0|",
			"Indian/Maldives|+05|-50|0||35e4",
			"Pacific/Palau|+09|-90|0||21e3",
			"Etc/GMT+1|-01|10|0|",
			"Pacific/Tahiti|-10|a0|0||18e4",
			"Etc/GMT+11|-11|b0|0|",
			"Etc/GMT+12|-12|c0|0|",
			"Etc/GMT+5|-05|50|0|",
			"Etc/GMT+6|-06|60|0|",
			"Etc/GMT+7|-07|70|0|",
			"Etc/GMT+8|-08|80|0|",
			"Pacific/Gambier|-09|90|0||125",
			"Etc/UTC|UTC|0|0|",
			"Europe/Andorra|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|B7d0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|79e3",
			"Europe/Astrakhan|+04 +05 +03|-40 -50 -30|0101010101010101020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|10e5",
			"Europe/Athens|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cOK0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|35e5",
			"Europe/London|BST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|10e6",
			"Europe/Belgrade|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|wdd0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Europe/Prague|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muN0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|13e5",
			"Europe/Bucharest|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|mRa0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|19e5",
			"Europe/Budapest|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXc0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5",
			"Europe/Zurich|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|38e4",
			"Europe/Chisinau|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010101012323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 gL0 WO0 1cM0 1cM0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11D0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|67e4",
			"Europe/Gibraltar|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|tLB0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|30e3",
			"Europe/Helsinki|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm00 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Europe/Kaliningrad|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010102323232323232323232323232323232323232323232343|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|44e4",
			"Europe/Kiev|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 Db0 3220 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|34e5",
			"Europe/Kirov|+04 +05 +03|-40 -50 -30|010101010101010102020202020202020202020202020202020202020202|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|48e4",
			"Europe/Lisbon|CET WET WEST CEST|-10 0 -10 -20|01212121212121212121212121212121203030302121212121212121212121212121212121212121212121212121212121212121212121|go00 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e5",
			"Europe/Madrid|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|apy0 1a10 1fz0 1a10 19X0 1cN0 1fz0 1a10 1fC0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|62e5",
			"Europe/Malta|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1co0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4",
			"Europe/Minsk|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010101023232323232323232323232323232323232323234|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fc0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0|19e5",
			"Europe/Paris|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fbc0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e6",
			"Europe/Moscow|MSK MSD EEST EET MSK|-30 -40 -30 -20 -40|0101010101010101010102301010101010101010101010101010101010101040|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|16e6",
			"Europe/Riga|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|64e4",
			"Europe/Rome|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1C00 LA0 1zc0 Oo0 1C00 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|39e5",
			"Europe/Samara|+04 +05 +03|-40 -50 -30|01010101010101010202010101010101010101010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2y10 14m0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|12e5",
			"Europe/Saratov|+04 +05 +03|-40 -50 -30|0101010101010102020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 5810",
			"Europe/Simferopol|MSK MSD EET EEST MSK|-30 -40 -20 -30 -40|0101010101010101010232323101010323232323232323232323232323232323240|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 4eL0 1cL0 1cN0 1cL0 1cN0 dX0 WL0 1cN0 1cL0 1fB0 1o30 11B0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0|33e4",
			"Europe/Sofia|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muJ0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Europe/Tallinn|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e4",
			"Europe/Tirane|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|axz0 10n0 1op0 11z0 1pd0 11z0 1qN0 WL0 1qp0 Xb0 1qp0 Xb0 1qp0 11z0 1lB0 11z0 1qN0 11z0 1iN0 16n0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4",
			"Europe/Ulyanovsk|+04 +05 +03 +02|-40 -50 -30 -20|010101010101010102023202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|13e5",
			"Europe/Uzhgorod|MSK MSD CET EET EEST|-30 -40 -10 -20 -30|010101010101010101023434343434343434343434343434343434343434343434343434343434343434343434343434343|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 1Nf0 2pw0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e4",
			"Europe/Vienna|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXb0 19X0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|18e5",
			"Europe/Vilnius|MSK MSD EEST EET CEST CET|-30 -40 -30 -20 -20 -10|01010101010101010232323232323232323454323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4",
			"Europe/Volgograd|+04 +05 +03|-40 -50 -30|0101010101010102020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 9Jd0|10e5",
			"Europe/Warsaw|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5",
			"Europe/Zaporozhye|MSK MSD EEST EET|-30 -40 -30 -20|01010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cK0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|77e4",
			"Pacific/Honolulu|HST|a0|0||37e4",
			"Indian/Chagos|+05 +06|-50 -60|01|13ij0|30e2",
			"Indian/Mauritius|+04 +05|-40 -50|01010|v5U0 14L0 12kr0 11z0|15e4",
			"Pacific/Kwajalein|-12 +12|c0 -c0|01|Vxo0|14e3",
			"MET|MET MEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00",
			"Pacific/Chatham|+1245 +1345|-cJ -dJ|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|600",
			"Pacific/Apia|-11 -10 +14 +13|b0 a0 -e0 -d0|0101232323232323232323232323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|37e3",
			"Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4",
			"Pacific/Efate|+11 +12|-b0 -c0|010101010101010101010|xpN0 1cL0 1oN0 10L0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 Lz0 1Nd0 An0|66e3",
			"Pacific/Enderbury|-12 -11 +13|c0 b0 -d0|012|nIc0 B7X0|1",
			"Pacific/Fakaofo|-11 +13|b0 -d0|01|1Gfn0|483",
			"Pacific/Fiji|+12 +13|-c0 -d0|010101010101010101010101010101010101010101010101|1ace0 LA0 1EM0 IM0 nJc0 LA0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0|88e4",
			"Pacific/Galapagos|-05 -06|50 60|0101|CVF0 gNd0 rz0|25e3",
			"Pacific/Guam|GST GDT ChST|-a0 -b0 -a0|010101010102|JQ0 Rb0 1wp0 Rb0 5xd0 rX0 5sN0 zb1 1C0X On0 ULb0|17e4",
			"Pacific/Kiritimati|-1040 -10 +14|aE a0 -e0|012|nIaE B7Xk|51e2",
			"Pacific/Kosrae|+12 +11|-c0 -b0|01|1aAA0|66e2",
			"Pacific/Marquesas|-0930|9u|0||86e2",
			"Pacific/Pago_Pago|SST|b0|0||37e2",
			"Pacific/Nauru|+1130 +12|-bu -c0|01|maCu|10e3",
			"Pacific/Niue|-1130 -11|bu b0|01|libu|12e2",
			"Pacific/Norfolk|+1130 +1230 +11|-bu -cu -b0|0102|bHOu On0 1COp0|25e4",
			"Pacific/Noumea|+11 +12|-b0 -c0|0101010|jhp0 xX0 1PB0 yn0 HeP0 Ao0|98e3",
			"Pacific/Pitcairn|-0830 -08|8u 80|01|18Vku|56",
			"Pacific/Rarotonga|-1030 -0930 -10|au 9u a0|012121212121212121212121212|lyWu IL0 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu|13e3",
			"Pacific/Tongatapu|+13 +14|-d0 -e0|010101010|1csd0 15A0 1wo0 xz0 1Q10 xz0 zWN0 s00|75e3",
			"WET|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00"
		],
		"links": [
			"Africa/Abidjan|Africa/Accra",
			"Africa/Abidjan|Africa/Bamako",
			"Africa/Abidjan|Africa/Banjul",
			"Africa/Abidjan|Africa/Conakry",
			"Africa/Abidjan|Africa/Dakar",
			"Africa/Abidjan|Africa/Freetown",
			"Africa/Abidjan|Africa/Lome",
			"Africa/Abidjan|Africa/Nouakchott",
			"Africa/Abidjan|Africa/Ouagadougou",
			"Africa/Abidjan|Africa/Timbuktu",
			"Africa/Abidjan|Atlantic/Reykjavik",
			"Africa/Abidjan|Atlantic/St_Helena",
			"Africa/Abidjan|Etc/GMT",
			"Africa/Abidjan|Etc/GMT+0",
			"Africa/Abidjan|Etc/GMT-0",
			"Africa/Abidjan|Etc/GMT0",
			"Africa/Abidjan|Etc/Greenwich",
			"Africa/Abidjan|GMT",
			"Africa/Abidjan|GMT+0",
			"Africa/Abidjan|GMT-0",
			"Africa/Abidjan|GMT0",
			"Africa/Abidjan|Greenwich",
			"Africa/Abidjan|Iceland",
			"Africa/Cairo|Egypt",
			"Africa/Johannesburg|Africa/Maseru",
			"Africa/Johannesburg|Africa/Mbabane",
			"Africa/Lagos|Africa/Bangui",
			"Africa/Lagos|Africa/Brazzaville",
			"Africa/Lagos|Africa/Douala",
			"Africa/Lagos|Africa/Kinshasa",
			"Africa/Lagos|Africa/Libreville",
			"Africa/Lagos|Africa/Luanda",
			"Africa/Lagos|Africa/Malabo",
			"Africa/Lagos|Africa/Niamey",
			"Africa/Lagos|Africa/Porto-Novo",
			"Africa/Maputo|Africa/Blantyre",
			"Africa/Maputo|Africa/Bujumbura",
			"Africa/Maputo|Africa/Gaborone",
			"Africa/Maputo|Africa/Harare",
			"Africa/Maputo|Africa/Kigali",
			"Africa/Maputo|Africa/Lubumbashi",
			"Africa/Maputo|Africa/Lusaka",
			"Africa/Nairobi|Africa/Addis_Ababa",
			"Africa/Nairobi|Africa/Asmara",
			"Africa/Nairobi|Africa/Asmera",
			"Africa/Nairobi|Africa/Dar_es_Salaam",
			"Africa/Nairobi|Africa/Djibouti",
			"Africa/Nairobi|Africa/Kampala",
			"Africa/Nairobi|Africa/Mogadishu",
			"Africa/Nairobi|Indian/Antananarivo",
			"Africa/Nairobi|Indian/Comoro",
			"Africa/Nairobi|Indian/Mayotte",
			"Africa/Tripoli|Libya",
			"America/Adak|America/Atka",
			"America/Adak|US/Aleutian",
			"America/Anchorage|US/Alaska",
			"America/Argentina/Buenos_Aires|America/Buenos_Aires",
			"America/Argentina/Catamarca|America/Argentina/ComodRivadavia",
			"America/Argentina/Catamarca|America/Catamarca",
			"America/Argentina/Cordoba|America/Cordoba",
			"America/Argentina/Cordoba|America/Rosario",
			"America/Argentina/Jujuy|America/Jujuy",
			"America/Argentina/Mendoza|America/Mendoza",
			"America/Cayenne|Etc/GMT+3",
			"America/Chicago|CST6CDT",
			"America/Chicago|US/Central",
			"America/Denver|America/Shiprock",
			"America/Denver|MST7MDT",
			"America/Denver|Navajo",
			"America/Denver|US/Mountain",
			"America/Detroit|US/Michigan",
			"America/Edmonton|Canada/Mountain",
			"America/Fort_Wayne|America/Indiana/Indianapolis",
			"America/Fort_Wayne|America/Indianapolis",
			"America/Fort_Wayne|US/East-Indiana",
			"America/Halifax|Canada/Atlantic",
			"America/Havana|Cuba",
			"America/Indiana/Knox|America/Knox_IN",
			"America/Indiana/Knox|US/Indiana-Starke",
			"America/Jamaica|Jamaica",
			"America/Kentucky/Louisville|America/Louisville",
			"America/La_Paz|Etc/GMT+4",
			"America/Los_Angeles|PST8PDT",
			"America/Los_Angeles|US/Pacific",
			"America/Los_Angeles|US/Pacific-New",
			"America/Manaus|Brazil/West",
			"America/Mazatlan|Mexico/BajaSur",
			"America/Mexico_City|Mexico/General",
			"America/New_York|EST5EDT",
			"America/New_York|US/Eastern",
			"America/Noronha|Brazil/DeNoronha",
			"America/Panama|America/Atikokan",
			"America/Panama|America/Cayman",
			"America/Panama|America/Coral_Harbour",
			"America/Panama|EST",
			"America/Phoenix|America/Creston",
			"America/Phoenix|MST",
			"America/Phoenix|US/Arizona",
			"America/Puerto_Rico|America/Anguilla",
			"America/Puerto_Rico|America/Antigua",
			"America/Puerto_Rico|America/Aruba",
			"America/Puerto_Rico|America/Blanc-Sablon",
			"America/Puerto_Rico|America/Curacao",
			"America/Puerto_Rico|America/Dominica",
			"America/Puerto_Rico|America/Grenada",
			"America/Puerto_Rico|America/Guadeloupe",
			"America/Puerto_Rico|America/Kralendijk",
			"America/Puerto_Rico|America/Lower_Princes",
			"America/Puerto_Rico|America/Marigot",
			"America/Puerto_Rico|America/Montserrat",
			"America/Puerto_Rico|America/Port_of_Spain",
			"America/Puerto_Rico|America/St_Barthelemy",
			"America/Puerto_Rico|America/St_Kitts",
			"America/Puerto_Rico|America/St_Lucia",
			"America/Puerto_Rico|America/St_Thomas",
			"America/Puerto_Rico|America/St_Vincent",
			"America/Puerto_Rico|America/Tortola",
			"America/Puerto_Rico|America/Virgin",
			"America/Regina|Canada/Saskatchewan",
			"America/Rio_Branco|America/Porto_Acre",
			"America/Rio_Branco|Brazil/Acre",
			"America/Santiago|Chile/Continental",
			"America/Sao_Paulo|Brazil/East",
			"America/St_Johns|Canada/Newfoundland",
			"America/Tijuana|America/Ensenada",
			"America/Tijuana|America/Santa_Isabel",
			"America/Tijuana|Mexico/BajaNorte",
			"America/Toronto|America/Montreal",
			"America/Toronto|America/Nassau",
			"America/Toronto|Canada/Eastern",
			"America/Vancouver|Canada/Pacific",
			"America/Whitehorse|Canada/Yukon",
			"America/Winnipeg|Canada/Central",
			"Asia/Ashgabat|Asia/Ashkhabad",
			"Asia/Bangkok|Asia/Phnom_Penh",
			"Asia/Bangkok|Asia/Vientiane",
			"Asia/Bangkok|Etc/GMT-7",
			"Asia/Bangkok|Indian/Christmas",
			"Asia/Brunei|Asia/Kuching",
			"Asia/Brunei|Etc/GMT-8",
			"Asia/Dhaka|Asia/Dacca",
			"Asia/Dubai|Asia/Muscat",
			"Asia/Dubai|Etc/GMT-4",
			"Asia/Dubai|Indian/Mahe",
			"Asia/Dubai|Indian/Reunion",
			"Asia/Ho_Chi_Minh|Asia/Saigon",
			"Asia/Hong_Kong|Hongkong",
			"Asia/Jerusalem|Asia/Tel_Aviv",
			"Asia/Jerusalem|Israel",
			"Asia/Kathmandu|Asia/Katmandu",
			"Asia/Kolkata|Asia/Calcutta",
			"Asia/Kuala_Lumpur|Asia/Singapore",
			"Asia/Kuala_Lumpur|Singapore",
			"Asia/Macau|Asia/Macao",
			"Asia/Makassar|Asia/Ujung_Pandang",
			"Asia/Nicosia|Europe/Nicosia",
			"Asia/Qatar|Asia/Bahrain",
			"Asia/Rangoon|Asia/Yangon",
			"Asia/Rangoon|Indian/Cocos",
			"Asia/Riyadh|Antarctica/Syowa",
			"Asia/Riyadh|Asia/Aden",
			"Asia/Riyadh|Asia/Kuwait",
			"Asia/Riyadh|Etc/GMT-3",
			"Asia/Seoul|ROK",
			"Asia/Shanghai|Asia/Chongqing",
			"Asia/Shanghai|Asia/Chungking",
			"Asia/Shanghai|Asia/Harbin",
			"Asia/Shanghai|PRC",
			"Asia/Taipei|ROC",
			"Asia/Tehran|Iran",
			"Asia/Thimphu|Asia/Thimbu",
			"Asia/Tokyo|Japan",
			"Asia/Ulaanbaatar|Asia/Ulan_Bator",
			"Asia/Urumqi|Antarctica/Vostok",
			"Asia/Urumqi|Asia/Kashgar",
			"Asia/Urumqi|Etc/GMT-6",
			"Atlantic/Faroe|Atlantic/Faeroe",
			"Atlantic/South_Georgia|Etc/GMT+2",
			"Australia/Adelaide|Australia/South",
			"Australia/Brisbane|Australia/Queensland",
			"Australia/Broken_Hill|Australia/Yancowinna",
			"Australia/Darwin|Australia/North",
			"Australia/Hobart|Australia/Tasmania",
			"Australia/Lord_Howe|Australia/LHI",
			"Australia/Melbourne|Australia/Victoria",
			"Australia/Perth|Australia/West",
			"Australia/Sydney|Australia/ACT",
			"Australia/Sydney|Australia/Canberra",
			"Australia/Sydney|Australia/NSW",
			"Etc/UTC|Etc/UCT",
			"Etc/UTC|Etc/Universal",
			"Etc/UTC|Etc/Zulu",
			"Etc/UTC|UCT",
			"Etc/UTC|UTC",
			"Etc/UTC|Universal",
			"Etc/UTC|Zulu",
			"Europe/Belgrade|Europe/Ljubljana",
			"Europe/Belgrade|Europe/Podgorica",
			"Europe/Belgrade|Europe/Sarajevo",
			"Europe/Belgrade|Europe/Skopje",
			"Europe/Belgrade|Europe/Zagreb",
			"Europe/Berlin|Arctic/Longyearbyen",
			"Europe/Berlin|Atlantic/Jan_Mayen",
			"Europe/Berlin|Europe/Copenhagen",
			"Europe/Berlin|Europe/Oslo",
			"Europe/Berlin|Europe/Stockholm",
			"Europe/Brussels|CET",
			"Europe/Brussels|Europe/Amsterdam",
			"Europe/Brussels|Europe/Luxembourg",
			"Europe/Chisinau|Europe/Tiraspol",
			"Europe/Dublin|Eire",
			"Europe/Helsinki|Europe/Mariehamn",
			"Europe/Istanbul|Asia/Istanbul",
			"Europe/Istanbul|Turkey",
			"Europe/Lisbon|Portugal",
			"Europe/London|Europe/Belfast",
			"Europe/London|Europe/Guernsey",
			"Europe/London|Europe/Isle_of_Man",
			"Europe/London|Europe/Jersey",
			"Europe/London|GB",
			"Europe/London|GB-Eire",
			"Europe/Moscow|W-SU",
			"Europe/Paris|Europe/Monaco",
			"Europe/Prague|Europe/Bratislava",
			"Europe/Rome|Europe/San_Marino",
			"Europe/Rome|Europe/Vatican",
			"Europe/Warsaw|Poland",
			"Europe/Zurich|Europe/Busingen",
			"Europe/Zurich|Europe/Vaduz",
			"Indian/Maldives|Etc/GMT-5",
			"Indian/Maldives|Indian/Kerguelen",
			"Pacific/Auckland|Antarctica/McMurdo",
			"Pacific/Auckland|Antarctica/South_Pole",
			"Pacific/Auckland|NZ",
			"Pacific/Chatham|NZ-CHAT",
			"Pacific/Easter|Chile/EasterIsland",
			"Pacific/Gambier|Etc/GMT+9",
			"Pacific/Guadalcanal|Etc/GMT-11",
			"Pacific/Guadalcanal|Pacific/Pohnpei",
			"Pacific/Guadalcanal|Pacific/Ponape",
			"Pacific/Guam|Pacific/Saipan",
			"Pacific/Honolulu|HST",
			"Pacific/Honolulu|Pacific/Johnston",
			"Pacific/Honolulu|US/Hawaii",
			"Pacific/Kwajalein|Kwajalein",
			"Pacific/Pago_Pago|Pacific/Midway",
			"Pacific/Pago_Pago|Pacific/Samoa",
			"Pacific/Pago_Pago|US/Samoa",
			"Pacific/Palau|Etc/GMT-9",
			"Pacific/Port_Moresby|Antarctica/DumontDUrville",
			"Pacific/Port_Moresby|Etc/GMT-10",
			"Pacific/Port_Moresby|Pacific/Chuuk",
			"Pacific/Port_Moresby|Pacific/Truk",
			"Pacific/Port_Moresby|Pacific/Yap",
			"Pacific/Tahiti|Etc/GMT+10",
			"Pacific/Tarawa|Etc/GMT-12",
			"Pacific/Tarawa|Pacific/Funafuti",
			"Pacific/Tarawa|Pacific/Majuro",
			"Pacific/Tarawa|Pacific/Wake",
			"Pacific/Tarawa|Pacific/Wallis"
		]
	});


	return moment;
}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-server-info', location = '/util/server-info/server-info.js' */
define("util/server-info",[],function(){"use strict";var e=WRM.data.claim("bamboo.web.resources.common:util-server-info.server-info");return Object.freeze({getTimeZoneId:function(){return e.timeZone.id},getTimeZoneName:function(){return e.timeZone.name}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:time-widget', location = '/widget/time/time.soy' */
// This file was automatically generated from time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.time.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.time == 'undefined') { bamboo.widget.time = {}; }


bamboo.widget.time.timestamp = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format) : BAMBOO.Time.format(opt_data.datetime, 'short')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.timestamp.soyTemplateName = 'bamboo.widget.time.timestamp';
}


bamboo.widget.time.relative = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format + 'Age') : BAMBOO.Time.format(opt_data.datetime, 'shortAge')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.relative.soyTemplateName = 'bamboo.widget.time.relative';
}


bamboo.widget.time.time = function(opt_data, opt_ignored) {
  return '<time datetime="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'timestamp')) + '" title="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'full')) + '"' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</time>';
};
if (goog.DEBUG) {
  bamboo.widget.time.time.soyTemplateName = 'bamboo.widget.time.time';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:time-widget', location = '/widget/time/time.js' */
(function (BAMBOO, moment) {
    BAMBOO.Time = {};

    var serverInfo = require('util/server-info');

    var hasOwn = Object.prototype.hasOwnProperty,
        dateFormatCache = {},
        dateTokenizer = /d{1,2}|'[^']+'|M{1,4}|y{2,4}|h{1,2}|H{1,2}|m{2}|s{2}|S{1,4}|Z{1,2}|z{1,2}|a|:|-|\/|\s+/g;

    function Type(str, isAge) {
        if (this instanceof Type) {
            this.key = str;
            this.isAge = isAge;
            return this;
        } else {
            return str && hasOwn.call(Type, str) ? Type[str] : null;
        }
    }

    for (var a = ['shortAge', 'longAge', 'short', 'long', 'full', 'timestamp', 'datetime'], i = 0, l = a.length, t; i < l; i++) {
        t = a[i];
        Type[t] = new Type(t, t.toLowerCase().indexOf('age') !== -1);
    }

    function getTextForRelativeAge(age, type, param) {
        switch(age) {
            case 'aMomentAgo':
                return type === Type.shortAge ?
                       "A moment ago" :
                       "A moment ago";
            case 'oneMinuteAgo':
                return type === Type.shortAge ?
                       "1 min ago" :
                       "1 minute ago";
            case 'xMinutesAgo':
                return type === Type.shortAge ?
                       AJS.format("{0} mins ago", param) :
                       AJS.format("{0} minutes ago", param);
            case 'oneHourAgo':
                return type === Type.shortAge ?
                       "1 hour ago" :
                       "1 hour ago";
            case 'xHoursAgo':
                return type === Type.shortAge ?
                       AJS.format("{0} hours ago", param) :
                       AJS.format("{0} hours ago", param);
            case 'oneDayAgo':
                return type === Type.shortAge ?
                       "Yesterday" :
                       "Yesterday";
            case 'xDaysAgo':
                return type === Type.shortAge ?
                       AJS.format("{0} days ago", param) :
                       AJS.format("{0} days ago", param);
            case 'oneWeekAgo':
                return type === Type.shortAge ?
                       "1 week ago" :
                       "1 week ago";
            default:
                return null;
        }
    }

    function createMoment(dateStr) {
        const timeZoneId = serverInfo.getTimeZoneId();
        return dateStr ? moment.tz(dateStr, timeZoneId) : moment.tz(timeZoneId);
    }

    function toMomentFormat(javaDateFormat) {
        if (hasOwn.call(dateFormatCache, javaDateFormat)) {
            return dateFormatCache[javaDateFormat];
        }
        var momentDateFormat = "", token;
        dateTokenizer.exec('');
        while (token = dateTokenizer.exec(javaDateFormat)) {
            token = token[0];
            switch(token.charAt(0)) {
                case "'":
                    momentDateFormat += '[' + token.substring(1, token.length-1) + ']';
                    break;
                case 'd':
                case 'y':
                case 'a':
                    momentDateFormat += token.toUpperCase();
                    break;
                default:
                    momentDateFormat += token;
            }
        }
        dateFormatCache[javaDateFormat] = momentDateFormat;
        return momentDateFormat;
    }
    
    function getFormatString(type) {
        switch (type.key) {
            case 'short':
            case 'shortAge':
                return "dd MMM yyyy";
            case 'long':
            case 'longAge':
                return "dd MMMM yyyy";
            case 'full':
                return "dd MMM yyyy hh:mm a";
            case 'timestamp':
                return "yyyy-MM-ddTHH:mm:ssZ";
            case 'datetime':
                return "dd MMM - hh:mm a";
            default:
                return null;
        }
    }

    function isYesterday(now, date) {
        var end = now.clone().add('d', 1).hours(0).minutes(0).seconds(0).milliseconds(0);
        while (end > now) {
            end.subtract('d', 1);
        }
        var start = end.clone().subtract('d', 1);
        return start <= date && date < end;
    }

    function getSecondsBetween(start, end) {
        return Math.floor(end.diff(start, 'seconds', true));
    }

    function getMinutesBetween(start, end) {
        return Math.floor(end.diff(start, 'minutes', true));
    }

    function getHoursBetween(start, end) {
        return end.diff(start, 'hours'); // diff rounds by default
    }

    function getDaysBetween(start, end) {
        return Math.floor(end.diff(start, 'days', true));
    }

    function getMonthsBetween(start, end) {
        return end.diff(start, 'months', true);
    }

    function formatDateWithFormatString(date, type) {
        var formatString = toMomentFormat(getFormatString(type));

        return date.format(formatString);
    }

    function formatDateWithRelativeAge(date, type, now) {
        now = now || createMoment();

        if (date <= now) {
            if (date > now.clone().subtract('m', 1)) {
                return getTextForRelativeAge('aMomentAgo', type);
            } else if (date > now.clone().subtract('m', 2)) {
                return getTextForRelativeAge('oneMinuteAgo', type);
            } else if (date > now.clone().subtract('m', 50)) {
                return getTextForRelativeAge('xMinutesAgo', type, getMinutesBetween(date, now));
            } else if (date > now.clone().subtract('m', 90)) {
                return getTextForRelativeAge('oneHourAgo', type);
            } else if (isYesterday(now, date) && date < now.clone().subtract('h', 5)) {
                return getTextForRelativeAge('oneDayAgo', type);
            } else if (date > now.clone().subtract('d', 1)) {
                return getTextForRelativeAge('xHoursAgo', type, getHoursBetween(date, now));
            } else if (date > now.clone().subtract('d', 7)) {
                return getTextForRelativeAge('xDaysAgo', type, Math.max(getDaysBetween(date, now), 2));// if it's not yesterday then don't say it's one day ago
            } else if (date > now.clone().subtract('d', 8)) {
                return getTextForRelativeAge('oneWeekAgo', type);
            }
        }
        return formatDateWithFormatString(date, type);
    }

    function formatDate(momentDate, type) {
        if (momentDate && type) {
            if (type.isAge) {
                return formatDateWithRelativeAge(momentDate, type);
            } else {
                return formatDateWithFormatString(momentDate, type);
            }
        } else {
            return null;
        }
    }

    /*
     * Currently only supports the default 'long' formatting.
     */
    function elapsedTime(dateFrom, dateTo) {
         dateTo = dateTo || createMoment();
         if (dateFrom && dateFrom <= dateTo) {
             var months = getMonthsBetween(dateFrom, dateTo);
             if (months < 1) {
                 var minutes = getMinutesBetween(dateFrom, dateTo);
                 if (minutes < 1) {
                     var seconds = getSecondsBetween(dateFrom, dateTo);
                     if (seconds < 1) {
                         return "\u003c 1 second";
                     } else if (seconds > 1) {
                         return AJS.format("{0} seconds", seconds);
                     } else {
                         return "1 second";
                     }
                 } else if (minutes > 1) {
                     return AJS.format("{0} minutes", minutes);
                 } else {
                     return "1 minute";
                 }
             } else {
                 return "more than a month";
             }
        }
        return null;
    }

    BAMBOO.Time.format = function (dateOrNumberOrString, typeString) {
        return formatDate(dateOrNumberOrString ? createMoment(dateOrNumberOrString) : null, Type(typeString));
    }

    BAMBOO.Time.elapsedTime = function (dateOrNumberOrStringFrom, dateOrNumberOrStringTo) {
        var dateFrom = dateOrNumberOrStringFrom ? createMoment(dateOrNumberOrStringFrom) : null;
        var dateTo = dateOrNumberOrStringTo ? createMoment(dateOrNumberOrStringTo) : null;
        return elapsedTime(dateFrom, dateTo);
    }

}(window.BAMBOO = (window.BAMBOO || {}), moment));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-deployment-release', location = '/feature/deployment/deployment-release.js' */
define('feature/deployment-release', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {

    'use strict';

    var DeploymentRelease = Brace.View.extend({

        mixins: [events.EventBusMixin],

        initialize: function(options) {
            this.data = {
                create: {},
                promote: {},
                rollback: false
            };

            if (options.event) {
                this.data[options.event] = options.data || {};
                this.triggerWrapperEvent(options.event, true);
            }

            this.onEvent([
                'release:change',
                'release:change:initial'
            ], this.onReleaseChange);

            this.onEvent([
                'branch:change',
                'branch:change:initial'
            ], this.onBranchChange);

            this.onEvent([
                'build:change',
                'build:change:initial'
            ], this.onBuildChange);

            this.onEvent('deploy:release:warning', this.onToggleWarning);
            this.onEvent('deploy:release:rollback', this.onToggleRollbackWarning);

            $(document).on('change',
                'form input:radio[name="releaseTypeOption"]',
                _.bind(this.onTypeChange, this)
            );
        },

        onBranchChange: function(instance) {
            switch (instance.$el.attr('id')) {
                case 'newReleaseBranchKey':
                    this.data.create.branch = $.trim(instance.$el.val());
                    this.triggerWrapperEvent('create');
                    break;
                case 'promoteReleaseBranchKey':
                    this.triggerWrapperEvent('promote');
                    break;
            }
        },

        onBuildChange: function(instance) {
            switch (instance.$el.attr('id')) {
                case 'newReleaseBuildResult':
                    this.data.create.build = $.trim(instance.$el.val());
                    this.data.create.resultsSummary = instance.getSelectedData();
                    this.triggerWrapperEvent('create');
                    break;
            }
        },

        onReleaseChange: function(instance) {
            switch (instance.$el.attr('id')) {
                case 'promoteVersion':
                    this.data.promote.release = instance.$el.val();
                    this.triggerWrapperEvent('promote');
                    break;
            }
        },

        onTypeChange: function() {
            var type = $('form input:radio[name="releaseTypeOption"]:checked').val();
            var warning = $('#rollbackWarning');

            type = $.trim(type).toLowerCase();

            if (type === 'create') {
                warning.toggleClass('hidden', !this.data.rollback);
            }

            this.triggerWrapperEvent(type);
        },

        onToggleWarning: function(instance) {
            var warning = $('#emptyBuildResults');
            var container = instance.$el.parents('.radio:first');

            if (this.data.create.build) {
                this.triggerEvent('build:show', container);
                this.triggerEvent('release:show', container);

                warning.addClass('hidden');
            }
            else {
                this.triggerEvent('build:hide', container);
                this.triggerEvent('release:hide', container);

                warning.removeClass('hidden');
            }
        },

        onToggleRollbackWarning: function(state) {
            this.data.rollback = state;

            $('#rollbackWarning').toggleClass(
                'hidden', !state
            );
        },

        getSelectedType: function() {
            return $('form input:radio[name="releaseTypeOption"]:checked')
                .val().toLowerCase();
        },

        triggerWrapperEvent: function(event, force) {
            if (force || this.getSelectedType() === event) {
                this.lastEvent = [
                    'deploy:release',
                    event, this.data[event]
                ];

                setTimeout(_.bind(function() {
                    if (this.lastEvent) {
                        this.triggerEvent.apply(this, this.lastEvent);
                        this.lastEvent = null;
                    }
                }, this), 100);
            }
        }

    });

    return DeploymentRelease;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-input', location = '/feature/release/release-input.js' */
define('feature/release-input', [
    'jquery',
    'underscore',
    'backbone',
    'brace',
    'util/events',
    'util/errors'
], function(
    $,
    _,
    Backbone,
    Brace,
    events,
    errors
) {

    'use strict';

    var ReleaseInputModel = Backbone.Model.extend({

        url: [
            AJS.contextPath(),
            'rest/api/latest/deploy/preview/versionName'
        ].join('/'),

        initialize: function(params) {
            this.initialParams = params || {};
        },

        fetch: function(options) {
            options.data = _.extend(
                this.initialParams,
                options.data
            );

            return Backbone.Model.prototype.fetch.call(this, options);
        }
    });

    var ReleaseInput = Brace.View.extend({

        mixins: [events.EventBusMixin],

        initialize: function(options) {
            this.params = null;
            this.data = null;

            this.$el.on('keyup', _.bind(_.debounce(
                this.onContentChange, 320 || options.timeout
            ), this));

            this.settings = {
                masterPickerId: options.masterPickerId
            };

            this.$icon = $(bamboo.feature.release.input.icon());
            $(this.$icon).insertAfter(this.$el).before(' ');

            this.dialog = AJS.InlineDialog(
                this.$icon, this.$icon.attr('id'),
                _.bind(this.onDialogShow, this), {
                    hideDelay: null,
                    offsetX: -60,
                    arrowOffsetX: -7,
                    width: 420
                }
            );

            this.model = new ReleaseInputModel(options.params);

            this.onEvent('build:change', this.onMasterChange);
            this.onEvent('build:change:initial', this.onMasterChangeInitial);
            this.onEvent('build:hide', this.onHide);
            this.onEvent('build:show', this.onShow);
        },

        onContentChange: function() {
            this.triggerEvent('release:change');
        },

        onMasterChange: function(instance) {
            if (
                this.settings.masterPickerId &&
                instance.$el.attr('id') !== this.settings.masterPickerId
            ) {
                return;
            }

            this.data = null;
            this.params = null;
            this.$el.val('');

            if (instance.$el.val()) {
                this.params = {
                    resultKey: instance.$el.val()
                };

                this.loadData(_.bind(function() {
                    this.$el.val(this.data.nextVersionName);
                    this.onContentChange();
                }, this));
            }
        },

        onMasterChangeInitial: function(instance) {
            if (
                this.settings.masterPickerId &&
                instance.$el.attr('id') !== this.settings.masterPickerId
            ) {
                return;
            }

            if (instance.$el.val()) {
                this.params = {
                    resultKey: instance.$el.val()
                };

                this.loadData();
            }
        },

        onDialogShow: function(content, trigger, showPopup) {
            content.css({ padding: '20px' });

            var handler = _.bind(function() {
                content.html(bamboo.feature.release.input.content({
                    item: this.data
                }));

                showPopup();
            }, this);

            if (this.data) {
                handler();
            }
            else {
                this.loadData(handler);
            }

            return false;
        },

        onHide: function(instance, container) {
            if (!container || container.find(this.$el).length) {
                this.$el.parents('.field-group:first').hide();
            }
        },

        onShow: function(instance, container) {
            if (!container || container.find(this.$el).length) {
                this.$el.parents('.field-group:first').show();
            }
        },

        loadData: function(callback) {
            if (this.params) {
                this.model.fetch({
                    data: this.params,
                    error: errors,
                    success: _.bind(function(instance, data) {
                        this.data = this.model.toJSON();

                        if (callback) {
                            callback();
                        }
                    }, this)
                });
            }
            else if (callback) {
                callback();
            }
        }

    });

    return ReleaseInput;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-input', location = '/feature/release/release-input.soy' */
// This file was automatically generated from release-input.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.release.input.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.release == 'undefined') { bamboo.feature.release = {}; }
if (typeof bamboo.feature.release.input == 'undefined') { bamboo.feature.release.input = {}; }


bamboo.feature.release.input.icon = function(opt_data, opt_ignored) {
  return '<a id="helpDialog-releaseInput" href="#" rel="help"><span class="aui-icon aui-icon-small aui-iconfont-info" data-unicode="UTF+E012" original-title="">Info</span></a>';
};
if (goog.DEBUG) {
  bamboo.feature.release.input.icon.soyTemplateName = 'bamboo.feature.release.input.icon';
}


bamboo.feature.release.input.content = function(opt_data, opt_ignored) {
  return '<div class="release-input-info">' + ((opt_data.item) ? (opt_data.item.isBranch) ? '<h3>' + soy.$$escapeHtml("Release version naming for branch deployments") + '</h3><br/>' + soy.$$escapeHtml("When creating releases from a plan branch, the following naming scheme applies:") + '<br><br><span>&lt;branchname&gt;-&lt;incremented number&gt;</span><br><br>' + soy.$$escapeHtml("Changing the release name in this form is a one-time change. The subsequent release from a plan branch will once again use the naming scheme above.") + '<br><br>' + soy.$$filterNoAutoescape(AJS.format("Only releases from your default branch make use of the \x3ca href\x3d\x22{0}\x22\x3erelease version naming scheme\x3c/a\x3e.","" + '/deploy/config/configureDeploymentProjectVersioning.action?id=' + opt_data.item.deploymentProjectId)) : '<h3>' + soy.$$escapeHtml("Release version naming scheme") + '</h3><br/>' + soy.$$escapeHtml("Releases in this deployment project are named according to the following release version naming scheme:") + '<br><span>' + soy.$$escapeHtml(opt_data.item.versionNamingScheme) + '</span><br><br>' + soy.$$escapeHtml("The default value in the Release field was computed using this formula. Changing the release name in this form is a one-time change and will not influence the release version naming scheme for subsequent releases.") + '<br><br>' + soy.$$filterNoAutoescape(AJS.format("You can \x3ca href\x3d\x22{0}\x22\x3echange the release version naming scheme\x3c/a\x3e for permanent changes.","" + '/deploy/config/configureDeploymentProjectVersioning.action?id=' + opt_data.item.deploymentProjectId)) : '<span>' + soy.$$escapeHtml("Please select a build result.") + '</span>') + '</div>';
};
if (goog.DEBUG) {
  bamboo.feature.release.input.content.soyTemplateName = 'bamboo.feature.release.input.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete', location = '/widget/autocomplete/autocomplete.js' */
define('widget/autocomplete', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {
    'use strict';

    /**
     * @module widget/autocomplete
     */

    var Autocomplete = Brace.View.extend({

        mixins: [
            events.EventBusMixin
        ],

        initialize: function(options) {
            this.data = [];

            options.initialValue = $.parseJSON(
                options.initialValue || null
            );

            if (_.isFunction(this.onInitSelection)) {
                options.initSelection = _.bind(this.onInitSelection, this);
            }

            this.settings = $.extend({
                escapeMarkup: function(m) {
                    return m;
                },
                placeholder: ' '
            }, options || {});

            if (!this.$el.val()) {
                if (!options.initialValue && options.loadAndProcess && this.onLoadAndProcess) {
                    this.settings.initSelection = _.bind(this.onLoadAndProcess, this);
                    this.$el.val('__LOADING__');
                }
            }

            this.$el.auiSelect2(this.settings);
            this.$el.on('change', _.bind(function() {
                $('#select2-drop-mask').hide();

                this.$el.auiSelect2('dropdown').hide();
                this.$el.auiSelect2('container')
                    .removeClass('select2-dropdown-open')
                    .removeClass('select2-container-active');
            }, this));

            this.onRegisterEvents();
        },

        onRegisterEvents: function() {
            this.proxyEvents('select',
                ['change', 'select2-open', 'select2-blur'],
                this.$el
            );
        },

        getSelectedData: function(callback) {
            var selected = this.$el.auiSelect2('data');

            if (!selected) {
                selected = _.find(this.data.results, _.bind(callback || function(item) {
                    return item.id === this.$el.val();
                }, this));
            }

            return selected;
        },

        initConfig: function(values) {
            var defaults = _.defaults(values || {}, {
                placeholder: this.settings.placeholder,
                data: []
            });

            this.$el.auiSelect2(_.defaults(
                defaults,
                this.settings
            ));

            return this;
        },

        getContainer: function() {
            return this.$el.auiSelect2('container');
        },

        addLoadingIcon: function() {
            var $icon = $(document.createElement('span'))
                .addClass('aui-icon aui-icon-wait');

            this.$el.siblings('.select2-container:first').append($icon);
            return this;
        },

        removeLoadingIcon: function() {
            setTimeout(_.bind(function() {
                this.$el.parent().find('.aui-icon-wait').fadeOut();
            }, this), 500);

            return this;
        },

        clearValue: function() {
            this.$el.auiSelect2('data', null);
            return this;
        },

        processData: function(data) {
            this.data = data;
            return this.data;
        },

        disable: function() {
            this.$el.auiSelect2('enable', false);
            return this;
        },

        enable: function() {
            this.$el.auiSelect2('enable', true);
            return this;
        }

    });

    return Autocomplete;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.Widget.Autocomplete', null, require('widget/autocomplete'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete', location = '/widget/autocomplete/autocomplete.soy' */
// This file was automatically generated from autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }


bamboo.widget.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.result.soyTemplateName = 'bamboo.widget.autocomplete.result';
}


bamboo.widget.autocomplete.selection = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.selection.soyTemplateName = 'bamboo.widget.autocomplete.selection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog', location = '/widget/dialog/dialog.js' */
define("widget/dialog",["jquery","underscore","brace","util/events"],function(t,i,n,e){"use strict";return n.View.extend({mixins:[e.EventBusMixin],initialize:function(n){this.settings=t.extend({templateContent:bamboo.widget.dialog.content,keypressListener:i.bind(this.onKeyPress,this),height:400,width:800,buttons:[{id:"cancel",label:"Close",type:"link"}]},n||{}),this.settings.$triggerEl?this.settings.$triggerEl.on("click",i.bind(function(t){t.preventDefault(),this.createInstance()},this)):this.createInstance()},createInstance:function(){this.dialog=new AJS.Dialog(this.settings),this.proxyEvents("dialog",["show.dialog","hide.dialog","remove.dialog"],AJS,"bind"),this.onCreateInstance(),i.each(this.dialog.getPage(0).button,function(t){"button-panel-button"!==t.item.attr("class")&&t.item.removeClass("button-panel-button")}),this.dialog.show()},onCreateInstance:function(){this.$dialogContent=t(this.settings.templateContent({content:bamboo.widget.dialog.loading()})),this.dialog.addPanel("",this.$dialogContent),this.settings.header?this.dialog.addHeader(this.settings.header):this.settings.$triggerEl&&this.dialog.addHeader(this.settings.$triggerEl.attr("title")),this.settings.buttons&&i.each(this.settings.buttons,i.bind(function(t){var n=this.dialog.addButton,e=this.onButtonClick;"link"===t.type&&(n=this.dialog.addLink),t.callback&&(e=function(){for(var i=arguments.length,n=Array(i),e=0;e<i;e++)n[e]=arguments[e];t.callback.apply(this,n),this.onButtonClick.apply(this,n)});var s=t.params?[t.id,t.params]:[t.id];n.apply(this.dialog,[t.label,i.bind(function(){i.bind(e,this).apply(this,s)},this),t.cssClass])},this)),i.isString(this.settings.content)?this.onContentLoaded(this.settings.content):i.isFunction(this.settings.content)?this.settings.content().then(this.onContentLoaded.bind(this),this.onContentLoadError.bind(this)):i.isObject(this.settings.content)?this.onContentLoaded(this.settings.content.removeClass("hidden")):this.settings.$triggerEl&&t.ajax({url:this.settings.$triggerEl.attr("href"),data:{"bamboo.successReturnMode":"json",decorator:"nothing"},cache:!1}).done(this.onContentLoaded.bind(this)).fail(this.onContentLoadError.bind(this))},onContentLoaded:function(t){this.$dialogContent.empty(),this.$dialogContent.append(t)},onContentLoadError:function(){this.$dialogContent.empty()},onButtonClick:function(t){"cancel"===t&&this.dialog.remove()},onKeyPress:function(t){27===t.which&&this.dialog.remove()}})}),AJS.namespace&&AJS.namespace("Bamboo.Widget.Dialog",null,require("widget/dialog"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog', location = '/widget/dialog/dialog.soy' */
// This file was automatically generated from dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.dialog.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.dialog == 'undefined') { bamboo.widget.dialog = {}; }


bamboo.widget.dialog.loading = function(opt_data, opt_ignored) {
  return '<span class="icon icon-loading aui-dialog-content-loading"></span>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.loading.soyTemplateName = 'bamboo.widget.dialog.loading';
}


bamboo.widget.dialog.content = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.content.soyTemplateName = 'bamboo.widget.dialog.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-error', location = '/widget/dialog-error/dialog-error.js' */
define("widget/dialog-error",["jquery","underscore","widget/dialog","exports"],function(t,e,n,i){"use strict";var o=n.extend({defaultSettings:{id:"error-dialog",height:270,width:600,header:"An unexpected error has occurred",buttons:[{id:"reload",label:"Reload page",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},initialize:function(t){var i=t||{};i.content||(i.content="Please try reloading the page."),n.prototype.initialize.call(this,e.defaults(i,this.defaultSettings))},onButtonClick:function(t){for(var i,o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];if((i=n.prototype.onButtonClick).call.apply(i,[this,t].concat(a)),"reload"===t){var r=this.dialog.getPage(0).buttonpanel;r.prepend(aui.icons.icon({size:"small",icon:"wait"})),r.find(":button").attr("disabled",!0),e.delay(function(){window.location.reload()},500)}}});i.Dialog=o,i.callback=function(t){var e=AJS.popup.current;return e&&(e.hide(),e.remove()),AJS.undim(),new o({content:t})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-error-helper', location = '/util/error-helper/error-helper.js' */
define("util/error-helper",["widget/dialog-error"],function(r){"use strict";var e=bamboo.util.error.helper;return Object.freeze({getErrorFromResponse:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return e;if(r.responseJSON)return this.getErrorFromResponse(r.responseJSON,e);if(r.responseText||r.data)try{var o=JSON.parse(r.responseText||r.data);return this.getErrorFromResponse(o,e)}catch(r){}var t=null;return r.message?t=r.message:r.errors&&(t=r.errors.join(" ").trim()),t||e},displayErrorDialog:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.callback.call(null,e.dialogMessage({content:o}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-error-helper', location = '/util/error-helper/error-helper.soy' */
// This file was automatically generated from error-helper.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.util.error.helper.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.util == 'undefined') { bamboo.util = {}; }
if (typeof bamboo.util.error == 'undefined') { bamboo.util.error = {}; }
if (typeof bamboo.util.error.helper == 'undefined') { bamboo.util.error.helper = {}; }


bamboo.util.error.helper.dialogMessage = function(opt_data, opt_ignored) {
  return ((opt_data.content) ? '<p><strong class="unexpected-error-content">' + soy.$$escapeHtml(opt_data.content) + '</strong></p>' : '') + '<p>' + soy.$$escapeHtml("Please try reloading the page.") + '</p>';
};
if (goog.DEBUG) {
  bamboo.util.error.helper.dialogMessage.soyTemplateName = 'bamboo.util.error.helper.dialogMessage';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-errors', location = '/util/errors/errors.js' */
define("util/errors",["util/error-helper"],function(r){"use strict";function e(r){return 0===r.status&&"abort"===r.statusText}return function(t){if(!e(t)){var o=r.getErrorFromResponse(t);r.displayErrorDialog(o)}}}),AJS.namespace&&AJS.namespace("Bamboo.Util.ErrorHandler",null,require("util/errors"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-ajax', location = '/util/ajax/ajax.js' */
define("util/ajax",["jquery","underscore","util/errors"],function(r,e,n){"use strict";var t={contentType:"application/json",dataType:"json",async:!0,cache:!1};return function(){var a=(arguments.length<=0?void 0:arguments[0])||{};return e.isString(a)&&(a={url:a}),a.error||(a.error=n),r.ajax(e.defaults(a,t))}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete-ajax', location = '/widget/autocomplete/autocomplete-ajax.js' */
define('widget/autocomplete-ajax', [
    'jquery',
    'underscore',
    'widget/autocomplete',
    'util/events',
    'util/ajax',
    'util/errors'
], function(
    $,
    _,
    Autocomplete,
    events,
    ajax,
    errors
) {

    'use strict';

    var AutocompleteAjax = Autocomplete.extend({

        mixins: [
            events.EventBusMixin
        ],

        initialize: function(options) {
            this.params = $.extend({
                'max-results': 10
            }, this.params || {});

            if (_.isFunction(this.onFormatSelection)) {
                options.formatSelection = _.bind(this.onFormatSelection, this);
            }

            if (_.isFunction(this.onFormatResult)) {
                options.formatResult = _.bind(this.onFormatResult, this);
            }

            options.ajax.quietMillis = options.ajax.quietMillis || 320;

            if (_.isUndefined(options.cache) || !!options.cache) {
                options.ajax.resultsCallback = options.ajax.results;
                options.ajax.results = null;

                options.query = _.debounce(
                    _.bind(this.queryAjaxCache, this),
                    options.ajax.quietMillis
                );

                if (!options.ajax.params) {
                    if (_.isFunction(this.onRemoteData)) {
                        options.ajax.params = {
                            error: _.bind(this.onRemoteData, this)
                        };
                    }
                    else {
                        options.ajax.params = {
                            error: _.bind(function(jqXHR, textStatus, errorThrown) {
                                this.$el.auiSelect2('close');
                                errors(
                                    jqXHR, textStatus, errorThrown
                                );
                            }, this)
                        };
                    }
                }
            }

            Autocomplete.prototype.initialize.apply(
                this, [options || {}]
            );
        },

        queryAjaxCache: function(query) {
            this.cache = this.cache || {
                initial: {},
                term: {}
            };

            var term = $.trim(query.term);

            query.key = JSON.stringify(
                this.settings.ajax.data(term, query.page || 1, true)
            );

            var cache = (term.length) ?
                this.cache.term[query.key] :
                this.cache.initial[query.key];

            if (!_.isEmpty(cache)) {
                query.callback(cache);
                return;
            }

            this.settings.ajax.results = _.bind(function(data, page) {
                var response = this.settings.ajax
                    .resultsCallback(data, page);

                if (!response.results.length && this.settings.ajax.empty) {
                    response = {
                        results: this.settings.ajax.empty.call(this, query.term),
                        more: false
                    };
                }

                if (term) {
                    this.cache.term[query.key] = response;
                }
                else {
                    this.cache.initial[query.key] = response;
                }

                return response;
            }, this);

            window.Select2.query.ajax($.extend({
                transport: ajax
            }, this.settings.ajax))(query);
        },

        addQueryCache: function(request, data) {
            var key = JSON.stringify(request);
            data = data || this.data;

            if (!key.query || !key.query.length) {
                this.cache.initial[key] = data;
            }
            else {
                this.cache.term[key] = data;
            }

            return this;
        },

        clearQueryCache: function() {
            this.cache = {
                initial: {},
                term: {}
            };

            return this;
        }

    });

    return AutocompleteAjax;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-autocomplete', location = '/feature/release/release-autocomplete.js' */
define('feature/release-autocomplete', [
    'jquery',
    'underscore',
    'widget/autocomplete-ajax',
    'util/events',
    'util/ajax'
], function(
    $,
    _,
    AutocompleteAjax,
    events,
    ajax
) {

    'use strict';

    var ReleaseAutocomplete = AutocompleteAjax.extend({

        mixins: [events.EventBusMixin],

        initialize: function(options) {
            this.params = options.params || {};

            if (options.params) {
                delete options.params;
            }

            var dataCallback = _.bind(function(term, page) {
                return $.extend({
                    searchTerm: term,
                    'start-index': Math.max(
                        (page - 1) * this.params['max-results'], 0
                    ),
                    chronologicalOrder: true
                }, this.params);
            }, this);

            var settings = {
                minimumInputLength: 0,
                ajax: {
                    url: AJS.contextPath() + '/rest/api/latest/search/versions',
                    dataType: 'json',
                    data: dataCallback,
                    results: _.bind(function(data, page) {
                        return this.processData({
                            results: data.searchResults,
                            more: data.size ? data.size > (page * this.params['max-results']) : false
                        });
                    }, this)
                }
            };

            AutocompleteAjax.prototype.initialize.apply(
                this, [$.extend(settings, options || {})]
            );
        },

        onRegisterEvents: function() {
            this.proxyEvents('release', ['change'], this.$el);
            var events = ['branch:change'];

            if (!this.$el.val()) {
                events.push('branch:change:initial');
            }

            this.onEvent(events, this.onMasterChange);
        },

        onLoadAndProcess: function(element, callback) {
            if (this.currentRequest && this.currentRequest.readyState !== 4) {
                this.currentRequest.abort();
            }

            var settings = _.defaults({
                data: this.settings.ajax.data('', 1)
            }, this.settings.ajax);

            this.currentRequest = ajax(settings);
            this.currentRequest.done(_.bind(function(data) {
                    var selected = data.searchResults[0];

                    if (selected && selected.id) {
                        this.$el.val(selected.id);
                        this.$el.select2('data', selected);
                    }

                    this.processData({
                        results: data.searchResults,
                        more: data.size ? data.size > this.params['max-results'] : false
                    });

                    this.triggerEvent('release:change');

                    if (callback) {
                        callback(selected);
                    }
                }, this));
        },

        onFormatResult: function(item) {
            if (!_.isEmpty(item)) {
                return bamboo.widget.autocomplete.result({
                    name: item.searchEntity.name
                });
            }
        },

        onFormatSelection: function(item) {
            if (!_.isEmpty(item)) {
                return bamboo.widget.autocomplete.selection({
                    name: item.searchEntity.name
                });
            }
        },

        onMasterChange: function(instance) {
            if (
                this.settings.masterPickerId &&
                instance.$el.attr('id') !== this.settings.masterPickerId
            ) {
                return;
            }

            this.params.branchKey = '';
            this.clearValue();

            var value = instance.getSelectedData();

            if (value) {
                this.params.branchKey = value.searchEntity.key;
                this.onLoadAndProcess();
            }
        }

    });

    return ReleaseAutocomplete;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-autocomplete', location = '/feature/release/release-autocomplete.soy' */
// This file was automatically generated from release-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.release.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.release == 'undefined') { bamboo.feature.release = {}; }
if (typeof bamboo.feature.release.autocomplete == 'undefined') { bamboo.feature.release.autocomplete = {}; }


bamboo.feature.release.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.feature.release.autocomplete.result.soyTemplateName = 'bamboo.feature.release.autocomplete.result';
}


bamboo.feature.release.autocomplete.selection = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.feature.release.autocomplete.selection.soyTemplateName = 'bamboo.feature.release.autocomplete.selection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:piecon-js', location = '/scripts/piecon/piecon.js' */
//
// piecon.js
//
// https://github.com/lipka/piecon
//
// Copyright (c) 2012 Lukas Lipka <lukaslipka@gmail.com>. All rights reserved.
//
// Licenced under MIT Licence
//
// Modified by Atlassian
(function($, Piecon) {
    var currentFavicon = null;
    var originalFavicon = null;
    var originalTitle = null;
    var canvas = null;
    var options = {};
    var defaults = {
        color: '#0065ff',
        //background: '#999',
        background: '#ccd9ea',
        shadow: '#fff',
        fallback: false
    };

    var isRetina = window.devicePixelRatio > 1;

    var ua = (function () {
        var agent = navigator.userAgent.toLowerCase();
        return function (browser) {
            return agent.indexOf(browser) !== -1;
        };
    }());

    var browser = {
        ie: ua('msie'),
        chrome: ua('chrome'),
        webkit: ua('chrome') || ua('safari'),
        safari: ua('safari') && !ua('chrome'),
        mozilla: ua('mozilla') && !ua('chrome') && !ua('safari')
    };

    var getFaviconTag = function() {
        var links = $("head").find("link");

        for (var l = links.length, i = l-1; i >= 0; i--) {
            if (links[i].getAttribute('rel') === 'icon' || links[i].getAttribute('rel') === 'shortcut icon') {
                return links[i];
            }
        }
        return false;
    };

    var removeFaviconTag = function() {
        var $head = $("head");
        $head.find("link[rel='icon']").remove();
        $head.find("link[rel='shortcut icon']").remove();
    };

    var setFaviconTag = function(url) {
        removeFaviconTag();
        $("head").append("<link rel='icon' type='image/x-icon' href='" + url + "'/>")
    };

    var getCanvas = function () {
        if (!canvas) {
            canvas = document.createElement("canvas");
            if (isRetina) {
                canvas.width = 32;
                canvas.height = 32;
            } else {
                canvas.width = 16;
                canvas.height = 16;
            }
        }

        return canvas;
    };

    var drawFavicon = function(percentage) {
        var canvas = getCanvas();
        var context = canvas.getContext("2d");
        var percentage = percentage || 0;
        var src = currentFavicon;

        var faviconImage = new Image();
        faviconImage.onload = function() {
            if (context) {
                context.clearRect(0, 0, canvas.width, canvas.height);

                // Draw empty circle
                context.beginPath();
                context.arc(canvas.width / 2, canvas.height / 2, Math.min(canvas.width / 2 -1 , canvas.height / 2 -1), 0, Math.PI * 2, false);
                context.lineWidth = isRetina ? 2.0 : 1.0;
                context.strokeStyle = options.color;
                context.stroke();

                // Draw pie
                if (percentage > 0) {
                    context.beginPath();
                    context.moveTo(canvas.width / 2, canvas.height / 2);
                    context.arc(canvas.width / 2, canvas.height / 2, Math.min(canvas.width / 2 - 1, canvas.height / 2 -1), (-0.5) * Math.PI, (-0.5 + 2 * percentage / 100) * Math.PI, false);
                    context.lineTo(canvas.width / 2, canvas.height / 2);
                    context.fillStyle = options.color;
                    context.fill();
                }

                setFaviconTag(canvas.toDataURL());
            }
        };

        // allow cross origin resource requests if the image is not a data:uri
        // as detailed here: https://github.com/mrdoob/three.js/issues/1305
        if (!src.match(/^data/)) {
            faviconImage.crossOrigin = 'anonymous';
        }

        faviconImage.src = src;
    };

    var updateTitle = function(percentage) {
        if (percentage > 0) {
            document.title = '(' + percentage + '%) ' + originalTitle;
        } else {
            document.title = originalTitle;
        }
    };

    Piecon.setOptions = function(custom) {
        options = {};

        for (var key in defaults){
            options[key] = custom.hasOwnProperty(key) ? custom[key] : defaults[key];
        }

        return this;
    };

    Piecon.setProgress = function(percentage) {
        if (!originalTitle) {
            originalTitle = document.title;
        }

        if (!originalFavicon || !currentFavicon) {
            var tag = getFaviconTag();
            originalFavicon = currentFavicon = tag ? tag.getAttribute('href') : '/favicon.ico';
        }

        if (!isNaN(parseFloat(percentage)) && isFinite(percentage)) {
            if (!getCanvas().getContext || browser.ie || browser.safari || options.fallback === true) {
                // Fallback to updating the browser title if unsupported
                return updateTitle(percentage);
            } else if (options.fallback === 'force') {
                updateTitle(percentage);
            }

            return drawFavicon(percentage);
        }

        return false;
    };

    Piecon.reset = function() {
        if (originalTitle) {
            document.title = originalTitle;
        }

        if (originalFavicon) {
            currentFavicon = originalFavicon;
            setFaviconTag(currentFavicon);
        }
    };

    Piecon.setFavicon = function(url)
    {
        if (!browser.ie)
        {
            setFaviconTag(url);
        }
    };

    Piecon.browserSupportsDynamicFavicon = function()
    {
        return !browser.ie && !browser.safari;
    };

    Piecon.setOptions(defaults);
}(jQuery, window.Piecon = (window.Piecon || {})));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:piecon-js', location = '/scripts/piecon/favicon-update.js' */
(function ($, BAMBOO) {
    BAMBOO.FaviconUpdate = function (opts) {
        var resourcePrefix = opts.resourcePrefix,
            url = opts.faviconRestUrl,
            update = function () {
                $.ajax({
                           url: url,
                           dataType: "json",
                           cache: false,
                           success: function (json) {
                               Piecon.setFavicon(resourcePrefix + json.faviconUrl);
                           }
                       });
                // Update again in 20 seconds
                setTimeout(update, 20000);
            };
        return {
            init: function () {
                update();
            }
        };
    }
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.icons.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.icons == 'undefined') { widget.icons = {}; }


widget.icons.icon = function(opt_data, opt_ignored) {
  return '<span class="icon icon-' + soy.$$escapeHtml(opt_data.type) + ' ' + ((opt_data.reversed) ? 'icon-reversed' : '') + '" ' + ((opt_data.text && opt_data.showTitle) ? 'title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.icon.soyTemplateName = 'widget.icons.icon';
}


widget.icons.fontIcon = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.fontIcon.soyTemplateName = 'widget.icons.fontIcon';
}


widget.icons.auiFontLink = function(opt_data, opt_ignored) {
  return '<a ' + ((opt_data.text) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '" ' : '') + 'href="' + soy.$$escapeHtml("" + opt_data.relativeUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.iconType) + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</span></a>';
};
if (goog.DEBUG) {
  widget.icons.auiFontLink.soyTemplateName = 'widget.icons.auiFontLink';
}


widget.icons.statusIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.status == 'approve' || opt_data.status == 'project-success' || opt_data.status == 'Successful' || opt_data.status == 'SUCCESS' || opt_data.status == 'successful' || opt_data.status == 'successful-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'successful-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'error' || opt_data.status == 'project-fail' || opt_data.status == 'Failed' || opt_data.status == 'FAILED' || opt_data.status == 'failed' || opt_data.status == 'failed-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'failed-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-cancelled' || opt_data.status == 'NotBuilt' || opt_data.status == 'notbuilt' || opt_data.status == 'NOT_BUILT' || opt_data.status == 'Unknown' || opt_data.status == 'UNKNOWN' || opt_data.status == 'unknown' || opt_data.status == 'incomplete-build') ? widget.icons.fontIcon({type: 'incomplete-build', text: opt_data.text, showTitle: opt_data.text ? true : false}) : (opt_data.status == 'task-in-progress' || opt_data.status == 'Pending' || opt_data.status == 'PENDING' || opt_data.status == 'pending' || opt_data.status == 'Queued' || opt_data.status == 'QUEUED' || opt_data.status == 'queued' || opt_data.status == 'queued-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'queued-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-disabled' || opt_data.status == 'disabled' || opt_data.status == 'project-none' || opt_data.status == 'NeverExecuted' || opt_data.status == 'skipped' || opt_data.status == 'Suspended' || opt_data.status == 'plan-disabled') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'plan-disabled', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'running-build' || opt_data.status == 'project-current' || opt_data.status == 'Building' || opt_data.status == 'BUILDING' || opt_data.status == 'building' || opt_data.status == 'InProgress' || opt_data.status == 'INPROGRESS' || opt_data.status == 'IN_PROGRESS' || opt_data.status == 'inprogress') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'running-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : widget.icons.icon({type: opt_data.status + (opt_data.reversed ? ' icon-reversed' : ''), text: opt_data.text, showTitle: opt_data.text ? true : false}));
};
if (goog.DEBUG) {
  widget.icons.statusIcon.soyTemplateName = 'widget.icons.statusIcon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/lozenges.soy' */
// This file was automatically generated from lozenges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.lozenges.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.lozenges == 'undefined') { widget.lozenges = {}; }


widget.lozenges.lozenge = function(opt_data, opt_ignored) {
  return '<span class="lozenge lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.lozenge.soyTemplateName = 'widget.lozenges.lozenge';
}


widget.lozenges.auilozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' aui-lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.auilozenge.soyTemplateName = 'widget.lozenges.auilozenge';
}


widget.lozenges.branch = function(opt_data, opt_ignored) {
  return '<span class="' + ((opt_data.cssClass) ? soy.$$escapeHtml(opt_data.cssClass) : 'lozenge-newline') + '">' + ((opt_data.label) ? '<span class="inline-label">' + soy.$$escapeHtml(opt_data.label) + '</span> ' : '') + '<span class="lozenge branch-lozenge monospace" title="' + soy.$$escapeHtml(opt_data.planBranchName) + '"><span class="branch">' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + '<span class="name">' + soy.$$escapeHtml(opt_data.planBranchName) + '</span></span></span></span>';
};
if (goog.DEBUG) {
  widget.lozenges.branch.soyTemplateName = 'widget.lozenges.branch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/agent.soy' */
// This file was automatically generated from agent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.agent.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.agent == 'undefined') { widget.agent = {}; }


widget.agent.renderAgentNameLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.type == 'ELASTIC') ? (true) ? '<a href="' + soy.$$escapeHtml("" + '/admin/elastic/manageElasticInstances.action') + '">' + widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) + '</a>' : widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) : '') + ((opt_data.showAdminLink) ? '<a href="' + soy.$$escapeHtml("" + '/admin/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>' : '<a href="' + soy.$$escapeHtml("" + '/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>');
};
if (goog.DEBUG) {
  widget.agent.renderAgentNameLink.soyTemplateName = 'widget.agent.renderAgentNameLink';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/plan.soy' */
// This file was automatically generated from plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.plan.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.plan == 'undefined') { widget.plan = {}; }


widget.plan.renderPlanNameLink = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) + ' &rsaquo; ' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + ' ' : '') + soy.$$escapeHtml(opt_data.plan.buildName) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLink.soyTemplateName = 'widget.plan.renderPlanNameLink';
}


widget.plan.renderPlanNameLinkWithoutBranch = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) : soy.$$escapeHtml(opt_data.plan.buildName)) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLinkWithoutBranch.soyTemplateName = 'widget.plan.renderPlanNameLinkWithoutBranch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/buildresult.soy' */
// This file was automatically generated from buildresult.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.buildresult.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.buildresult == 'undefined') { widget.buildresult = {}; }


widget.buildresult.resultStatusAndLink = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy5 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <a href="' + soy.$$escapeHtml("" + '/browse/' + opt_data.resultSummary.planResultKey.key) + '" class="' + soy.$$escapeHtml(resultClass__soy5) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</a>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatusAndLink.soyTemplateName = 'widget.buildresult.resultStatusAndLink';
}


widget.buildresult.resultStatus = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy18 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <span class="' + soy.$$escapeHtml(resultClass__soy18) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</span>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatus.soyTemplateName = 'widget.buildresult.resultStatus';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jquery/plugins/bamboo/progressbar.js' */
/**
 * Progress Bar jQuery plugin
 *
 * Options:
 * - value  {number}    Default: 0
 *      The value of the progressBar.
 *      Can be set when initialising (first creating) the progressBar.
 *          eg. $(".selector").progressBar({ value: 40 });
 *      Get or set the value option after initialisation:
 *          //getter
 *          var value = $(".selector").progressBar("option", "value");
 *          //setter
 *          $(".selector").progressBar("option", "value", 40);
 *
 * - text   {string}    Default: &nbsp;
 *      The text shown in the progressBar.
 *      Can be set when initialising (first creating) the progressBar.
 *          eg. $(".selector").progressBar({ text: "40% complete" });
 *      Get or set the value option after initialisation:
 *          //getter
 *          var text = $(".selector").progressBar("option", "text");
 *          //setter
 *          $(".selector").progressBar("option", "text", "40% complete");
 *
 * Initialisation:
 * $("#myBar").progressBar();
 *
 * This will turn the target element (in this case <div id="myBar"></div>) into a progress bar using the
 * default options. If the HTML for the progress bar is already contained within the target element the plugin will
 * initialise by extracting the data from the HTML, which from then onward can be updated using the plugin methods.
 *
 * You could also pass an object as the first parameter containing your own options with which to initialise the
 * progress bar. eg. $("#myBar").progressBar({ value: 40, text: "40% complete" });
 *
 * Methods:
 * - progressBar("destroy")
 *      Removes any data and bindings that were added to the element by the plugin leaving just the HTML.
 *
 * - progressBar("option", optionName, [value])
 *      Get or set any progressBar option. If no value is specified, will act as a getter.
 *
 * - progressBar("option", [options])
 *      Get or set multiple progressBar options at once by providing an options object. If options is not specified,
 *      will act as a getter.
 * 
 */
(function ($) {
    $.fn.progressBar = function (options) {
        if (typeof options == "string") {
            if (options == "option") {
                if (arguments.length == 1) { // getter
                    var retArr = [];
                    this.each(function () {
                        retArr.push($(this).data("options"));
                    });
                    return retArr;
                } else if (arguments.length == 2 && typeof arguments[1] == "string") { // individual option getter
                    var ret,
                        opt = arguments[1];
                    this.each(function () {
                        var $el = $(this);
                        ret = (typeof ret == "undefined") ? $el.data("options")[opt] : ret + $el.data("options")[opt];
                    });
                    return ret;
                } else if (arguments.length == 2 && typeof arguments[1] == "object") { // option object setter
                    var newOpts = arguments[1];
                    if (typeof newOpts.text != "undefined" && (newOpts.text == null || newOpts.text == "")) {
                        newOpts.text = $.fn.progressBar.defaults.text;
                    }
                    return this.each(function () {
                        var $el = $(this);
                        $el.data("options", $.extend($el.data("options"), newOpts)).trigger("updateProgressBar");
                    });
                } else if (arguments.length == 3 && typeof arguments[1] == "string") { // individual option setter
                    var key = arguments[1],
                        newVal = arguments[2];
                    if (key == "text" && (newVal == null || newVal == "")) {
                        newVal = $.fn.progressBar.defaults.text;
                    }
                    return this.each(function () {
                        var $el = $(this);
                        var currentOptions = $el.data("options");
                        currentOptions[key] = newVal;
                        $el.data("options", currentOptions).trigger("updateProgressBar");
                    });
                }
            } else if (options == "destroy") {
                return this.each(function () {
                    $(this).removeData("options").removeData("bar").removeData("text").unbind("updateProgressBar");
                });
            }
        } else { // init
            if (typeof options != "undefined" && typeof options.text != "undefined" && (options.text == null || options.text == "")) {
                delete options.text;
            }
            var opts = $.extend({}, $.fn.progressBar.defaults, options);
            return this.each(function () {
                var $el = $(this);
                $el.bind("updateProgressBar", function (e) {
                    var $el = $(this),
                        options = $el.data("options");
                    $el.data("bar").width(Math.max(0, Math.min(100, options.value)) + "%");
                    $el.data("text").html(options.text);
                });
                if ($(".progress-bar, .progress-text", this).length == 2) { // check if HTML for progressBar already exists
                    var bar = $(".progress-bar", this),
                        text = $(".progress-text", this),
                        optsFromExisting = {};
                    if (typeof options == "undefined") {
                        var barWidth = bar.clone().width(), // clone the element so we're working with a detached element, then get the detached element's width which won't be in px, it'll be the proper percentage
                            barText = text.text();
                        optsFromExisting.value = barWidth;
                        if (barText != null && barText != "") {
                            optsFromExisting.text = barText;
                        }
                    }
                    $el.data("options", $.extend({}, opts, optsFromExisting))
                       .data("bar", bar)
                       .data("text", text)
                       .trigger("updateProgressBar");
                } else {
                    $el.empty()
                       .data("options", opts)
                       .data("bar", $('<div class="progress-bar" style="width: ' + Math.max(0, Math.min(100, opts.value)) + '%;" />').appendTo(this))
                       .data("text", $('<div class="progress-text">' + opts.text + '</div>').appendTo(this));
                }
                if (!$el.hasClass("progress")) {
                    $el.addClass("progress");
                }
            });
        }
    };
    $.fn.progressBar.defaults = {
        value: 0,
        text: "&nbsp;"
    };
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jquery/plugins/bamboo/cronbuilder.js' */
(function ($)
{
    /**
     * Creates a Cron builder on the page for a specific field.  The builder makes up two form components, the text display
     * (showing the pretty cron expression) and a hidden field (with the raw cron expression)
     * The value to be submitted can only be updated via the cron buidler dialog.
     *
     * USAGE
     * ------
     * Call against display field e.g:
     *
     *   AJS.$("#displayFieldId").cronBuilder({});
     *
     * Arguments (all required)
     *
     * opts {
     *  hiddenFieldSelector:    selector for the field that will be submited as part of the form (usually a hidden field)
     *  dialogTrigger:          html for the cron builder trigger
     *  eventNamespace:         unique namespace for this dialog click event
     *  contextPath:            context path for bamboo instance (used when generating urls;)
     *  dialogSubmitButtonText: text for the dialog submit button
     *  dialogHeadingText:      text for the dialog heading
     * }
     });
     */
    $.fn.cronBuilder = function (opts)
    {
        return this.each(function ()
                         {
                             var $this = $(this),
                                     initialCron = $(opts.hiddenFieldSelector).val(),
                                     $dialogTrigger = $(opts.dialogTrigger),

                                     addCronExpression = function (result)
                                     {
                                         //update fields
                                         $(opts.hiddenFieldSelector).val(result.cronExpression);
                                         $this.text(result.prettyCronExpression);

                                         // need to remove the old dialog and reattach with the new cron expression as the arg.
                                         $($dialogTrigger).unbind("click." + opts.eventNamespace);
                                         attachCronDialog(result.cronExpression);
                                     },

                                     attachCronDialog = function (cron)
                                     {
                                         simpleDialogForm($dialogTrigger, opts.contextPath + "/ajax/editCronExpression.action?cronExpression=" + encodeURIComponent(cron),
                                                          620, 480, opts.dialogSubmitButtonText, "ajax", addCronExpression, null, opts.dialogHeadingText, opts.eventNamespace);
                                     };

                             // generate pretty string
                             $.get(opts.contextPath + "/ajax/getPrettyCronExpression.action?cronExpression=" + encodeURIComponent(initialCron), function (result)
                             {
                                 $this.text(result.prettyCronExpression);
                             });

                             // add the link to the right spot - needed cause it avoids playing with the form templates.
                             $dialogTrigger.insertAfter($this);

                             attachCronDialog(initialCron);
                         });

    };

    /**
     * Replaces an element containing a cron expression with the pretty version of that expression.
     *
     * Usage:  e.g. AJS.$("#element").cronBuilder(${req.contextPath});
     *
     */
    $.fn.cronDisplay = function (contextPath)
    {
        return this.each(function ()
                         {
                             var $this = $(this),
                                     cron = $this.text();

                             // generate pretty string
                             $.get(contextPath + "/ajax/getPrettyCronExpression.action?cronExpression=" + encodeURIComponent(cron), function (result)
                             {
                                 $this.text(result.prettyCronExpression);
                             });
                         });
    };
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jquery/plugins/bamboo/reload-image.js' */
(function ($) {
    $.fn.reloadImage = function (options) {
        var defaults = {
            text: "Reload image",
            cssClass: "image-reload"
        };
        var opts = $.extend(defaults, options);

        return this.each(function () {
            var $this = $(this);
            $('<span class="' + opts.cssClass + '" title="' + opts.text + '" />').insertAfter($this).click(function (e) {
                var src = $this.attr("src"),
                    pos = src.indexOf("&v="),
                    date = new Date();
                if (pos >= 0) {
                    src = src.substr(0, pos);
                }
                $this.attr("src", src + "&v=" + date.getTime());
                e.preventDefault();
            });
        });
    }
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/build-decorator.js' */
(function ($, BAMBOO) {
    BAMBOO.BUILDRESULT = {};
    BAMBOO.PLAN = {};

    BAMBOO.BUILDRESULT.StatusRibbon = function (opts) {
        var defaults = {
                ribbonSelector: null,
                key: null,
                progressBarContainerSelector: '.status-ribbon-progress-bar'
            },
            options = $.extend(true, defaults, opts),
            isJobResult,
            $ribbon,
            $progressBar,
            $buildingForText,
            updateProgressBar = function (progress) {
                var progressPercentage = Math.ceil(100 - (progress['percentageCompleted'] * 100));
                if (!$progressBar.length) {
                    $progressBar = $('<div />', { id: 'sr-pb-' + options.key }).progressBar().appendTo($ribbon.find(options.progressBarContainerSelector));
                    $ribbon.trigger('createprogressbar.buildresult', [ progress ]);
                }
                if (progressPercentage < $progressBar.progressBar('option', 'value')) { // this progress bar works backwards
                    $progressBar.progressBar('option', 'value', progressPercentage);
                }
                updateBuildTime(progress[(progress['averageBuildDuration'] > 0 ? 'prettyTimeRemaining' : 'prettyBuildTime')], { prefix: '&ndash; ' });
                $ribbon.trigger('updateprogressbar.buildresult', [ progress ]);
                if (progressPercentage > 0)
                {
                    Piecon.setOptions({fallback: 'force'});
                    Piecon.setProgress(100 - progressPercentage);
                }
                else
                {
                    Piecon.reset();
                }
            },
            updateBuildTime = function (time, options) {
                options || (options = {});
                var prefix = options['prefix'] || '';
                var suffix = options['suffix'] || '';

                if (!$buildingForText.length) { return; }
                if (time) {
                    $buildingForText.text(time + suffix).prepend(prefix).show();
                } else {
                    $buildingForText.hide();
                }
            },
            res = {
                refresh: function (e, json) {
                    var progress, stages = json['stages']['stage'];

                    if (isJobResult) {
                        if (stages.length) {
                            for (var i = 0, ii = stages.length; i < ii && !progress; i++) {
                                var jobs = stages[i]['results']['result'];

                                for (var j = 0, jj = jobs.length; j < jj; j++) {
                                    var job = jobs[j];

                                    if (job['key'] == options.key) {
                                        progress = job['progress'];
                                        if (job['queued']) {
                                            updateBuildTime(job['prettyQueuedTime']);
                                        } else if (job['updatingSource']) {
                                            updateBuildTime(job['prettyVcsUpdateDuration']);
                                        } else if (progress) {
                                            updateProgressBar(progress);
                                        }
                                        break;
                                    }
                                }
                            }
                        }
                    } else {
                        progress = json['progress'];
                        if (!progress['buildTime']) {
                            updateBuildTime(json['prettyQueuedTime']);
                        } else {
                            updateProgressBar(progress);
                        }
                    }
                }
            };

        $(function () {
            $ribbon = $(options.ribbonSelector);
            $progressBar = $ribbon.find('.progress');
            $buildingForText = $ribbon.find('.operation-time');
            isJobResult = $ribbon.hasClass('has-job');
            $(document).bind('update.buildresult', res.refresh);
        });

        return res;
    };

    BAMBOO.BUILDRESULT.PlanNavigator = function (opts) {
        var defaults = {
                planNavigatorSelector: null,
                key: null
            },
            options = $.extend(true, defaults, opts),
            $planNavigator,
            $stageElements,
            hiddenClass = 'collapsed',
            updateIcon = function ($icon, iconType) {
                $icon.replaceWith(widget.icons.statusIcon({ status: iconType }));
            },
            togglePlanNav = function () {
                if ($planNavigator.parent().hasClass(hiddenClass)) {
                    $planNavigator.parent().removeClass(hiddenClass);
                    $(this).attr('title', "Hide");
                } else {
                    $planNavigator.parent().addClass(hiddenClass);
                    $(this).attr('title', "Show");
                }
            },
            addPlanNavToggle = function () {
                $('<button />', { title: ($planNavigator.parent().hasClass(hiddenClass) ? "Show" : "Hide"), id: 'plan-nav-toggle', click: togglePlanNav }).insertAfter($planNavigator);
            },
            res = {
                refresh: function (e, json) {
                    var jobs = [], stages = json['stages']['stage'];

                    if (stages.length) {
                        for (var i = 0, ii = stages.length, k = stages[0].index; i < ii; i++, k++) {
                            var stage = stages[i],
                                $stageElement = $($stageElements[k]),
                                $stageIcon = $('.stageIcon', $stageElement);

                            jobs = jobs.concat(stage['results']['result']);
                            if (stage['isBuilding']) {
                                $stageElement.removeClass('Pending').addClass('InProgress');
                                if ($stageIcon.length) {
                                    updateIcon($stageIcon, 'stage-InProgress stageIcon');
                                }
                            } else if (stage['isCompleted']) {
                                $stageElement.removeClass('Pending InProgress').addClass(stage['isSuccessful'] ? 'Successful' : 'Failed');
                                if ($stageIcon.length) {
                                    updateIcon($stageIcon, stage['isSuccessful'] ? 'stage-Successful stageIcon' : 'stage-Failed stageIcon');
                                }
                            } else {
                                $stageElement.addClass('Pending');
                                if ($stageIcon.length) {
                                    updateIcon($stageIcon, 'stage-Pending stageIcon');
                                }
                            }
                        }
                        for (var j = 0, jj = jobs.length; j < jj; j++) {
                            var job = jobs[j],
                                $job = $('#job-' + job['key']),
                                $icon = $job.find('.aui-icon, .icon'),
                                $progress = $job.find('.progress'),
                                progressPercentage;

                            $job.trigger('updatejob.buildresult', [ job ]);
                            
                            if (job['finished']) {
                                updateIcon($icon, job['state']);
                                if ($progress.length) {
                                    $progress.remove();
                                }
                            } else if (job['progress'] && !job['queued']) {
                                progressPercentage = Math.ceil(100 - (job['progress']['percentageCompleted'] * 100));
                                updateIcon($icon, 'InProgress');
                                if (!$progress.length) {
                                    $progress = $('<div />', { id: 'navPb' + job['key'] }).progressBar().prependTo($job);
                                }
                                if (progressPercentage < $progress.progressBar('option', 'value')) { // this progress bar works backwards
                                    $progress.progressBar('option', 'value', progressPercentage);
                                }
                            } else {
                                updateIcon($icon, 'Queued');
                            }
                        }
                    }
                }
            };

        $(function () {
            $planNavigator = $(options.planNavigatorSelector);
            $stageElements = $planNavigator.find("> ul > li");
            addPlanNavToggle();
            $(document).bind('update.buildresult', res.refresh);
        });

        return res;
    };

    BAMBOO.BUILDRESULT.BuildResult = (function () {
        var opts = {
                currentKey: null,
                getStatusUrl: null,
                jobStatus: null,
                isActive: false,
                ribbonSelector: '#status-ribbon'
            },
            planNavigator,
            statusRibbon,
            getJobStatus = function (job) {
                if (job['finished']) {
                    return job['state'];
                } else if (job['waiting']) {
                    return "Pending";
                } else if (job['progress'] && !job['queued']) {
                    if (job['updatingSource']) {
                        return "updatingSource";
                    } else {
                        return "InProgress";
                    }
                } else {
                    return "Queued";
                }
            },
            updateTimeout,
            update = function () {
                $.ajax({
                    url: opts.getStatusUrl,
                    cache: false,
                    data: {
                        expand: "stages.stage.results.result"
                    },
                    dataType: "json",
                    contentType: "application/json",
                    success: function (json) {
                        if (json['finished']) {
                            reloadThePage();
                            return;
                        }

                        $(document).trigger('update.buildresult', [ json ]);

                        // Update again in 5 seconds
                        updateTimeout = setTimeout(update, 5000);
                    },
                    error: function (XMLHttpRequest) {
                        // 404 for status means either no such result key exists OR build is not executing
                        // both cases are a good reason to reload, otherwise just wait
                        if (XMLHttpRequest.status == 404) {
                            reloadThePage();
                            return;
                        }
                        // Error occurred when doing the update, try again in 30 sec
                        updateTimeout = setTimeout(update, 30000);
                    }
                });
            },
            refreshDetails = function (e, progress) {
                if (progress) {
                    $(".started + dd > time").attr("datetime", progress['startedTimeFormatted']).html(progress['startedTime'] + ' &ndash; <span>' + progress['prettyStartedTime'] + '</span>');
                }
            },
            onJobUpdated = function (e, job) {
                if (opts.jobStatus && job['key'] == opts.currentKey && opts.jobStatus != getJobStatus(job)) {
                    reloadThePage();
                }
            };

        return {
            init: function (options) {
                $.extend(true, opts, options);

                if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
                    $(function () {
                        $(opts.ribbonSelector).prepend('<span class="before"></span>').append('<span class="after"></span>');
                    });
                }

                planNavigator = new BAMBOO.BUILDRESULT.PlanNavigator({ planNavigatorSelector: '#plan-navigator', key: opts.currentKey });

                if (opts.isActive) {
                    $(document)
                        .bind('updateprogressbar.buildresult', refreshDetails)
                        .bind('updatejob.buildresult', onJobUpdated)
                        .bind('createprogressbar.buildresult', function () { reloadThePage(); }); // TODO: Remove this when we can update the build results page dynamically without needing to refresh manually

                    statusRibbon = new BAMBOO.BUILDRESULT.StatusRibbon({ ribbonSelector: opts.ribbonSelector, key: opts.currentKey });

                    update();
                }
            }
        }
    }());

    BAMBOO.PLAN.LinkedJiraIssueDescription = (function (opts) {
        var options = $.extend(true, {
                planKey: null,
                issueSelector: '.plan-description'
            }, opts),
            $description = $(options.issueSelector),
            issueKey = $description.data('jiraIssueKey'),
            keyLink = AJS.contextPath() + '/project/jiraRedirect.action?jiraIssueKey=' + issueKey,
            remoteJiraLinkRequired = $description.data('remoteJiraLinkRequired');

        $(bamboo.feature.jiraIssueList.singleIssueLoading({
            key: issueKey,
            keyLink: keyLink
        })).appendTo($description);
        $.ajax({
            url: AJS.contextPath() + '/rest/api/latest/plan/' + options.planKey + '/issue/' + issueKey,
            cache: false,
            dataType: 'json'
        }).done(update).fail(error);

        function update(issue, textStatus, jqXHR) {
            var summary = issue['summary'];

            if (summary) {
                $description.html(bamboo.feature.jiraIssueList.singleIssue(issue));
                if (remoteJiraLinkRequired) {
                    showRemoteJiraLinkButton();
                }
            } else {
                error(jqXHR);
            }
        }
        function error(jqXHR) {
            var response, authUrl, authInstance;

            try {
                response = $.parseJSON(jqXHR.responseText);
                authUrl = response['authenticationRedirectUrl'];
                authInstance = response['authenticationInstanceName'] || "Jira";
            }
            catch (e) {}
            if (authUrl) {
                $description.html(bamboo.feature.jiraIssueList.singleIssueOAuth({
                    key: issueKey,
                    keyLink: keyLink,
                    authenticationRedirectUrl: authUrl + '&redirectUrl=' + encodeURIComponent(document.location.href),
                    authenticationInstanceName: authInstance
                }));
            } else {
                $description.html(bamboo.feature.jiraIssueList.singleIssueRetrievalError({
                    key: issueKey,
                    keyLink: keyLink
                }));
            }
        }
        function showRemoteJiraLinkButton() {
            var disabledProperty = 'aria-disabled',
                $button = $('<button/>', { 'class': 'aui-button aui-style', text: "Create link in Jira" }).click(initiateLink).insertAfter($description),
                $icon = $(widget.icons.icon({ type: 'loading' }));

            function initiateLink() {
                if (!$button.attr(disabledProperty)) {
                    $button.attr(disabledProperty, true).append($icon);

                    $.ajax({
                        url: AJS.contextPath() + '/ajax/createRemoteIssueLink.action',
                        cache: false,
                        dataType: 'json',
                        type: 'POST',
                        data: {
                            planKey: options.planKey,
                            issueKey: issueKey
                        }
                    }).done(linkCreated).fail(linkFailed);
                }
            }
            function linkCreated(response, textStatus, jqXHR) {
                if (response['status'] == "ERROR") {
                    linkFailed(jqXHR);
                } else {
                    $icon.replaceWith(widget.icons.icon({ type: 'tick-agent' }));
                    setTimeout(function () {
                        $button.fadeOut(function () { $(this).remove(); });
                    }, 1500);
                }
            }
            function linkFailed(jqXHR) {
                var response, authUrl, authInstance, authMessage, errors;

                try {
                    response = $.parseJSON(jqXHR.responseText);
                    errors = response['errors'];
                    authUrl = response['authorisationURI'];
                    authInstance = response['context'] || "Jira";
                    authMessage = response['message'];
                }
                catch (e) {}

                if (authUrl) {
                    showMessageDialog(authMessage, BAMBOO.buildAUIMessage([ bamboo.feature.jiraIssueList.linkedIssueOAuth({
                        authenticationRedirectUrl: authUrl + '&redirectUrl=' + encodeURIComponent(document.location.href),
                        authenticationInstanceName: authInstance,
                        reason: 'in order to create a remote issue link'
                    }) ], 'warning', { escapeTitle: false }));
                } else {
                    if (!errors || !errors.length) {
                        errors = [ "Unable to link Jira issue to branch" ];
                    }
                    showMessageDialog("Error while linking Jira issue to branch", BAMBOO.buildAUIErrorMessage(errors));
                }
                $button.removeAttr(disabledProperty);
                $icon.remove();
            }
            function showMessageDialog(title, content) {
                var dialog = new AJS.Dialog({
                    width: 600
                }).addHeader(title).addPanel('', content).addButton("Close", function () { dialog.remove(); });

                dialog.show().updateHeightProperly();
            }
        }
    });
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/bamboo.js' */
//  ######
//  #     #  ######  #####   #####   ######   ####     ##     #####  ######  #####
//  #     #  #       #    #  #    #  #       #    #   #  #      #    #       #    #
//  #     #  #####   #    #  #    #  #####   #       #    #     #    #####   #    #
//  #     #  #       #####   #####   #       #       ######     #    #       #    #
//  #     #  #       #       #   #   #       #    #  #    #     #    #       #    #
//  ######   ######  #       #    #  ######   ####   #    #     #    ######  #####

var pageVisibilityManager = require('widget/page-visibility-manager');
var simpleSelect2 = require('widget/simple-select2');

// Constants
var BAMBOO_DASH_DISPLAY_TOGGLES = "bamboo.dash.display.toggles",
    BAMBOO_EVENT_ON_DASHBOARD_RELOADED = "BAMBOO_EVENT_ON_DASHBOARD_RELOADED";

window.BAMBOO = (window.BAMBOO || {});
BAMBOO.fastServerPollMillis = 5000;
BAMBOO.mediumServerPollMillis = 10000; // This polling interval is only used in one place. Should we replace it with fastServerPoll or slowServerPoll?
BAMBOO.slowServerPollMillis = 15000;
BAMBOO.afterErrorServerPollMillis = 30000;
BAMBOO.reloadDashboardTimeout = 20; // Seconds

//
// Display the given help page in a separate window
//
function openHelp(helpPage) {
    window.open(helpPage, 'manualPopup', 'width=770,height=550,scrollbars=yes,status=yes,resizable=yes');
}

function reloadThePage() {
    window.location.reload(true);
}

function redirectAfterReturningFromDialog(response) {
    if (response.redirectUrl) {
        window.location = AJS.contextPath() + response.redirectUrl;
    } else {
        reloadThePage();
    }
}

function isDefinedObject(reference) {
    return (typeof reference !== "undefined") && (reference !== null);
}

if (!jQuery.isNumeric) {
    jQuery.isNumeric = function (n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
    };
}

/**
 * Any href clicked with rel=help (e.g. our help bubbles) will open in new window.
 * Any element with id=addPlanLabel will trigger the edit labels dialog
 * Applies to all of Bamboo.
 **/
AJS.$(document).delegate("a[rel~='help']", "click", function (e) {
    var $this = AJS.$(this);
    e.preventDefault();
    if ($this.data('useHelpPopup')) {
        openHelp(this.href);
    } else {
        window.open(this.href);
    }
});


/**
 * Workaround for Cancel links in Dialog which append a hash to URL by default
 */
AJS.$("a.button-panel-link[href='#']").live("click", function (e) {
    e.preventDefault();
});

/**
 * AJS.BambooDialog
 */
AJS.BambooDialog = function (options, onSubmitCallback, onCancelCallback) {
    var dialog;
    options = options || {};
    options = jQuery.extend({}, options, {
        keypressListener: function (e) {
            if (e.which == jQuery.ui.keyCode.ESCAPE) {
                if (isDefinedObject(onCancelCallback)) {
                    onCancelCallback(dialog);
                } else {
                    dialog.remove();
                }
            } else if (e.which == jQuery.ui.keyCode.ENTER && isDefinedObject(onSubmitCallback)) {
                onSubmitCallback(dialog);
                if (options.submitMode && options.submitMode == "ajax") {
                    e.preventDefault();
                }
            }
        }
    });
    dialog = new AJS.Dialog(options);
    return dialog;
};
AJS.Dialog.prototype.addHelpText = function (template, args) {
    if (!template) {
        // Don't do anything if there is no text to add.
        // This stops us printing 'undefined'.
        return;
    }

    var text = template;
    if (args) {
        text = AJS.template(template).fill(args).toString();
    }

    var page = this.page[this.curpage];
    if (!page.buttonpanel) {
        page.addButtonPanel();
    }

    // The text may include html i.e. links or strongs
    var tip = AJS.$("<div class='dialog-tip'></div>").html(text);
    page.buttonpanel.append(tip);
    tip.find("a").click(function () {
        window.open(this.href, '_blank').focus();
        return false;
    });
};
AJS.Dialog.prototype.updateHeightProperly = function () {
    this.updateHeight();
    this.getCurrentPanel().body.css('height', '');
};

String.prototype.replaceAll = function (pcFrom, pcTo) {
    var MARKER = "js___bmbo_mrk",
        i = this.indexOf(pcFrom),
        c = this;
    while (i > -1) {
        c = c.replace(pcFrom, MARKER);
        i = c.indexOf(pcFrom);
    }

    i = c.indexOf(MARKER);
    while (i > -1) {
        c = c.replace(MARKER, pcTo);
        i = c.indexOf(MARKER);
    }

    return c;
};


if (!jQuery.generateId) {
    jQuery.generateId = function () {
        return arguments.callee.prefix + arguments.callee.count++;
    };
    jQuery.generateId.prefix = 'jq-';
    jQuery.generateId.count = 0;

    jQuery.fn.generateId = function () {
        return this.each(function () {
            this.id = jQuery.generateId();
        });
    };
}

// Cookie handling functions

function saveToConglomerateCookie(cookieName, name, value) {
    var cookieValue = getCookieValue(cookieName);
    cookieValue = addOrAppendToValue(name, value, cookieValue);

    saveCookie(cookieName, cookieValue, 365);
}

function readFromConglomerateCookie(cookieName, name, defaultValue) {
    var cookieValue = getCookieValue(cookieName);
    var value = getValueFromCongolmerate(name, cookieValue);
    if (value != null) {
        return value;
    }

    return defaultValue;
}

function getValueFromCongolmerate(name, cookieValue) {
    // a null cookieValue is just the first time through so create it
    if (cookieValue == null) {
        cookieValue = "";
    }
    var eq = name + "-";
    var cookieParts = cookieValue.split('|');
    for (var i = 0; i < cookieParts.length; i++) {
        var cp = cookieParts[i];
        while (cp.charAt(0) == ' ') {
            cp = cp.substring(1, cp.length);
        }
        // rebuild the value string exluding the named portion passed in
        if (cp.indexOf(name) == 0) {
            return cp.substring(eq.length, cp.length);
        }
    }
    return null;
}

//either append or replace the value in the cookie string
function addOrAppendToValue(name, value, cookieValue) {
    var newCookieValue = "";
    // a null cookieValue is just the first time through so create it
    if (cookieValue == null) {
        cookieValue = "";
    }

    var cookieParts = cookieValue.split('|');
    for (var i = 0; i < cookieParts.length; i++) {
        var cp = cookieParts[i];

        // ignore any empty tokens
        if (cp != "") {
            while (cp.charAt(0) == ' ') {
                cp = cp.substring(1, cp.length);
            }
            // rebuild the value string exluding the named portion passed in
            if (cp.indexOf(name) != 0) {
                newCookieValue += cp + "|";
            }
        }
    }

    // always append the value passed in if it is not null or empty
    if (value != null && value != '') {
        var pair = name + "-" + value;
        if ((newCookieValue.length + pair.length) < 4020) {
            newCookieValue += pair;
        }
    }
    return newCookieValue;
}

function getCookieValue(name, defaultString) {
    var eq = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1, c.length);
        }
        if (c.indexOf(eq) == 0) {
            return c.substring(eq.length, c.length);
        }
    }

    return defaultString;
}

function saveCookie(name, value, days) {
    var ex;
    if (days) {
        var d = new Date();
        d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
        ex = "; expires=" + d.toGMTString();
    }
    else {
        ex = "";
    }
    document.cookie = name + "=" + value + ex + ";path=" + (!AJS.contextPath().length ? "/" : AJS.contextPath());
}

function toggleOn(e, toggleGroup_id) {
    var onToggle = document.getElementById(toggleGroup_id + "_toggler_on");
    var offToggle = document.getElementById(toggleGroup_id + "_toggler_off");
    var target = document.getElementById(toggleGroup_id + "_target");
    onToggle.style.display = 'block';
    offToggle.style.display = 'none';
    target.style.display = 'block';
    saveToConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, toggleGroup_id, null);
}

function toggleOff(e, toggleGroup_id) {
    var onToggle = document.getElementById(toggleGroup_id + "_toggler_on");
    var offToggle = document.getElementById(toggleGroup_id + "_toggler_off");
    var target = document.getElementById(toggleGroup_id + "_target");
    onToggle.style.display = 'none';
    offToggle.style.display = 'block';
    target.style.display = 'none';
    saveToConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, toggleGroup_id, '0');
}

function restoreTogglesFromCookie(toggleGroup_id) {
    var elem = document.getElementById(toggleGroup_id + "_target");
    if (elem) {
        if (readFromConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, toggleGroup_id, null) == '0') {
            toggleOff(null, toggleGroup_id);
        }
        else {
            toggleOn(null, toggleGroup_id);
        }
    }
}

// Forms JS
function toggleContainingCheckbox(e) {
    if (e && e.target.tagName == "INPUT") {
        return true;
    }

    AJS.$(this).find("input:checkbox").each(function () {
        this.checked = !this.checked;
    });

    return true;
}

function toggleIconOff(dom) {
    dom.src = dom.src.replace('_on.', '_off.');
}

function toggleIconOn(dom) {
    dom.src = dom.src.replace('_off.', '_on.');
}

/*
*   For user picker - when you click "Check All' all the select boxes are changed
*/
var selectedBoxes = [];

function setCheckboxes() {
    var numelements = document.selectorform.elements.length;
    var item0 = document.selectorform.elements[0];
    var item1;

    for (var i = 1; i < numelements; i++) {
        item1 = document.selectorform.elements[i];
        item1.checked = item0.checked;
        if (!selectedBoxes[item1.name])
            selectedBoxes[item1.name] = [];
        selectedBoxes[item1.name][item1.value] = item1.checked;
    }
}

/*
*  For User Picker - checkboxes are named after users so by compiling a list of all selected checkboxes
*   we have a list of users (comma seperated)
*/
function getEntityNames() {
    var numelements = document.selectorform.elements.length;
    var item;
    var checkedList = "";

    var sep = "";
    for (var i = 0; i < numelements; i++) {
        item = document.selectorform.elements[i];
        if (item != null && item.type == "checkbox" && item.name != "all" && item.checked == true) {
            var itemValue = item.value;
            itemValue = itemValue.replace(/\\/g, "\\\\").replace(/,/g, "\\,");
            checkedList = checkedList + sep + itemValue;
            sep = ", ";
        }
    }

    return checkedList;
}

/*
*   For User Picker - takes comma seperated list of users and places them in specified field.
*/
function addUsers(commaDelimitedUserNames, fieldID, multiSelect) {
    var element = document.getElementById(fieldID);
    var currentUsers = element.value;
    if (!multiSelect) {
        element.value = commaDelimitedUserNames;
    } else if (currentUsers != null && currentUsers != "") {
        element.value = currentUsers + ", " + commaDelimitedUserNames;
    } else {
        element.value = commaDelimitedUserNames;
    }
}

function updatePlan(plan, toHide, toShow) {
    var STATUS_PREFIX = 'statusSection';
    var REASON_PREFIX = 'reasonSummary';
    var DURATION_PREFIX = 'durationSummary';
    var LAST_BUILT = 'lastBuiltSummary';
    var TESTCOUNT_PREFIX = 'testSummary';
    var LATEST_BUILD_PREFIX = 'latestBuild';
    var PLAN_PROPS = [LATEST_BUILD_PREFIX, REASON_PREFIX, DURATION_PREFIX, TESTCOUNT_PREFIX, LAST_BUILT];

    try {
        var planKey = plan.planKey;

        //the following for loops have len initialised as such for improved performance
        for (var i = 0, len = PLAN_PROPS.length; i < len; i++) {
            var propPrefix = PLAN_PROPS[i];
            var elem = AJS.$("#" + propPrefix + planKey);
            if (LATEST_BUILD_PREFIX == propPrefix) {
                // Update the status when first item and clear the existing classes on this element

                elem.closest(".planKeySection").attr('class', 'planKeySection ' + plan.statusClass);
            }
            elem.html(plan[propPrefix]);
        }

        var iconClass = {
            'icon-disabled': 'aui-icon aui-icon-small aui-iconfont-plan-disabled',
            'icon-building': 'aui-icon aui-icon-small aui-iconfont-running-build',
            'icon-queued': 'aui-icon aui-icon-small aui-iconfont-queued-build',
            'icon-successful': 'aui-icon aui-icon-small aui-iconfont-successful-build',
            'icon-failed': 'aui-icon aui-icon-small aui-iconfont-failed-build',
            'icon-notbuilt': 'aui-icon aui-icon-small aui-iconfont-incomplete-build'
        }[plan.statusIconClass] || 'icon ' + plan.statusIconClass;

        AJS.$("#" + STATUS_PREFIX + planKey).find(".icon, .aui-icon").each(function () {
            if (!AJS.$(this).hasClass(plan.statusIconClass)) {
                AJS.$(this).removeAttr('class').addClass(iconClass).attr("title", plan.statusText);
            }
        });

        //Update link
        var link = AJS.$("a#" + STATUS_PREFIX + planKey);
        if (link.length) {
            if (plan.lastResultKey != null) {
                link.attr("href", AJS.contextPath() + "/browse/" + plan.lastResultKey);
            } else {
                link.attr("href", AJS.contextPath() + "/browse/" + planKey);
            }
        }

        // Update favourites
        var faves = AJS.$('#favouriteIconFor_' + planKey);
        for (var i = 0, len = faves.length; i < len; i++) {
            var fave = faves.get(i);
            if (plan.favourite) {
                toggleIconOn(fave);
            }
            else {
                toggleIconOff(fave);
            }
        }

        if (plan.suspendedFromBuilding) {
            toShow.push('#resumeBuild_' + planKey);
            toHide.push('#stopSingleBuild_' + planKey, '#stopMultipleBuilds_' + planKey, '#manualBuild_' + planKey);
        } else {
            toHide.push('#resumeBuild_' + planKey);
            if (plan.allowStop) {
                toHide.push('#manualBuild_' + planKey);
                if (plan.numberOfCurrentlyBuildingPlans > 1) {
                    toHide.push('#stopSingleBuild_' + planKey);
                    toShow.push('#stopMultipleBuilds_' + planKey);
                } else {
                    toShow.push('#stopSingleBuild_' + planKey);
                    toHide.push('#stopMultipleBuilds_' + planKey);
                }
            } else {
                toHide.push('#stopSingleBuild_' + planKey, '#stopMultipleBuilds_' + planKey);
                toShow.push('#manualBuild_' + planKey);
            }
        }
    } catch (ex) {
        //alert(ex);
        console.warn(ex);
    }
}

function updatePlans(sinceSystemTime) {
    // Make the call to the server for JSON data
    if (!sinceSystemTime) sinceSystemTime = 0;

    var $showMoreTrigger = AJS.$(".show-more-plans");
    var lastProjectKey = $showMoreTrigger.length ? $showMoreTrigger.data("lastProjectKey") : "";

    // Define the callbacks for the asyncRequest
    var timeout,
        panelId = 'dashboardUpdatePlans',
        callbacks = {
            dataType: 'json',
            url: AJS.contextPath() + "/ajax/viewPlanUpdates.action",
            data: {
                sinceSystemTime: sinceSystemTime,
                lastProject: lastProjectKey
            },
            success: function (response) {
                if (!BAMBOO.reloadDashboard) return; // do nudda

                // Process the JSON data returned from the server
                try {
                    if (response.plans) {
                        var plans = response.plans,
                            toHide = [], toShow = [];
                        //Using toHide/toShow arrays here and deferring hide/show improved performance 20x,
                        //do not change it without heavy performance testing (on 2000 top level plans) please
                        for (var i = 0, len = plans.length; i < len; i++) {
                            var plan = plans[i];
                            updatePlan(plan, toHide, toShow);
                        }
                        if (toHide.length) {
                            AJS.$(toHide.join(',')).hide();
                        }
                        if (toShow.length) {
                            AJS.$(toShow.join(',')).show();
                        }
                    }
                } catch (x) {
                    console.warn("JSON Parse failed! " + x + "\n", response);
                }

                sinceSystemTime = response ? response.currentTime : 0;

                BAMBOO.panelTimeouts[panelId] = setTimeout(function () {
                    updatePlans(sinceSystemTime);
                }, BAMBOO.reloadDashboardTimeout * 1000);
                hideAjaxErrorMessage();
                AJS.$("body").trigger(BAMBOO_EVENT_ON_DASHBOARD_RELOADED);
            },
            error: function (XMLHttpRequest) {
                showAjaxErrorMessage(XMLHttpRequest);
            },
            timeout: 60000
        };

    if (typeof BAMBOO.panelTimeouts === "undefined") {
        BAMBOO.panelTimeouts = {};
    } else {
        timeout = BAMBOO.panelTimeouts[panelId];
        clearTimeout(timeout);
    }
    AJS.$.ajax(callbacks);
}

function reloadPanel(id, url, reloadEvery, loadScripts, previousText, callback) {
    var timeout;
    if (typeof BAMBOO.panelTimeouts === "undefined") {
        BAMBOO.panelTimeouts = {};
    } else {
        timeout = BAMBOO.panelTimeouts[id];
        clearTimeout(timeout);
    }
    AJS.$.get(processReloadUrl(url), function (data) {
        var reponseText = data;

        if (!document.getElementById(id)) {
            return false;
        } // don't bother updating if the target isn't available to update

        if (!previousText || previousText != reponseText) {
            // only update if the previous response is different
            updateDomObject(reponseText, id, loadScripts, callback);
        }
        if (reloadEvery) {
            BAMBOO.panelTimeouts[id] = setTimeout(function () {
                reloadPanel(id, url, reloadEvery, loadScripts, reponseText, callback);
            }, reloadEvery * 1000);
        }
    });
}

function processReloadUrl(url) {
    if (BAMBOO.buildLastCurrentStatus) {
        var indexOfCurrentStatus = url.indexOf("&lastCurrentStatus");
        if (indexOfCurrentStatus != -1) {
            url = url.substring(0, indexOfCurrentStatus);
        }

        return url + "&lastCurrentStatus=" + BAMBOO.buildLastCurrentStatus;

    }
    else {
        return url;
    }
}

function updateDomObject(html, targetId, loadScripts, callback) {
    if (typeof html == 'undefined') {
        html = '';
    }
    if (loadScripts !== true) {
        AJS.$("#" + targetId).html(html);
        if (AJS.$.isFunction(callback)) {
            AJS.$("#" + targetId).each(callback);
        }
        return;
    }
    var id = AJS.$.generateId();
    html += '<span id="' + id + '"></span>';

    AJS.$("#" + id).ready(function () {
        var hd = document.getElementsByTagName("head")[0];
        var re = /(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img;
        var srcRe = /\ssrc=([\'\"])(.*?)\1/i;
        var match;
        while (match = re.exec(html)) {
            var srcMatch = match[0].match(srcRe);
            if (srcMatch && srcMatch[2]) {
                var s = document.createElement("script");
                s.src = srcMatch[2];
                hd.appendChild(s);
            } else if (match[1] && match[1].length > 0) {
                eval(match[1]);
            }
        }
        var el = document.getElementById(id);
        if (el) {
            el.parentNode.removeChild(el);
        }
    });
    var newHtml = html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img, '');

    AJS.$('#' + targetId)
        .html(newHtml)
        .find('.aui-message').each(function () {
        // Because we define AUI messages in an old way (div.aui-message instead of aui-message) we have to "setup" them manually.
        // Currently "setup" method doesn't accept message as an arguments so here we have to call two methods "setup" calls.
        AJS.messages.makeCloseable(this);
        AJS.messages.makeFadeout(this);
    });

    if (AJS.$.isFunction(callback)) {
        AJS.$("#" + targetId).each(callback);
    }
    return;
}


function updateInlineSection(url, sectionName) {
    AJS.$.get(processReloadUrl(url), function (data) {
        updateDomObject(data, sectionName, "true", "null");
    });
}

function addConfirmationToLinks() {
    require(['jquery'], function ($) {
        var handleDialog2Confirm = function (event, $el, Dialog2, Dialog2Confirmation) {
            event.preventDefault();
            new Dialog2Confirmation({
                titleText: $el.attr('data-confirmation-title'),
                content: $el.attr('data-confirmation-content'),
                onConfirm: function (event) {
                    $el.trigger("clickMutativeLink");
                },
                size: Dialog2.MEDIUM,
            }).show();
        };

        var handleAlertConfirm = function (event, $el) {
            var isConfirmed = confirm('Please confirm that you are about to \n' + ($el.attr("title") ? $el.attr("title") : AJS.$.trim($el.text())));
            if (isConfirmed && $el.hasClass("mutative")) {
                event.preventDefault();
                $el.trigger("clickMutativeLink");
            }
            return isConfirmed;
        };

        $(document).on(
            'click',
            '.requireConfirmation',
            function (event) {
                var $el = $(this);
                var Dialog2 = require('widget/dialog2');
                var Dialog2Confirmation = require('widget/dialog2-confirmation');
                if ($el.hasClass('dialog2Confirmation')) {
                    if (typeof Dialog2Confirmation === "undefined") {
                        console.warn("widget/dialog2-confirmation not available, falling back to alert");
                        handleAlertConfirm(event, $el);
                    } else {
                        handleDialog2Confirm(event, $el, Dialog2, Dialog2Confirmation);
                    }
                } else {
                    return handleAlertConfirm(event, $el);
                }
            });
    });
}


/**
 * Build queue related stuff
 */
var buildQueue = function () {
    AJS.$(document).ready(function () {
        if (buildQueue) {
            buildQueue.portletReloadCallback();
        }
    });

    return {
        /**
         * Shows and hides Build Queue's action panels
         */
        displayActions: function (actionsId) {
            var prevActionsId = readFromConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, "buildQueueActions", actionsId);
            AJS.$("#builders").removeClass(prevActionsId);
            AJS.$("#builders").addClass(actionsId);

            saveToConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, "buildQueueActions", actionsId);
        },

        restoreDisplayActionsFromCookie: function () {
            this.displayActions(readFromConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, "buildQueueActions", "actions-queueControl"));
        },

        portletReloadCallback: function () {
            buildQueue.restoreDisplayActionsFromCookie();
        }
    };
}();


function initCommitsTooltip(targetId, planKey, buildNumber) {
    AJS.InlineDialog(AJS.$("#" + targetId),
        targetId,
        AJS.contextPath() + "/build/ajax/viewBuildCommits.action?buildKey=" + planKey + "&buildNumber=" + buildNumber,
        {onHover: true, fadeTime: 50, hideDelay: 0, showDelay: 100, width: 300, offsetX: 0, offsetY: 10});
}

function initCommentTooltip(targetId, planKey, buildNumber) {
    var link = AJS.$("#" + targetId);
    AJS.InlineDialog(link,
        targetId,
        AJS.contextPath() + "/build/ajax/viewBuildComments.action?buildKey=" + planKey + "&buildNumber=" + buildNumber,
        {onHover: true, fadeTime: 50, hideDelay: 0, showDelay: 100, width: 300, offsetX: 0, offsetY: 10});
}

/**
 * This function is not mentioned to be used directly but rather via @dj.simpleDialogForm FTL macro defined in dojo.ftl
 *
 * All the input params are also described in the dojo.ftl
 */
function simpleDialogForm(triggerSelector, getDialogBodyUrl, dialogWidth, dialogHeight, submitLabel, submitMode, submitCallback, cancelCallback, header, eventNamespace) {
    function clearAllErrors(formJQ) {
        formJQ.find('.error,.aui-message').remove();
    }

    function addActionError(formJQ, errors) {
        formJQ.find(".field-group:first").before(BAMBOO.buildAUIErrorMessage(errors));
    }

    function applyErrors(formJQ, result) {
        if (result.fieldErrors) {
            for (var fieldName in result.fieldErrors) {
                BAMBOO.addFieldErrors(formJQ, fieldName, result.fieldErrors[fieldName]);
            }
        }

        if (result.errors) {
            addActionError(formJQ, result.errors);
        }
    }

    /**
     * This is called where callee requests non-ajax submit.
     * 1st phase is to call validation via AJAX using form's action attribute and then submit form in a classical way.
     *
     * @param formJQ  form to be submitted
     */
    function validateSubmitForm(formJQ) {
        clearAllErrors(formJQ);

        function validationCallback(result) {
            if (result.status.toUpperCase() == "OK") {
                formJQ.submit();
            }
            else {
                applyErrors(formJQ, result);
            }
        }

        AJS.$.post(formJQ.attr("action"), formJQ.serialize() + '&bamboo.enableJSONValidation=true', validationCallback, "json");
    }

    /**
     * For Ajax submit there's no separate validation phase.
     * Assumption is made that action will validate itself and will return proper JSON response in case of validation errors.
     *
     * @param formJQ          jQuery wrapper for form
     * @param submitCallback
     */
    function ajaxSubmitForm(formJQ, submitCallback) {
        clearAllErrors(formJQ);

        function successCallback(result) {
            if (result.status.toUpperCase() == "OK") {
                submitCallback(result);
            }
            else {
                applyErrors(formJQ, result);
            }
        }

        function errorCallback(result) {
            if (result.status == 500) {
                addActionError(formJQ, Array("An internal server error has occurred. Please check the logs for more details."));
            }
            else {
                addActionError(formJQ, Array("An unknown error has occurred."));
            }
        }

        AJS.$.ajax({
            type: "POST",
            url: formJQ.attr("action"),
            data: formJQ.serialize(),
            success: successCallback,
            error: errorCallback,
            dataType: "json"
        });
    }

    function showDialog(linkElementJQ) {
        var $loading = AJS.$('<span class="icon icon-loading aui-dialog-content-loading" />'),
            $dialogForm = AJS.$("<div id='simpleDialogForm'/>").html($loading),
            setFocus = function () {
                var $firstError = $dialogForm.find(":input:visible:enabled.errorField:first").focus();
                if (!$firstError.length) {
                    $dialogForm.find(":input:visible:enabled:first").focus();
                }
            },
            onSubmitCallback = function (dialog) {
                var formJQ = AJS.$("#simpleDialogForm form");

                if (submitMode == "ajax") {
                    ajaxSubmitForm(formJQ, function (result) {
                        if (AJS.$.isFunction(submitCallback)) {
                            submitCallback(result);
                        }
                        dialog.remove();
                        $dialogForm.html($loading);
                    });
                } else {
                    validateSubmitForm(formJQ);
                }
            },
            onCancelCallback = function (dialog) {
                if (AJS.$.isFunction(cancelCallback)) {
                    cancelCallback();
                }
                dialog.remove();
                $dialogForm.html($loading);
            },
            $popup = new AJS.BambooDialog({
                width: dialogWidth,
                height: dialogHeight,
                submitMode: submitMode
            }, onSubmitCallback, onCancelCallback);

        $popup.addHeader(header != null ? header : linkElementJQ.attr('title'))
            .addPanel("I am invisible", $dialogForm)
            .addCancel("Cancel", onCancelCallback);

        AJS.$.get(getDialogBodyUrl, function (data) {
            $dialogForm.html(data);
            $popup.addSubmit(submitLabel, onSubmitCallback);
            $popup.getPage(0).button[1].moveLeft();
            setFocus();
            BAMBOO.DynamicFieldParameters.syncFieldShowHide($dialogForm, false);
        });
        $popup.show();
    }

    if (triggerSelector) {
        var namespace = "click";
        if (eventNamespace && eventNamespace.length) {
            namespace += "." + eventNamespace;
        }
        AJS.$(triggerSelector).bind(namespace, function (e) {
            showDialog(AJS.$(this));
            //disable the default behaviour (we don't want link to be followed when we display dialog)
            e.preventDefault();
        });
    } else {
        showDialog(AJS.$(this));
    }

}

/**
 * Asynchronous form handler
 * @param options
 *  - target        String - selector targeting the form
 *  - success       Function - handles JSON response from successful form submission
 *  - cancel        Function - handles what to do when the cancel link is clicked
 *  - formReplaced  Function - is fired after the form is replaced
 *  - $delegator    jQuery Object - where the event handler should be bound
 */
BAMBOO.asyncForm = function (options) {
    var $ = AJS.$,
        defaults = {
            target: null,
            success: null,
            cancel: null,
            formReplaced: null,
            error: null,
            $delegator: $(document),
            resetOnSuccess: false,
            loadingIconInsertionMethod: 'prepend'
        },
        handleSubmit = function (e) {
            var $form = $(this),
                cancelOnClick = function (e) {
                    e.stopPropagation();
                };

            e.preventDefault();
            $form.ajaxSubmit({
                data: {
                    "bamboo.successReturnMode": "json",
                    decorator: "nothing",
                    confirm: true
                },
                dataFilter: function (data) { //data contains HTML or escaped JSON embedded in a script tag
                    var scriptTagContent;
                    if (data.indexOf("<script") !== 0) {
                        return data;
                    }
                    scriptTagContent = data.substring(data.indexOf(">") + 1, data.lastIndexOf("</script"));
                    return scriptTagContent
                        .replaceAll("<\\!--", "<!--")
                        .replaceAll("<\\script", "<script")
                        .replaceAll("<\\/script", "</script")
                        .valueOf();
                },
                dataType: "html",
                beforeSerialize: function ($form, options) {
                    var fileInputs = $form.find('input:file').length > 0,
                        mp = 'multipart/form-data',
                        multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);

                    if (options.iframe !== false && (fileInputs || options.iframe || multipart)) {
                        this.data["bamboo.successReturnMode"] = "json-as-html";
                    }
                },
                beforeSubmit: function (formData, $form) {
                    $form
                        .find(".buttons")[options.loadingIconInsertionMethod]('<span class="icon icon-loading"/>')
                        .find('input:submit').prop('disabled', true).end()
                        .find('.cancel').addClass('disabled').on('click', cancelOnClick);
                },
                success: function (data) {
                    var $data, json, messages, warnings;

                    if (typeof data == "object") {
                        // Returned data is JSON
                        json = data;
                    } else {
                        // Returned data is string
                        try {
                            // Try to parse string as JSON
                            json = $.parseJSON(data);
                        }
                        catch (e1) {
                            // Must be HTML
                            $data = $(data);
                            try {
                                // Check if the response only contains a textarea, if so it probably just contains JSON
                                if ($data.length == 1 && !$data.children().length && $data.is("textarea")) {
                                    json = $.parseJSON($data[0].value);
                                }
                            }
                            catch (e2) {
                            }
                        }
                    }

                    if (json) {
                        $form.trigger("asyncform-success", [json]);

                        messages = json['messages'];
                        warnings = json['warnings'];
                        if (messages || warnings) {
                            $form.trigger("asyncform-notification", [messages, warnings]);
                        }

                        if (options.resetOnSuccess) {
                            $form
                                .find(".buttons").find('.icon-loading').remove().end()
                                .find('input:submit').prop('disabled', false).end()
                                .find('.cancel').removeClass('disabled').off('click', cancelOnClick);
                        }

                        options.success(json);
                    } else if ($data) {
                        $form.trigger("asyncform-replaced", [$data]);
                        // Returned data isn't JSON, isn't JSON in a textarea, assume it's straight HTML
                        if (!$data.is("form")) {
                            // Should have been a form, probably IE stripping the form element.
                            // Or the form element is hidden somewhere inside. Try to find it first (compare by id).
                            var formId = $form.get(0).id;
                            if (formId) {
                                var $nestedForm = $data.find('form[id="' + formId + '"]');
                                var formContents = $nestedForm.length ? $nestedForm.html() : $data;
                                $form.html(formContents);
                            } else {
                                $form.html($data);
                            }
                        } else {
                            // Data might contain few elements, we want to replace the form with a new form only
                            $form.replaceWith($data.filter('form'));
                        }
                        if ($.isFunction(options.formReplaced)) {
                            options.formReplaced($data);
                        }
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    $form.trigger("asyncform-error", [jqXHR, textStatus, errorThrown]);
                    if ($.isFunction(options.error)) {
                        options.error(jqXHR, textStatus, errorThrown);
                    } else {
                        var $dummy = $('<div />'), $stackTrace;

                        try {
                            $stackTrace = $(jqXHR.responseText).filter('pre');
                        }
                        catch (e) {
                        }

                        if (!$stackTrace || !$stackTrace.length) {
                            $stackTrace = $('<p/>', {text: errorThrown});
                        }

                        AJS.messages.error($dummy, {
                            title: "An unexpected error has occurred",
                            body: $stackTrace.wrap('<div/>').parent().html(),
                            closeable: false
                        });
                        $form.replaceWith($dummy.children());
                    }
                }
            });
        },
        handleCancel = function (e) {
            e.preventDefault();
            options.cancel(e);
        };

    options = $.extend(defaults, options);

    if ($.isFunction(options.success)) { // No point in an async form if there's no success callback to handle a successful post
        options.$delegator.undelegate(options.target, "submit.asyncform").delegate(options.target, "submit.asyncform", handleSubmit);
    }

    if ($.isFunction(options.cancel)) {
        options.$delegator.undelegate(options.target + " .cancel", "click.asyncform").delegate(options.target + " .cancel", "click.asyncform", handleCancel);
    }
};

/**
 * Handles form input in dialogs
 * @param options
 *  - trigger       String - selector targeting the element that triggers the popup
 *  - dialogWidth   Number - dialog width
 *  - dialogHeight  Number - dialog height
 *  - success       Function - handles JSON response from successful form submission
 *  - cancel        Function - handles what to do when the cancel link is clicked
 *  - header        String - header for the dialog
 */
BAMBOO.simpleDialogForm = function (options) {
    var defaults = {
        trigger: null,
        $trigger: null,
        dialogWidth: null,
        dialogHeight: null,
        success: null,
        cancel: null,
        header: null,
        help: null
    };
    options = AJS.$.extend(defaults, options);
    var $trigger = options.$trigger,
        $loading = AJS.$('<span class="icon icon-loading aui-dialog-content-loading" />'),
        $formContainer = AJS.$('<div class="aui-dialog-content"/>').html($loading),
        dialog,
        setFocus = function () {
            var $firstError = $formContainer.find(":input:visible:enabled.errorField:first").focus();
            if (!$firstError.length) {
                $formContainer.find(":input:visible:enabled:first").focus();
            }
        },
        setupDialogContent = function (html) {
            $formContainer.html(html);
            setupForm($formContainer.find("form"));
            BAMBOO.asyncForm({
                $delegator: $formContainer,
                target: "form",
                success: function (data) {
                    if (AJS.$.isFunction(options.success)) {
                        options.success(data);
                    }
                    dialog.remove();
                    $formContainer.html($loading);
                },
                cancel: function (e) {
                    e.preventDefault();
                    if (AJS.$.isFunction(options.cancel)) {
                        options.cancel(e);
                    }
                    dialog.remove();
                    $formContainer.html($loading);
                },
                formReplaced: setupForm
            });
        },
        setupForm = function ($dialogForm) {
            if (options.help) {
                addHelp();
            }
            setFocus();
            BAMBOO.DynamicFieldParameters.syncFieldShowHide($dialogForm, false);
        },
        showDialog = function () {
            dialog = new AJS.Dialog({
                width: options.dialogWidth,
                height: options.dialogHeight,
                keypressListener: function (e) {
                    if (e.which == jQuery.ui.keyCode.ESCAPE) {
                        dialog.remove();
                        $formContainer.html($loading);
                    }
                }
            });
            var header = options.header ? options.header : $trigger.attr("title");
            if (header) {
                dialog.addHeader(header);
            }
            dialog.addPanel("", $formContainer);

            // $trigger.attr("data-dialog-href") won't be needed once we're on jQuery 1.4.3
            AJS.$.ajax({
                url: $trigger.attr("href") || $trigger.data("dialog-href") || $trigger.attr("data-dialog-href"),
                data: {'bamboo.successReturnMode': 'json', decorator: 'nothing', confirm: true},
                success: setupDialogContent,
                cache: false
            });

            dialog.show();
        },
        addHelp = function () {
            return AJS.$('<div />', {
                'class': 'dialog-tip',
                html: options.help
            }).prependTo($formContainer.find('.buttons-container'));
        };

    if (options.trigger) {
        var namespace = "click";
        if (options.eventNamespace && options.eventNamespace.length) {
            namespace += "." + options.eventNamespace;
        }
        AJS.$(document).undelegate(options.trigger, namespace);
        AJS.$(document).delegate(options.trigger, namespace, function (e) {
            $trigger = AJS.$(this);
            e.preventDefault();
            showDialog();
        });
    } else {
        showDialog();
    }
};

/**
 * Displays confirmation dialog that is consistent in style with simpleDialogForm but with content
 * generated without additional server request.
 */
function simpleConfirmationDialog(dialogWidth, dialogHeight, content, header, submitLabel, cancelLabel, onSubmit, onCancel) {
    var confirmDialog = new AJS.BambooDialog({width: dialogWidth, height: dialogHeight, submitMode: "ajax"}),
        doSubmit = function (dialog) {
            if (AJS.$.isFunction(onSubmit)) {
                onSubmit();
            }
            dialog.remove();
        },
        doCancel = function (dialog) {
            if (AJS.$.isFunction(onCancel)) {
                onCancel();
            }
            dialog.remove();
        };
    confirmDialog.addHeader(header);

    // @TODO a workaround to some bug... We should revisit this post AUI 2.0 upgrade
    confirmDialog.addPanel("nothing", "nothing");
    confirmDialog.addButton(submitLabel, doSubmit);
    confirmDialog.addCancel(cancelLabel, doCancel);

    confirmDialog.getCurrentPanel().html("<div id='simpleDialogForm'>" + content + "</div>");
    confirmDialog.show();
}

/**
 * General checkbox tree utilities.
 */
var checkboxTree = function () {
    return {
        DONT_ENABLE_PARENT_ON_ALL_CHILDREN_ENABLED: 1 << 0,
        DISABLE_CHILDREN_ON_PARENT_CHECKED: 1 << 1,
        /**
         * Cascade state of a parent checkbox to collection of children checkboxes.
         * @param jqParent    parent checkbox (jQuery object)
         * @param jqChildren  children checkboxes (jQuery object)
         */
        cascadeToChildren: function (jqParent, jqChildren, options) {
            if (jqParent.is(":checked")) {
                jqChildren.attr("checked", "checked");
            } else {
                jqChildren.removeAttr("checked");
            }
            if (options & this.DISABLE_CHILDREN_ON_PARENT_CHECKED) {
                if (jqParent.is(":checked")) {
                    jqChildren.attr("disabled", "disabled");
                } else {
                    jqChildren.removeAttr("disabled");
                }
            }
        },

        /**
         * Propagate state of children checkboxes to parent checkbox.
         * @param jqParent    parent checkbox (jQuery object)
         * @param jqChildren  children checkboxes (jQuery object)
         * @param options     options that modify default behavior
         */
        propagateToParent: function (jqParent, jqChildren, options) {
            if (jqChildren.is(":not(:checked)")) {
                jqParent.removeAttr("checked");
            } else {
                if (!(options & this.DONT_ENABLE_PARENT_ON_ALL_CHILDREN_ENABLED)) {
                    jqParent.attr("checked", "checked");
                }
            }
        }
    };
}();

function enableShowSnapshotsForMaven2Dependencies(showAllSelector, showOnlySnapshotsSelector, tableSelector, hasSnapshots) {
    AJS.$(document).ready(function () {
        var showAllLink = AJS.$(showAllSelector);
        var showOnlySnapshotsLink = AJS.$(showOnlySnapshotsSelector);
        var table = AJS.$(tableSelector);

        showAllLink.click(function () {
            showOnlySnapshotsLink.show();
            showAllLink.hide();
            AJS.$('.gav-tbody-releases').show();
        });

        showOnlySnapshotsLink.click(function () {
            showAllLink.show();
            showOnlySnapshotsLink.hide();
            AJS.$('.gav-tbody-releases').hide();
        });

        if (hasSnapshots) {
            showOnlySnapshotsLink.click();
        } else {
            showAllLink.hide();
            showOnlySnapshotsLink.hide();
        }
    });
}

function addAliasSubmitCallback(result) {
    AJS.$('select.selectAlias').append(
        AJS.$('<option />', {
            text: result.aliasName,
            selected: 'selected',
            val: result.aliasId
        })
    );
    simpleSelect2('select.selectAlias');
}

/**
 * Checks if any forms on the page need a submit on change hook.
 */
AJS.$(function ($) {
    $(".submitOnChange").change(function () {
        $(this).closest("form").submit();
    });
});

/**
 * Current Activity screen
 */
var CurrentActivity = {
    // Default options
    options: {
        contextPath: null,
        getBuildsUrl: null,
        viewAgentUrl: null,
        reorderBuildUrl: null,
        stopBuildUrl: null,
        stopDeploymentUrl: null,
        manageElasticInstancesUrl: null,
        emptyQueueText: null,
        emptyBuildingText: null,
        cancellingBuildText: null,
        cancelBuildText: null,
        cancelDeploymentText: null,
        queueOutOfDateText: null,
        canBuildElastically: null,
        canBuildElasticallyAdmin: null,
        fetchingBuildData: null,
        hasAdminPermission: false,
        canManageElasticBamboo: false,
        caParent: null,
        buildingParent: null,
        queueParent: null,
        activityStream: null,
        agentSummary: null
    },
    updateTimeout: null, // ID of timeout which determines when the data will be next fetched from the server
    building: null, // jQuery object referring to the list holding the currently building builds (set on init)
    queue: null, // jQuery object referring to the list holding the queued builds (set on init)
    noBuilding: null, // jQuery object referring to the message shown when there are no currently building builds (set on init)
    noQueued: null, // jQuery object referring to the message shown when there are no queued builds (set on init)
    loadingBuilding: null, // jQuery object referring to the loading indicator shown while currently building data is being fetched the first time (set on init)
    loadingQueued: null, // jQuery object referring to the loading indicator shown while queue data is being fetched the first time (set on init)
    queueOutOfDate: null, // jQuery object referring to the message shown when the queue order has been updated remotely and is not reflected locally (set on init)
    updateTimestamp: null, // Timestamp (represented as milliseconds since the Unix epoch) that the builds were last updated
    isBeingSorted: false, // Is the queue currently being sorted?
    disabledStopHTML: '', // HTML to replace the stop button with if it's disabled (set on init)
    /**
     * Generates a nice, readable string of Agents that the Plan can build on
     * @param executableAgents - Array of Agent objects
     * @returns {String} A readable sentence containing the list of agents
     */
    generateBuildableAgentsText: function (executableAgents) {
        var agentNames = [];

        for (var i = 0; i < executableAgents.length; i++) {
            agentNames.push(executableAgents[i].name);
        }
        return "Can build on " + agentNames.join(", ");
    },
    generateListItem: function (queueItem) {
        if (queueItem.itemType == 'BUILD') {
            return CurrentActivity.generateBuildListItem(queueItem);
        }
        else {
            return CurrentActivity.generateDeploymentListItem(queueItem);
        }
    },
    /**
     * Generates the list item
     * @param deployment - Deployment object
     * @returns {Object} containing the list item or false if no list item is built (would require build.status to be something other than BUILDING or QUEUED)
     */
    generateDeploymentListItem: function (deployment) {
        var ca = CurrentActivity,
            o = ca.options,
            handle = o.hasAdminPermission ? '<span class="handle"></span>' : '',
            el = '';
        if (deployment.hasReadPermission) {
            var name = 'Deployment of ' + deployment.deploymentProjectName + ' &rsaquo; ' + _.escape(deployment.versionName) + ' to     ' + deployment.environmentName;
            var resultLink = '<a href="' + o.contextPath + '/deploy/viewDeploymentResult.action?deploymentResultId=' + deployment.resultId + '">' + name + '</a>'

            if (deployment.status == "BUILDING") {
                var buildAgentInfo = deployment.agent ? ' running on <a href="' + o.viewAgentUrl + '?agentId=' + deployment.agent.id + '" class="' + deployment.agent.type.toLowerCase() + '">' + deployment.agent.name + '</a>' : '';
                el = '<li id="b' + deployment.resultKey + '" class="buildRow"><div class="buildInfo">' + resultLink + buildAgentInfo + '</div><div class="message ' + deployment.messageType.toLowerCase() + '">' + deployment.messageText + '</div>';
                if (deployment.hasBuildPermission) {
                    var stopButtonHTML = (deployment.isBeingStopped) ? ca.disabledStopHTML : '<a href="' + o.stopDeploymentUrl + '?deploymentResultId=' + deployment.resultId + '" class="build-stop">' + widget.icons.icon({
                        type: 'build-stop',
                        text: o.cancelDeploymentText,
                        showTitle: true
                    }) + '</a>';
                    el += '<ul class="buildActions"><li>' + stopButtonHTML + '</li></ul>'
                }
                el += '</li>';
            } else if (deployment.status == "QUEUED") {
                var title = deployment.executableAgents ? ' title="' + ca.generateBuildableAgentsText(deployment.executableAgents) + '"' : '',
                    handle = o.hasAdminPermission ? '<span class="handle"></span>' : '';

                el = '<li id="b' + deployment.resultKey + '" class="buildRow"><div class="buildInfo">' + handle + resultLink + '</div>';
                el += '<div class="message ' + deployment.messageType.toLowerCase() + '"' + title + '>' + deployment.messageText + '</div>'

                if (deployment.executableElasticImages || deployment.hasBuildPermission) {
                    el += '<ul class="buildActions">';
                    if (deployment.executableElasticImages) {
                        if (o.canManageElasticBamboo) {
                            el += '<li><a href="' + o.manageElasticInstancesUrl + '">' + widget.icons.icon({
                                type: 'elastic',
                                text: o.canBuildElasticallyAdmin,
                                showTitle: true
                            }) + '</a></li>';
                        } else {
                            el += '<li>' + widget.icons.icon({
                                type: 'elastic-disabled',
                                text: o.canBuildElastically,
                                showTitle: true
                            }) + '</li>';
                        }
                    }
                    if (deployment.hasBuildPermission) {
                        el += '<li><a href="' + o.stopDeploymentUrl + '?deploymentResultId=' + deployment.resultId + '" class="build-stop">' + widget.icons.icon({
                            type: 'build-stop',
                            text: o.cancelDeploymentText,
                            showTitle: true
                        }) + '</a></li>'
                    }
                    el += '</ul>';
                }
                el += '</li>';
            }
        } else {
            el = '<li id="b' + deployment.resultKey + '" class="buildRow"><div class="buildInfo">' + _.escape(deployment.versionName) + '</div><span class="message ' + deployment.messageType.toLowerCase() + '">' + deployment.messageText + '</span></li>';
        }
        return (el.length == 0 ? false : AJS.$(el).data("item-type", "DEPLOYMENT"));
    },
    /**
     * Generates the list item
     * @param build - Build object
     * @returns {Object} containing the list item or false if no list item is built (would require build.status to be something other than BUILDING or QUEUED)
     */
    generateBuildListItem: function (build) {
        var ca = CurrentActivity,
            o = ca.options,
            el = "";

        if (build.hasReadPermission) {
            var masterName = build.isBranch ? build.planName.split(" - ", 2)[1] + ' &rsaquo; <span class="aui-icon aui-icon-small aui-iconfont-devtools-branch"/> ' : "";
            var buildLink = '<a href="' + o.contextPath + '/browse/' + build.planResultKey + '/">' + build.projectName + ' &rsaquo; ' + masterName + build.chainName + ' &rsaquo; #' + build.buildNumber + '</a> &rsaquo; <a href="' + o.contextPath + '/browse/' + build.buildResultKey + '/">' + build.jobName + '</a>';

            if (build.status == "BUILDING") {
                var msgHtml = build.messageType == "PROGRESS" ? '<div class="progress-bar" style="width:' + build.percentageComplete + '%;"></div><div class="progress-text">' + build.messageText + '</div>' : build.messageText;
                var buildAgentInfo = build.agent ? ' building on <a href="' + o.viewAgentUrl + '?agentId=' + build.agent.id + '" class="' + build.agent.type.toLowerCase() + '">' + build.agent.name + '</a>' : '';
                el = '<li id="b' + build.buildResultKey + '" class="buildRow"><div class="buildInfo">' + buildLink + buildAgentInfo + '</div><div class="message ' + build.messageType.toLowerCase() + '">' + msgHtml + '</div>'; //Current Activity
                if (build.hasBuildPermission) {
                    var stopButtonHTML = (build.isBeingStopped) ? ca.disabledStopHTML : '<a href="' + o.stopBuildUrl + '?planResultKey=' + build.buildResultKey + '" class="build-stop">' + widget.icons.icon({
                        type: 'build-stop',
                        text: o.cancelBuildText,
                        showTitle: true
                    }) + '</a>';
                    el += '<ul class="buildActions"><li>' + stopButtonHTML + '</li></ul>';
                }
                el += '</li>';
            } else if (build.status == "QUEUED") {
                var title = build.executableAgents ? ' title="' + ca.generateBuildableAgentsText(build.executableAgents) + '"' : '',
                    handle = o.hasAdminPermission ? '<span class="handle"></span>' : '';
                el = '<li id="b' + build.buildResultKey + '" class="buildRow"><div class="buildInfo">' + handle + buildLink + '</div><div class="message ' + build.messageType.toLowerCase() + '"' + title + '>' + build.messageText + '</div>';  //Current Activity
                if (build.executableElasticImages || build.hasBuildPermission) {
                    el += '<ul class="buildActions">';
                    if (build.executableElasticImages) {
                        if (o.canManageElasticBamboo) {
                            el += '<li><a href="' + o.manageElasticInstancesUrl + '">' + widget.icons.icon({
                                type: 'elastic',
                                text: o.canBuildElasticallyAdmin,
                                showTitle: true
                            }) + '</a></li>';
                        } else {
                            el += '<li>' + widget.icons.icon({
                                type: 'elastic-disabled',
                                text: o.canBuildElastically,
                                showTitle: true
                            }) + '</li>';
                        }
                    }
                    if (build.hasBuildPermission) {
                        el += '<li><a href="' + o.stopBuildUrl + '?planResultKey=' + build.buildResultKey + '" class="build-stop">' + widget.icons.icon({
                            type: 'build-stop',
                            text: o.cancelBuildText,
                            showTitle: true
                        }) + '</a></li>'
                    }
                    el += '</ul>';
                }
                el += '</li>';
            }
        } else {
            el = '<li id="b' + build.buildResultKey + '" class="buildRow"><div class="buildInfo">' + build.planName + '</div><span class="message ' + build.messageType.toLowerCase() + '">' + build.messageText + '</span></li>';
        }
        return (el.length == 0 ? false : AJS.$(el).data("item-type", "BUILD"));
    },
    /**
     * Checks if an activity stream is available, and if it is (and there are no activity stream comment forms open -
     * which would indicate the user is probably in the middle of adding a comment) then trigger a refresh.
     */
    updateActivityStream: function () {
        var o = CurrentActivity.options;

        if (o.activityStream && AJS.$(".activity-item-comment-form:visible", document.getElementById("feedContainer-" + o.activityStream.feedId)).length == 0) {
            o.activityStream.populateFeed();
        }
    },
    /**
     * Checks the time the build was last updated with the time the last data was retrieved.
     * Removes the build if it's older than the last update.
     * @param li - List item containing the build
     * @returns {Boolean} indicating whether the build was removed or not
     */
    checkLastUpdated: function (li) {
        var b = AJS.$(li);

        if (b.data("lastUpdated") < CurrentActivity.updateTimestamp) {
            b.remove();
            return true;
        } else {
            return false;
        }
    },
    /**
     * Checks if build lists are empty and if so, hide the list and display a message, otherwise show the list and hide the message.
     */
    checkListsHaveBuilds: function () {
        var ca = CurrentActivity;

        if (ca.building.children().length == 0) {
            ca.building.hide();
            ca.noBuilding.show();
        } else {
            ca.building.show();
            ca.noBuilding.hide();
        }
        if (ca.queue.children().length == 0) {
            ca.queue.hide();
            ca.noQueued.show();
            // If queue is empty but "queue is out-of-date" message is being displayed then hide the message and re-enable sorting
            if (ca.queueOutOfDate.is(":visible")) {
                ca.queue.sortable("enable");
                ca.queueOutOfDate.hide();
            }
        } else {
            ca.queue.show();
            ca.noQueued.hide();
        }
    },
    /**
     * Checks if current activity container exists and is in DOM
     * @returns {Boolean} indicating whether the container exists in the DOM
     */
    isCurrentActivityPresent: function () {
        var o = CurrentActivity.options;

        return (!o.caParent || !o.caParent.length || !o.caParent.parent().length);
    },
    /**
     * Retrieves the build JSON from the server and adds/removes/changes builds in the currently building and queue as needed.
     * @param callback - Allows the ability to execute a callback once the update has completed
     */
    updateBuilds: function (callback) {
        var ca = CurrentActivity,
            o = ca.options;

        ca.updateTimestamp = (new Date()).getTime();
        // Get builds from API
        AJS.$.ajax({
            url: o.getBuildsUrl,
            dataType: 'json',
            cache: false,
            success: function (json) {
                if (ca.isCurrentActivityPresent()) {
                    return false;
                }

                // If a callback was supplied to updateBuilds, fire it
                if (callback && AJS.$.isFunction(callback)) {
                    callback.call();
                }
                // Update agent summary text if available
                if (o.agentSummary) {
                    o.agentSummary.text(json.agentSummary);
                }
                // Go through each build returned and either update or insert as required
                AJS.$.each(json.builds, function () {
                    var build = AJS.$("#b" + this.buildResultKey),
                        msg, progress, messageType, stopButton;

                    if (build.length > 0) { // Check if the build already exists in building/queue
                        if (this.status == "BUILDING") {
                            // Check if build has started, if so move to building
                            if (build.closest(".buildContainer")[0] == o.queueParent[0]) {
                                build.remove();
                                build = ca.generateListItem(this).appendTo(ca.building);
                                progress = AJS.$(".progress", build[0]);
                                if (progress.length > 0) {
                                    progress.progressBar();
                                }
                            } else {
                                msg = AJS.$(".message", build[0]);
                                messageType = this.messageType.toLowerCase();

                                if (messageType == "progress" && msg.hasClass(messageType)) {
                                    msg.progressBar("option", {value: this.percentageComplete, text: this.messageText});
                                } else if (messageType == "progress") {
                                    msg.attr("class", "message").progressBar({
                                        value: this.percentageComplete,
                                        text: this.messageText
                                    });
                                } else {
                                    if (msg.hasClass("progress")) {
                                        msg.progressBar("destroy");
                                    }
                                    if (!msg.hasClass(messageType)) {
                                        msg.attr("class", "message " + messageType).text(this.messageText);
                                    } else {
                                        msg.text(this.messageText);
                                    }
                                }
                                if (this.hasBuildPermission && this.isBeingStopped) {
                                    stopButton = AJS.$(".build-stop", build[0]);
                                    if (stopButton.length > 0) {
                                        stopButton.replaceWith(ca.disabledStopHTML);
                                    }
                                }
                            }
                        } else if (this.status == "QUEUED") {
                            msg = AJS.$(".message", build[0]).text(this.messageText).attr("title", (this.executableAgents ? ca.generateBuildableAgentsText(this.executableAgents) : null));
                            if (!msg.hasClass(this.messageType.toLowerCase())) {
                                msg.attr("class", "message " + this.messageType.toLowerCase());
                            }
                        }
                    } else {
                        if (this.status == "BUILDING") {
                            build = ca.generateListItem(this).appendTo(ca.building);
                            progress = AJS.$(".progress", build[0]);
                            if (progress.length > 0) {
                                progress.progressBar();
                            }
                        } else if (this.status == "QUEUED") {
                            build = ca.generateListItem(this).appendTo(ca.queue);
                        }
                    }
                    // Check if queue order is correct and reorder if required
                    if (!ca.isBeingSorted && typeof(this.queueIndex) != "undefined" && this.queueIndex != build.prevAll().length) {
                        build.insertBefore(ca.queue.children("li:eq(" + this.queueIndex + ")"));
                    }
                    build.data("lastUpdated", ca.updateTimestamp);
                });

                // Clean up builds not returned in JSON
                var numRemoved = 0;
                ca.building.children().each(function () {
                    if (ca.checkLastUpdated(this)) {
                        numRemoved++;
                    }
                });
                ca.queue.children().each(function () {
                    if (ca.checkLastUpdated(this)) {
                        numRemoved++;
                    }
                });
                if (numRemoved > 0) {
                    ca.updateActivityStream();
                }

                if (o.hasAdminPermission) {
                    // Refresh sorting
                    ca.queue.sortable("refresh");
                }

                ca.checkListsHaveBuilds();

                // Clear timeout to ensure we don't have multiple running
                clearTimeout(ca.updateTimeout);

                ca.updateTimeout = setTimeout(ca.updateBuilds, BAMBOO.mediumServerPollMillis);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                if (ca.isCurrentActivityPresent()) {
                    return false;
                }

                // Clear timeout to ensure we don't have multiple running
                clearTimeout(ca.updateTimeout);

                // Error occurred when doing the update, try again in 30 sec, making sure the callback is passed so that it will actually get executed when it finally succeeds
                ca.updateTimeout = setTimeout(function () {
                    ca.updateBuilds(callback);
                }, BAMBOO.afterErrorServerPollMillis);
            }
        });
    },
    /**
     * Strips a build list item's id down to a build result key
     * @param buildListItemID - String containing the build list item's id - eg. bBAM-FUNC-1234
     * @returns {String} containing the build result key - eg. BAM-FUNC-1234
     */
    buildListItemIDToBuildResultKey: function (buildListItemID) {
        return buildListItemID.substr(1);
    },
    /**
     * Initialisation for the Current Activity
     * @param options - Object containing the options to overwrite our defaults
     */
    init: function (options) {
        var ca = CurrentActivity,
            o = ca.options;

        AJS.$.extend(o, options);

        ca.building = AJS.$("<ul/>").appendTo(o.buildingParent).hide();
        ca.queue = AJS.$("<ul/>").appendTo(o.queueParent).hide();
        ca.noBuilding = AJS.$("<p>" + o.emptyBuildingText + "</p>").appendTo(o.buildingParent).hide();
        ca.noQueued = AJS.$("<p>" + o.emptyQueueText + "</p>").appendTo(o.queueParent).hide();
        ca.queueOutOfDate = AJS.$("<p>" + o.queueOutOfDateText + "</p>").insertBefore(ca.queue).hide();
        ca.loadingBuilding = AJS.$('<p class="loading">' + o.fetchingBuildData + '</p>').appendTo(o.buildingParent);
        ca.loadingQueued = AJS.$('<p class="loading">' + o.fetchingBuildData + '</p>').appendTo(o.queueParent);
        ca.disabledStopHTML = widget.icons.icon({
            type: 'build-stop-disabled',
            text: o.cancellingBuildText,
            showTitle: true
        });

        clearTimeout(ca.updateTimeout);
        ca.updateTimestamp = null;

        o.caParent.delegate(".buildActions a.build-stop", "click", function (e) {
            var el = AJS.$(this),
                li = el.closest(".buildRow");
            AJS.$.post(this.href, function () {
                // Only remove from the queue immediately - currently building builds may take a while to stop and clean up - let the next updateBuilds() that runs clean it up
                if (li.closest(".buildContainer")[0] == o.queueParent[0]) {
                    li.remove();
                }
                ca.checkListsHaveBuilds();
            });
            el.replaceWith(ca.disabledStopHTML);
            e.preventDefault();
        });
        AJS.$("a", ca.queueOutOfDate[0]).click(function (e) {
            clearTimeout(ca.updateTimeout);
            ca.queue.empty().sortable("enable");
            AJS.$(this).parent().hide();
            ca.updateBuilds();
            ca.updateActivityStream();
            e.preventDefault();
        });
        if (o.hasAdminPermission) {
            ca.queue.sortable({
                handle: "span.handle",
                update: function (event, ui) {
                    var self = AJS.$(ui.item),
                        resultKey = ca.buildListItemIDToBuildResultKey(self.attr("id")),
                        checkListItemExists = function ($el) {
                            if ($el.length > 0) {
                                return ca.buildListItemIDToBuildResultKey($el.attr("id"));
                            } else {
                                return "";
                            }
                        },
                        prevResultKey = checkListItemExists(self.prev()),
                        itemType = self.data("item-type");
                    AJS.$.post(o.reorderBuildUrl,
                        {resultKey: resultKey, prevResultKey: prevResultKey, itemType: itemType},
                        function (json) {
                            // If an error is returned show the queue out of date message. The next update will restore the correct queue order.
                            if (json.status == "ERROR") {
                                ca.queueOutOfDate.show();
                                ca.queue.sortable("disable");
                            }
                        }, "json");
                },
                start: function (event, ui) {
                    ca.isBeingSorted = true;
                },
                stop: function (event, ui) {
                    ca.isBeingSorted = false;
                }
            });
        }

        var updateBuilds = function () {
            ca.updateBuilds(function () {
                ca.loadingBuilding.hide();
                ca.loadingQueued.hide();
            });
        };

        // If on page load it is not visible - ask for the data anyway.
        // User may open the page in a new tab to revisit it later (he knows that data loads with some delay).
        if (pageVisibilityManager.isPageVisible() === false) {
            updateBuilds();
        }

        pageVisibilityManager.setUp(
            function () {
                clearTimeout(ca.updateTimeout);
                updateBuilds();
            },
            function () {
                clearTimeout(ca.updateTimeout);
            }
        );
    }
};

/**
 * Agent Manager dropdown
 */
var AgentManager = {
    // Default options
    options: {
        contextPath: null,
        getAgentsUrl: null,
        enableAgentUrl: null,
        disableAgentUrl: null,
        enableAllAgentsUrl: null,
        disableAllAgentsUrl: null,
        viewAgentUrl: null,
        enableAgentText: null,
        disableAgentText: null,
        enableAllAgentsText: null,
        disableAllAgentsText: null,
        onlineAgentsText: null,
        defaultRemoteAgentSummaryText: null,
        onlineOnly: false,
        includeRemoteAgentSummary: false,
        triggerId: null,
        dedicatedLozenge: null
    },
    $agentList: null, // jQuery object referring to the list holding the agents
    $dialog: null, // jQuery object referring to the AUI Inline Dialog
    $remoteAgentSummary: null, // jQuery object referring to the paragraph containing the remote agent summary text
    /**
     * Generates the list item
     * @param agent - Agent object
     * @returns {Object} containing the list item or false if no list item is built
     */
    generateListItem: function (agent) {
        var am = AgentManager,
            o = am.options,
            el = "";
        el = '<li class="' + agent.type.toLowerCase() + ' ' + (agent.enabled ? "enabled" : "disabled") + '"><h3><a href="' + o.viewAgentUrl + '?agentId=' + agent.id + '">' + agent.name + '</a>' + (agent.isDedicated ? ' ' + o.dedicatedLozenge : '') + '</h3><span>' + (agent.agentStatus == "Building" ? agent.agentStatus + ' - <a href="' + o.contextPath + agent.buildLogUrl + '">' + agent.buildDisplayName + '</a>' : agent.agentStatus) + '</span> <button class="aui-button ' + (agent.enabled ? "disable" : "enable") + '">' + (agent.enabled ? o.disableAgentText : o.enableAgentText) + '</button></li>';
        return (el.length == 0 ? false : AJS.$(el).data("agentId", agent.id));
    },
    /**
     * Updates the list of agents
     * @param $contents - jQuery element of the Inline Dialog's contents
     * @param $trigger - jQuery element that is triggering the popup
     * @param doShowPopup - function to display the popup
     */
    updateAgents: function ($contents, $trigger, doShowPopup) {
        var am = AgentManager,
            o = am.options;
        AJS.$.ajax({
            url: o.getAgentsUrl,
            data: {onlineOnly: o.onlineOnly, includeRemoteAgentSummary: o.includeRemoteAgentSummary},
            dataType: 'json',
            cache: false,
            success: function (json) {
                if (o.includeRemoteAgentSummary && json.remoteAgentSummary) {
                    am.$remoteAgentSummary.html(json.remoteAgentSummary);
                } else if (o.includeRemoteAgentSummary) {
                    am.$remoteAgentSummary.html(o.defaultRemoteAgentSummaryText);
                }
                am.$agentList.empty();
                AJS.$.each(json.agents, function () {
                    am.$agentList.append(am.generateListItem(this));
                });
                if (doShowPopup) {
                    doShowPopup();
                }
            }
        });
    },
    /**
     * Initialisation for the Agent Manager
     * @param options - Object containing the options to overwrite our defaults
     */
    init: function (options) {
        var am = AgentManager,
            o = am.options;

        // Don't init if already created
        if (am.$dialog) {
            return false;
        }

        AJS.$.extend(o, options);

        am.$dialog = AJS.InlineDialog("#" + o.triggerId, o.triggerId, am.updateAgents, {
            onHover: true,
            width: 400,
            offsetX: 0,
            offsetY: 3,
            cacheContent: false,
            useLiveEvents: true
        });
        var $contents = am.$dialog.find(".contents").addClass("agentManager");
        am.$agentList = AJS.$('<ul />').appendTo($contents).before('<h2>' + o.onlineAgentsText + '</h2>');
        if (o.includeRemoteAgentSummary) {
            am.$remoteAgentSummary = AJS.$('<p>' + o.defaultRemoteAgentSummaryText + '</p>').insertBefore(am.$agentList);
        }
        var $buttons = AJS.$('<div class="aui-buttons"></div>').appendTo($contents);
        AJS.$('<button class="aui-button">' + o.enableAllAgentsText + '</button>').appendTo($buttons).click(function () {
            var el = AJS.$(this);
            el.attr("disabled", "disabled");
            AJS.$.post(o.enableAllAgentsUrl, function () {
                el.removeAttr("disabled");
                am.updateAgents();
            });
        });
        AJS.$('<button class="aui-button">' + o.disableAllAgentsText + '</button>').appendTo($buttons).click(function () {
            var el = AJS.$(this);
            el.attr("disabled", "disabled");
            AJS.$.post(o.disableAllAgentsUrl, function () {
                el.removeAttr("disabled");
                am.updateAgents();
            });
        });
        // FF not firing buttons on click for some reason, mouseup is okay though?!!
        var dialogId = am.$dialog.attr("id");
        AJS.$("#" + dialogId + " button.enable").live("mouseup", function () {
            var el = AJS.$(this),
                li = el.closest("li");
            var agentId = li.data("agentId");
            el.attr("disabled", "disabled");
            AJS.$.post(o.enableAgentUrl, {agentId: agentId}, function () {
                el.text(o.disableAgentText).attr("class", "aui-button disable").removeAttr("disabled").parent().removeClass("disabled");
            });
        });
        AJS.$("#" + dialogId + " button.disable").live("mouseup", function () {
            var el = AJS.$(this),
                li = el.closest("li");
            var agentId = li.data("agentId");
            el.attr("disabled", "disabled");
            AJS.$.post(o.disableAgentUrl, {agentId: agentId}, function () {
                el.text(o.enableAgentText).attr("class", "aui-button enable").removeAttr("disabled").parent().addClass("disabled");
            });
        });
    }
};

var SelectionActions = function () {
    return {
        init: function (formId) {
            registerSelectionActions();

            function registerSelectionActions() {
                AJS.$("span[selector='" + formId + "_all']").click(function () {
                    clearSelectionStatus();

                    getSelectAllWarning().show();
                    getAllPagesSelectedInfo().hide();

                    getAllCheckBoxes("").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_none']").click(function () {
                    clearSelectionStatus();
                });
                AJS.$("span[selector='" + formId + "_disabled']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("[class~='selectorAgentEnabled_false']").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_idle']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("[class~='selectorAgentStatus_Idle']").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_allPages']").click(function () {
                    setCompleteContentSelected(true);
                    getSelectAllWarning().hide();
                    getAllPagesSelectedInfo().show();
                });
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.selectorAgentType_" + formId + "[name='selectedAgents']" + selector);
            }

            function setCompleteContentSelected(newValue) {
                AJS.$('.' + formId + '_completeContentSelected').val(newValue);
            }

            function clearSelectionStatus() {
                AJS.$('.' + formId + '_paginatedWarning').hide();
                getAllCheckBoxes("").removeAttr("checked");
                setCompleteContentSelected(false);
            }

            function getSelectAllWarning() {
                return AJS.$('.' + formId + '_paginatedSelectAllWarning');
            }

            function getAllPagesSelectedInfo() {
                return AJS.$('.' + formId + '_paginatedAllPagesSelected');
            }
        }
    };
}();

/**
 * Generic selection in table control without support for pagination.
 * Selectors need to have 2 attributes :
 *  - data-selector-id (must match name of the checkbox group)
 *  - data-selector-type (ALL, NONE or custom selector that will be match by discriminators)
 *
 * Checkboxes can specify a comma-separated list of discriminators for selection in
 * the 'data-selector-discriminator' attribute.
 *
 */
var GenericSelectionActions = function ($) {
    var SELECT_ALL = "ALL", DESELECT_ALL = "NONE";

    return {

        init: function (formId, checkboxName) {
            registerSelectionActions();

            function registerSelectionActions() {
                var $form = $(BAMBOO.escapeIdToJQuerySelector("#" + formId));
                if ($form.length === 0) {
                    return;
                }
                $form.find("span[data-selector-id='" + checkboxName + "']").click(function () {
                    discriminator = $(this).data("selectorType");
                    applyToCheckboxes($form, discriminator);
                });
            }

            function applyToCheckboxes($inForm, discriminator) {
                $inForm.find("input:checkbox").each(function () {
                    var $this = $(this);
                    if (matchesDiscriminator($this, discriminator)) {
                        $this.attr("checked", "checked");
                    } else {
                        $this.removeAttr("checked");
                    }
                });
            }

            function matchesDiscriminator($checkbox, selector) {
                var found = false;
                if (selector === SELECT_ALL) {
                    return true;
                } else if (selector === DESELECT_ALL) {
                    return false;
                } else {
                    $.each($checkbox.data("selectorDiscriminator").split(","), function (index, value) {
                        if (value === selector) {
                            found = true;
                            return true;
                        }
                    });
                    return found;
                }
            }
        }
    };
}(AJS.$);

/**
 * @deprecated since 5.10 use 'widget/bulk-selection-links'
 */
var BulkSelectionActions = function () {
    return {
        init: function (formId) {
            registerSelectionActions();

            function registerSelectionActions() {
                AJS.$("span[selector='bulk_selector_all']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("").attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_none']").click(function () {
                    clearSelectionStatus();
                });
                AJS.$("span[selector='bulk_selector_plans']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Plan").attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_jobs']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Job").attr("checked", "checked");
                });
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.bulk" + selector);
            }

            function setCompleteContentSelected(newValue) {
                AJS.$('.' + formId + '_completeContentSelected').val(newValue);
            }

            function clearSelectionStatus() {
                getAllCheckBoxes("").removeAttr("checked");
                setCompleteContentSelected(false);
            }
        }
    };
}();

/**
 * @deprecated since 5.10 use 'widget/bulk-selection-links'
 */
var BulkSubtreeSelectionActions = function () {
    return {
        init: function (formId, enableProjectCheckbox) {
            registerSelectionActions(enableProjectCheckbox);

            function registerSelectionActions(enableProjectCheckbox) {
                AJS.$("span[selector='bulk_selector_sub_" + formId + "']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes(formId).attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_sub_none_" + formId + "']").click(function () {
                    clearSelectionStatus();
                });
                AJS.$("span[selector='bulk_selector_sub_plans_" + formId + "']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Plan" + formId).attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_sub_jobs_" + formId + "']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Job" + formId).attr("checked", "checked");
                });

                if (enableProjectCheckbox) {
                    AJS.$("#checkbox_" + formId).change(function () {
                        var val = AJS.$(this).is(":checked");
                        clearSelectionStatus();
                        if (val) {
                            getAllCheckBoxes(formId).attr("checked", "checked");
                        }
                    });
                }
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.bulk" + selector);
            }

            function clearSelectionStatus() {
                getAllCheckBoxes(formId).removeAttr("checked");
            }
        }
    };
}();

var ConfigurableSelectionActions = function () {
    return {
        init: function (formId) {
            var formIdSelector = formId.replace(/([\.:])/g, "\\$1");
            registerSelectionActions();

            function registerSelectionActions() {
                AJS.$("span[selector='" + formId + "_all']").click(function () {
                    getAllCheckBoxes("").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_none']").click(function () {
                    clearSelectionStatus();
                });

                AJS.$("span[selector^='" + formId + "_'][selector!='" + formId + "_none'][selector!='" + formId + "_all']").each(function () {
                    var span = AJS.$(this),
                        selector = span.attr("selector").substring(formId.length + 1);
                    span.click(function () {
                        clearSelectionStatus();
                        getAllCheckBoxes("[class~='selector_" + selector + "_true']").attr("checked", "checked");
                    });
                });
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.selectorScope_" + formIdSelector + selector);
            }

            function clearSelectionStatus() {
                getAllCheckBoxes("").removeAttr("checked");
            }
        }
    };
}();

/**
 * Live Activity for Plans
 */
var LiveActivity = function ($) {
    var opts = {
            planKey: null,
            container: null,
            getBuildsUrl: null,
            getResultUrl: null,
            getChangesUrl: null,
            queueEmptyText: null,
            cancellingBuildText: null,
            noAdditionalInfoText: null,
            defaultIssueIconUrl: null,
            defaultIssueType: null,
            slideSpeed: 600,
            templates: {
                buildListItemTemplate: null,
                buildingOnTemplate: null,
                buildMessageTemplate: null,
                jiraIssueTemplate: null,
                codeChangeTemplate: null,
                codeChangeChangesetLinkTemplate: null,
                codeChangeChangesetDisplayTemplate: null,
                currentStageTemplate: null,
                toggleDetailsButton: AJS.template('<span class="toggle-details"></span>')
            }
        },
        $buildList, // jQuery object referring to the list holding the builds
        $noBuilds, // jQuery object referring to the message that shows when there are no builds
        disabledStopHTML, // HTML fragment that replaces the stop button when a user clicks it (so it can't be clicked multiple times)
        toggleDetailsHTML, // HTML fragment inserted to enable the user to toggle the display of additional information
        /**
         * Checks if build list is empty and if so, hide the list and display a message, otherwise show the list and hide the message.
         */
        checkListHasBuilds = function () {
            if ($buildList.children().length == 0) {
                $buildList.hide();
                $noBuilds.show();
            } else {
                $buildList.show();
                $noBuilds.hide();
            }
        },
        updateTimeout, // ID of timeout which determines when the data will be next fetched from the server
        updateTimestamp, // Timestamp (represented as milliseconds since the Unix epoch) that the builds were last updated
        /**
         * Retrieves the build JSON from the server and adds/removes/changes builds in the build list as needed.
         */
        update = function () {
            // Otherwise switching to history tab results in undefined behaviour
            if ($('#liveActivity').length == 0) return;
            updateTimestamp = (new Date()).getTime();
            $.ajax({
                url: opts.getBuildsUrl,
                data: {planKey: opts.planKey},
                dataType: "json",
                cache: false,
                success: function (json) {
                    // Go through each build returned and either update or insert as required
                    $.each(json.builds, function () {
                        var $build = $("#b" + this.buildResultKey),
                            messageType = this.messageType.toLowerCase(),
                            status = this.status.toLowerCase();
                        if ($build.length > 0) { // Check if the build already exists in list
                            var $msg = $(".message", $build[0]),
                                $stageInfo = $(".stage-info", $build[0]),
                                $agentInfo = $(".agent-info", $build[0]);
                            if (messageType == "progress" && $msg.hasClass(messageType)) {
                                $msg.progressBar("option", {value: this.percentageComplete, text: this.messageText});
                            } else if (messageType == "progress") {
                                $msg.attr("class", "message").progressBar({
                                    value: this.percentageComplete,
                                    text: this.messageText
                                });
                            } else {
                                if ($msg.hasClass("progress")) {
                                    $msg.progressBar("destroy");
                                }
                                if (!$msg.hasClass(messageType)) {
                                    $msg.attr("class", "message " + messageType).text(this.messageText);
                                } else {
                                    $msg.text(this.messageText);
                                }
                            }
                            if (status == "building") {
                                if ($agentInfo.length == 0 && this.agent != null) {
                                    var buildingOnHTML = status == "building" ? AJS.template.load(opts.templates.buildingOnTemplate).fill({
                                        agentId: this.agent.id,
                                        agentType: this.agent.type.toLowerCase(),
                                        agentName: this.agent.name
                                    }).toString() : "";
                                    $(".build-description", $build[0]).append(buildingOnHTML);
                                }
                                if (this.stage != null && $stageInfo.length > 0) {
                                    var currentStageHTML = (status == "building" ? AJS.template.load(opts.templates.currentStageTemplate).fill({
                                        stageName: this.stage.name,
                                        stageNumber: this.stage.number,
                                        totalStages: this.stage.totalStages
                                    }).toString() : "");
                                    $stageInfo.html($.trim(currentStageHTML));
                                }
                            }
                            if (!$build.hasClass(status)) {
                                $build.removeClass(status == "building" ? "queued" : "building").addClass(status);
                            }
                        } else {
                            var buildingOnHTML = (status == "building" && this.agent != null) ? AJS.template.load(opts.templates.buildingOnTemplate).fill({
                                    agentId: this.agent.id,
                                    agentType: this.agent.type.toLowerCase(),
                                    agentName: this.agent.name
                                }).toString() : "",
                                currentStageHTML = (status == "building" && this.stage != null) ? AJS.template.load(opts.templates.currentStageTemplate).fill({
                                    stageName: this.stage.name,
                                    stageNumber: this.stage.number,
                                    totalStages: this.stage.totalStages
                                }).toString() : "",
                                buildMessageHTML = AJS.template.load(opts.templates.buildMessageTemplate).fill({
                                    type: messageType,
                                    text: this.messageText
                                }).toString(),
                                listItemHTML = AJS.template.load(opts.templates.buildListItemTemplate).fill({
                                    buildResultKey: this.buildResultKey,
                                    cssClass: status,
                                    status: status,
                                    planKey: this.planKey
                                }).fillHtml({
                                    buildingOn: buildingOnHTML,
                                    triggerReason: this.triggerReason,
                                    currentStage: currentStageHTML,
                                    buildMessage: buildMessageHTML
                                }).toString();
                            $build = $(listItemHTML).appendTo($buildList);
                            var $msg = $(".message", $build[0]);
                            $build.addClass("collapsed").prepend(toggleDetailsHTML);
                            $(".additional-information", $build).hide();
                            if (messageType == "progress") {
                                $msg.progressBar({value: this.percentageComplete, text: this.messageText});
                            }
                        }
                        $build.data("lastUpdated", updateTimestamp);
                    });

                    // Clean up builds not returned in JSON
                    var planResultKeys = [];
                    $buildList.children().each(function () {
                        var b = $(this);
                        if (b.data("lastUpdated") < updateTimestamp) {
                            b.fadeOut(500, function () {
                                $(this).remove();
                                checkListHasBuilds();
                            })
                            planResultKeys.push(b.attr('id').substring(1));
                        }
                    });
                    if (planResultKeys.length > 0) {
                        // Pet peeve - reverse mutates in place :(
                        planResultKeys.reverse();
                        $.ajax({
                            url: opts.getResultUrl,
                            data: {planResultKeys: planResultKeys},
                            success: function (result) {
                                $('.buildResultsNone').hide();
                                $('#buildResultsTable').show().find('tbody').prepend($(result).find('tr'));
                            }
                        });
                    }

                    checkListHasBuilds();

                    // Use a fast poll if something is going on, slow poll if everything is calm
                    updateTimeout = setTimeout(update, json.builds && json.builds.length ? BAMBOO.fastServerPollMillis : BAMBOO.slowServerPollMillis);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    updateTimeout = setTimeout(update, BAMBOO.afterErrorServerPollMillis);
                }
            });
        };
    return {
        /**
         * Initialisation for the Live Activity
         * @param options - Object containing the options to overwrite our defaults
         */
        init: function (options) {
            $.extend(true, opts, options);
            disabledStopHTML = widget.icons.icon({
                type: 'build-stop-disabled',
                text: opts.cancellingBuildText,
                showTitle: true
            });
            if (opts.templates.toggleDetailsButton) {
                toggleDetailsHTML = opts.templates.toggleDetailsButton.toString();
            }

            $buildList = $("> ul", opts.container);
            if ($buildList.length == 0) {
                $buildList = $("<ul />").hide().prependTo(opts.container);
            } else {
                $buildList.children().addClass("collapsed").prepend(toggleDetailsHTML);
                $(".additional-information", $buildList).hide();
            }
            $noBuilds = $("> p", opts.container);
            if ($noBuilds.length == 0) {
                $noBuilds = $("<p>" + opts.queueEmptyText + "</p>").hide().appendTo(opts.container);
            }

            $("#" + opts.container.attr("id") + " a.build-stop").live("click", function (e) {
                var el = $(this),
                    li = el.closest("li");
                $.post(this.href, function () {
                    // Only remove from the queue immediately - currently building builds may take a while to stop and clean up - let the next updateBuilds() that runs clean it up
                    if (li.hasClass("queued")) {
                        li.fadeOut(500, function () {
                            $(this).remove();
                            checkListHasBuilds();
                        })
                    }
                });
                el.replaceWith(disabledStopHTML);
                e.preventDefault();
            });

            $("#" + opts.container.attr("id") + " .collapsed .toggle-details").live("click", function (e) {
                var el = $(this),
                    li = el.closest("li"),
                    additionalInfo = $(".additional-information", li[0]),
                    buildResultKey = li.attr("id").substring(1);

                if (!additionalInfo.data("data-retrieved")) {
                    li.removeClass("collapsed");
                    $.ajax({
                        url: opts.getChangesUrl + buildResultKey,
                        data: {
                            expand: "jiraIssues,vcsRevisions.vcsRevision.changes.change"
                        },
                        dataType: "json",
                        contentType: "application/json",
                        success: function (json) {
                            var issues = "";
                            if (json.jiraIssues && json.jiraIssues.size > 0) {
                                $.each(json.jiraIssues.issue, function () {
                                    if (this.url && this.url.href && this.key && this.summary) {
                                        issues += AJS.template.load(opts.templates.jiraIssueTemplate).fill({
                                            url: this.url.href,
                                            issueType: (this.issueType && this.issueType.length > 0) ? this.issueType : opts.defaultIssueType,
                                            issueIconUrl: (this.iconUrl && this.iconUrl.length > 0) ? this.iconUrl : opts.defaultIssueIconUrl,
                                            key: this.key,
                                            details: this.summary
                                        }).toString();
                                    }
                                });
                            }

                            var changes = "";
                            if (json.vcsRevisions && json.vcsRevisions.size > 0) {
                                $.each(json.vcsRevisions.vcsRevision, function () {
                                    if (this.changes && this.changes.size > 0) {
                                        $.each(this.changes.change, function () {
                                            if (this.author && this.comment) {
                                                changes += AJS.template.load(opts.templates.codeChangeTemplate).fill({
                                                    authorOrUser: (this.userName && this.userName.length > 0) ? "user" : "author",
                                                    author: (this.userName && this.userName.length > 0) ? this.userName : this.author,
                                                    displayName: (this.fullName && this.fullName.length > 0) ? this.fullName : this.author,
                                                    comment: this.comment
                                                }).fillHtml({
                                                    changesetInfo: this.changesetId ? AJS.template.load(this.commitUrl ? opts.templates.codeChangeChangesetLinkTemplate : opts.templates.codeChangeChangesetDisplayTemplate).fill({
                                                        commitUrl: this.commitUrl ? this.commitUrl : null,
                                                        changesetId: this.changesetId
                                                    }).toString() : ""
                                                }).toString();
                                            }
                                        });
                                    }
                                });
                            }

                            if (issues.length == 0 && changes.length == 0) {
                                additionalInfo.text(opts.noAdditionalInfoText);
                            } else {
                                if (issues.length == 0) {
                                    $(".issueSummary", additionalInfo[0]).remove();
                                } else {
                                    $(".issueSummary", additionalInfo[0]).append("<ul>" + issues + "</ul>");
                                }
                                if (changes.length == 0) {
                                    $(".changesSummary", additionalInfo[0]).remove();
                                } else {
                                    $(".changesSummary", additionalInfo[0]).append("<ul>" + changes + "</ul>");
                                }
                            }

                            li.addClass("expanded");
                            additionalInfo.data("data-retrieved", true, true).stop(true).slideDown(opts.slideSpeed);
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            li.addClass("collapsed");
                        }
                    });
                } else {
                    li.removeClass("collapsed").addClass("expanded");
                    additionalInfo.stop(true, true).slideDown(opts.slideSpeed);
                }
            });

            $("#" + opts.container.attr("id") + " .expanded .toggle-details").live("click", function (e) {
                var el = $(this),
                    li = el.closest("li");
                li.removeClass("expanded").addClass("collapsed");
                $(".additional-information", li[0]).stop(true, true).slideUp(opts.slideSpeed);
            });

            // Trigger the first update
            update();
        }
    }
}(jQuery);


function showAjaxErrorMessage(XMLHttpRequest) {
    AJS.$(".ajaxErrorMessage").html('"' + getMessageToShow(XMLHttpRequest.statusText) + '"');
    AJS.$("#ajaxErrorHolder").removeClass("hidden").show();
}

/**
 * Translates indecipherable messages into something more readable
 *
 * @param originalMessage the original message
 * @returns {string} either the original message passed in (if it's not indecipherable) or a generic message
 */
function getMessageToShow(originalMessage) {
    originalMessage = AJS.$.trim(originalMessage);
    if (originalMessage === "" || originalMessage === "error") {
        return "Error whilst communicating with server";
    }
    return originalMessage;
}

function hideAjaxErrorMessage() {
    AJS.$(".ajaxErrorMessage").empty();
    AJS.$("#ajaxErrorHolder").hide();
}

/**
 * Usage: init(selector, reloadEvent) . Calling init function multiple times on the same page is safe regardless of used selectors.
 *
 * @param selector the jQuery selector used to mark asynchronously executed links
 * @param resetLinkStateEventName (optional, nullable) the event causing the "executed" status of links to be cleared
 * @param onUrlCallFinished (optional) handler to call when url processing is finished
 */
var AsynchronousRequestManager = function ($) {
    var IN_PROGRESS_KEY = "isInProgress";
    var registeredResetLinkStateHandlers = {};

    function isInProgress(link) {
        return link.data(IN_PROGRESS_KEY);
    }

    function setInProgress(link, newValue) {
        link.data(IN_PROGRESS_KEY, newValue);
        if (newValue) {
            link.fadeTo("slow", 0.4);
        } else {
            link.fadeTo("slow", 1);
        }
    }

    var onAsynchronousLinkClick = function (event) {
        var $this = $(this);
        var data = event.data;
        if (!isInProgress($this)) {
            $.ajax({
                url: this.href,
                type: $this.hasClass("usePostMethod") ? "POST" : "GET",
                error: function (XMLHttpRequest) {
                    setInProgress($this, false);
                    if (event.data.failureHandler) {
                        event.data.failureHandler();
                    }
                    showAjaxErrorMessage(XMLHttpRequest);
                },
                success: function (htmlOrJson) {
                    if (htmlOrJson.status && htmlOrJson.status == "ERROR") {
                        if (data.failureHandler) {
                            data.failureHandler(htmlOrJson);
                        }
                    } else {
                        if (data.successHandler) {
                            data.successHandler();
                        }
                    }
                    setInProgress($this, false);
                }
            });
            setInProgress($this, true);
        }
        event.preventDefault();
    };

    function makePair(first, second) {
        return first + "##" + second;
    }

    return {
        init: function (selector, resetLinkStateEventName, onUrlCallFinished) {
            var $selector = $(selector);
            if (resetLinkStateEventName) {
                var pair = makePair(resetLinkStateEventName, selector);
                if (!(pair in registeredResetLinkStateHandlers)) {
                    $("body").bind(resetLinkStateEventName, function () {
                        $selector.filter(":visible").each(function () {
                            setInProgress($(this), false);
                        });
                    });
                    registeredResetLinkStateHandlers[pair] = true;
                }
            }

            $(document)
                .off("click", selector, onAsynchronousLinkClick)
                .on("click", selector, {
                    successHandler: onUrlCallFinished,
                    failureHandler: onUrlCallFinished
                }, onAsynchronousLinkClick);
        }
    }
}(AJS.$);


/**
 * JobResultSummary page
 */
var JobResultSummaryLiveActivity = function ($) {
    var opts = {
            buildResultKey: null,
            buildLifeCycleState: null,
            container: null,
            getBuildUrl: null,
            reloadUrl: null,
            templates: {
                disabledStopButton: null,
                logTableRow: null,
                progressOverAverage: null,
                progressUnderAverage: null,
                queueDurationDescription: null,
                queuePositionDescription: null,
                updatingSourceFor: null
            }
        },
        linesOfLogToDisplay = 10,
        $linesOfLogToDisplaySelect,
        $logBody,
        $logContainer,
        $logLoading,
        $progressBarContainer,
        $queueDurationDescriptionContainer,
        $queuePositionDescriptionContainer,
        queueDuration,
        updateTimeout,
        update = function () {

            clearTimeout(updateTimeout);

            var ajaxData = $logContainer.is(":visible") ? {
                expand: 'logEntries[-' + linesOfLogToDisplay + ':]',
                'max-results': linesOfLogToDisplay
            } : {};

            $.ajax({
                url: opts.getBuildUrl,
                data: ajaxData,
                dataType: "json",
                contentType: "application/json",
                cache: false,
                success: function (buildResult) {
                    if (buildResult.lifeCycleState != opts.buildLifeCycleState) {
                        document.location = opts.reloadUrl;
                        return;
                    } else if (buildResult.lifeCycleState == "Pending" || buildResult.lifeCycleState == "Queued") {
                        if (queueDuration != buildResult.queueDuration) {
                            var queueDurationMarkup = AJS.template.load(opts.templates.queueDurationDescription)
                                .fill({durationDescription: DurationUtils.getPrettyPrint(buildResult.queueDuration)}).toString();
                            $queueDurationDescriptionContainer.html(queueDurationMarkup);
                            $queueDurationDescriptionContainer.show();
                            queueDuration = buildResult.queueDuration;
                        }

                        var queuePositionMarkup = AJS.template.load(opts.templates.queuePositionDescription)
                            .fill({
                                position: buildResult.queue.position + 1,
                                length: buildResult.queue.length
                            }).toString();
                        $queuePositionDescriptionContainer.html(queuePositionMarkup);
                        $queuePositionDescriptionContainer.show();

                    } else if (buildResult.lifeCycleState == "InProgress") {
                        if (buildResult.progress) {

                            var pbOptions = {};

                            if (buildResult.buildStartedTime) {
                                pbOptions.value = buildResult.progress.percentageCompleted * 100;
                                if (buildResult.progress.isUnderAverageTime) {
                                    pbOptions.text = AJS.template.load(opts.templates.progressUnderAverage).fill({
                                        elapsed: buildResult.progress.prettyBuildTime,
                                        remaining: buildResult.progress.prettyTimeRemainingLong
                                    }).toString();
                                } else {
                                    pbOptions.text = AJS.template.load(opts.templates.progressOverAverage).fill({
                                        elapsed: buildResult.progress.prettyBuildTime,
                                        remaining: buildResult.progress.prettyTimeRemainingLong
                                    }).toString();
                                }
                            } else {
                                pbOptions.value = 0;
                                pbOptions.text = AJS.template.load(opts.templates.updatingSourceFor).fill({
                                    prettyVcsUpdateDuration: buildResult.prettyVcsUpdateDuration
                                }).toString();
                            }

                            $progressBarContainer.progressBar(pbOptions);
                        }

                        if (buildResult.logEntries && buildResult.logEntries.logEntry) {

                            var newLogBody = '';

                            for (var i = 0, ii = buildResult.logEntries.logEntry.length; i < ii; i++) {
                                var logEntry = buildResult.logEntries.logEntry[i];
                                newLogBody += AJS.template.load(opts.templates.logTableRow)
                                    .fill({time: logEntry.formattedDate})
                                    .fillHtml({log: logEntry.log}).toString();
                            }
                            if ($logBody.html() != newLogBody) {
                                $logBody.html(newLogBody);
                            }
                            if ($logLoading.is(":visible")) {
                                $logLoading.hide();
                                $logBody.parent().removeClass("hidden");
                            }
                        }
                    }

                    // Update again in 5 seconds
                    updateTimeout = setTimeout(update, BAMBOO.fastServerPollMillis);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    updateTimeout = setTimeout(update, BAMBOO.afterErrorServerPollMillis);
                }
            });
        };
    return {
        init: function (options) {
            $.extend(true, opts, options);

            $linesOfLogToDisplaySelect = $("#linesToDisplay");
            $logBody = $("#buildLog tbody");
            $logContainer = $logBody.parent().parent();
            $logLoading = $(".loading", $logContainer[0]);
            $progressBarContainer = $("#pb" + opts.buildResultKey);
            $queueDurationDescriptionContainer = $("#queueDurationDescription");
            $queuePositionDescriptionContainer = $("#queuePositionDescription");

            // Get our default in line with what was set previously
            linesOfLogToDisplay = $linesOfLogToDisplaySelect.val();

            $linesOfLogToDisplaySelect.change(function () {
                linesOfLogToDisplay = $(this).val();
                saveCookie("BAMBOO-MAX-DISPLAY-LINES", linesOfLogToDisplay, 365);
                update();
            });

            if (opts.templates.disabledStopButton) {
                var disabledStopHTML = opts.templates.disabledStopButton.toString();
                $("#buildResults a.build-stop").live("click", function (e) {
                    var $el = $(this);
                    $.post(this.href);
                    $el.replaceWith(disabledStopHTML);
                    e.preventDefault();
                });
            }

            // Trigger the first update
            update();
        }
    }
}(jQuery);


var DurationUtils = function () {
    var opts = {
            format: "{value} {unit}",
            units: {
                SEC: ["second", "seconds"],
                MIN: ["minute", "minutes"]
            }
        },
        MILLIS_IN_MINUTE = 60 * 1000,
        MILLIS_IN_SECOND = 1000,
        describeValueAs = function (value, unit) {
            return opts.format.replace("{value}", value).replace("{unit}", value == 1 ? unit[0] : unit[1]);
        };
    return {
        init: function (options) {
            $.extend(true, opts, options);
        },
        getPrettyPrint: function (elapsedTimeMillis) {
            if (elapsedTimeMillis >= MILLIS_IN_MINUTE) {
                return describeValueAs(Math.floor(elapsedTimeMillis / MILLIS_IN_MINUTE), opts.units.MIN)
            } else if (elapsedTimeMillis >= MILLIS_IN_SECOND) {
                return describeValueAs(Math.floor(elapsedTimeMillis / MILLIS_IN_SECOND), opts.units.SEC)
            } else {
                return "< 1 {unit}".replace("{unit}", opts.units.SEC[0]);
            }
        }
    }
}();

/**
 * BuildResultSummary page
 */
var BuildResultSummaryLiveActivity = function ($) {
    var opts = {
            getBuildUrl: null,
            activeJobResultKey: null,
            templates: {
                logMessagePending: null,
                logMessageQueued: null,
                logMessageFinished: null,
                logTableRow: null
            }
        },
        displayLogActivity = function (logBody) {
            $logMessage.hide();
            $logLoading.hide();
            if ($logBody.html() != logBody) {
                $logBody.html(logBody);
            }
            $logBody.parent().show();
            $logContainer.show();
        },
        displayLogLoading = function () {
            $logMessage.hide();
            $logBody.parent().hide();
            $logLoading.show();
            $logContainer.show();
        },
        displayLogMessage = function (template) {
            $logContainer.hide();
            $logMessage.html(AJS.template.load(template).fill({job: jobName})).show();
        },
        $jobResultKeyForLogDisplaySelect,
        jobResultKey,
        jobName,
        linesOfLogToDisplay = 10,
        $linesOfLogToDisplaySelect,
        $logBody,
        $logContainer,
        $logLoading,
        $logMessage,
        updateTimeout,
        update = function () {

            clearTimeout(updateTimeout);

            $.ajax({
                url: opts.getBuildUrl.replace("@KEY@", jobResultKey),
                data: {
                    expand: 'logEntries[-' + linesOfLogToDisplay + ':]',
                    'max-results': linesOfLogToDisplay
                },
                dataType: "json",
                contentType: "application/json",
                cache: false,
                success: function (buildResult) {
                    if (buildResult.lifeCycleState == "Pending") {
                        displayLogMessage(opts.templates.logMessagePending);
                    } else if (buildResult.lifeCycleState == "Queued") {
                        displayLogMessage(opts.templates.logMessageQueued);
                    } else if (buildResult.lifeCycleState == "InProgress") {
                        if (buildResult.logEntries && typeof(buildResult.logEntries.logEntry) != "undefined") {
                            var newLogBody = '';
                            for (var i = 0, ii = buildResult.logEntries.logEntry.length; i < ii; i++) {
                                var logEntry = buildResult.logEntries.logEntry[i];
                                newLogBody += AJS.template.load(opts.templates.logTableRow)
                                    .fill({time: logEntry.formattedDate})
                                    .fillHtml({log: logEntry.log}).toString();
                            }
                            displayLogActivity(newLogBody);
                        } else {
                            displayLogLoading();
                        }
                    } else if (buildResult.lifeCycleState == "Finished") {
                        displayLogMessage(opts.templates.logMessageFinished);
                    }

                    // Update again in 5 seconds
                    updateTimeout = setTimeout(update, BAMBOO.fastServerPollMillis);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    updateTimeout = setTimeout(update, BAMBOO.afterErrorServerPollMillis);
                }
            });
        };
    return {
        init: function (options) {
            $.extend(true, opts, options);
            $jobResultKeyForLogDisplaySelect = $("#jobResultKeyForLogDisplay");
            $linesOfLogToDisplaySelect = $("#linesToDisplay");
            $logContainer = $("#buildResultSummaryLogs");
            $logBody = $("table > tbody", $logContainer[0]);
            $logLoading = $(".loading", $logContainer[0]);
            $logMessage = $("#buildResultSummaryLogMessage");

            // Get our default in line with what was set previously
            linesOfLogToDisplay = $linesOfLogToDisplaySelect.val();

            $jobResultKeyForLogDisplaySelect.change(function () {
                jobResultKey = $jobResultKeyForLogDisplaySelect.val();
                jobName = $jobResultKeyForLogDisplaySelect.find("option:selected").text();
                update();
            });

            $linesOfLogToDisplaySelect.change(function () {
                linesOfLogToDisplay = $linesOfLogToDisplaySelect.val();
                saveCookie("BAMBOO-MAX-DISPLAY-LINES", linesOfLogToDisplay, 365);
                update();
            });

            // Trigger the first update
            if (opts.activeJobResultKey) {
                $jobResultKeyForLogDisplaySelect.val(opts.activeJobResultKey);
            }
            $jobResultKeyForLogDisplaySelect.change();
        }
    }
}(jQuery);


var ChainConfiguration = function ($) {
    var opts = {
        $list: null,
        moveStageUrl: null,
        moveJobUrl: null,
        confirmStageMoveUrl: null,
        confirmJobMoveJobUrl: null,
        chainKey: null,
        canReorder: false,
        stageMoveHeader: "Move Stage",
        jobMoveHeader: "Move Job"
    };
    return {
        init: function (options) {
            $.extend(true, opts, options);
            opts.$list.children(":last-child").addClass("last");

            if (!opts.canReorder) {
                return;
            }

            opts.$list.sortable({
                cursor: "move",
                distance: 5,
                handle: "dl",
                start: function (event, ui) {
                    var $self = $(ui.item);
                    $self.data("movedFromPos", $self.prevAll().length);
                },
                update: function (event, ui) {
                    var $self = $(ui.item),
                        revertMove = function (index) {
                            if ((opts.$list.children().length - 1) == $self.data("movedFromPos")) {
                                $self.appendTo(opts.$list).removeData("movedFromPos");
                            } else {
                                $self.insertBefore(opts.$list.children("li:eq(" + ($self.data("movedFromPos") + (($self.data("movedFromPos") > index) ? 1 : 0)) + ")")).removeData("movedFromPos");
                            }
                        },
                        showError = function () {
                            var message = arguments.length ? arguments[0] : "There was a problem moving your stage.",
                                errorDialog = new AJS.Dialog(550, 300);
                            errorDialog.addHeader("Stage move failed").addPanel("errorPanel", '<div class="fieldError errorText">' + message + '</div>').addButton("Close", function (dialog) {
                                dialog.hide();
                            });
                            errorDialog.show();
                            revertMove();
                        },
                        callMoveAction = function () {
                            var stageId = $self.attr("id").split("_")[1],
                                index = $self.prevAll().length;
                            $.ajax({
                                type: "POST",
                                url: opts.moveStageUrl,
                                data: {buildKey: opts.chainKey, stageId: stageId, index: index},
                                success: function (json) {
                                    if (json.status == "ERROR") {
                                        if (json.errors && json.errors.length > 0) {
                                            var message = json.errors.join("<br>");
                                            showError(message);
                                        } else {
                                            showError();
                                        }
                                    } else if (json.status == "CONFIRM") {
                                        var cancelCallback = function (dialog) {
                                            revertMove(index);
                                        };
                                        simpleDialogForm(null, opts.confirmStageMoveUrl + "?buildKey=" + opts.chainKey + "&stageId=" + stageId + "&index=" + index, 600, 500, opts.stageMoveHeader, "ajax", null, cancelCallback, opts.stageMoveHeader);
                                    } else {
                                        opts.$list.children(":last-child").addClass("last").siblings().removeClass("last");
                                    }
                                },
                                error: function (XMLHttpRequest, textStatus, errorThrown) {
                                    showError();
                                },
                                dataType: "json"
                            });
                        };
                    callMoveAction();
                }
            });

            var jobLists = opts.$list.find("> li > div > ul");
            jobLists.children("[id^='job_']").draggable({
                cursor: "move",
                handle: ".handle",
                revert: "invalid",
                revertDuration: 300,
                scope: "jobs",
                start: function (event, ui) {
                    var $self = $(this);
                    $self.data("movedFrom", $self.parent()).data("movedFromPos", $self.prevAll().length);

                    // Add a z-index to the stage when someone drags a job to fix IE7's crappy stacking
                    if ($.browser.msie && parseInt($.browser.version, 10) == 7) {
                        $self.closest("li[id^='stage_']").css("zIndex", 1).siblings().css("zIndex", "")
                    }
                }
            });
            jobLists.droppable({
                accept: function (li) {
                    return (this != li.parent()[0]); // prevents being able to drop to the same stage
                },
                activeClass: "ui-state-active",
                drop: function (event, ui) {
                    var $self = ui.draggable,
                        revertMove = function () {
                            var $originalFollowingElement = $self.data("movedFrom").children("li:eq(" + $self.data("movedFromPos") + ")");
                            if ($originalFollowingElement.length == 0) {
                                $self.appendTo($self.data("movedFrom")).removeData("movedFrom").removeData("movedFromPos");
                            } else {
                                $self.insertBefore($originalFollowingElement).removeData("movedFrom").removeData("movedFromPos");
                            }
                        },
                        showError = function () {
                            var message = arguments.length ? arguments[0] : "There was a problem moving your Job.",
                                errorDialog = new AJS.Dialog(400, 150);

                            errorDialog.addHeader("Job move failed").addPanel("errorPanel", '<div class="fieldError errorText">' + message + '</div>').addButton("Close", function (dialog) {
                                dialog.hide();
                            });
                            errorDialog.show();
                            revertMove();
                        },
                        callMoveAction = function () {
                            var stageId = $self.closest("li[id^='stage_']").attr("id").split("_")[1],
                                jobKey = $self.attr("id").split("_")[1];
                            $.ajax({
                                type: "POST",
                                url: opts.moveJobUrl,
                                data: {buildKey: opts.chainKey, stageId: stageId, jobKey: jobKey},
                                success: function (json) {
                                    if (json.status == "ERROR") {
                                        if (json.errors && json.errors.length > 0) {
                                            var message = json.errors.join("<br>");
                                            showError(message);
                                        } else {
                                            showError();
                                        }
                                    } else if (json.status == "CONFIRM") {
                                        var cancelCallback = function () {
                                            revertMove();
                                        };
                                        simpleDialogForm(null, opts.confirmJobMoveJobUrl + "?buildKey=" + opts.chainKey + "&stageId=" + stageId + "&jobKey=" + jobKey, 600, 500, opts.jobMoveHeader, "ajax", null, cancelCallback, opts.jobMoveHeader);
                                    }
                                },
                                error: function (XMLHttpRequest, textStatus, errorThrown) {
                                    showError();
                                },
                                dataType: "json"
                            });
                        };
                    $self.prependTo(this).css({left: "", top: ""});
                    callMoveAction();
                },
                hoverClass: "ui-state-hover",
                scope: "jobs"
            });
        }
    }
}(jQuery);

var ArtifactDefinitionEdit = function ($) {
    var opts = {
            i18n: {
                artifact_definition_shareToggle_error: null,
                artifact_definition_shareToggle_error_header: null,
                global_buttons_close: null
            },
            deletePackageItem: {
                actionUrl: null,
                submitLabel: null,
                title: null
            },
            editPackageItem: {
                actionUrl: null,
                submitLabel: null,
                title: null
            },
            renameArtifactDefinitionToEnableSharing: {
                actionUrl: null,
                submitLabel: null,
                title: null
            }
        },
        $artifactDefinitionsTable,
        deleteArtifactDefinitionCallback = function (result) {
            var artifact = result.artifactDefinition;

            (($("tbody > tr", $artifactDefinitionsTable).length == 1) ? $artifactDefinitionsTable : $("#artifactDefinition-" + artifact.id)).remove();
        },
        deleteArtifactDefinitionOnClick = function () {
            var artifactId = this.id.split("-")[1],
                hasDependencies = $(this).hasClass("hasDependencies");

            simpleDialogForm(null,
                opts.deletePackageItem.actionUrl + "&artifactId=" + artifactId,
                hasDependencies ? 600 : 400,
                hasDependencies ? 500 : 200,
                opts.deletePackageItem.submitLabel,
                "ajax",
                deleteArtifactDefinitionCallback,
                null,
                opts.deletePackageItem.title,
                null);
        },
        editArtifactDefinitionOnClick = function () {
            var artifactId = this.id.split("-")[1];

            simpleDialogForm(null,
                opts.editPackageItem.actionUrl + "&artifactId=" + artifactId,
                800,
                510,
                opts.editPackageItem.submitLabel,
                "ajax",
                updateArtifactDefinitionCallback,
                null,
                opts.editPackageItem.title,
                null);
        },
        updateArtifactDefinitionCallback = function (result) {
            var artifact = result.artifactDefinition,
                $cells = $("#artifactDefinition-" + artifact.id + " > td");

            $($cells[0]).find("span.artifactName").text(artifact.name);
            $($cells[0]).find("span.icon").attr("class", artifact.sharedArtifact ? "icon icon-artifact-shared" : "icon icon-artifact");

            $($cells[1]).text(artifact.location);
            $($cells[2]).text(artifact.copyPattern);

            $artifactDefinitionsTable.trigger("update").trigger("sorton", [$artifactDefinitionsTable.get(0).config.sortList]);
        };

    return {
        init: function (options) {
            $.extend(true, opts, options);

            $artifactDefinitionsTable = $("#artifactDefinitions");

            // initialize table sorter
            $artifactDefinitionsTable.tablesorter({
                headers: {3: {sorter: false}, 4: {sorter: false}},
                sortList: [[0, 0]]
            });
            $artifactDefinitionsTable.delegate("a.deleteArtifactDefinition", "click", deleteArtifactDefinitionOnClick)
                .delegate("a.editArtifactDefinition", "click", editArtifactDefinitionOnClick);
        }
    }
}(jQuery);


var LinkedJiraProjects = function ($) {
    var defaults = {
            deleteItem: {
                title: null
            }
        },
        $table,
        deleteItemCallback = function (result) {
            var item = result.linkedJiraProject;
            (($("tbody > tr", $table).length === 1) ? $table : $(BAMBOO.escapeIdToJQuerySelector("#linkedJiraProject-" + item.id))).remove();
        };

    return {
        init: function (options) {
            options = AJS.$.extend(defaults, options);

            $table = $("#linkedJiraProjects");

            // initialize table sorter
            $table.tablesorter({
                headers: {2: {sorter: false}},
                sortList: [[0, 0]]
            });

            BAMBOO.simpleDialogForm({
                trigger: '#linkedJiraProjects a.deleteLinkedJiraProject',
                dialogWidth: 400,
                dialogHeight: 200,
                success: deleteItemCallback,
                header: options.deleteItem.title
            });
        }
    }
}(jQuery);


/* Tests Tables */
AJS.$(document).delegate(".tests-table > tbody > tr > .twixie > span", "click", function (e) {
    var $twixie = AJS.$(this),
        $tr = $twixie.closest("tr"),
        $stack = $tr.next(),
        newTwixieText = !$twixie.hasClass("icon-collapse") ? "Collapse" : "Expand"; //negated because we toggle the class later
    $stack[$tr.hasClass("collapsed") ? "show" : "hide"]();
    $tr.toggleClass("collapsed expanded");
    $twixie.toggleClass("icon-collapse icon-expand").attr("title", newTwixieText).html("<span>" + newTwixieText + "</span>");
});
AJS.$(document).delegate(".tests-table-container > .controls li", "click", function (e) {
    var $trigger = AJS.$(this),
        $li = $trigger.closest("li"),
        $table = $trigger.closest(".controls").prevAll(".tests-table");
    if ($li.hasClass("expand-all")) {
        $table.find("tbody > .collapsed .twixie > span").click();
    } else if ($li.hasClass("collapse-all")) {
        $table.find("tbody > .expanded .twixie > span").click();
    }
});


/**
 * Strip given prefix from input.
 * Can handle String and jQuery object input.
 *
 * @param prefix String                   prefix to be stripped from input
 * @param input  String or jQuery object
 */
BAMBOO.stripPrefixFromId = function (prefix, input) {
    if (typeof(input) == 'string') {
        if (input.indexOf(prefix) === 0) {
            return input.slice(prefix.length);
        } else {
            return input;
        }
    } else {
        return this.stripPrefixFromId(prefix, AJS.$(input).attr("id"));
    }
};

/**
 * Unsafe (for jQuery id's) character regex
 * Reference: http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F
 */
BAMBOO.unsafeIdCharacterRegex = /([:.])/g;

/**
 * Escape characters in element id to use it as jQuery selector
 * @param id
 */
BAMBOO.escapeIdToJQuerySelector = function (id) {
    return id.replace(BAMBOO.unsafeIdCharacterRegex, '\\$1');
};

BAMBOO.buildAUIMessage = function (messages, type, opts) {
    var defaults = {
            escapeTitle: true
        },
        options = AJS.$.extend(true, defaults, opts),
        msg,
        $dummy = AJS.$('<div/>');
    if (messages.length === 1) {
        msg = (options.escapeTitle ? messages[0] : '<strong>' + messages[0] + '</strong>');
        AJS.messages[type]($dummy, (options.escapeTitle ? {title: msg, closeable: false} : {
            body: msg,
            closeable: false
        }));
    } else if (messages.length > 1) {
        var list = ['<ul>'];
        for (var i = 0, ii = messages.length; i < ii; i++) {
            list.push('<li>', messages[i], '</li>');
        }
        list.push('</ul>');
        AJS.messages[type]($dummy, {body: list.join(''), closeable: false});
    }
    return $dummy.children();
};

BAMBOO.buildAUIErrorMessage = function (errors) {
    return BAMBOO.buildAUIMessage(errors, 'error', {});
};

BAMBOO.buildAUIWarningMessage = function (warnings) {
    return BAMBOO.buildAUIMessage(warnings, 'warning', {});
};

BAMBOO.buildFieldError = function (errors) {
    var $dummy = AJS.$('<div/>');
    for (var i = 0, ii = errors.length; i < ii; i++) {
        $dummy.append(AJS.$('<div class="error"/>').html(errors[i]));
    }
    return $dummy.children();
};

/**
 * Add errors to a form field
 * @param $form
 * @param fieldName
 * @param {Array} errors
 * @param {boolean=} animate - display the error(s) with an animation
 */
BAMBOO.addFieldErrors = function ($form, fieldName, errors, animate) {
    var $field = AJS.$('#fieldArea_' + $form.attr('id') + '_' + fieldName.replace(BAMBOO.addFieldErrorsFieldNameRegex, "_")),
        $input = AJS.$('#' + $form.attr('id') + '_' + fieldName.replace(BAMBOO.addFieldErrorsFieldNameRegex, "_")),
        $description = $field.find('.description'),
        $errors = BAMBOO.buildFieldError(errors);

    if (animate) {
        $errors.hide();
    }
    if ($description.length) {
        $description.before($errors);
    } else if ($field.length) {
        $field.append($errors);
    } else {
        $input.after($errors);
    }
    if (animate) {
        $errors.slideDown();
    }
};
BAMBOO.addFieldErrorsFieldNameRegex = /\./g;

(function ($) {
    var i18nCollapse = "Collapse",
        i18nExpand = "Expand";

    $(document).delegate(".collapsible-section > .summary > h3, .collapsible-section > .summary > .icon", "click", function (e) {
        var $summary = $(this).parent(),
            $section = $summary.closest(".collapsible-section"),
            $details = $section.children(".collapsible-details"),
            $icon = $summary.children(".icon");

        if ($section.hasClass("collapsed")) {
            $icon.addClass("icon-collapse").removeClass("icon-expand").attr({title: i18nCollapse}).children().text(i18nCollapse);
            $details.stop(true, true).slideDown(function () {
                $section.removeClass("collapsed");
            });
        } else {
            $icon.addClass("icon-expand").removeClass("icon-collapse").attr({title: i18nExpand}).children().text(i18nExpand);
            $details.stop(true, true).slideUp(function () {
                $section.addClass("collapsed");
            });
        }
    });
})(AJS.$);

/**
 * TODO: extend this with automatic link adding (which will work also for AJAX loaded forms).
 */
BAMBOO.JdkBuilderSelectWidget = function (options) {
    var opts = {
        dialog: {
            height: 320,
            width: 540
        }
    };

    AJS.$.extend(true, opts, options);

    BAMBOO.simpleDialogForm({
        trigger: options.clickTarget,
        dialogWidth: opts.dialog.width,
        dialogHeight: opts.dialog.height,
        success: function (result) {
            AJS.$(opts.displayTarget).append(AJS.$("<option />", {
                val: result.capability.label,
                text: result.capability.label
            })).val(result.capability.label);
        }
    });
};

AJS.$(function ($) {
    addConfirmationToLinks();
    /* Default options for jQuery's tablesorter plugin */
    if ($.tablesorter) {
        // use 'zebra' plugin by default
        $.tablesorter.defaults.widgets = ['zebra'];
        // use AUI compatible classes
        $.tablesorter.defaults.widgetZebra = {css: ['', 'zebra']};
    }

    // Drop down for user profile
    AJS.$("#header > .global > .secondary .aui-dd-parent").dropDown("Standard", {trigger: "span.aui-dd-trigger"});
});

BAMBOO.JdkBuilderSelectWidget({clickTarget: "a.addSharedJdkCapability", displayTarget: "select.jdkSelectWidget"});
BAMBOO.JdkBuilderSelectWidget({
    clickTarget: "a.addSharedBuilderCapability",
    displayTarget: "select.builderSelectWidget"
});

/**
 * Small jQuery method to check if the element has been clipped (content breaking outside it's bounding box) or not
 */
jQuery.fn.isClipped = function () {
    var $el = this.filter(':first');
    return ($el.prop('scrollWidth') > $el.prop('clientWidth'));
};

BAMBOO.openJiraIssueTransitionDialog = function (e) {
    e.preventDefault();
    var $trigger = AJS.$(this),
        dialog = new AJS.Dialog({
            width: 720,
            height: 350,
            keypressListener: function (e) {
                if (e.which == jQuery.ui.keyCode.ESCAPE) {
                    dialog.remove();
                }
            }
        });
    dialog.addHeader("Transition Issue").addCancel("Done", function () {
//      dialog.remove();
        reloadThePage();
    });
    AJS.$.ajax({
        url: $trigger.attr("href"),
        data: {'bamboo.successReturnMode': 'json', decorator: 'rest', confirm: true},
        success: function (html) {
            var $html = AJS.$(html);

            dialog.addPanel("", $html).show();
            BAMBOO.JIRAISSUETRANSITION.init({
                issueKey: $trigger.attr("issueKey"),
                returnUrl: $trigger.attr("returnUrl")
            });
        },
        cache: false
    });
};

(function ($) {
    $(document).on('aui-message-close', function (e, a) {
        if (a.hasClass('system-error-message')) {
            var $link = a.find('.system-error-message-remove');
            if ($link.length) {
                $.post($link.attr('href'));
            }
        }
    });
}(AJS.$));

// trigger analytics event when clicked element with 'data-bamboo-analytics-event' attribute
(function ($) {
    const isJSON = function (string) {
        try {
            JSON.parse(string);
            return true
        } catch (e) {
            return false;
        }
    };
    const eventPayloadToEvent = function (eventPayload) {
        if (isJSON(eventPayload)) {
            return $.parseJSON(eventPayload);
        }
        return {name: eventPayload};
    };

    $(document).on('click', '[data-bamboo-analytics-event]', function () {
        AJS.trigger('analytics', eventPayloadToEvent($(this).attr('data-bamboo-analytics-event')));
    });
}(AJS.$));

(function ($) {
    $.ajaxSetup({
        cache: false
    });
}(AJS.$));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/dynamic-field-parameters.js' */
BAMBOO.DynamicFieldParameters = (function ($) {
    var handleOnSelectShowHideSelector = ".handleOnSelectShowHide",
        handleDynamicDescriptionSelector = ".handleDynamicDescription",
        // lifted straight from jQuery, just changed the order
        fxAttrs = [
            // height animations
            [ "height", "marginTop", "marginBottom", "paddingTop", "paddingBottom" ],
            // opacity animations
            [ "opacity" ],
            // width animations
            [ "width", "marginLeft", "marginRight", "paddingLeft", "paddingRight" ]
        ],
        // object to handle the methods we make 'public'
        ret = {};

    /**
     * Handles form select field dynamic description updating
     */
    function handleDynamicSelectDescription() {
        var $select = $(this);

        $select.nextAll(".description").html($select.find("option:selected").attr("data-dynamic-select-description") || null);
    }

    /**
     * Syncs form display states for handleOnSelectShowHide fields and select field dynamic description updating
     * @param context (optional) - DOM Element, Document or jQuery object to use as context
     * @param animate (optional) - force transition animations
     */
    ret.syncFieldShowHide = function (context, animate) {
        if (typeof context === "boolean") {
            animate = context;
            context = null;
        }
        $(".handleOnSelectShowHide", context).each(function () { handleOnSelectShowHide.call(this, animate); });
        $(handleDynamicDescriptionSelector, context).each(handleDynamicSelectDescription);
    };

    function escapeCss(str) {
        var charsToEscape = /[!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~]/g; //from jQuery docs
        return str.replace(charsToEscape, '\\$&');
    }

    /**
     * Runs on a change of a field
     */
    function handleOnSelectShowHide(e) {
        var $el = $(this),
            dependsOnSelector = (".dependsOn" + escapeCss($el.prop("name") || "")),
            switchValue = getSwitchValue($el),
            showPattern, hidePattern,
            useAnimations = (e instanceof jQuery.Event || (typeof e === "boolean" && e)),
            showFn = !useAnimations ? jQuery.fn.show : function () {
                ret.slideDown(this);
            },
            hideFn = !useAnimations ? jQuery.fn.hide : function () {
                ret.slideUp(this);
            };

        if (!(!switchValue && $el.is(":radio"))) {
            showPattern = "showOn" + switchValue;
            hidePattern = "showOn__" + switchValue;

            $el.closest("form").find(dependsOnSelector).each(function () {
                var $deps = $(this);

                if ($deps.prop("class").indexOf("showOn__") != -1) {
                    if ($deps.hasClass(hidePattern)) {
                        hideFn.call($deps);
                    } else {
                        showFn.call($deps);
                    }
                } else {
                    if ($deps.hasClass(showPattern)) {
                        showFn.call($deps);
                    } else {
                        hideFn.call($deps);
                    }
                }
                if ($deps.hasClass(hidePattern)) {
                    hideFn.call($deps);
                }
            });
        }
    }

    /**
     * JSOn listData looks like:
     *
     *  [data: [{value: 'key1', text: 'name for the screen', supportedValues: ['dependencyKey1', 'dependencyKey2']},
     *   {value: 'key2', text: "name 2", supportedValues: ['dependencyKey1']}]]
     *
     * If supportedValues is empty it will be shown for all selections in selParentJQ.
     *
     * @param selParentJQ - the select list that the your data depends on
     * @param selToMutateJQ - the select list that you want to mutate based on the contents of the selDependency
     * @param listDataJson - the json containing all information required to generate the selToMutate
     */
    ret.mutateSelectListContent = function (selParentJQ, selToMutateJQ, listDataJson) {
        var selToMutate = selToMutateJQ[0],
            currentSelectedValue = selToMutateJQ.val(),
            switchValue = getSwitchValue(selParentJQ),
            listData = listDataJson.data;

        //wipe existing items
        selToMutate.options.length = 0;

        // go through selToMutate check if each item is in allowed Items, if not remove?
        for (var i = 0; i<listData.length; i++){
            var value = listData[i].value,
                text = listData[i].text,
                allowedOptions = listData[i].supportedValues,
                show = allowedOptions === null || allowedOptions.length <= 0 || !switchValue;

            if (!show) {
                for (var x = 0; x < allowedOptions.length; x++) {
                    var allowedOption = allowedOptions[x];
                    if (switchValue === allowedOption) {
                        show = true;
                        break;
                    }
                }
            }

            if (show) {
                selToMutate.options[selToMutate.options.length] = new Option(text, value, false, value === currentSelectedValue);
            }
        }

        // make sure we update the dependents of the mutated list.
        handleOnSelectShowHide.call(selToMutate)
    };

    function getSwitchValue($el) {
        if ($el.is("select") && $el.prop("selectedIndex") > -1) {
            var $opt = $el.find("option:selected").filter(":first"),
                optClass = $opt.prop("class");

            //  Special uiSwitch* class prefix
            if (optClass.indexOf('uiSwitch') != -1) {
                return optClass.substring(optClass.lastIndexOf("uiSwitch") + 8);
            } else {
                return $el.val();
            }
        } else if ($el.is(":radio") || $el.is(":checkbox")) {
            return ($el.is(":checked") ? $el.val() : false);
        } else {
            return $el.val();
        }
    }

    ret.selectFirstFieldOfForm = function (formId) {
        var $form = $("#" + formId),
            $firstError = $form.find(":input:visible:enabled.errorField:first").focus();

        if (!$firstError.length) {
            $form.find(":input:visible:enabled:first").focus();
        }
    };

    ret.slideDown = function ($el) {
        $el.animate(genFx('show', 2), function() { $el.show(); });
    };

    ret.slideUp = function ($el) {
        $el.animate(genFx('hide', 2), function() { $el.hide(); });
    };

    /** Generate parameters to create a standard animation
     * This has been lifted straight from jQuery
     * @param type
     * @param num
     */
    function genFx( type, num ) {
        var obj = {};

        jQuery.each( fxAttrs.concat.apply([], fxAttrs.slice(0,num)), function() {
            obj[ this ] = type;
        });

        return obj;
    }

    // handleOnSelectShowHide functionality
    $(document)
        .delegate('input' + handleOnSelectShowHideSelector, 'click', handleOnSelectShowHide)
        .delegate('select, input' + handleOnSelectShowHideSelector, 'change', handleOnSelectShowHide)
        .delegate(handleDynamicDescriptionSelector, 'change', handleDynamicSelectDescription);

    $(function () {
        ret.syncFieldShowHide();
    });

    return ret;
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/config-panel-editor.js' */
BAMBOO.ConfigPanelEditor = function () {
    var events = require('util/events');
    var $ = AJS.$,
        defaults = {
            editor: null,
            configContainer: null,
            itemList: null,
            deleteItemKey: null,
            configFormSuccess: $.noop,
            configFormWarnings: $.noop,
            checkListHasItems: $.noop,
            templates: {
                item: null,
                icon: null
            },
            i18n: {
                confirmAbandonItem: null,
                itemDeleteSuccess: null,
                sortingHasUnsavedItemError: null,
                sortingHasUnspecifiedError: null,
                sortingErrorDialogHeader: null,
                defaultDisplayText: null,
                defaultDisplayTextDescription: null
            },
            sortable: {
                enabled: true,
                items: "> li",
                moveItem: $.noop
            },
            deleteDialogHeight: 200,
            onShowData: null
        },
        options,
        $editor,
        $configContainer,
        $itemList,
        setFocus = function () {
            var $firstError = $configContainer.find(":input:visible:enabled.errorField:first").focus();

            if (!$firstError.length) {
                $configContainer.find(":input:visible:enabled:first").focus();
            }
        },
        insertDefaultText = function () {
            var noItemId = "no-item-selected",
                $noItem = $("#" + noItemId);

            if (!$noItem.length) {
                $noItem = $("<div/>", { "id": noItemId })
                    .append($("<h2/>", { text: options.i18n.defaultDisplayText }))
                    .append($("<p/>", { text: options.i18n.defaultDisplayTextDescription }))
                    .hide()
                    .prependTo($configContainer)
                    .fadeIn();
            }
            return $noItem;
        },
        setupAsyncForm = function ($item) {
            BAMBOO.asyncForm({
                $delegator: $configContainer,
                target: "form",
                success: function (data) {
                    var $newItem = options.configFormSuccess(data, $item.hasClass("unsaved"));
                    $item.replaceWith($newItem);
                    if (data.warnings) {
                        options.configFormWarnings(data.warnings);
                    }
                    setTimeout(function () { $newItem.removeClass("active"); }, 0); // this is so that the class doesn't get removed immediately after the DOM element is replaced which would causes the CSS transition (fading) not to be applied
                },
                cancel: function () {
                    // simply empty the container
                    $configContainer.empty();

                    // clean previous widgets
                    events.EventBus.trigger('unbind');

                    if ($item.hasClass("unsaved")) {
                        $item.remove();
                        checkListHasItems();
                    } else {
                        $item.removeClass("active");
                    }
                    insertDefaultText();
                },
                formReplaced: asyncFormReplaced
            });
        },
        asyncFormReplaced = function () {
            handleOnShow();
            setFocus();
        },
        showItemLoadingIndicator = function ($item) {
            var $configLink;
            if (!$item) {
                $item = $itemList.find('.active');
            }
            $configLink = $item.find("> a:not(.delete)");
            $(AJS.template.load(options.templates.icon).fill({ type: "loading" }).toString()).insertAfter($configLink);
        },
        hideItemLoadingIndicator = function ($item) {
            if (!$item) $item = $itemList.find('.active');
            $item.find(".icon-loading").remove();
        },
        hasUnsavedItem = function () {
            var $unsaved = $itemList.find(".unsaved");

            return ($unsaved.length ? $unsaved : false);
        },
        isOkayToProceedWithUnsavedItem = function () {
            var $unsavedItem = hasUnsavedItem();

            if ($unsavedItem) {
                if (confirm(options.i18n.confirmAbandonItem)) {
                    $unsavedItem.remove();
                    $configContainer.empty();
                    checkListHasItems();
                } else {
                    return false;
                }
            }
            return true;
        },
        checkListHasItems = function () {
            var hasItems = $itemList.children(".item").length;

            $editor.toggleClass("no-items", !hasItems);
            options.checkListHasItems(hasItems);
        },
        add = function (url, $item, attachMethod, attachTarget) {
            // clean previous widgets
            events.EventBus.trigger('unbind');

            return $.ajax({
                url: url,
                data: { decorator: 'nothing', confirm: true },
                success: function (html) {
                    $item[attachMethod](attachTarget).addClass("active unsaved").siblings().removeClass("active");
                    checkListHasItems();
                    $configContainer.html(html);
                    handleOnShow();
                    setupAsyncForm($item);
                    setFocus();
                    if (options.onShowData) {
                        options.onShowData();
                    }
                },
                cache: false
            });
        },
        edit = function (e) {
            var $item = $(this),
                $target = $(e.target),
                showData = function (html) {
                    $configContainer.html(html);
                    handleOnShow();
                    hideItemLoadingIndicator($item);
                    $item.addClass("active").siblings().removeClass("active");
                    setupAsyncForm($item);
                    setFocus();
                    if (options.onShowData) {
                        options.onShowData();
                    }
                };

            if (!$target.hasClass("delete") && !$target.hasClass("icon-delete") && !$target.is(":input")) {
                e.preventDefault();
                if ($item.hasClass("active") || !isOkayToProceedWithUnsavedItem()) {
                    setFocus();
                } else {
                    showItemLoadingIndicator($item);

                    // clean previous widgets
                    events.EventBus.trigger('unbind');

                    $.ajax({
                        url: $item.find("> a:not(.delete)").attr("href"),
                        data: { decorator: 'nothing', confirm: true },
                        success: showData,
                        error: function (data) {
                            showData(data.responseText ? data.responseText : data.responseXML);
                        },
                        cache: false
                    });
                }
            }
        },
        sortUpdate = function (event, ui) {
            if (hasUnsavedItem()) {
                alert(options.i18n.sortingHasUnsavedItemError);
                $itemList.sortable("cancel");
                return;
            }
            var Dialog2 = require('widget/dialog2');
            var $item = $(ui.item),
                showSortingError = function (errors) {
                    var index = $item.prevAll().length;
                    var errorsLength = errors.length;
                    var $content;

                    if (!errors || errorsLength === 0) {
                        $content = $('<div />', {text: options.i18n.sortingHasUnspecifiedError});
                    } else if (errorsLength === 1) {
                        $content = $('<div />', {text: errors[0]});
                    } else {
                        $content = $('<ul />').append(errors.map(function(error) {
                            return $('<li />', {text: error});
                        }));
                    }

                    Dialog2.show({
                        warning: true,
                        removeOnHide: true,
                        titleText: options.i18n.sortingErrorDialogHeader,
                        content: $content.wrap('<div />').parent().html(),
                        size: Dialog2.SMALL
                    });

                    if (($itemList.children().length - 1) == $item.data("movedFromPos")) {
                        $item.appendTo($itemList).removeData("movedFromPos");
                    } else {
                        $item.insertBefore($itemList.children("li:eq(" + ($item.data("movedFromPos") + (($item.data("movedFromPos") > index) ? 1 : 0)) + ")")).removeData("movedFromPos");
                    }
                },
                jqXHR = options.sortable.moveItem($item);

            if (jqXHR) {
                jqXHR.done(function (json) {
                    if (json.status == "ERROR") {
                        if (json.errors && json.errors.length) {
                            showSortingError(json.errors);
                        } else {
                            showSortingError();
                        }
                    }
                }).fail(function () {
                    showSortingError();
                });
            }
        },
        sortStart = function (event, ui) {
            var $self = $(ui.item);

            $self.data("movedFromPos", $self.prevAll().length);
        },
        handleOnShow = function () {
            BAMBOO.DynamicFieldParameters.syncFieldShowHide($configContainer);
            AJS.messages.setup();
        };

    return {
        displayMessages: function (messages) {
            var $dummy = $("<div/>"),
                $messages,
                defaultMsgType = "success";

            for (var i = 0, ii = messages.length; i < ii; i++) {
                var message = messages[i],
                    msgType = message.type || defaultMsgType;

                AJS.messages[msgType]($dummy, { title: message.title, closeable: (msgType != defaultMsgType), body: message.body });
            }

            $messages = $dummy.children();

            $configContainer.empty();
            $configContainer.append($messages);

            $messages.filter("." + defaultMsgType).delay(3000).fadeOut(function () {
                $(this).remove();
            });
            insertDefaultText();
        },

        init: function (opts) {
            options = $.extend(true, defaults, opts);

            var self = this;

            $(document)
                .delegate(options.itemList + " > .item", "click", edit)
                .delegate("#finalisePlanCreation, #finaliseJobCreation", "submit", function (e) {
                    if (!isOkayToProceedWithUnsavedItem()) {
                        e.preventDefault();
                    }
                });

            $(function () {
                $editor = $(options.editor);
                $configContainer = $(options.configContainer)
                    .delegate("form", "submit", function () {
                        showItemLoadingIndicator();

                        // clean previous widgets
                        events.EventBus.trigger('unbind');
                    })
                    .delegate("form", "asyncform-error asyncform-replaced", function () {
                        hideItemLoadingIndicator();
                    });
                $itemList = $(options.itemList);
                if (options.sortable.enabled) {
                    $itemList.sortable({
                        cursor: "move",
                        items: options.sortable.items,
                        update: sortUpdate,
                        start: sortStart
                    });
                }

                BAMBOO.simpleDialogForm({
                    $delegator: $itemList,
                    trigger: "a.delete",
                    dialogWidth: 540,
                    dialogHeight: options.deleteDialogHeight,
                    success: function (data) {
                        self.displayMessages([{ title: options.i18n.itemDeleteSuccess }]);
                        $("#item-" + data[options.deleteItemKey].id).remove();
                        checkListHasItems();
                        events.EventBus.trigger('config-panel-item-removed', data);
                    }
                });
                insertDefaultText();
            });
        },
        add: add,
        setFocus: setFocus,
        isOkayToProceedWithUnsavedItem: isOkayToProceedWithUnsavedItem,
        checkListHasItems: checkListHasItems,
        updateUnspecifiedSortingErrorText: function (updatedText) {
            options.i18n.sortingHasUnspecifiedError = updatedText;
        }
    }
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/tasks.js' */
BAMBOO.TASKS = {};

BAMBOO.TASKS.tasksConfig = function ($) {
    var events = require('util/events');
    var defaults = {
        addTaskTrigger: null,
        taskSetupContainer: null,
        taskConfigContainer: null,
        taskList: null,
        defaultTaskToSelect: null,
        taskTypeCategories: { categories: [] },
        taskTypesDialog: {
            id: "task-types-dialog",
            header: "Task types",
            width: 865,
            height: 530,
            filterForm: null
        },
        templates: {
            taskListItem: null,
            lozengeDisabled: null,
            lozengeConditional: null,
            iconTemplate: null,
            getMoreOnPac: null
        },
        i18n: {
            cancel: "Cancel",
            confirmAbandonTask: "The new task has not yet been saved. If you continue you will abandon the new task.\n\nAre you sure you want to continue?",
            tasksAddSuccess: "Task created successfully.",
            tasksAddSuccessWarning: "Possible conflicting requirements found.",
            tasksEditSuccess: "Task saved successfully.",
            tasksEditSuccessWarning: "Possible conflicting requirements found.",
            tasksDeleteSuccess: "Task deleted successfully.",
            sortingHasUnsavedTaskError: "Please save the new task before reordering.",
            sortingHasUnspecifiedError: "There was a problem moving your task.",
            sortingErrorDialogHeader: "Task move failed",
            defaultDisplayText: "No task selected",
            defaultDisplayTextDescription: "Select a task from the list on the left to configure it."
        },
        agentAvailabilityDescriptionContainer: null,
        agentAvailabilityDescriptionUrl: null,
        moveTaskUrl: null,
        moveFinalBarUrl: null
    },
    options,
    editor = new BAMBOO.ConfigPanelEditor(),
    $filterForm,
    $taskTypesDialog,
    $taskSetupContainer,
    $taskConfigContainer,
    $taskList,
    $loadingIndicator,
    $finalTasksBar,
    taskTypesDialog,
    updateAgentAvailabilityDescription = function () {
        $.ajax({
            url: options.agentAvailabilityDescriptionUrl,
            data: { decorator: "nothing", confirm: true },
            cache: false
          }).done(function (data) {
                $(options.agentAvailabilityDescriptionContainer).html(data);
          });
    },
    displaySuccessMessageAndPossibleWarning = function (isNew, data) {
        var list,
            messages = [{ title: (isNew ? options.i18n.tasksAddSuccess : options.i18n.tasksEditSuccess) }];

        if (data.taskResult.warning.requirementsConflicts) {
            list = ["<ul>"];
            for (var r = 0, rr = data.taskResult.warning.requirementsConflicts.length; r < rr; r++) {
                var req = data.taskResult.warning.requirementsConflicts[r],
                    reqKey = req.group,
                    conflicts = req.labels;

                list.push("<li>", reqKey, "</li><ul>");
                for (var i = 0, ii = conflicts.length; i < ii; i++) {
                    list.push("<li>", conflicts[i], "</li>");
                }
                list.push("</ul>");
            }
            list.push("</ul>");
            messages.unshift({ title: (isNew ? options.i18n.tasksAddSuccessWarning : options.i18n.tasksEditSuccessWarning), type: "warning", body: list.join("") });
        }
        editor.displayMessages(messages);
    },
    configFormSuccess = function (data, isUnsaved) {
        updateAgentAvailabilityDescription();
        displaySuccessMessageAndPossibleWarning(isUnsaved, data);
        var taskItem = $(AJS.template.load(options.templates.taskListItem).fill({ name: data.taskResult.task.name, description: data.taskResult.task.description, id: data.taskResult.task.id, valid : data.taskResult.task.valid }).toString()).addClass("active");
        if (data.taskResult.task.isEnabled === false) {
            $(AJS.template.load(options.templates.lozengeDisabled).toString()).insertBefore(taskItem.find(".delete"));
        } else if (data.taskResult.task.isConditional === true) {
            $(AJS.template.load(options.templates.lozengeConditional).toString()).insertBefore(taskItem.find(".delete"));
        }
        return taskItem;
    },
    addTask = function (e) {
        var $taskTypeListItem = $(this).append($(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString())),
            $taskConfigLink = $taskTypeListItem.find("> a"),
            $taskListItem = $(AJS.template.load(options.templates.taskListItem).fill({
                name: $taskConfigLink.attr("title"),
                description: "",
                id: "",
                valid: true
            }).toString());

        e.preventDefault();

        editor.add($taskConfigLink.attr("href"), $taskListItem, "insertBefore", $finalTasksBar).success(function () {
            taskTypesDialog.remove();
        });
    },
    setupTaskTypesDialogContent = function (html) {
        var $html = $(html);

        $loadingIndicator.hide();

        taskTypesDialog.addPanel("All", $html);
        for (var i = 0, ii = options.taskTypeCategories.length; i < ii; i++) {
            var category = options.taskTypeCategories[i],
                $categoryTasks = $html.clone();
            $categoryTasks.children(":not(.task-type-category-" + category.key + ")").remove();
            if ($categoryTasks.children().length) {
                taskTypesDialog.addPanel(category.label, $categoryTasks);
            }
        }

        taskTypesDialog.show().gotoPanel(0);

        $taskTypesDialog = $("#" + options.taskTypesDialog.id).delegate(".task-type-list > li", "click", addTask);

        if (options.taskTypesDialog.filterForm) {
            $filterForm.find("> input").focus();
        }
    },
    showTaskTypesPicker = function (e) {
        var $addTaskTrigger = $(this),
            header = options.taskTypesDialog.header ? options.taskTypesDialog.header : $addTaskTrigger.text();

        e.preventDefault();

        if (!editor.isOkayToProceedWithUnsavedItem()) {
            editor.setFocus();
            return false;
        }

        if (!$loadingIndicator) {
            $loadingIndicator = $(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString()).insertAfter($addTaskTrigger.closest(".aui-toolbar"));
        } else {
            $loadingIndicator.show();
        }

        taskTypesDialog = new AJS.Dialog({
            id: options.taskTypesDialog.id,
            width: options.taskTypesDialog.width,
            height: options.taskTypesDialog.height,
            keypressListener: function (e) {
                if (e.which == jQuery.ui.keyCode.ESCAPE) {
                    taskTypesDialog.remove();
                }
            }
        });

        if (header) {
            taskTypesDialog.addHeader(header);

            if (options.taskTypesDialog.filterForm) {
                $filterForm = $(options.taskTypesDialog.filterForm).appendTo(taskTypesDialog.page[0].header);

                $filterForm.submit(function (e) { e.preventDefault(); }).find("> input").bind("keypress keyup click", function (e) {
                    var textToLookFor = $(this).val().toUpperCase();

                    e.stopPropagation();
                    $taskTypesDialog.find(".task-type-list > li").each(function () {
                        var $li = $(this);

                        $li[( $li.text().toUpperCase().indexOf(textToLookFor) >= 0 ? "show" : "hide" )]();
                    });
                });
            }
        }
        taskTypesDialog.addCancel(options.i18n.cancel, function () { taskTypesDialog.remove(); });
        if (options.templates.getMoreOnPac) {
            taskTypesDialog.addHelpText(options.templates.getMoreOnPac, {});
        }

        $.ajax({
            url: $addTaskTrigger.attr("href"),
            data: { decorator: "nothing", confirm: true },
            success: setupTaskTypesDialogContent,
            cache: false
        });
    },
    moveTask = function ($taskListItem) {
        var isMovedToFinal, status,
            requestComplete = function () {
                if (!status || status == "ERROR") {
                    triggerReflowOnPrompt();
                }
            };

        triggerReflowOnPrompt();

        if ($taskListItem.hasClass("final-tasks-bar")) {
            editor.updateUnspecifiedSortingErrorText("There was a problem moving the final tasks bar.");

            return $.ajax({
                type: "POST",
                url: options.moveFinalBarUrl,
                data: {
                    afterId: $taskListItem.nextAll(".item:first").data("item-id"),
                    beforeId: $taskListItem.prevAll(".item:first").data("item-id")
                },
                dataType: "json",
                complete: requestComplete
            }).done(function (json) {
                status = json.status;
                if (status != "ERROR") {
                    $taskListItem.nextAll(".item").addClass("final").end().prevAll(".item").removeClass("final");
                }
            });
        } else {
            isMovedToFinal = !!$taskListItem.prevAll(".final-tasks-bar").length;
            editor.updateUnspecifiedSortingErrorText(options.i18n.sortingHasUnspecifiedError);

            return $.ajax({
                type: "POST",
                url: options.moveTaskUrl,
                data: {
                    taskId: $taskListItem.data("item-id"),
                    afterId: $taskListItem.nextAll(".item:first").data("item-id"),
                    beforeId: $taskListItem.prevAll(".item:first").data("item-id"),
                    finalising: isMovedToFinal
                },
                dataType: "json",
                complete: requestComplete
            }).done(function (json) {
                status = json.status;
                if (status != "ERROR") {
                    $taskListItem.toggleClass("final", isMovedToFinal);
                }
            });
        }
    },
    triggerReflowOnPrompt = function () {
        var prompt;

        if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
            prompt = $("#final-tasks-prompt")[0];
            prompt.style.zoom = "100%";
            prompt.style.zoom = "normal";
        }
    };

    return {
        init: function (opts) {

            options = $.extend(true, defaults, opts);

            editor.init({
                editor: options.taskSetupContainer,
                configContainer: options.taskConfigContainer,
                itemList: options.taskList,
                deleteItemKey: "taskResult",
                configFormSuccess: configFormSuccess,
                templates: {
                    item: options.templates.taskListItem,
                    icon: options.templates.iconTemplate
                },
                i18n: {
                    confirmAbandonItem: options.i18n.confirmAbandonTask,
                    itemDeleteSuccess: options.i18n.tasksDeleteSuccess,
                    sortingHasUnsavedItemError: options.i18n.sortingHasUnsavedTaskError,
                    sortingHasUnspecifiedError: options.i18n.sortingHasUnspecifiedError,
                    sortingErrorDialogHeader: options.i18n.sortingErrorDialogHeader,
                    defaultDisplayText: options.i18n.defaultDisplayText,
                    defaultDisplayTextDescription: options.i18n.defaultDisplayTextDescription
                },
                sortable: {
                    items: "> li:not(#final-tasks-prompt)",
                    moveItem: moveTask
                }
            });

            $(document).undelegate(options.addTaskTrigger, "click");
            $(document)
                    .delegate(options.addTaskTrigger, "click", showTaskTypesPicker);

            events.EventBus.on('config-panel-item-removed', updateAgentAvailabilityDescription);

            $(function () {
                $taskSetupContainer = $(options.taskSetupContainer);
                $taskList = $(options.taskList);
                $taskConfigContainer = $(options.taskConfigContainer);
                $finalTasksBar = $taskList.find(".final-tasks-bar");

                options.defaultTaskToSelect && $taskList.find("#item-" + options.defaultTaskToSelect).click();
            });
        }
    }
}(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/repository.js' */
(function ($, BAMBOO) {
    BAMBOO.REPOSITORY = {};

    BAMBOO.REPOSITORY.repositoryConfig = (function () {
        var events = require('util/events');
        var defaults = {
                    addRepositoryTrigger: null,
                    repositorySetupContainer: null,
                    repositoryConfigContainer: null,
                    repositoryList: null,
                    selectRepositorySelector: "#selectedRepository",
                    templates: {
                        repositoryListItem: null,
                        repositoryListItemDefaultMarker: null,
                        iconTemplate: null
                    },
                    displayCategories: null,
                    repositoryTypeCategories: [{
                            key:"linked",
                            label:"Link existing"
                        }, {
                            key:"new",
                            label: "Create new"
                        }
                    ],
                    repositoryTypesDialog: {
                        id: "repository-types-dialog",
                        header: "Repository host",
                        width: 865,
                        height: 530,
                        filterForm: null,
                        isNewAllowed: true
                    },
                    i18n: {
                        cancel: "Cancel",
                        confirmAbandonRepository: "The new repository has not yet been saved. If you continue you will abandon the new repository.\n\nAre you sure you want to continue?",
                        repositoryAddSuccess: "Repository created successfully.",
                        repositoryEditSuccess: "Repository updated successfully.",
                        repositoryDeleteSuccess: "Repository deleted successfully.",
                        sortingHasUnsavedRepositoryError: "Please save the new repository before reordering.",
                        defaultDisplayText: "No repository selected",
                        defaultDisplayTextDescription: "Select a repository from the list on the left to configure it.",
                        repositoryMovingError: AJS.I18n.getText("There was a problem moving your repository."),
                        repositoryMovingFailure: AJS.I18n.getText("Repository move failed")
                    },
                    moveRepositoryUrl: null,
                    markDefault: true,
                    preselectItemId: null
                },
                options,
                editor = new BAMBOO.ConfigPanelEditor(),
                $repositorySetupContainer,
                $repositoryConfigContainer,
                $repositoryList,
                $loadingIndicator,
                $repositoryTypesDialog,
                repositoryTypesDialog,
                $filterForm,

                checkListHasItems = function(hasItems) {
                    if (hasItems) {
                        markDefaultRepository();
                    }
                },
                configFormSuccess = function(data, isUnsaved) {
                    editor.displayMessages([{
                        title: isUnsaved ? options.i18n.repositoryAddSuccess : options.i18n.repositoryEditSuccess
                    }]);

                    var repositoryResult = data.repositoryResult;
                    var repositoryItemTemplateString = AJS.template.load(options.templates.repositoryListItem).fill({
                        name: repositoryResult.name,
                        id: repositoryResult.id
                    }).toString();

                    return $(repositoryItemTemplateString).addClass('active');
                },
                configFormWarnings = function (warnings) {
                    for (var i = 0, ii = warnings.length; i < ii; i++) {
                        editor.displayMessages([{ type: "warning", title: warnings[i] }]);
                    }
                },
                markDefaultRepository = function() {
                    if (options.markDefault) {
                        $repositoryList.find(".item-default").removeClass("item-default").find(".item-default-marker").remove();
                        $repositoryList.find(".item:first").addClass("item-default").find(".item-title");
                    }
                },
                addRepository = function (e) {
                    var $repositoryTypeListItem = $(this).append($(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString())),
                        $repositoryConfigLink = $repositoryTypeListItem.find(".trigger-type-link"),
                        $repositoryListItem = $(AJS.template.load(options.templates.repositoryListItem).fill({ name: "New Repository", id: "" }).toString());

                    e.preventDefault();

                    editor.add($repositoryConfigLink.attr("href"), $repositoryListItem, "appendTo", $repositoryList).success(function () {
                        repositoryTypesDialog.remove();
                    });
                    markDefaultRepository();
                },
                moveRepository = function ($repositoryListItem) {
                    return $.post(options.moveRepositoryUrl, {
                        repositoryId: $repositoryListItem.data("item-id"),
                        afterPosition: $repositoryListItem.nextAll(".item:first").data("item-id"),
                        beforePosition: $repositoryListItem.prevAll(".item:first").data("item-id"),
                        "bamboo.successReturnMode": "json"
                    }).done(markDefaultRepository);
                },
                setupRepositoryTypesDialogContent = function (html) {
                    var $html = $(html);

                    $loadingIndicator.hide();

                    repositoryTypesDialog.addPanel("All", $html);

                    if (options.displayCategories)
                    {
                        for (var i = 0, ii = options.repositoryTypeCategories.length; i < ii; i++)
                        {
                            var category = options.repositoryTypeCategories[i];

                            if (category.key == "new" && !options.repositoryTypesDialog.isNewAllowed)
                                continue;

                            var $categoryTasks = $html.clone();
                            $categoryTasks.children(":not(.repository-type-category-" + category.key + ")").remove();
                            if ($categoryTasks.children().length)
                            {
                                repositoryTypesDialog.addPanel(category.label, $categoryTasks);
                            }
                        }
                    }

                    repositoryTypesDialog.show().gotoPanel(0);

                    $repositoryTypesDialog = $("#" + options.repositoryTypesDialog.id).delegate(".trigger-type-list > li", "click", addRepository);

                    if (options.repositoryTypesDialog.filterForm) {
                        $filterForm.find("> input").focus();
                    }
                },
                showRepositoryTypesPicker = function (e) {
                    var $addRepositoryTrigger = $(this),
                            header = options.repositoryTypesDialog.header ? options.repositoryTypesDialog.header : $addRepositoryTrigger.text();

                    e.preventDefault();

                    if (!editor.isOkayToProceedWithUnsavedItem()) {
                        editor.setFocus();
                        return false;
                    }

                    if (!$loadingIndicator) {
                        $loadingIndicator = $(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString()).insertAfter($addRepositoryTrigger.closest(".aui-toolbar"));
                    } else {
                        $loadingIndicator.show();
                    }

                    repositoryTypesDialog = new AJS.Dialog({
                        id: options.repositoryTypesDialog.id,
                        width: options.repositoryTypesDialog.width,
                        height: options.repositoryTypesDialog.height,
                        keypressListener: function (e) {
                            if (e.which == jQuery.ui.keyCode.ESCAPE) {
                                repositoryTypesDialog.remove();
                            }
                        }
                    });

                    if (header) {
                        repositoryTypesDialog.addHeader(header);

                        if (options.repositoryTypesDialog.filterForm) {
                            $filterForm = $(options.repositoryTypesDialog.filterForm).appendTo(repositoryTypesDialog.page[0].header);

                            $filterForm.submit(function (e) { e.preventDefault(); }).find("> input").bind("keypress keyup click", function (e) {
                                var textToLookFor = $(this).val().toUpperCase();

                                e.stopPropagation();
                                $repositoryTypesDialog.find(".trigger-type-list > li").each(function () {
                                    var $li = $(this);

                                    $li[( $li.text().toUpperCase().indexOf(textToLookFor) >= 0 ? "show" : "hide" )]();
                                });
                            });
                        }
                    }
                    repositoryTypesDialog.addCancel(options.i18n.cancel, function () { repositoryTypesDialog.remove(); });
                    if (options.templates.getMoreOnPac) {
                        repositoryTypesDialog.addHelpText(options.templates.getMoreOnPac, {});
                    }

                    $.ajax({
                        url: $addRepositoryTrigger.attr("href"),
                        data: { decorator: "nothing", confirm: true },
                        success: setupRepositoryTypesDialogContent,
                        cache: false
                    });
                };

        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);

                editor.init({
                    editor: options.repositorySetupContainer,
                    configContainer: options.repositoryConfigContainer,
                    itemList: options.repositoryList,
                    deleteItemKey: "repositoryResult",
                    checkListHasItems: checkListHasItems,
                    configFormSuccess: configFormSuccess,
                    configFormWarnings: configFormWarnings,
                    templates: {
                        item: options.templates.repositoryListItem,
                        icon: options.templates.iconTemplate
                    },
                    i18n: {
                        confirmAbandonItem: options.i18n.confirmAbandonRepository,
                        itemDeleteSuccess: options.i18n.repositoryDeleteSuccess,
                        sortingHasUnsavedItemError: options.i18n.sortingHasUnsavedRepositoryError,
                        sortingHasUnspecifiedError: options.i18n.repositoryMovingError,
                        sortingErrorDialogHeader: options.i18n.repositoryMovingFailure,
                        defaultDisplayText: options.i18n.defaultDisplayText,
                        defaultDisplayTextDescription: options.i18n.defaultDisplayTextDescription
                    },
                    sortable: {
                        enabled: !!options.moveRepositoryUrl,
                        items: "> li:not(#repository-trigger-item)",
                        moveItem: moveRepository
                    },
                    deleteDialogHeight: 540
                });

                $(function () {
                    $repositorySetupContainer = $(options.repositorySetupContainer)
                            .delegate(options.addRepositoryTrigger, "click", showRepositoryTypesPicker);

                    $repositoryList = $(options.repositoryList);
                    $repositoryConfigContainer = $(options.repositoryConfigContainer);

                    editor.checkListHasItems();

                    if (options.preselectItemId) {
                        $(options.repositoryList).children("#item-" + options.preselectItemId).click();
                    }
                });
            }
        }
    }());


    BAMBOO.REPOSITORY.buildStrategyToggle = (function () {
        var defaults = {
                    noVcsStrategyOptions : null,
                    vcsStrategyOptions : null,
                    strategyList: null
                },
                options,
                $strategyList,
                toggleStrategiesForCreate = function () {
                    if (!$strategyList) {
                        $strategyList = $(options.strategyList);
                    }
                    var value = $strategyList.val();
                    $strategyList.attr("disabled", "disabled");
                    if ($(this).val() == "nullRepository") {
                        $strategyList.html(options.noVcsStrategyOptions);
                    } else {
                        $strategyList.html(options.vcsStrategyOptions);
                    }
                    $strategyList.removeAttr("disabled").val(value).change();
                };
        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);
                $(document).delegate("#selectedRepository", "change", toggleStrategiesForCreate);
            }
        }
    }());

    BAMBOO.REPOSITORY.CheckoutTaskConfiguration = (function () {
        var defaults = {
                    addCheckoutSelector: null,
                    removeCheckoutSelector: '.toolbar-trigger',
                    checkoutListSelector: null,
                    checkoutDirectorySelector: null,
                    selectedRepositorySelector: 'select[name^="selectedRepository_"]',
                    templates: {
                        checkoutListItem: null
                    },
                    i18n: {
                        checkoutDirectoryInUse: null
                    }
                },
                options,
                $list,
                $form,
                addCheckoutListItem = function () {
                    var newIndex, $lastCheckout;

                    $lastCheckout = $list.children(':last');
                    newIndex = ($lastCheckout.length ? (parseInt($lastCheckout.attr('data-checkout-id'), 10) + 1) : 0);

                    $(AJS.template.load(options.templates.checkoutListItem).fill({ index: newIndex }).toString())
                            .hide().appendTo($list)
                            .find(options.selectedRepositorySelector).end()
                            .slideDown();

                    BAMBOO.DynamicFieldParameters.syncFieldShowHide($list);
                },
                removeCheckoutListItem = function () {
                    $(this).closest('.aui-toolbar').closest('li').slideUp(function () { $(this).remove(); });
                },
                validateForm = function (e) {
                    var checkoutDirectories = {},
                            hasError = false,
                            checkField = function () {
                                var $field = $(this),
                                        val = $field.val();

                                if (checkoutDirectories.hasOwnProperty(val)) {
                                    $('<div/>', { 'class': 'error', text: options.i18n.checkoutDirectoryInUse }).insertAfter($field.next('.description'));
                                    hasError = true;
                                } else {
                                    checkoutDirectories[val] = true;
                                }
                            },
                            $trigger = $(this),
                            $fieldsToCheck = $form.find(options.checkoutDirectorySelector);

                    $form.find('.error').remove();

                    if ($trigger.is(':text')) {
                        $fieldsToCheck = $fieldsToCheck.not($trigger);
                        $fieldsToCheck.each(checkField);
                        checkField.apply(this);
                    } else {
                        $fieldsToCheck.each(checkField);
                        if (hasError) {
                            e.preventDefault();
                            e.stopPropagation();
                        }
                    }
                };

        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);

                $(function () {
                    $list = $(options.checkoutListSelector)
                            .delegate(options.removeCheckoutSelector, 'click', removeCheckoutListItem)
                            .delegate(options.checkoutDirectorySelector, 'blur', validateForm);

                    $form = $list.closest('form').submit(validateForm);
                    $(options.addCheckoutSelector).click(addCheckoutListItem);
                });
            }
        };
    }());
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/chainTriggers.js' */
(function ($, BAMBOO) {
    BAMBOO.TRIGGER = {};

    BAMBOO.TRIGGER.chainTriggerConfig = (function () {
        var defaults = {
                    addTriggerTrigger: null,
                    triggerSetupContainer: null,
                    triggerConfigContainer: null,
                    triggerList: null,
                    templates: {
                        triggerListItem: null,
                        triggerListItemDefaultMarker: null,
                        iconTemplate: null,
                        lozengeDisabled: null
                    },
                    triggerTypesDialog: {
                        id: "trigger-types-dialog",
                        header: "Select trigger",
                        width: 865,
                        height: 530,
                        filterForm: null
                    },
                    i18n: {
                        cancel: "Cancel",
                        confirmAbandonTrigger: "The new trigger has not yet been saved. If you continue you will abandon the new trigger.\n\nAre you sure you want to continue?",
                        triggerAddSuccess: "Trigger created successfully.",
                        triggerEditSuccess: "Trigger saved successfully.",
                        triggerDeleteSuccess: "Trigger deleted successfully.",
                        defaultDisplayText: "No trigger selected",
                        defaultDisplayTextDescription: "Select a trigger from the list on the left to configure it."
                    },
                    preselectItemId: null
                },
                options,
                editor = new BAMBOO.ConfigPanelEditor(),
                $triggerSetupContainer,
                $triggerConfigContainer,
                $triggerList,
                $loadingIndicator,
                $triggerTypesDialog,
                triggerTypesDialog,
                checkListHasItems = function(hasItems) {
                },
                configFormSuccess = function (data, isUnsaved) {
                    editor.displayMessages([{ title: (isUnsaved ? options.i18n.triggerAddSuccess : options.i18n.triggerEditSuccess) }]);
                    var triggerItem = $(AJS.template.load(options.templates.triggerListItem).fill({ name: data.triggerResult.name, id: data.triggerResult.id, description: data.triggerResult.description }).toString()).addClass("active");
                    if (data.triggerResult.isEnabled === false) {
                        $(AJS.template.load(options.templates.lozengeDisabled).toString()).insertBefore(triggerItem.find(".delete"));
                    }
                    return triggerItem;
                },
                configFormWarnings = function (warnings) {
                    for (var i = 0, ii = warnings.length; i < ii; i++) {
                        editor.displayMessages([{ type: "warning", title: warnings[i] }]);
                    }
                },
                addTrigger = function (e) {
                    var $triggerTypeListItem = $(this).append($(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString())),
                        $triggerConfigLink = $triggerTypeListItem.find(".trigger-type-link"),
                        $triggerListItem = $(AJS.template.load(options.templates.triggerListItem).fill({ name: $triggerConfigLink.text(), description: "", id: "" , valid : true }).toString());

                    e.preventDefault();

                    editor.add($triggerConfigLink.attr("href"), $triggerListItem, "appendTo", $triggerList).success(function () {
                        triggerTypesDialog.remove();
                    });

                },
                setupTriggerTypesDialogContent = function (html) {
                    var $html = $(html);

                    $loadingIndicator.hide();
                    triggerTypesDialog.addPanel("All", $html);
                    triggerTypesDialog.show().gotoPanel(0);

                    $triggerTypesDialog = $("#" + options.triggerTypesDialog.id).delegate(".trigger-type-list > li", "click", addTrigger);

                    if (options.triggerTypesDialog.filterForm) {
                        $filterForm.find("> input").focus();
                    }
                },
                showTaskTypesPicker = function (e) {
                    var $addTriggerTrigger = $(this),
                        header = options.triggerTypesDialog.header ? options.triggerTypesDialog.header : $addTriggerTrigger.text();

                    e.preventDefault();

                    if (!editor.isOkayToProceedWithUnsavedItem()) {
                        editor.setFocus();
                        return false;
                    }

                    if (!$loadingIndicator) {
                        $loadingIndicator = $(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString()).insertAfter($addTriggerTrigger.closest(".aui-toolbar"));
                    } else {
                        $loadingIndicator.show();
                    }

                    triggerTypesDialog = new AJS.Dialog({
                                                         id: options.triggerTypesDialog.id,
                                                         width: options.triggerTypesDialog.width,
                                                         height: options.triggerTypesDialog.height,
                                                         keypressListener: function (e) {
                                                             if (e.which == jQuery.ui.keyCode.ESCAPE) {
                                                                 triggerTypesDialog.remove();
                                                             }
                                                         }
                                                     });

                    if (header) {
                        triggerTypesDialog.addHeader(header);

                        if (options.triggerTypesDialog.filterForm) {
                            $filterForm = $(options.triggerTypesDialog.filterForm).appendTo(triggerTypesDialog.page[0].header);

                            $filterForm.submit(function (e) { e.preventDefault(); }).find("> input").bind("keypress keyup click", function (e) {
                                var textToLookFor = $(this).val().toUpperCase();

                                e.stopPropagation();
                                $triggerTypesDialog.find(".trigger-type-list > li").each(function () {
                                    var $li = $(this);

                                    $li[( $li.text().toUpperCase().indexOf(textToLookFor) >= 0 ? "show" : "hide" )]();
                                });
                            });
                        }
                    }
                    triggerTypesDialog.addCancel(options.i18n.cancel, function () {
                        triggerTypesDialog.remove();
                    });
                    if (options.templates.getMoreOnPac) {
                        triggerTypesDialog.addHelpText(options.templates.getMoreOnPac, {});
                    }

                    $.ajax({
                               url: $addTriggerTrigger.attr("href"),
                               data: { decorator: "nothing", confirm: true },
                               success: setupTriggerTypesDialogContent,
                               cache: false
                           });
                };

        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);
                editor.init({
                                editor: options.triggerSetupContainer,
                                configContainer: options.triggerConfigContainer,
                                itemList: options.triggerList,
                                deleteItemKey: "triggerResult",
                                checkListHasItems: checkListHasItems,
                                configFormSuccess: configFormSuccess,
                                configFormWarnings: configFormWarnings,
                                templates: {
                                    item: options.templates.triggerListItem,
                                    icon: options.templates.iconTemplate
                                },
                                i18n: {
                                    confirmAbandonItem: options.i18n.confirmAbandonTrigger,
                                    itemDeleteSuccess: options.i18n.triggerDeleteSuccess,
                                    defaultDisplayText: options.i18n.defaultDisplayText,
                                    defaultDisplayTextDescription: options.i18n.defaultDisplayTextDescription
                                },
                                sortable: {
                                    enabled: false
                                }
                            });

                $(function () {
                    $triggerSetupContainer = $(options.triggerSetupContainer)
                            .delegate(options.addTriggerTrigger, "click", showTaskTypesPicker);
                    $triggerList = $(options.triggerList);
                    $triggerConfigContainer = $(options.triggerConfigContainer);

                    editor.checkListHasItems();

                    if (options.preselectItemId) {
                        $(options.triggerList).children("#item-" + options.preselectItemId).click();
                    }
                });
            }
        }
    }());
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/labels.js' */
(function ($, BAMBOO) {
    BAMBOO.LABELS = {};
    BAMBOO.LABELS.LabelDialog = LabelDialog;

    function LabelDialog(opts) {
        var defaults = {
                trigger: '.labels-edit',
                labelView: '.label-list, .label-none',
                labelsDialog: {
                    id: 'labels-dialog',
                    header: null,
                    width: 550,
                    height: 250,
                    shortcutKey: "L"
                },
                removeUrl: ''
            },
            options = $.extend(true, defaults, opts),
            $loadingIndicator,
            dialog,
            setupDialogContent = function (html) {
                var $html = $(html);
                $loadingIndicator.hide();

                dialog.addPanel('All', $html).show();
            },
            showDialog = function (e) {
                e.preventDefault();
                var $trigger = $(this);

                if (!$loadingIndicator) {
                    $loadingIndicator = $(widget.icons.icon({ type: 'loading' })).insertAfter($trigger);
                } else {
                    $loadingIndicator.show();
                }

                dialog = new AJS.Dialog({
                    id: options.labelsDialog.id,
                    width: options.labelsDialog.width,
                    height: options.labelsDialog.height,
                    keypressListener: function (e) {
                        if (e.which == jQuery.ui.keyCode.ESCAPE) {
                            dialog.remove();
                        }
                    }
                });

                dialog.addCancel("Close", function () { dialog.remove(); })
                      .addHeader(options.labelsDialog.header);

                if (options.labelsDialog.shortcutKey) {
                    dialog.addHelpText(AJS.format("Shortcut tip: pressing \u003ckbd\u003e{0}\u003c/kbd\u003e also opens this dialog box", options.labelsDialog.shortcutKey));
                }

                $.ajax({
                    url: $trigger.attr('href'),
                    data: { decorator: 'nothing', confirm: true },
                    success: setupDialogContent,
                    cache: false
                });
                $('#' + options.labelsDialog.id).addClass('labels-dialog');
            },
            addLabels = function (e) {
                e.preventDefault();

                var $form = $(this),
                    $input = $form.find('input:text').attr('readonly', 'readonly'),
                    $submit = $form.find('input:submit').attr('disabled', 'disabled'),
                    $loading = $(widget.icons.icon({ type: 'loading' })).insertAfter($submit);

                $.post($form.attr('action'), $form.serialize(), function (data) {
                    var fieldErrors;
                    $form.find('.error,.aui-message').remove();
                    if (typeof data == 'object') {
                        // Returned data is JSON
                        fieldErrors = data.fieldErrors;
                        if (fieldErrors) {
                            for (var fieldName in fieldErrors) {
                                if (fieldErrors.hasOwnProperty(fieldName)) {
                                    BAMBOO.addFieldErrors($form, fieldName, fieldErrors[fieldName]);
                                }
                            }
                        }
                        if (data.errors) {
                            $form.prepend(BAMBOO.buildAUIErrorMessage(data.errors));
                        }
                    } else {
                        // Returned data isn't JSON, assume it's HTML
                        updateDisplay(data);
                        $form.find('input:text').val('');
                    }
                    $input.removeAttr('readonly');
                    $submit.removeAttr('disabled');
                    $loading.remove();
                    $form.find('input:text').focus();
                });
            },
            deleteLabel = function (e) {
                e.preventDefault();

                $.post(options.removeUrl, { selectedLabel: $(this).closest('.aui-label').attr('data-label') }).done(updateDisplay);
            },
            updateDisplay = function (data) {
                var $html = $(data),
                    edit = $html.filter('.label-edit-mode').html(),
                    view = $html.filter('.label-view-mode').html();

                $(options.labelView).each(function () {
                    var $replaceTarget = $(this);
                    $replaceTarget.replaceWith($replaceTarget.closest('#' + options.labelsDialog.id).length ? edit : view);
                });


                var labels = AJS.$('#plan-labels');
                if (labels.length) {
                    var $container = $('<div/>').append(view);
                    $container.find('.label-none').remove();

                    labels.html($container.html());
                }

            },
            handlersBoundKey = options.labelsDialog.id + 'handlersBound';

        if (!$(document).data(handlersBoundKey)) {
            $(document)
                .undelegate('.' + options.labelsDialog.id)
                .delegate(options.trigger, 'click.' + options.labelsDialog.id, showDialog)
                .delegate('#' + options.labelsDialog.id + ' form', 'submit.' + options.labelsDialog.id, addLabels)
                .delegate('#' + options.labelsDialog.id + ' .aui-icon-close', 'click.' + options.labelsDialog.id, deleteLabel);

            if (options.labelsDialog.shortcutKey) {
                $(function(){
                    AJS.whenIType(options.labelsDialog.shortcutKey).click(options.trigger);
                });
            }
            $(document).data(handlersBoundKey, true);
        }
    }
}(AJS.$, window.BAMBOO = (window.BAMBOO || {})));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/logs.js' */
/* Chain Log Tables */
(function ($) {
    var BAMBOO = window.BAMBOO || {};
    BAMBOO.LOGS = {};
    BAMBOO.LOGS.chainTableLiveView = (function () {
        var opts = {
            getBuildUrl: null,
            chainStatus: "",
            noLogsFound: 'No logs were found for this Job',
            templates: {
                logTableRow: null
            }
        },
        updateTimeout,
        update = function () {
            clearTimeout(updateTimeout);
            updateLogDisplay();

            //If build not finished update again in 5 seconds
            if (opts.chainStatus != "Finished" && opts.chainStatus != "NotBuilt") {
                updateTimeout = setTimeout(update, 5000);
            }
        },
        updateLogDisplay = function() {
            $(".chain-logs-table > tbody > tr.log-trace > td.code table").each(function() {
                var $logContainer = $(this),
                    $tr = $logContainer.closest("tr").prev();

                if ($tr.hasClass("expanded")) {
                    updateSingleLog($tr.find(".twixie > span"));
                }
            });
        },
        updateSingleLog = function ($twixie) {
            var $tr = $twixie.closest("tr"),
                $stack = $tr.next(),
                $logContainer = $stack.find("table"),
                $loading = $('<span />', { 'class': 'icon icon-loading' });

            if ($logContainer.data('dontUpdate') || $logContainer.data('updateInProgress')) {
                return;
            }
            $logContainer.data('updateInProgress', true);

            $twixie.hide().before($loading);

            $.ajax({
                url: opts.getBuildUrl.replace("@KEY@", $logContainer.attr("id")),
                data: {
                    expand: 'logEntries[-' + 25 + ':]',
                    'max-results': 25
                },
                dataType: "json",
                contentType: "application/json",
                cache: false,
                success: function (buildResult) {
                    var newLogBody = '';

                    if (buildResult.lifeCycleState == "Finished" || buildResult.lifeCycleState == "NotBuilt") {
                        //if build result is finished there will be no more log changes
                        $logContainer.data('dontUpdate', true);
                    }
                    if (buildResult.logEntries && typeof(buildResult.logEntries.logEntry) != "undefined") {
                        for (var i = 0, ii = buildResult.logEntries.logEntry.length; i < ii; i++) {
                            var logEntry = buildResult.logEntries.logEntry[i];

                            newLogBody += AJS.template.load(opts.templates.logTableRow)
                                .fill({ time: logEntry.formattedDate })
                                .fillHtml({ log: logEntry.log }).toString();
                        }
                    }

                    if ($.trim(newLogBody).length) {
                        $logContainer.html(newLogBody);
                    } else {
                        $logContainer.html(AJS.template.load(opts.templates.logTableRow)
                            .fill({time : ''})
                            .fillHtml({ log: opts.noLogsFound }).toString());
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    $logContainer.html(opts.noLogsFound);
                },
                complete: function (jqXHR, textStatus) {
                    $loading.remove();
                    $twixie.show();
                    $logContainer.data('updateInProgress', false);
                }
            });
        };

        return {
            init: function(options) {
                var twixieSelector = ".chain-logs-table > tbody > tr > .twixie > span",
                    twixieAllSelector = ".chain-logs-table > thead > tr > .twixie span[role]";

                $.extend(true, opts, options);

                $(document)
                    .undelegate(twixieSelector, "click")
                    .delegate(twixieSelector, "click", function (e) {
                        var $twixie = $(this),
                                $tr = $twixie.closest("tr"),
                                $stack = $tr.next(),
                                newTwixieText = !$twixie.hasClass("icon-collapse") ? "Collapse" : "Expand"; //negated because we toggle the class later

                        $stack[$tr.hasClass("collapsed") ? "show" : "hide"]();
                        $tr.toggleClass("collapsed expanded");
                        $twixie.toggleClass("icon-collapse icon-expand").attr("title", newTwixieText).html("<span>" + newTwixieText + "</span>");
                        if ($tr.hasClass("expanded")) {
                            updateSingleLog($twixie);
                        }
                    })
                    .undelegate(twixieAllSelector, "click")
                    .delegate(twixieAllSelector, "click", function (e) {
                        var $trigger = $(this),
                                $li = $trigger.closest("li"),
                                $table = $trigger.closest("table");

                        if ($li.hasClass("expand-all")) {
                            $table.find("tbody > .collapsed .twixie > span").click();
                        } else if ($li.hasClass("collapse-all")) {
                            $table.find("tbody > .expanded .twixie > span").click();
                        }
                    });

                update();
            }
        }
    })();
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/plugin-content.js' */
(function ($) {
    var BAMBOO = window.BAMBOO || {};
    BAMBOO.AGGREGATE_PLUGIN_CONTENT = {};
    BAMBOO.AGGREGATE_PLUGIN_CONTENT.loadPluginContent = (function () {
        var opts = {
            pluginUrl: null,
            jobKeySelector: null,
            contentSelector: null
        },
        $content,
        $jobDropdown,
        update = function () {
            var jobKey = $jobDropdown.val(),
                buildUrl = AJS.template(opts.pluginUrl).fill({ buildKey: jobKey, planKey: jobKey }).toString(),
                $tabsContainer = $('.aui-tabs.aui-tabs-disabled').addClass('loading');

            $.ajax({
                cache: false,
                url: buildUrl,
                beforeSend: function (jqXHR) {
                    jqXHR.setRequestHeader('X-No-Decorate', true);
                },
                success: function (data, textStatus, jqXHR) {
                    // If no data is returned, or an entire web page, go directly to that page for normal error handling
                    if (!$.trim(data) || /<html/i.test(data)) {
                        return window.location = this.url;
                    }
                    $content.html(data);
                    $tabsContainer.removeClass('loading');
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    if (textStatus != 'abort') {
                        return window.location = this.url;
                    }
                }
            });
        };

        return {
            init: function (options) {
                opts = $.extend(true, options);

                $(function () {
                    $content = $(opts.contentSelector);
                    $jobDropdown = $(opts.jobKeySelector).change(update);
                    update();
                });
            }
        }
    })();
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/manual-stages.js' */
(function($) {
    var BAMBOO = window.BAMBOO || {};
    BAMBOO.STAGES = {};
    BAMBOO.STAGES.manualStagesSelection = (function () {
        return {
            init: function() {
               $("#stageContainer").delegate("input:checkbox", "click", function() {
                    var $checkbox = $(this),
                        checked = $checkbox.is(":checked"),
                        $selectedStage = $("#selectedStage"),
                        prevManualFound = false;

                    if (checked) {
                        $selectedStage.val($checkbox.val());
                    } else {
                        $selectedStage.val("");
                    }

                    $checkbox.parent().closest(".checkbox").toggleClass("selected", checked).prevAll(".checkbox").each(function () {
                        var $checkboxContainer = $(this),
                            $checkbox = $checkboxContainer.children("input:checkbox"),
                            isManual = $checkboxContainer.hasClass("manual");
                        if (checked) {
                            $checkboxContainer.addClass("selected");
                            if (isManual) {
                                $checkbox.attr("checked", "checked").attr("disabled", "disabled");
                            }
                        } else {
                            if (isManual && !prevManualFound) {
                                $selectedStage.val($checkbox.val());
                                $checkbox.removeAttr("disabled");
                                prevManualFound = true;
                            }
                        }
                    }).end().nextAll(".checkbox").each(function () {
                        var $checkboxContainer = $(this);
                        if ($checkboxContainer.hasClass("manual")) {
                            return false; // breaks the loop
                        } else {
                            $checkboxContainer.toggleClass("selected", checked);
                        }
                    });
                });
            }
        }
    })();
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/dashboard.js' */
(function($, BAMBOO){
    BAMBOO.DASHBOARD = {};

    BAMBOO.DASHBOARD.Expander = function (opts) {
        var defaults = {
                toggleFilterClass: null,
                triggerSelector: null,
                triggerRootSelector: null,
                tableSelector: null,
                pageSize: 50,
                disabledAttr: 'aria-disabled',
                disabledProperty: 'disabled',
                editFilterClass: 'edit-project-filter',
                icons: {
                    filter: 'filter',
                    loading: 'loading'
                }
            },
            options = $.extend(true, defaults, opts),
            request,
            iconClassPrefix = 'icon-',
            iconFilterClass = iconClassPrefix + options.icons.filter,
            iconLoadingClass = iconClassPrefix + options.icons.loading,
            showMorePlans = function (e) {
                var $loading,
                    $trigger = $(this),
                    lastProjectKey = $trigger.closest(options.triggerRootSelector).data('lastProjectKey'),
                    getPlansUrl = $trigger.hasClass('quick-filters') ? '/quickFilteredPlansSnippet.action' : '/allPlansSnippet.action';

                if ($(e.target).hasClass(options.editFilterClass) || $trigger.is(':disabled')) {
                    return;
                }

                $loading = $(widget.icons.icon({ type: options.icons.loading }));
                $trigger.append($loading).prop(options.disabledProperty, true);

                var $activeFilters = $('.quick-filters-container').find('.quick-filter.active');
                var filterIds = $activeFilters.toArray()
                    .map(function(element) {
                        return $(element).attr('data-filter-id');
                    });

                getPlans(AJS.contextPath() + getPlansUrl, {
                    pageSize: options.pageSize,
                    lastProject: lastProjectKey,
                    filterIds : filterIds
                }).done(updateTable).fail(showError);

                function showError() {
                    $loading.remove();
                    $trigger.prop(options.disabledProperty, false).html("Bamboo appears to be unresponsive, \u003cspan class=\u0022try-again\u0022\u003etry again\u003c/span\u003e?");
                }
            },
            updateTable = function (response) {
                var $table = $(options.tableSelector),
                    $htmlResponse = $(response);

                $table.append($htmlResponse.find('tbody'));
                $table.find('tfoot').replaceWith($htmlResponse.find('tfoot'));

                realignDiscoveryDialog();
            },
            toggleFilter = function (e, enable) {
                var $button = $('#toggle-project-filter'),
                    filterEnabled = (typeof enable === 'boolean' ? !enable : $button.is('[aria-pressed="true"]')),
                    updateButton = function () {
                        $button.attr('aria-pressed', !filterEnabled).removeAttr(options.disabledAttr);
                        if ($button.hasClass(options.editFilterClass)) {
                            $button.removeClass(options.editFilterClass).addClass(options.toggleFilterClass);
                        }
                        var iconHtml = widget.icons.icon({ type: options.icons.filter, reversed: !filterEnabled });
                        $button.html(iconHtml + '&nbsp;' + (filterEnabled ? "Personal filter is off" : "Personal filter is on"));
                    },
                    restoreButton = function () {
                        $button.removeAttr(options.disabledAttr)
                            .find('.icon').removeClass(iconLoadingClass).addClass(iconFilterClass);
                    };

                e && e.preventDefault();

                if ($button.is('[' + options.disabledAttr + '="true"]')) {
                    return;
                }
                $button.attr(options.disabledAttr, true)
                    .find('.icon').removeClass(iconFilterClass).addClass(iconLoadingClass);

                getPlans(AJS.contextPath() + '/toggleDashboardFilterInline.action', { filterEnabled: !filterEnabled })
                    .done(replaceTable).done(updateButton)
                    .fail(restoreButton);
            },
            replaceTable = function (response) {
                $(options.tableSelector).replaceWith(response);
                realignDiscoveryDialog();
            },
            getPlans = function (url, data) {
                if (request) {
                    request.abort();
                }
                return request = $.ajax({
                    url: url,
                    type: 'POST',
                    cache: false,
                    dataType: 'html',
                    data: $.extend(true, { decorator: 'nothing', confirm: true }, data || {})
                });
            },
            enableFilter = function () {
                toggleFilter(null, true);
            },
            realignDiscoveryDialog = function() {
                var quickFilters = BAMBOO.DASHBOARD.quickFilters;
                if (quickFilters && quickFilters.discoveryDialog) {
                    quickFilters.discoveryDialog.realign();
                }
            };

        return {
            init: function ()  {
                $(options.tableSelector).on('click', options.triggerSelector, showMorePlans);
                $(document).on('click', makeClassSelector(options.toggleFilterClass), toggleFilter);

                BAMBOO.simpleDialogForm({
                    trigger: makeClassSelector(options.editFilterClass),
                    dialogWidth: 640,
                    dialogHeight: 420,
                    success: enableFilter,
                    header: "Personal filter"
                });

                AJS.whenIType("L").click('#main-edit-project-filter');
            }
        };
    };

    BAMBOO.DASHBOARD.InlineActions = function () {
        var options = {
            classes: {
                favourite: 'markBuildFavourite',
                unfavourite: 'unmarkBuildFavourite',
                enable: 'enableBuild',
                loading: 'loading',
                icon: 'aui-icon',
                iconFavourite: 'aui-iconfont-unstar', //this is counter intuitive but "star" and "unstar" is action in AUI while we're showing state
                iconUnfavourite: 'aui-iconfont-star'
            },
            texts: {
                favourite: "Favourite",
                unfavourite: "Unfavourite"
            }

        };

        $(document)
            .on('click', makeClassSelector([ options.classes.favourite, options.classes.unfavourite ]), toggleFavourite)
            .on('click', makeClassSelector(options.classes.enable), enableBuild);

        function toggleFavourite(e) {
            var $this = $(this),
                planKey = $this.data('planKey'),
                icon = $this.children(makeClassSelector(options.classes.icon)),
                isFavourite = $this.hasClass(options.classes.unfavourite),
                endpoint = AJS.contextPath() + '/rest/api/latest/plan/' + planKey + '/favourite';

            e.preventDefault();

            if ($this.hasClass(options.classes.loading)) {
                return;
            }
            $this.addClass(options.classes.loading);

            $.ajax({
                url: endpoint,
                type: (isFavourite ? 'DELETE' : 'POST'),
                dataType: 'json'
            }).done((isFavourite ? unmark : mark)).always(reset);

            function toggleTitle(e, on) {
                if (on) {
                    e.prop('title', e.prop('title').replace(options.texts.favourite, options.texts.unfavourite));
                } else {
                    e.prop('title', e.prop('title').replace(options.texts.unfavourite, options.texts.favourite));
                }
            }
            function mark() {
                $this.removeClass(options.classes.favourite).addClass(options.classes.unfavourite);
                icon.removeClass(options.classes.iconFavourite).addClass(options.classes.iconUnfavourite);
                toggleTitle($this, true);
                toggleTitle(icon, true);
            }
            function unmark() {
                $this.removeClass(options.classes.unfavourite).addClass(options.classes.favourite);
                icon.removeClass(options.classes.iconUnfavourite).addClass(options.classes.iconFavourite);
                toggleTitle($this, false);
                toggleTitle(icon, false);
            }
            function reset() {
                $this.removeClass(options.classes.loading);
            }
        }

        function enableBuild(e) {
            var $this = $(this),
                planKey = $this.data('planKey');

            e.preventDefault();

            if ($this.hasClass(options.classes.loading)) {
                return;
            }
            $this.addClass(options.classes.loading);

            $.ajax({
                type: 'POST',
                url: AJS.contextPath() + '/rest/api/latest/plan/' + planKey + '/enable',
                dataType: 'json'
            }).done(enable).always(reset);

            function enable() {
                $this.hide();
                $('#manualBuild_' + planKey).css("display", "");
            }
            function reset() {
                $this.removeClass(options.classes.loading);
            }
        }
    };
    BAMBOO.DASHBOARD.InlineActions();

    function makeClassSelector(classes) {
        var classArr = (typeof classes === 'string' ? [ classes ] : classes);
        return '.' + classArr.join(',.');
    }
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jira-issues.js' */
(function ($) {
    BAMBOO.JIRAISSUES = (function () {
        var opts = {
                resultSummaryKey: null,
                getIssuesUrl: null,
                currentFullUrl: null,
                defaultIssueIconUrl: null,
                defaultIssueType: null,
                defaultIssueDetails: null,
                newIssueKey: null,
                jiraTabUrl: null,
                maxIssues: null,
                hideStatus: null,
                templates: {
                    authenticationRequiredTemplate: null
                }
            },
            $issuesPanel,
            refresh = function () {
                opts.newIssueKey = (arguments.length ? arguments[0] : null);

                return ($issuesPanel && $issuesPanel.length ? $.ajax({
                    url: opts.getIssuesUrl + opts.resultSummaryKey,
                    cache: false,
                    data: {
                        expand: "jiraIssues[0:" + (opts.maxIssues - 1) + "]",
                        returnUrl: opts.currentFullUrl
                    },
                    dataType: "json",
                    contentType: "application/json"
               }).done(update).fail(error) : false);
            },
            update = function (json) {
                if (json.jiraIssues && json.jiraIssues.issue && json.jiraIssues.issue.length) {
                    $issuesPanel
                        .find('> table')
                        .replaceWith(bamboo.feature.jiraIssueList.jiraIssueList({
                            issues: json.jiraIssues.issue,
                            defaultIssueType: opts.defaultIssueType,
                            defaultIssueIconUrl: opts.defaultIssueIconUrl,
                            hideStatus: opts.hideStatus,
                            jiraTabUrl: opts.jiraTabUrl,
                            maxIssues: opts.maxIssues,
                            issuesCount: json.jiraIssues.size
                        }));

                    $issuesPanel.removeClass('hidden').show();
                    if (opts.newIssueKey) {
                        highlightIssue($issuesPanel.find("tr:contains('" + opts.newIssueKey + "')"));
                    }
                } else {
                    $issuesPanel.hide();
                }
            },
            error = function (jqXHR, textStatus, errorThrown) {
                var response, authUrl, authInstance,
                    $issueTable = $issuesPanel.find('> table');

                try {
                    response = $.parseJSON(jqXHR.responseText);
                    authUrl = response['authenticationRedirectUrl'];
                    authInstance = response['authenticationInstanceName'] || "Jira";
                }
                catch (e) {}

                $issueTable.removeClass('loading');
                if (authUrl) {
                    $(AJS.template.load(opts.templates.authenticationRequiredTemplate).fill({ authenticationUrl: authUrl, authenticationInstanceName: authInstance }).toString()).insertBefore($issueTable);
                }
            };
        
        function highlightIssue($newIssue) {
            if ($newIssue.length) {
                var oldColor = $newIssue.css("backgroundColor");
                $newIssue.css("backgroundColor", "#FFFFDD").delay(3000).animate({ backgroundColor:oldColor }, 1500, "swing");
            }
        }
        
        return {
            /**
             * @param options - Object containing the options to overwrite our defaults
             */
            init: function (options) {
                $.extend(true, opts, options);
                $(function () {
                    $issuesPanel = $(".issueSummary");
                    refresh();
                });
            },
            refresh: refresh,
            highlightIssue: highlightIssue
        }
    })();

    BAMBOO.JIRATEASER = (function () {
        var jiraTeaserPopup,
            dialogOptions = {
                width: 420,
                hideDelay: 36e5
            },
            generatePopup = function ($contents, trigger, doShowPopup) {
                // hide popup hooks
                var doHidePopup = function () {
                    jiraTeaserPopup.hide();
                    return false;
                };

                $(document).keyup(function (e) {
                    if (e.which == jQuery.ui.keyCode.ESCAPE) {
                        doHidePopup();
                        $(document).unbind("keyup", arguments.callee);
                        return false;
                    }
                    return true;
                });

                // replace container contents with teaser
                $contents
                    .html(AJS.template.load("jira-teaser-popup").fill())
                    .find(".close-dialog").click(doHidePopup).end()
                    .find(".jiraTeaserCheckbox").change(function (e) {
                        var val = $(this).is(":checked");
                        $.ajax({
                            url: AJS.contextPath() + "/rest/pref/latest/user",
                            type: "post",
                            data: {
                                "bamboo.user.jira.teaser.hide" : val
                            }
                        });
                    });

                doShowPopup();
            };

        $(function ($) {
            if ($("#jira-teaser-template").length) {
                jiraTeaserPopup = AJS.InlineDialog($("#changesSummary .jiraIssueLink:last"), "jiraChangesSummary", generatePopup, dialogOptions);
                jiraTeaserPopup.show();
            }
        });
    }());
})(AJS.$);

var JiraIssueLinkManager = (function ($) {
    var globalBambooProjectKey,
        addLink = function () {
            var $this = $(this),
                jiraIssueKey = $this.data("issue-key"),
                bambooProjectKey = $this.data("bamboo-project-key") || globalBambooProjectKey,
                href = AJS.contextPath() + "/project/jiraRedirect.action?jiraIssueKey=" + jiraIssueKey;

            if (bambooProjectKey) {
                href += "&bambooProjectKey=" + bambooProjectKey;
            }
            $this.attr("href", href);
        };

    return {
        init: function (bambooProjectKey) {
            globalBambooProjectKey = bambooProjectKey;
            $(function () {
                $("a.jiraIssueLink").each(addLink);
           });
        }
    };
})(AJS.$);

var JiraRelatedIssues = (function ($) {
    return {
        init: function() {
            BAMBOO.JIRAISSUES.highlightIssue($(".newJiraIssue"));
        }
    }
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jiraIssueCreation.js' */
BAMBOO.JIRAISSUECREATION = (function ($) {
    var defaults = {
            planResultKey: null,
            applinkId: null,
            projectId: null,
            returnUrl: null,
            issueTypeId: null,
            noProjectsMessage: null,
            templates: {
                authenticationRequiredTemplate: null,
                cannotCreateTemplate: null,
                shortcutHint: null,
                genericErrorHelpLink: null
            }
        },
        options,
        firstTime = true,
        setRequiredField = function ($selectField, value) {
            var $label = $("label[for="+$selectField.attr('id')+"]");
            $label.find("span").remove();
            if (value) {
                $label.append("<span class=\"aui-icon icon-required\"></span><span class=\"content\"> (required)</span>");
            }
        },
        hideSelect = function ($selectField) {
            $selectField.parent().hide();
            $selectField.find("option").remove();
        },
        populateMultiSelect = function ($selectField, fieldSchema) {
            var show = false;
            setRequiredField($selectField, fieldSchema.required);

            $(fieldSchema.allowedValues).each(function () {
                $('<option />', {
                    val: this.id,
                    text: this.name,
                    title: this.description
                }).appendTo($selectField);
               show = true;
            });
            if (show) {
                $selectField.parent().show();
            }
        },
        populateErrors = function (data) {
            var $messageContainer = $("#cannot-create-message-container"),
                $issueContainer = $("#issue-contents-container"),
                $message;
            /* other error cases */
            if (data.errors && data.errors.length) {
                $message = BAMBOO.buildAUIErrorMessage(data.errors);
            } else if (data.fieldErrors && data.fieldErrors.length) {
                var renderedErrors = [];
                for (var fieldError in data.fieldErrors){
                    if (data.fieldErrors.hasOwnProperty(fieldError)) {
                        renderedErrors.push(fieldError + ": " + data.fieldErrors[fieldError]);
                    }
                }
                $message = BAMBOO.buildAUIErrorMessage(renderedErrors);
            } else if (data.messages && data.messages.length) {
                $message = BAMBOO.buildAUIWarningMessage(data.messages);
            }
            $message.append(AJS.template.load(options.templates.genericErrorHelpLink).toString());
            $messageContainer.append($message).show();
        },
        clearErrors = function () {
            $("#executeCreateNewJiraIssue div.error").remove();
        },
        populateForm = function (projectKey, issueTypeId) {
            var $versionSelectField = $("#jiraProjectVersions"),
                $componentSelectField =$("#jiraProjectComponents"),
                $messageContainer = $("#cannot-create-message-container"),
                $fieldContainer = $("#issue-fields-container"),
                $loadingSpinner = $("#fields-loading-spinner"),
                $createButton = $("#executeCreateNewJiraIssue_save");

            $messageContainer.hide().children().remove();
            $fieldContainer.hide();
            $loadingSpinner.show();
            $createButton.attr("disabled", "disabled");
            hideSelect($versionSelectField);
            hideSelect($componentSelectField);

            $.ajax({
                url: AJS.contextPath() + "/ajax/issueTypeSchema.action",
                data: {
                    appLinkId: $("#jiraServer option:selected").val(),
                    projectKey: projectKey,
                    issueTypeId: issueTypeId,
                    returnUrl: options.returnUrl
                },
                dataType: 'json',
                contentType: 'application/json',
                success: function (data) {
                    if (data.status != 'ERROR') {
                        var fields = data.projects[0].issuetypes[0].fields,
                            unhandledRequiredFields = "";

                        for (var fieldName in fields) {
                            if (fields.hasOwnProperty(fieldName)) {
                                var field = fields[fieldName];
                                if (fieldName == "summary") {
                                    setRequiredField($("#jiraIssueSummary"), field.required);
                                } else if (fieldName == "description") {
                                    setRequiredField($("#issueDescription"), field.required);
                                } else if (fieldName == "components") {
                                    populateMultiSelect($componentSelectField, field);
                                } else if (fieldName == "versions") {
                                    populateMultiSelect($versionSelectField, field);
                                } else if (field.required && fieldName != "issuetype" && fieldName != "reporter" && fieldName != "project" && fieldName != "assignee") {
                                    unhandledRequiredFields = unhandledRequiredFields + " " + field.name;
                                }
                            }
                        }
                        $loadingSpinner.hide();
                        if (unhandledRequiredFields.length) {
                            $messageContainer.append(AJS.template.load(options.templates.cannotCreateTemplate).fill({issueTypeName: data.projects[0].issuetypes[0].name, fieldNames: unhandledRequiredFields}).toString()).show();
                        } else {
                            $createButton.removeAttr("disabled");
                            $fieldContainer.show();
                        }
                    } else {
                        populateErrors(data);
                    }
                },
                error: function (request, textStatus, errorThrown) {}
            });
        },
        serverSelect = function () {
            var projectsById = {},
                $loginDanceContainer = $("#login-dance-message-container"),
                $issueContainer = $("#issue-contents-container"),
                $messageContainer = $("#cannot-create-message-container");

            $("#executeCreateNewJiraIssue_save").attr("disabled", "disabled");
            $("#jiraServer").attr("disabled", "disabled");
            $loginDanceContainer.hide();
            $issueContainer.hide();
            $("#cannot-create-message-container").hide();
            $("#issue-loading-spinner").show();
            $('#jiraProjectKey option').remove();
            $('#jiraIssueType option').remove();
            $messageContainer.hide().children().remove();

            $.ajax({
                url: AJS.contextPath() + "/ajax/jiraIssueSchema.action",
                data: {
                    appLinkId: $("#jiraServer option:selected").val(),
                    returnUrl: options.returnUrl
                },
                dataType: 'json',
                contentType: 'application/json',
                success: function (data) {
                    if (data.status != 'ERROR') {
                        var $projects = $('#jiraProjectKey'),
                            projectIdExists = false;

                        // there is a slight chance of multiple requests being made via selenium or bad programming.
                        // this prevents the project list from getting duplicate options
                        $projects.children().remove();

                        if (data.projects && data.projects.length) {
                            $(data.projects).each(function () {
                                projectsById[this.id] = this;
                                $('<option />', {
                                    val: this.id,
                                    text: this.name
                                }).appendTo($projects);
                                if (this.id == options.projectId) {
                                    projectIdExists = true;
                                }
                            });

                            $projects.unbind();
                            var updateForProject = function () {
                                var project = $('option:selected', $projects),
                                    projectScheme = projectsById[project.val()],
                                    issueTypeExists = false,
                                    $types = $('#jiraIssueType');

                                $types.find("option").remove();
                                $types.unbind();
                                $(projectScheme.issuetypes).each(function () {
                                    if (!this.subtask) {
                                        $('<option />', {
                                            val: this.id,
                                            text: this.name,
                                            title: this.description
                                        }).appendTo($types);
                                        if (this.id == options.issueTypeId) {
                                            issueTypeExists = true;
                                        }
                                    }
                                });

                                var updateForType = function () {
                                    populateForm(projectScheme.key, $types.val());
                                };
                                $types.change(function () {
                                    clearErrors();
                                    updateForType();
                                });
                                if (firstTime && issueTypeExists) {
                                    $types.val(options.issueTypeId);
                                }
                                updateForType();
                            };
                            $projects.change(function () {
                                clearErrors();
                                updateForProject();
                            });
                            if (firstTime && projectIdExists) {
                                $projects.val(options.projectId);
                            }
                            updateForProject();
                            $projects.focus();
                            $loginDanceContainer.hide();
                            $issueContainer.show();
                            firstTime=false;
                        } else {
                            var $message = BAMBOO.buildAUIErrorMessage([options.noProjectsMessage]);
                            $message.append(AJS.template.load(options.templates.genericErrorHelpLink).toString());
                            $messageContainer.append($message).show();
                        }
                    } else if (data.authenticationRedirectUrl && data.authenticationRedirectUrl.length) {
                        $loginDanceContainer.children().remove();
                        $loginDanceContainer.append(AJS.template.load(options.templates.authenticationRequiredTemplate).fill({ authenticationUrl: data.authenticationRedirectUrl, authenticationInstanceName: (data['authenticationInstanceName'] || "Jira") }).toString()).show();
                        $issueContainer.hide();
                    } else {
                        populateErrors(data);
                    }
                    $("#issue-loading-spinner").hide();
                    $("#jiraServer").removeAttr("disabled");
                },
                error: function (request, textStatus, errorThrown) {}
            });
        };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);
            firstTime = true;
            $("#executeCreateNewJiraIssue").find(".buttons-container").prepend(AJS.template.load(options.templates.shortcutHint).toString());
            var $jiraServer = $("#jiraServer");
            $jiraServer.change(function () {
                clearErrors();
                serverSelect();
            });
            if (options.applinkId && $jiraServer.find("option[value='" + options.applinkId + "']").length) {
                $jiraServer.val(options.applinkId);
            }
            serverSelect();
            $jiraServer.closest('form').bind('asyncform-notification', function (e, messages, warnings) {
                var messageDialog, $messages = $('<div />');

                if (messages && messages.length) {
                    $messages.append(BAMBOO.buildAUIMessage(messages, 'success', {escapeTitle: false}));
                }
                if (warnings && warnings.length) {
                    var $message = BAMBOO.buildAUIWarningMessage(warnings);
                    $message.append(AJS.template.load(options.templates.genericErrorHelpLink).toString());
                    $messages.append($message);
                }
                if ($messages.children().length) {
                    $messages.hide().appendTo(document.body); // append to the DOM so we can calculate how big the dialog should be to accommodate the messages
                    messageDialog = new AJS.Dialog({
                        width: 600,
                        height: $messages.innerHeight() + 70 // ~70px should be enough for the button bar plus a bit of padding
                    });
                    messageDialog.addPanel('', $messages.remove().html());
                    messageDialog.addButton("Close", function (dialog) {
                        dialog.remove();
                    });
                    messageDialog.show();
                }
            });
        },
        returnFromDialog: function (response) {
            BAMBOO.JIRAISSUES.refresh(response['newIssueKey']);
        }
    };
})(jQuery);


BAMBOO.JIRAISSUECREATION.NOAPPLINK = (function ($) {
    var defaults = {
        trigger: null,
        contentTemplate: null,
        appLinksAdminUrl: null,
        admin: null
    },
    options,
    showDialog = function () {
        var dialog = new AJS.Dialog({
            width: 600,
            height: 600,
            keypressListener: function (e) {
                if (e.which == jQuery.ui.keyCode.ESCAPE) {
                    dialog.remove();
                }
            }
        });
        dialog.addHeader("Create issue for build");
        dialog.addPanel("", AJS.template.load(options.contentTemplate).toString());
        if (options.admin) {
            dialog.addButton("Connect to Jira", function (dialog) {
                window.location = options.appLinksAdminUrl;
            });
        }
        dialog.addCancel("Cancel", function (dialog)
        {
            dialog.hide();
        });
        dialog.show();
    };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);
            $(document).delegate(options.trigger, "click", function (e) {
                e.preventDefault();
                showDialog();
            });
        }
    }
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/transition-jira-issue.js' */
BAMBOO.JIRAISSUETRANSITION = (function ($) {
    var opts = {
        issueKey: null,
        returnUrl: null
    },
    $errorMessagesContainer,
    $issueControlsContainer,
    $loginDanceMessageContainer,
    $loadingSpinner,
    $issueDetails,
    $issueStatus,
    $transitionButton,
    $transitionSelect,
    $transitionIssueResolution,
    $resolutionButton,
    $resolutionSelect,

    onTransitionClick = function() {
        $transitionButton.attr("disabled", "disabled");
        $transitionSelect.attr("disabled", "disabled");
        $resolutionButton.attr("disabled", "disabled");
        $resolutionSelect.attr("disabled", "disabled");
        $loadingSpinner.show();
        AJS.$.ajax({
            url: AJS.contextPath() + "/ajax/transitionIssue.action?issueKey=" + opts.issueKey + "&transitionId=" + $transitionButton.val()
                    + ($transitionIssueResolution.is(":visible") ? ("&resolutionId=" + $resolutionButton.val()) : "")
                    + "&returnUrl=" + encodeURIComponent(opts.returnUrl),
            dataType: 'json',
            contentType: 'application/json',
            success: function(response) {
                if (response.status != 'ERROR') {
                    if (response.requireResolution) {
                        $resolutionSelect.children().remove();
                        $(response.resolution.allowedValues).each(function(){
                            $('<option value="' + this.id + '"></option>').appendTo($resolutionSelect).text(this.name);
                        });
                        $resolutionSelect.change();
                        $resolutionButton.removeAttr("disabled");
                        $resolutionSelect.removeAttr("disabled");
                        $transitionIssueResolution.show();
                        $loadingSpinner.hide();
                    } else {
                        refreshIssueStatus();
                    }
                } else {
                    handleErrorResponse(response);
                }
                handleLoginDanceResponse(response);
            },
            error: function (request, textStatus, errorThrown) {
                $transitionButton.removeAttr("disabled");
                $transitionSelect.removeAttr("disabled");
                $resolutionButton.removeAttr("disabled");
                $resolutionSelect.removeAttr("disabled");
            }
        });

    },

    onChangeTransition = function() {
        $transitionButton.val($transitionSelect.val());
        $transitionButton.text($(":selected", $transitionSelect).text());
    },

    onChangeResolution = function() {
        $resolutionButton.val($resolutionSelect.val());
        $resolutionButton.text($(":selected", $resolutionSelect).text());
    },

    refreshIssueStatus = function() {
        $loadingSpinner.show();
        AJS.$.ajax({
            url: AJS.contextPath() + "/ajax/issueDetails.action?issueKey=" + opts.issueKey
                    + "&returnUrl=" + encodeURIComponent(opts.returnUrl),
            dataType: 'json',
            contentType: 'application/json',
            success: function(response) {
                if (response.status != 'ERROR') {
                    $issueDetails.children().remove();
                    $issueDetails.append(AJS.template.load("issueDetails-template").fill({url: response.issueUrl, title: response.fields.summary, iconUrl: response.fields.issuetype.iconUrl, key: response.key}).toString());

                    $issueStatus.children().remove();
                    $issueStatus.append(AJS.template.load("issueStatus-template").fill({iconUrl: response.fields.status.iconUrl, name: response.fields.status.name}).toString());
                    refreshTransitions();
                } else {
                    handleErrorResponse(response);
                }
                handleLoginDanceResponse(response);
            },
            error: function (request, textStatus, errorThrown) {
            }
        });
    },

    refreshTransitions = function() {
        AJS.$.ajax({
            url: AJS.contextPath() + "/ajax/issueTransitions.action?issueKey=" + opts.issueKey
                    + "&returnUrl=" + encodeURIComponent(opts.returnUrl),
            dataType: 'json',
            contentType: 'application/json',
            success: function(response) {
                if (response.status != 'ERROR') {
                    $transitionSelect.children().remove();
                    $(response.transitions).each(function(){
                        $('<option value="' + this.id + '"></option>').appendTo($transitionSelect).text(this.name);
                    });
                    $transitionSelect.change();
                    $issueControlsContainer.show();
                } else {
                    handleErrorResponse(response);
                }
                $loadingSpinner.hide();
                $transitionButton.removeAttr("disabled");
                $transitionSelect.removeAttr("disabled");
                $transitionIssueResolution.hide();
                handleLoginDanceResponse(response);
            },
            error: function (request, textStatus, errorThrown) {
            }
        });
    },

    handleLoginDanceResponse = function(response) {
        if (isDefinedObject(response.authenticationRedirectUrl)) {
            $loginDanceMessageContainer.children().remove();
            $loginDanceMessageContainer.append(AJS.template.load("authenticationRequired-template").fill({authenticationUrl: response.authenticationRedirectUrl}).toString()).show();
            $loginDanceMessageContainer.show();
            $issueControlsContainer.hide();
        } else {
            $loginDanceMessageContainer.hide();
        }
    },

    handleErrorResponse = function(response) {
        $errorMessagesContainer.children().remove();
        $(response.errors).each(function(){
            AJS.messages.error($errorMessagesContainer, { body: this, closeable: false });
        });
        $issueControlsContainer.hide();
        $errorMessagesContainer.show();
        $loadingSpinner.hide();
    };

    return {
        init: function (options) {
            $.extend(true, opts, options);
            $errorMessagesContainer = $("#error-messages-container");
            $issueControlsContainer = $("#issue-controls-container");
            $loginDanceMessageContainer = $("#login-dance-message-container");
            $loadingSpinner = $("#loading-spinner");
            $issueDetails = $("#issue-details");
            $issueStatus = $("#issue-status");
            $transitionButton = $("#transition-button");
            $transitionButton.click(onTransitionClick);
            $transitionSelect = $("#transition-select");
            $transitionSelect.change(onChangeTransition);
            $transitionIssueResolution = $("#transition-issue-resolution");
            $resolutionButton = $("#resolution-button");
            $resolutionButton.click(onTransitionClick);
            $resolutionSelect = $("#resolution-select");
            $resolutionSelect.change(onChangeResolution);
            refreshIssueStatus();
        }
    }
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/test-actions.js' */
BAMBOO.TESTACTIONS = (function ($, _) {
    var toggleFail = function (jqXHR) {
        var json,
                message = 'An error occurred while connecting to Bamboo server. Please refresh the page and try again.';

        try {
            json = $.parseJSON(jqXHR.responseText);
            if (json.errors && json.errors.length) {
                message += "\n\n" + json.errors.join("\n");
            }
        }
        catch (e) {}
        alert(message); //todo: ask Matty how to better present error message
    };

    $(document).delegate(".unlink-test-to-jira-action", "click", function (e) {
        var $button = $(this),
                $toolbarItem = $button.closest(".toolbar-item"),
                isDisabledClass = "disabled",
                jqXHR;

        e.preventDefault();

        if (!$toolbarItem.hasClass(isDisabledClass)) {
            $toolbarItem.addClass(isDisabledClass);
            jqXHR = $.post($button.attr("href"), { "bamboo.successReturnMode": "json" }).fail(toggleFail).always(function () { $toolbarItem.removeClass(isDisabledClass); });

            jqXHR.done(function (json) {
                if (json && json.status && json.status == "OK") {
                    var $tableRows = AJS.$(".test-case-row-"+$button.data('testCaseId'));
                    $tableRows.find(".linked-jira-issue").html('');

                    $tableRows.find(".link-test-to-jira-action").toggleClass("hidden", false);
                    $tableRows.find(".create-jira-issue-for-test-action").toggleClass("hidden", false);
                    $tableRows.find(".unlink-test-to-jira-action").toggleClass("hidden", true);
                } else {
                    toggleFail(jqXHR);
                }
            });
        }
    });

    var renderLinkedJiraIssue = function ($element, issue) {
        $element.html(bamboo.feature.jiraIssueList.singleIssue(issue));
    };

    return {
        onReturnFromLinkingIssueManually: function (json) {
            if (json && json.status && json.status == "OK") {
                var $tableRows = AJS.$(".test-case-row-"+json.testCaseId),
                        $linkedJiraIssueContainers = $tableRows.find(".linked-jira-issue");

                if (json.authenticationRedirectUrl)
                {
                    $linkedJiraIssueContainers.html(bamboo.feature.jiraIssueList.singleIssueOAuth({
                        key: json.issue.key,
                        keyLink: AJS.contextPath() + '/project/jiraRedirect.action?jiraIssueKey=' + json.issue.key,
                        authenticationRedirectUrl: json.authenticationRedirectUrl + '&redirectUrl=' + encodeURIComponent(document.location.href),
                        authenticationInstanceName: json.authenticationInstanceName
                    }));
                }
                else
                {
                    renderLinkedJiraIssue($linkedJiraIssueContainers, json.issue);
                }

                $tableRows.find(".unlink-test-to-jira-action").toggleClass("hidden", false);
                $tableRows.find(".link-test-to-jira-action").toggleClass("hidden", true);
                $tableRows.find(".create-jira-issue-for-test-action").toggleClass("hidden", true);
            } else {
                //show some error alert?... shouldn't happen anyway...
            }
        }
    };

})(jQuery, _);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/config-sidebar.js' */
BAMBOO.ConfigSidebar = (function ($) {
    var classes = {
            animating: "animating",
            collapsed: "collapsed",
            expanded: "expanded",
            icons: {
                collapse: "icon-collapse",
                expand: "icon-expand"
            }
        },
        toggleState = function (shouldExpand) {
            var $h2 = $(this),
                $icon = $h2.children(".icon").addClass(classes.animating),
                $listOrMessage = $h2.next();

            $listOrMessage[shouldExpand ? "slideDown" : "slideUp"](function () {
                $h2.removeClass(shouldExpand ? classes.collapsed : classes.expanded).addClass(shouldExpand ? classes.expanded : classes.collapsed);
                $icon
                    .removeClass(classes.animating)
                    .removeClass(shouldExpand ? classes.icons.expand : classes.icons.collapse)
                    .addClass(shouldExpand ? classes.icons.collapse : classes.icons.expand);
                AJS.Cookie.save("config.sidebar." + $h2.data("sidebarSection") + ".expanded", shouldExpand, 365);
            });
        };

    return {
        init: function () {
            $(function () {
                var $configSidebar = $("#config-sidebar")
                    .delegate("." + classes.collapsed, "click", function () { toggleState.call(this, true); })
                    .delegate("." + classes.expanded, "click", function () { toggleState.call(this, false); });

                $configSidebar.find("ul a").each(function () {
                    var $a = $(this);

                    if ($a.isClipped() && !$a.attr("title")) {
                        $a.attr("title", $a.text());
                    }
                });
                $configSidebar.children("." + classes.collapsed).each(function () {
                    $(this).next().hide();
                });
            });
        }
    };
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/error/error.js' */
define('widget/generate-error-messages', [
    'jquery',
    'underscore'
], function(
    $,
    _
) {

    'use strict';

    var generateErrorMessages = function(jqXHR, textStatus, errorThrown) {
        var $message, data;
        try {
            data = $.parseJSON(jqXHR.responseText);
            if (data.errors && data.errors.length) {
                $message = BAMBOO.buildAUIErrorMessage(data.errors);
            } else if (data.fieldErrors && data.fieldErrors.length) {
                var renderedErrors = [];
                for (var fieldError in data.fieldErrors) {
                    if (data.fieldErrors.hasOwnProperty(fieldError)) {
                        renderedErrors.push(fieldError + ': ' + data.fieldErrors[fieldError]);
                    }
                }
                $message = BAMBOO.buildAUIErrorMessage(renderedErrors);
            } else if (data.messages && data.messages.length) {
                $message = BAMBOO.buildAUIWarningMessage(data.messages);
            } else if (data.message) {
                $message = BAMBOO.buildAUIWarningMessage([data.message]);
            }
        } catch (ignore) {}
        return $message;
    };

    return generateErrorMessages;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:linked-deployment-shortcut', location = '/feature/plan/linked-deployment/linked-deployment-shortcut.soy' */
// This file was automatically generated from linked-deployment-shortcut.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace feature.plan.linkedDeployment.
 */

if (typeof feature == 'undefined') { var feature = {}; }
if (typeof feature.plan == 'undefined') { feature.plan = {}; }
if (typeof feature.plan.linkedDeployment == 'undefined') { feature.plan.linkedDeployment = {}; }


feature.plan.linkedDeployment.linkedDeploymentHeaderDropdown = function(opt_data, opt_ignored) {
  return '' + ((opt_data.hasLinkedDeployments) ? aui.buttons.buttons({content: '' + aui.buttons.button({text: '', tagName: 'a', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-deploy', extraAttributes: {title: "Related deployment projects", 'data-plan-key': opt_data.immutablePlan.planKey.key}, extraClasses: 'linked-deployments-menu'})}) + feature.plan.linkedDeployment.linkedDeploymentDialogTriggerHandler(null) : '');
};
if (goog.DEBUG) {
  feature.plan.linkedDeployment.linkedDeploymentHeaderDropdown.soyTemplateName = 'feature.plan.linkedDeployment.linkedDeploymentHeaderDropdown';
}


feature.plan.linkedDeployment.linkedDeploymentDialogTriggerHandler = function(opt_data, opt_ignored) {
  return '<script type="text/javascript">require([\'jquery\', \'feature/linked-deployment-shortcut\'], function($, linkedDeploymentShortcut){$(function () {linkedDeploymentShortcut.init({triggerSelector: ".linked-deployments-menu", relatedProjectsUrl: "' + soy.$$escapeHtml("" + '/rest/api/latest/deploy/project/forPlan?planKey=') + '", dialogContentTemplate: feature.plan.linkedDeployment.linkedDeploymentDialogContent});});});<\/script>';
};
if (goog.DEBUG) {
  feature.plan.linkedDeployment.linkedDeploymentDialogTriggerHandler.soyTemplateName = 'feature.plan.linkedDeployment.linkedDeploymentDialogTriggerHandler';
}


feature.plan.linkedDeployment.linkedDeploymentDashboardDropdown = function(opt_data, opt_ignored) {
  return '' + ((opt_data.hasLinkedDeployments) ? '<a class="linked-deployments-menu" title="' + soy.$$escapeHtml("Related deployment projects") + '" data-plan-key=' + soy.$$escapeHtml(opt_data.immutablePlan.planKey.key) + ' href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.immutablePlan.planKey.key) + '/deployments">' + widget.icons.fontIcon({type: 'deploy'}) + '</a>' : '');
};
if (goog.DEBUG) {
  feature.plan.linkedDeployment.linkedDeploymentDashboardDropdown.soyTemplateName = 'feature.plan.linkedDeployment.linkedDeploymentDashboardDropdown';
}


feature.plan.linkedDeployment.linkedDeploymentDialogContent = function(opt_data, opt_ignored) {
  var output = '<div class="linked-deployments-content"><h3>' + soy.$$escapeHtml("Related deployment projects") + '</h3>';
  if (opt_data.linkedDeploymentProjects && opt_data.linkedDeploymentProjects.length > 0) {
    output += soy.$$escapeHtml("This build plan supplies artifacts for the following deployment projects:") + '<ul>';
    var deploymentProjectList42 = opt_data.linkedDeploymentProjects;
    var deploymentProjectListLen42 = deploymentProjectList42.length;
    for (var deploymentProjectIndex42 = 0; deploymentProjectIndex42 < deploymentProjectListLen42; deploymentProjectIndex42++) {
      var deploymentProjectData42 = deploymentProjectList42[deploymentProjectIndex42];
      output += '<li><a href="' + soy.$$escapeHtml("") + '/deploy/viewDeploymentProjectEnvironments.action?id=' + soy.$$escapeHtml(deploymentProjectData42.id) + '">' + soy.$$escapeHtml(deploymentProjectData42.name) + '</a></li>';
    }
    output += '</ul>';
  } else {
    output += '<p>' + soy.$$escapeHtml("There are no deployment projects linked to this build plan") + '</p>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  feature.plan.linkedDeployment.linkedDeploymentDialogContent.soyTemplateName = 'feature.plan.linkedDeployment.linkedDeploymentDialogContent';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:linked-deployment-shortcut', location = '/feature/plan/linked-deployment/linked-deployment-shortcut.js' */
define('feature/linked-deployment-shortcut', [
    'jquery',
    'underscore',
    'widget/generate-error-messages',
    'util/ajax'
], function(
    $,
    _,
    generateErrorMessages,
    ajax
) {

    'use strict';

    var linkedDeploymentShortcut = (function() {
        var defaults = {
            triggerSelector: null,
            relatedProjectsUrl: null,
            dialogContentTemplate: null
        },
        options;

        return {
            init: function(options) {
                $.extend(true, defaults, options);

                var configuration = {
                    width: 250,
                    offsetX: -10,
                    arrowOffsetX: 0
                };

                AJS.InlineDialog($(options.triggerSelector), 'deployment-shortcut-dialog',
                    function($container, trigger, showPopup) {
                        var planKey = $(trigger).data('planKey');
                        $container.html(widget.icons.icon({type: 'loading'}));

                        ajax({
                            url: options.relatedProjectsUrl + planKey,
                            data: { decorator: 'nothing', confirm: true },
                            dataType: 'json',
                            contentType: 'application/json',
                            cache: false
                        }).success(function(data) {
                            var content = options.dialogContentTemplate({ linkedDeploymentProjects: data});
                            $container.empty().append(content);
                        }).error(function(jqXHR, textStatus, errorThrown) {
                            var $message = generateErrorMessages(jqXHR, textStatus, errorThrown);
                            if (!$message) {
                                $message = $('<p/>').append("Unable to retrieve related deployments from Bamboo");
                            }
                            $container.empty().append($message);
                        });

                        showPopup();
                        return false;
                    },
                    configuration
                );
            }
        };
    }());

    return linkedDeploymentShortcut;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/base/base.soy' */
// This file was automatically generated from base.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.base = function(opt_data, opt_ignored) {
  var output = '<section id="content" role="main">' + ((opt_data.headerImageContent && opt_data.headerImageContent != '' || opt_data.headerMainContent && opt_data.headerMainContent != '' || opt_data.headerActionsContent && opt_data.headerActionsContent != '' || opt_data.headerActionsButtons && opt_data.headerActionsButtons != '') ? aui.page.pageHeader({content: '' + ((opt_data.headerImageContent && opt_data.headerImageContent != '') ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + ((opt_data.headerMainContent && opt_data.headerMainContent != '') ? aui.page.pageHeaderMain({content: opt_data.headerMainContent}) : '') + ((opt_data.headerActionsContent && opt_data.headerActionsContent != '' || opt_data.headerActionsButtons && opt_data.headerActionsButtons != '') ? aui.page.pageHeaderActions({content: '' + ((opt_data.headerActionsContent && opt_data.headerActionsContent != '') ? soy.$$filterNoAutoescape(opt_data.headerActionsContent) : '') + ((opt_data.headerActionsButtons && opt_data.headerActionsButtons != '') ? aui.buttons.buttons({extraClasses: 'aui-dropdown2-trigger-group', content: opt_data.headerActionsButtons}) : '')}) : '')}) : '') + ((opt_data.headerExtraContent && opt_data.headerExtraContent != '') ? '<div class="bamboo-page-header-extra">' + soy.$$filterNoAutoescape(opt_data.headerExtraContent) + '</div>' : '') + ((opt_data.navItems && opt_data.navItems.length) ? bamboo.widget.nav.horizontal({items: opt_data.navItems, historyXhrDisabled: opt_data.historyXhrDisabled}) : '');
  var param41 = '' + ((opt_data.pageNavContent && opt_data.pageNavContent != '') ? aui.page.pagePanelNav({extraClasses: opt_data.pageNavClass, content: opt_data.pageNavContent}) : '') + ((opt_data.pageItemContent && opt_data.pageItemContent != '') ? aui.page.pagePanelItem({extraClasses: opt_data.pageItemClass, content: opt_data.pageItemContent}) : '') + aui.page.pagePanelContent({content: opt_data.content, extraClasses: opt_data.contentClass});
  if (opt_data.pageSidebarContent && opt_data.pageSidebarContent != '' || opt_data.pageHelpPanels && opt_data.pageHelpPanels.length) {
    var param58 = '' + ((opt_data.pageSidebarContent && opt_data.pageSidebarContent != '') ? soy.$$filterNoAutoescape(opt_data.pageSidebarContent) : '');
    if (opt_data.pageHelpPanels && opt_data.pageHelpPanels.length) {
      var pageHelpPanelList65 = opt_data.pageHelpPanels;
      var pageHelpPanelListLen65 = pageHelpPanelList65.length;
      for (var pageHelpPanelIndex65 = 0; pageHelpPanelIndex65 < pageHelpPanelListLen65; pageHelpPanelIndex65++) {
        var pageHelpPanelData65 = pageHelpPanelList65[pageHelpPanelIndex65];
        param58 += bamboo.widget.help.panel(pageHelpPanelData65);
      }
    }
    param41 += aui.page.pagePanelSidebar({extraClasses: opt_data.pageSidebarClass, content: param58});
  }
  output += aui.page.pagePanel({extraClasses: opt_data.pagePanelClass, content: param41});
  output += ((opt_data.pageFooterContent && opt_data.pageFooterContent != '') ? '<footer class="bamboo-page-footer">' + soy.$$filterNoAutoescape(opt_data.pageFooterContent) + '</footer>' : '') + '</section>';
  return output;
};
if (goog.DEBUG) {
  bamboo.layout.base.soyTemplateName = 'bamboo.layout.base';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/focused/focused.soy' */
// This file was automatically generated from focused.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.focused = function(opt_data, opt_ignored) {
  return '' + bamboo.layout.base(soy.$$augmentMap(opt_data, {headerActionsContent: '' + ((opt_data.progressTrackerSteps && opt_data.progressTrackerSteps.length) ? aui.progressTracker.progressTracker({isInverted: true, steps: opt_data.progressTrackerSteps}) : '')}));
};
if (goog.DEBUG) {
  bamboo.layout.focused.soyTemplateName = 'bamboo.layout.focused';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/dashboard/dashboard.soy' */
// This file was automatically generated from dashboard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.dashboard = function(opt_data, opt_ignored) {
  return '' + bamboo.layout.base(soy.$$augmentMap(opt_data, {headerMainContent: '<h1 id="dashboard-instance-name">' + soy.$$escapeHtml("Build dashboard") + '</h1>'}));
};
if (goog.DEBUG) {
  bamboo.layout.dashboard.soyTemplateName = 'bamboo.layout.dashboard';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/plan/plan.soy' */
// This file was automatically generated from plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.plan = function(opt_data, opt_ignored) {
  return '' + bamboo.layout.base(soy.$$augmentMap(opt_data, {headerActionsContent: '' + ((opt_data.planStatusHistory) ? bamboo.widget.planStatusHistory.container(opt_data.planStatusHistory) : '') + ((opt_data.headerActionsContent) ? soy.$$filterNoAutoescape(opt_data.headerActionsContent) : '')}));
};
if (goog.DEBUG) {
  bamboo.layout.plan.soyTemplateName = 'bamboo.layout.plan';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/project/project.soy' */
// This file was automatically generated from project.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.projectActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.buttons({content: '' + aui.buttons.button({text: ' ' + "Project wallboard", tagName: 'a', id: 'projectWallboardButton', iconClass: 'icon icon-wallboard', iconType: 'custom', extraAttributes: {href: "" + '/telemetry.action?filter=project&projectKey=' + opt_data.projectKey}})}) + ((opt_data.hasAdminPermission) ? aui.buttons.buttons({content: '' + aui.buttons.button({text: ' ' + "Project settings", tagName: 'a', id: 'projectSettingsButton', iconClass: 'aui-icon-small aui-iconfont-configure', iconType: 'aui', extraAttributes: {href: "" + '/project/admin/config/editProjectDetails.action?projectKey=' + opt_data.projectKey}})}) : '');
};
if (goog.DEBUG) {
  bamboo.layout.projectActions.soyTemplateName = 'bamboo.layout.projectActions';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/page/admin/overview.soy' */
// This file was automatically generated from overview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.admin.overview.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.admin == 'undefined') { bamboo.page.admin = {}; }
if (typeof bamboo.page.admin.overview == 'undefined') { bamboo.page.admin.overview = {}; }


bamboo.page.admin.overview.overview = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var viewServerCapabilities__soy3 = "" + '/admin/agent/configureSharedLocalCapabilities.action';
  output += bamboo.page.admin.overview.welcomeItems({content: '' + bamboo.page.admin.overview.welcomeItem({content: AJS.format("\x3ca href\x3d\x22{0}\x22\x3eChange information\x3c/a\x3e you supplied when Bamboo was installed.","" + '/admin/globalConfiguration.action')}) + ((opt_data.hasGlobalAdminPermission) ? ((! opt_data.hasBuilders && ! opt_data.hasJdks) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has failed to detect any \x3ca href\x3d\x22{0}\x22\x3eexecutables or JDK\x27\x27s\x3c/a\x3e available on your Bamboo server.  You will need to manually \x3ca href\x3d\x22{0}\x22\x3econfigure\x3c/a\x3e at least one executable (such as Ant, Maven, Maven 2 or scripts) before you can run any plans.",viewServerCapabilities__soy3)}) : (! opt_data.hasBuilders) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has detected a \x3ca href\x3d\x22{0}\x22\x3eJDK\x3c/a\x3e on your Bamboo server, but has failed to detect any \x3ca href\x3d\x22{0}\x22\x3eexecutables\x3c/a\x3e.  You need to manually \x3ca href\x3d\x22{0}\x22\x3econfigure\x3c/a\x3e at least one executable (such as Ant, Maven, Maven 2 or scripts) before you can run any plans.",viewServerCapabilities__soy3)}) : (! opt_data.hasJdks) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has detected \x3ca href\x3d\x22{0}\x22\x3e{1,choice,1#one executable|1\x3c{1} executables}\x3c/a\x3e on your server, but has failed to detect a \x3ca href\x3d\x22{0}\x22\x3eJDK\x3c/a\x3e.  You may need to manually \x3ca href\x3d\x22{0}\x22\x3econfigure\x3c/a\x3e these before you can run any plans.",viewServerCapabilities__soy3,opt_data.buildersSize ? opt_data.buildersSize : 0)}) : bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has detected a \x3ca href\x3d\x22{0}\x22\x3eJDK\x3c/a\x3e and  \x3ca href\x3d\x22{0}\x22\x3e{1,choice,1#one executable|1\x3c{1} executables}\x3c/a\x3e on your server.  You may wish to \x3ca href\x3d\x22{0}\x22\x3eedit\x3c/a\x3e these or configure others.",viewServerCapabilities__soy3,opt_data.buildersSize ? opt_data.buildersSize : 0)})) + bamboo.page.admin.overview.welcomeItem({content: AJS.format("Let Bamboo know about your \x3ca href\x3d\x22{0}\x22\x3eemail server\x3c/a\x3e and \x3ca href\x3d\x22{1}\x22\x3einstant messaging server\x3c/a\x3e for build notifications.","" + '/admin/viewMailServer.action',"" + '/admin/instantmessagingserver/viewInstantMessagingServer.action')}) : '') + ((! opt_data.isAllowedRemoteAgents) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Configure your \x3ca href\x3d\x22{0}\x22\x3elocal agents\x3c/a\x3e and their capabilities.","" + '/admin/agent/configureAgents!doDefault.action')}) : (opt_data.canManageElasticBamboo) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Configure your \x3ca href\x3d\x22{0}\x22\x3eagents and their capabilities\x3c/a\x3e or set up \x3ca href\x3d\x22{1}\x22\x3eElastic Bamboo\x3c/a\x3e to get your builds running in the Amazon Elastic Compute Cloud (EC2).","" + '/admin/agent/configureAgents!doDefault.action',"" + '/admin/elastic/viewElasticConfig.action')}) : bamboo.page.admin.overview.welcomeItem({content: AJS.format("Configure your \x3ca href\x3d\x22{0}\x22\x3eagents and their capabilities\x3c/a\x3e.","" + '/admin/agent/configureAgents!doDefault.action')})) + bamboo.page.admin.overview.welcomeItem({content: AJS.format("Add more \x3ca href\x3d\x22{0}\x22\x3eusers\x3c/a\x3e, \x3ca href\x3d\x22{1}\x22\x3egroups\x3c/a\x3e and \x3ca href\x3d\x22{2}\x22\x3emanage permissions\x3c/a\x3e.","" + '/admin/user/viewUsers.action',"" + '/admin/group/viewGroups.action',"" + '/admin/configureGlobalPermissions.action')}) + bamboo.page.admin.overview.welcomeItem({content: AJS.format("\x3ca href\x3d\x22{0}\x22\x3eSet build expiry\x3c/a\x3e, \x3ca href\x3d\x22{1}\x22\x3edelete plans\x3c/a\x3e or \x3ca href\x3d\x22{2}\x22\x3eedit plan permissions\x3c/a\x3e.","" + '/admin/buildExpiry.action',"" + '/admin/deleteBuilds.action',"" + '/admin/chooseBuildsToBulkEditPermissions.action')})});
  return output;
};
if (goog.DEBUG) {
  bamboo.page.admin.overview.overview.soyTemplateName = 'bamboo.page.admin.overview.overview';
}


bamboo.page.admin.overview.welcomeItems = function(opt_data, opt_ignored) {
  return '' + ((opt_data.content != '') ? '<ul>' + soy.$$filterNoAutoescape(opt_data.content) + '</ul>' : '');
};
if (goog.DEBUG) {
  bamboo.page.admin.overview.welcomeItems.soyTemplateName = 'bamboo.page.admin.overview.welcomeItems';
}


bamboo.page.admin.overview.welcomeItem = function(opt_data, opt_ignored) {
  return '<li>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  bamboo.page.admin.overview.welcomeItem.soyTemplateName = 'bamboo.page.admin.overview.welcomeItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/jira-issue-list/jira-issue-list.soy' */
// This file was automatically generated from jira-issue-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.jiraIssueList.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.jiraIssueList == 'undefined') { bamboo.feature.jiraIssueList = {}; }


bamboo.feature.jiraIssueList.jiraIssueList = function(opt_data, opt_ignored) {
  var output = '<table class="aui jira-issues' + ((opt_data.loading) ? ' loading' : '') + '"><thead><tr><th colspan="2" class="issue">Issue</th><th class="description">Description</th>' + ((! opt_data.hideStatus) ? '<th class="status">Status</th>' : '') + '</tr></thead>' + ((opt_data.issuesCount > opt_data.maxIssues) ? '<tfoot><tr><td colspan="' + soy.$$escapeHtml(opt_data.hideStatus ? 3 : 4) + '"><a href="' + soy.$$escapeHtml(opt_data.jiraTabUrl) + '">' + soy.$$escapeHtml(opt_data.issuesCount - opt_data.maxIssues + ' more issue' + (opt_data.issuesCount - opt_data.maxIssues > 1 ? 's' : '')) + '&hellip;</a></td></tr></tfoot>' : '') + '<tbody>';
  var issueList22 = opt_data.issues;
  var issueListLen22 = issueList22.length;
  for (var issueIndex22 = 0; issueIndex22 < issueListLen22; issueIndex22++) {
    var issueData22 = issueList22[issueIndex22];
    output += (issueData22.url && issueData22.url.href && issueData22.key && issueData22.summary) ? bamboo.feature.jiraIssueList.jiraIssueListItem({key: issueData22.key, url: issueData22.url, summary: issueData22.summary, issueType: issueData22.issueType ? issueData22.issueType : opt_data.defaultIssueType, iconUrl: issueData22.iconUrl ? issueData22.iconUrl : opt_data.defaultIssueIconUrl, status: issueData22.status, statusClass: issueData22.statusClass, hideStatus: opt_data.hideStatus}) : bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection({key: issueData22.issueKey ? issueData22.issueKey : issueData22.key, hideStatus: opt_data.hideStatus});
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueList.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueList';
}


bamboo.feature.jiraIssueList.jiraIssueListItem = function(opt_data, opt_ignored) {
  return '<tr data-issue-key="' + opt_data.key + '"><td class="type"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '" title="' + soy.$$escapeHtml("View this issue") + '"><img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issueType) + '" /></a></td><td class="key"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '">' + opt_data.key + '</a></td><td class="description">' + soy.$$escapeHtml(opt_data.summary) + '</td>' + ((! opt_data.hideStatus) ? '<td class="status"><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItem.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItem';
}


bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection = function(opt_data, opt_ignored) {
  return '<tr><td class="type">' + widget.icons.icon({type: 'jiraissue-unknown', text: 'Unknown Issue Type', showTitle: true}) + '</td><td class="key">' + soy.$$escapeHtml(opt_data.key) + '</td><td' + ((! opt_data.hideStatus) ? ' colspan="2"' : '') + ' class="details-error"><span>' + soy.$$escapeHtml("Could not obtain issue details from Jira") + '</span></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection';
}


bamboo.feature.jiraIssueList.singleIssue = function(opt_data, opt_ignored) {
  return '<span class="jira-issue"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '><a href="' + ((opt_data.url.href) ? soy.$$escapeHtml(opt_data.url.href) : soy.$$escapeHtml(opt_data.url)) + '" title="' + soy.$$escapeHtml("View this issue") + ' (' + soy.$$escapeHtml(opt_data.issueType) + ')" style="background-image: url(' + soy.$$escapeHtml(opt_data.iconUrl) + ');">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="description">' + soy.$$escapeHtml(opt_data.summary) + '</span><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssue.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssue';
}


bamboo.feature.jiraIssueList.singleIssueLoading = function(opt_data, opt_ignored) {
  return '<span class="single-issue-loading"><a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueLoading.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueLoading';
}


bamboo.feature.jiraIssueList.singleIssueOAuth = function(opt_data, opt_ignored) {
  return '' + bamboo.feature.jiraIssueList.singleIssueRetrievalError({key: opt_data.key, keyLink: opt_data.keyLink, errorDetails: '' + bamboo.feature.jiraIssueList.linkedIssueOAuth({authenticationRedirectUrl: opt_data.authenticationRedirectUrl, authenticationInstanceName: opt_data.authenticationInstanceName, reason: 'to see issue details'})});
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueOAuth';
}


bamboo.feature.jiraIssueList.singleIssueRetrievalError = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="single-issue-retrieval-error"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '>' + ((opt_data.key) ? '<a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a>' : '') + '<span class="error-message' + ((! opt_data.errorDetails) ? ' unspecified' : '') + '">' + ((opt_data.errorDetails) ? soy.$$filterNoAutoescape(opt_data.errorDetails) : soy.$$escapeHtml("Could not obtain issue details from Jira")) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueRetrievalError.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueRetrievalError';
}


bamboo.feature.jiraIssueList.linkedIssueOAuth = function(opt_data, opt_ignored) {
  return '<a class="oauth-init" href="' + soy.$$escapeHtml(opt_data.authenticationRedirectUrl) + '">Authenticate</a> ' + ((opt_data.authenticationInstanceName) ? ' with ' + soy.$$escapeHtml(opt_data.authenticationInstanceName) : '') + ' ' + soy.$$escapeHtml(opt_data.reason);
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.linkedIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.linkedIssueOAuth';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/comments/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.comments.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.comments == 'undefined') { bamboo.feature.comments = {}; }


bamboo.feature.comments.commentList = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.comments.length > 0) {
    output += ((opt_data.showTopLevelHeading) ? '<h2>' + soy.$$escapeHtml("Comments") + '</h2>' : '') + '<ol>';
    var commentList11 = opt_data.comments;
    var commentListLen11 = commentList11.length;
    for (var commentIndex11 = 0; commentIndex11 < commentListLen11; commentIndex11++) {
      var commentData11 = commentList11[commentIndex11];
      output += bamboo.feature.comments.commentListItem({id: commentData11.id, comment: commentData11.comment, lastModificationDate: commentData11.lastModificationDate, prettyLastModificationDate: commentData11.prettyLastModificationDate, avatar: commentData11.avatar, user: commentData11.user, userDisplayName: commentData11.userDisplayName, showOperations: opt_data.showOperations, headingLevel: opt_data.headingLevel ? opt_data.headingLevel : 'h3', result: commentData11.result});
    }
    output += '</ol>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.comments.commentList.soyTemplateName = 'bamboo.feature.comments.commentList';
}


bamboo.feature.comments.commentListItem = function(opt_data, opt_ignored) {
  return '<li><img src="' + soy.$$escapeHtml(opt_data.avatar ? opt_data.avatar : "" + '/images/icons/useravatar.png') + '" class="avatar"><' + soy.$$escapeHtml(opt_data.headingLevel ? opt_data.headingLevel : 'h3') + '>' + ((opt_data.user) ? '<a href="' + soy.$$escapeHtml("" + '/browse/user/' + opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.userDisplayName) + '</a>' : soy.$$escapeHtml("Anonymous user")) + '</' + soy.$$escapeHtml(opt_data.headingLevel ? opt_data.headingLevel : 'h3') + '><p>' + soy.$$filterNoAutoescape(opt_data.comment) + '</p>' + ((opt_data.showOperations) ? '<div class="ops">' + ((opt_data.result) ? '<a class="delete mutative" href="' + soy.$$escapeHtml("" + '/build/ajax/deleteComment.action?commentId=' + opt_data.id + '&buildKey=' + opt_data.result.buildKey + '&buildNumber=' + opt_data.result.buildNumber) + '" title="' + soy.$$escapeHtml("Permanently delete this comment?") + '">' + soy.$$escapeHtml("Delete") + '</a>' : '<a class="delete mutative" href="' + soy.$$escapeHtml("" + '/deploy/deleteComment.action?commentId=' + opt_data.id) + '" title="' + soy.$$escapeHtml("Permanently delete this comment?") + '">' + soy.$$escapeHtml("Delete") + '</a>') + '</div>' : '') + '<time datetime="' + soy.$$escapeHtml(opt_data.lastModificationDate) + '" title="' + soy.$$escapeHtml(opt_data.lastModificationDate) + '">' + soy.$$escapeHtml(AJS.format("about {0} ago",opt_data.prettyLastModificationDate)) + '</time></li>';
};
if (goog.DEBUG) {
  bamboo.feature.comments.commentListItem.soyTemplateName = 'bamboo.feature.comments.commentListItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/variables/variables.soy' */
// This file was automatically generated from variables.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.variables.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.variables == 'undefined') { bamboo.feature.variables = {}; }


bamboo.feature.variables.variablesTable = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param28 = '' + ((! opt_data.hideAddHeader) ? '<tr class="add-variable"><td>' + bamboo.feature.variables.selectOrInput({id: 'variableKey', options: opt_data.availableVariables}) + '</td><td>' + bamboo.feature.variables.selectOrInput({id: 'variableValue', value: opt_data.firstAvailableVariable}) + '</td><td class="operations">' + aui.form.submit({text: "Add", id: ''}) + '</td></tr>' : '');
  if (opt_data.variables) {
    var variableList46 = opt_data.variables;
    var variableListLen46 = variableList46.length;
    for (var variableIndex46 = 0; variableIndex46 < variableListLen46; variableIndex46++) {
      var variableData46 = variableList46[variableIndex46];
      param28 += bamboo.feature.variables.variablesTableRow(soy.$$augmentMap(variableData46, {inlineEdit: opt_data.inlineEdit, availableVariables: opt_data.availableVariables, deleteVariableUrl: opt_data.deleteVariableUrl}));
    }
  }
  var output = '' + aui.table({extraClasses: 'variables-list', columnsContent: '<colgroup><col width="30%" /><col width="*" /><col width="60" /></colgroup>', theadContent: '<tr><th>' + soy.$$escapeHtml("Variable name") + '</th><th>' + soy.$$escapeHtml("Value") + '</th><th class="operations"><span class="assistive">' + soy.$$escapeHtml("Operations") + '</span></th></tr>', tfootContent: '' + ((opt_data.showOverrideFooter) ? '<tr>' + ((opt_data.userCanOverrideVariables) ? '<td colspan="3"><a class="aui-button aui-button-link aui-style variables-override">' + soy.$$escapeHtml("Override a variable") + '</a></td>' : '<td colspan="3"><span class="variables-override">' + soy.$$escapeHtml("Build variables override is forbidden") + '</span></td>') + '</tr>' : ''), content: param28});
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTable.soyTemplateName = 'bamboo.feature.variables.variablesTable';
}


bamboo.feature.variables.variablesTableRow = function(opt_data, opt_ignored) {
  return '<tr data-variable-id="' + soy.$$escapeHtml(opt_data.id) + '"><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables}) : bamboo.feature.variables.selectOrInput({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables})) + '</td><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'value_' + opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput({id: 'value_' + opt_data.id, value: opt_data.key})) + '</td><td class="operations"><a id="deleteVariable_' + soy.$$escapeHtml(opt_data.id) + '" class="delete-variable"' + ((opt_data.deleteVariableUrl) ? ' href="' + soy.$$escapeHtml(opt_data.deleteVariableUrl) + '"' : '') + ' title="' + soy.$$escapeHtml("Delete") + '" tabindex="-1">' + aui.icons.icon({icon: 'remove', useIconFont: true, accessibilityText: "Delete", extraAttributes: {title: "Delete"}}) + '</a></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTableRow.soyTemplateName = 'bamboo.feature.variables.variablesTableRow';
}


bamboo.feature.variables.inPlaceEditField = function(opt_data, opt_ignored) {
  return '<span class="inline-edit-view"' + ((! opt_data.readonly) ? ' tabindex="0"' : '') + ' id="key_' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.value) + '</span>' + ((opt_data.readonly) ? aui.form.input({type: 'hidden', name: opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput(soy.$$augmentMap(opt_data, {extraClasses: 'inline-edit-field'})));
};
if (goog.DEBUG) {
  bamboo.feature.variables.inPlaceEditField.soyTemplateName = 'bamboo.feature.variables.inPlaceEditField';
}


bamboo.feature.variables.selectOrInput = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options) ? bamboo.feature.variables.select({name: opt_data.id, options: opt_data.options, extraClasses: opt_data.extraClasses}) : aui.form.input({type: 'text', name: opt_data.id, value: opt_data.value, extraClasses: opt_data.extraClasses, extraAttributes: {autocomplete: 'off'}}));
};
if (goog.DEBUG) {
  bamboo.feature.variables.selectOrInput.soyTemplateName = 'bamboo.feature.variables.selectOrInput';
}


bamboo.feature.variables.passwordConfirmaton = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: "variables.password.dialog.title", content: '<p>' + soy.$$escapeHtml("variables.password.dialog.description") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.variables.passwordConfirmaton.soyTemplateName = 'bamboo.feature.variables.passwordConfirmaton';
}


bamboo.feature.variables.deleteConfirmaton = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("You are about to delete the selected variable. Are you sure you want to continue?");
};
if (goog.DEBUG) {
  bamboo.feature.variables.deleteConfirmaton.soyTemplateName = 'bamboo.feature.variables.deleteConfirmaton';
}


bamboo.feature.variables.select = function(opt_data, opt_ignored) {
  var output = '<select' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'multi-select' : 'select') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isMultiple) ? ' multiple' : '') + aui.renderExtraAttributes(opt_data) + '>';
  var optionList167 = opt_data.options;
  var optionListLen167 = optionList167.length;
  for (var optionIndex167 = 0; optionIndex167 < optionListLen167; optionIndex167++) {
    var optionData167 = optionList167[optionIndex167];
    output += bamboo.feature.variables.optionOrOptgroup(optionData167);
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.select.soyTemplateName = 'bamboo.feature.variables.select';
}


bamboo.feature.variables.optionOrOptgroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.options) {
    output += '<optgroup label="' + soy.$$escapeHtml(opt_data.text) + '"' + aui.renderExtraAttributes(opt_data) + '>';
    var optionList179 = opt_data.options;
    var optionListLen179 = optionList179.length;
    for (var optionIndex179 = 0; optionIndex179 < optionListLen179; optionIndex179++) {
      var optionData179 = optionList179[optionIndex179];
      output += bamboo.feature.variables.optionOrOptgroup(optionData179);
    }
    output += '</optgroup>';
  } else {
    output += '<option value="' + soy.$$escapeHtml(opt_data.value) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.selected) ? ' selected' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.optionOrOptgroup.soyTemplateName = 'bamboo.feature.variables.optionOrOptgroup';
}


bamboo.feature.variables.overrideText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.variable) ? '<div class="variable-override-text">' + ((opt_data.variable.variableType == 'PLAN') ? soy.$$escapeHtml("Overrides plan value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value) : soy.$$escapeHtml("Overrides global value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value)) + '</div>' : '');
};
if (goog.DEBUG) {
  bamboo.feature.variables.overrideText.soyTemplateName = 'bamboo.feature.variables.overrideText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/dashboard/welcome-mat/welcome-mat.soy' */
// This file was automatically generated from welcome-mat.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.dashboard.welcomeMat.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.dashboard == 'undefined') { bamboo.feature.dashboard = {}; }
if (typeof bamboo.feature.dashboard.welcomeMat == 'undefined') { bamboo.feature.dashboard.welcomeMat = {}; }


bamboo.feature.dashboard.welcomeMat.welcomeMat = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bamboo.feature.dashboard.welcomeMat.welcomeMessage({showCreate: opt_data.canCreatePlan, showImport: opt_data.hasAdminPermission, showLogin: ! opt_data.hasUser, showSignup: ! opt_data.hasUser, showContactAdmin: opt_data.hasUser && ! opt_data.canCreatePlan, content: '' + ((opt_data.hasUser && ! opt_data.canCreatePlan) ? aui.message.info({titleContent: "Not authorised to configure plans", content: '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("There are currently no builds configured in Bamboo. You do not have the correct privileges to set up a build. Please \x3ca href\x3d\x22{0}\x22\x3econtact an administrator\x3c/a\x3e for further assistance.",typeof ("" + '/viewAdministrators.action') === 'number' ? "" + '/viewAdministrators.action' : soy.$$escapeHtml("" + '/viewAdministrators.action')))) + '</p>'}) : '')});
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.welcomeMat.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.welcomeMat';
}


bamboo.feature.dashboard.welcomeMat.welcomeMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="welcome-message build"><div class="welcome-content"><h2 class="welcome-title">' + soy.$$escapeHtml("Let\x27s get building!") + '</h2><div class="welcome-blurb"><p>' + soy.$$escapeHtml("Now that the installation and the setup of Bamboo is complete, it\x27s time to create your first build plan.") + '</p><p>' + soy.$$escapeHtml("Build plans hold all the instructions to build, test and assemble your software. Whenever you make a change to your code, Bamboo triggers your build plan and notifies you of the result.") + '</p>' + ((opt_data.content && opt_data.content != '') ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>' + ((opt_data.showContactAdmin || opt_data.showCreate || opt_data.showImport || opt_data.showLogin || opt_data.showSignup) ? aui.toolbar2.toolbar2({extraClasses: 'welcome-actions', content: '' + aui.toolbar2.item({item: 'primary', content: '' + ((opt_data.showContactAdmin) ? aui.buttons.button({text: "Contact administrator", type: 'primary', tagName: 'a', extraClasses: 'aui-style', extraAttributes: {href: "" + '/viewAdministrators.action'}}) : '') + ((opt_data.showCreate || opt_data.showImport) ? (opt_data.showCreate) ? aui.buttons.button({text: "Create your first build plan", type: opt_data.showContactAdmin ? '' : 'primary', tagName: 'a', id: 'create-a-plan', extraClasses: 'aui-style', extraAttributes: {href: "" + '/build/admin/create/newPlan.action'}}) : '' : (opt_data.showLogin || opt_data.showSignup) ? ((opt_data.showLogin) ? aui.buttons.button({text: "Log in", type: 'primary', tagName: 'a', extraClasses: 'aui-style', extraAttributes: {href: "" + '/userlogin!doDefault.action'}}) : '') + ((opt_data.showSignup) ? aui.buttons.button({text: "Sign up", tagName: 'a', extraClasses: 'aui-style', extraAttributes: {href: "" + '/signupUser!doDefault.action'}}) : '') : '')})}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.welcomeMessage.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.welcomeMessage';
}


bamboo.feature.dashboard.welcomeMat.welcomeMessageDeploy = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="welcome-message deployment"><div class="welcome-content"><h2 class="welcome-title">' + soy.$$escapeHtml("Ready, steady, deploy!") + ' </h2><div class="welcome-blurb">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3cp\x3eWith Bamboo deployments you can track your code from a Jira issue, through testing in a build, all the way to deployment. Deployments allow you to: \x3cul\x3e\x3cli\x3eSnapshot your artifacts from any successful build into a release\x3c/li\x3e \x3cli\x3eDeploy, rollback and promote releases to environments\x3c/li\x3e \x3cli\x3eTrack what, when and who deployed releases to your environments\x3c/li\x3e \x3c/ul\x3e\x3c/p\x3e")) + ((opt_data.hasBuilds) ? '<p>' + soy.$$escapeHtml("To get started, create a deployment project and link it to your build plan now!") + ((opt_data.hasGlobalCreatePermission) ? '<p>' + aui.buttons.button({text: "Create my first deployment project", type: 'primary', tagName: 'a', extraAttributes: {href: "" + '/deploy/config/newDeploymentProjectDetails.action'}}) + '</p>' : '') + '</p>' : '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Before you can get started with deployments you need to \x3ca href\x3d\x22{0}\x22\x3ecreate a build plan\x3c/a\x3e that has some artifacts.",typeof ("" + '/build/admin/create/newPlan.action') === 'number' ? "" + '/build/admin/create/newPlan.action' : soy.$$escapeHtml("" + '/build/admin/create/newPlan.action')))) + '</p>') + '</div></div></div><div class="infographic"><h2>' + soy.$$escapeHtml("How do deployments work?") + '</h2><img src="' + soy.$$escapeHtml("") + '/images/infographic/bamboo-deploy.png" /><div class="artifactText"><h3>' + soy.$$escapeHtml("Artifacts") + '</h3>' + soy.$$escapeHtml("Create deployable artifacts with build plans, just like always. Any artifacts you wish to deploy with Bamboo need to be \x22shared\x22.") + '</div><div class="versionText"><h3>' + soy.$$escapeHtml("Release") + '</h3>' + soy.$$escapeHtml("Any artifacts that have been tested to your satisfaction using a plan can be used to create a release. Bamboo preserves metadata related to your release, such as the Jira issues and commits included. This allows for tracking changes across environments, easy traceability when troubleshooting, and creating powerful reports.") + '</div><div class="environmentText"><h3>' + soy.$$escapeHtml("Environments") + '</h3>' + soy.$$escapeHtml("Define environments in Bamboo to reflect the development, testing and production environments in your IT infrastructure. At any point in time, you\x27ll be able to see which version of a release is running in each environment, when and who deployed it and what release it replaced.") + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.welcomeMessageDeploy.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.welcomeMessageDeploy';
}


bamboo.feature.dashboard.welcomeMat.importOptionsItem = function(opt_data, opt_ignored) {
  return '<li><a' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.importOptionsItem.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.importOptionsItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.icons.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.icons == 'undefined') { widget.icons = {}; }


widget.icons.icon = function(opt_data, opt_ignored) {
  return '<span class="icon icon-' + soy.$$escapeHtml(opt_data.type) + ' ' + ((opt_data.reversed) ? 'icon-reversed' : '') + '" ' + ((opt_data.text && opt_data.showTitle) ? 'title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.icon.soyTemplateName = 'widget.icons.icon';
}


widget.icons.fontIcon = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.fontIcon.soyTemplateName = 'widget.icons.fontIcon';
}


widget.icons.auiFontLink = function(opt_data, opt_ignored) {
  return '<a ' + ((opt_data.text) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '" ' : '') + 'href="' + soy.$$escapeHtml("" + opt_data.relativeUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.iconType) + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</span></a>';
};
if (goog.DEBUG) {
  widget.icons.auiFontLink.soyTemplateName = 'widget.icons.auiFontLink';
}


widget.icons.statusIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.status == 'approve' || opt_data.status == 'project-success' || opt_data.status == 'Successful' || opt_data.status == 'SUCCESS' || opt_data.status == 'successful' || opt_data.status == 'successful-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'successful-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'error' || opt_data.status == 'project-fail' || opt_data.status == 'Failed' || opt_data.status == 'FAILED' || opt_data.status == 'failed' || opt_data.status == 'failed-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'failed-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-cancelled' || opt_data.status == 'NotBuilt' || opt_data.status == 'notbuilt' || opt_data.status == 'NOT_BUILT' || opt_data.status == 'Unknown' || opt_data.status == 'UNKNOWN' || opt_data.status == 'unknown' || opt_data.status == 'incomplete-build') ? widget.icons.fontIcon({type: 'incomplete-build', text: opt_data.text, showTitle: opt_data.text ? true : false}) : (opt_data.status == 'task-in-progress' || opt_data.status == 'Pending' || opt_data.status == 'PENDING' || opt_data.status == 'pending' || opt_data.status == 'Queued' || opt_data.status == 'QUEUED' || opt_data.status == 'queued' || opt_data.status == 'queued-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'queued-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-disabled' || opt_data.status == 'disabled' || opt_data.status == 'project-none' || opt_data.status == 'NeverExecuted' || opt_data.status == 'skipped' || opt_data.status == 'Suspended' || opt_data.status == 'plan-disabled') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'plan-disabled', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'running-build' || opt_data.status == 'project-current' || opt_data.status == 'Building' || opt_data.status == 'BUILDING' || opt_data.status == 'building' || opt_data.status == 'InProgress' || opt_data.status == 'INPROGRESS' || opt_data.status == 'IN_PROGRESS' || opt_data.status == 'inprogress') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'running-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : widget.icons.icon({type: opt_data.status + (opt_data.reversed ? ' icon-reversed' : ''), text: opt_data.text, showTitle: opt_data.text ? true : false}));
};
if (goog.DEBUG) {
  widget.icons.statusIcon.soyTemplateName = 'widget.icons.statusIcon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/lozenges.soy' */
// This file was automatically generated from lozenges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.lozenges.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.lozenges == 'undefined') { widget.lozenges = {}; }


widget.lozenges.lozenge = function(opt_data, opt_ignored) {
  return '<span class="lozenge lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.lozenge.soyTemplateName = 'widget.lozenges.lozenge';
}


widget.lozenges.auilozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' aui-lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.auilozenge.soyTemplateName = 'widget.lozenges.auilozenge';
}


widget.lozenges.branch = function(opt_data, opt_ignored) {
  return '<span class="' + ((opt_data.cssClass) ? soy.$$escapeHtml(opt_data.cssClass) : 'lozenge-newline') + '">' + ((opt_data.label) ? '<span class="inline-label">' + soy.$$escapeHtml(opt_data.label) + '</span> ' : '') + '<span class="lozenge branch-lozenge monospace" title="' + soy.$$escapeHtml(opt_data.planBranchName) + '"><span class="branch">' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + '<span class="name">' + soy.$$escapeHtml(opt_data.planBranchName) + '</span></span></span></span>';
};
if (goog.DEBUG) {
  widget.lozenges.branch.soyTemplateName = 'widget.lozenges.branch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/status/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.status.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.status == 'undefined') { widget.status = {}; }


widget.status.deploymentResultStatusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var colour__soy3 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        colour__soy3 += 'default';
        break;
      case 'SUCCESS':
        colour__soy3 += 'success';
        break;
      case 'FAILED':
        colour__soy3 += 'error';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        colour__soy3 += 'current';
        break;
      case 'QUEUED':
        colour__soy3 += 'current';
        break;
      case 'IN_PROGRESS':
        colour__soy3 += 'current';
        break;
      case 'NOT_BUILT':
        colour__soy3 += 'default';
        break;
    }
  }
  var text__soy23 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        text__soy23 += 'Unknown';
        break;
      case 'SUCCESS':
        text__soy23 += 'Success';
        break;
      case 'FAILED':
        text__soy23 += 'Failed';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        text__soy23 += 'Queued';
        break;
      case 'QUEUED':
        text__soy23 += 'Queued';
        break;
      case 'IN_PROGRESS':
        text__soy23 += 'In Progress';
        break;
      case 'NOT_BUILT':
        text__soy23 += 'Not Built';
        break;
    }
  }
  output += widget.lozenges.auilozenge({colour: colour__soy3, text: text__soy23, subtle: opt_data.subtle});
  return output;
};
if (goog.DEBUG) {
  widget.status.deploymentResultStatusLozenge.soyTemplateName = 'widget.status.deploymentResultStatusLozenge';
}


widget.status.buildResultStatusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var class__soy48 = '' + widget.status.buildResultStatusClass(opt_data);
  output += widget.icons.statusIcon({status: class__soy48});
  return output;
};
if (goog.DEBUG) {
  widget.status.buildResultStatusIcon.soyTemplateName = 'widget.status.buildResultStatusIcon';
}


widget.status.buildResultStatusClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.resultSummary.continuable && opt_data.resultSummary.successful) ? 'SuccessfulPartial' : (opt_data.resultSummary.notRunYet) ? 'NotRunYet' : (opt_data.resultSummary.finished) ? soy.$$escapeHtml(opt_data.resultSummary.buildState) : soy.$$escapeHtml(opt_data.resultSummary.lifeCycleState));
};
if (goog.DEBUG) {
  widget.status.buildResultStatusClass.soyTemplateName = 'widget.status.buildResultStatusClass';
}


widget.status.statusRibbon = function(opt_data, opt_ignored) {
  var output = '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon' + aui.renderExtraClasses(opt_data) + '" data-statuses="' + soy.$$escapeHtml(opt_data.statuses.length) + '"' + aui.renderExtraAttributes(opt_data) + '><div class="status-ribbon-inner">';
  var statusList77 = opt_data.statuses;
  var statusListLen77 = statusList77.length;
  for (var statusIndex77 = 0; statusIndex77 < statusListLen77; statusIndex77++) {
    var statusData77 = statusList77[statusIndex77];
    output += widget.status.statusRibbonItem(statusData77);
  }
  output += '</div>' + ((opt_data.progressbarContent) ? '<div class="status-ribbon-progress-bar">' + soy.$$filterNoAutoescape(opt_data.progressbarContent) + '</div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  widget.status.statusRibbon.soyTemplateName = 'widget.status.statusRibbon';
}


widget.status.statusRibbonItem = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon-status ' + soy.$$escapeHtml(opt_data.state) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + ' class="status-ribbon-status-heading">' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.state, reversed: true}) + ' ' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + '></div>';
};
if (goog.DEBUG) {
  widget.status.statusRibbonItem.soyTemplateName = 'widget.status.statusRibbonItem';
}


widget.status.deploymentVersionStatus = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.deploymentVersionState && opt_data.deploymentVersionState != 'UNKNOWN') ? widget.lozenges.auilozenge({colour: '' + ((opt_data.deploymentVersionState == 'BROKEN' || opt_data.deploymentVersionState == 'INCOMPLETE') ? 'error' : 'success'), text: opt_data.deploymentVersionState, subtle: opt_data.subtle, extraClasses: 'version-lozenge'}) : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatus.soyTemplateName = 'widget.status.deploymentVersionStatus';
}


widget.status.deploymentVersionStatusInfo = function(opt_data, opt_ignored) {
  return '' + ((opt_data.deploymentVersionState == 'APPROVED' || opt_data.deploymentVersionState == 'BROKEN') ? '<div class="detailed-version-info-container reviewed-user-avatar">' + aui.avatar.avatar({size: 'small', avatarImageUrl: opt_data.avatar ? opt_data.avatar : "" + '/images/icons/useravatar-grey.png', accessibilityText: opt_data.userName ? opt_data.userName : "Anonymous user", title: opt_data.displayName ? opt_data.displayName : "Anonymous user", badgeContent: '' + ((opt_data.deploymentVersionState == 'BROKEN') ? '<span class="badge reviewed broken"></span>' : (opt_data.deploymentVersionState == 'APPROVED') ? '<span class="badge reviewed approved"></span>' : '')}) + '<script>AJS.$(".aui-avatar-inner > img").tooltip({gravity: \'n\'});<\/script></div>' : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatusInfo.soyTemplateName = 'widget.status.deploymentVersionStatusInfo';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/agent.soy' */
// This file was automatically generated from agent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.agent.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.agent == 'undefined') { widget.agent = {}; }


widget.agent.renderAgentNameLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.type == 'ELASTIC') ? (true) ? '<a href="' + soy.$$escapeHtml("" + '/admin/elastic/manageElasticInstances.action') + '">' + widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) + '</a>' : widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) : '') + ((opt_data.showAdminLink) ? '<a href="' + soy.$$escapeHtml("" + '/admin/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>' : '<a href="' + soy.$$escapeHtml("" + '/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>');
};
if (goog.DEBUG) {
  widget.agent.renderAgentNameLink.soyTemplateName = 'widget.agent.renderAgentNameLink';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/plan.soy' */
// This file was automatically generated from plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.plan.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.plan == 'undefined') { widget.plan = {}; }


widget.plan.renderPlanNameLink = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) + ' &rsaquo; ' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + ' ' : '') + soy.$$escapeHtml(opt_data.plan.buildName) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLink.soyTemplateName = 'widget.plan.renderPlanNameLink';
}


widget.plan.renderPlanNameLinkWithoutBranch = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) : soy.$$escapeHtml(opt_data.plan.buildName)) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLinkWithoutBranch.soyTemplateName = 'widget.plan.renderPlanNameLinkWithoutBranch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/buildresult.soy' */
// This file was automatically generated from buildresult.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.buildresult.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.buildresult == 'undefined') { widget.buildresult = {}; }


widget.buildresult.resultStatusAndLink = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy5 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <a href="' + soy.$$escapeHtml("" + '/browse/' + opt_data.resultSummary.planResultKey.key) + '" class="' + soy.$$escapeHtml(resultClass__soy5) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</a>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatusAndLink.soyTemplateName = 'widget.buildresult.resultStatusAndLink';
}


widget.buildresult.resultStatus = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy18 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <span class="' + soy.$$escapeHtml(resultClass__soy18) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</span>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatus.soyTemplateName = 'widget.buildresult.resultStatus';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/autocomplete-controls/bamboo/plandependencies/plan-dependency.soy' */
// This file was automatically generated from plan-dependency.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.planDependency.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }
if (typeof bamboo.widget.autocomplete.planDependency == 'undefined') { bamboo.widget.autocomplete.planDependency = {}; }


bamboo.widget.autocomplete.planDependency.list = function(opt_data, opt_ignored) {
  var output = '<ul class="' + soy.$$escapeHtml(opt_data.dependencies.length == 0 ? 'empty' : '') + aui.renderExtraClasses(opt_data) + '">';
  var dependencyList7 = opt_data.dependencies;
  var dependencyListLen7 = dependencyList7.length;
  for (var dependencyIndex7 = 0; dependencyIndex7 < dependencyListLen7; dependencyIndex7++) {
    var dependencyData7 = dependencyList7[dependencyIndex7];
    var plan__soy8 = opt_data.isParent ? dependencyData7.childPlan : dependencyData7.parentPlan;
    output += '<li data-id="' + soy.$$escapeHtml(plan__soy8.key) + '">' + bamboo.widget.autocomplete.planDependency.item({id: plan__soy8.key, projectName: plan__soy8.project.name, planName: plan__soy8.buildName, isEditable: dependencyData7.editable, isReadOnly: opt_data.isReadOnly}) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planDependency.list.soyTemplateName = 'bamboo.widget.autocomplete.planDependency.list';
}


bamboo.widget.autocomplete.planDependency.item = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("" + '/chain/admin/config/editChainDependencies.action?buildKey=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.projectName) + ((opt_data.planName) ? ' &rsaquo; ' + soy.$$escapeHtml(opt_data.planName) : '') + '</a>' + ((! (opt_data.isEditable == false)) ? (! opt_data.isReadOnly) ? '<a class="remove"></a><input type="hidden" name="childPlanKeys" value="' + soy.$$escapeHtml(opt_data.id) + '" />' : '' : widget.lozenges.lozenge({text: "Generated", subtle: true, extraClasses: 'dependencies-generated'}));
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planDependency.item.soyTemplateName = 'bamboo.widget.autocomplete.planDependency.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/autocomplete-controls/bamboo/variables/variable-multiselect.soy' */
// This file was automatically generated from variable-multiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.variableSelect.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }
if (typeof bamboo.widget.autocomplete.variableSelect == 'undefined') { bamboo.widget.autocomplete.variableSelect = {}; }


bamboo.widget.autocomplete.variableSelect.list = function(opt_data, opt_ignored) {
  var output = '<ul class="' + soy.$$escapeHtml(opt_data.variablesToAutoIncrement.length == 0 ? 'empty' : '') + aui.renderExtraClasses(opt_data) + '">';
  var variableList7 = opt_data.variablesToAutoIncrement;
  var variableListLen7 = variableList7.length;
  for (var variableIndex7 = 0; variableIndex7 < variableListLen7; variableIndex7++) {
    var variableData7 = variableList7[variableIndex7];
    output += '<li data-id="' + soy.$$escapeHtml(variableData7.key) + '">' + bamboo.widget.autocomplete.variableSelect.item(variableData7) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableSelect.list.soyTemplateName = 'bamboo.widget.autocomplete.variableSelect.list';
}


bamboo.widget.autocomplete.variableSelect.item = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.key) + '<a class="remove"></a><input type="hidden" name="variablesToAutoIncrement" value="' + soy.$$escapeHtml(opt_data.key) + '" />';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableSelect.item.soyTemplateName = 'bamboo.widget.autocomplete.variableSelect.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/plan-status-history/plan-status-history.soy' */
// This file was automatically generated from plan-status-history.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.planStatusHistory.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.planStatusHistory == 'undefined') { bamboo.widget.planStatusHistory = {}; }


bamboo.widget.planStatusHistory.container = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '"></div><script type="text/javascript">require([\'jquery\', \'widget/plan-status-history\'], function($, PlanStatusHistory){return new PlanStatusHistory({el: $(\'#' + soy.$$escapeHtml(opt_data.id) + '\'), planKey: \'' + soy.$$escapeHtml(opt_data.planKey) + '\', buildNumber: ' + soy.$$escapeHtml(opt_data.currentBuildNumber ? opt_data.currentBuildNumber : 'null') + ', bootstrap: ' + soy.$$filterNoAutoescape(opt_data.bootstrap) + ', returnUrl: \'' + soy.$$filterNoAutoescape(opt_data.returnUrl) + '\', keyToNavigate: \'' + soy.$$escapeHtml(opt_data.keyToNavigate) + '\', firstBuildNumber: ' + soy.$$escapeHtml(opt_data.firstBuildNumber ? opt_data.firstBuildNumber : 'null') + ', lastBuildNumber: ' + soy.$$escapeHtml(opt_data.lastBuildNumber ? opt_data.lastBuildNumber : 'null') + '});});<\/script>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.container.soyTemplateName = 'bamboo.widget.planStatusHistory.container';
}


bamboo.widget.planStatusHistory.navigator = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.builds.length > 0) {
    output += aui.icons.icon({icon: 'wait', useIconFont: false, size: 'small', extraClasses: 'spinner previous'}) + ((opt_data.minVisibleBuildNumber && opt_data.minVisibleBuildNumber > opt_data.firstBuildNumber) ? '<a class="button previous" title="' + soy.$$escapeHtml("Previous build result") + '" accesskey="' + soy.$$escapeHtml("P") + '">' + aui.icons.icon({icon: 'down', useIconFont: true, size: 'small', extraClasses: 'left'}) + '</a>' : '<span class="button previous disabled">' + aui.icons.icon({icon: 'down', useIconFont: true, size: 'small', extraClasses: 'left'}) + '</span>') + '<ol>';
    var buildList54 = opt_data.builds;
    var buildListLen54 = buildList54.length;
    for (var buildIndex54 = 0; buildIndex54 < buildListLen54; buildIndex54++) {
      var buildData54 = buildList54[buildIndex54];
      output += bamboo.widget.planStatusHistory.item(soy.$$augmentMap(buildData54, {href: "" + (opt_data.currentBuildNumber ? '/build/result/gotoBuildResult.action?buildKey=' + opt_data.keyToNavigate + '&buildNumber=' + buildData54.buildNumber + '&returnUrl=' + opt_data.returnUrl : '/browse/' + buildData54.planKey + '-' + buildData54.buildNumber), isCurrent: opt_data.currentBuildNumber && opt_data.currentBuildNumber == buildData54.buildNumber}));
    }
    output += '</ol>' + ((opt_data.showRightArrow) ? '<a class="button next" title="' + soy.$$escapeHtml("Next build result") + '" accesskey="' + soy.$$escapeHtml("N") + '">' + aui.icons.icon({icon: 'up', useIconFont: true, size: 'small', extraClasses: 'right'}) + '</a>' : '<span class="button next disabled">' + aui.icons.icon({icon: 'up', useIconFont: true, size: 'small', extraClasses: 'right'}) + '</span>') + aui.icons.icon({icon: 'wait', useIconFont: false, size: 'small', extraClasses: 'spinner next'});
  } else {
    output += '<p>' + soy.$$escapeHtml("Status history data not available") + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.navigator.soyTemplateName = 'bamboo.widget.planStatusHistory.navigator';
}


bamboo.widget.planStatusHistory.buildDialog = function(opt_data, opt_ignored) {
  return '<div>' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.buildStatus, text: '#' + opt_data.buildNumber + ' (' + opt_data.buildStatusDescription + ')'}) + '<strong>#' + soy.$$escapeHtml(opt_data.buildNumber) + '</strong>' + ((opt_data.onceOff) ? widget.lozenges.lozenge({color: 'current', text: "Custom revision"}) : '') + ((opt_data.rebuild) ? widget.lozenges.lozenge({color: 'moved', text: "Rebuild"}) : '') + ((opt_data.customBuild) ? widget.lozenges.lozenge({color: 'current', text: "Custom build"}) : '') + '<p>' + soy.$$filterNoAutoescape(opt_data.triggerHtml) + '</p>' + ((opt_data.hasFailed && ! opt_data.specsFailure) ? ((opt_data.existingFailuresText) ? '<p>' + soy.$$escapeHtml(opt_data.existingFailuresText) + '</p>' : '') + ((opt_data.newFailuresText) ? '<p>' + soy.$$escapeHtml(opt_data.newFailuresText) + '</p>' : '') + ((! (opt_data.existingFailuresText || opt_data.newFailuresText)) ? '<p>' + soy.$$escapeHtml("0 tests failed") + '</p>' : '') : '') + '</div>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.buildDialog.soyTemplateName = 'bamboo.widget.planStatusHistory.buildDialog';
}


bamboo.widget.planStatusHistory.item = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.buildStatus) + ((opt_data.isCurrent) ? ' current' : '') + ' animated' + aui.renderExtraClasses(opt_data) + '" data-build-number="' + soy.$$escapeHtml(opt_data.buildNumber) + '" data-trigger="' + soy.$$escapeHtml(opt_data.trigger) + '" data-new-failed-test-case-count="' + soy.$$escapeHtml(opt_data.newFailedTestCaseCount) + '" data-existing-failed-test-case-count="' + soy.$$escapeHtml(opt_data.existingFailedTestCaseCount) + '" data-rebuild="' + soy.$$escapeHtml(opt_data.rebuild) + '" data-once-off="' + soy.$$escapeHtml(opt_data.onceOff) + '" data-custom-build="' + soy.$$escapeHtml(opt_data.customBuild) + '" ><a href="' + soy.$$escapeHtml(opt_data.href) + '">' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.buildStatus, text: '#' + opt_data.buildNumber + ' (' + opt_data.buildStatusDescription + ')'}) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.item.soyTemplateName = 'bamboo.widget.planStatusHistory.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/nav/nav.soy' */
// This file was automatically generated from nav.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.nav.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.nav == 'undefined') { bamboo.widget.nav = {}; }


bamboo.widget.nav.horizontal = function(opt_data, opt_ignored) {
  var output = '<nav class="aui-navgroup aui-navgroup-horizontal ' + ((opt_data.historyXhrDisabled) ? 'history-xhr-disabled' : '') + '"><div class="aui-navgroup-inner"><div class="aui-navgroup-primary"><ul class="aui-nav">';
  var itemList8 = opt_data.items;
  var itemListLen8 = itemList8.length;
  for (var itemIndex8 = 0; itemIndex8 < itemListLen8; itemIndex8++) {
    var itemData8 = itemList8[itemIndex8];
    output += bamboo.widget.nav.navItem(itemData8);
  }
  output += '</ul></div></div></nav>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.nav.horizontal.soyTemplateName = 'bamboo.widget.nav.horizontal';
}


bamboo.widget.nav.navItem = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + ((opt_data.isSelected) ? 'aui-nav-selected' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '">' + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.badge && opt_data.badge.text) ? ' ' + aui.badges.badge(opt_data.badge) : '') + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.navItem.soyTemplateName = 'bamboo.widget.nav.navItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/nav/tabs.soy' */
// This file was automatically generated from tabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.nav.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.nav == 'undefined') { bamboo.widget.nav = {}; }


bamboo.widget.nav.tabs = function(opt_data, opt_ignored) {
  var output = '<nav class="aui-tabs horizontal-tabs "><ul class="tabs-menu">';
  var itemList4 = opt_data.items;
  var itemListLen4 = itemList4.length;
  for (var itemIndex4 = 0; itemIndex4 < itemListLen4; itemIndex4++) {
    var itemData4 = itemList4[itemIndex4];
    output += bamboo.widget.nav.tab(itemData4);
  }
  output += '</ul></nav>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.nav.tabs.soyTemplateName = 'bamboo.widget.nav.tabs';
}


bamboo.widget.nav.tab = function(opt_data, opt_ignored) {
  return '<li ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="menu-item' + ((opt_data.isSelected) ? ' active-tab' + aui.renderExtraClasses(opt_data) + '"' : ' ' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + '"') + aui.renderExtraAttributes(opt_data) + '><a' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.tab.soyTemplateName = 'bamboo.widget.nav.tab';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/nav/bread-crumb.soy' */
// This file was automatically generated from bread-crumb.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.nav.breadcrumb.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.nav == 'undefined') { bamboo.widget.nav = {}; }
if (typeof bamboo.widget.nav.breadcrumb == 'undefined') { bamboo.widget.nav.breadcrumb = {}; }


bamboo.widget.nav.breadcrumb.crumbContainer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ol ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-nav aui-nav-breadcrumbs">';
  if (opt_data.parentCrumbs && opt_data.parentCrumbs.length > 0) {
    var crumbList12 = opt_data.parentCrumbs;
    var crumbListLen12 = crumbList12.length;
    for (var crumbIndex12 = 0; crumbIndex12 < crumbListLen12; crumbIndex12++) {
      var crumbData12 = crumbList12[crumbIndex12];
      output += bamboo.widget.nav.breadcrumb.showParentCrumb(crumbData12);
    }
  }
  output += ((opt_data.currentCrumb) ? bamboo.widget.nav.breadcrumb.showCurrentCrumb(opt_data.currentCrumb) : '') + '</ol>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.nav.breadcrumb.crumbContainer.soyTemplateName = 'bamboo.widget.nav.breadcrumb.crumbContainer';
}


bamboo.widget.nav.breadcrumb.showParentCrumb = function(opt_data, opt_ignored) {
  return '<li' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + '><a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.id) ? ' id="breadcrumb:' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.breadcrumb.showParentCrumb.soyTemplateName = 'bamboo.widget.nav.breadcrumb.showParentCrumb';
}


bamboo.widget.nav.breadcrumb.showCurrentCrumb = function(opt_data, opt_ignored) {
  return '<li class="aui-nav-selected' + aui.renderExtraClasses(opt_data) + '">' + soy.$$escapeHtml(opt_data.text) + '</li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.breadcrumb.showCurrentCrumb.soyTemplateName = 'bamboo.widget.nav.breadcrumb.showCurrentCrumb';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/help/help.soy' */
// This file was automatically generated from help.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.help.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.help == 'undefined') { bamboo.widget.help = {}; }


bamboo.widget.help.panel = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + ' class="help-panel' + ((opt_data.type) ? ' help-panel-' + soy.$$escapeHtml(opt_data.type) : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.link) ? ' href="' + soy.$$escapeHtml(opt_data.link) + '"' : '') + aui.renderExtraAttributes(opt_data) + '><strong class="help-panel-title">' + soy.$$escapeHtml(opt_data.title) + '</strong><div class="help-panel-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + '>';
};
if (goog.DEBUG) {
  bamboo.widget.help.panel.soyTemplateName = 'bamboo.widget.help.panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/time/time.soy' */
// This file was automatically generated from time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.time.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.time == 'undefined') { bamboo.widget.time = {}; }


bamboo.widget.time.timestamp = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format) : BAMBOO.Time.format(opt_data.datetime, 'short')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.timestamp.soyTemplateName = 'bamboo.widget.time.timestamp';
}


bamboo.widget.time.relative = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format + 'Age') : BAMBOO.Time.format(opt_data.datetime, 'shortAge')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.relative.soyTemplateName = 'bamboo.widget.time.relative';
}


bamboo.widget.time.time = function(opt_data, opt_ignored) {
  return '<time datetime="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'timestamp')) + '" title="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'full')) + '"' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</time>';
};
if (goog.DEBUG) {
  bamboo.widget.time.time.soyTemplateName = 'bamboo.widget.time.time';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/tooltip/tooltip.soy' */
// This file was automatically generated from tooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.tooltip.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.tooltip == 'undefined') { bamboo.widget.tooltip = {}; }


bamboo.widget.tooltip.tooltip = function(opt_data, opt_ignored) {
  return '<script type="text/javascript">require([\'aui\', \'jquery\', \'underscore\'], function(AJS, $, _){var $element = $(\'' + soy.$$escapeHtml(opt_data.trigger) + '\'); AJS.InlineDialog( $element, undefined' + ((opt_data.url) ? ',\'' + soy.$$escapeHtml("") + soy.$$escapeJsString(opt_data.url) + '\'' : ',function(content, trigger, showPopup){content .css({padding: \'20px\'}) .html(_.unescape(\'' + soy.$$escapeHtml(opt_data.content) + '\')); showPopup(); return false;}') + ',{' + ((opt_data.width) ? ' width: ' + soy.$$escapeHtml(opt_data.width) + ' ' : '') + ((opt_data.showDelay) ? ' ' + ((opt_data.width) ? ',' : '') + ' showDelay: ' + soy.$$escapeHtml(opt_data.showDelay) : '') + ((opt_data.width || opt_data.showDelay) ? ',' : '') + ' onHover: true});' + ((opt_data.addMarker) ? '$element.addClass(\'tooltip-marker\');' : '') + '});<\/script>';
};
if (goog.DEBUG) {
  bamboo.widget.tooltip.tooltip.soyTemplateName = 'bamboo.widget.tooltip.tooltip';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:base-model', location = '/model/model.js' */
define('model', [
    'jquery',
    'underscore',
    'brace',
    'exports'
], function(
    $,
    _,
    Brace,
    exports
) {

    'use strict';

    var Key = Brace.Model.extend({
        namedAttributes: {
            key: 'string'
        }
    });

    var ResultKey = Brace.Model.extend({
        namedAttributes: {
            key: 'string',
            entityKey: Key,
            resultNumber: 'number'
        }
    });

    var LogEntry = Brace.Model.extend({
        namedAttributes: {
           log: 'string',
           unstyledLog: 'string',
           date: Date,
           formattedDate: 'string'
        }
    });

    var Artifact = Brace.Model.extend({
        namedAttributes: {
            id: 'number',
            label: 'string',
            size: 'number',
            isSharedArtifact: 'boolean',
            isGloballyStored: 'boolean',
            linkType: 'string',
            planResultKey: ResultKey,
            archiverType: 'string'
        }
    });

    var Agent = Brace.Model.extend({
        namedAttributes: {
            name: 'string',
            type: 'string',
            active: 'boolean',
            enabled: 'boolean',
            busy: 'boolean'
        }
    });

    var Operations = Brace.Model.extend({
        namedAttributes: {
            canView: 'boolean',
            canEdit: 'boolean',
            canDelete: 'boolean',
            allowedToExecute: 'boolean',
            canExecute: 'boolean',
            cantExecuteReason: 'string',
            allowedToCreateVersion: 'boolean',
            allowedToSetVersionStatus: 'boolean'
        }
    });

    var DeploymentVersionStatus = Brace.Model.extend({
        namesAttributes: {
            versionState: 'string',
            userName: 'string',
            displayName: 'string',
            gravatarUrl: 'string',
            creationDate: 'date'
        }
    });

    var DeploymentVersionItem = Brace.Model.extend({
        namedAttributes: {
            name: 'string',
            planResultKey: ResultKey,
            type: 'string',
            label: 'string',
            location: 'string',
            copyPattern: 'string',
            size: 'number',
            artifact: Artifact
        }
    });

    var DeploymentVersionVariableContext = Brace.Model.extend({
        namedAttributes: {
            key: 'string',
            value: 'string',
            variableType: 'string',
            isPassword: 'boolean'
        }
    });

    var DeploymentVersion = Brace.Model.extend({
        namedAttributes: {
            name: 'string',
            planBranchName: 'string',
            creationDate: Date,
            creatorUserName: 'string',
            creatorGravatarUrl: 'string',
            creatorDisplayName: 'string',
            planResultKey: ResultKey,
            items: Brace.Collection.extend({
                model: DeploymentVersionItem
            }),
            versionStatus: DeploymentVersionStatus,
            operations:  Operations,
            ageZeroPoint: Date
        }
    });

    var DeploymentResult = Brace.Model.extend({
        namedAttributes: {
            deploymentVersion: DeploymentVersion,
            deploymentVersionName: 'string',
            lifeCycleState: 'string',
            deploymentState: 'string',
            startedDate: Date,
            queuedDate: Date,
            executedDate: Date,
            finishedDate: Date,
            reasonSummary: 'string',
            key: ResultKey,
            agent: Agent,
            logEntries: Brace.Collection.extend({
                model: LogEntry
            }),
            operations: Operations
        }
    });

    var DeploymentEnvironment = Brace.Model.extend({
          namedAttributes: {
              name: 'string',
              deploymentProjectId: 'number',
              position: 'number',
              operations:  Operations
          }
    });

    var DeploymentEnvironmentStatus = Brace.Model.extend({
        namedAttributes: {
            deploymentResult: DeploymentResult,
            environment: DeploymentEnvironment
        }
    });

    var DeploymentProject = Brace.Model.extend({
        namedAttributes: {
            name: 'string',
            oid: 'string',
            key: Key,
            planKey: Key,
            description: 'string',
            environments: Brace.Collection.extend({
                model: DeploymentEnvironment
            }),
            operations: Operations
        }
    });

    var DeploymentProjectWithEnvironmentStatuses = Brace.Model.extend({
        namedAttributes: {
            deploymentProject: DeploymentProject,
            environmentStatuses: Brace.Collection.extend({
                model: DeploymentEnvironmentStatus
            })
        }
    });

    exports.Key = Key;
    exports.ResultKey = ResultKey;
    exports.Artifact = Artifact;
    exports.Agent = Agent;
    exports.LogEntry = LogEntry;
    exports.Operations = Operations;
    exports.DeploymentVersionStatus = DeploymentVersionStatus;
    exports.DeploymentVersionItem = DeploymentVersionItem;
    exports.DeploymentVersionVariableContext = DeploymentVersionVariableContext;
    exports.DeploymentVersion = DeploymentVersion;
    exports.DeploymentResult = DeploymentResult;
    exports.DeploymentEnvironment = DeploymentEnvironment;
    exports.DeploymentEnvironmentStatus = DeploymentEnvironmentStatus;
    exports.DeploymentProject = DeploymentProject;
    exports.DeploymentProjectWithEnvironmentStatuses = DeploymentProjectWithEnvironmentStatuses;

});



} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:deployment-version-soy', location = '/widget/deployment/version.soy' */
// This file was automatically generated from version.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.deployment.version.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.deployment == 'undefined') { bamboo.widget.deployment = {}; }
if (typeof bamboo.widget.deployment.version == 'undefined') { bamboo.widget.deployment.version = {}; }


bamboo.widget.deployment.version.versionInfo = function(opt_data, opt_ignored) {
  return '' + ((opt_data.version) ? ((opt_data.showVersionStatus && opt_data.version.versionStatus) ? '<div class="release-info">' + bamboo.widget.deployment.version.name(opt_data.version) + '</div>' : bamboo.widget.deployment.version.name(opt_data.version)) + ((opt_data.showBranch) ? ' ' + bamboo.widget.deployment.version.branch(opt_data.version) : '') + ((opt_data.showVersionStatus && opt_data.version.versionStatus) ? ' ' + widget.status.deploymentVersionStatusInfo({avatar: opt_data.version.versionStatus.gravatarUrl, userName: opt_data.version.versionStatus.userName, displayName: opt_data.version.versionStatus.displayName, deploymentVersionState: opt_data.version.versionStatus.versionState}) : '') : '');
};
if (goog.DEBUG) {
  bamboo.widget.deployment.version.versionInfo.soyTemplateName = 'bamboo.widget.deployment.version.versionInfo';
}


bamboo.widget.deployment.version.name = function(opt_data, opt_ignored) {
  return '<a class="release-name" href="' + soy.$$escapeHtml("") + '/deploy/viewDeploymentVersion.action?versionId=' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>';
};
if (goog.DEBUG) {
  bamboo.widget.deployment.version.name.soyTemplateName = 'bamboo.widget.deployment.version.name';
}


bamboo.widget.deployment.version.branch = function(opt_data, opt_ignored) {
  return '<span class="lozenge-newline">' + ((opt_data.label) ? '<span class="inline-label">' + soy.$$escapeHtml(opt_data.label) + '</span> ' : '') + '<span class="lozenge branch-lozenge monospace" title="' + soy.$$escapeHtml(opt_data.planBranchName) + '"><span class="branch">' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + '<span class="name">' + soy.$$escapeHtml(opt_data.planBranchName) + '</span></span></span></span>';
};
if (goog.DEBUG) {
  bamboo.widget.deployment.version.branch.soyTemplateName = 'bamboo.widget.deployment.version.branch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:deployments-main', location = '/layout/deployment/deployment.soy' */
// This file was automatically generated from deployment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.deployment = function(opt_data, opt_ignored) {
  return '' + bamboo.layout.base(soy.$$augmentMap(opt_data, {headerMainContent: '' + ((opt_data.parentCrumbs) ? bamboo.widget.nav.breadcrumb.crumbContainer(opt_data) : '') + ((opt_data.headerText) ? '<h1>' + soy.$$escapeHtml(opt_data.headerText) + '</h1>' : (opt_data.headerContent) ? soy.$$filterNoAutoescape(opt_data.headerContent) : ''), headerExtraContent: '' + ((opt_data.deploymentProject && opt_data.deploymentProject.description) ? '<div class="deployment-project-description">' + soy.$$escapeHtml(opt_data.deploymentProject.description) + '</div>' : '') + ((opt_data.headerExtraContent) ? soy.$$filterNoAutoescape(opt_data.headerExtraContent) : '')}));
};
if (goog.DEBUG) {
  bamboo.layout.deployment.soyTemplateName = 'bamboo.layout.deployment';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:deployments-main', location = '/layout/deployment/deployment.js' */
/* Don't put anything in here unless you have permission from JASON.
 Please use specific js files for each individual page and/or feature */

(function (BAMBOO)
{
    BAMBOO.DEPLOYMENT = {};

}(window.BAMBOO = (window.BAMBOO || {})));

AJS.$(function(){
    AJS.$("span.branch-lozenge, span.icon-deploy-success, span.icon-deploy-fail, span.aui-icon-deploy-success, span.aui-icon-deploy-fail").tooltip({gravity: 'n'});
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:deployments-main', location = '/widget/aui-override.soy' */
// This file was automatically generated from aui-override.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.override.aui.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.override == 'undefined') { widget.override = {}; }
if (typeof widget.override.aui == 'undefined') { widget.override.aui = {}; }


widget.override.aui.badgeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.href) ? '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + widget.override.aui.badgeButtonAttributes(opt_data) + '>' + widget.override.aui.badgeButtonIcon(opt_data) + soy.$$escapeHtml(opt_data.text) + '</a>' : (opt_data.tagName == 'input') ? '<input type="' + soy.$$escapeHtml(opt_data.inputType ? opt_data.inputType : 'button') + '" ' + widget.override.aui.badgeButtonAttributes(opt_data) + ' value="' + soy.$$escapeHtml(opt_data.text) + '" />' : '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'button') + widget.override.aui.badgeButtonAttributes(opt_data) + '>' + widget.override.aui.badgeButtonIcon(opt_data) + soy.$$escapeHtml(opt_data.text) + ' <span class="aui-badge">' + soy.$$escapeHtml(opt_data.badgeText) + '</span></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'button') + '>');
};
if (goog.DEBUG) {
  widget.override.aui.badgeButton.soyTemplateName = 'widget.override.aui.badgeButton';
}


widget.override.aui.badgeButtonAttributes = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-button' + ((opt_data.dropdown2Target) ? ' aui-dropdown2-trigger' : '');
  switch (opt_data.type) {
    case 'primary':
      output += ' aui-button-primary';
      break;
    case 'link':
      output += ' aui-button-link';
      break;
    case 'subtle':
      output += ' aui-button-subtle';
      break;
  }
  output += aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.isPressed) ? ' aria-pressed="' + soy.$$escapeHtml(opt_data.isPressed) + '"' : '') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' + ((opt_data.isDisabled == true) ? (opt_data.tagName == 'button' || opt_data.tagName == 'input') ? ' disabled="disabled" ' : '' : '') : '') + ((opt_data.dropdown2Target) ? ' aria-owns="' + soy.$$escapeHtml(opt_data.dropdown2Target) + '" aria-haspopup="true"' : '') + ((opt_data.tagName == 'a') ? ' tabindex="0"' : '');
  return output;
};
if (goog.DEBUG) {
  widget.override.aui.badgeButtonAttributes.soyTemplateName = 'widget.override.aui.badgeButtonAttributes';
}


widget.override.aui.badgeButtonIcon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.iconType) ? '<span class="' + ((opt_data.iconType == 'aui') ? 'aui-icon' : '') + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '');
};
if (goog.DEBUG) {
  widget.override.aui.badgeButtonIcon.soyTemplateName = 'widget.override.aui.badgeButtonIcon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:result-features', location = '/feature/deployment/result/deployment-result-details.soy' */
// This file was automatically generated from deployment-result-details.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.deployment.result.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.deployment == 'undefined') { bamboo.feature.deployment = {}; }
if (typeof bamboo.feature.deployment.result == 'undefined') { bamboo.feature.deployment.result = {}; }


bamboo.feature.deployment.result.finishedTimeOrDuration = function(opt_data, opt_ignored) {
  var output = '';
  var resultUrl__soy3 = '' + soy.$$escapeHtml("" + '/deploy/viewDeploymentResult.action?deploymentResultId=' + opt_data.id);
  output += (opt_data.finishedDate) ? bamboo.widget.time.timestamp({datetime: opt_data.finishedDate, format: 'full'}) : (opt_data.lifeCycleState == 'PENDING' && opt_data.startedDate) ? (opt_data.hideLink) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Waiting for {0}",typeof (BAMBOO.Time.elapsedTime(opt_data.startedDate)) === 'number' ? BAMBOO.Time.elapsedTime(opt_data.startedDate) : soy.$$escapeHtml(BAMBOO.Time.elapsedTime(opt_data.startedDate))))) : soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d\x22{0}\x22\x3eWaiting for\x3c/a\x3e {1}",typeof (resultUrl__soy3) === 'number' ? resultUrl__soy3 : soy.$$escapeHtml(resultUrl__soy3),typeof (BAMBOO.Time.elapsedTime(opt_data.startedDate)) === 'number' ? BAMBOO.Time.elapsedTime(opt_data.startedDate) : soy.$$escapeHtml(BAMBOO.Time.elapsedTime(opt_data.startedDate))))) : (opt_data.lifeCycleState == 'QUEUED' && opt_data.queuedDate) ? (opt_data.hideLink) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Waiting for {0}",typeof (BAMBOO.Time.elapsedTime(opt_data.queuedDate)) === 'number' ? BAMBOO.Time.elapsedTime(opt_data.queuedDate) : soy.$$escapeHtml(BAMBOO.Time.elapsedTime(opt_data.queuedDate))))) : soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d\x22{0}\x22\x3eWaiting for\x3c/a\x3e {1}",typeof (resultUrl__soy3) === 'number' ? resultUrl__soy3 : soy.$$escapeHtml(resultUrl__soy3),typeof (BAMBOO.Time.elapsedTime(opt_data.queuedDate)) === 'number' ? BAMBOO.Time.elapsedTime(opt_data.queuedDate) : soy.$$escapeHtml(BAMBOO.Time.elapsedTime(opt_data.queuedDate))))) : (opt_data.lifeCycleState == 'IN_PROGRESS' && opt_data.executedDate) ? (opt_data.hideLink) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Deploying for {0}",typeof (BAMBOO.Time.elapsedTime(opt_data.executedDate)) === 'number' ? BAMBOO.Time.elapsedTime(opt_data.executedDate) : soy.$$escapeHtml(BAMBOO.Time.elapsedTime(opt_data.executedDate))))) : soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d\x22{0}\x22\x3eDeploying for\x3c/a\x3e {1}",typeof (resultUrl__soy3) === 'number' ? resultUrl__soy3 : soy.$$escapeHtml(resultUrl__soy3),typeof (BAMBOO.Time.elapsedTime(opt_data.executedDate)) === 'number' ? BAMBOO.Time.elapsedTime(opt_data.executedDate) : soy.$$escapeHtml(BAMBOO.Time.elapsedTime(opt_data.executedDate))))) : '';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.deployment.result.finishedTimeOrDuration.soyTemplateName = 'bamboo.feature.deployment.result.finishedTimeOrDuration';
}


bamboo.feature.deployment.result.environmentState = function(opt_data, opt_ignored) {
  return '' + ((opt_data.deploymentResult.lifeCycleState == 'PENDING' || opt_data.deploymentResult.lifeCycleState == 'QUEUED') ? widget.icons.statusIcon({status: 'pending'}) : (opt_data.deploymentResult.lifeCycleState == 'IN_PROGRESS') ? widget.icons.statusIcon({status: 'building'}) : (opt_data.deploymentResult.lifeCycleState == 'FINISHED') ? (opt_data.deploymentResult.deploymentState == 'FAILED') ? widget.icons.fontIcon({type: 'deploy-fail', text: '' + ((opt_data.isLatestResult) ? soy.$$escapeHtml("The last deployment on this environment failed. This environment is currently broken.") : soy.$$escapeHtml("Deploying the release on this environment failed.")), showTitle: 'true'}) : (opt_data.deploymentResult.deploymentState == 'SUCCESS') ? widget.icons.fontIcon({type: 'deploy-success', text: '' + ((opt_data.isLatestResult) ? soy.$$escapeHtml("The last deployment on this environment was successful.") : soy.$$escapeHtml("Deploying the release on this environment was successful.")), showTitle: 'true'}) : widget.icons.statusIcon({status: 'deploy-unknown'}) : widget.icons.statusIcon({status: 'deploy-unknown'})) + bamboo.feature.deployment.result.detailsLink(opt_data);
};
if (goog.DEBUG) {
  bamboo.feature.deployment.result.environmentState.soyTemplateName = 'bamboo.feature.deployment.result.environmentState';
}


bamboo.feature.deployment.result.detailsLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showDetailsLinkAlways || opt_data.deploymentResult.lifeCycleState == 'PENDING' || opt_data.deploymentResult.lifeCycleState == 'QUEUED' || opt_data.deploymentResult.lifeCycleState == 'IN_PROGRESS' || opt_data.deploymentResult.lifeCycleState == 'FINISHED' && opt_data.deploymentResult.deploymentState == 'FAILED') ? '<a class="result-details-link" href="' + soy.$$escapeHtml("" + '/deploy/viewDeploymentResult.action?deploymentResultId=' + opt_data.deploymentResult.id) + '" data-version-id="' + soy.$$escapeHtml(opt_data.deploymentResult.id) + '" data-version-name="' + soy.$$escapeHtml(opt_data.deploymentResult.deploymentVersionName) + '" >' + soy.$$escapeHtml("Logs") + '</a>' : '');
};
if (goog.DEBUG) {
  bamboo.feature.deployment.result.detailsLink.soyTemplateName = 'bamboo.feature.deployment.result.detailsLink';
}


bamboo.feature.deployment.result.nowAt = function(opt_data, opt_ignored) {
  var output = '';
  var versionLink__soy79 = '' + bamboo.feature.deployment.result.version(soy.$$augmentMap(opt_data.deploymentResult, {hideLozenge: true}));
  var timestamp__soy82 = '' + ((opt_data.deploymentResult.finishedDate) ? 'Deployed ' : '') + bamboo.feature.deployment.result.finishedTimeOrDuration(opt_data.deploymentResult);
  output += '<span id="' + soy.$$escapeHtml('nowAtResult_' + opt_data.deploymentResult.id) + '" class="environment-now-at">' + soy.$$filterNoAutoescape(AJS.format("now at {0}",versionLink__soy79)) + '</span>' + bamboo.widget.tooltip.tooltip({trigger: '#nowAtResult_' + opt_data.deploymentResult.id, content: timestamp__soy82, showDelay: 200});
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.deployment.result.nowAt.soyTemplateName = 'bamboo.feature.deployment.result.nowAt';
}


bamboo.feature.deployment.result.version = function(opt_data, opt_ignored) {
  return '' + ((opt_data.deploymentVersion) ? bamboo.widget.deployment.version.versionInfo({version: opt_data.deploymentVersion, showBranch: opt_data.showBranch, showVersionStatus: ! opt_data.hideLozenge}) : '<span title="' + soy.$$escapeHtml(AJS.format("Release {0} has been deleted",opt_data.deploymentVersionName)) + '">' + soy.$$escapeHtml(opt_data.deploymentVersionName) + '</span>');
};
if (goog.DEBUG) {
  bamboo.feature.deployment.result.version.soyTemplateName = 'bamboo.feature.deployment.result.version';
}


bamboo.feature.deployment.result.versionStatusLozenge = function(opt_data, opt_ignored) {
  return '' + ((opt_data.environmentStatus.deploymentResult) ? (opt_data.environmentStatus.latestResult) ? widget.lozenges.auilozenge({colour: 'default', text: "REPLACED"}) : widget.status.deploymentResultStatusLozenge({lifeCycleState: opt_data.environmentStatus.deploymentResult.lifeCycleState, deploymentState: opt_data.environmentStatus.deploymentResult.deploymentState}) : (opt_data.environmentStatus.latestResult && opt_data.environmentStatus.latestResult.deploymentVersion && opt_data.environmentStatus.latestResult.deploymentVersion.creationDate - opt_data.deploymentVersion.creationDate > 0) ? widget.lozenges.auilozenge({colour: 'default', text: "SKIPPED"}) : (opt_data.neverDeployedText) ? soy.$$escapeHtml(opt_data.neverDeployedText) : soy.$$escapeHtml("Never deployed"));
};
if (goog.DEBUG) {
  bamboo.feature.deployment.result.versionStatusLozenge.soyTemplateName = 'bamboo.feature.deployment.result.versionStatusLozenge';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:related-deployments', location = '/feature/deployment/build/related-deployment-list.soy' */
// This file was automatically generated from related-deployment-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.deployment.build.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.deployment == 'undefined') { bamboo.feature.deployment = {}; }
if (typeof bamboo.feature.deployment.build == 'undefined') { bamboo.feature.deployment.build = {}; }


bamboo.feature.deployment.build.relatedDeployments = function(opt_data, opt_ignored) {
  var output = '<div id="' + soy.$$escapeHtml(opt_data.id) + '" class="dashboard-project">';
  if (opt_data.projectsWithEnvironmentStatuses && opt_data.projectsWithEnvironmentStatuses.length > 0) {
    var projectWithEnvironmentStatusesList8 = opt_data.projectsWithEnvironmentStatuses;
    var projectWithEnvironmentStatusesListLen8 = projectWithEnvironmentStatusesList8.length;
    for (var projectWithEnvironmentStatusesIndex8 = 0; projectWithEnvironmentStatusesIndex8 < projectWithEnvironmentStatusesListLen8; projectWithEnvironmentStatusesIndex8++) {
      var projectWithEnvironmentStatusesData8 = projectWithEnvironmentStatusesList8[projectWithEnvironmentStatusesIndex8];
      output += '<table class="aui"><colgroup><col width="18%"/><col width="20%"/><col width="15%"/><col width="10%"/><col width="15%"/><col width="8%"/><col width="15%"/><col width="70px"/></colgroup><thead><tr><th>' + soy.$$escapeHtml("Deployment project") + '</th><th>' + soy.$$escapeHtml("Environment") + '</th><th>' + soy.$$escapeHtml("Release") + '</th><th>' + soy.$$escapeHtml("Release branch") + '</th><th>' + soy.$$escapeHtml("Build result used") + '</th><th>' + soy.$$escapeHtml("Result") + '</th><th>' + soy.$$escapeHtml("Completed") + '</th><th>' + soy.$$escapeHtml("Actions") + '</th></tr></thead><tbody>';
      if (projectWithEnvironmentStatusesData8.environmentStatuses && projectWithEnvironmentStatusesData8.environmentStatuses.length > 0) {
        var environmentStatusList28 = projectWithEnvironmentStatusesData8.environmentStatuses;
        var environmentStatusListLen28 = environmentStatusList28.length;
        for (var environmentStatusIndex28 = 0; environmentStatusIndex28 < environmentStatusListLen28; environmentStatusIndex28++) {
          var environmentStatusData28 = environmentStatusList28[environmentStatusIndex28];
          output += '<tr class="' + ((environmentStatusIndex28 == 0) ? 'first' : '') + ' ' + ((environmentStatusIndex28 == environmentStatusListLen28 - 1) ? 'last' : '') + ' ' + ((environmentStatusData28.deploymentResult && environmentStatusData28.deploymentResult.lifeCycleState == 'FINISHED' && environmentStatusData28.deploymentResult.deploymentState == 'FAILED') ? 'error' : '') + '"><td class="deployment">' + ((environmentStatusIndex28 == 0) ? '<a class="deployment-project-name" href="' + soy.$$escapeHtml("" + '/deploy/viewDeploymentProjectEnvironments.action?id=' + projectWithEnvironmentStatusesData8.deploymentProject.id) + '"' + ((projectWithEnvironmentStatusesData8.deploymentProject.description) ? 'title="' + soy.$$escapeHtml(projectWithEnvironmentStatusesData8.deploymentProject.description) + '"' : '') + '>' + soy.$$escapeHtml(projectWithEnvironmentStatusesData8.deploymentProject.name) + '</a>' : '') + '</td>' + bamboo.feature.deployment.build.environment(soy.$$augmentMap(environmentStatusData28, {currentUrl: opt_data.currentUrl, relatedVersions: opt_data.relatedVersions})) + '</tr>';
        }
      } else {
        output += '<tr class="first"><td class="deployment"><a class="deployment-project-name" href="' + soy.$$escapeHtml("" + '/deploy/viewDeploymentProjectEnvironments.action?id=' + projectWithEnvironmentStatusesData8.deploymentProject.id) + '">' + soy.$$escapeHtml(projectWithEnvironmentStatusesData8.deploymentProject.name) + '</a></td><td colspan="7" class="empty-text">' + soy.$$escapeHtml("No environments found.") + ((projectWithEnvironmentStatusesData8.deploymentProject.operations.canEdit) ? ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d\x22{0}\x22\x3eCreate a new environment\x3c/a\x3e to start tracking your deployments.",typeof ("" + '/deploy/config/createEnvironment.action?deploymentProjectId=' + projectWithEnvironmentStatusesData8.deploymentProject.id + '&returnUrl=' + opt_data.currentUrl) === 'number' ? "" + '/deploy/config/createEnvironment.action?deploymentProjectId=' + projectWithEnvironmentStatusesData8.deploymentProject.id + '&returnUrl=' + opt_data.currentUrl : soy.$$escapeHtml("" + '/deploy/config/createEnvironment.action?deploymentProjectId=' + projectWithEnvironmentStatusesData8.deploymentProject.id + '&returnUrl=' + opt_data.currentUrl)))) : '') + '</td></tr>';
      }
      output += '</tbody></table>';
    }
  } else {
    output += '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3cp\x3eWith Bamboo deployments you can track your code from a Jira issue, through testing in a build, all the way to deployment. Deployments allow you to: \x3cul\x3e\x3cli\x3eSnapshot your artifacts from any successful build into a release\x3c/li\x3e \x3cli\x3eDeploy, rollback and promote releases to environments\x3c/li\x3e \x3cli\x3eTrack what, when and who deployed releases to your environments\x3c/li\x3e \x3c/ul\x3e\x3c/p\x3e")) + '</p>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.deployment.build.relatedDeployments.soyTemplateName = 'bamboo.feature.deployment.build.relatedDeployments';
}


bamboo.feature.deployment.build.relatedBuilds = function(opt_data, opt_ignored) {
  return '' + ((opt_data.relatedPlanResults.length) ? widget.buildresult.resultStatusAndLink({resultSummary: opt_data.relatedPlanResults[0]}) + ((opt_data.relatedPlanResults.length > 1) ? ' ' + soy.$$escapeHtml(AJS.format("and {0} {0,choice,1# other|1\x3c others}",opt_data.relatedPlanResults.length - 1)) : '') : '');
};
if (goog.DEBUG) {
  bamboo.feature.deployment.build.relatedBuilds.soyTemplateName = 'bamboo.feature.deployment.build.relatedBuilds';
}


bamboo.feature.deployment.build.environment = function(opt_data, opt_ignored) {
  var output = '<td><a href="' + soy.$$escapeHtml("" + '/deploy/viewEnvironment.action?id=' + opt_data.environment.id) + '">' + soy.$$escapeHtml(opt_data.environment.name) + '</a></td>';
  if (opt_data.deploymentResult) {
    output += '<td>' + bamboo.feature.deployment.result.version({deploymentVersion: opt_data.deploymentResult.deploymentVersion, deploymentVersionName: opt_data.deploymentResult.deploymentVersionName, subtle: true}) + '</td><td>' + ((opt_data.deploymentResult.deploymentVersion) ? widget.lozenges.branch(opt_data.deploymentResult.deploymentVersion) : '') + '</td><td>';
    var relatedVersionList107 = opt_data.relatedVersions;
    var relatedVersionListLen107 = relatedVersionList107.length;
    for (var relatedVersionIndex107 = 0; relatedVersionIndex107 < relatedVersionListLen107; relatedVersionIndex107++) {
      var relatedVersionData107 = relatedVersionList107[relatedVersionIndex107];
      output += (relatedVersionData107.deploymentVersion.id == opt_data.deploymentResult.deploymentVersion.id) ? bamboo.feature.deployment.build.relatedBuilds(relatedVersionData107) : '';
    }
    output += '</td><td>' + bamboo.feature.deployment.result.environmentState({deploymentResult: opt_data.deploymentResult, showDetailsLinkAlways: true, isLatestResult: true}) + '</td><td>' + bamboo.feature.deployment.result.finishedTimeOrDuration(soy.$$augmentMap(opt_data.deploymentResult, {hideLink: true})) + '</td>';
  } else {
    output += '<td colspan="3">&nbsp;</td><td colspan="2" class="empty-text">' + soy.$$escapeHtml("Never deployed") + '</td>';
  }
  output += '<td>' + ((opt_data.environment.operations.allowedToExecute) ? ((opt_data.environment.operations.canExecute) ? '<a href="' + soy.$$escapeHtml("" + '/deploy/selectVersionForExecute.action?environmentId=' + opt_data.environment.id + '&returnUrl=' + opt_data.currentUrl) + '" title="' + soy.$$escapeHtml("Deploy") + '">' + widget.icons.fontIcon({type: 'deploy', text: "Deploy"}) + '</a>' : '<span class="operation-disabled">' + widget.icons.fontIcon({type: 'deploy', text: opt_data.environment.operations.cantExecuteReason, showTitle: true}) + '</span>') + ' ' : '') + ((opt_data.environment.operations.canEdit) ? widget.icons.auiFontLink({iconType: 'edit', relativeUrl: '/deploy/config/configureDeploymentProject.action?id=' + opt_data.environment.deploymentProjectId + '&environmentId=' + opt_data.environment.id + '&returnUrl=' + opt_data.currentUrl, text: "Edit environment"}) : '') + '</td>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.deployment.build.environment.soyTemplateName = 'bamboo.feature.deployment.build.environment';
}


bamboo.feature.deployment.build.relatedVersions = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.buildState == 'SUCCESS') {
    output += '<div class="related-versions"><h2>' + soy.$$escapeHtml("Included in deployment project") + '</h2>';
    var returnUrl__soy160 = '/browse/' + opt_data.planResultKey.key;
    var deploymentProjectWithEnvironmentStatusesList161 = opt_data.relatedDeployments;
    var deploymentProjectWithEnvironmentStatusesListLen161 = deploymentProjectWithEnvironmentStatusesList161.length;
    for (var deploymentProjectWithEnvironmentStatusesIndex161 = 0; deploymentProjectWithEnvironmentStatusesIndex161 < deploymentProjectWithEnvironmentStatusesListLen161; deploymentProjectWithEnvironmentStatusesIndex161++) {
      var deploymentProjectWithEnvironmentStatusesData161 = deploymentProjectWithEnvironmentStatusesList161[deploymentProjectWithEnvironmentStatusesIndex161];
      output += '<div class="related-version">';
      var deploymentProject__soy163 = deploymentProjectWithEnvironmentStatusesData161.deploymentProject;
      var relatedVersion__soy164 = deploymentProjectWithEnvironmentStatusesData161.relatedVersion;
      var futureVersion__soy165 = deploymentProjectWithEnvironmentStatusesData161.futureVersion;
      var futureVersionResult__soy166 = deploymentProjectWithEnvironmentStatusesData161.futureVersionResult;
      output += '<span class="project-name"><a href="' + soy.$$escapeHtml("" + '/deploy/viewDeploymentProjectEnvironments.action?id=' + deploymentProject__soy163.id) + '">' + soy.$$escapeHtml(deploymentProject__soy163.name) + '</a>' + ((relatedVersion__soy164) ? ' &rsaquo; ' + soy.$$escapeHtml("Release:") + ' <a href="' + soy.$$escapeHtml("" + '/deploy/viewDeploymentVersion.action?versionId=' + relatedVersion__soy164.id) + '">' + soy.$$escapeHtml(relatedVersion__soy164.name) + '</a>' : '') + '</span>';
      if (relatedVersion__soy164) {
        if (deploymentProjectWithEnvironmentStatusesData161.environmentStatuses && deploymentProjectWithEnvironmentStatusesData161.environmentStatuses.length > 0) {
          output += '<table class="aui"><thead><tr><th>' + soy.$$escapeHtml("Environment") + '</th><th>' + soy.$$escapeHtml("Status") + '</th><th></th><th>' + soy.$$escapeHtml("Actions") + '</th></tr></thead><tbody>';
          var environmentStatusList193 = deploymentProjectWithEnvironmentStatusesData161.environmentStatuses;
          var environmentStatusListLen193 = environmentStatusList193.length;
          for (var environmentStatusIndex193 = 0; environmentStatusIndex193 < environmentStatusListLen193; environmentStatusIndex193++) {
            var environmentStatusData193 = environmentStatusList193[environmentStatusIndex193];
            var environment__soy194 = environmentStatusData193.environment;
            var deploymentResult__soy195 = environmentStatusData193.deploymentResult;
            output += '<tr><td><a href="' + soy.$$escapeHtml("" + '/deploy/viewEnvironment.action?id=' + environment__soy194.id) + '">' + soy.$$escapeHtml(environment__soy194.name) + '</a></td><td>' + bamboo.feature.deployment.result.versionStatusLozenge({environmentStatus: environmentStatusData193, deploymentVersion: relatedVersion__soy164, neverDeployedText: "not deployed yet"}) + ((environmentStatusData193.deploymentResult && ! environmentStatusData193.latestResult) ? bamboo.feature.deployment.result.detailsLink({deploymentResult: environmentStatusData193.deploymentResult}) : '') + '</td><td>' + ((environmentStatusData193.latestResult) ? bamboo.feature.deployment.result.nowAt({deploymentResult: environmentStatusData193.latestResult}) : '') + '</td><td class="operations">' + ((environmentStatusData193.environment.operations.allowedToExecute && environmentStatusData193.environment.operations.canExecute) ? (! environmentStatusData193.deploymentResult && ! environmentStatusData193.latestResult || environmentStatusData193.deploymentResult && ! environmentStatusData193.latestResult && environmentStatusData193.deploymentResult.deploymentState == 'FAILED' || environmentStatusData193.latestResult && ! environmentStatusData193.latestResult.deploymentVersion || environmentStatusData193.latestResult && environmentStatusData193.latestResult.deploymentVersion.creationDate - relatedVersion__soy164.creationDate < 0) ? '<a href="' + soy.$$escapeHtml("" + '/deploy/selectVersionForExecute.action?environmentId=' + environment__soy194.id) + soy.$$escapeHtml('&versionId=' + relatedVersion__soy164.id) + soy.$$escapeHtml('&returnUrl=' + returnUrl__soy160) + '">' + widget.icons.fontIcon({type: 'deploy', text: "deploy now"}) + '</a>' : '' : '') + '</td></tr>';
          }
          output += '</tbody></table>';
        } else {
          output += '<p>' + soy.$$escapeHtml("No environments found.") + '</p>';
        }
      } else if (futureVersion__soy165) {
        output += '<p>' + soy.$$escapeHtml("No release with the artifacts of this build exists.") + '<br/>' + soy.$$escapeHtml("The next release containing these commits is release") + ' <a href="' + soy.$$escapeHtml("" + '/deploy/viewDeploymentVersion.action?versionId=' + futureVersion__soy165.id) + '">' + soy.$$escapeHtml(futureVersion__soy165.name) + '</a>' + ((futureVersionResult__soy166) ? ' ' + soy.$$escapeHtml("created from build") + ' ' + widget.buildresult.resultStatusAndLink({resultSummary: futureVersionResult__soy166}) : '');
      } else {
        output += '<p>' + soy.$$escapeHtml("No release with the artifacts of this build exists yet.") + '</p>' + ((deploymentProject__soy163.operations.allowedToCreateVersion) ? aui.buttons.button({tagName: 'a', text: "Create release", id: 'create-new-version-' + deploymentProject__soy163.id, extraAttributes: {href: "" + '/deploy/createDeploymentVersion.action?deploymentProjectId=' + deploymentProject__soy163.id + '&planKey=' + opt_data.planResultKey.planKey.key + '&buildNumber=' + opt_data.planResultKey.buildNumber + '&returnUrl=' + returnUrl__soy160, title: "Create a new release version"}, extraClasses: 'brs-create-version-button'}) : '');
      }
      output += '</div>';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.deployment.build.relatedVersions.soyTemplateName = 'bamboo.feature.deployment.build.relatedVersions';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:related-plan', location = '/feature/deployment/build/related-plan.soy' */
// This file was automatically generated from related-plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.deployment.build.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.deployment == 'undefined') { bamboo.feature.deployment = {}; }
if (typeof bamboo.feature.deployment.build == 'undefined') { bamboo.feature.deployment.build = {}; }


bamboo.feature.deployment.build.showRelatedPlanDetails = function(opt_data, opt_ignored) {
  var output = '<dl class="details-list"><dt>' + soy.$$escapeHtml("Source build plan") + '</dt><dd>' + ((opt_data.relatedPlan) ? widget.plan.renderPlanNameLink({plan: opt_data.relatedPlan}) : soy.$$escapeHtml("No plan is linked to this project. Update the project configuration before deploying a release.")) + '</dd>';
  if (opt_data.relatedPlan) {
    output += '<dt class="artifacts">' + soy.$$escapeHtml("Available artifacts") + '</dt><dd class="artifacts">';
    if (opt_data.deploymentProjectItems && opt_data.deploymentProjectItems.length) {
      var itemList20 = opt_data.deploymentProjectItems;
      var itemListLen20 = itemList20.length;
      for (var itemIndex20 = 0; itemIndex20 < itemListLen20; itemIndex20++) {
        var itemData20 = itemList20[itemIndex20];
        output += soy.$$escapeHtml(itemData20.name) + ((! (itemIndex20 == itemListLen20 - 1) && opt_data.deploymentProjectItems.length > 1) ? ', ' : '');
      }
    } else {
      var emptyText__soy27 = '' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("No \x3cstrong\x3eshared\x3c/strong\x3e artifacts found for related plan. Please \x3ca href\x3d\x22{0}\x22\x3econfigure the build plan\x3c/a\x3e to publish shared artifacts.",typeof ("" + '/browse/' + opt_data.relatedPlan.planKey.key + '/config') === 'number' ? "" + '/browse/' + opt_data.relatedPlan.planKey.key + '/config' : soy.$$escapeHtml("" + '/browse/' + opt_data.relatedPlan.planKey.key + '/config'))));
      output += aui.message.warning({content: emptyText__soy27});
    }
    output += '</dd>';
  }
  output += '</dl>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.deployment.build.showRelatedPlanDetails.soyTemplateName = 'bamboo.feature.deployment.build.showRelatedPlanDetails';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-expiry', location = '/feature/expiry/expiry.js' */
define('feature/expiry-checkbox-tree', [
    'jquery',
    'underscore',
    'brace'
], function(
    $,
    _,
    Brace
) {

    'use strict';

    var ExpiryCheckboxTree = Brace.View.extend({
        $block: null,
        $triggers: [],
        initialize: function(options) {
            this.params = options.params || {};

            if (this.params.blockSelector) {
                this.$block = $(this.params.blockSelector);
            }

            var $parent = $(this.params.parentSelector),
                    $children = $(this.params.childrenSelector);

            this.$triggers = $children.add($parent);

            if ($parent.is(':checked')) {
                checkboxTree.cascadeToChildren($parent, $children, checkboxTree.DISABLE_CHILDREN_ON_PARENT_CHECKED);
            }

            $parent.on('change', _.bind(function() {
                checkboxTree.cascadeToChildren($parent, $children, checkboxTree.DISABLE_CHILDREN_ON_PARENT_CHECKED);
                this.changeBlockVisibility();
            }, this));

            $children.on('change', _.bind(this.changeBlockVisibility, this));

            this.changeBlockVisibility();
        },

        changeBlockVisibility: function() {
            if (!this.$block) {
                return;
            }

            var isBlockVisible = this.$triggers.is(':checked');
            this.$block.toggle(isBlockVisible);
        }
    });

    return ExpiryCheckboxTree;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-flag', location = 'src/js/aui/flag.js' */
("undefined"===typeof window?global:window).__6db1c5a3f4789789a8fb305e878b4d3a=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function g(a){var a=c.default.extend({},l,a),b,e=a,e=(0,m.default)('<div class="aui-flag"><div class="aui-message aui-message-{type} {type} {closeable} shadowed"><p class="title"><strong>{title}</strong></p>{body}<\!-- .aui-message --\></div></div>').fill({"body:html":e.body||"",closeable:"never"===e.close?"":"closeable",title:e.title||"",type:e.type}).toString();
b=(0,c.default)(e);b[0].close=function(){h(b)};"auto"===a.close?(j(b),b.find(".aui-message").addClass("aui-will-close"),setTimeout(function(){b[0].close()},n)):"manual"===a.close&&j(b);(0,c.default)("#"+i).find(".aui-flag").get().forEach(function(a){a.getAttribute("aria-hidden")==="true"&&(0,c.default)(a).remove()});a=(0,c.default)("#"+i);a.length||(a=(0,c.default)('<div id="'+i+'"></div>'),(0,c.default)("body").prepend(a));b.appendTo(a);(0,o.recomputeStyle)(b);return b.attr("aria-hidden","false")[0]}
function j(a){var b=(0,c.default)('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');b.click(function(){h(a)});b.keypress(function(b){if(b.which===k.default.ENTER||b.which===k.default.SPACE)h(a),b.preventDefault()});return a.find(".aui-message").append(b)[0]}function h(a){a=a.get(0);a.setAttribute("aria-hidden","true");a.dispatchEvent(new p.default("aui-flag-close",{bubbles:!0}));return a}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var c=d(__bd7207540b95ff683caa1d3c0bfcc3d7),
o=__5751b8a604ec61b53b208676ae78d41d,q=d(__65f46acd493e225a8705ab04389e284d),r=d(__9a668cbde1e182d8e721c23580356df2),k=d(__3f6f6650e96d80fefaaf71feed8f822b),m=d(__c4f1078a82b494cc09b37e0114acf4c9),p=d(__b4f5303c3f6b97d2fd503b5013ff8de7),n=5E3,i="aui-flag-container",l={body:"",close:"manual",title:"",type:"info"};(0,q.default)("aui/flag",g);(0,r.default)("flag",g);f.default=g;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-config-read-only', location = '/feature/config-read-only/config-read-only.js' */
define("feature/config-read-only",["jquery","marionette"],function(e,t){"use strict";return t.ItemView.extend({initialize:function(){this.$el.addClass("configReadOnly"),this.disableNodes(),window.MutationObserver&&(this.mutationObserver=new MutationObserver(this.disableNodes.bind(this)),this.mutationObserver.observe(this.el,{childList:!0,subtree:!0}))},disableNodes:function(){this.iterateThroughNodesWith(".aui-button, input, button, select, textarea",function(e){if(e.setAttribute("tabindex","-1"),e.setAttribute("aria-disabled","true"),e.readOnly=!0,!e.value)if("SELECT"===e.tagName){var t=document.createElement("option");t.value="Empty",t.text="Empty",t.selected="selected",e.add(t)}else e.classList.add("emptyInputField"),e.value="Empty"}),this.iterateThroughNodesWith('.aui-button, select, input[type="checkbox"], input[type="radio"]',function(e){e.disabled=!0}),this.iterateThroughNodesWith("a.aui-button",function(e){e.setAttribute("disabled","true"),e.removeAttribute("href"),e.classList.remove("toolbar-trigger"),e.addEventListener("click",function(e){e.stopPropagation()},!0)}),this.iterateThroughNodesWith(".ui-sortable",function(t){e(t).sortable("disable")}),this.iterateThroughNodesWith(".ui-droppable",function(t){e(t).droppable("disable")})},iterateThroughNodesWith:function(e,t){for(var i=this.el.querySelectorAll(e),n=0;n<i.length;n+=1)this.canDisableNode(i[n])&&t(i[n])},canDisableNode:function(e){var t=e.className,i=this.constructor.DO_NOT_DISABLE_CLASS_NAME;return!((" "+t+" ").indexOf(" "+i+" ")!==-1)}},{HIDE_CLASS_NAME:"hideInConfigReadOnlyMode",DISABLE_CLASS_NAME:"disableInConfigReadOnlyMode",DO_NOT_DISABLE_CLASS_NAME:"doNotDisableInConfigReadOnlyMode",makeReadOnly:function(e){return new this({el:e})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plan-config-delete-confirmation', location = '/feature/plan-config-delete-confirmation/plan-config-delete-confirmation.js' */
define("feature/plan-config-delete-confirmation",["jquery"],function(e){"use strict";return function(){var n=function(n){return function(t){t.preventDefault();var o=t.currentTarget,r=o.href,i=e(o).data();window.simpleDialogForm(null,r,600,500,"Confirm","ajax",function(e){return n(e,i)},null,i.title)}};e(document).on("click",".plan-delete-link",n(function(n,t){var o=n.plan,r=t.redirect;o&&(e("#job_"+o.key).remove(),e("#job-"+o.key).remove(),r&&(window.location.href=r))})).on("click",".stage-delete-link",n(function(n){var t=n.stage;t&&(e("#stage_"+t.id).remove(),e("#stage-"+t.id).remove())}))}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:history-js', location = '/bower/history.js/jquery.history.js' */
/**
 * History.js jQuery Adapter
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */

// Closure
(function(window,undefined){
	"use strict";

	// Localise Globals
	var
		History = window.History = window.History||{},
		jQuery = window.jQuery;

	// Check Existence
	if ( typeof History.Adapter !== 'undefined' ) {
		throw new Error('History.js Adapter has already been loaded...');
	}

	// Add the Adapter
	History.Adapter = {
		/**
		 * History.Adapter.bind(el,event,callback)
		 * @param {Element|string} el
		 * @param {string} event - custom and standard events
		 * @param {function} callback
		 * @return {void}
		 */
		bind: function(el,event,callback){
			jQuery(el).bind(event,callback);
		},

		/**
		 * History.Adapter.trigger(el,event)
		 * @param {Element|string} el
		 * @param {string} event - custom and standard events
		 * @param {Object=} extra - a object of extra event data (optional)
		 * @return {void}
		 */
		trigger: function(el,event,extra){
			jQuery(el).trigger(event,extra);
		},

		/**
		 * History.Adapter.extractEventData(key,event,extra)
		 * @param {string} key - key for the event data to extract
		 * @param {string} event - custom and standard events
		 * @param {Object=} extra - a object of extra event data (optional)
		 * @return {mixed}
		 */
		extractEventData: function(key,event,extra){
			// jQuery Native then jQuery Custom
			var result = (event && event.originalEvent && event.originalEvent[key]) || (extra && extra[key]) || undefined;

			// Return
			return result;
		},

		/**
		 * History.Adapter.onDomLoad(callback)
		 * @param {function} callback
		 * @return {void}
		 */
		onDomLoad: function(callback) {
			jQuery(callback);
		}
	};

	// Try and Initialise History
	if ( typeof History.init !== 'undefined' ) {
		History.init();
	}

})(window);

/**
 * History.js Core
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */

(function(window,undefined){
	"use strict";

	// ========================================================================
	// Initialise

	// Localise Globals
	var
		console = window.console||undefined, // Prevent a JSLint complain
		document = window.document, // Make sure we are using the correct document
		navigator = window.navigator, // Make sure we are using the correct navigator
		sessionStorage = window.sessionStorage||false, // sessionStorage
		setTimeout = window.setTimeout,
		clearTimeout = window.clearTimeout,
		setInterval = window.setInterval,
		clearInterval = window.clearInterval,
		JSON = window.JSON,
		alert = window.alert,
		History = window.History = window.History||{}, // Public History Object
		history = window.history; // Old History Object

	try {
		sessionStorage.setItem('TEST', '1');
		sessionStorage.removeItem('TEST');
	} catch(e) {
		sessionStorage = false;
	}

	// MooTools Compatibility
	JSON.stringify = JSON.stringify||JSON.encode;
	JSON.parse = JSON.parse||JSON.decode;

	// Check Existence
	if ( typeof History.init !== 'undefined' ) {
		throw new Error('History.js Core has already been loaded...');
	}

	// Initialise History
	History.init = function(options){
		// Check Load Status of Adapter
		if ( typeof History.Adapter === 'undefined' ) {
			return false;
		}

		// Check Load Status of Core
		if ( typeof History.initCore !== 'undefined' ) {
			History.initCore();
		}

		// Check Load Status of HTML4 Support
		if ( typeof History.initHtml4 !== 'undefined' ) {
			History.initHtml4();
		}

		// Return true
		return true;
	};


	// ========================================================================
	// Initialise Core

	// Initialise Core
	History.initCore = function(options){
		// Initialise
		if ( typeof History.initCore.initialized !== 'undefined' ) {
			// Already Loaded
			return false;
		}
		else {
			History.initCore.initialized = true;
		}


		// ====================================================================
		// Options

		/**
		 * History.options
		 * Configurable options
		 */
		History.options = History.options||{};

		/**
		 * History.options.hashChangeInterval
		 * How long should the interval be before hashchange checks
		 */
		History.options.hashChangeInterval = History.options.hashChangeInterval || 100;

		/**
		 * History.options.safariPollInterval
		 * How long should the interval be before safari poll checks
		 */
		History.options.safariPollInterval = History.options.safariPollInterval || 500;

		/**
		 * History.options.doubleCheckInterval
		 * How long should the interval be before we perform a double check
		 */
		History.options.doubleCheckInterval = History.options.doubleCheckInterval || 500;

		/**
		 * History.options.disableSuid
		 * Force History not to append suid
		 */
		History.options.disableSuid = History.options.disableSuid || false;

		/**
		 * History.options.storeInterval
		 * How long should we wait between store calls
		 */
		History.options.storeInterval = History.options.storeInterval || 1000;

		/**
		 * History.options.busyDelay
		 * How long should we wait between busy events
		 */
		History.options.busyDelay = History.options.busyDelay || 250;

		/**
		 * History.options.debug
		 * If true will enable debug messages to be logged
		 */
		History.options.debug = History.options.debug || false;

		/**
		 * History.options.initialTitle
		 * What is the title of the initial state
		 */
		History.options.initialTitle = History.options.initialTitle || document.title;

		/**
		 * History.options.html4Mode
		 * If true, will force HTMl4 mode (hashtags)
		 */
		History.options.html4Mode = History.options.html4Mode || false;

		/**
		 * History.options.delayInit
		 * Want to override default options and call init manually.
		 */
		History.options.delayInit = History.options.delayInit || false;


		// ====================================================================
		// Interval record

		/**
		 * History.intervalList
		 * List of intervals set, to be cleared when document is unloaded.
		 */
		History.intervalList = [];

		/**
		 * History.clearAllIntervals
		 * Clears all setInterval instances.
		 */
		History.clearAllIntervals = function(){
			var i, il = History.intervalList;
			if (typeof il !== "undefined" && il !== null) {
				for (i = 0; i < il.length; i++) {
					clearInterval(il[i]);
				}
				History.intervalList = null;
			}
		};


		// ====================================================================
		// Debug

		/**
		 * History.debug(message,...)
		 * Logs the passed arguments if debug enabled
		 */
		History.debug = function(){
			if ( (History.options.debug||false) ) {
				History.log.apply(History,arguments);
			}
		};

		/**
		 * History.log(message,...)
		 * Logs the passed arguments
		 */
		History.log = function(){
			// Prepare
			var
				consoleExists = !(typeof console === 'undefined' || typeof console.log === 'undefined' || typeof console.log.apply === 'undefined'),
				textarea = document.getElementById('log'),
				message,
				i,n,
				args,arg
				;

			// Write to Console
			if ( consoleExists ) {
				args = Array.prototype.slice.call(arguments);
				message = args.shift();
				if ( typeof console.debug !== 'undefined' ) {
					console.debug.apply(console,[message,args]);
				}
				else {
					console.log.apply(console,[message,args]);
				}
			}
			else {
				message = ("\n"+arguments[0]+"\n");
			}

			// Write to log
			for ( i=1,n=arguments.length; i<n; ++i ) {
				arg = arguments[i];
				if ( typeof arg === 'object' && typeof JSON !== 'undefined' ) {
					try {
						arg = JSON.stringify(arg);
					}
					catch ( Exception ) {
						// Recursive Object
					}
				}
				message += "\n"+arg+"\n";
			}

			// Textarea
			if ( textarea ) {
				textarea.value += message+"\n-----\n";
				textarea.scrollTop = textarea.scrollHeight - textarea.clientHeight;
			}
			// No Textarea, No Console
			else if ( !consoleExists ) {
				alert(message);
			}

			// Return true
			return true;
		};


		// ====================================================================
		// Emulated Status

		/**
		 * History.getInternetExplorerMajorVersion()
		 * Get's the major version of Internet Explorer
		 * @return {integer}
		 * @license Public Domain
		 * @author Benjamin Arthur Lupton <contact@balupton.com>
		 * @author James Padolsey <https://gist.github.com/527683>
		 */
		History.getInternetExplorerMajorVersion = function(){
			var result = History.getInternetExplorerMajorVersion.cached =
					(typeof History.getInternetExplorerMajorVersion.cached !== 'undefined')
				?	History.getInternetExplorerMajorVersion.cached
				:	(function(){
						var v = 3,
								div = document.createElement('div'),
								all = div.getElementsByTagName('i');
						while ( (div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->') && all[0] ) {}
						return (v > 4) ? v : false;
					})()
				;
			return result;
		};

		/**
		 * History.isInternetExplorer()
		 * Are we using Internet Explorer?
		 * @return {boolean}
		 * @license Public Domain
		 * @author Benjamin Arthur Lupton <contact@balupton.com>
		 */
		History.isInternetExplorer = function(){
			var result =
				History.isInternetExplorer.cached =
				(typeof History.isInternetExplorer.cached !== 'undefined')
					?	History.isInternetExplorer.cached
					:	Boolean(History.getInternetExplorerMajorVersion())
				;
			return result;
		};

		/**
		 * History.emulated
		 * Which features require emulating?
		 */

		if (History.options.html4Mode) {
			History.emulated = {
				pushState : true,
				hashChange: true
			};
		}

		else {

			History.emulated = {
				pushState: !Boolean(
					window.history && window.history.pushState && window.history.replaceState
					&& !(
						(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent) /* disable for versions of iOS before version 4.3 (8F190) */
						|| (/AppleWebKit\/5([0-2]|3[0-2])/i).test(navigator.userAgent) /* disable for the mercury iOS browser, or at least older versions of the webkit engine */
					)
				),
				hashChange: Boolean(
					!(('onhashchange' in window) || ('onhashchange' in document))
					||
					(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8)
				)
			};
		}

		/**
		 * History.enabled
		 * Is History enabled?
		 */
		History.enabled = !History.emulated.pushState;

		/**
		 * History.bugs
		 * Which bugs are present
		 */
		History.bugs = {
			/**
			 * Safari 5 and Safari iOS 4 fail to return to the correct state once a hash is replaced by a `replaceState` call
			 * https://bugs.webkit.org/show_bug.cgi?id=56249
			 */
			setHash: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),

			/**
			 * Safari 5 and Safari iOS 4 sometimes fail to apply the state change under busy conditions
			 * https://bugs.webkit.org/show_bug.cgi?id=42940
			 */
			safariPoll: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),

			/**
			 * MSIE 6 and 7 sometimes do not apply a hash even it was told to (requiring a second call to the apply function)
			 */
			ieDoubleCheck: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8),

			/**
			 * MSIE 6 requires the entire hash to be encoded for the hashes to trigger the onHashChange event
			 */
			hashEscape: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 7)
		};

		/**
		 * History.isEmptyObject(obj)
		 * Checks to see if the Object is Empty
		 * @param {Object} obj
		 * @return {boolean}
		 */
		History.isEmptyObject = function(obj) {
			for ( var name in obj ) {
				if ( obj.hasOwnProperty(name) ) {
					return false;
				}
			}
			return true;
		};

		/**
		 * History.cloneObject(obj)
		 * Clones a object and eliminate all references to the original contexts
		 * @param {Object} obj
		 * @return {Object}
		 */
		History.cloneObject = function(obj) {
			var hash,newObj;
			if ( obj ) {
				hash = JSON.stringify(obj);
				newObj = JSON.parse(hash);
			}
			else {
				newObj = {};
			}
			return newObj;
		};


		// ====================================================================
		// URL Helpers

		/**
		 * History.getRootUrl()
		 * Turns "http://mysite.com/dir/page.html?asd" into "http://mysite.com"
		 * @return {String} rootUrl
		 */
		History.getRootUrl = function(){
			// Create
			var rootUrl = document.location.protocol+'//'+(document.location.hostname||document.location.host);
			if ( document.location.port||false ) {
				rootUrl += ':'+document.location.port;
			}
			rootUrl += '/';

			// Return
			return rootUrl;
		};

		/**
		 * History.getBaseHref()
		 * Fetches the `href` attribute of the `<base href="...">` element if it exists
		 * @return {String} baseHref
		 */
		History.getBaseHref = function(){
			// Create
			var
				baseElements = document.getElementsByTagName('base'),
				baseElement = null,
				baseHref = '';

			// Test for Base Element
			if ( baseElements.length === 1 ) {
				// Prepare for Base Element
				baseElement = baseElements[0];
				baseHref = baseElement.href.replace(/[^\/]+$/,'');
			}

			// Adjust trailing slash
			baseHref = baseHref.replace(/\/+$/,'');
			if ( baseHref ) baseHref += '/';

			// Return
			return baseHref;
		};

		/**
		 * History.getBaseUrl()
		 * Fetches the baseHref or basePageUrl or rootUrl (whichever one exists first)
		 * @return {String} baseUrl
		 */
		History.getBaseUrl = function(){
			// Create
			var baseUrl = History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();

			// Return
			return baseUrl;
		};

		/**
		 * History.getPageUrl()
		 * Fetches the URL of the current page
		 * @return {String} pageUrl
		 */
		History.getPageUrl = function(){
			// Fetch
			var
				State = History.getState(false,false),
				stateUrl = (State||{}).url||History.getLocationHref(),
				pageUrl;

			// Create
			pageUrl = stateUrl.replace(/\/+$/,'').replace(/[^\/]+$/,function(part,index,string){
				return (/\./).test(part) ? part : part+'/';
			});

			// Return
			return pageUrl;
		};

		/**
		 * History.getBasePageUrl()
		 * Fetches the Url of the directory of the current page
		 * @return {String} basePageUrl
		 */
		History.getBasePageUrl = function(){
			// Create
			var basePageUrl = (History.getLocationHref()).replace(/[#\?].*/,'').replace(/[^\/]+$/,function(part,index,string){
				return (/[^\/]$/).test(part) ? '' : part;
			}).replace(/\/+$/,'')+'/';

			// Return
			return basePageUrl;
		};

		/**
		 * History.getFullUrl(url)
		 * Ensures that we have an absolute URL and not a relative URL
		 * @param {string} url
		 * @param {Boolean} allowBaseHref
		 * @return {string} fullUrl
		 */
		History.getFullUrl = function(url,allowBaseHref){
			// Prepare
			var fullUrl = url, firstChar = url.substring(0,1);
			allowBaseHref = (typeof allowBaseHref === 'undefined') ? true : allowBaseHref;

			// Check
			if ( /[a-z]+\:\/\//.test(url) ) {
				// Full URL
			}
			else if ( firstChar === '/' ) {
				// Root URL
				fullUrl = History.getRootUrl()+url.replace(/^\/+/,'');
			}
			else if ( firstChar === '#' ) {
				// Anchor URL
				fullUrl = History.getPageUrl().replace(/#.*/,'')+url;
			}
			else if ( firstChar === '?' ) {
				// Query URL
				fullUrl = History.getPageUrl().replace(/[\?#].*/,'')+url;
			}
			else {
				// Relative URL
				if ( allowBaseHref ) {
					fullUrl = History.getBaseUrl()+url.replace(/^(\.\/)+/,'');
				} else {
					fullUrl = History.getBasePageUrl()+url.replace(/^(\.\/)+/,'');
				}
				// We have an if condition above as we do not want hashes
				// which are relative to the baseHref in our URLs
				// as if the baseHref changes, then all our bookmarks
				// would now point to different locations
				// whereas the basePageUrl will always stay the same
			}

			// Return
			return fullUrl.replace(/\#$/,'');
		};

		/**
		 * History.getShortUrl(url)
		 * Ensures that we have a relative URL and not a absolute URL
		 * @param {string} url
		 * @return {string} url
		 */
		History.getShortUrl = function(url){
			// Prepare
			var shortUrl = url, baseUrl = History.getBaseUrl(), rootUrl = History.getRootUrl();

			// Trim baseUrl
			if ( History.emulated.pushState ) {
				// We are in a if statement as when pushState is not emulated
				// The actual url these short urls are relative to can change
				// So within the same session, we the url may end up somewhere different
				shortUrl = shortUrl.replace(baseUrl,'');
			}

			// Trim rootUrl
			shortUrl = shortUrl.replace(rootUrl,'/');

			// Ensure we can still detect it as a state
			if ( History.isTraditionalAnchor(shortUrl) ) {
				shortUrl = './'+shortUrl;
			}

			// Clean It
			shortUrl = shortUrl.replace(/^(\.\/)+/g,'./').replace(/\#$/,'');

			// Return
			return shortUrl;
		};

		/**
		 * History.getLocationHref(document)
		 * Returns a normalized version of document.location.href
		 * accounting for browser inconsistencies, etc.
		 *
		 * This URL will be URI-encoded and will include the hash
		 *
		 * @param {object} document
		 * @return {string} url
		 */
		History.getLocationHref = function(doc) {
			doc = doc || document;

			// most of the time, this will be true
			if (doc.URL === doc.location.href)
				return doc.location.href;

			// some versions of webkit URI-decode document.location.href
			// but they leave document.URL in an encoded state
			if (doc.location.href === decodeURIComponent(doc.URL))
				return doc.URL;

			// FF 3.6 only updates document.URL when a page is reloaded
			// document.location.href is updated correctly
			if (doc.location.hash && decodeURIComponent(doc.location.href.replace(/^[^#]+/, "")) === doc.location.hash)
				return doc.location.href;

			if (doc.URL.indexOf('#') == -1 && doc.location.href.indexOf('#') != -1)
				return doc.location.href;
			
			return doc.URL || doc.location.href;
		};


		// ====================================================================
		// State Storage

		/**
		 * History.store
		 * The store for all session specific data
		 */
		History.store = {};

		/**
		 * History.idToState
		 * 1-1: State ID to State Object
		 */
		History.idToState = History.idToState||{};

		/**
		 * History.stateToId
		 * 1-1: State String to State ID
		 */
		History.stateToId = History.stateToId||{};

		/**
		 * History.urlToId
		 * 1-1: State URL to State ID
		 */
		History.urlToId = History.urlToId||{};

		/**
		 * History.storedStates
		 * Store the states in an array
		 */
		History.storedStates = History.storedStates||[];

		/**
		 * History.savedStates
		 * Saved the states in an array
		 */
		History.savedStates = History.savedStates||[];

		/**
		 * History.noramlizeStore()
		 * Noramlize the store by adding necessary values
		 */
		History.normalizeStore = function(){
			History.store.idToState = History.store.idToState||{};
			History.store.urlToId = History.store.urlToId||{};
			History.store.stateToId = History.store.stateToId||{};
		};

		/**
		 * History.getState()
		 * Get an object containing the data, title and url of the current state
		 * @param {Boolean} friendly
		 * @param {Boolean} create
		 * @return {Object} State
		 */
		History.getState = function(friendly,create){
			// Prepare
			if ( typeof friendly === 'undefined' ) { friendly = true; }
			if ( typeof create === 'undefined' ) { create = true; }

			// Fetch
			var State = History.getLastSavedState();

			// Create
			if ( !State && create ) {
				State = History.createStateObject();
			}

			// Adjust
			if ( friendly ) {
				State = History.cloneObject(State);
				State.url = State.cleanUrl||State.url;
			}

			// Return
			return State;
		};

		/**
		 * History.getIdByState(State)
		 * Gets a ID for a State
		 * @param {State} newState
		 * @return {String} id
		 */
		History.getIdByState = function(newState){

			// Fetch ID
			var id = History.extractId(newState.url),
				str;

			if ( !id ) {
				// Find ID via State String
				str = History.getStateString(newState);
				if ( typeof History.stateToId[str] !== 'undefined' ) {
					id = History.stateToId[str];
				}
				else if ( typeof History.store.stateToId[str] !== 'undefined' ) {
					id = History.store.stateToId[str];
				}
				else {
					// Generate a new ID
					while ( true ) {
						id = (new Date()).getTime() + String(Math.random()).replace(/\D/g,'');
						if ( typeof History.idToState[id] === 'undefined' && typeof History.store.idToState[id] === 'undefined' ) {
							break;
						}
					}

					// Apply the new State to the ID
					History.stateToId[str] = id;
					History.idToState[id] = newState;
				}
			}

			// Return ID
			return id;
		};

		/**
		 * History.normalizeState(State)
		 * Expands a State Object
		 * @param {object} State
		 * @return {object}
		 */
		History.normalizeState = function(oldState){
			// Variables
			var newState, dataNotEmpty;

			// Prepare
			if ( !oldState || (typeof oldState !== 'object') ) {
				oldState = {};
			}

			// Check
			if ( typeof oldState.normalized !== 'undefined' ) {
				return oldState;
			}

			// Adjust
			if ( !oldState.data || (typeof oldState.data !== 'object') ) {
				oldState.data = {};
			}

			// ----------------------------------------------------------------

			// Create
			newState = {};
			newState.normalized = true;
			newState.title = oldState.title||'';
			newState.url = History.getFullUrl(oldState.url?oldState.url:(History.getLocationHref()));
			newState.hash = History.getShortUrl(newState.url);
			newState.data = History.cloneObject(oldState.data);

			// Fetch ID
			newState.id = History.getIdByState(newState);

			// ----------------------------------------------------------------

			// Clean the URL
			newState.cleanUrl = newState.url.replace(/\??\&_suid.*/,'');
			newState.url = newState.cleanUrl;

			// Check to see if we have more than just a url
			dataNotEmpty = !History.isEmptyObject(newState.data);

			// Apply
			if ( (newState.title || dataNotEmpty) && History.options.disableSuid !== true ) {
				// Add ID to Hash
				newState.hash = History.getShortUrl(newState.url).replace(/\??\&_suid.*/,'');
				if ( !/\?/.test(newState.hash) ) {
					newState.hash += '?';
				}
				newState.hash += '&_suid='+newState.id;
			}

			// Create the Hashed URL
			newState.hashedUrl = History.getFullUrl(newState.hash);

			// ----------------------------------------------------------------

			// Update the URL if we have a duplicate
			if ( (History.emulated.pushState || History.bugs.safariPoll) && History.hasUrlDuplicate(newState) ) {
				newState.url = newState.hashedUrl;
			}

			// ----------------------------------------------------------------

			// Return
			return newState;
		};

		/**
		 * History.createStateObject(data,title,url)
		 * Creates a object based on the data, title and url state params
		 * @param {object} data
		 * @param {string} title
		 * @param {string} url
		 * @return {object}
		 */
		History.createStateObject = function(data,title,url){
			// Hashify
			var State = {
				'data': data,
				'title': title,
				'url': url
			};

			// Expand the State
			State = History.normalizeState(State);

			// Return object
			return State;
		};

		/**
		 * History.getStateById(id)
		 * Get a state by it's UID
		 * @param {String} id
		 */
		History.getStateById = function(id){
			// Prepare
			id = String(id);

			// Retrieve
			var State = History.idToState[id] || History.store.idToState[id] || undefined;

			// Return State
			return State;
		};

		/**
		 * Get a State's String
		 * @param {State} passedState
		 */
		History.getStateString = function(passedState){
			// Prepare
			var State, cleanedState, str;

			// Fetch
			State = History.normalizeState(passedState);

			// Clean
			cleanedState = {
				data: State.data,
				title: passedState.title,
				url: passedState.url
			};

			// Fetch
			str = JSON.stringify(cleanedState);

			// Return
			return str;
		};

		/**
		 * Get a State's ID
		 * @param {State} passedState
		 * @return {String} id
		 */
		History.getStateId = function(passedState){
			// Prepare
			var State, id;

			// Fetch
			State = History.normalizeState(passedState);

			// Fetch
			id = State.id;

			// Return
			return id;
		};

		/**
		 * History.getHashByState(State)
		 * Creates a Hash for the State Object
		 * @param {State} passedState
		 * @return {String} hash
		 */
		History.getHashByState = function(passedState){
			// Prepare
			var State, hash;

			// Fetch
			State = History.normalizeState(passedState);

			// Hash
			hash = State.hash;

			// Return
			return hash;
		};

		/**
		 * History.extractId(url_or_hash)
		 * Get a State ID by it's URL or Hash
		 * @param {string} url_or_hash
		 * @return {string} id
		 */
		History.extractId = function ( url_or_hash ) {
			// Prepare
			var id,parts,url, tmp;

			// Extract
			
			// If the URL has a #, use the id from before the #
			if (url_or_hash.indexOf('#') != -1)
			{
				tmp = url_or_hash.split("#")[0];
			}
			else
			{
				tmp = url_or_hash;
			}
			
			parts = /(.*)\&_suid=([0-9]+)$/.exec(tmp);
			url = parts ? (parts[1]||url_or_hash) : url_or_hash;
			id = parts ? String(parts[2]||'') : '';

			// Return
			return id||false;
		};

		/**
		 * History.isTraditionalAnchor
		 * Checks to see if the url is a traditional anchor or not
		 * @param {String} url_or_hash
		 * @return {Boolean}
		 */
		History.isTraditionalAnchor = function(url_or_hash){
			// Check
			var isTraditional = !(/[\/\?\.]/.test(url_or_hash));

			// Return
			return isTraditional;
		};

		/**
		 * History.extractState
		 * Get a State by it's URL or Hash
		 * @param {String} url_or_hash
		 * @return {State|null}
		 */
		History.extractState = function(url_or_hash,create){
			// Prepare
			var State = null, id, url;
			create = create||false;

			// Fetch SUID
			id = History.extractId(url_or_hash);
			if ( id ) {
				State = History.getStateById(id);
			}

			// Fetch SUID returned no State
			if ( !State ) {
				// Fetch URL
				url = History.getFullUrl(url_or_hash);

				// Check URL
				id = History.getIdByUrl(url)||false;
				if ( id ) {
					State = History.getStateById(id);
				}

				// Create State
				if ( !State && create && !History.isTraditionalAnchor(url_or_hash) ) {
					State = History.createStateObject(null,null,url);
				}
			}

			// Return
			return State;
		};

		/**
		 * History.getIdByUrl()
		 * Get a State ID by a State URL
		 */
		History.getIdByUrl = function(url){
			// Fetch
			var id = History.urlToId[url] || History.store.urlToId[url] || undefined;

			// Return
			return id;
		};

		/**
		 * History.getLastSavedState()
		 * Get an object containing the data, title and url of the current state
		 * @return {Object} State
		 */
		History.getLastSavedState = function(){
			return History.savedStates[History.savedStates.length-1]||undefined;
		};

		/**
		 * History.getLastStoredState()
		 * Get an object containing the data, title and url of the current state
		 * @return {Object} State
		 */
		History.getLastStoredState = function(){
			return History.storedStates[History.storedStates.length-1]||undefined;
		};

		/**
		 * History.hasUrlDuplicate
		 * Checks if a Url will have a url conflict
		 * @param {Object} newState
		 * @return {Boolean} hasDuplicate
		 */
		History.hasUrlDuplicate = function(newState) {
			// Prepare
			var hasDuplicate = false,
				oldState;

			// Fetch
			oldState = History.extractState(newState.url);

			// Check
			hasDuplicate = oldState && oldState.id !== newState.id;

			// Return
			return hasDuplicate;
		};

		/**
		 * History.storeState
		 * Store a State
		 * @param {Object} newState
		 * @return {Object} newState
		 */
		History.storeState = function(newState){
			// Store the State
			History.urlToId[newState.url] = newState.id;

			// Push the State
			History.storedStates.push(History.cloneObject(newState));

			// Return newState
			return newState;
		};

		/**
		 * History.isLastSavedState(newState)
		 * Tests to see if the state is the last state
		 * @param {Object} newState
		 * @return {boolean} isLast
		 */
		History.isLastSavedState = function(newState){
			// Prepare
			var isLast = false,
				newId, oldState, oldId;

			// Check
			if ( History.savedStates.length ) {
				newId = newState.id;
				oldState = History.getLastSavedState();
				oldId = oldState.id;

				// Check
				isLast = (newId === oldId);
			}

			// Return
			return isLast;
		};

		/**
		 * History.saveState
		 * Push a State
		 * @param {Object} newState
		 * @return {boolean} changed
		 */
		History.saveState = function(newState){
			// Check Hash
			if ( History.isLastSavedState(newState) ) {
				return false;
			}

			// Push the State
			History.savedStates.push(History.cloneObject(newState));

			// Return true
			return true;
		};

		/**
		 * History.getStateByIndex()
		 * Gets a state by the index
		 * @param {integer} index
		 * @return {Object}
		 */
		History.getStateByIndex = function(index){
			// Prepare
			var State = null;

			// Handle
			if ( typeof index === 'undefined' ) {
				// Get the last inserted
				State = History.savedStates[History.savedStates.length-1];
			}
			else if ( index < 0 ) {
				// Get from the end
				State = History.savedStates[History.savedStates.length+index];
			}
			else {
				// Get from the beginning
				State = History.savedStates[index];
			}

			// Return State
			return State;
		};
		
		/**
		 * History.getCurrentIndex()
		 * Gets the current index
		 * @return (integer)
		*/
		History.getCurrentIndex = function(){
			// Prepare
			var index = null;
			
			// No states saved
			if(History.savedStates.length < 1) {
				index = 0;
			}
			else {
				index = History.savedStates.length-1;
			}
			return index;
		};

		// ====================================================================
		// Hash Helpers

		/**
		 * History.getHash()
		 * @param {Location=} location
		 * Gets the current document hash
		 * Note: unlike location.hash, this is guaranteed to return the escaped hash in all browsers
		 * @return {string}
		 */
		History.getHash = function(doc){
			var url = History.getLocationHref(doc),
				hash;
			hash = History.getHashByUrl(url);
			return hash;
		};

		/**
		 * History.unescapeHash()
		 * normalize and Unescape a Hash
		 * @param {String} hash
		 * @return {string}
		 */
		History.unescapeHash = function(hash){
			// Prepare
			var result = History.normalizeHash(hash);

			// Unescape hash
			result = decodeURIComponent(result);

			// Return result
			return result;
		};

		/**
		 * History.normalizeHash()
		 * normalize a hash across browsers
		 * @return {string}
		 */
		History.normalizeHash = function(hash){
			// Prepare
			var result = hash.replace(/[^#]*#/,'').replace(/#.*/, '');

			// Return result
			return result;
		};

		/**
		 * History.setHash(hash)
		 * Sets the document hash
		 * @param {string} hash
		 * @return {History}
		 */
		History.setHash = function(hash,queue){
			// Prepare
			var State, pageUrl;

			// Handle Queueing
			if ( queue !== false && History.busy() ) {
				// Wait + Push to Queue
				//History.debug('History.setHash: we must wait', arguments);
				History.pushQueue({
					scope: History,
					callback: History.setHash,
					args: arguments,
					queue: queue
				});
				return false;
			}

			// Log
			//History.debug('History.setHash: called',hash);

			// Make Busy + Continue
			History.busy(true);

			// Check if hash is a state
			State = History.extractState(hash,true);
			if ( State && !History.emulated.pushState ) {
				// Hash is a state so skip the setHash
				//History.debug('History.setHash: Hash is a state so skipping the hash set with a direct pushState call',arguments);

				// PushState
				History.pushState(State.data,State.title,State.url,false);
			}
			else if ( History.getHash() !== hash ) {
				// Hash is a proper hash, so apply it

				// Handle browser bugs
				if ( History.bugs.setHash ) {
					// Fix Safari Bug https://bugs.webkit.org/show_bug.cgi?id=56249

					// Fetch the base page
					pageUrl = History.getPageUrl();

					// Safari hash apply
					History.pushState(null,null,pageUrl+'#'+hash,false);
				}
				else {
					// Normal hash apply
					document.location.hash = hash;
				}
			}

			// Chain
			return History;
		};

		/**
		 * History.escape()
		 * normalize and Escape a Hash
		 * @return {string}
		 */
		History.escapeHash = function(hash){
			// Prepare
			var result = History.normalizeHash(hash);

			// Escape hash
			result = window.encodeURIComponent(result);

			// IE6 Escape Bug
			if ( !History.bugs.hashEscape ) {
				// Restore common parts
				result = result
					.replace(/\%21/g,'!')
					.replace(/\%26/g,'&')
					.replace(/\%3D/g,'=')
					.replace(/\%3F/g,'?');
			}

			// Return result
			return result;
		};

		/**
		 * History.getHashByUrl(url)
		 * Extracts the Hash from a URL
		 * @param {string} url
		 * @return {string} url
		 */
		History.getHashByUrl = function(url){
			// Extract the hash
			var hash = String(url)
				.replace(/([^#]*)#?([^#]*)#?(.*)/, '$2')
				;

			// Unescape hash
			hash = History.unescapeHash(hash);

			// Return hash
			return hash;
		};

		/**
		 * History.setTitle(title)
		 * Applies the title to the document
		 * @param {State} newState
		 * @return {Boolean}
		 */
		History.setTitle = function(newState){
			// Prepare
			var title = newState.title,
				firstState;

			// Initial
			if ( !title ) {
				firstState = History.getStateByIndex(0);
				if ( firstState && firstState.url === newState.url ) {
					title = firstState.title||History.options.initialTitle;
				}
			}

			// Apply
			try {
				document.getElementsByTagName('title')[0].innerHTML = title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');
			}
			catch ( Exception ) { }
			document.title = title;

			// Chain
			return History;
		};


		// ====================================================================
		// Queueing

		/**
		 * History.queues
		 * The list of queues to use
		 * First In, First Out
		 */
		History.queues = [];

		/**
		 * History.busy(value)
		 * @param {boolean} value [optional]
		 * @return {boolean} busy
		 */
		History.busy = function(value){
			// Apply
			if ( typeof value !== 'undefined' ) {
				//History.debug('History.busy: changing ['+(History.busy.flag||false)+'] to ['+(value||false)+']', History.queues.length);
				History.busy.flag = value;
			}
			// Default
			else if ( typeof History.busy.flag === 'undefined' ) {
				History.busy.flag = false;
			}

			// Queue
			if ( !History.busy.flag ) {
				// Execute the next item in the queue
				clearTimeout(History.busy.timeout);
				var fireNext = function(){
					var i, queue, item;
					if ( History.busy.flag ) return;
					for ( i=History.queues.length-1; i >= 0; --i ) {
						queue = History.queues[i];
						if ( queue.length === 0 ) continue;
						item = queue.shift();
						History.fireQueueItem(item);
						History.busy.timeout = setTimeout(fireNext,History.options.busyDelay);
					}
				};
				History.busy.timeout = setTimeout(fireNext,History.options.busyDelay);
			}

			// Return
			return History.busy.flag;
		};

		/**
		 * History.busy.flag
		 */
		History.busy.flag = false;

		/**
		 * History.fireQueueItem(item)
		 * Fire a Queue Item
		 * @param {Object} item
		 * @return {Mixed} result
		 */
		History.fireQueueItem = function(item){
			return item.callback.apply(item.scope||History,item.args||[]);
		};

		/**
		 * History.pushQueue(callback,args)
		 * Add an item to the queue
		 * @param {Object} item [scope,callback,args,queue]
		 */
		History.pushQueue = function(item){
			// Prepare the queue
			History.queues[item.queue||0] = History.queues[item.queue||0]||[];

			// Add to the queue
			History.queues[item.queue||0].push(item);

			// Chain
			return History;
		};

		/**
		 * History.queue (item,queue), (func,queue), (func), (item)
		 * Either firs the item now if not busy, or adds it to the queue
		 */
		History.queue = function(item,queue){
			// Prepare
			if ( typeof item === 'function' ) {
				item = {
					callback: item
				};
			}
			if ( typeof queue !== 'undefined' ) {
				item.queue = queue;
			}

			// Handle
			if ( History.busy() ) {
				History.pushQueue(item);
			} else {
				History.fireQueueItem(item);
			}

			// Chain
			return History;
		};

		/**
		 * History.clearQueue()
		 * Clears the Queue
		 */
		History.clearQueue = function(){
			History.busy.flag = false;
			History.queues = [];
			return History;
		};


		// ====================================================================
		// IE Bug Fix

		/**
		 * History.stateChanged
		 * States whether or not the state has changed since the last double check was initialised
		 */
		History.stateChanged = false;

		/**
		 * History.doubleChecker
		 * Contains the timeout used for the double checks
		 */
		History.doubleChecker = false;

		/**
		 * History.doubleCheckComplete()
		 * Complete a double check
		 * @return {History}
		 */
		History.doubleCheckComplete = function(){
			// Update
			History.stateChanged = true;

			// Clear
			History.doubleCheckClear();

			// Chain
			return History;
		};

		/**
		 * History.doubleCheckClear()
		 * Clear a double check
		 * @return {History}
		 */
		History.doubleCheckClear = function(){
			// Clear
			if ( History.doubleChecker ) {
				clearTimeout(History.doubleChecker);
				History.doubleChecker = false;
			}

			// Chain
			return History;
		};

		/**
		 * History.doubleCheck()
		 * Create a double check
		 * @return {History}
		 */
		History.doubleCheck = function(tryAgain){
			// Reset
			History.stateChanged = false;
			History.doubleCheckClear();

			// Fix IE6,IE7 bug where calling history.back or history.forward does not actually change the hash (whereas doing it manually does)
			// Fix Safari 5 bug where sometimes the state does not change: https://bugs.webkit.org/show_bug.cgi?id=42940
			if ( History.bugs.ieDoubleCheck ) {
				// Apply Check
				History.doubleChecker = setTimeout(
					function(){
						History.doubleCheckClear();
						if ( !History.stateChanged ) {
							//History.debug('History.doubleCheck: State has not yet changed, trying again', arguments);
							// Re-Attempt
							tryAgain();
						}
						return true;
					},
					History.options.doubleCheckInterval
				);
			}

			// Chain
			return History;
		};


		// ====================================================================
		// Safari Bug Fix

		/**
		 * History.safariStatePoll()
		 * Poll the current state
		 * @return {History}
		 */
		History.safariStatePoll = function(){
			// Poll the URL

			// Get the Last State which has the new URL
			var
				urlState = History.extractState(History.getLocationHref()),
				newState;

			// Check for a difference
			if ( !History.isLastSavedState(urlState) ) {
				newState = urlState;
			}
			else {
				return;
			}

			// Check if we have a state with that url
			// If not create it
			if ( !newState ) {
				//History.debug('History.safariStatePoll: new');
				newState = History.createStateObject();
			}

			// Apply the New State
			//History.debug('History.safariStatePoll: trigger');
			History.Adapter.trigger(window,'popstate');

			// Chain
			return History;
		};


		// ====================================================================
		// State Aliases

		/**
		 * History.back(queue)
		 * Send the browser history back one item
		 * @param {Integer} queue [optional]
		 */
		History.back = function(queue){
			//History.debug('History.back: called', arguments);

			// Handle Queueing
			if ( queue !== false && History.busy() ) {
				// Wait + Push to Queue
				//History.debug('History.back: we must wait', arguments);
				History.pushQueue({
					scope: History,
					callback: History.back,
					args: arguments,
					queue: queue
				});
				return false;
			}

			// Make Busy + Continue
			History.busy(true);

			// Fix certain browser bugs that prevent the state from changing
			History.doubleCheck(function(){
				History.back(false);
			});

			// Go back
			history.go(-1);

			// End back closure
			return true;
		};

		/**
		 * History.forward(queue)
		 * Send the browser history forward one item
		 * @param {Integer} queue [optional]
		 */
		History.forward = function(queue){
			//History.debug('History.forward: called', arguments);

			// Handle Queueing
			if ( queue !== false && History.busy() ) {
				// Wait + Push to Queue
				//History.debug('History.forward: we must wait', arguments);
				History.pushQueue({
					scope: History,
					callback: History.forward,
					args: arguments,
					queue: queue
				});
				return false;
			}

			// Make Busy + Continue
			History.busy(true);

			// Fix certain browser bugs that prevent the state from changing
			History.doubleCheck(function(){
				History.forward(false);
			});

			// Go forward
			history.go(1);

			// End forward closure
			return true;
		};

		/**
		 * History.go(index,queue)
		 * Send the browser history back or forward index times
		 * @param {Integer} queue [optional]
		 */
		History.go = function(index,queue){
			//History.debug('History.go: called', arguments);

			// Prepare
			var i;

			// Handle
			if ( index > 0 ) {
				// Forward
				for ( i=1; i<=index; ++i ) {
					History.forward(queue);
				}
			}
			else if ( index < 0 ) {
				// Backward
				for ( i=-1; i>=index; --i ) {
					History.back(queue);
				}
			}
			else {
				throw new Error('History.go: History.go requires a positive or negative integer passed.');
			}

			// Chain
			return History;
		};


		// ====================================================================
		// HTML5 State Support

		// Non-Native pushState Implementation
		if ( History.emulated.pushState ) {
			/*
			 * Provide Skeleton for HTML4 Browsers
			 */

			// Prepare
			var emptyFunction = function(){};
			History.pushState = History.pushState||emptyFunction;
			History.replaceState = History.replaceState||emptyFunction;
		} // History.emulated.pushState

		// Native pushState Implementation
		else {
			/*
			 * Use native HTML5 History API Implementation
			 */

			/**
			 * History.onPopState(event,extra)
			 * Refresh the Current State
			 */
			History.onPopState = function(event,extra){
				// Prepare
				var stateId = false, newState = false, currentHash, currentState;

				// Reset the double check
				History.doubleCheckComplete();

				// Check for a Hash, and handle apporiatly
				currentHash = History.getHash();
				if ( currentHash ) {
					// Expand Hash
					currentState = History.extractState(currentHash||History.getLocationHref(),true);
					if ( currentState ) {
						// We were able to parse it, it must be a State!
						// Let's forward to replaceState
						//History.debug('History.onPopState: state anchor', currentHash, currentState);
						History.replaceState(currentState.data, currentState.title, currentState.url, false);
					}
					else {
						// Traditional Anchor
						//History.debug('History.onPopState: traditional anchor', currentHash);
						History.Adapter.trigger(window,'anchorchange');
						History.busy(false);
					}

					// We don't care for hashes
					History.expectedStateId = false;
					return false;
				}

				// Ensure
				stateId = History.Adapter.extractEventData('state',event,extra) || false;

				// Fetch State
				if ( stateId ) {
					// Vanilla: Back/forward button was used
					newState = History.getStateById(stateId);
				}
				else if ( History.expectedStateId ) {
					// Vanilla: A new state was pushed, and popstate was called manually
					newState = History.getStateById(History.expectedStateId);
				}
				else {
					// Initial State
					newState = History.extractState(History.getLocationHref());
				}

				// The State did not exist in our store
				if ( !newState ) {
					// Regenerate the State
					newState = History.createStateObject(null,null,History.getLocationHref());
				}

				// Clean
				History.expectedStateId = false;

				// Check if we are the same state
				if ( History.isLastSavedState(newState) ) {
					// There has been no change (just the page's hash has finally propagated)
					//History.debug('History.onPopState: no change', newState, History.savedStates);
					History.busy(false);
					return false;
				}

				// Store the State
				History.storeState(newState);
				History.saveState(newState);

				// Force update of the title
				History.setTitle(newState);

				// Fire Our Event
				History.Adapter.trigger(window,'statechange');
				History.busy(false);

				// Return true
				return true;
			};
			History.Adapter.bind(window,'popstate',History.onPopState);

			/**
			 * History.pushState(data,title,url)
			 * Add a new State to the history object, become it, and trigger onpopstate
			 * We have to trigger for HTML4 compatibility
			 * @param {object} data
			 * @param {string} title
			 * @param {string} url
			 * @return {true}
			 */
			History.pushState = function(data,title,url,queue){
				//History.debug('History.pushState: called', arguments);

				// Check the State
				if ( History.getHashByUrl(url) && History.emulated.pushState ) {
					throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');
				}

				// Handle Queueing
				if ( queue !== false && History.busy() ) {
					// Wait + Push to Queue
					//History.debug('History.pushState: we must wait', arguments);
					History.pushQueue({
						scope: History,
						callback: History.pushState,
						args: arguments,
						queue: queue
					});
					return false;
				}

				// Make Busy + Continue
				History.busy(true);

				// Create the newState
				var newState = History.createStateObject(data,title,url);

				// Check it
				if ( History.isLastSavedState(newState) ) {
					// Won't be a change
					History.busy(false);
				}
				else {
					// Store the newState
					History.storeState(newState);
					History.expectedStateId = newState.id;

					// Push the newState
					history.pushState(newState.id,newState.title,newState.url);

					// Fire HTML5 Event
					History.Adapter.trigger(window,'popstate');
				}

				// End pushState closure
				return true;
			};

			/**
			 * History.replaceState(data,title,url)
			 * Replace the State and trigger onpopstate
			 * We have to trigger for HTML4 compatibility
			 * @param {object} data
			 * @param {string} title
			 * @param {string} url
			 * @return {true}
			 */
			History.replaceState = function(data,title,url,queue){
				//History.debug('History.replaceState: called', arguments);

				// Check the State
				if ( History.getHashByUrl(url) && History.emulated.pushState ) {
					throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');
				}

				// Handle Queueing
				if ( queue !== false && History.busy() ) {
					// Wait + Push to Queue
					//History.debug('History.replaceState: we must wait', arguments);
					History.pushQueue({
						scope: History,
						callback: History.replaceState,
						args: arguments,
						queue: queue
					});
					return false;
				}

				// Make Busy + Continue
				History.busy(true);

				// Create the newState
				var newState = History.createStateObject(data,title,url);

				// Check it
				if ( History.isLastSavedState(newState) ) {
					// Won't be a change
					History.busy(false);
				}
				else {
					// Store the newState
					History.storeState(newState);
					History.expectedStateId = newState.id;

					// Push the newState
					history.replaceState(newState.id,newState.title,newState.url);

					// Fire HTML5 Event
					History.Adapter.trigger(window,'popstate');
				}

				// End replaceState closure
				return true;
			};

		} // !History.emulated.pushState


		// ====================================================================
		// Initialise

		/**
		 * Load the Store
		 */
		if ( sessionStorage ) {
			// Fetch
			try {
				History.store = JSON.parse(sessionStorage.getItem('History.store'))||{};
			}
			catch ( err ) {
				History.store = {};
			}

			// Normalize
			History.normalizeStore();
		}
		else {
			// Default Load
			History.store = {};
			History.normalizeStore();
		}

		/**
		 * Clear Intervals on exit to prevent memory leaks
		 */
		History.Adapter.bind(window,"unload",History.clearAllIntervals);

		/**
		 * Create the initial State
		 */
		History.saveState(History.storeState(History.extractState(History.getLocationHref(),true)));

		/**
		 * Bind for Saving Store
		 */
		if ( sessionStorage ) {
			// When the page is closed
			History.onUnload = function(){
				// Prepare
				var	currentStore, item, currentStoreString;

				// Fetch
				try {
					currentStore = JSON.parse(sessionStorage.getItem('History.store'))||{};
				}
				catch ( err ) {
					currentStore = {};
				}

				// Ensure
				currentStore.idToState = currentStore.idToState || {};
				currentStore.urlToId = currentStore.urlToId || {};
				currentStore.stateToId = currentStore.stateToId || {};

				// Sync
				for ( item in History.idToState ) {
					if ( !History.idToState.hasOwnProperty(item) ) {
						continue;
					}
					currentStore.idToState[item] = History.idToState[item];
				}
				for ( item in History.urlToId ) {
					if ( !History.urlToId.hasOwnProperty(item) ) {
						continue;
					}
					currentStore.urlToId[item] = History.urlToId[item];
				}
				for ( item in History.stateToId ) {
					if ( !History.stateToId.hasOwnProperty(item) ) {
						continue;
					}
					currentStore.stateToId[item] = History.stateToId[item];
				}

				// Update
				History.store = currentStore;
				History.normalizeStore();

				// In Safari, going into Private Browsing mode causes the
				// Session Storage object to still exist but if you try and use
				// or set any property/function of it it throws the exception
				// "QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to
				// add something to storage that exceeded the quota." infinitely
				// every second.
				currentStoreString = JSON.stringify(currentStore);
				try {
					// Store
					sessionStorage.setItem('History.store', currentStoreString);
				}
				catch (e) {
					if (e.code === DOMException.QUOTA_EXCEEDED_ERR) {
						if (sessionStorage.length) {
							// Workaround for a bug seen on iPads. Sometimes the quota exceeded error comes up and simply
							// removing/resetting the storage can work.
							sessionStorage.removeItem('History.store');
							sessionStorage.setItem('History.store', currentStoreString);
						} else {
							// Otherwise, we're probably private browsing in Safari, so we'll ignore the exception.
						}
					} else {
						throw e;
					}
				}
			};

			// For Internet Explorer
			History.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));

			// For Other Browsers
			History.Adapter.bind(window,'beforeunload',History.onUnload);
			History.Adapter.bind(window,'unload',History.onUnload);

			// Both are enabled for consistency
		}

		// Non-Native pushState Implementation
		if ( !History.emulated.pushState ) {
			// Be aware, the following is only for native pushState implementations
			// If you are wanting to include something for all browsers
			// Then include it above this if block

			/**
			 * Setup Safari Fix
			 */
			if ( History.bugs.safariPoll ) {
				History.intervalList.push(setInterval(History.safariStatePoll, History.options.safariPollInterval));
			}

			/**
			 * Ensure Cross Browser Compatibility
			 */
			if ( navigator.vendor === 'Apple Computer, Inc.' || (navigator.appCodeName||'') === 'Mozilla' ) {
				/**
				 * Fix Safari HashChange Issue
				 */

				// Setup Alias
				History.Adapter.bind(window,'hashchange',function(){
					History.Adapter.trigger(window,'popstate');
				});

				// Initialise Alias
				if ( History.getHash() ) {
					History.Adapter.onDomLoad(function(){
						History.Adapter.trigger(window,'hashchange');
					});
				}
			}

		} // !History.emulated.pushState


	}; // History.initCore

	// Try to Initialise History
	if (!History.options || !History.options.delayInit) {
		History.init();
	}

})(window);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:history-xhr', location = '/scripts/history-xhr.js' */
(function (window, undefined) {
    const History = window.History,
        $ = window.jQuery,
        document = window.document;

    if (!History.enabled) {
        return false;
    }

    $(function () {
        var $tabsContainer = $('.aui-tabs.aui-tabs-disabled,.aui-navgroup-horizontal'),
            isHorizontalNav = $tabsContainer.hasClass('aui-navgroup-horizontal'),
            $content = (
                isHorizontalNav ?
                $tabsContainer.nextAll('.aui-page-panel:first').find('.aui-page-panel-content').filter(':first') :
                $tabsContainer.children('.tabs-pane').filter(':first')
            ),
            $links = (
                isHorizontalNav ?
                $tabsContainer.find('.aui-navgroup-primary:first .aui-nav') :
                $tabsContainer.children('.tabs-menu')
            ),
            activeClass = (isHorizontalNav ? 'aui-nav-selected' : 'active-tab'),
            $planNavigator = $('#plan-navigator'),
            $plan,
            $jobs,
            planKey,
            activeJobKey,
            request,
            contextPath = AJS.contextPath() || '',
            listenForPotentialTabLinksInContent = function () {
                const $tab = $(this);

                $content.delegate('a[href="' + $tab.attr('href') + '"]', 'click', function (e) {
                    // Continue as normal for cmd clicks etc
                    if (e.which === 2 || e.metaKey) { return true; }

                    e.preventDefault();
                    $tab.click();
                });
            };

        // If not a tabbed page don't do any history manipulation
        if (!$tabsContainer.length || $tabsContainer.hasClass('history-xhr-disabled')) {
            return false;
        }

        // Get active tab on page load and store that data against this history entry
        const tabId = $links.find('.' + activeClass).children('a').attr('id');
        if(tabId !== undefined) { //sometimes at old browser links are not yet identified
            History.replaceState({
                tabId: BAMBOO.escapeIdToJQuerySelector(tabId)
            }, document.title, null);
        }

        if ($planNavigator.length) {
            $plan = $planNavigator.find('> ol');
            planKey = $plan.data('planKey');
            $jobs = $planNavigator.find('> ol ul > li');
            activeJobKey = $jobs.filter('.active').data('jobKey');
        }

        $links.find('a:not(.history-xhr-disabled)').click(function (e) {
            const $this = $(this),
                url = $this.attr('href'),
                title = $this.attr('title') || null;

            // Continue as normal for cmd clicks etc
            if (e.which === 2 || e.metaKey) { return true; }

            History.pushState({ tabId: BAMBOO.escapeIdToJQuerySelector($this.attr('id')) }, title, url);
            e.preventDefault();
        }).each(listenForPotentialTabLinksInContent);

        $(window).bind('statechange', function () {
            const State = History.getState(),
                url = State.url,
                tabId = State.data.tabId,
                $tab = $('#' + tabId);

            if (request && request.readyState < 4) {
                request.abort();
            }

            $tabsContainer.addClass('loading');
            $tab.parent().addClass(activeClass).siblings().removeClass(activeClass);

            $(document).trigger('statechange.historyxhr', [ url ]);

            if ($planNavigator.length) {
                // Update urls in plan navigator
                if (activeJobKey) {
                    // Update job urls
                    $jobs.each(function () {
                        const $li = $(this),
                            $a = $li.children('a').last(),
                            jobKey = $li.data('jobKey');

                        $a.attr('href', (jobKey === activeJobKey ? url : url.replace(activeJobKey, jobKey)));
                    });
                } else {
                    // Update plan url
                    // $plan.children('a').attr('href', url);
                }
            }
            
            request = $.ajax({
                cache: false,
                url: url,
                beforeSend: function (jqXHR) {
                    jqXHR.setRequestHeader('X-History-XHR', true);
                },
                success: function (data, textStatus, jqXHR) {
                    var title, planURL, jobURL;

                    // If no data is returned, or an entire web page, go directly to that page for normal error handling
                    if (!$.trim(data) || /<html/i.test(data)) {
                        return window.location = url;
                    }

                    $content.html(data);

                    title = jqXHR.getResponseHeader('X-Page-Title') || $.trim($content.find('title,.document-title').remove().filter(':first').text());
                    if (title) {
                        document.title = title;
                        try {
                            document.getElementsByTagName('title')[0].innerHTML = document.title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');
                        }
                        catch ( Exception ) { }
                    }

                    planURL = jqXHR.getResponseHeader('X-Plan-URL');
                    jobURL = jqXHR.getResponseHeader('X-Job-URL');
                    if ($planNavigator.length) {
                        if (activeJobKey && planURL) {
                            // Update plan url (url is returned with current job key, replace it with the plan key)
                            // $plan.children('a').attr('href', contextPath + planURL.replace(activeJobKey, planKey));
                        } else if (!activeJobKey && jobURL) {
                            // Update job urls (url is returned with plan key, replace it with the appropriate job key)
                            $jobs.each(function () {
                                const $li = $(this),
                                    $a = $li.children('a').last(),
                                    jobKey = $li.data('jobKey');

                                $a.attr('href', contextPath + jobURL.replace(planKey, jobKey));
                            });
                        }
                    }

                    $tabsContainer.removeClass('loading');
                },
                error: function (jqXHR, textStatus) {
                    if (textStatus !== 'abort') {
                        return window.location = url;
                    }
                }
            });
        });
    });
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:plan-status-history', location = '/widget/result-summary/result-summary.js' */
define('widget/result-summary', [
    'underscore',
    'backbone'
], function(
    _,
    Backbone
) {

    'use strict';

    var ResultSummary = Backbone.Model.extend({
        idAttribute: 'buildNumber'
    });


    return ResultSummary;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:plan-status-history', location = '/widget/result-summaries/result-summaries.js' */
define('widget/result-summaries', [
    'underscore',
    'backbone',
    'widget/result-summary'
], function(
    _,
    Backbone,
    ResultSummary
) {

    'use strict';

    var ResultSummaries = Backbone.Collection.extend({
        model: ResultSummary,
        initialize: function(models, options) {
            options || (options = {});
            this.planKey = options.planKey;
        },
        url: function() {
            return AJS.contextPath() + '/ajax/planStatusHistoryNeighbouringSummaries.action?planKey=' + this.planKey;
        },
        parse: function(response) {
            return response.navigableSummaries;
        },
        comparator: function(model) {
            return model.id;
        },
        getMinimumBuildNumber: function() {
            return this.length > 0 ? this.at(0).id : null;
        },
        getIndexOfBuildNumber: function(buildNumber) {
            var model = this.get(buildNumber);
            if (model) {
                return this.indexOf(model);
            } else {
                return -1;
            }
        },
        getMaximumBuildNumber: function() {
            if (this.length == 0) {
                return null;
            }

            return this.last().id;
        },
        purgeActiveBuilds: function() {
            this.remove(this.filter(function(model) {
                return model.attributes.active;
            }));
        },
        getPreviousBuildNumber: function(buildNumber) {
            var i = this.getIndexOfBuildNumber(buildNumber);
            if (i > 0) {
                return this.at(i-1).id;
            }
            return null;
        },
        getNextBuildNumber: function(buildNumber) {
            var i = this.getIndexOfBuildNumber(buildNumber);
            if (i >= 0 && i < this.length - 1) {
                return this.at(i+1).id;
            }
            return null;
        }
    });

    return ResultSummaries;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:plan-status-history', location = '/widget/plan-status-history/plan-status-history.soy' */
// This file was automatically generated from plan-status-history.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.planStatusHistory.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.planStatusHistory == 'undefined') { bamboo.widget.planStatusHistory = {}; }


bamboo.widget.planStatusHistory.container = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '"></div><script type="text/javascript">require([\'jquery\', \'widget/plan-status-history\'], function($, PlanStatusHistory){return new PlanStatusHistory({el: $(\'#' + soy.$$escapeHtml(opt_data.id) + '\'), planKey: \'' + soy.$$escapeHtml(opt_data.planKey) + '\', buildNumber: ' + soy.$$escapeHtml(opt_data.currentBuildNumber ? opt_data.currentBuildNumber : 'null') + ', bootstrap: ' + soy.$$filterNoAutoescape(opt_data.bootstrap) + ', returnUrl: \'' + soy.$$filterNoAutoescape(opt_data.returnUrl) + '\', keyToNavigate: \'' + soy.$$escapeHtml(opt_data.keyToNavigate) + '\', firstBuildNumber: ' + soy.$$escapeHtml(opt_data.firstBuildNumber ? opt_data.firstBuildNumber : 'null') + ', lastBuildNumber: ' + soy.$$escapeHtml(opt_data.lastBuildNumber ? opt_data.lastBuildNumber : 'null') + '});});<\/script>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.container.soyTemplateName = 'bamboo.widget.planStatusHistory.container';
}


bamboo.widget.planStatusHistory.navigator = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.builds.length > 0) {
    output += aui.icons.icon({icon: 'wait', useIconFont: false, size: 'small', extraClasses: 'spinner previous'}) + ((opt_data.minVisibleBuildNumber && opt_data.minVisibleBuildNumber > opt_data.firstBuildNumber) ? '<a class="button previous" title="' + soy.$$escapeHtml("Previous build result") + '" accesskey="' + soy.$$escapeHtml("P") + '">' + aui.icons.icon({icon: 'down', useIconFont: true, size: 'small', extraClasses: 'left'}) + '</a>' : '<span class="button previous disabled">' + aui.icons.icon({icon: 'down', useIconFont: true, size: 'small', extraClasses: 'left'}) + '</span>') + '<ol>';
    var buildList54 = opt_data.builds;
    var buildListLen54 = buildList54.length;
    for (var buildIndex54 = 0; buildIndex54 < buildListLen54; buildIndex54++) {
      var buildData54 = buildList54[buildIndex54];
      output += bamboo.widget.planStatusHistory.item(soy.$$augmentMap(buildData54, {href: "" + (opt_data.currentBuildNumber ? '/build/result/gotoBuildResult.action?buildKey=' + opt_data.keyToNavigate + '&buildNumber=' + buildData54.buildNumber + '&returnUrl=' + opt_data.returnUrl : '/browse/' + buildData54.planKey + '-' + buildData54.buildNumber), isCurrent: opt_data.currentBuildNumber && opt_data.currentBuildNumber == buildData54.buildNumber}));
    }
    output += '</ol>' + ((opt_data.showRightArrow) ? '<a class="button next" title="' + soy.$$escapeHtml("Next build result") + '" accesskey="' + soy.$$escapeHtml("N") + '">' + aui.icons.icon({icon: 'up', useIconFont: true, size: 'small', extraClasses: 'right'}) + '</a>' : '<span class="button next disabled">' + aui.icons.icon({icon: 'up', useIconFont: true, size: 'small', extraClasses: 'right'}) + '</span>') + aui.icons.icon({icon: 'wait', useIconFont: false, size: 'small', extraClasses: 'spinner next'});
  } else {
    output += '<p>' + soy.$$escapeHtml("Status history data not available") + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.navigator.soyTemplateName = 'bamboo.widget.planStatusHistory.navigator';
}


bamboo.widget.planStatusHistory.buildDialog = function(opt_data, opt_ignored) {
  return '<div>' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.buildStatus, text: '#' + opt_data.buildNumber + ' (' + opt_data.buildStatusDescription + ')'}) + '<strong>#' + soy.$$escapeHtml(opt_data.buildNumber) + '</strong>' + ((opt_data.onceOff) ? widget.lozenges.lozenge({color: 'current', text: "Custom revision"}) : '') + ((opt_data.rebuild) ? widget.lozenges.lozenge({color: 'moved', text: "Rebuild"}) : '') + ((opt_data.customBuild) ? widget.lozenges.lozenge({color: 'current', text: "Custom build"}) : '') + '<p>' + soy.$$filterNoAutoescape(opt_data.triggerHtml) + '</p>' + ((opt_data.hasFailed && ! opt_data.specsFailure) ? ((opt_data.existingFailuresText) ? '<p>' + soy.$$escapeHtml(opt_data.existingFailuresText) + '</p>' : '') + ((opt_data.newFailuresText) ? '<p>' + soy.$$escapeHtml(opt_data.newFailuresText) + '</p>' : '') + ((! (opt_data.existingFailuresText || opt_data.newFailuresText)) ? '<p>' + soy.$$escapeHtml("0 tests failed") + '</p>' : '') : '') + '</div>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.buildDialog.soyTemplateName = 'bamboo.widget.planStatusHistory.buildDialog';
}


bamboo.widget.planStatusHistory.item = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.buildStatus) + ((opt_data.isCurrent) ? ' current' : '') + ' animated' + aui.renderExtraClasses(opt_data) + '" data-build-number="' + soy.$$escapeHtml(opt_data.buildNumber) + '" data-trigger="' + soy.$$escapeHtml(opt_data.trigger) + '" data-new-failed-test-case-count="' + soy.$$escapeHtml(opt_data.newFailedTestCaseCount) + '" data-existing-failed-test-case-count="' + soy.$$escapeHtml(opt_data.existingFailedTestCaseCount) + '" data-rebuild="' + soy.$$escapeHtml(opt_data.rebuild) + '" data-once-off="' + soy.$$escapeHtml(opt_data.onceOff) + '" data-custom-build="' + soy.$$escapeHtml(opt_data.customBuild) + '" ><a href="' + soy.$$escapeHtml(opt_data.href) + '">' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.buildStatus, text: '#' + opt_data.buildNumber + ' (' + opt_data.buildStatusDescription + ')'}) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.item.soyTemplateName = 'bamboo.widget.planStatusHistory.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:plan-status-history', location = '/widget/plan-status-history/plan-status-history.js' */
define('widget/plan-status-history', [
    'jquery',
    'underscore',
    'backbone',
    'widget/result-summary',
    'widget/result-summaries',
    'widget/page-visibility-manager'
], function(
    $,
    _,
    Backbone,
    ResultSummary,
    ResultSummaries,
    pageVisibilityManager
) {

    'use strict';

    var MAX_WINDOW_SIZE = 10; // synchronised with PlanStatusHistoryAction#MAX_RESULTS
    var SCROLL_BEFORE = "before";
    var SCROLL_AFTER = "after";

    var PlanStatusHistory = Backbone.View.extend({
        id: 'plan-status-history',
        events: {
            "click a.previous": "clickPreviousButton",
            "click a.next": "clickNextButton"
        },
        getShowRightArrow: function() {
            if (this.collection.length == 0) {
                return null;
            }
            return this.maxVisibleBuildNumber && this.maxVisibleBuildNumber < this._lastBuildNumber;
        },
        initialize: function(options) {
            _.extend(this, options || (options = {}));
            this.buildNumber = options.buildNumber;
            this.returnUrl = options.returnUrl || '';
            this.keyToNavigate = options.keyToNavigate;
            this._firstBuildNumber = options.firstBuildNumber;
            this._lastBuildNumber = options.lastBuildNumber;
            this._updateTimeoutSuccess = options.updateTimeoutSuccess || 15000;
            this._updateTimeoutFailure = options.updateTimeoutFailure || 20000;
            this.collection = new ResultSummaries(options.bootstrap || [], {
                planKey: options.planKey
            });
            this.minVisibleBuildNumber = this.collection.getMinimumBuildNumber();
            this.maxVisibleBuildNumber = this.collection.getMaximumBuildNumber();
            this.showRightArrow = this.getShowRightArrow();
            $(document).on('statechange.historyxhr', _.bind(this.updateReturnUrls, this));

            this._inlineDialog = AJS.InlineDialog(
                '#' + this.$el.attr('id') + ' li > *',
                'plan-status-history-info',
                _.bind(this.showInlineDialog, this),
                {
                    onHover: true,
                    fadeTime: 50,
                    hideDelay: 50,
                    showDelay: 0,
                    useLiveEvents: true
                }
            );

            this.render();

            pageVisibilityManager.setUp(
                this.scheduleNextUpdate.bind(this),
                this.cancelNextUpdate.bind(this)
            );
        },
        render: function(scrollDirection) {
            if (!scrollDirection) {
                this._renderBuilds();
            } else {
                this._renderBuildsWithAnimation(scrollDirection);
            }
            return this;
        },
        _showSpinner: function(buttonClass) {
            var id = this.$el.attr('id');
            var $spinner = $('#' + id + ' .spinner' + buttonClass);
            var $button = $('#' + id + ' .button' + buttonClass);
            $button.hide();
            $spinner.show();
        },
        _hideSpinner: function(buttonClass) {
            var id = this.$el.attr('id');
            var $spinner = $('#' + id + ' .spinner' + buttonClass);
            var $button = $('#' + id + ' .button' + buttonClass);
            $spinner.hide();
            $button.show();
        },
        _renderBuilds: function () {
            this.$el.html(bamboo.widget.planStatusHistory.navigator({
                builds: this.getBuildsToRender(),
                currentBuildNumber: this.buildNumber,
                firstBuildNumber: this._firstBuildNumber,
                minVisibleBuildNumber: this.minVisibleBuildNumber,
                maxVisibleBuildNumber: this.maxVisibleBuildNumber,
                showRightArrow: this.getShowRightArrow(),
                keyToNavigate: this.keyToNavigate,
                returnUrl: this.returnUrl
            }));
        },
        _renderBuildsWithAnimation: function (scrollDirection) {
            var $firstLi = this.$el.find('li.animated:first');
            var buildElementWidth = $firstLi.width();
            var translateX = "0";

            if (scrollDirection == SCROLL_BEFORE) {
                translateX = "translateX(" + buildElementWidth + "px)";
            } else if (scrollDirection == SCROLL_AFTER) {
                translateX = "translateX(-" + buildElementWidth + "px)";
            }

            this.$el.find("li.animated").css({
                "transform": translateX,
                "-moz-transform": translateX,
                "-webkit-transform": translateX,
                "-ms-transform": translateX
            });

            _.delay(_.bind(this._renderBuilds, this), 250); // delay must be matched with transition duration in CSS
        },
        getBuildsToRender: function() {
            var buildsToRender = this.collection.toJSON();
            var minVisibleBuildNumber = this.minVisibleBuildNumber;
            var maxVisibleBuildNumber = this.maxVisibleBuildNumber;
            buildsToRender = _.filter(buildsToRender, function(build) {
                return (build.buildNumber >= minVisibleBuildNumber &&  build.buildNumber <= maxVisibleBuildNumber);
            });
            return buildsToRender;
        },
        update: function(options) {
            var data = {};
            options = options || {};
            if (options.buildNumber) {
                data.buildNumber = options.buildNumber;
            } else if (this.buildNumber) {
                data.buildNumber = this.buildNumber;
            }
            if (options.scanDirection) {
                data.scanDirection = options.scanDirection;
            }

            return this.collection.fetch({
                cache: false,
                dataType: 'json',
                data: data,
                remove: false
            })
                    .done(_.bind(this.updateBuildNumberDetails, this))
                    .done(_.bind(this.render, this, options.scanDirection))
                    .always(_.bind(this.recordLastUpdateTime, this))
                    .always(_.bind(this.scheduleNextUpdate, this));
        },
        updateBuildNumberDetails: function() {
            var lastBuildNumber = (this.collection.length ? this.collection.last().id : null);
            if (lastBuildNumber > this._lastBuildNumber) {
                this._lastBuildNumber = lastBuildNumber;
            }
        },
        recordLastUpdateTime: function() {
            this._lastUpdateTime = new Date();
        },
        cancelNextUpdate: function() {
            clearTimeout(this._timeout);
        },
        scheduleNextUpdate: function(jqXHR) {
            this.cancelNextUpdate();
            if (!pageVisibilityManager.isPageVisible()) {
                return;
            }
            var delayBeforeUpdate = ((typeof jqXHR === 'undefined' || jqXHR.status == 'OK')
                ? this._updateTimeoutSuccess
                : this._updateTimeoutFailure);
            if (this._lastUpdateTime) {
                delayBeforeUpdate -= (new Date().getTime() - this._lastUpdateTime.getTime());
                if (delayBeforeUpdate < 0) {
                    delayBeforeUpdate = 0;
                }
            }
            this._timeout = setTimeout(_.bind(this.update, this), delayBeforeUpdate);
        },
        updateReturnUrls: function(event, newReturnUrl) {
            this.returnUrl = encodeURIComponent(this.cleanReturnUrl(newReturnUrl));
            this.render();
        },
        cleanReturnUrl: function(url) {
            var a = document.createElement('a');
            a.href = url;
            return (AJS.contextPath().length ? a.pathname.replace(AJS.contextPath(), '') : a.pathname) + a.search;
        },
        clickPreviousButton: function (event) {
            event.preventDefault();
            var scrollDirection = SCROLL_BEFORE;

            if (this.minVisibleBuildNumber === this._firstBuildNumber) {
                return;
            }

            this.cancelNextUpdate();

            var needsFetch = this.needsFetchOnScroll(scrollDirection);

            var oldMinVisibleBuildNumber = this.minVisibleBuildNumber;
            var oldMaxVisibleBuildNumber = this.maxVisibleBuildNumber;
            this.minVisibleBuildNumber = this.collection.getPreviousBuildNumber(oldMinVisibleBuildNumber);
            this.maxVisibleBuildNumber = this.collection.getPreviousBuildNumber(oldMaxVisibleBuildNumber);
            if (this.minVisibleBuildNumber === null) {
                this.minVisibleBuildNumber = oldMinVisibleBuildNumber - 1;
                this.maxVisibleBuildNumber = oldMaxVisibleBuildNumber - 1;
            }

            if (needsFetch) {
                this._showSpinner('.previous');
                this.update({
                    buildNumber: oldMinVisibleBuildNumber,
                    scanDirection: "before"
                }).always(_.bind(this._hideSpinner, this, '.previous'));
            } else {
                this.render(scrollDirection);
                this.scheduleNextUpdate();
            }
        },
        clickNextButton: function (event) {
            event.preventDefault();
            var scrollDirection = SCROLL_AFTER;

            if (this.maxVisibleBuildNumber === this._lastBuildNumber) {
                return;
            }

            this.cancelNextUpdate();

            var needsFetch = this.needsFetchOnScroll(scrollDirection);

            var oldMinVisibleBuildNumber = this.minVisibleBuildNumber;
            var oldMaxVisibleBuildNumber = this.maxVisibleBuildNumber;
            this.minVisibleBuildNumber = this.collection.getNextBuildNumber(oldMinVisibleBuildNumber);
            this.maxVisibleBuildNumber = this.collection.getNextBuildNumber(oldMaxVisibleBuildNumber);
            if (this.maxVisibleBuildNumber === null) {
                this.minVisibleBuildNumber = oldMinVisibleBuildNumber + 1;
                this.maxVisibleBuildNumber = oldMaxVisibleBuildNumber + 1;
            }

            if (needsFetch) {
                this._showSpinner('.next');
                this.update({
                    buildNumber: oldMaxVisibleBuildNumber,
                    scanDirection: "after"
                }).always(_.bind(this._hideSpinner, this, '.next'));
            } else {
                this.render(scrollDirection);
                this.scheduleNextUpdate();
            }
        },
        needsFetchOnScroll: function(scrollDirection) {
            // do we have enough data to render straight away?
            if (scrollDirection === SCROLL_BEFORE) {
                // if our minimum visible build is not first or second in the collection, then yes.
                return (this.collection.getIndexOfBuildNumber(this.minVisibleBuildNumber) < 2);
            } else {
                // if our maximum visible build is not last or second last in the collection, then yes.
                var boundary = this.collection.length - 2;
                return (this.collection.getIndexOfBuildNumber(this.maxVisibleBuildNumber) >= boundary);
            }
        },
        showInlineDialog: function(contents, trigger, doShowPopup) {
            var $li = $(trigger).parent(),
                buildNumber = $li.data('buildNumber'),
                buildModel = this.collection.get(buildNumber),
                attributes = _.clone(buildModel.attributes);

            var hasFailed = attributes.buildStatus === 'Failed',
                existingFailuresText = null,
                newFailuresText = null;

            if (hasFailed) {
                var existingFailures = attributes.existingFailedTestCaseCount,
                    newFailures = attributes.newFailedTestCaseCount;
                if (existingFailures > 0) {
                    existingFailuresText = AJS.format("{0} existing {0,choice,1#test|1\u003ctests} failed", existingFailures)
                }
                if (newFailures > 0) {
                    newFailuresText = AJS.format("{0} new {0,choice,1#test|1\u003ctests} failed", newFailures)
                }
            }

            _.extend(attributes, {
                hasFailed: hasFailed,
                existingFailuresText: existingFailuresText,
                newFailuresText: newFailuresText,
                triggerHtml: attributes.trigger
            });

            if (this._inlineDialog.data('buildNumber') != buildNumber) {
                contents.html(bamboo.widget.planStatusHistory.buildDialog(attributes));
                this._inlineDialog.refresh();
                this._inlineDialog.data('buildNumber', buildNumber);
            }
            
            doShowPopup();
        }
    });

    return PlanStatusHistory;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:serverstate', location = '/scripts/serverstate.js' */
BAMBOO.ADMIN = (BAMBOO.ADMIN || {});
BAMBOO.ADMIN.SERVERSTATE = {};

BAMBOO.ADMIN.SERVER_STATUS_UPDATED_EVENT = "serverStatusChangedEvent";
BAMBOO.ADMIN.SERVER_STATUS_POLLING_EVENT = "serverStatusPollingEvent";
BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT = "serverStatusActionEvent";

BAMBOO.ADMIN.STATUS_RUNNING = "RUNNING";
BAMBOO.ADMIN.STATUS_PAUSED = "PAUSED";
BAMBOO.ADMIN.STATUS_PAUSING = "PAUSING";
BAMBOO.ADMIN.STATUS_POLLING = "POLLING";
BAMBOO.ADMIN.STATUS_ERROR = "ERROR";
BAMBOO.ADMIN.STATUS_PREPARING_FOR_RESTART = "PREPARING_FOR_RESTART";
BAMBOO.ADMIN.STATUS_READY_FOR_RESTART = "READY_FOR_RESTART";

BAMBOO.ADMIN.ACTION_PAUSE = "ACTION_PAUSE";
BAMBOO.ADMIN.ACTION_RESUME = "ACTION_RESUME";

BAMBOO.ADMIN.SERVERSTATE.serverStateUpdater = (function ($) {
    var defaults = {
            statusUrl: AJS.contextPath() + "/rest/api/latest/server",
            pauseUrl: AJS.contextPath() + "/rest/api/latest/server/pause",
            resumeUrl: AJS.contextPath() + "/rest/api/latest/server/resume"
        },
        options,
        serverState,
        $statusElement,
        doPoll = true,
        doRequest = function (type, url) {
            statusPolling();
            $.ajax({
                type: type,
                url: url,
                cache: false,
                dataType: "json",
                success: function (json) {
                    if (json && json.state) {
                        updateStatus(json, null);
                    } else {
                        updateStatus({state: BAMBOO.ADMIN.STATUS_ERROR}, null);
                    }
                },
                error: function (request, textStatus, errorThrown) {
                    updateStatus({state: BAMBOO.ADMIN.STATUS_ERROR}, textStatus + ": " + errorThrown);
                }
            });
        },
        update = function () {
            doRequest("GET", options.statusUrl);
        },
        statusPolling = function () {
            $statusElement.attr("data-server-state", BAMBOO.ADMIN.STATUS_POLLING);
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_POLLING_EVENT);
        },
        updateStatus = function (newState, additionalInfo) {
            var oldState = serverState;
            serverState = newState;
            $statusElement.attr("data-server-state", newState.state);
            if (additionalInfo) {
                $statusElement.attr("data-additional-info", additionalInfo);
            } else {
                $statusElement.removeAttr("data-additional-info");
            }
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_UPDATED_EVENT, [oldState, serverState, additionalInfo]);
        },
        pollInterval = function () {
            if (serverState && (serverState.state == BAMBOO.ADMIN.STATUS_RUNNING || serverState.state == BAMBOO.ADMIN.STATUS_PAUSED || serverState.state == BAMBOO.ADMIN.STATUS_ERROR)) {
                return 30000;
            } else {
                return 5000;
            }
        },
        poll = function (interval) {
            setTimeout(function () {
                if (doPoll) {
                    update();
                    poll(pollInterval());
                }
            }, interval);
        };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);
            $(function ($){
                $statusElement = $("<input id='bamboo-server-status' type='hidden'>").appendTo("body");
                if (doPoll) {
                    update();
                    poll(pollInterval());
                }
            });
        },

        pause: function () {
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT, BAMBOO.ADMIN.ACTION_PAUSE);
            doRequest("POST", options.pauseUrl);
            poll(1000);
        },

        resume: function () {
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT, BAMBOO.ADMIN.ACTION_RESUME);
            doRequest("POST", options.resumeUrl);
        },

        onServerStatusPolling: function (callback) {
            $statusElement.bind(BAMBOO.ADMIN.SERVER_STATUS_POLLING_EVENT, callback);
        },

        onServerStatusUpdated: function (callback) {
            $statusElement.bind(BAMBOO.ADMIN.SERVER_STATUS_UPDATED_EVENT, callback);
        },

        onServerStatusAction: function (callback) {
            $statusElement.bind(BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT, callback);
        },

        stopPolling: function () {
            doPoll = false;
        }
    }
})(AJS.$);

BAMBOO.ADMIN.SERVERSTATE.serverState = (function ($) {
    var defaults = {
            control: null,
            statusInfo: null,
            button: null,
            pausedMessage: "The server is \u003cstrong\u003epaused\u003c/strong\u003e. No builds will be run or queued.",
            pausedButtonLabel: "Resume server",
            pausingMessage: "The server is \u003cstrong\u003epausing\u003c/strong\u003e. No builds will be queued. All currently building plans will finish but requests for new builds is not allowed.",
            pausingButtonLabel: "Cancel pause",
            reindexInProgressMessage: "The server is being reindexed. Not all data might be available at the moment.",
            preparingForRestartMessage: "The server is \u003cstrong\u003epreparing for restart\u003c/strong\u003e. No builds will be queued.",
            readyForRestartMessage: "The server is \u003cstrong\u003eready for restart\u003c/strong\u003e. No builds will be queued.",
            serverRunningCallback: null,
            pollError: "Server could not be contacted and its state is unknown. Please reload the page",
            reloadPage: "Reload"
        },
        options,
        lifecycleState,
        $control,
        $button,
        $statusInfo,
        updateStatus = function (event, oldState, newState) {
            if (lifecycleState) {
                $control.removeClass("server-status-" + lifecycleState.toLowerCase());
            }
            lifecycleState = newState.state;
            $control.addClass("server-status-" + lifecycleState.toLowerCase());

            var oldLifecycleState = oldState ? oldState.state : undefined;

            if (lifecycleState == BAMBOO.ADMIN.STATUS_RUNNING) {
                if (oldLifecycleState != BAMBOO.ADMIN.STATUS_RUNNING && options.serverRunningCallback) {
                    options.serverRunningCallback();
                }
                if (newState.reindexInProgress) {
                    $statusInfo.html(options.reindexInProgressMessage);
                    $button.hide();
                    $control.show();
                } else {
                    $control.hide();
                }
                return;
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_ERROR) {
                if (oldLifecycleState == BAMBOO.ADMIN.STATUS_PAUSED || oldLifecycleState == BAMBOO.ADMIN.STATUS_PAUSING) {
                    if ($button && $button.length) {
                        $button.text(options.reloadPage).click(function () {
                            window.location.reload();
                        });
                    }
                    $statusInfo.html(options.pollError);
                    $control.show();
                } else if (oldLifecycleState != BAMBOO.ADMIN.STATUS_ERROR) {
                    $control.hide();
                }
                return;
            } else {
                $control.show();
            }

            if (lifecycleState == BAMBOO.ADMIN.STATUS_PAUSED || lifecycleState == BAMBOO.ADMIN.STATUS_PAUSING) {
                if ($button && $button.length) {
                    $button.show();
                }
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_PREPARING_FOR_RESTART || lifecycleState == BAMBOO.ADMIN.STATUS_READY_FOR_RESTART) {
                if ($button && $button.length) {
                    $button.hide();
                }
            }

            if (lifecycleState == BAMBOO.ADMIN.STATUS_PAUSING) {
                if ($button && $button.length) {
                    $button.text(options.pausingButtonLabel);
                }
                $statusInfo.html(options.pausingMessage);
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_PAUSED) {
                if ($button && $button.length) {
                    $button.text(options.pausedButtonLabel);
                }
                $statusInfo.html(options.pausedMessage);
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_PREPARING_FOR_RESTART) {
                $statusInfo.html(options.preparingForRestartMessage);
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_READY_FOR_RESTART) {
                $statusInfo.html(options.readyForRestartMessage);
            }
        };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);

            $(function () {
                $control = $(options.control);
                $statusInfo = $(options.statusInfo, $control);
                $button = $(options.button, $control);

                if ($button && $button.length) {
                    $button.click(BAMBOO.ADMIN.SERVERSTATE.serverStateUpdater.resume);
                }
                BAMBOO.ADMIN.SERVERSTATE.serverStateUpdater.onServerStatusUpdated(updateStatus);
            });
        }
    }
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:jirajs', location = '/scripts/jira/inheritance.js' */

// Inspired by base2 and Prototype
(function(){

begetObject = function (obj)
{
    var f = function()
    {};
    f.prototype = obj;
    return new f();
};
    

  var initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;

  // The base Class implementation (does nothing)
  this.Class = function(){};

  // Create a new Class that inherits from this class
  Class.extend = function() {

      var prop;

      var _super = this.prototype;

    if (arguments.length > 1) {

        var interfaces = AJS.$.makeArray(arguments);

        prop = interfaces.pop();

        var completeInterface;

        AJS.$.each(interfaces, function (i, inter) {
            if (completeInterface) {
                completeInterface = completeInterface.extend(inter);
            } else {
                completeInterface = inter;
            }
        });

        return completeInterface.extend(this.prototype).extend(prop);

    } else {
        prop = arguments[0];
    }


    // Instantiate a base class (but only create the instance,
    // don't run the init constructor)
    initializing = true;
    var prototype = new this();
    initializing = false;

    // Copy the properties over onto the new prototype
    for (var name in prop) {
      // Check if we're overwriting an existing function

        if (prototype[name] = typeof prop[name] == "function" &&
        typeof _super[name] == "function" && fnTest.test(prop[name])) {
            prototype[name] = (function(name, fn){
              return function() {
                var tmp = this._super;

                // Add a new ._super() method that is the same method
                // but on the super-class
                this._super = _super[name];

                // The method only need to be bound temporarily, so we
                // remove it when we're done executing
                var ret = fn.apply(this, arguments);
                this._super = tmp;

                return ret;
              };
            })(name, prop[name]);
        } else if (typeof _super[name] === "object") {
            var newObj = begetObject(prop[name]);

            AJS.$.each(_super[name], function (name, obj) {
                if (!newObj[name]) {
                    newObj[name] = obj;
                } else if (typeof newObj[name] === "object") {
                    var newSubObj = begetObject(newObj[name]);
                    AJS.$.each(obj, function (subName, subObj) {
                        if (!newSubObj[subName]) {
                            newSubObj[subName] = subObj;
                        }
                    });
                    newObj[name] = newSubObj;
                }
            });

            prototype[name] = newObj;
        } else {
            prototype[name] = prop[name];
        }
    }

    // The dummy class constructor
    function Class() {
      // All construction is actually done in the init method
      if ( !initializing && this.init )
        this.init.apply(this, arguments);
    }

    // Populate our constructed prototype object
    Class.prototype = prototype;

    // Enforce the constructor to be what we expect
    Class.constructor = Class;

    // And make this class extendable
    Class.extend = arguments.callee;

    return Class;
  };
})();

var Interface = Class.extend({});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:jirajs', location = '/scripts/jira/autocomplete.js' */
/**
 * Ajax autocomplete
 *
 * @module jira.widget.autocomplete
 * @author Scott Harwood
 * @requires jQuery > v1.2, jira.widget.fauxSelect
 * @since 4.0
 *
 */


AJS.namespace("jira.widget.autocomplete");

/**
 * Designed for prototypial inheritance !!Abstract only
 * @abstract autocomplete
 */
jira.widget.autocomplete = function() {

    var inFocus;

    /**
     * Calls a callback after specified delay
     * @method {private} delay
     * @param {Number} l - length of delay in <em>seconds</em>
     * @param {Function} callback - function to call after delay
     */
    var delay = function(callback,l) {
        if (delay.t) {
            clearTimeout(delay.t);
            delay.t = undefined;
        }
        delay.t = setTimeout(callback, l * 1000);
    };

    var INVALID_KEYS = {
          9: true,
         13: true,
         14: true,
         25: true,
         27: true,
         38: true,
         40: true,
        224: true
    };

    return {

        /**
        * Checks whether a saved version (cached) of the request exists, if not performs a request and saves response,
        * then dispatches saved response to <em>renderSuggestions</em> method.
        *
        * @method {public} dispatcher
        */
        dispatcher: function() {},


        /**
         * Gets cached response
         *
         * @method {public} getSavedResponse
         * @param {String} val
         * @returns {Object}
         */
        getSavedResponse: function() {},

        /**
         * Saves response
         *
         * @method {public} saveResponse
         * @param {String} val
         * @param {Object} response
         */
        saveResponse: function() {},

        /**
         * Called to render suggestions. Used to define interface only.
         * Rendering is difficult to make generic, best to leave this to extending prototypes.
         *
         * @method {public} renderSuggestions
         * @param {Object} res - results object
         */
        renderSuggestions: function() {},

        /**
         * Disables autocomplete. Useful for shared inputs.
         * i.e The selection of a radio button may disable the instance
         * @method {Public} disable
         */
        disable: function() {
            this.disabled = true;
        },

        /**
         * Enables autocomplete. Useful for shared inputs.
         * i.e The selection of a radio button may disable the instance
         * @method {Public} enable
         */
        enable: function() {
            this.disabled = false;
        },

        /**
         * Sets instance variables from options object
         * to do: make function create getters and setters
         * @method {public} set
         * @param {Object} options
         */
        set: function(options) {
            for (var name in options) {
                // safeguard to stop looping up the inheritance chain
                if (options.hasOwnProperty(name)) {
                    this[name] = options[name];
                }
            }
        },

        /**
         * Adds value to input field
         * @method {public} completeField
         * @param {String} value
         */
        completeField: function(value) {
            if (value) {
                this.field.val(value).focus();
            }
        },

        /**
         * Returns the text from the start of the field up to the end of
         * the position where suggestions are generated from.
         */
        textToSuggestionCursorPosition: function () {
            return this.field.val();
        },


        /**
         * Allows users to navigate/select suggestions using the keyboard
         * @method {public} addSuggestionControls
         */
         addSuggestionControls: function(suggestionNodes) {

            // reference to this for closures
            var that = this;

            /**
             * Make sure the index is within the threshold
             * Looks ugly! Has to be a better way.
             * @method {private} evaluateIndex
             * @param {Integer} idx
             * @param {Integer} max
             * @return {Integer} valid threshold
             */
            var evaluateIndex = function(idx, max) {
                var minBoundary = (that.autoSelectFirst === false) ? -1 : 0;
                if (that.allowArrowCarousel) {
                    if (idx > max) {
                        return minBoundary;
                    } else if (idx < minBoundary) {
                        return max;
                    } else {
                        return idx;
                    }
                }
                else {
                    if (idx > max) {
                        return max;
                    } else if (idx < minBoundary) {
                        that.responseContainer.scrollTop(0);
                        return minBoundary;
                    } else {
                        return idx;
                    }
                }
            };

            /**
             * Highlights focused node and removes highlight from previous.
             * Actual highlight styles to come from css, adding and removing classes here.
             * @method {private} setActive
             * @param {Integer} idx - Index of node to be highlighted
             */
            var setActive = function(idx) {

                    // if nothing is selected, select the first suggestion
                    if (that.selectedIndex !== undefined && that.selectedIndex > -1) {
                        that.suggestionNodes[that.selectedIndex][0].removeClass("active");
                    }
                    that.selectedIndex = evaluateIndex(idx, that.suggestionNodes.length-1);
                    if (that.selectedIndex > -1) {
                        that.suggestionNodes[that.selectedIndex][0].addClass("active");
                    }
            };

             /**
              * Checks to see if there is actually a suggestion in focus before attempting to use it
              * @method {private} evaluateIfActive
              * @returns {boolean}
              */
             var evaluateIfActive = function() {
                return that.suggestionNodes && that.suggestionNodes[that.selectedIndex] &&
                       that.suggestionNodes[that.selectedIndex][0].hasClass("active");
             };


            /**
             * When the responseContainer (dropdown) is visible listen for keyboard events
             * that represent focus or selection.
             * @method {private} keyPressHandler
             * @param {Object} e - event object
             */
            var keyPressHandler = function(e) {
                // only use keyboard events if dropdown is visible
                if (that.responseContainer.is(":visible")) {
                    // if enter key is pressed check that there is a node selected, then hide dropdown and complete field
                    if (e.keyCode === 13) {
                        if (evaluateIfActive() && !that.pendingRequest) {
                            that.completeField(that.suggestionNodes[that.selectedIndex][1]);
                        }
                        e.preventDefault();
                    }
                }
            };

            /**
            * sets focus on suggestion nodes using the "up" and "down" arrows
            * These events need to be fired on mouseup as modifier keys don't register on keypress
            * @method {private} keyUpHandler
            * @param {Object} e - event object
            */
            var keyboardNavigateHandler = function(e) {

                // only use keyboard events if dropdown is visible
                if (that.responseContainer.is(":visible")) {

                    // keep cursor inside input field
                    if (that.field[0] !== document.activeElement){
                        that.field.focus();
                    }
                    // move selection down when down arrow is pressed
                    if (e.keyCode === 40) {
                        setActive(that.selectedIndex + 1);
                        if (that.selectedIndex >= 0) {
                            // move selection up when up arrow is pressed
                            var containerHeight = that.responseContainer.height();
                            var bottom = that.suggestionNodes[that.selectedIndex][0].position().top + that.suggestionNodes[that.selectedIndex][0].outerHeight() ;

                            if (bottom - containerHeight > 0){
                                that.responseContainer.scrollTop(that.responseContainer.scrollTop() + bottom - containerHeight + 2);
                            }
                        } else {
                            that.responseContainer.scrollTop(0);
                        }
                        e.preventDefault();
                    } else if (e.keyCode === 38) {
                        setActive(that.selectedIndex-1);
                        if (that.selectedIndex >= 0) {
                            // if tab key is pressed check that there is a node selected, then hide dropdown and complete field
                            var top = that.suggestionNodes[that.selectedIndex][0].position().top;
                            if (top < 0){
                                that.responseContainer.scrollTop(that.responseContainer.scrollTop() + top - 2);
                            }
                        }
                        e.preventDefault();
                    } else if (e.keyCode === 9) {
                        if (evaluateIfActive()) {
                            that.completeField(that.suggestionNodes[that.selectedIndex][1]);
                            e.preventDefault();
                        } else {
                            that.dropdownController.hideDropdown();
                        }
                    }
                }
            };

            if (suggestionNodes.length) {

                this.selectedIndex = 0;
                this.suggestionNodes = suggestionNodes;

                for (var i=0; i < that.suggestionNodes.length; i++) {
                    var eventData = { instance: this, index: i };
                    this.suggestionNodes[i][0]
                        .bind("mouseover", eventData, activate)
                        .bind("mouseout", eventData, deactivate)
                        .bind("click", eventData, complete);
                }

                // make sure we don't bind more than once
                if (!this.keyboardHandlerBinded) {
                    jQuery(this.field).keypress(keyPressHandler);
                    if (jQuery.browser.mozilla) {
                        jQuery(this.field).keypress(keyboardNavigateHandler);
                    } else {
                        jQuery(this.field).keydown(keyboardNavigateHandler);
                    }
                    this.keyboardHandlerBinded = true;
                }

                // automatically select the first in the list
                if(that.autoSelectFirst === false) {
                    setActive(-1);
                } else {
                    setActive(0);
                }

                // sets the autocomplete singleton infocus var to this instance
                // is used to toggle event propagation. In short, the instance that it is set to will not hide the
                // dropdown each time you click the input field
                inFocus = this;
            }

            function activate(event) {
                if (that.dropdownController.displayed) {
                    setActive(event.data.index);
                }
            }
            function deactivate(event) {
                if (event.data.index === 0) {
                    that.selectedIndex = -1;
                }
                jQuery(this).removeClass("active");
            }
            function complete(event) {
                that.completeField(that.suggestionNodes[event.data.index][1]);
            }
        },


        /**
         * Uses jquery empty command, this is VERY important as it unassigns handlers
         * used for mouseover, click events which expose an opportunity for memory leaks
         * @method {public} clearResponseContainer
         */
        clearResponseContainer: function() {
            this.responseContainer.empty();
            this.suggestionNodes = undefined;
        },

        /**
         * function {Privileged} delay
         * @param response
         */
        delay: delay,

        /**
         * Builds HTML container for suggestions.
         * Positions container top position to be that of the field height
         * @method {public} buildResponseContainer
         */
        buildResponseContainer: function() {
            var inputParent = this.field.parent().addClass('atlassian-autocomplete');
            this.responseContainer = jQuery(document.createElement("div"));
            this.responseContainer
                .addClass("suggestions")
                .css({top: this.field.outerHeight() + "px"})
                .appendTo(inputParent);
        },

        /**
         * Validates the keypress by making sure the field value is beyond the set threshold and the key was either an
         * up or down arrow
         * @method {public} keyUpHandler
         * @param {Object} e - event object
         */
        keyUpHandler: (function () {
            var isIe8 = jQuery.browser.msie && jQuery.browser.version == 8;
            function callback() {
                if (!this.responseContainer) {
                    this.buildResponseContainer();
                }
                // send value to dispatcher to check if we have already got the response or if we need to go
                // back to the server
                this.dispatcher(this.field.val());
            }

            return function (e) {
                // only initialises once the field length is past set length
                if (this.field.val().length >= this.minQueryLength) {
                    // don't do anything if the key pressed is "enter" or "down" or "up" or "right" "left"
                    if (!(e.keyCode in INVALID_KEYS) || (this.responseContainer && !this.responseContainer.is(":visible") && (e.keyCode == 38 || e.keyCode == 40))) {
                        if (isIe8) {
                            // Performance workaround for IE8 (but not IE7): excessive DOM manipulation (JRADEV-3142)
                            delay(jQuery.proxy(callback, this), 0.200);
                        } else {
                            callback.call(this);
                        }
                    }
                }
                return e;
            };
        })(),

        /**
         * Adds in methods via AOP to handle multiple selections
         * @method {Public} addMultiSelectAdvice
         */
        addMultiSelectAdvice: function(delim) {

            // reference to this for closures
            var that = this;

            /**
             * Alerts user if value already exists
             * @method {private} alertUserValueAlreadyExists
             * @param {String} val - value that already exists, will be displayed in message to user.
             */
            var alertUserValueAlreadyExists = function(val) {

                // check if there is an existing alert before adding another
                if (!alertUserValueAlreadyExists.isAlerting) {

                    alertUserValueAlreadyExists.isAlerting = true;

                    // create alert node and append it to the input field's parent, fade it in then out with a short
                    // delay in between.
                    //TODO: JRA-1800 - Needs i18n!  
                    var userAlert = jQuery(document.createElement("div"))
                    .css({"float": "left", display: "none"})
                    .addClass("warningBox")
                    .html("Oops! You have already entered the value <em>" + val + "</em>" )
                    .appendTo(that.field.parent())
                    .show("fast", function(){
                        // display message for 4 seconds before fading out
                        that.delay(function(){
                            userAlert.hide("fast",function(){
                                // removes element from dom
                                userAlert.remove();
                                alertUserValueAlreadyExists.isAlerting = false;
                            });
                        }, 4);
                    });
                }
            };

          // rather than request the entire field return the last comma seperated value
            jQuery.aop.before({target: this, method: "dispatcher"}, function(innvocation){
                // matches everything after last comma
                var val = this.field.val();
                innvocation[0] = jQuery.trim(val.slice(val.lastIndexOf(delim) + 1));
                return innvocation;
            });

            // rather than replacing this field just append the new value
            jQuery.aop.before({target: this, method: "completeField"}, function(args){
                var valueToAdd = args[0],
                // create array of values
                untrimmedVals = this.field.val().split(delim);
                // trim the values in the array so we avoid extra spaces being appended to the usernames - see JRA-20657
                var trimmedVals = jQuery(untrimmedVals).map(function() {
                        return jQuery.trim(this);
                   }).get();
                // check if the value to append already exists. If it does then call alert to to tell user and sets
                // the last value to "". The value to add will either appear:
                // 1) at the start of the string
                // 2) after some whitespace; or
                // 3) directly after the delimiter
                // It is assumed that the value is delimited by the delimiter character surrounded by any number of spaces.
                if (!this.allowDuplicates && new RegExp("(?:^|[\\s" + delim + "])" + valueToAdd + "\\s*" + delim).test(this.field.val())) {
                    alertUserValueAlreadyExists(valueToAdd);
                    trimmedVals[trimmedVals.length-1] = "";
                } else {
                    // add the new value to the end of the array and then an empty value so we
                    // can get an extra delimiter at the end of the joined string
                    trimmedVals[trimmedVals.length-1] = valueToAdd;
                    trimmedVals[trimmedVals.length] = "";
                }

                // join the array of values with the delimiter plus an extra space to make the list of values readable
                args[0] = trimmedVals.join(delim.replace(/([^\s]$)/,"$1 "));

                return args;
            });
        },


        /**
         * Adds and manages state of dropdown control
         * @method {Public} addDropdownAdvice
         */
        addDropdownAdvice: function() {
            var that = this;

            // add dropdown functionality to response container
            jQuery.aop.after({target: this, method: "buildResponseContainer"}, function(args){
                this.dropdownController = jira.widget.dropdown.Autocomplete({target: this, method: "renderSuggestions"}, this.responseContainer);

                if (AJS.$.browser.msie) { // We need to remove this class for IE as it has position relative which causes content further down the dom to show through the suggestions
                    jQuery.aop.before({ target: this.dropdownController, method: "displayDropdown" }, function () {
                        that.field.parent().addClass("atlassian-autocomplete");
                    });

                    jQuery.aop.after({ target: this.dropdownController, method: "hideDropdown" }, function () {
                        that.field.parent().removeClass("atlassian-autocomplete");
                    });
                }

                return args;
            });

            // display dropdown afer suggestions are updated
            jQuery.aop.after({target: this, method: "renderSuggestions"}, function(args){
                if (args && args.length > 0) {
                    this.dropdownController.displayDropdown();
                } else {
                    this.dropdownController.hideDropdown();
                }
                return args;
            });

            // hide dropdown after suggestion value is applied to field
            jQuery.aop.after({target: this, method: "completeField"}, function(args){
                this.dropdownController.hideDropdown();
                return args;
            });

            jQuery.aop.after({target: this, method: "keyUpHandler"}, function(e) {
                // only initialises once the field length is past set length
                if ((!(this.field.val().length >= this.minQueryLength) || e.keyCode === 27)
                        && this.dropdownController && this.dropdownController.displayed) {
                    this.dropdownController.hideDropdown();
                    if (e.keyCode === 27) {
                        e.stopPropagation();
                    }
                }
                return e;
            });
        },

        /**
         * Initialises autocomplete by setting options, and assigning event handler to input field.
         * @method {public} init
         * @param {Object} options
         */
        init: function(options) {
            var that = this;
            this.set(options);
            this.field = this.field || jQuery("#" + this.fieldID);
             // turn off browser default autocomplete
            this.field.attr("autocomplete","off")
            .keyup(function(e){
                if (!that.disabled) {
                    that.keyUpHandler(e);
                }
            })
            .keydown(function (e) {
                var ESC_KEY = 27;
                // do not clear field in IE
                if (e.keyCode === ESC_KEY && that.responseContainer && that.responseContainer.is(":visible")) {
                    e.preventDefault();
                }
            })
            // this will stop the dropdown with the suggestions hiding whenever you click the field
            .click(function(e){
                if (inFocus === that) {
                    e.stopPropagation();
                }
            });

            this.addDropdownAdvice();

            if (options.delimChar) {
                this.addMultiSelectAdvice(options.delimChar);
            }
        }
    };

}();


/**
 * Designed for prototypial inheritance !!Abstract only
 * @abstract REST
 */
jira.widget.autocomplete.REST = function() {

    // prototypial inheritance (http://javascript.crockford.com/prototypal.html)
    var that = begetObject(jira.widget.autocomplete);

   /**
    * Checks whether a saved version (cached) of the request exists, if not performs a request and saves response,
    * then dispatches saved response to <em>renderSuggestions</em> method.
    * @method {public} dispatcher
    * @param {String} reqFieldVal
    */
    that.dispatcher = function(reqFieldVal) {

        // reference to "this" for use in closures
         var that = this;

         if (reqFieldVal.length < this.minQueryLength) {
             return;
         }

         if (!this.getSavedResponse(reqFieldVal)) {



            // Add a delay so that we don't go the server for every keypress,
            // some people type fast and may have already typed an entire word by the time the server comes
            // back with a response

            this.delay(function(){

                that.pendingRequest = true;

                var params = that.getAjaxParams();
                params.data.query = reqFieldVal;
                params.success = function(data){
                    // for use later so we don't have to go back to the server for the same query
                    that.saveResponse(reqFieldVal, data);
                    // creates html elements from JSON object
                    that.responseContainer.scrollTop(0);
                    that.renderSuggestions(data);
                };

                params.complete = function () {
                    that.pendingRequest = false;
                };

                AJS.$.ajax(params);

            }, that.queryDelay);

        } else {
            that.renderSuggestions(that.getSavedResponse(reqFieldVal));
            that.responseContainer.scrollTop(0);
        }
    };


    that.getAjaxParams = function(){};

    /**
     * Gets cached response from <em>requested</em> object
     * @method {public} getSavedResponse
     * @param {String} val
     * @returns {Object}
     */
    that.getSavedResponse = function(val) {
        if (!this.requested) {
            this.requested = {};
        }
        return this.requested[val];
    };

    /**
     * Saves response to <em>requested</em> object
     * @method {public} saveResponse
     * @param {String} val
     * @param {Object} response
     */
    that.saveResponse = function(val, response) {
        if (typeof val === "string" && typeof response === "object") {
            if (!this.requested) {
                this.requested = {};
            }
            this.requested[val] = response;
        }
    };

    return that;

}();

/**
 * User picker - converted from YUI based autocomplete. There is some code in here that probably isn't necessary,
 * if removed though selenium tests would need to be re-written.
 * @constructer Users
 * @param options
 * @returns {Object}
 */
jira.widget.autocomplete.Users = function(options) {

    // prototypial inheritance (http://javascript.crockford.com/prototypal.html)
    var that = begetObject(jira.widget.autocomplete.REST);

    that.getAjaxParams = function(){
        return {
            url: contextPath + "/rest/api/1.0/users/picker",
            data: {
                fieldName: options.fieldID
            },
            dataType: "json",
            type: "GET"
        };
    };

    /**
     * Create html elements from JSON object
     * @method renderSuggestions
     * @param {Object} response - JSON object
     * @returns {Array} Multidimensional array, one column being the html element and the other being its
     * corresponding complete value.
     */
    that.renderSuggestions = function(response) {


        var resultsContainer, suggestionNodes = [];

        // remove previous results
        this.clearResponseContainer();


        if (response && response.users && response.users.length > 0) {

            resultsContainer = jQuery("<ul/>").appendTo(this.responseContainer);

            jQuery(response.users).each(function() {

                // add html element and corresponding complete value  to sugestionNodes Array
                suggestionNodes.push([jQuery("<li/>")
                .html(this.html)
                .appendTo(resultsContainer), this.name]);

            });
        }

        if (response.footer) {
            this.responseContainer.append(jQuery("<div/>")
            .addClass("yui-ac-ft")
            .html(response.footer)
            .css("display","block"));
        }

        if (suggestionNodes.length > 0) {
            that.addSuggestionControls(suggestionNodes);
            AJS.$('.atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li').textOverflow('&#x2026;',true);
        }

        return suggestionNodes;

    };

    // Use autocomplete only once the field has at least 2 characters
    options.minQueryLength = 2;

    // wait 1/4 of after someone starts typing before going to server
    options.queryDelay = 0.25;

    that.init(options);

    return that;

};

/**
 * @constructor Issues
 * @param options
 */
jira.widget.autocomplete.Issues = function(options) {

    // prototypial inheritance (http://javascript.crockford.com/prototypal.html)
    var that = begetObject(jira.widget.autocomplete.REST);


    that.getAjaxParams = function(){
        return {
            url: contextPath + "/rest/api/1.0/issues/picker",
            data: options.ajaxData,
            dataType: "json",
            type: "GET"
        };
    };

    /**
     * @method renderSuggestions
     * @param {Object} response
     */
    that.renderSuggestions = function(response) {

        var resultsContainer, suggestionNodes = [];

        // remove previous results
        this.clearResponseContainer();

        if (response && response.sections && response.sections.length > 0) {

            resultsContainer = AJS.$("<ul/>").appendTo(this.responseContainer);

            AJS.$(response.sections).each(function() {
                var section = this;
                var subSection = AJS.$("<div/>").attr("id", options.fieldID + "_s_" + section.id).addClass("yag").text(section.label);
                if (section.sub){
                    subSection.append(AJS.$("<span/>").addClass("yagt").text("(" + section.sub + ")"));
                }
                resultsContainer.append(AJS.$("<li/>").append(subSection).mouseover(function(){
                        AJS.$(this).addClass("active");
                    }).mouseout(function(){
                        AJS.$(this).removeClass("active");
                    })
                );

                if (section.msg){
                    // add message node
                    var msg = AJS.$("<div/>").attr("id", options.fieldID + "_i_" + section.id + "_n").addClass("yad").text(section.msg);
                    resultsContainer.append(AJS.$("<li/>").append(msg).mouseover(function(){
                            AJS.$(this).addClass("active");
                        }).mouseout(function(){
                            AJS.$(this).removeClass("active");
                        })
                    );
                }

                if (section.issues && section.issues.length > 0){
                    AJS.$(section.issues).each(function(){
                        // add issue
                        var imgUrl;
                        if (/^http/.test(this.img)){
                            imgUrl = this.img;
                        } else {
                            imgUrl =  contextPath + this.img;
                        }
                        var issueNode = AJS.$("<li/>").append(
                            AJS.$("<div/>").attr("id", options.fieldID + "_i_" + section.id + "_" + this.key).addClass("yad").append(
                                AJS.$("<table/>").addClass("yat").attr({
                                    cellpadding: "0",
                                    cellspacing: "0"
                                }).append(
                                    AJS.$("<tr/>").append(
                                        AJS.$("<td/>").append(
                                            AJS.$("<img/>").attr("src", imgUrl)
                                        )
                                    ).append(
                                         AJS.$("<td/>").append(
                                            AJS.$("<div/>").addClass("yak").html(this.keyHtml)
                                        )
                                    ).append(
                                         AJS.$("<td/>").css("width", "100%").html(this.summary)
                                    )
                                )
                            )
                        );

                        resultsContainer.append(issueNode);
                        suggestionNodes.push([issueNode, this.key]);
                    });                    
                }
            });

            that.addSuggestionControls(suggestionNodes);

            return suggestionNodes;

        }
    };
    options.minQueryLength = 1;
    options.queryDelay = 0.25;

    that.init(options);

    return that;

};

jira.widget.autocomplete.Users.init = function(parent){
    AJS.$("fieldset.user-picker-params", parent).each(function(){
        var params = AJS.parseOptionsFromFieldset(AJS.$(this)),
            field = (params.fieldId || params.fieldName),
            $container = AJS.$("#" + field + "_container");


        $container.find("a.popup-trigger").click(function(e){
            var url = contextPath,
                vWinUsers;

            e.preventDefault();

            if (!params.formName)
            {
                params.formName = $container.find("#" + field).parents("form").attr("name");
            }

            if (params.actionToOpen) {
                url = url + params.actionToOpen;
            } else {
                url = url + '/secure/popups/UserPickerBrowser.jspa';
            }
            url += '?formName=' + params.formName + '&';
            url += 'multiSelect=' + params.multiSelect + '&';
            url += 'element=' + field;

            vWinUsers = window.open(url, 'UserPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=750,scrollbars=yes');
            vWinUsers.opener = self;
            vWinUsers.focus();
        });


        if (params.userPickerEnabled === true ){
            jira.widget.autocomplete.Users({
                field: parent ? parent.find("#" + field) : null,
                fieldID: field,
                delimChar: params.multiSelect === false ? undefined : ",",
                ajaxData: {
                    fieldName: params.fieldName
                }
            });
        }
    });
};
AJS.$(document).bind("dialogContentReady", function(e, dialog){
    jira.widget.autocomplete.Users.init(dialog.get$popupContent());
});

jira.widget.autocomplete.Issues.init = function(){

    AJS.namespace("jira.issuepicker");

    AJS.$("fieldset.issue-picker-params").each(function(){
        var params = AJS.parseOptionsFromFieldset(AJS.$(this)),
            $container = AJS.$("#" + params.fieldId + "-container").add("#" + params.fieldName + "_container");

        $container.find("a.popup-trigger").click(function(e){
            var url = contextPath + '/secure/popups/IssuePicker.jspa?';
            url += 'currentIssue=' + params.currentIssueKey + '&';
            url += 'singleSelectOnly=' + params.singleSelectOnly + '&';
            url += 'showSubTasks=' + params.showSubTasks + '&';
            url += 'showSubTasksParent=' + params.showSubTaskParent;
            if (params.currentProjectId && params.currentProjectId != "")
            {
                url += '&selectedProjectId=' + params.currentProjectId;
            }

            /**
             * Provide a callback to the window for execution when the user selects an issue. This implies that only one
             * popup can be displayed at a time.
             * 
             * @param keysMap the issue keys selected.
             */
            jira.issuepicker.callback = function(keysMap){
                var $formElement, keys = [];

                keysMap = JSON.parse(keysMap);

                if (params.fieldId && keys) {
                    $formElement = AJS.$("#" + params.fieldId);
                    if ($formElement){
                        AJS.$.each(keysMap, function () {
                            keys.push(this.value);
                        });
                        $formElement.val(keys.join(", "));
                    }
                }
            };

            var vWinUsers = window.open(url, 'IssueSelectorPopup', 'status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable');
            vWinUsers.opener = self;
            vWinUsers.focus();
            e.preventDefault();
        });

        if (!params.fieldId) {
            params.fieldId = params.fieldName;
        }
        
        if (params.issuePickerEnabled === true){
            jira.widget.autocomplete.Issues({
                fieldID: params.fieldId,
                delimChar: params.singleSelectOnly === true ? undefined : ",",
                ajaxData: params
            });
        }
    });
};
AJS.$(function(){
    jira.widget.autocomplete.Users.init();
    jira.widget.autocomplete.Issues.init();
});

AJS.$(function(){
    AJS.$("fieldset.user-searcher-params").each(function(){
        var params = AJS.parseOptionsFromFieldset(AJS.$(this)),
            $container = AJS.$("#" + params.fieldId + "_container");

        if (params.userPickerEnabled === true){
            var autocompleter = jira.widget.autocomplete.Users({
                fieldID: params.fieldId,
                delimChar: params.multiSelect === true ? "," : undefined,
                ajaxData: {
                    fieldName: params.fieldName
                }
            });
        }

        var setupFields = function(related){
            var field = AJS.$("#" + params.fieldId);
            var userImage = AJS.$("#" + params.fieldId + "Image");
            var groupImage = AJS.$("#" + params.fieldId + "GroupImage");
            var fieldDesc = AJS.$("#" + params.fieldId + "_desc");
            if (related === "select.list.none"){
                field.val("").attr("disabled", "true");
                userImage.hide();
                groupImage.hide();
                fieldDesc.hide();
            } else{
                field.removeAttr("disabled");
                if (related === "select.list.group"){
                    userImage.hide();
                    groupImage.show();
                    if (params.userPickerEnabled === true){
                        autocompleter.disable();
                        fieldDesc.hide();
                    }
                } else {
                    userImage.show();
                    groupImage.hide();
                    if (params.userPickerEnabled === true){
                        autocompleter.enable();
                        fieldDesc.show();
                    }
                }
            }
        };

        AJS.$("#" + params.userSelect).change(function(){
            var related = AJS.$(this).find("option:selected").attr("rel");
            setupFields(related);
        }).find("option:selected").each(function(){
            setupFields(AJS.$(this).attr("rel"));
        });

        $container.find("a.user-popup-trigger").click(function(e){
            var url = contextPath + '/secure/popups/UserPickerBrowser.jspa?';
            url += 'formName=' + params.formName + '&';
            url += 'multiSelect=' + params.multiSelect + '&';
            url += 'element=' + params.fieldId;

            var vWinUsers = window.open(url, 'UserPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=750,scrollbars=yes');
            vWinUsers.opener = self;
            vWinUsers.focus();
            e.preventDefault();
        });

        $container.find("a.group-popup-trigger").click(function(e){
            var url = contextPath + '/secure/popups/GroupPickerBrowser.jspa?';
            url += 'formName=' + params.formName + '&';
            url += 'multiSelect=' + params.multiSelect + '&';
            url += 'element=' + params.fieldId;

            var vWinUsers = window.open(url, 'GroupPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=750,scrollbars=yes');
            vWinUsers.opener = self;
            vWinUsers.focus();
            e.preventDefault();
        });
    });
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:jirajs', location = '/scripts/jira/dropdown.js' */
/**
 * Creates a dropdown list from a JSON obect
 * @module dropdown
 * @author Scott Harwood
 * @requires jQuery > v1.2
 */


AJS.namespace("jira.widget.dropdown");

/**
 * @abstract dropdown
 */
jira.widget.dropdown = function() {

    // private

    var instances = [];

    return {

        // public

        /**
         * Adds this instance to private var <em>instances</em>
         * This reference can be used to access all instances
         * @function {public} addInstance
         */
        addInstance: function() {
            instances.push(this);
        },


        /**
         * Calls the hideList method on all instances of <em>dropdown</em>
         * @function {public} hideInstances
         */
        hideInstances: function() {
            var that = this;
            jQuery(instances).each(function(){
                if (that !== this) {
                    this.hideDropdown();
                }
            });
        },

        
        getHash: function () {
            if (!this.hash) {
                this.hash = {
                    container: this.dropdown,
                    hide: this.hideDropdown,
                    show: this.displayDropdown
                };
            }
            return this.hash;
        },

        /**
         * Calls <em>hideInstances</em> method to hide all other dropdowns.
         * Adds <em>active</em> class to <em>dropdown</em> and styles to make it visible.
         * @function {public} displayDropdown
         */
        displayDropdown: function() {
            if (jira.widget.dropdown.current === this) {
                return;
            }

            this.hideInstances();
            jira.widget.dropdown.current = this;
            this.dropdown.css({display: "block"});

            this.displayed = true;

            var dd = this.dropdown;
            setTimeout(function() {
                // Scroll dropdown into view
                var win = jQuery(window);
                var minScrollTop = dd.offset().top + dd.attr("offsetHeight") - win.height() + 10;

                if (win.scrollTop() < minScrollTop) {
                    jQuery("html,body").animate({scrollTop: minScrollTop}, 300, "linear");
                }
            }, 100);
        },

        /**
         *
         * Removes <em>active</em> class from <em>dropdown</em> and styles to make it hidden.
         * @function {public} hideDropdown
         */
        hideDropdown: function() {
            if (this.displayed === false) {
                return;
            }

            jira.widget.dropdown.current = null;
            this.dropdown.css({display: "none"});

            this.displayed = false;
        },

        /**
         * Initialises instance by, applying primary handler, user options and a Internet Explorer hack.
         * function {public} init
         * @param {HTMLelement} trigger
         * @param {HTMLelement} dropdown
         */
        init: function(trigger, dropdown) {

            var that = this;

            this.addInstance(this);
            this.dropdown = jQuery(dropdown);

            this.dropdown.css({display: "none"});

            // hide dropdown on tab
            jQuery(document).keydown(function(e){
                if(e.keyCode === 9) {
                    that.hideDropdown();
                }
            });

            // this instance is triggered by a method call
            if (trigger.target) {
                jQuery.aop.before(trigger, function(){
                    if (!that.displayed) {
                        that.displayDropdown();
                    }
                });

            // this instance is triggered by a click event
            } else {
                that.dropdown.css("top",jQuery(trigger).outerHeight() + "px");
                trigger.click(function(e){
                    if (!that.displayed) {
                        that.displayDropdown();
                        e.stopPropagation();
                        // lets not follow the link (if it is a link)
                    } else {
                        that.hideDropdown();
                    }
                    e.preventDefault();
                });
            }

            // hide dropdown when click anywhere other than on this instance
            jQuery(document.body).click(function(){
                if (that.displayed) {
                    that.hideDropdown();
                }
            });
        }
    };

}();

/**
 * Standard dropdown constructor 
 * @constucter Standard
 * @param {HTMLelement} trigger
 * @param {HTMLelement} dropdown
 * @return {Object} - instance
 */
jira.widget.dropdown.Standard = function(trigger, dropdown) {

    var that = begetObject(jira.widget.dropdown);
    that.init(trigger, dropdown);

    return that;
};

/**
 * Standard dropdown constructor
 * @constucter Standard
 * @param {HTMLelement} trigger
 * @param {HTMLelement} dropdown
 * @return {Object} - instance
 */
jira.widget.dropdown.Autocomplete = function(trigger, dropdown) {

    var that = begetObject(jira.widget.dropdown);

    that.init = function(trigger, dropdown) {

        this.addInstance(this);
        this.dropdown = jQuery(dropdown).click(function(e){
            // lets not hide dropdown when we click on it
            e.stopPropagation();
        });
        this.dropdown.css({display: "none"});

        // this instance is triggered by a method call
        if (trigger.target) {
            jQuery.aop.before(trigger, function(){
                if (!that.displayed) {
                    that.displayDropdown();
                }
            });

        // this instance is triggered by a click event
        } else {
            trigger.click(function(e){
                if (!that.displayed) {
                    that.displayDropdown();
                    e.stopPropagation();
                }
            });
        }

        // hide dropdown when click anywhere other than on this instance
        jQuery(document.body).click(function(){
            if (that.displayed) {
                that.hideDropdown();
            }
        });
    };

    that.init(trigger, dropdown);

    return that;
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboojirajs', location = '/scripts/autocomplete-bamboo.js' */
AJS.namespace("BAMBOO.widget.autocomplete");


BAMBOO.widget.autocomplete.Variables = function(options) {

    // prototypial inheritance (http://javascript.crockford.com/prototypal.html)
    var that = begetObject(jira.widget.autocomplete.REST);

    that.getAjaxParams = function(){
        return {
            url: 'rest/api/latest/plan/%PLAN%?expand=variableContext'.replace('%PLAN%', that.planKey),
            data: options.ajaxData,
            dataType: "json",
            type: "GET"
        };
    };

    that.dispatcher = function(val) {
        var that = this,
            selectionRange = that.field.selectionRange(),
            parseValue = val.substring(0, selectionRange.start),
            match = parseValue.match(that.variableRegEx);
    };

    var defaults = {
        minQueryLength: 1,
        variableRegEx: /\$\{([a-z0-9\.]*)$/i
    };

    options = AJS.$.extend(true, defaults, options);
    that.init(options);

    return that;
};

BAMBOO.widget.autocomplete.Variables.init = function(parent) {
    AJS.$(".field-group .autocomplete-variables", parent).each(function() {
        var $item = AJS.$(this);
        var planKey = null;
        if (BAMBOO.currentPlan)
        {
            planKey = BAMBOO.currentPlan.key;
        }
        BAMBOO.widget.autocomplete.Variables({
            field: $item,
            planKey: planKey
        });
    })
};


AJS.$(document).bind("dialogContentReady", function(e, dialog){
    BAMBOO.widget.autocomplete.Variables.init(dialog.get$popupContent());
});

AJS.$(function(){
    BAMBOO.widget.autocomplete.Variables.init();
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:xsrf', location = '/scripts/xsrf.js' */
AJS.$.ajaxPrefilter(
        function(options, originalOptions, jqXHR) {
            function isMutativeHttpMethod(method) {
                return !(/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
            }
            if (isMutativeHttpMethod(options.type)) {
                options.crossDomain = false;
                jqXHR.setRequestHeader("X-Atlassian-Token", "no-check");
            }
        });

BAMBOO.XsrfUtils = (function ($) {
    function getXsrfTokenFromCookie() {
        return $.cookie('atl.xsrf.token');
    }

    function addXsrfToken($form) {
        $form.append($("<input>", {type: "hidden", name: "atl_token", value: getXsrfTokenFromCookie()}));
    }

    function postOnLinkClick(event) {
        if (event.isDefaultPrevented()) {
            return;
        }

        var $form = $("<form/>", {method: "post", action: this.href});
        addXsrfToken($form);

        $("body").append($form);

        event.preventDefault();
        $form.submit();
    }

    function isOriginCurrentLocation(url) {
        function isUrlEqual(url1, url2) {
            return (url1 == url2 || url1.slice(0, url2.length + 1) == url2 + '/');
        }

        var
                protocol = document.location.protocol,
                hostPort = document.location.host,
                ssHostPort = '//' + hostPort,
                protocolSsHostPort = protocol + ssHostPort;

        if (!url) {
            return false;
        }

        return isUrlEqual(url, protocolSsHostPort) ||
                isUrlEqual(url, ssHostPort) ||
                !(/^(\/\/|http:|https:).*/.test(url)); //not starting with: // or http: or https:
    }

    function addXsrfTokenToFormIfSameOrigin($form) {
        if (isOriginCurrentLocation($form.attr('action'))) {
            addXsrfToken($form);
        }
    }

    function addXsrfTokenProperty(url, object) {
        if (isOriginCurrentLocation(url)) {
            object.atl_token = getXsrfTokenFromCookie();
        }
        return object;
    }

    function addXsrfTokenToForms() {
        function addXsrfTokenSource($form) {
            $form.append($("<input>", {type: "hidden", name: "atl_token_source", value: 'js'})); //this will cause a warning in DEV mode
        }

        $("form").each(function () {
            var
                    $form = $(this),
                    hasNoAtlToken = !$form.find("input[name='atl_token']").length;

            if (hasNoAtlToken) {
                addXsrfTokenToFormIfSameOrigin($form);
                addXsrfTokenSource($form);
            }
        });
    }

    function getAtlTokenQueryParam(url) {
        if (isOriginCurrentLocation(url)) {
            return "atl_token=" + getXsrfTokenFromCookie();
        }
    }

    function registerLinkClickHandler() {
        $(document).on('click', 'a.mutative:not(.requireConfirmation)', postOnLinkClick);
        $(document).on('clickMutativeLink', 'a', postOnLinkClick);
        $(document).on('click', 'a#log-out', postOnLinkClick);
    }

    return {
        registerLinkClickHandler: registerLinkClickHandler,
        addXsrfTokenProperty: addXsrfTokenProperty,
        addXsrfTokenToForm: addXsrfTokenToFormIfSameOrigin,
        addXsrfTokenToForms: addXsrfTokenToForms,
        getAtlTokenQueryParam: getAtlTokenQueryParam
    }
})(AJS.$);


AJS.$(function() {
    BAMBOO.XsrfUtils.addXsrfTokenToForms();
    BAMBOO.XsrfUtils.registerLinkClickHandler();
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:flot', location = '/bower/jquery-flot/jquery.flot.js' */
/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */

// first an inline dependency, jquery.colorhelpers.js, we inline it here
// for convenience

/* Plugin for jQuery for working with colors.
 * 
 * Version 1.1.
 * 
 * Inspiration from jQuery color animation plugin by John Resig.
 *
 * Released under the MIT license by Ole Laursen, October 2009.
 *
 * Examples:
 *
 *   $.color.parse("#fff").scale('rgb', 0.25).add('a', -0.5).toString()
 *   var c = $.color.extract($("#mydiv"), 'background-color');
 *   console.log(c.r, c.g, c.b, c.a);
 *   $.color.make(100, 50, 25, 0.4).toString() // returns "rgba(100,50,25,0.4)"
 *
 * Note that .scale() and .add() return the same modified object
 * instead of making a new one.
 *
 * V. 1.1: Fix error handling so e.g. parsing an empty string does
 * produce a color rather than just crashing.
 */ 
(function(B){B.color={};B.color.make=function(F,E,C,D){var G={};G.r=F||0;G.g=E||0;G.b=C||0;G.a=D!=null?D:1;G.add=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]+=I}return G.normalize()};G.scale=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]*=I}return G.normalize()};G.toString=function(){if(G.a>=1){return"rgb("+[G.r,G.g,G.b].join(",")+")"}else{return"rgba("+[G.r,G.g,G.b,G.a].join(",")+")"}};G.normalize=function(){function H(J,K,I){return K<J?J:(K>I?I:K)}G.r=H(0,parseInt(G.r),255);G.g=H(0,parseInt(G.g),255);G.b=H(0,parseInt(G.b),255);G.a=H(0,G.a,1);return G};G.clone=function(){return B.color.make(G.r,G.b,G.g,G.a)};return G.normalize()};B.color.extract=function(D,C){var E;do{E=D.css(C).toLowerCase();if(E!=""&&E!="transparent"){break}D=D.parent()}while(!B.nodeName(D.get(0),"body"));if(E=="rgba(0, 0, 0, 0)"){E="transparent"}return B.color.parse(E)};B.color.parse=function(F){var E,C=B.color.make;if(E=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10))}if(E=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10),parseFloat(E[4]))}if(E=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55)}if(E=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55,parseFloat(E[4]))}if(E=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(F)){return C(parseInt(E[1],16),parseInt(E[2],16),parseInt(E[3],16))}if(E=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(F)){return C(parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16),parseInt(E[3]+E[3],16))}var D=B.trim(F).toLowerCase();if(D=="transparent"){return C(255,255,255,0)}else{E=A[D]||[0,0,0];return C(E[0],E[1],E[2])}};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);

// the actual Flot code
(function($) {
    function Plot(placeholder, data_, options_, plugins) {
        // data is on the form:
        //   [ series1, series2 ... ]
        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]
        // or { data: [ [x1, y1], [x2, y2], ... ], label: "some label", ... }
        
        var series = [],
            options = {
                // the color theme used for graphs
                colors: ["#edc240", "#afd8f8", "#cb4b4b", "#4da74d", "#9440ed"],
                legend: {
                    show: true,
                    noColumns: 1, // number of colums in legend table
                    labelFormatter: null, // fn: string -> string
                    labelBoxBorderColor: "#ccc", // border color for the little label boxes
                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph
                    position: "ne", // position of default legend container within plot
                    margin: 5, // distance from grid edge to default legend container within plot
                    backgroundColor: null, // null means auto-detect
                    backgroundOpacity: 0.85 // set to 0 to avoid background
                },
                xaxis: {
                    show: null, // null = auto-detect, true = always, false = never
                    position: "bottom", // or "top"
                    mode: null, // null or "time"
                    color: null, // base color, labels, ticks
                    tickColor: null, // possibly different color of ticks, e.g. "rgba(0,0,0,0.15)"
                    transform: null, // null or f: number -> number to transform axis
                    inverseTransform: null, // if transform is set, this should be the inverse function
                    min: null, // min. value to show, null means set automatically
                    max: null, // max. value to show, null means set automatically
                    autoscaleMargin: null, // margin in % to add if auto-setting min/max
                    ticks: null, // either [1, 3] or [[1, "a"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks
                    tickFormatter: null, // fn: number -> string
                    labelWidth: null, // size of tick labels in pixels
                    labelHeight: null,
                    reserveSpace: null, // whether to reserve space even if axis isn't shown
                    tickLength: null, // size in pixels of ticks, or "full" for whole line
                    alignTicksWithAxis: null, // axis number or null for no sync
                    
                    // mode specific options
                    tickDecimals: null, // no. of decimals, null means auto
                    tickSize: null, // number or [number, "unit"]
                    minTickSize: null, // number or [number, "unit"]
                    monthNames: null, // list of names of months
                    timeformat: null, // format string to use
                    twelveHourClock: false // 12 or 24 time in time mode
                },
                yaxis: {
                    autoscaleMargin: 0.02,
                    position: "left" // or "right"
                },
                xaxes: [],
                yaxes: [],
                series: {
                    points: {
                        show: false,
                        radius: 3,
                        lineWidth: 2, // in pixels
                        fill: true,
                        fillColor: "#ffffff",
                        symbol: "circle" // or callback
                    },
                    lines: {
                        // we don't put in show: false so we can see
                        // whether lines were actively disabled 
                        lineWidth: 2, // in pixels
                        fill: false,
                        fillColor: null,
                        steps: false
                    },
                    bars: {
                        show: false,
                        lineWidth: 2, // in pixels
                        barWidth: 1, // in units of the x axis
                        fill: true,
                        fillColor: null,
                        align: "left", // or "center" 
                        horizontal: false
                    },
                    shadowSize: 3
                },
                grid: {
                    show: true,
                    aboveData: false,
                    color: "#545454", // primary color used for outline and labels
                    backgroundColor: null, // null for transparent, else color
                    borderColor: null, // set if different from the grid color
                    tickColor: null, // color for the ticks, e.g. "rgba(0,0,0,0.15)"
                    labelMargin: 5, // in pixels
                    axisMargin: 8, // in pixels
                    borderWidth: 2, // in pixels
                    minBorderMargin: null, // in pixels, null means taken from points radius
                    markings: null, // array of ranges or fn: axes -> array of ranges
                    markingsColor: "#f4f4f4",
                    markingsLineWidth: 2,
                    // interactive stuff
                    clickable: false,
                    hoverable: false,
                    autoHighlight: true, // highlight in case mouse is near
                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item
                },
                hooks: {}
            },
        canvas = null,      // the canvas for the plot itself
        overlay = null,     // canvas for interactive stuff on top of plot
        eventHolder = null, // jQuery object that events should be bound to
        ctx = null, octx = null,
        xaxes = [], yaxes = [],
        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},
        canvasWidth = 0, canvasHeight = 0,
        plotWidth = 0, plotHeight = 0,
        hooks = {
            processOptions: [],
            processRawData: [],
            processDatapoints: [],
            drawSeries: [],
            draw: [],
            bindEvents: [],
            drawOverlay: [],
            shutdown: []
        },
        plot = this;

        // public functions
        plot.setData = setData;
        plot.setupGrid = setupGrid;
        plot.draw = draw;
        plot.getPlaceholder = function() { return placeholder; };
        plot.getCanvas = function() { return canvas; };
        plot.getPlotOffset = function() { return plotOffset; };
        plot.width = function () { return plotWidth; };
        plot.height = function () { return plotHeight; };
        plot.offset = function () {
            var o = eventHolder.offset();
            o.left += plotOffset.left;
            o.top += plotOffset.top;
            return o;
        };
        plot.getData = function () { return series; };
        plot.getAxes = function () {
            var res = {}, i;
            $.each(xaxes.concat(yaxes), function (_, axis) {
                if (axis)
                    res[axis.direction + (axis.n != 1 ? axis.n : "") + "axis"] = axis;
            });
            return res;
        };
        plot.getXAxes = function () { return xaxes; };
        plot.getYAxes = function () { return yaxes; };
        plot.c2p = canvasToAxisCoords;
        plot.p2c = axisToCanvasCoords;
        plot.getOptions = function () { return options; };
        plot.highlight = highlight;
        plot.unhighlight = unhighlight;
        plot.triggerRedrawOverlay = triggerRedrawOverlay;
        plot.pointOffset = function(point) {
            return {
                left: parseInt(xaxes[axisNumber(point, "x") - 1].p2c(+point.x) + plotOffset.left),
                top: parseInt(yaxes[axisNumber(point, "y") - 1].p2c(+point.y) + plotOffset.top)
            };
        };
        plot.shutdown = shutdown;
        plot.resize = function () {
            getCanvasDimensions();
            resizeCanvas(canvas);
            resizeCanvas(overlay);
        };

        // public attributes
        plot.hooks = hooks;
        
        // initialize
        initPlugins(plot);
        parseOptions(options_);
        setupCanvases();
        setData(data_);
        setupGrid();
        draw();
        bindEvents();


        function executeHooks(hook, args) {
            args = [plot].concat(args);
            for (var i = 0; i < hook.length; ++i)
                hook[i].apply(this, args);
        }

        function initPlugins() {
            for (var i = 0; i < plugins.length; ++i) {
                var p = plugins[i];
                p.init(plot);
                if (p.options)
                    $.extend(true, options, p.options);
            }
        }
        
        function parseOptions(opts) {
            var i;
            
            $.extend(true, options, opts);
            
            if (options.xaxis.color == null)
                options.xaxis.color = options.grid.color;
            if (options.yaxis.color == null)
                options.yaxis.color = options.grid.color;
            
            if (options.xaxis.tickColor == null) // backwards-compatibility
                options.xaxis.tickColor = options.grid.tickColor;
            if (options.yaxis.tickColor == null) // backwards-compatibility
                options.yaxis.tickColor = options.grid.tickColor;

            if (options.grid.borderColor == null)
                options.grid.borderColor = options.grid.color;
            if (options.grid.tickColor == null)
                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();
            
            // fill in defaults in axes, copy at least always the
            // first as the rest of the code assumes it'll be there
            for (i = 0; i < Math.max(1, options.xaxes.length); ++i)
                options.xaxes[i] = $.extend(true, {}, options.xaxis, options.xaxes[i]);
            for (i = 0; i < Math.max(1, options.yaxes.length); ++i)
                options.yaxes[i] = $.extend(true, {}, options.yaxis, options.yaxes[i]);

            // backwards compatibility, to be removed in future
            if (options.xaxis.noTicks && options.xaxis.ticks == null)
                options.xaxis.ticks = options.xaxis.noTicks;
            if (options.yaxis.noTicks && options.yaxis.ticks == null)
                options.yaxis.ticks = options.yaxis.noTicks;
            if (options.x2axis) {
                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);
                options.xaxes[1].position = "top";
            }
            if (options.y2axis) {
                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);
                options.yaxes[1].position = "right";
            }
            if (options.grid.coloredAreas)
                options.grid.markings = options.grid.coloredAreas;
            if (options.grid.coloredAreasColor)
                options.grid.markingsColor = options.grid.coloredAreasColor;
            if (options.lines)
                $.extend(true, options.series.lines, options.lines);
            if (options.points)
                $.extend(true, options.series.points, options.points);
            if (options.bars)
                $.extend(true, options.series.bars, options.bars);
            if (options.shadowSize != null)
                options.series.shadowSize = options.shadowSize;

            // save options on axes for future reference
            for (i = 0; i < options.xaxes.length; ++i)
                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];
            for (i = 0; i < options.yaxes.length; ++i)
                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];

            // add hooks from options
            for (var n in hooks)
                if (options.hooks[n] && options.hooks[n].length)
                    hooks[n] = hooks[n].concat(options.hooks[n]);

            executeHooks(hooks.processOptions, [options]);
        }

        function setData(d) {
            series = parseData(d);
            fillInSeriesOptions();
            processData();
        }
        
        function parseData(d) {
            var res = [];
            for (var i = 0; i < d.length; ++i) {
                var s = $.extend(true, {}, options.series);

                if (d[i].data != null) {
                    s.data = d[i].data; // move the data instead of deep-copy
                    delete d[i].data;

                    $.extend(true, s, d[i]);

                    d[i].data = s.data;
                }
                else
                    s.data = d[i];
                res.push(s);
            }

            return res;
        }
        
        function axisNumber(obj, coord) {
            var a = obj[coord + "axis"];
            if (typeof a == "object") // if we got a real axis, extract number
                a = a.n;
            if (typeof a != "number")
                a = 1; // default to first axis
            return a;
        }

        function allAxes() {
            // return flat array without annoying null entries
            return $.grep(xaxes.concat(yaxes), function (a) { return a; });
        }
        
        function canvasToAxisCoords(pos) {
            // return an object with x/y corresponding to all used axes 
            var res = {}, i, axis;
            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used)
                    res["x" + axis.n] = axis.c2p(pos.left);
            }

            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used)
                    res["y" + axis.n] = axis.c2p(pos.top);
            }
            
            if (res.x1 !== undefined)
                res.x = res.x1;
            if (res.y1 !== undefined)
                res.y = res.y1;

            return res;
        }
        
        function axisToCanvasCoords(pos) {
            // get canvas coords from the first pair of x/y found in pos
            var res = {}, i, axis, key;

            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used) {
                    key = "x" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "x";

                    if (pos[key] != null) {
                        res.left = axis.p2c(pos[key]);
                        break;
                    }
                }
            }
            
            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used) {
                    key = "y" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "y";

                    if (pos[key] != null) {
                        res.top = axis.p2c(pos[key]);
                        break;
                    }
                }
            }
            
            return res;
        }
        
        function getOrCreateAxis(axes, number) {
            if (!axes[number - 1])
                axes[number - 1] = {
                    n: number, // save the number for future reference
                    direction: axes == xaxes ? "x" : "y",
                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)
                };
                
            return axes[number - 1];
        }

        function fillInSeriesOptions() {
            var i;
            
            // collect what we already got of colors
            var neededColors = series.length,
                usedColors = [],
                assignedColors = [];
            for (i = 0; i < series.length; ++i) {
                var sc = series[i].color;
                if (sc != null) {
                    --neededColors;
                    if (typeof sc == "number")
                        assignedColors.push(sc);
                    else
                        usedColors.push($.color.parse(series[i].color));
                }
            }
            
            // we might need to generate more colors if higher indices
            // are assigned
            for (i = 0; i < assignedColors.length; ++i) {
                neededColors = Math.max(neededColors, assignedColors[i] + 1);
            }

            // produce colors as needed
            var colors = [], variation = 0;
            i = 0;
            while (colors.length < neededColors) {
                var c;
                if (options.colors.length == i) // check degenerate case
                    c = $.color.make(100, 100, 100);
                else
                    c = $.color.parse(options.colors[i]);

                // vary color if needed
                var sign = variation % 2 == 1 ? -1 : 1;
                c.scale('rgb', 1 + sign * Math.ceil(variation / 2) * 0.2)

                // FIXME: if we're getting to close to something else,
                // we should probably skip this one
                colors.push(c);
                
                ++i;
                if (i >= options.colors.length) {
                    i = 0;
                    ++variation;
                }
            }

            // fill in the options
            var colori = 0, s;
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                
                // assign colors
                if (s.color == null) {
                    s.color = colors[colori].toString();
                    ++colori;
                }
                else if (typeof s.color == "number")
                    s.color = colors[s.color].toString();

                // turn on lines automatically in case nothing is set
                if (s.lines.show == null) {
                    var v, show = true;
                    for (v in s)
                        if (s[v] && s[v].show) {
                            show = false;
                            break;
                        }
                    if (show)
                        s.lines.show = true;
                }

                // setup axes
                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, "x"));
                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, "y"));
            }
        }
        
        function processData() {
            var topSentry = Number.POSITIVE_INFINITY,
                bottomSentry = Number.NEGATIVE_INFINITY,
                fakeInfinity = Number.MAX_VALUE,
                i, j, k, m, length,
                s, points, ps, x, y, axis, val, f, p;

            function updateAxis(axis, min, max) {
                if (min < axis.datamin && min != -fakeInfinity)
                    axis.datamin = min;
                if (max > axis.datamax && max != fakeInfinity)
                    axis.datamax = max;
            }

            $.each(allAxes(), function (_, axis) {
                // init axis
                axis.datamin = topSentry;
                axis.datamax = bottomSentry;
                axis.used = false;
            });
            
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                s.datapoints = { points: [] };
                
                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);
            }
            
            // first pass: clean and copy data
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                var data = s.data, format = s.datapoints.format;

                if (!format) {
                    format = [];
                    // find out how to copy
                    format.push({ x: true, number: true, required: true });
                    format.push({ y: true, number: true, required: true });

                    if (s.bars.show || (s.lines.show && s.lines.fill)) {
                        format.push({ y: true, number: true, required: false, defaultValue: 0 });
                        if (s.bars.horizontal) {
                            delete format[format.length - 1].y;
                            format[format.length - 1].x = true;
                        }
                    }
                    
                    s.datapoints.format = format;
                }

                if (s.datapoints.pointsize != null)
                    continue; // already filled in

                s.datapoints.pointsize = format.length;
                
                ps = s.datapoints.pointsize;
                points = s.datapoints.points;

                insertSteps = s.lines.show && s.lines.steps;
                s.xaxis.used = s.yaxis.used = true;
                
                for (j = k = 0; j < data.length; ++j, k += ps) {
                    p = data[j];

                    var nullify = p == null;
                    if (!nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = p[m];
                            f = format[m];

                            if (f) {
                                if (f.number && val != null) {
                                    val = +val; // convert to number
                                    if (isNaN(val))
                                        val = null;
                                    else if (val == Infinity)
                                        val = fakeInfinity;
                                    else if (val == -Infinity)
                                        val = -fakeInfinity;
                                }

                                if (val == null) {
                                    if (f.required)
                                        nullify = true;
                                    
                                    if (f.defaultValue != null)
                                        val = f.defaultValue;
                                }
                            }
                            
                            points[k + m] = val;
                        }
                    }
                    
                    if (nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = points[k + m];
                            if (val != null) {
                                f = format[m];
                                // extract min/max info
                                if (f.x)
                                    updateAxis(s.xaxis, val, val);
                                if (f.y)
                                    updateAxis(s.yaxis, val, val);
                            }
                            points[k + m] = null;
                        }
                    }
                    else {
                        // a little bit of line specific stuff that
                        // perhaps shouldn't be here, but lacking
                        // better means...
                        if (insertSteps && k > 0
                            && points[k - ps] != null
                            && points[k - ps] != points[k]
                            && points[k - ps + 1] != points[k + 1]) {
                            // copy the point to make room for a middle point
                            for (m = 0; m < ps; ++m)
                                points[k + ps + m] = points[k + m];

                            // middle point has same y
                            points[k + 1] = points[k - ps + 1];

                            // we've added a point, better reflect that
                            k += ps;
                        }
                    }
                }
            }

            // give the hooks a chance to run
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                
                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);
            }

            // second pass: find datamax/datamin for auto-scaling
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                points = s.datapoints.points,
                ps = s.datapoints.pointsize;

                var xmin = topSentry, ymin = topSentry,
                    xmax = bottomSentry, ymax = bottomSentry;
                
                for (j = 0; j < points.length; j += ps) {
                    if (points[j] == null)
                        continue;

                    for (m = 0; m < ps; ++m) {
                        val = points[j + m];
                        f = format[m];
                        if (!f || val == fakeInfinity || val == -fakeInfinity)
                            continue;
                        
                        if (f.x) {
                            if (val < xmin)
                                xmin = val;
                            if (val > xmax)
                                xmax = val;
                        }
                        if (f.y) {
                            if (val < ymin)
                                ymin = val;
                            if (val > ymax)
                                ymax = val;
                        }
                    }
                }
                
                if (s.bars.show) {
                    // make sure we got room for the bar on the dancing floor
                    var delta = s.bars.align == "left" ? 0 : -s.bars.barWidth/2;
                    if (s.bars.horizontal) {
                        ymin += delta;
                        ymax += delta + s.bars.barWidth;
                    }
                    else {
                        xmin += delta;
                        xmax += delta + s.bars.barWidth;
                    }
                }
                
                updateAxis(s.xaxis, xmin, xmax);
                updateAxis(s.yaxis, ymin, ymax);
            }

            $.each(allAxes(), function (_, axis) {
                if (axis.datamin == topSentry)
                    axis.datamin = null;
                if (axis.datamax == bottomSentry)
                    axis.datamax = null;
            });
        }

        function makeCanvas(skipPositioning, cls) {
            var c = document.createElement('canvas');
            c.className = cls;
            c.width = canvasWidth;
            c.height = canvasHeight;
                    
            if (!skipPositioning)
                $(c).css({ position: 'absolute', left: 0, top: 0 });
                
            $(c).appendTo(placeholder);
                
            if (!c.getContext) // excanvas hack
                c = window.G_vmlCanvasManager.initElement(c);

            // used for resetting in case we get replotted
            c.getContext("2d").save();
            
            return c;
        }

        function getCanvasDimensions() {
            canvasWidth = placeholder.width();
            canvasHeight = placeholder.height();
            
            if (canvasWidth <= 0 || canvasHeight <= 0)
                throw "Invalid dimensions for plot, width = " + canvasWidth + ", height = " + canvasHeight;
        }

        function resizeCanvas(c) {
            // resizing should reset the state (excanvas seems to be
            // buggy though)
            if (c.width != canvasWidth)
                c.width = canvasWidth;

            if (c.height != canvasHeight)
                c.height = canvasHeight;

            // so try to get back to the initial state (even if it's
            // gone now, this should be safe according to the spec)
            var cctx = c.getContext("2d");
            cctx.restore();

            // and save again
            cctx.save();
        }
        
        function setupCanvases() {
            var reused,
                existingCanvas = placeholder.children("canvas.base"),
                existingOverlay = placeholder.children("canvas.overlay");

            if (existingCanvas.length == 0 || existingOverlay == 0) {
                // init everything
                
                placeholder.html(""); // make sure placeholder is clear
            
                placeholder.css({ padding: 0 }); // padding messes up the positioning
                
                if (placeholder.css("position") == 'static')
                    placeholder.css("position", "relative"); // for positioning labels and overlay

                getCanvasDimensions();
                
                canvas = makeCanvas(true, "base");
                overlay = makeCanvas(false, "overlay"); // overlay canvas for interactive features

                reused = false;
            }
            else {
                // reuse existing elements

                canvas = existingCanvas.get(0);
                overlay = existingOverlay.get(0);

                reused = true;
            }

            ctx = canvas.getContext("2d");
            octx = overlay.getContext("2d");

            // we include the canvas in the event holder too, because IE 7
            // sometimes has trouble with the stacking order
            eventHolder = $([overlay, canvas]);

            if (reused) {
                // run shutdown in the old plot object
                placeholder.data("plot").shutdown();

                // reset reused canvases
                plot.resize();
                
                // make sure overlay pixels are cleared (canvas is cleared when we redraw)
                octx.clearRect(0, 0, canvasWidth, canvasHeight);
                
                // then whack any remaining obvious garbage left
                eventHolder.unbind();
                placeholder.children().not([canvas, overlay]).remove();
            }

            // save in case we get replotted
            placeholder.data("plot", plot);
        }

        function bindEvents() {
            // bind events
            if (options.grid.hoverable) {
                eventHolder.mousemove(onMouseMove);
                eventHolder.mouseleave(onMouseLeave);
            }

            if (options.grid.clickable)
                eventHolder.click(onClick);

            executeHooks(hooks.bindEvents, [eventHolder]);
        }

        function shutdown() {
            if (redrawTimeout)
                clearTimeout(redrawTimeout);
            
            eventHolder.unbind("mousemove", onMouseMove);
            eventHolder.unbind("mouseleave", onMouseLeave);
            eventHolder.unbind("click", onClick);
            
            executeHooks(hooks.shutdown, [eventHolder]);
        }

        function setTransformationHelpers(axis) {
            // set helper functions on the axis, assumes plot area
            // has been computed already
            
            function identity(x) { return x; }
            
            var s, m, t = axis.options.transform || identity,
                it = axis.options.inverseTransform;
            
            // precompute how much the axis is scaling a point
            // in canvas space
            if (axis.direction == "x") {
                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));
                m = Math.min(t(axis.max), t(axis.min));
            }
            else {
                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));
                s = -s;
                m = Math.max(t(axis.max), t(axis.min));
            }

            // data point to canvas coordinate
            if (t == identity) // slight optimization
                axis.p2c = function (p) { return (p - m) * s; };
            else
                axis.p2c = function (p) { return (t(p) - m) * s; };
            // canvas coordinate to data point
            if (!it)
                axis.c2p = function (c) { return m + c / s; };
            else
                axis.c2p = function (c) { return it(m + c / s); };
        }

        function measureTickLabels(axis) {
            var opts = axis.options, i, ticks = axis.ticks || [], labels = [],
                l, w = opts.labelWidth, h = opts.labelHeight, dummyDiv;

            function makeDummyDiv(labels, width) {
                return $('<div style="position:absolute;top:-10000px;' + width + 'font-size:smaller">' +
                         '<div class="' + axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis">'
                         + labels.join("") + '</div></div>')
                    .appendTo(placeholder);
            }
            
            if (axis.direction == "x") {
                // to avoid measuring the widths of the labels (it's slow), we
                // construct fixed-size boxes and put the labels inside
                // them, we don't need the exact figures and the
                // fixed-size box content is easy to center
                if (w == null)
                    w = Math.floor(canvasWidth / (ticks.length > 0 ? ticks.length : 1));

                // measure x label heights
                if (h == null) {
                    labels = [];
                    for (i = 0; i < ticks.length; ++i) {
                        l = ticks[i].label;
                        if (l)
                            labels.push('<div class="tickLabel" style="float:left;width:' + w + 'px">' + l + '</div>');
                    }

                    if (labels.length > 0) {
                        // stick them all in the same div and measure
                        // collective height
                        labels.push('<div style="clear:left"></div>');
                        dummyDiv = makeDummyDiv(labels, "width:10000px;");
                        h = dummyDiv.height();
                        dummyDiv.remove();
                    }
                }
            }
            else if (w == null || h == null) {
                // calculate y label dimensions
                for (i = 0; i < ticks.length; ++i) {
                    l = ticks[i].label;
                    if (l)
                        labels.push('<div class="tickLabel">' + l + '</div>');
                }
                
                if (labels.length > 0) {
                    dummyDiv = makeDummyDiv(labels, "");
                    if (w == null)
                        w = dummyDiv.children().width();
                    if (h == null)
                        h = dummyDiv.find("div.tickLabel").height();
                    dummyDiv.remove();
                }
            }

            if (w == null)
                w = 0;
            if (h == null)
                h = 0;

            axis.labelWidth = w;
            axis.labelHeight = h;
        }

        function allocateAxisBoxFirstPhase(axis) {
            // find the bounding box of the axis by looking at label
            // widths/heights and ticks, make room by diminishing the
            // plotOffset

            var lw = axis.labelWidth,
                lh = axis.labelHeight,
                pos = axis.options.position,
                tickLength = axis.options.tickLength,
                axismargin = options.grid.axisMargin,
                padding = options.grid.labelMargin,
                all = axis.direction == "x" ? xaxes : yaxes,
                index;

            // determine axis margin
            var samePosition = $.grep(all, function (a) {
                return a && a.options.position == pos && a.reserveSpace;
            });
            if ($.inArray(axis, samePosition) == samePosition.length - 1)
                axismargin = 0; // outermost

            // determine tick length - if we're innermost, we can use "full"
            if (tickLength == null)
                tickLength = "full";

            var sameDirection = $.grep(all, function (a) {
                return a && a.reserveSpace;
            });

            var innermost = $.inArray(axis, sameDirection) == 0;
            if (!innermost && tickLength == "full")
                tickLength = 5;
                
            if (!isNaN(+tickLength))
                padding += +tickLength;

            // compute box
            if (axis.direction == "x") {
                lh += padding;
                
                if (pos == "bottom") {
                    plotOffset.bottom += lh + axismargin;
                    axis.box = { top: canvasHeight - plotOffset.bottom, height: lh };
                }
                else {
                    axis.box = { top: plotOffset.top + axismargin, height: lh };
                    plotOffset.top += lh + axismargin;
                }
            }
            else {
                lw += padding;
                
                if (pos == "left") {
                    axis.box = { left: plotOffset.left + axismargin, width: lw };
                    plotOffset.left += lw + axismargin;
                }
                else {
                    plotOffset.right += lw + axismargin;
                    axis.box = { left: canvasWidth - plotOffset.right, width: lw };
                }
            }

             // save for future reference
            axis.position = pos;
            axis.tickLength = tickLength;
            axis.box.padding = padding;
            axis.innermost = innermost;
        }

        function allocateAxisBoxSecondPhase(axis) {
            // set remaining bounding box coordinates
            if (axis.direction == "x") {
                axis.box.left = plotOffset.left;
                axis.box.width = plotWidth;
            }
            else {
                axis.box.top = plotOffset.top;
                axis.box.height = plotHeight;
            }
        }
        
        function setupGrid() {
            var i, axes = allAxes();

            // first calculate the plot and axis box dimensions

            $.each(axes, function (_, axis) {
                axis.show = axis.options.show;
                if (axis.show == null)
                    axis.show = axis.used; // by default an axis is visible if it's got data
                
                axis.reserveSpace = axis.show || axis.options.reserveSpace;

                setRange(axis);
            });

            allocatedAxes = $.grep(axes, function (axis) { return axis.reserveSpace; });

            plotOffset.left = plotOffset.right = plotOffset.top = plotOffset.bottom = 0;
            if (options.grid.show) {
                $.each(allocatedAxes, function (_, axis) {
                    // make the ticks
                    setupTickGeneration(axis);
                    setTicks(axis);
                    snapRangeToTicks(axis, axis.ticks);

                    // find labelWidth/Height for axis
                    measureTickLabels(axis);
                });

                // with all dimensions in house, we can compute the
                // axis boxes, start from the outside (reverse order)
                for (i = allocatedAxes.length - 1; i >= 0; --i)
                    allocateAxisBoxFirstPhase(allocatedAxes[i]);

                // make sure we've got enough space for things that
                // might stick out
                var minMargin = options.grid.minBorderMargin;
                if (minMargin == null) {
                    minMargin = 0;
                    for (i = 0; i < series.length; ++i)
                        minMargin = Math.max(minMargin, series[i].points.radius + series[i].points.lineWidth/2);
                }
                    
                for (var a in plotOffset) {
                    plotOffset[a] += options.grid.borderWidth;
                    plotOffset[a] = Math.max(minMargin, plotOffset[a]);
                }
            }
            
            plotWidth = canvasWidth - plotOffset.left - plotOffset.right;
            plotHeight = canvasHeight - plotOffset.bottom - plotOffset.top;

            // now we got the proper plotWidth/Height, we can compute the scaling
            $.each(axes, function (_, axis) {
                setTransformationHelpers(axis);
            });

            if (options.grid.show) {
                $.each(allocatedAxes, function (_, axis) {
                    allocateAxisBoxSecondPhase(axis);
                });

                insertAxisLabels();
            }
            
            insertLegend();
        }
        
        function setRange(axis) {
            var opts = axis.options,
                min = +(opts.min != null ? opts.min : axis.datamin),
                max = +(opts.max != null ? opts.max : axis.datamax),
                delta = max - min;

            if (delta == 0.0) {
                // degenerate case
                var widen = max == 0 ? 1 : 0.01;

                if (opts.min == null)
                    min -= widen;
                // always widen max if we couldn't widen min to ensure we
                // don't fall into min == max which doesn't work
                if (opts.max == null || opts.min != null)
                    max += widen;
            }
            else {
                // consider autoscaling
                var margin = opts.autoscaleMargin;
                if (margin != null) {
                    if (opts.min == null) {
                        min -= delta * margin;
                        // make sure we don't go below zero if all values
                        // are positive
                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)
                            min = 0;
                    }
                    if (opts.max == null) {
                        max += delta * margin;
                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)
                            max = 0;
                    }
                }
            }
            axis.min = min;
            axis.max = max;
        }

        function setupTickGeneration(axis) {
            var opts = axis.options;
                
            // estimate number of ticks
            var noTicks;
            if (typeof opts.ticks == "number" && opts.ticks > 0)
                noTicks = opts.ticks;
            else
                // heuristic based on the model a*sqrt(x) fitted to
                // some data points that seemed reasonable
                noTicks = 0.3 * Math.sqrt(axis.direction == "x" ? canvasWidth : canvasHeight);

            var delta = (axis.max - axis.min) / noTicks,
                size, generator, unit, formatter, i, magn, norm;

            if (opts.mode == "time") {
                // pretty handling of time
                
                // map of app. size of time units in milliseconds
                var timeUnitSize = {
                    "second": 1000,
                    "minute": 60 * 1000,
                    "hour": 60 * 60 * 1000,
                    "day": 24 * 60 * 60 * 1000,
                    "month": 30 * 24 * 60 * 60 * 1000,
                    "year": 365.2425 * 24 * 60 * 60 * 1000
                };


                // the allowed tick sizes, after 1 year we use
                // an integer algorithm
                var spec = [
                    [1, "second"], [2, "second"], [5, "second"], [10, "second"],
                    [30, "second"], 
                    [1, "minute"], [2, "minute"], [5, "minute"], [10, "minute"],
                    [30, "minute"], 
                    [1, "hour"], [2, "hour"], [4, "hour"],
                    [8, "hour"], [12, "hour"],
                    [1, "day"], [2, "day"], [3, "day"],
                    [0.25, "month"], [0.5, "month"], [1, "month"],
                    [2, "month"], [3, "month"], [6, "month"],
                    [1, "year"]
                ];

                var minSize = 0;
                if (opts.minTickSize != null) {
                    if (typeof opts.tickSize == "number")
                        minSize = opts.tickSize;
                    else
                        minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];
                }

                for (var i = 0; i < spec.length - 1; ++i)
                    if (delta < (spec[i][0] * timeUnitSize[spec[i][1]]
                                 + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2
                       && spec[i][0] * timeUnitSize[spec[i][1]] >= minSize)
                        break;
                size = spec[i][0];
                unit = spec[i][1];
                
                // special-case the possibility of several years
                if (unit == "year") {
                    magn = Math.pow(10, Math.floor(Math.log(delta / timeUnitSize.year) / Math.LN10));
                    norm = (delta / timeUnitSize.year) / magn;
                    if (norm < 1.5)
                        size = 1;
                    else if (norm < 3)
                        size = 2;
                    else if (norm < 7.5)
                        size = 5;
                    else
                        size = 10;

                    size *= magn;
                }

                axis.tickSize = opts.tickSize || [size, unit];
                
                generator = function(axis) {
                    var ticks = [],
                        tickSize = axis.tickSize[0], unit = axis.tickSize[1],
                        d = new Date(axis.min);
                    
                    var step = tickSize * timeUnitSize[unit];

                    if (unit == "second")
                        d.setUTCSeconds(floorInBase(d.getUTCSeconds(), tickSize));
                    if (unit == "minute")
                        d.setUTCMinutes(floorInBase(d.getUTCMinutes(), tickSize));
                    if (unit == "hour")
                        d.setUTCHours(floorInBase(d.getUTCHours(), tickSize));
                    if (unit == "month")
                        d.setUTCMonth(floorInBase(d.getUTCMonth(), tickSize));
                    if (unit == "year")
                        d.setUTCFullYear(floorInBase(d.getUTCFullYear(), tickSize));
                    
                    // reset smaller components
                    d.setUTCMilliseconds(0);
                    if (step >= timeUnitSize.minute)
                        d.setUTCSeconds(0);
                    if (step >= timeUnitSize.hour)
                        d.setUTCMinutes(0);
                    if (step >= timeUnitSize.day)
                        d.setUTCHours(0);
                    if (step >= timeUnitSize.day * 4)
                        d.setUTCDate(1);
                    if (step >= timeUnitSize.year)
                        d.setUTCMonth(0);


                    var carry = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = d.getTime();
                        ticks.push(v);
                        if (unit == "month") {
                            if (tickSize < 1) {
                                // a bit complicated - we'll divide the month
                                // up but we need to take care of fractions
                                // so we don't end up in the middle of a day
                                d.setUTCDate(1);
                                var start = d.getTime();
                                d.setUTCMonth(d.getUTCMonth() + 1);
                                var end = d.getTime();
                                d.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);
                                carry = d.getUTCHours();
                                d.setUTCHours(0);
                            }
                            else
                                d.setUTCMonth(d.getUTCMonth() + tickSize);
                        }
                        else if (unit == "year") {
                            d.setUTCFullYear(d.getUTCFullYear() + tickSize);
                        }
                        else
                            d.setTime(v + step);
                    } while (v < axis.max && v != prev);

                    return ticks;
                };

                formatter = function (v, axis) {
                    var d = new Date(v);

                    // first check global format
                    if (opts.timeformat != null)
                        return $.plot.formatDate(d, opts.timeformat, opts.monthNames);
                    
                    var t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];
                    var span = axis.max - axis.min;
                    var suffix = (opts.twelveHourClock) ? " %p" : "";
                    
                    if (t < timeUnitSize.minute)
                        fmt = "%h:%M:%S" + suffix;
                    else if (t < timeUnitSize.day) {
                        if (span < 2 * timeUnitSize.day)
                            fmt = "%h:%M" + suffix;
                        else
                            fmt = "%b %d %h:%M" + suffix;
                    }
                    else if (t < timeUnitSize.month)
                        fmt = "%b %d";
                    else if (t < timeUnitSize.year) {
                        if (span < timeUnitSize.year)
                            fmt = "%b";
                        else
                            fmt = "%b %y";
                    }
                    else
                        fmt = "%y";
                    
                    return $.plot.formatDate(d, fmt, opts.monthNames);
                };
            }
            else {
                // pretty rounding of base-10 numbers
                var maxDec = opts.tickDecimals;
                var dec = -Math.floor(Math.log(delta) / Math.LN10);
                if (maxDec != null && dec > maxDec)
                    dec = maxDec;

                magn = Math.pow(10, -dec);
                norm = delta / magn; // norm is between 1.0 and 10.0
                
                if (norm < 1.5)
                    size = 1;
                else if (norm < 3) {
                    size = 2;
                    // special case for 2.5, requires an extra decimal
                    if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {
                        size = 2.5;
                        ++dec;
                    }
                }
                else if (norm < 7.5)
                    size = 5;
                else
                    size = 10;

                size *= magn;
                
                if (opts.minTickSize != null && size < opts.minTickSize)
                    size = opts.minTickSize;

                axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);
                axis.tickSize = opts.tickSize || size;

                generator = function (axis) {
                    var ticks = [];

                    // spew out all possible ticks
                    var start = floorInBase(axis.min, axis.tickSize),
                        i = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = start + i * axis.tickSize;
                        ticks.push(v);
                        ++i;
                    } while (v < axis.max && v != prev);
                    return ticks;
                };

                formatter = function (v, axis) {
                    return v.toFixed(axis.tickDecimals);
                };
            }

            if (opts.alignTicksWithAxis != null) {
                var otherAxis = (axis.direction == "x" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];
                if (otherAxis && otherAxis.used && otherAxis != axis) {
                    // consider snapping min/max to outermost nice ticks
                    var niceTicks = generator(axis);
                    if (niceTicks.length > 0) {
                        if (opts.min == null)
                            axis.min = Math.min(axis.min, niceTicks[0]);
                        if (opts.max == null && niceTicks.length > 1)
                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);
                    }
                    
                    generator = function (axis) {
                        // copy ticks, scaled to this axis
                        var ticks = [], v, i;
                        for (i = 0; i < otherAxis.ticks.length; ++i) {
                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);
                            v = axis.min + v * (axis.max - axis.min);
                            ticks.push(v);
                        }
                        return ticks;
                    };
                    
                    // we might need an extra decimal since forced
                    // ticks don't necessarily fit naturally
                    if (axis.mode != "time" && opts.tickDecimals == null) {
                        var extraDec = Math.max(0, -Math.floor(Math.log(delta) / Math.LN10) + 1),
                            ts = generator(axis);

                        // only proceed if the tick interval rounded
                        // with an extra decimal doesn't give us a
                        // zero at end
                        if (!(ts.length > 1 && /\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))
                            axis.tickDecimals = extraDec;
                    }
                }
            }

            axis.tickGenerator = generator;
            if ($.isFunction(opts.tickFormatter))
                axis.tickFormatter = function (v, axis) { return "" + opts.tickFormatter(v, axis); };
            else
                axis.tickFormatter = formatter;
        }
        
        function setTicks(axis) {
            var oticks = axis.options.ticks, ticks = [];
            if (oticks == null || (typeof oticks == "number" && oticks > 0))
                ticks = axis.tickGenerator(axis);
            else if (oticks) {
                if ($.isFunction(oticks))
                    // generate the ticks
                    ticks = oticks({ min: axis.min, max: axis.max });
                else
                    ticks = oticks;
            }

            // clean up/labelify the supplied ticks, copy them over
            var i, v;
            axis.ticks = [];
            for (i = 0; i < ticks.length; ++i) {
                var label = null;
                var t = ticks[i];
                if (typeof t == "object") {
                    v = +t[0];
                    if (t.length > 1)
                        label = t[1];
                }
                else
                    v = +t;
                if (label == null)
                    label = axis.tickFormatter(v, axis);
                if (!isNaN(v))
                    axis.ticks.push({ v: v, label: label });
            }
        }

        function snapRangeToTicks(axis, ticks) {
            if (axis.options.autoscaleMargin && ticks.length > 0) {
                // snap to ticks
                if (axis.options.min == null)
                    axis.min = Math.min(axis.min, ticks[0].v);
                if (axis.options.max == null && ticks.length > 1)
                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);
            }
        }
      
        function draw() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            var grid = options.grid;

            // draw background, if any
            if (grid.show && grid.backgroundColor)
                drawBackground();
            
            if (grid.show && !grid.aboveData)
                drawGrid();

            for (var i = 0; i < series.length; ++i) {
                executeHooks(hooks.drawSeries, [ctx, series[i]]);
                drawSeries(series[i]);
            }

            executeHooks(hooks.draw, [ctx]);
            
            if (grid.show && grid.aboveData)
                drawGrid();
        }

        function extractRange(ranges, coord) {
            var axis, from, to, key, axes = allAxes();

            for (i = 0; i < axes.length; ++i) {
                axis = axes[i];
                if (axis.direction == coord) {
                    key = coord + axis.n + "axis";
                    if (!ranges[key] && axis.n == 1)
                        key = coord + "axis"; // support x1axis as xaxis
                    if (ranges[key]) {
                        from = ranges[key].from;
                        to = ranges[key].to;
                        break;
                    }
                }
            }

            // backwards-compat stuff - to be removed in future
            if (!ranges[key]) {
                axis = coord == "x" ? xaxes[0] : yaxes[0];
                from = ranges[coord + "1"];
                to = ranges[coord + "2"];
            }

            // auto-reverse as an added bonus
            if (from != null && to != null && from > to) {
                var tmp = from;
                from = to;
                to = tmp;
            }
            
            return { from: from, to: to, axis: axis };
        }
        
        function drawBackground() {
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, "rgba(255, 255, 255, 0)");
            ctx.fillRect(0, 0, plotWidth, plotHeight);
            ctx.restore();
        }

        function drawGrid() {
            var i;
            
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // draw markings
            var markings = options.grid.markings;
            if (markings) {
                if ($.isFunction(markings)) {
                    var axes = plot.getAxes();
                    // xmin etc. is backwards compatibility, to be
                    // removed in the future
                    axes.xmin = axes.xaxis.min;
                    axes.xmax = axes.xaxis.max;
                    axes.ymin = axes.yaxis.min;
                    axes.ymax = axes.yaxis.max;
                    
                    markings = markings(axes);
                }

                for (i = 0; i < markings.length; ++i) {
                    var m = markings[i],
                        xrange = extractRange(m, "x"),
                        yrange = extractRange(m, "y");

                    // fill in missing
                    if (xrange.from == null)
                        xrange.from = xrange.axis.min;
                    if (xrange.to == null)
                        xrange.to = xrange.axis.max;
                    if (yrange.from == null)
                        yrange.from = yrange.axis.min;
                    if (yrange.to == null)
                        yrange.to = yrange.axis.max;

                    // clip
                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||
                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)
                        continue;

                    xrange.from = Math.max(xrange.from, xrange.axis.min);
                    xrange.to = Math.min(xrange.to, xrange.axis.max);
                    yrange.from = Math.max(yrange.from, yrange.axis.min);
                    yrange.to = Math.min(yrange.to, yrange.axis.max);

                    if (xrange.from == xrange.to && yrange.from == yrange.to)
                        continue;

                    // then draw
                    xrange.from = xrange.axis.p2c(xrange.from);
                    xrange.to = xrange.axis.p2c(xrange.to);
                    yrange.from = yrange.axis.p2c(yrange.from);
                    yrange.to = yrange.axis.p2c(yrange.to);
                    
                    if (xrange.from == xrange.to || yrange.from == yrange.to) {
                        // draw line
                        ctx.beginPath();
                        ctx.strokeStyle = m.color || options.grid.markingsColor;
                        ctx.lineWidth = m.lineWidth || options.grid.markingsLineWidth;
                        ctx.moveTo(xrange.from, yrange.from);
                        ctx.lineTo(xrange.to, yrange.to);
                        ctx.stroke();
                    }
                    else {
                        // fill area
                        ctx.fillStyle = m.color || options.grid.markingsColor;
                        ctx.fillRect(xrange.from, yrange.to,
                                     xrange.to - xrange.from,
                                     yrange.from - yrange.to);
                    }
                }
            }
            
            // draw the ticks
            var axes = allAxes(), bw = options.grid.borderWidth;

            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box,
                    t = axis.tickLength, x, y, xoff, yoff;
                if (!axis.show || axis.ticks.length == 0)
                    continue
                
                ctx.strokeStyle = axis.options.tickColor || $.color.parse(axis.options.color).scale('a', 0.22).toString();
                ctx.lineWidth = 1;

                // find the edges
                if (axis.direction == "x") {
                    x = 0;
                    if (t == "full")
                        y = (axis.position == "top" ? 0 : plotHeight);
                    else
                        y = box.top - plotOffset.top + (axis.position == "top" ? box.height : 0);
                }
                else {
                    y = 0;
                    if (t == "full")
                        x = (axis.position == "left" ? 0 : plotWidth);
                    else
                        x = box.left - plotOffset.left + (axis.position == "left" ? box.width : 0);
                }
                
                // draw tick bar
                if (!axis.innermost) {
                    ctx.beginPath();
                    xoff = yoff = 0;
                    if (axis.direction == "x")
                        xoff = plotWidth;
                    else
                        yoff = plotHeight;
                    
                    if (ctx.lineWidth == 1) {
                        x = Math.floor(x) + 0.5;
                        y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                    ctx.stroke();
                }

                // draw ticks
                ctx.beginPath();
                for (i = 0; i < axis.ticks.length; ++i) {
                    var v = axis.ticks[i].v;
                    
                    xoff = yoff = 0;

                    if (v < axis.min || v > axis.max
                        // skip those lying on the axes if we got a border
                        || (t == "full" && bw > 0
                            && (v == axis.min || v == axis.max)))
                        continue;

                    if (axis.direction == "x") {
                        x = axis.p2c(v);
                        yoff = t == "full" ? -plotHeight : t;
                        
                        if (axis.position == "top")
                            yoff = -yoff;
                    }
                    else {
                        y = axis.p2c(v);
                        xoff = t == "full" ? -plotWidth : t;
                        
                        if (axis.position == "left")
                            xoff = -xoff;
                    }

                    if (ctx.lineWidth == 1) {
                        if (axis.direction == "x")
                            x = Math.floor(x) + 0.5;
                        else
                            y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                }
                
                ctx.stroke();
            }
            
            
            // draw border
            if (bw) {
                ctx.lineWidth = bw;
                ctx.strokeStyle = options.grid.borderColor;
                ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);
            }

            ctx.restore();
        }

        function insertAxisLabels() {
            placeholder.find(".tickLabels").remove();
            
            var html = ['<div class="tickLabels" style="font-size:smaller">'];

            var axes = allAxes();
            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box;
                if (!axis.show)
                    continue;
                //debug: html.push('<div style="position:absolute;opacity:0.10;background-color:red;left:' + box.left + 'px;top:' + box.top + 'px;width:' + box.width +  'px;height:' + box.height + 'px"></div>')
                html.push('<div class="' + axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis" style="color:' + axis.options.color + '">');
                for (var i = 0; i < axis.ticks.length; ++i) {
                    var tick = axis.ticks[i];
                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)
                        continue;

                    var pos = {}, align;
                    
                    if (axis.direction == "x") {
                        align = "center";
                        pos.left = Math.round(plotOffset.left + axis.p2c(tick.v) - axis.labelWidth/2);
                        if (axis.position == "bottom")
                            pos.top = box.top + box.padding;
                        else
                            pos.bottom = canvasHeight - (box.top + box.height - box.padding);
                    }
                    else {
                        pos.top = Math.round(plotOffset.top + axis.p2c(tick.v) - axis.labelHeight/2);
                        if (axis.position == "left") {
                            pos.right = canvasWidth - (box.left + box.width - box.padding)
                            align = "right";
                        }
                        else {
                            pos.left = box.left + box.padding;
                            align = "left";
                        }
                    }

                    pos.width = axis.labelWidth;

                    var style = ["position:absolute", "text-align:" + align ];
                    for (var a in pos)
                        style.push(a + ":" + pos[a] + "px")
                    
                    html.push('<div class="tickLabel" style="' + style.join(';') + '">' + tick.label + '</div>');
                }
                html.push('</div>');
            }

            html.push('</div>');

            placeholder.append(html.join(""));
        }

        function drawSeries(series) {
            if (series.lines.show)
                drawSeriesLines(series);
            if (series.bars.show)
                drawSeriesBars(series);
            if (series.points.show)
                drawSeriesPoints(series);
        }
        
        function drawSeriesLines(series) {
            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    prevx = null, prevy = null;
                
                ctx.beginPath();
                for (var i = ps; i < points.length; i += ps) {
                    var x1 = points[i - ps], y1 = points[i - ps + 1],
                        x2 = points[i], y2 = points[i + 1];
                    
                    if (x1 == null || x2 == null)
                        continue;

                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min) {
                        if (y2 < axisy.min)
                            continue;   // line segment is outside
                        // compute new intersection point
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min) {
                        if (y1 < axisy.min)
                            continue;
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max) {
                        if (y2 > axisy.max)
                            continue;
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max) {
                        if (y1 > axisy.max)
                            continue;
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (x1 != prevx || y1 != prevy)
                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);
                    
                    prevx = x2;
                    prevy = y2;
                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);
                }
                ctx.stroke();
            }

            function plotLineArea(datapoints, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),
                    i = 0, top, areaOpen = false,
                    ypos = 1, segmentStart = 0, segmentEnd = 0;

                // we process each segment in two turns, first forward
                // direction to sketch out top, then once we hit the
                // end we go backwards to sketch the bottom
                while (true) {
                    if (ps > 0 && i > points.length + ps)
                        break;

                    i += ps; // ps is negative if going backwards

                    var x1 = points[i - ps],
                        y1 = points[i - ps + ypos],
                        x2 = points[i], y2 = points[i + ypos];

                    if (areaOpen) {
                        if (ps > 0 && x1 != null && x2 == null) {
                            // at turning point
                            segmentEnd = i;
                            ps = -ps;
                            ypos = 2;
                            continue;
                        }

                        if (ps < 0 && i == segmentStart + ps) {
                            // done with the reverse sweep
                            ctx.fill();
                            areaOpen = false;
                            ps = -ps;
                            ypos = 1;
                            i = segmentStart = segmentEnd + ps;
                            continue;
                        }
                    }

                    if (x1 == null || x2 == null)
                        continue;

                    // clip x values
                    
                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (!areaOpen) {
                        // open area
                        ctx.beginPath();
                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));
                        areaOpen = true;
                    }
                    
                    // now first check the case where both is outside
                    if (y1 >= axisy.max && y2 >= axisy.max) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));
                        continue;
                    }
                    else if (y1 <= axisy.min && y2 <= axisy.min) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));
                        continue;
                    }
                    
                    // else it's a bit more complicated, there might
                    // be a flat maxed out rectangle first, then a
                    // triangular cutout or reverse; to find these
                    // keep track of the current x values
                    var x1old = x1, x2old = x2;

                    // clip the y values, without shortcutting, we
                    // go through all cases in turn
                    
                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // if the x value was changed we got a rectangle
                    // to fill
                    if (x1 != x1old) {
                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));
                        // it goes to (x1, y1), but we fill that below
                    }
                    
                    // fill triangular section, this sometimes result
                    // in redundant points if (x1, y1) hasn't changed
                    // from previous line to, but we just ignore that
                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));
                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));

                    // fill the other rectangle if it's there
                    if (x2 != x2old) {
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));
                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));
                    }
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);
            ctx.lineJoin = "round";

            var lw = series.lines.lineWidth,
                sw = series.shadowSize;
            // FIXME: consider another form of shadow when filling is turned on
            if (lw > 0 && sw > 0) {
                // draw shadow as a thick and thin line with transparency
                ctx.lineWidth = sw;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                // position shadow at angle from the mid of line
                var angle = Math.PI/18;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);
                ctx.lineWidth = sw/2;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);
            if (fillStyle) {
                ctx.fillStyle = fillStyle;
                plotLineArea(series.datapoints, series.xaxis, series.yaxis);
            }

            if (lw > 0)
                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function drawSeriesPoints(series) {
            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {
                var points = datapoints.points, ps = datapoints.pointsize;

                for (var i = 0; i < points.length; i += ps) {
                    var x = points[i], y = points[i + 1];
                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                        continue;
                    
                    ctx.beginPath();
                    x = axisx.p2c(x);
                    y = axisy.p2c(y) + offset;
                    if (symbol == "circle")
                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);
                    else
                        symbol(ctx, x, y, radius, shadow);
                    ctx.closePath();
                    
                    if (fillStyle) {
                        ctx.fillStyle = fillStyle;
                        ctx.fill();
                    }
                    ctx.stroke();
                }
            }
            
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            var lw = series.points.lineWidth,
                sw = series.shadowSize,
                radius = series.points.radius,
                symbol = series.points.symbol;
            if (lw > 0 && sw > 0) {
                // draw shadow in two steps
                var w = sw / 2;
                ctx.lineWidth = w;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                plotPoints(series.datapoints, radius, null, w + w/2, true,
                           series.xaxis, series.yaxis, symbol);

                ctx.strokeStyle = "rgba(0,0,0,0.2)";
                plotPoints(series.datapoints, radius, null, w/2, true,
                           series.xaxis, series.yaxis, symbol);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            plotPoints(series.datapoints, radius,
                       getFillStyle(series.points, series.color), 0, false,
                       series.xaxis, series.yaxis, symbol);
            ctx.restore();
        }

        function drawBar(x, y, b, barLeft, barRight, offset, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {
            var left, right, bottom, top,
                drawLeft, drawRight, drawTop, drawBottom,
                tmp;

            // in horizontal mode, we start the bar from the left
            // instead of from the bottom so it appears to be
            // horizontal rather than vertical
            if (horizontal) {
                drawBottom = drawRight = drawTop = true;
                drawLeft = false;
                left = b;
                right = x;
                top = y + barLeft;
                bottom = y + barRight;

                // account for negative bars
                if (right < left) {
                    tmp = right;
                    right = left;
                    left = tmp;
                    drawLeft = true;
                    drawRight = false;
                }
            }
            else {
                drawLeft = drawRight = drawTop = true;
                drawBottom = false;
                left = x + barLeft;
                right = x + barRight;
                bottom = b;
                top = y;

                // account for negative bars
                if (top < bottom) {
                    tmp = top;
                    top = bottom;
                    bottom = tmp;
                    drawBottom = true;
                    drawTop = false;
                }
            }
           
            // clip
            if (right < axisx.min || left > axisx.max ||
                top < axisy.min || bottom > axisy.max)
                return;
            
            if (left < axisx.min) {
                left = axisx.min;
                drawLeft = false;
            }

            if (right > axisx.max) {
                right = axisx.max;
                drawRight = false;
            }

            if (bottom < axisy.min) {
                bottom = axisy.min;
                drawBottom = false;
            }
            
            if (top > axisy.max) {
                top = axisy.max;
                drawTop = false;
            }

            left = axisx.p2c(left);
            bottom = axisy.p2c(bottom);
            right = axisx.p2c(right);
            top = axisy.p2c(top);
            
            // fill the bar
            if (fillStyleCallback) {
                c.beginPath();
                c.moveTo(left, bottom);
                c.lineTo(left, top);
                c.lineTo(right, top);
                c.lineTo(right, bottom);
                c.fillStyle = fillStyleCallback(bottom, top);
                c.fill();
            }

            // draw outline
            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {
                c.beginPath();

                // FIXME: inline moveTo is buggy with excanvas
                c.moveTo(left, bottom + offset);
                if (drawLeft)
                    c.lineTo(left, top + offset);
                else
                    c.moveTo(left, top + offset);
                if (drawTop)
                    c.lineTo(right, top + offset);
                else
                    c.moveTo(right, top + offset);
                if (drawRight)
                    c.lineTo(right, bottom + offset);
                else
                    c.moveTo(right, bottom + offset);
                if (drawBottom)
                    c.lineTo(left, bottom + offset);
                else
                    c.moveTo(left, bottom + offset);
                c.stroke();
            }
        }
        
        function drawSeriesBars(series) {
            function plotBars(datapoints, barLeft, barRight, offset, fillStyleCallback, axisx, axisy) {
                var points = datapoints.points, ps = datapoints.pointsize;
                
                for (var i = 0; i < points.length; i += ps) {
                    if (points[i] == null)
                        continue;
                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, offset, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // FIXME: figure out a way to add shadows (for instance along the right edge)
            ctx.lineWidth = series.bars.lineWidth;
            ctx.strokeStyle = series.color;
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;
            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, 0, fillStyleCallback, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function getFillStyle(filloptions, seriesColor, bottom, top) {
            var fill = filloptions.fill;
            if (!fill)
                return null;

            if (filloptions.fillColor)
                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);
            
            var c = $.color.parse(seriesColor);
            c.a = typeof fill == "number" ? fill : 0.4;
            c.normalize();
            return c.toString();
        }
        
        function insertLegend() {
            placeholder.find(".legend").remove();

            if (!options.legend.show)
                return;
            
            var fragments = [], rowStarted = false,
                lf = options.legend.labelFormatter, s, label;
            for (var i = 0; i < series.length; ++i) {
                s = series[i];
                label = s.label;
                if (!label)
                    continue;
                
                if (i % options.legend.noColumns == 0) {
                    if (rowStarted)
                        fragments.push('</tr>');
                    fragments.push('<tr>');
                    rowStarted = true;
                }

                if (lf)
                    label = lf(label, s);
                
                fragments.push(
                    '<td class="legendColorBox"><div style="border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px"><div style="width:4px;height:0;border:5px solid ' + s.color + ';overflow:hidden"></div></div></td>' +
                    '<td class="legendLabel">' + label + '</td>');
            }
            if (rowStarted)
                fragments.push('</tr>');
            
            if (fragments.length == 0)
                return;

            var table = '<table style="font-size:smaller;color:' + options.grid.color + '">' + fragments.join("") + '</table>';
            if (options.legend.container != null)
                $(options.legend.container).html(table);
            else {
                var pos = "",
                    p = options.legend.position,
                    m = options.legend.margin;
                if (m[0] == null)
                    m = [m, m];
                if (p.charAt(0) == "n")
                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';
                else if (p.charAt(0) == "s")
                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';
                if (p.charAt(1) == "e")
                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';
                else if (p.charAt(1) == "w")
                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';
                var legend = $('<div class="legend">' + table.replace('style="', 'style="position:absolute;' + pos +';') + '</div>').appendTo(placeholder);
                if (options.legend.backgroundOpacity != 0.0) {
                    // put in the transparent background
                    // separately to avoid blended labels and
                    // label boxes
                    var c = options.legend.backgroundColor;
                    if (c == null) {
                        c = options.grid.backgroundColor;
                        if (c && typeof c == "string")
                            c = $.color.parse(c);
                        else
                            c = $.color.extract(legend, 'background-color');
                        c.a = 1;
                        c = c.toString();
                    }
                    var div = legend.children();
                    $('<div style="position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);
                }
            }
        }


        // interactive features
        
        var highlights = [],
            redrawTimeout = null;
        
        // returns the data item the mouse is over, or null if none is found
        function findNearbyItem(mouseX, mouseY, seriesFilter) {
            var maxDistance = options.grid.mouseActiveRadius,
                smallestDistance = maxDistance * maxDistance + 1,
                item = null, foundPoint = false, i, j;

            for (i = series.length - 1; i >= 0; --i) {
                if (!seriesFilter(series[i]))
                    continue;
                
                var s = series[i],
                    axisx = s.xaxis,
                    axisy = s.yaxis,
                    points = s.datapoints.points,
                    ps = s.datapoints.pointsize,
                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster
                    my = axisy.c2p(mouseY),
                    maxx = maxDistance / axisx.scale,
                    maxy = maxDistance / axisy.scale;

                // with inverse transforms, we can't use the maxx/maxy
                // optimization, sadly
                if (axisx.options.inverseTransform)
                    maxx = Number.MAX_VALUE;
                if (axisy.options.inverseTransform)
                    maxy = Number.MAX_VALUE;
                
                if (s.lines.show || s.points.show) {
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1];
                        if (x == null)
                            continue;
                        
                        // For points and lines, the cursor must be within a
                        // certain distance to the data point
                        if (x - mx > maxx || x - mx < -maxx ||
                            y - my > maxy || y - my < -maxy)
                            continue;

                        // We have to calculate distances in pixels, not in
                        // data units, because the scales of the axes may be different
                        var dx = Math.abs(axisx.p2c(x) - mouseX),
                            dy = Math.abs(axisy.p2c(y) - mouseY),
                            dist = dx * dx + dy * dy; // we save the sqrt

                        // use <= to ensure last point takes precedence
                        // (last generally means on top of)
                        if (dist < smallestDistance) {
                            smallestDistance = dist;
                            item = [i, j / ps];
                        }
                    }
                }
                    
                if (s.bars.show && !item) { // no other point can be nearby
                    var barLeft = s.bars.align == "left" ? 0 : -s.bars.barWidth/2,
                        barRight = barLeft + s.bars.barWidth;
                    
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1], b = points[j + 2];
                        if (x == null)
                            continue;
  
                        // for a bar graph, the cursor must be inside the bar
                        if (series[i].bars.horizontal ? 
                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) && 
                             my >= y + barLeft && my <= y + barRight) :
                            (mx >= x + barLeft && mx <= x + barRight &&
                             my >= Math.min(b, y) && my <= Math.max(b, y)))
                                item = [i, j / ps];
                    }
                }
            }

            if (item) {
                i = item[0];
                j = item[1];
                ps = series[i].datapoints.pointsize;
                
                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),
                         dataIndex: j,
                         series: series[i],
                         seriesIndex: i };
            }
            
            return null;
        }

        function onMouseMove(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return s["hoverable"] != false; });
        }

        function onMouseLeave(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return false; });
        }

        function onClick(e) {
            triggerClickHoverEvent("plotclick", e,
                                   function (s) { return s["clickable"] != false; });
        }

        // trigger click or hover event (they send the same parameters
        // so we share their code)
        function triggerClickHoverEvent(eventname, event, seriesFilter) {
            var offset = eventHolder.offset(),
                canvasX = event.pageX - offset.left - plotOffset.left,
                canvasY = event.pageY - offset.top - plotOffset.top,
            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });

            pos.pageX = event.pageX;
            pos.pageY = event.pageY;

            var item = findNearbyItem(canvasX, canvasY, seriesFilter);

            if (item) {
                // fill in mouse pos for any listeners out there
                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left);
                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top);
            }

            if (options.grid.autoHighlight) {
                // clear auto-highlights
                for (var i = 0; i < highlights.length; ++i) {
                    var h = highlights[i];
                    if (h.auto == eventname &&
                        !(item && h.series == item.series &&
                          h.point[0] == item.datapoint[0] &&
                          h.point[1] == item.datapoint[1]))
                        unhighlight(h.series, h.point);
                }
                
                if (item)
                    highlight(item.series, item.datapoint, eventname);
            }
            
            placeholder.trigger(eventname, [ pos, item ]);
        }

        function triggerRedrawOverlay() {
            if (!redrawTimeout)
                redrawTimeout = setTimeout(drawOverlay, 30);
        }

        function drawOverlay() {
            redrawTimeout = null;

            // draw highlights
            octx.save();
            octx.clearRect(0, 0, canvasWidth, canvasHeight);
            octx.translate(plotOffset.left, plotOffset.top);
            
            var i, hi;
            for (i = 0; i < highlights.length; ++i) {
                hi = highlights[i];

                if (hi.series.bars.show)
                    drawBarHighlight(hi.series, hi.point);
                else
                    drawPointHighlight(hi.series, hi.point);
            }
            octx.restore();
            
            executeHooks(hooks.drawOverlay, [octx]);
        }
        
        function highlight(s, point, auto) {
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number") {
                var ps = s.datapoints.pointsize;
                point = s.datapoints.points.slice(ps * point, ps * (point + 1));
            }

            var i = indexOfHighlight(s, point);
            if (i == -1) {
                highlights.push({ series: s, point: point, auto: auto });

                triggerRedrawOverlay();
            }
            else if (!auto)
                highlights[i].auto = false;
        }
            
        function unhighlight(s, point) {
            if (s == null && point == null) {
                highlights = [];
                triggerRedrawOverlay();
            }
            
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number")
                point = s.data[point];

            var i = indexOfHighlight(s, point);
            if (i != -1) {
                highlights.splice(i, 1);

                triggerRedrawOverlay();
            }
        }
        
        function indexOfHighlight(s, p) {
            for (var i = 0; i < highlights.length; ++i) {
                var h = highlights[i];
                if (h.series == s && h.point[0] == p[0]
                    && h.point[1] == p[1])
                    return i;
            }
            return -1;
        }
        
        function drawPointHighlight(series, point) {
            var x = point[0], y = point[1],
                axisx = series.xaxis, axisy = series.yaxis;
            
            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                return;
            
            var pointRadius = series.points.radius + series.points.lineWidth / 2;
            octx.lineWidth = pointRadius;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var radius = 1.5 * pointRadius,
                x = axisx.p2c(x),
                y = axisy.p2c(y);
            
            octx.beginPath();
            if (series.points.symbol == "circle")
                octx.arc(x, y, radius, 0, 2 * Math.PI, false);
            else
                series.points.symbol(octx, x, y, radius, false);
            octx.closePath();
            octx.stroke();
        }

        function drawBarHighlight(series, point) {
            octx.lineWidth = series.bars.lineWidth;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var fillStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,
                    0, function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);
        }

        function getColorOrGradient(spec, bottom, top, defaultColor) {
            if (typeof spec == "string")
                return spec;
            else {
                // assume this is a gradient spec; IE currently only
                // supports a simple vertical gradient properly, so that's
                // what we support too
                var gradient = ctx.createLinearGradient(0, top, 0, bottom);
                
                for (var i = 0, l = spec.colors.length; i < l; ++i) {
                    var c = spec.colors[i];
                    if (typeof c != "string") {
                        var co = $.color.parse(defaultColor);
                        if (c.brightness != null)
                            co = co.scale('rgb', c.brightness)
                        if (c.opacity != null)
                            co.a *= c.opacity;
                        c = co.toString();
                    }
                    gradient.addColorStop(i / (l - 1), c);
                }
                
                return gradient;
            }
        }
    }

    $.plot = function(placeholder, data, options) {
        //var t0 = new Date();
        var plot = new Plot($(placeholder), data, options, $.plot.plugins);
        //(window.console ? console.log : alert)("time used (msecs): " + ((new Date()).getTime() - t0.getTime()));
        return plot;
    };

    $.plot.version = "0.7";
    
    $.plot.plugins = [];

    // returns a string with the date d formatted according to fmt
    $.plot.formatDate = function(d, fmt, monthNames) {
        var leftPad = function(n) {
            n = "" + n;
            return n.length == 1 ? "0" + n : n;
        };
        
        var r = [];
        var escape = false, padNext = false;
        var hours = d.getUTCHours();
        var isAM = hours < 12;
        if (monthNames == null)
            monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

        if (fmt.search(/%p|%P/) != -1) {
            if (hours > 12) {
                hours = hours - 12;
            } else if (hours == 0) {
                hours = 12;
            }
        }
        for (var i = 0; i < fmt.length; ++i) {
            var c = fmt.charAt(i);
            
            if (escape) {
                switch (c) {
                case 'h': c = "" + hours; break;
                case 'H': c = leftPad(hours); break;
                case 'M': c = leftPad(d.getUTCMinutes()); break;
                case 'S': c = leftPad(d.getUTCSeconds()); break;
                case 'd': c = "" + d.getUTCDate(); break;
                case 'm': c = "" + (d.getUTCMonth() + 1); break;
                case 'y': c = "" + d.getUTCFullYear(); break;
                case 'b': c = "" + monthNames[d.getUTCMonth()]; break;
                case 'p': c = (isAM) ? ("" + "am") : ("" + "pm"); break;
                case 'P': c = (isAM) ? ("" + "AM") : ("" + "PM"); break;
                case '0': c = ""; padNext = true; break;
                }
                if (c && padNext) {
                    c = leftPad(c);
                    padNext = false;
                }
                r.push(c);
                if (!padNext)
                    escape = false;
            }
            else {
                if (c == "%")
                    escape = true;
                else
                    r.push(c);
            }
        }
        return r.join("");
    };
    
    // round to nearby lower multiple of base
    function floorInBase(n, base) {
        return base * Math.floor(n / base);
    }
    
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:flot', location = '/bower/jquery-flot/jquery.flot.pie.js' */
/*
Flot plugin for rendering pie charts. The plugin assumes the data is 
coming is as a single data value for each series, and each of those 
values is a positive value or zero (negative numbers don't make 
any sense and will cause strange effects). The data values do 
NOT need to be passed in as percentage values because it 
internally calculates the total and percentages.

* Created by Brian Medendorp, June 2009
* Updated November 2009 with contributions from: btburnett3, Anthony Aragues and Xavi Ivars

* Changes:
	2009-10-22: lineJoin set to round
	2009-10-23: IE full circle fix, donut
	2009-11-11: Added basic hover from btburnett3 - does not work in IE, and center is off in Chrome and Opera
	2009-11-17: Added IE hover capability submitted by Anthony Aragues
	2009-11-18: Added bug fix submitted by Xavi Ivars (issues with arrays when other JS libraries are included as well)
		

Available options are:
series: {
	pie: {
		show: true/false
		radius: 0-1 for percentage of fullsize, or a specified pixel length, or 'auto'
		innerRadius: 0-1 for percentage of fullsize or a specified pixel length, for creating a donut effect
		startAngle: 0-2 factor of PI used for starting angle (in radians) i.e 3/2 starts at the top, 0 and 2 have the same result
		tilt: 0-1 for percentage to tilt the pie, where 1 is no tilt, and 0 is completely flat (nothing will show)
		offset: {
			top: integer value to move the pie up or down
			left: integer value to move the pie left or right, or 'auto'
		},
		stroke: {
			color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#FFF')
			width: integer pixel width of the stroke
		},
		label: {
			show: true/false, or 'auto'
			formatter:  a user-defined function that modifies the text/style of the label text
			radius: 0-1 for percentage of fullsize, or a specified pixel length
			background: {
				color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#000')
				opacity: 0-1
			},
			threshold: 0-1 for the percentage value at which to hide labels (if they're too small)
		},
		combine: {
			threshold: 0-1 for the percentage value at which to combine slices (if they're too small)
			color: any hexidecimal color value (other formats may or may not work, so best to stick with something like '#CCC'), if null, the plugin will automatically use the color of the first slice to be combined
			label: any text value of what the combined slice should be labeled
		}
		highlight: {
			opacity: 0-1
		}
	}
}

More detail and specific examples can be found in the included HTML file.

*/

(function ($) 
{
	function init(plot) // this is the "body" of the plugin
	{
		var canvas = null;
		var target = null;
		var maxRadius = null;
		var centerLeft = null;
		var centerTop = null;
		var total = 0;
		var redraw = true;
		var redrawAttempts = 10;
		var shrink = 0.95;
		var legendWidth = 0;
		var processed = false;
		var raw = false;
		
		// interactive variables	
		var highlights = [];	
	
		// add hook to determine if pie plugin in enabled, and then perform necessary operations
		plot.hooks.processOptions.push(checkPieEnabled);
		plot.hooks.bindEvents.push(bindEvents);	

		// check to see if the pie plugin is enabled
		function checkPieEnabled(plot, options)
		{
			if (options.series.pie.show)
			{
				//disable grid
				options.grid.show = false;
				
				// set labels.show
				if (options.series.pie.label.show=='auto')
					if (options.legend.show)
						options.series.pie.label.show = false;
					else
						options.series.pie.label.show = true;
				
				// set radius
				if (options.series.pie.radius=='auto')
					if (options.series.pie.label.show)
						options.series.pie.radius = 3/4;
					else
						options.series.pie.radius = 1;
						
				// ensure sane tilt
				if (options.series.pie.tilt>1)
					options.series.pie.tilt=1;
				if (options.series.pie.tilt<0)
					options.series.pie.tilt=0;
			
				// add processData hook to do transformations on the data
				plot.hooks.processDatapoints.push(processDatapoints);
				plot.hooks.drawOverlay.push(drawOverlay);	
				
				// add draw hook
				plot.hooks.draw.push(draw);
			}
		}
	
		// bind hoverable events
		function bindEvents(plot, eventHolder) 		
		{		
			var options = plot.getOptions();
			
			if (options.series.pie.show && options.grid.hoverable)
				eventHolder.unbind('mousemove').mousemove(onMouseMove);
				
			if (options.series.pie.show && options.grid.clickable)
				eventHolder.unbind('click').click(onClick);
		}	
		

		// debugging function that prints out an object
		function alertObject(obj)
		{
			var msg = '';
			function traverse(obj, depth)
			{
				if (!depth)
					depth = 0;
				for (var i = 0; i < obj.length; ++i)
				{
					for (var j=0; j<depth; j++)
						msg += '\t';
				
					if( typeof obj[i] == "object")
					{	// its an object
						msg += ''+i+':\n';
						traverse(obj[i], depth+1);
					}
					else
					{	// its a value
						msg += ''+i+': '+obj[i]+'\n';
					}
				}
			}
			traverse(obj);
			alert(msg);
		}
		
		function calcTotal(data)
		{
			for (var i = 0; i < data.length; ++i)
			{
				var item = parseFloat(data[i].data[0][1]);
				if (item)
					total += item;
			}
		}	
		
		function processDatapoints(plot, series, data, datapoints) 
		{	
			if (!processed)
			{
				processed = true;
			
				canvas = plot.getCanvas();
				target = $(canvas).parent();
				options = plot.getOptions();
			
				plot.setData(combine(plot.getData()));
			}
		}
		
		function setupPie()
		{
			legendWidth = target.children().filter('.legend').children().width();
		
			// calculate maximum radius and center point
			maxRadius =  Math.min(canvas.width,(canvas.height/options.series.pie.tilt))/2;
			centerTop = (canvas.height/2)+options.series.pie.offset.top;
			centerLeft = (canvas.width/2);
			
			if (options.series.pie.offset.left=='auto')
				if (options.legend.position.match('w'))
					centerLeft += legendWidth/2;
				else
					centerLeft -= legendWidth/2;
			else
				centerLeft += options.series.pie.offset.left;
					
			if (centerLeft<maxRadius)
				centerLeft = maxRadius;
			else if (centerLeft>canvas.width-maxRadius)
				centerLeft = canvas.width-maxRadius;
		}
		
		function fixData(data)
		{
			for (var i = 0; i < data.length; ++i)
			{
				if (typeof(data[i].data)=='number')
					data[i].data = [[1,data[i].data]];
				else if (typeof(data[i].data)=='undefined' || typeof(data[i].data[0])=='undefined')
				{
					if (typeof(data[i].data)!='undefined' && typeof(data[i].data.label)!='undefined')
						data[i].label = data[i].data.label; // fix weirdness coming from flot
					data[i].data = [[1,0]];
					
				}
			}
			return data;
		}
		
		function combine(data)
		{
			data = fixData(data);
			calcTotal(data);
			var combined = 0;
			var numCombined = 0;
			var color = options.series.pie.combine.color;
			
			var newdata = [];
			for (var i = 0; i < data.length; ++i)
			{
				// make sure its a number
				data[i].data[0][1] = parseFloat(data[i].data[0][1]);
				if (!data[i].data[0][1])
					data[i].data[0][1] = 0;
					
				if (data[i].data[0][1]/total<=options.series.pie.combine.threshold)
				{
					combined += data[i].data[0][1];
					numCombined++;
					if (!color)
						color = data[i].color;
				}				
				else
				{
					newdata.push({
						data: [[1,data[i].data[0][1]]], 
						color: data[i].color, 
						label: data[i].label,
						angle: (data[i].data[0][1]*(Math.PI*2))/total,
						percent: (data[i].data[0][1]/total*100)
					});
				}
			}
			if (numCombined>0)
				newdata.push({
					data: [[1,combined]], 
					color: color, 
					label: options.series.pie.combine.label,
					angle: (combined*(Math.PI*2))/total,
					percent: (combined/total*100)
				});
			return newdata;
		}		
		
		function draw(plot, newCtx)
		{
			if (!target) return; // if no series were passed
			ctx = newCtx;
		
			setupPie();
			var slices = plot.getData();
		
			var attempts = 0;
			while (redraw && attempts<redrawAttempts)
			{
				redraw = false;
				if (attempts>0)
					maxRadius *= shrink;
				attempts += 1;
				clear();
				if (options.series.pie.tilt<=0.8)
					drawShadow();
				drawPie();
			}
			if (attempts >= redrawAttempts) {
				clear();
				target.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>');
			}
			
			if ( plot.setSeries && plot.insertLegend )
			{
				plot.setSeries(slices);
				plot.insertLegend();
			}
			
			// we're actually done at this point, just defining internal functions at this point
			
			function clear()
			{
				ctx.clearRect(0,0,canvas.width,canvas.height);
				target.children().filter('.pieLabel, .pieLabelBackground').remove();
			}
			
			function drawShadow()
			{
				var shadowLeft = 5;
				var shadowTop = 15;
				var edge = 10;
				var alpha = 0.02;
			
				// set radius
				if (options.series.pie.radius>1)
					var radius = options.series.pie.radius;
				else
					var radius = maxRadius * options.series.pie.radius;
					
				if (radius>=(canvas.width/2)-shadowLeft || radius*options.series.pie.tilt>=(canvas.height/2)-shadowTop || radius<=edge)
					return;	// shadow would be outside canvas, so don't draw it
			
				ctx.save();
				ctx.translate(shadowLeft,shadowTop);
				ctx.globalAlpha = alpha;
				ctx.fillStyle = '#000';

				// center and rotate to starting position
				ctx.translate(centerLeft,centerTop);
				ctx.scale(1, options.series.pie.tilt);
				
				//radius -= edge;
				for (var i=1; i<=edge; i++)
				{
					ctx.beginPath();
					ctx.arc(0,0,radius,0,Math.PI*2,false);
					ctx.fill();
					radius -= i;
				}	
				
				ctx.restore();
			}
			
			function drawPie()
			{
				startAngle = Math.PI*options.series.pie.startAngle;
				
				// set radius
				if (options.series.pie.radius>1)
					var radius = options.series.pie.radius;
				else
					var radius = maxRadius * options.series.pie.radius;
				
				// center and rotate to starting position
				ctx.save();
				ctx.translate(centerLeft,centerTop);
				ctx.scale(1, options.series.pie.tilt);
				//ctx.rotate(startAngle); // start at top; -- This doesn't work properly in Opera
				
				// draw slices
				ctx.save();
				var currentAngle = startAngle;
				for (var i = 0; i < slices.length; ++i)
				{
					slices[i].startAngle = currentAngle;
					drawSlice(slices[i].angle, slices[i].color, true);
				}
				ctx.restore();
				
				// draw slice outlines
				ctx.save();
				ctx.lineWidth = options.series.pie.stroke.width;
				currentAngle = startAngle;
				for (var i = 0; i < slices.length; ++i)
					drawSlice(slices[i].angle, options.series.pie.stroke.color, false);
				ctx.restore();
					
				// draw donut hole
				drawDonutHole(ctx);
				
				// draw labels
				if (options.series.pie.label.show)
					drawLabels();
				
				// restore to original state
				ctx.restore();
				
				function drawSlice(angle, color, fill)
				{	
					if (angle<=0)
						return;
				
					if (fill)
						ctx.fillStyle = color;
					else
					{
						ctx.strokeStyle = color;
						ctx.lineJoin = 'round';
					}
						
					ctx.beginPath();
					if (Math.abs(angle - Math.PI*2) > 0.000000001)
						ctx.moveTo(0,0); // Center of the pie
					else if ($.browser.msie)
						angle -= 0.0001;
					//ctx.arc(0,0,radius,0,angle,false); // This doesn't work properly in Opera
					ctx.arc(0,0,radius,currentAngle,currentAngle+angle,false);
					ctx.closePath();
					//ctx.rotate(angle); // This doesn't work properly in Opera
					currentAngle += angle;
					
					if (fill)
						ctx.fill();
					else
						ctx.stroke();
				}
				
				function drawLabels()
				{
					var currentAngle = startAngle;
					
					// set radius
					if (options.series.pie.label.radius>1)
						var radius = options.series.pie.label.radius;
					else
						var radius = maxRadius * options.series.pie.label.radius;
					
					for (var i = 0; i < slices.length; ++i)
					{
						if (slices[i].percent >= options.series.pie.label.threshold*100)
							drawLabel(slices[i], currentAngle, i);
						currentAngle += slices[i].angle;
					}
					
					function drawLabel(slice, startAngle, index)
					{
						if (slice.data[0][1]==0)
							return;
							
						// format label text
						var lf = options.legend.labelFormatter, text, plf = options.series.pie.label.formatter;
						if (lf)
							text = lf(slice.label, slice);
						else
							text = slice.label;
						if (plf)
							text = plf(text, slice);
							
						var halfAngle = ((startAngle+slice.angle) + startAngle)/2;
						var x = centerLeft + Math.round(Math.cos(halfAngle) * radius);
						var y = centerTop + Math.round(Math.sin(halfAngle) * radius) * options.series.pie.tilt;
						
						var html = '<span class="pieLabel" id="pieLabel'+index+'" style="position:absolute;top:' + y + 'px;left:' + x + 'px;">' + text + "</span>";
						target.append(html);
						var label = target.children('#pieLabel'+index);
						var labelTop = (y - label.height()/2);
						var labelLeft = (x - label.width()/2);
						label.css('top', labelTop);
						label.css('left', labelLeft);
						
						// check to make sure that the label is not outside the canvas
						if (0-labelTop>0 || 0-labelLeft>0 || canvas.height-(labelTop+label.height())<0 || canvas.width-(labelLeft+label.width())<0)
							redraw = true;
						
						if (options.series.pie.label.background.opacity != 0) {
							// put in the transparent background separately to avoid blended labels and label boxes
							var c = options.series.pie.label.background.color;
							if (c == null) {
								c = slice.color;
							}
							var pos = 'top:'+labelTop+'px;left:'+labelLeft+'px;';
							$('<div class="pieLabelBackground" style="position:absolute;width:' + label.width() + 'px;height:' + label.height() + 'px;' + pos +'background-color:' + c + ';"> </div>').insertBefore(label).css('opacity', options.series.pie.label.background.opacity);
						}
					} // end individual label function
				} // end drawLabels function
			} // end drawPie function
		} // end draw function
		
		// Placed here because it needs to be accessed from multiple locations 
		function drawDonutHole(layer)
		{
			// draw donut hole
			if(options.series.pie.innerRadius > 0)
			{
				// subtract the center
				layer.save();
				innerRadius = options.series.pie.innerRadius > 1 ? options.series.pie.innerRadius : maxRadius * options.series.pie.innerRadius;
				layer.globalCompositeOperation = 'destination-out'; // this does not work with excanvas, but it will fall back to using the stroke color
				layer.beginPath();
				layer.fillStyle = options.series.pie.stroke.color;
				layer.arc(0,0,innerRadius,0,Math.PI*2,false);
				layer.fill();
				layer.closePath();
				layer.restore();
				
				// add inner stroke
				layer.save();
				layer.beginPath();
				layer.strokeStyle = options.series.pie.stroke.color;
				layer.arc(0,0,innerRadius,0,Math.PI*2,false);
				layer.stroke();
				layer.closePath();
				layer.restore();
				// TODO: add extra shadow inside hole (with a mask) if the pie is tilted.
			}
		}
		
		//-- Additional Interactive related functions --
		
		function isPointInPoly(poly, pt)
		{
			for(var c = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i)
				((poly[i][1] <= pt[1] && pt[1] < poly[j][1]) || (poly[j][1] <= pt[1] && pt[1]< poly[i][1]))
				&& (pt[0] < (poly[j][0] - poly[i][0]) * (pt[1] - poly[i][1]) / (poly[j][1] - poly[i][1]) + poly[i][0])
				&& (c = !c);
			return c;
		}
		
		function findNearbySlice(mouseX, mouseY)
		{
			var slices = plot.getData(),
				options = plot.getOptions(),
				radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;
			
			for (var i = 0; i < slices.length; ++i) 
			{
				var s = slices[i];	
				
				if(s.pie.show)
				{
					ctx.save();
					ctx.beginPath();
					ctx.moveTo(0,0); // Center of the pie
					//ctx.scale(1, options.series.pie.tilt);	// this actually seems to break everything when here.
					ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle,false);
					ctx.closePath();
					x = mouseX-centerLeft;
					y = mouseY-centerTop;
					if(ctx.isPointInPath)
					{
						if (ctx.isPointInPath(mouseX-centerLeft, mouseY-centerTop))
						{
							//alert('found slice!');
							ctx.restore();
							return {datapoint: [s.percent, s.data], dataIndex: 0, series: s, seriesIndex: i};
						}
					}
					else
					{
						// excanvas for IE doesn;t support isPointInPath, this is a workaround. 
						p1X = (radius * Math.cos(s.startAngle));
						p1Y = (radius * Math.sin(s.startAngle));
						p2X = (radius * Math.cos(s.startAngle+(s.angle/4)));
						p2Y = (radius * Math.sin(s.startAngle+(s.angle/4)));
						p3X = (radius * Math.cos(s.startAngle+(s.angle/2)));
						p3Y = (radius * Math.sin(s.startAngle+(s.angle/2)));
						p4X = (radius * Math.cos(s.startAngle+(s.angle/1.5)));
						p4Y = (radius * Math.sin(s.startAngle+(s.angle/1.5)));
						p5X = (radius * Math.cos(s.startAngle+s.angle));
						p5Y = (radius * Math.sin(s.startAngle+s.angle));
						arrPoly = [[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]];
						arrPoint = [x,y];
						// TODO: perhaps do some mathmatical trickery here with the Y-coordinate to compensate for pie tilt?
						if(isPointInPoly(arrPoly, arrPoint))
						{
							ctx.restore();
							return {datapoint: [s.percent, s.data], dataIndex: 0, series: s, seriesIndex: i};
						}			
					}
					ctx.restore();
				}
			}
			
			return null;
		}

		function onMouseMove(e) 
		{
			triggerClickHoverEvent('plothover', e);
		}
		
        function onClick(e) 
		{
			triggerClickHoverEvent('plotclick', e);
        }

		// trigger click or hover event (they send the same parameters so we share their code)
		function triggerClickHoverEvent(eventname, e) 
		{
			var offset = plot.offset(),
				canvasX = parseInt(e.pageX - offset.left),
				canvasY =  parseInt(e.pageY - offset.top),
				item = findNearbySlice(canvasX, canvasY);
			
			if (options.grid.autoHighlight) 
			{
				// clear auto-highlights
				for (var i = 0; i < highlights.length; ++i) 
				{
					var h = highlights[i];
					if (h.auto == eventname && !(item && h.series == item.series))
						unhighlight(h.series);
				}
			}
			
			// highlight the slice
			if (item) 
			    highlight(item.series, eventname);
				
			// trigger any hover bind events
			var pos = { pageX: e.pageX, pageY: e.pageY };
			target.trigger(eventname, [ pos, item ]);	
		}

		function highlight(s, auto) 
		{
			if (typeof s == "number")
				s = series[s];

			var i = indexOfHighlight(s);
			if (i == -1) 
			{
				highlights.push({ series: s, auto: auto });
				plot.triggerRedrawOverlay();
			}
			else if (!auto)
				highlights[i].auto = false;
		}

		function unhighlight(s) 
		{
			if (s == null) 
			{
				highlights = [];
				plot.triggerRedrawOverlay();
			}
			
			if (typeof s == "number")
				s = series[s];

			var i = indexOfHighlight(s);
			if (i != -1) 
			{
				highlights.splice(i, 1);
				plot.triggerRedrawOverlay();
			}
		}

		function indexOfHighlight(s) 
		{
			for (var i = 0; i < highlights.length; ++i) 
			{
				var h = highlights[i];
				if (h.series == s)
					return i;
			}
			return -1;
		}

		function drawOverlay(plot, octx) 
		{
			//alert(options.series.pie.radius);
			var options = plot.getOptions();
			//alert(options.series.pie.radius);
			
			var radius = options.series.pie.radius > 1 ? options.series.pie.radius : maxRadius * options.series.pie.radius;

			octx.save();
			octx.translate(centerLeft, centerTop);
			octx.scale(1, options.series.pie.tilt);
			
			for (i = 0; i < highlights.length; ++i) 
				drawHighlight(highlights[i].series);
			
			drawDonutHole(octx);

			octx.restore();

			function drawHighlight(series) 
			{
				if (series.angle < 0) return;
				
				//octx.fillStyle = parseColor(options.series.pie.highlight.color).scale(null, null, null, options.series.pie.highlight.opacity).toString();
				octx.fillStyle = "rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")"; // this is temporary until we have access to parseColor
				
				octx.beginPath();
				if (Math.abs(series.angle - Math.PI*2) > 0.000000001)
					octx.moveTo(0,0); // Center of the pie
				octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle,false);
				octx.closePath();
				octx.fill();
			}
			
		}	
		
	} // end init (plugin body)
	
	// define pie specific options and their default values
	var options = {
		series: {
			pie: {
				show: false,
				radius: 'auto',	// actual radius of the visible pie (based on full calculated radius if <=1, or hard pixel value)
				innerRadius:0, /* for donut */
				startAngle: 3/2,
				tilt: 1,
				offset: {
					top: 0,
					left: 'auto'
				},
				stroke: {
					color: '#FFF',
					width: 1
				},
				label: {
					show: 'auto',
					formatter: function(label, slice){
						return '<div style="font-size:x-small;text-align:center;padding:2px;color:'+slice.color+';">'+label+'<br/>'+Math.round(slice.percent)+'%</div>';
					},	// formatter function
					radius: 1,	// radius at which to place the labels (based on full calculated radius if <=1, or hard pixel value)
					background: {
						color: null,
						opacity: 0
					},
					threshold: 0	// percentage at which to hide the label (i.e. the slice is too narrow)
				},
				combine: {
					threshold: -1,	// percentage at which to combine little slices into one larger slice
					color: null,	// color to give the new slice (auto-generated if null)
					label: 'Other'	// label to give the new slice
				},
				highlight: {
					//color: '#FFF',		// will add this functionality once parseColor is available
					opacity: 0.5
				}
			}
		}
	};
    
	$.plot.plugins.push({
		init: init,
		options: options,
		name: "pie",
		version: "1.0"
	});
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:buildStatistics', location = '/scripts/build-statistics.js' */
BAMBOO.BuildStatistics = (function ($) {
    var colours = {
            fail: '#a00',
            success: '#393'
        };

    function generatePieData(successRate, failureRate) {
        function sliceWithinBounds(slice) {
            var min = 0.125, /* small enough so that it only renders a white line at the size we have the graph */
                max = 100 - min;

            return Math.max(Math.min(slice, max), min);
        }
        function buildSuccessSeriesConfig(label, data, colour) {
            return {
                label: label,
                data: sliceWithinBounds(data),
                color: colour
            }
        }

        return [
            buildSuccessSeriesConfig('Successful', successRate, colours.success),
            buildSuccessSeriesConfig('Failed', failureRate, colours.fail)
        ];
    }
    function buildNumberSeriesConfig(data, colour) {
        return {
            data: data,
            bars: { show: true, fill: 1, lineWidth: 0 },
            color: colour,
            shadowSize: 0
        }
    }

    return {
        init: function () {
            $(function () {
                var $buildSuccessChart = $('#build-success-chart'),
                    $buildNumberChart = $('#build-number-chart'),
                    buildNumberResults = $buildNumberChart.data('json')['results'];

                $.plot($buildSuccessChart, generatePieData($buildSuccessChart.data('successful'), $buildSuccessChart.data('failed')), {
                    series: {
                        pie: {
                            show: true,
                            radius: 1,
                            label: { show: false }
                        }
                    },
                    legend: { show: false }
                });
                $.plot($buildNumberChart, [ buildNumberSeriesConfig(buildNumberResults['failed'], colours.fail), buildNumberSeriesConfig(buildNumberResults['successful'], colours.success) ], {
                    xaxis: { show: false },
                    yaxis: { show: false },
                    grid: { show: false }
                });
            });
        }
    };
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:jira-issue-list', location = '/feature/jira-issue-list/jira-issue-list.soy' */
// This file was automatically generated from jira-issue-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.jiraIssueList.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.jiraIssueList == 'undefined') { bamboo.feature.jiraIssueList = {}; }


bamboo.feature.jiraIssueList.jiraIssueList = function(opt_data, opt_ignored) {
  var output = '<table class="aui jira-issues' + ((opt_data.loading) ? ' loading' : '') + '"><thead><tr><th colspan="2" class="issue">Issue</th><th class="description">Description</th>' + ((! opt_data.hideStatus) ? '<th class="status">Status</th>' : '') + '</tr></thead>' + ((opt_data.issuesCount > opt_data.maxIssues) ? '<tfoot><tr><td colspan="' + soy.$$escapeHtml(opt_data.hideStatus ? 3 : 4) + '"><a href="' + soy.$$escapeHtml(opt_data.jiraTabUrl) + '">' + soy.$$escapeHtml(opt_data.issuesCount - opt_data.maxIssues + ' more issue' + (opt_data.issuesCount - opt_data.maxIssues > 1 ? 's' : '')) + '&hellip;</a></td></tr></tfoot>' : '') + '<tbody>';
  var issueList22 = opt_data.issues;
  var issueListLen22 = issueList22.length;
  for (var issueIndex22 = 0; issueIndex22 < issueListLen22; issueIndex22++) {
    var issueData22 = issueList22[issueIndex22];
    output += (issueData22.url && issueData22.url.href && issueData22.key && issueData22.summary) ? bamboo.feature.jiraIssueList.jiraIssueListItem({key: issueData22.key, url: issueData22.url, summary: issueData22.summary, issueType: issueData22.issueType ? issueData22.issueType : opt_data.defaultIssueType, iconUrl: issueData22.iconUrl ? issueData22.iconUrl : opt_data.defaultIssueIconUrl, status: issueData22.status, statusClass: issueData22.statusClass, hideStatus: opt_data.hideStatus}) : bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection({key: issueData22.issueKey ? issueData22.issueKey : issueData22.key, hideStatus: opt_data.hideStatus});
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueList.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueList';
}


bamboo.feature.jiraIssueList.jiraIssueListItem = function(opt_data, opt_ignored) {
  return '<tr data-issue-key="' + opt_data.key + '"><td class="type"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '" title="' + soy.$$escapeHtml("View this issue") + '"><img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issueType) + '" /></a></td><td class="key"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '">' + opt_data.key + '</a></td><td class="description">' + soy.$$escapeHtml(opt_data.summary) + '</td>' + ((! opt_data.hideStatus) ? '<td class="status"><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItem.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItem';
}


bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection = function(opt_data, opt_ignored) {
  return '<tr><td class="type">' + widget.icons.icon({type: 'jiraissue-unknown', text: 'Unknown Issue Type', showTitle: true}) + '</td><td class="key">' + soy.$$escapeHtml(opt_data.key) + '</td><td' + ((! opt_data.hideStatus) ? ' colspan="2"' : '') + ' class="details-error"><span>' + soy.$$escapeHtml("Could not obtain issue details from Jira") + '</span></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection';
}


bamboo.feature.jiraIssueList.singleIssue = function(opt_data, opt_ignored) {
  return '<span class="jira-issue"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '><a href="' + ((opt_data.url.href) ? soy.$$escapeHtml(opt_data.url.href) : soy.$$escapeHtml(opt_data.url)) + '" title="' + soy.$$escapeHtml("View this issue") + ' (' + soy.$$escapeHtml(opt_data.issueType) + ')" style="background-image: url(' + soy.$$escapeHtml(opt_data.iconUrl) + ');">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="description">' + soy.$$escapeHtml(opt_data.summary) + '</span><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssue.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssue';
}


bamboo.feature.jiraIssueList.singleIssueLoading = function(opt_data, opt_ignored) {
  return '<span class="single-issue-loading"><a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueLoading.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueLoading';
}


bamboo.feature.jiraIssueList.singleIssueOAuth = function(opt_data, opt_ignored) {
  return '' + bamboo.feature.jiraIssueList.singleIssueRetrievalError({key: opt_data.key, keyLink: opt_data.keyLink, errorDetails: '' + bamboo.feature.jiraIssueList.linkedIssueOAuth({authenticationRedirectUrl: opt_data.authenticationRedirectUrl, authenticationInstanceName: opt_data.authenticationInstanceName, reason: 'to see issue details'})});
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueOAuth';
}


bamboo.feature.jiraIssueList.singleIssueRetrievalError = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="single-issue-retrieval-error"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '>' + ((opt_data.key) ? '<a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a>' : '') + '<span class="error-message' + ((! opt_data.errorDetails) ? ' unspecified' : '') + '">' + ((opt_data.errorDetails) ? soy.$$filterNoAutoescape(opt_data.errorDetails) : soy.$$escapeHtml("Could not obtain issue details from Jira")) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueRetrievalError.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueRetrievalError';
}


bamboo.feature.jiraIssueList.linkedIssueOAuth = function(opt_data, opt_ignored) {
  return '<a class="oauth-init" href="' + soy.$$escapeHtml(opt_data.authenticationRedirectUrl) + '">Authenticate</a> ' + ((opt_data.authenticationInstanceName) ? ' with ' + soy.$$escapeHtml(opt_data.authenticationInstanceName) : '') + ' ' + soy.$$escapeHtml(opt_data.reason);
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.linkedIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.linkedIssueOAuth';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete-controls', location = '/widget/autocomplete-controls/aui/progressive-data-set.js' */
AJS.ProgressiveDataSet = Backbone.Collection.extend({
    initialize: function(models, options) {
        options || (options = {});
        if (options.matcher) this.matcher = options.matcher;
        if (options.model) this.model = options.model; // Fixed in backbone 0.9.2
        this._idAttribute = (new this.model()).idAttribute;
        this._maxResults = options.maxResults || 5;
        this._queryData = options.queryData || {};
        this._queryParamKey = options.queryParamKey || "q";
        this._queryEndpoint = options.queryEndpoint || "";
        this._allowEmptyQuery = (typeof options.allowEmptyQuery != 'undefined' ? options.allowEmptyQuery : false);
        this._matchAnyOnEmptyQuery = (typeof options.matchAnyOnEmptyQuery != 'undefined' ? options.matchAnyOnEmptyQuery : true);
        this.value = null;
        this.queryCache = {};
        this.activeQueryCount = 0;
        _.bindAll(this, 'query', 'respond');
    },

    url: function() {
        return this._queryEndpoint;
    },

    query: function(query) {
        var remote, results;

        this.value = query;
        results = this.getFilteredResults(query);
        this.respond(query, results);

        if (!this._queryEndpoint ||
            (query && (this.hasQueryCache(query) || !this.shouldGetMoreResults(results))) ||
            (!query && !(this._allowEmptyQuery && this.shouldGetMoreResults(results)))
            ) {
            return;
        }

        remote = this.fetch(query);

        this.activeQueryCount++;
        this.trigger('activity', { activity: true });
        remote.always(_.bind(function() {
            this.activeQueryCount--;
            this.trigger('activity', { activity: !!this.activeQueryCount });
        }, this));

        remote.done(_.bind(function(resp, succ, xhr) {
            this.addQueryCache(query, resp, xhr);
        }, this));
        remote.done(_.bind(function() {
            query = this.value;
            results = this.getFilteredResults(query);
            this.respond(query, results);
        }, this));
    },

    getQueryData: function(query) {
        var params = _.isFunction(this._queryData) ? this._queryData(query) : this._queryData;
        var data = _.extend({}, params);
        data[this._queryParamKey] = query;
        return data;
    },

    fetch: function(query) {
        var data = this.getQueryData(query);
        // {add: true} for Backbone <= 0.9.2
        // {update: true, remove: false} for Backbone >= 0.9.9
        var params = { add : true, update : true, remove : false, data : data };
        var remote = Backbone.Collection.prototype.fetch.call(this, params);
        return remote;
    },

    respond: function(query, results) {
        this.trigger('respond', {
            query: query,
            results: results
        });
        return results;
    },

    matcher: function(item, query) { },

    getFilteredResults: function(query) {
        var results = [];
        if (!query && !this._matchAnyOnEmptyQuery) return results;
        results = this.filter(function(item) {
            return (true == this.matcher(item, query) || !query && this._matchAnyOnEmptyQuery);
        }, this);
        if (this._maxResults) {
            results = _.first(results, this._maxResults);
        }
        return results;
    },

    addQueryCache: function(query, response, xhr) {
        var cache = this.queryCache;
        var results = this.parse(response, xhr);
        cache[query] = _.pluck(results, this._idAttribute);
    },

    hasQueryCache: function(query) {
        return this.queryCache.hasOwnProperty(query);
    },

    findQueryCache: function(query) {
        return this.queryCache[query];
    },

    shouldGetMoreResults: function(results) {
        return results.length < this._maxResults;
    },

    setMaxResults: function(number) {
        this._maxResults = number;
        this.value && this.respond(this.value, this.getFilteredResults(this.value));
    }
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete-controls', location = '/widget/autocomplete-controls/aui/query-input.js' */
AJS.QueryInput = Backbone.View.extend({
    initialize: function(options) {
        _.bindAll(this, 'changed', 'val');
        this._lastValue = this.val();
        this.$el.bind('keyup focus', this.changed);
    },
    val: function () {
        if (arguments.length) { this._lastValue = arguments[0]; } // difference to AUI
        return this.$el.val.apply(this.$el, arguments);
    },
    changed: function() {
        if (this._lastValue != this.val()) {
            this.trigger('change', this.val());
            this._lastValue = this.val();
        }
    }
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete-controls', location = '/widget/autocomplete-controls/aui/query-result.js' */
AJS.ResultSet = Backbone.Model.extend({
    initialize: function(options) {
        this.set('active', null, {silent: true});
        this.collection = new Backbone.Collection();
        this.collection.bind('reset', this.setActive, this);
        this.source = options.source;
        this.source.bind('respond', this.process, this);
    },

    url: false,

    process: function(response) {
        this.set('query', response.query);
        this.collection.reset(response.results);
        this.set('length', response.results.length);
        this.trigger('update', this);
    },

    setActive: function() {
        var id = (arguments[0] instanceof Backbone.Collection) ? false : arguments[0];
        var model = (id) ? this.collection.get(id) : this.collection.first();
        this.set('active', model || null);
        return this.get('active');
    },

    next: function() {
        var current = this.collection.indexOf(this.get('active'));
        var i = (current + 1) % this.get('length');
        var next = this.collection.at(i);
        return this.setActive(next && next.id);
    },

    prev: function() {
        var current = this.collection.indexOf(this.get('active'));
        var i = ((current === 0) ? this.get('length') : current) - 1;
        var prev = this.collection.at(i);
        return this.setActive(prev && prev.id);
    },

    each: function() {
        return this.collection.each.apply(this.collection, arguments);
    }
});

AJS.ResultsList = Backbone.View.extend({
    events: {
        "click [data-id]": "setSelection"
    },

    initialize: function (options) {
        if (!this.model) {
            this.model = new AJS.ResultSet({ source: options.source });
        }
        if (!(this.model instanceof AJS.ResultSet)) {
            throw new Error('model must be set to a ResultSet');
        }
        this.model.bind('update', this.process, this);

        this.render = _.wrap(this.render, function(func) {
            this.trigger('rendering');
            func.apply(this, arguments);
            this.trigger('rendered');
        });
    },

    process: function() {
        if (!this._shouldShow(this.model.get('query'))) return;
        this.show();
    },

    render: function() {
        var ul, listItems = [];
        this.model.each(function(model) {
            var li = Backbone.$('<li/>').attr('data-id', model.id).html(this.renderItem(model));
            listItems.push(li);
        }, this);
        ul = Backbone.$('<ul/>').html(listItems);
        this.$el.html(ul);
        return this;
    },

    renderItem: function() {
        return;
    },

    setSelection: function(event) {
        var id = Backbone.$(event.target).closest('li[data-id]').data("id");
        var selected = this.model.setActive(id);
        this.trigger('selected', selected);
    },

    show: function() {
        this.lastQuery = this.model.get('query');
        this._hiddenQuery = null;
        this.render();
        this.$el.show();
        this.trigger('shown');
    },

    hide: function() {
        this.$el.hide();
        this._hiddenQuery = this.lastQuery;
        this.trigger('hidden');
    },

    size: function() {
        return this.model.get('length');
    },

    _shouldShow: function(query) {
        return query === '' || !(this._hiddenQuery && this._hiddenQuery === query);
    }

});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/single-select.js' */
define('widget/single-select', [
    'jquery',
    'underscore',
    'backbone'
], function(
    $,
    _,
    Backbone
) {

    'use strict';

    var SingleSelectResultView = AJS.ResultsList.extend({
        events: function() {
            // Required because Backbone doesn't easily support
            // adding event to the event object when extending a View, it just replaces them
            return _.extend({}, AJS.ResultsList.prototype.events, {
                'hover [data-id]': 'setActive',
                mouseenter: 'setContainerActive',
                mouseleave: 'setContainerInactive'
            });
        },
        process: function() {
            if (!this.size() && !this.model.get('query')) {
                this.hide();
            } else {
                this.show();
            }
        },
        render: function() {
            var $ul = jQuery('<ul/>');
            if (this.size()) {
                this.model.each(function(model) {
                    var $li = jQuery('<li/>', {
                        'data-id': model.id,
                        html: this.renderItem(model)
                    });
                    $li.attr('title', $li.text());
                    $ul.append($li);
                }, this);
            } else {
                jQuery('<li/>', {
                    'class': 'autocomplete-nomatch',
                    text: "No matches"
                }).appendTo($ul);
            }
            this.$el.html($ul);
            return this;
        },
        setActive: function(event) {
            var id = jQuery(event.target).closest('li[data-id]').data('id');
            this.model.setActive(id);
        },
        isContainerActive: function() {
            return !!this._containerActive;
        },
        setContainerActive: function() {
            this._containerActive = true;
        },
        setContainerInactive: function() {
            this._containerActive = false;
        }
    });

    var SingleSelectInputDropdown = Backbone.View.extend({
        initialize: function() {
            this.render();
        },
        _loadingClass: 'loading',
        tagName: 'span',
        className: 'icon bamboo-single-select-icon drop-menu',
        events: {
            mouseenter: 'setActive',
            mouseleave: 'setInactive'
        },
        render: function() {
            this.$el.html('<span>More</span>');
            return this;
        },
        isActive: function() {
            return !!this._active;
        },
        setActive: function() {
            this._active = true;
        },
        setInactive: function() {
            this._active = false;
        },
        setLoading: function(isLoading) {
            this.$el.toggleClass(this._loadingClass, isLoading);
        }
    });

    var SingleSelectField = Backbone.View.extend({
        initialize: function(options) {
            this.$original = options.$original;
            this.dropMenu = new SingleSelectInputDropdown();
            this.$placeholder = jQuery('<input type="text" autocomplete="off" class="bamboo-single-select-field text" />');
            this.render();
        },
        _hasIconClass: 'bamboo-single-select-has-entity-icon',
        render: function() {
            this.$el.removeClass('text'); // remove AUI field class names
            this.dropMenu.$el.appendTo(this.$el);
            this.$placeholder
                .attr('placeholder', this.$original.attr('placeholder') || '')
                .val(this.$original.attr('data-field-text') || this.$original.val())
                .prependTo(this.$el);
            this.setIcon(this.$original.attr('data-icon'));
            jQuery('label').filter('[for="' + this.$original.attr('id') + '"]').click(_.bind(function() {
                this.$placeholder.focus();
            }, this));

            return this;
        },
        addDropMenuEvents: function(events) {
            this.dropMenu.delegateEvents(_.extend(SingleSelectInputDropdown.prototype.events, events));
        },
        indicateActivity: function(ds) {
            this.dropMenu.setLoading(ds.activity);
        },
        setIcon: function(iconUrl) {
            this.$icon = this.$icon || jQuery('<div />', { 'class': 'bamboo-single-select-entity-icon' });
            if (iconUrl) {
                this.$icon.css('background-image', 'url(' + iconUrl + ')').appendTo(this.$el);
                this.$el.addClass(this._hasIconClass);
            } else {
                this.$icon.detach();
                this.$el.removeClass(this._hasIconClass);
            }
        }
    });

    var SingleSelect = Backbone.View.extend({
        initialize: function(options) {
            this._chosen = options.chosen || !!this.$el.data('chosen');
            this._activeClass = options.activeClass || 'active';
            this.datasource = new AJS.ProgressiveDataSet(options.bootstrap || [], {
                queryEndpoint: options.queryEndpoint,
                queryParamKey: options.queryParamKey,
                maxResults: options.maxResults,
                allowEmptyQuery: (typeof options.allowEmptyQuery != 'undefined' ? options.allowEmptyQuery : true),
                matchAnyOnEmptyQuery: options.matchAnyOnEmptyQuery,
                queryData: options.queryData
            });
            this.datasource.matcher = options.matcher;
            this.datasource.parse = options.parser;

            this.field = new SingleSelectField({
                className: 'bamboo-single-select ' + this.$el.attr('class'),
                $original: this.$el
            });

            this.queryInput = new AJS.QueryInput({ el: this.field.$placeholder });
            this.queryInput
                .on('change', this.datasource.query)
                .on('change', this.handleInputChange, this)
                .delegateEvents(_.extend(AJS.QueryInput.prototype.events || {}, {
                    keydown: _.bind(this.handleInputKeydown, this),
                    blur: _.bind(this.handleInputBlur, this),
                    focus: _.bind(this.handleInputFocus, this),
                    click: _.bind(this.requestMatches, this)
                }));

            var singleSelect = this;

            var ResultView = SingleSelectResultView.extend({
                renderItem: function(model) {
                    return options.resultItemTemplate(model.attributes);
                },
                process: function() {
                    if (!singleSelect.disableRendering)
                    {
                        SingleSelectResultView.prototype.process.call(this);
                    }
                    singleSelect.disableRendering = false;
                }
            });

            this.field.addDropMenuEvents({
                click: _.bind(function() {
                    this.queryInput.$el.focus();
                    if (this.queryResult.$el.is(':visible')) {
                        this.queryResult.hide();
                    } else {
                        this.requestMatches();
                    }
                }, this)
            });

            this.datasource.on('activity', this.field.indicateActivity, this.field);

            this.queryResult = new ResultView({ source: this.datasource });
            this.queryResult
                .on('selected', this.setValue, this)
                .on('rendered', this.highlightActive, this)
                .on('shown', this.indicateActive, this)
                .on('hidden', this.indicateInactive, this)
                .model.on('change:active', this.highlightActive, this);

            this.render();
        },
        render: function() {
            this.field.$el.insertBefore(this.$el.hide());
            this.queryResult.hide();
            this.queryResult.$el.addClass('autocomplete').appendTo(document.body);

            return this;
        },
        highlightActive: function() {
            var active = this.queryResult.model.get('active');
            var id = active && active.id;
            this.queryResult.$('li[data-id]').filter(function(i, li) {
                var $li = jQuery(li);
                var method = (id == $li.attr('data-id')) ? 'addClass' : 'removeClass';
                $li[method]('active');
            });
        },
        reset: function() {
            this.datasource.reset();
            this.setValue(null);
            this.trigger('reset');
        },
        setValue: function(model) {
            this.$el.val(model ? model.id : '');
            this.queryInput.val(model ? this.getDisplayValue(model) : '');
            this.field.setIcon(model ? this.getIconValue(model) : null);
            this.queryResult.hide();
            if (model) {
                this.queryInput.$el.focus();
                this._chosen = true;
                this.trigger('selected', model);
            } else {
                this._chosen = false;
            }
            // QueryResult and dropmenu being active prevents blurring the field,
            // so ensure we set them inactive if an option is chosen to allow taking focus from field
            this.queryResult.setContainerInactive();
            this.field.dropMenu.setInactive();
        },
        getDisplayValue: function(model) {
            return model.id;
        },
        getIconValue: function() {
            return null;
        },
        indicateActive: function() {
            this.queryInput.$el.addClass(this._activeClass);
        },
        indicateInactive: function() {
            this.queryInput.$el.removeClass(this._activeClass);
        },
        requestMatchesQuietly: function(callback) {
            this.requestMatches();

            this.datasource.once('sync',
                    _.bind(function()
                    {
                        callback();
                        this.disableRendering = true;
                    }, this));
        },
        requestMatches: function() {
            this.datasource.query(this._chosen ? '' : this.queryInput.val());
        },
        handleInputKeydown: function(e) {
            var active;
            if (this.queryResult.$el.is(':visible')) {
                switch (e.which) {
                    case jQuery.ui.keyCode.UP:
                        e.preventDefault();
                        this.queryResult.model.prev();
                        break;
                    case jQuery.ui.keyCode.DOWN:
                        e.preventDefault();
                        this.queryResult.model.next();
                        break;
                    case jQuery.ui.keyCode.ENTER:
                    case jQuery.ui.keyCode.TAB:
                        e.preventDefault();
                        active = this.queryResult.model.get('active');
                        if (active) {
                            this.queryResult.trigger('selected', active);
                        }
                        break;
                    case jQuery.ui.keyCode.ESCAPE:
                        e.stopPropagation();
                        this.queryResult.hide();
                        break;
                }
            } else if (e.which == jQuery.ui.keyCode.DOWN) {
                this.requestMatches();
            }
        },
        handleInputBlur: function() {
            if (this.field.dropMenu.isActive() || this.queryResult.isContainerActive()) {
                this.queryInput.$el.focus();
            } else {
                if (this.queryResult.$el.is(':visible')) {
                    this.queryResult.hide();
                }
            }
        },
        handleInputFocus: function() {
            var $input = this.queryInput.$el;
            var inputOffset = $input.offset();
            var inputWidth = $input.outerWidth();
            var inputHeight = $input.outerHeight();
            this.queryResult.$el.css({
                width: inputWidth,
                top: inputOffset.top + inputHeight,
                left: inputOffset.left
            });
            // setTimeout will fire after user has clicked in field to give it focus,
            // ensures text is always selected on focus
            setTimeout(function() {
                $input.select();
            });
        },
        handleInputChange: function() {
            this.$el.val(this.queryInput.val());
            this.field.setIcon(null);
            this._chosen = false;
        }
    });

    return SingleSelect;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('BAMBOO.SingleSelect', null, require('widget/single-select'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/selected-set.js' */
define('widget/selected-list', [
    'jquery',
    'underscore',
    'backbone'
], function(
    $,
    _,
    Backbone
) {

    'use strict';

    var SelectedSet = Backbone.Model.extend({
        initialize: function(options) {
            this.collection = options.bootstrap instanceof Backbone.Collection
                ? options.bootstrap
                : new Backbone.Collection(options.bootstrap || []);
        },
        each: function() {
            return this.collection.each.apply(this.collection, arguments);
        },
        add: function(model) {
            this.collection.add(model);
        },
        remove: function(id) {
            this.collection.remove(this.collection.get(id));
        }
    });
    var SelectedList = Backbone.View.extend({
        events: {
            'click [data-id] .remove': 'removeItem'
        },
        initialize: function(options) {
            this.model = new SelectedSet({ bootstrap: options.bootstrap || [] });
            this.options = options;
            if (this.model.collection.length) {
                this.render();
            }
        },
        render: function() {
            var listItems = [];
            this.model.each(function(model) {
                var li = Backbone.$('<li/>').attr('data-id', model.id).html(this.renderItem(model));
                listItems.push(li);
            }, this);
            this.$el.toggleClass('empty', (this.model.collection.length === 0)).html(listItems);
            return this;
        },
        renderItem: function(model) {
            return this.options.itemTemplate(model.attributes);
        },
        fadeout: function() {
            jQuery('.multi-select-added').animate({
                 'background-color': 'transparent'
            }, 1500);
        },
        addItem: function(model) {
            this.model.add(model);
            this.render(model);
            this.fadeout();
        },
        removeItem: function(event) {
            var $item = jQuery(event.target).closest('[data-id]');
            this.model.remove($item.data('id'));
            $item.fadeOut(400, _.bind(function() {
                this.render();
            }, this));
        }

    });

    return SelectedList;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/user-autocomplete.js' */
define('widget/user-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/single-select'
], function(
    $,
    _,
    Backbone,
    SingleSelect
) {

    'use strict';

    var UserSingleSelect = Backbone.View.extend({
        initialize: function(options) {
            options || (options = {});
            var SingleSelectWrapper = SingleSelect.extend({
                getDisplayValue: this.getFilterValue,
                getIconValue: this.getIconValue
            });
            this.singleSelect = new SingleSelectWrapper({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 5,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.userItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/users?includeAvatars=true',
                queryParamKey: 'searchTerm',
                allowEmptyQuery: false
            });
            this.singleSelect.on('selected', this.handleSelection, this);
        },
        lCasePrefixMatch: function(str, prefix) {
            return (str.toLowerCase().indexOf(prefix.toLowerCase()) === 0);
        },
        matcher: function(user, query) {
            var matches = false;
            matches = matches || this.lCasePrefixMatch(user.get('username'), query);
            if (user.has('fullName')) {
                matches = matches || this.lCasePrefixMatch(user.get('fullName'), query);
            }
            if (user.has('displayableEmail')) {
                matches = matches || this.lCasePrefixMatch(user.get('displayableEmail'), query);
            }
            return matches;
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        handleSelection: function(user) {
            this.trigger('selected', user);
        },
        getFilterValue: function(user) {
            return user.get('fullName');
        },
        getIconValue: function(user) {
            return user.get('avatarUrl');
        }
    });

    return UserSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/plan-single-select.js' */
define('widget/plan-single-select', [
    'jquery',
    'underscore',
    'brace',
    'backbone',
    'widget/single-select',
    'util/events'
], function(
    $,
    _,
    Brace,
    Backbone,
    SingleSelect,
    events
) {
    'use strict';

    return Brace.View.extend({
        mixins: [events.EventBusMixin],
        initialize: function(options) {
            options || (options = {});

            var PlanSingleSelect = SingleSelect.extend({
                getDisplayValue: this.getFilterValue
            });

            this.singleSelect = new PlanSingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 10,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.planItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/plans',
                queryParamKey: 'searchTerm',
                queryData: options.queryData || { fuzzy: true }
            });

            if (this.singleSelect.queryInput.val()) {
                this.singleSelect.requestMatchesQuietly(_.bind(function() {
                    if (this.singleSelect.datasource.length) {
                        this.singleSelect.setValue(this.singleSelect.datasource.models[0]);
                    }
                }, this));
            }

            this.onEvent('branch:empty', this.onHideBranchOptions);
            this.singleSelect.on('selected', this.onHandleSelection, this);
            this.singleSelect.queryInput.on('change', this.onHandleSelection, this);
        },

        /**
         * Normalizes the string for searching. Should be applied both for query string and for result string returned
         * from server.
         *
         * Note: this widget uses client-side matching whenever possible, avoiding unnecessary server requests. Because
         * of that, search result filtering on client side must not be stricter than filtering on server side. The
         * optimal solution is to keep this normalization method and server normalization method in sync.
         *
         * @param str string to normalize
         * @returns {string} normalized string
         */
        normalizeString: function(str) {
            return (str || '').toLowerCase().replace(/[\u203A `~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]+/g, ' ');
        },

        containsMatch: function(str, find) {
            return this.normalizeString(str).indexOf(this.normalizeString(find)) > -1;
        },
        matcher: function(plan, query) {
            return this.containsMatch(this.getFilterValue(plan), query);
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        getFilterValue: function(model) {
            // > character is not escaped for a reason
            return model.get('projectName') + '  ' + model.get('planName');
        },
        onHandleSelection: function(model) {
            this.triggerEvent('plan:selected', model);

            if (model instanceof Backbone.Model) {
                this.$el.parents('.field-group').next().show();
            }
        },
        onHideBranchOptions: function() {
            this.$el.parents('.field-group').next().hide();
        }
    });
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/branch-autocomplete.js' */
define('widget/branch-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'brace',
    'widget/single-select',
    'util/events'
], function(
    $,
    _,
    Backbone,
    Brace,
    SingleSelect,
    events
) {

    'use strict';

    var BranchSingleSelect = Brace.View.extend({
        mixins: [events.EventBusMixin],
        initialize: function(options) {
            options || (options = {});

            var ExtendedSingleSelect = SingleSelect.extend({
                getDisplayValue: this.getFilterValue
            });

            this.singleSelect = new ExtendedSingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 10,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.branchItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/branches',
                queryParamKey: 'searchTerm',
                queryData: _.bind(this.generateAdditionalQueryData, this)
            });

            this.singleSelect.on('selected', this.handleSelection, this);
            this.singleSelect.queryInput.on('change', this.handleSelection, this);

            if (options.masterPlanKey) {
                this.masterPlanKey = options.masterPlanKey;
            }
            else if (options.masterPlanField) {
                this.masterPlanKey = options.masterPlanField.val();
            }
            else if (options.masterPlanPicker) {
                this.onEvent('plan:selected', this.onMasterPlanChange);
                this.masterPlanKey = options.masterPlanPicker.val();
            }

            if (!this.masterPlanKey) {
                this.singleSelect.$el.parent().hide();
            }
        },
        containsMatch: function(str, find) {
            return (str.toLowerCase().indexOf(find.toLowerCase()) > -1);
        },
        matcher: function(plan, query) {
            return this.containsMatch(this.getFilterValue(plan), query);
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        handleSelection: function(model) {
            this.trigger('selected', model);
        },
        getFilterValue: function(model) {
            return model.get('branchName');
        },
        generateAdditionalQueryData: function() {
            return { masterPlanKey: this.masterPlanKey, includeMasterBranch: this.options.includeMasterBranch };
        },
        // using global event-bus event handling (first argument is an instance)
        onMasterPlanChange: function(instance, masterModel) {
            this.singleSelect.reset();

            if (!(masterModel instanceof Backbone.Model)) {
                this.singleSelect.$el.parent().hide();
            }
            else {
                this.singleSelect.$el.parent().filter(':hidden').show();
                this.masterPlanKey = masterModel.get('key');

                var branchPickerContainer = this.options.branchPickerContainer;

                if (branchPickerContainer) {
                    this.singleSelect.requestMatchesQuietly(_.bind(function() {
                        var numberOfBranches = this.singleSelect.datasource.length;
                        if (this.options.includeMasterBranch) numberOfBranches--;
                        if (numberOfBranches) {
                            branchPickerContainer.show();

                            // select master branch
                            if (this.options.includeMasterBranch) {
                                this.singleSelect.setValue(this.singleSelect.datasource.models[0]);
                            }
                        } else {
                            branchPickerContainer.hide();
                        }
                    }, this));
                }
            }
        }
    });

    return BranchSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/project-autocomplete.js' */
define('widget/project-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/single-select'
], function(
    $,
    _,
    Backbone,
    SingleSelect
) {

    'use strict';

    var ProjectSingleSelect = Backbone.View.extend({
        initialize: function(options) {
            options || (options = {});
            this.singleSelect = new SingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 5,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.projectItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/projects',
                queryParamKey: 'searchTerm'
            });
            this.singleSelect.on('selected', this.handleSelection, this);
        },
        containsMatch: function(str, find) {
            return (str.toLowerCase().indexOf(find.toLowerCase()) > -1);
        },
        matcher: function(plan, query) {
            var matches = false;
            matches = matches || this.containsMatch(plan.get('projectName'), query);
            return matches;
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        handleSelection: function(model) {
            this.trigger('selected', model);
        }
    });

    return ProjectSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/autocomplete.soy' */
// This file was automatically generated from autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }


bamboo.widget.autocomplete.userItemResult = function(opt_data, opt_ignored) {
  return '<span>' + ((opt_data.avatarUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.avatarUrl) + '" alt="" class="avatar" />' : '') + ((opt_data.fullName) ? soy.$$escapeHtml(opt_data.fullName) + ((opt_data.displayableEmail) ? ' - ' + soy.$$escapeHtml(opt_data.displayableEmail) : '') + ' (' + soy.$$escapeHtml(opt_data.username) + ')' : (opt_data.displayableEmail) ? soy.$$escapeHtml(opt_data.displayableEmail) + ' (' + soy.$$escapeHtml(opt_data.username) + ')' : soy.$$escapeHtml(opt_data.username)) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.userItemResult.soyTemplateName = 'bamboo.widget.autocomplete.userItemResult';
}


bamboo.widget.autocomplete.planItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.projectName) + ((opt_data.planName) ? ' &rsaquo; ' + soy.$$escapeHtml(opt_data.planName) : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planItemResult.soyTemplateName = 'bamboo.widget.autocomplete.planItemResult';
}


bamboo.widget.autocomplete.branchItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.branchName) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.branchItemResult.soyTemplateName = 'bamboo.widget.autocomplete.branchItemResult';
}


bamboo.widget.autocomplete.projectItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.projectName) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.projectItemResult.soyTemplateName = 'bamboo.widget.autocomplete.projectItemResult';
}


bamboo.widget.autocomplete.variableItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.key) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableItemResult.soyTemplateName = 'bamboo.widget.autocomplete.variableItemResult';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variable-multiselect', location = '/widget/autocomplete-controls/bamboo/variables/variable-singleselect.js' */
define('widget/variable-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/single-select'
], function(
    $,
    _,
    Backbone,
    SingleSelect
) {

    'use strict';

    /* currently only supports pre-bootstrapped data.  No rest end point. */
    var VariableSingleSelect = Backbone.View.extend({
        initialize: function(options) {
            options || (options = {});
            this.singleSelect = new SingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap ? _.map(options.bootstrap, function(variable) {
                    return $.extend(true, variable, {id: variable.key});
                }) : [],
                maxResults: options.maxResults || 5,
                matcher: _.bind(this.matcher, this),
                resultItemTemplate: bamboo.widget.autocomplete.variableItemResult
            });
            this.singleSelect.on('selected', this.handleSelection, this);
        },
        containsMatch: function(str, find) {
            return (str.toLowerCase().indexOf(find.toLowerCase()) > -1);
        },
        matcher: function(variable, query) {
            var matches = false;
            matches = matches || this.containsMatch(variable.get('key'), query);
            return matches;
        },
        handleSelection: function(model) {
            this.$el.trigger('selected', model);
        }
    });

    return VariableSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variable-multiselect', location = '/widget/autocomplete-controls/bamboo/variables/variable-multiselect.js' */
define('widget/variable-multi-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/variable-single-select',
    'widget/selected-list'
], function(
    $,
    _,
    Backbone,
    VariableSingleSelect,
    SelectedList
) {

    'use strict';

    var VariableMultiSelect = Backbone.View.extend({
        initialize: function(options) {
            this.variableSelect = new VariableSingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: 10
            });
            this.variableSelect.on('selected', this.handleSelection, this);

            this.selectedVariables = new SelectedList({
                el: options.selectedVariablesEl,
                bootstrap: options.selectedVariables ? _.map(options.selectedVariables, function(variable) {
                    return $.extend(true, variable, {id: variable.key});
                }) : [],
                itemTemplate: bamboo.widget.autocomplete.variableSelect.item
            });
        },
        handleSelection: function(model) {
            this.selectedVariables.addItem(model);
            this.variableSelect.singleSelect.setValue('');
        }
    });

    return VariableMultiSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variable-multiselect', location = '/widget/autocomplete-controls/bamboo/variables/variable-multiselect.soy' */
// This file was automatically generated from variable-multiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.variableSelect.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }
if (typeof bamboo.widget.autocomplete.variableSelect == 'undefined') { bamboo.widget.autocomplete.variableSelect = {}; }


bamboo.widget.autocomplete.variableSelect.list = function(opt_data, opt_ignored) {
  var output = '<ul class="' + soy.$$escapeHtml(opt_data.variablesToAutoIncrement.length == 0 ? 'empty' : '') + aui.renderExtraClasses(opt_data) + '">';
  var variableList7 = opt_data.variablesToAutoIncrement;
  var variableListLen7 = variableList7.length;
  for (var variableIndex7 = 0; variableIndex7 < variableListLen7; variableIndex7++) {
    var variableData7 = variableList7[variableIndex7];
    output += '<li data-id="' + soy.$$escapeHtml(variableData7.key) + '">' + bamboo.widget.autocomplete.variableSelect.item(variableData7) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableSelect.list.soyTemplateName = 'bamboo.widget.autocomplete.variableSelect.list';
}


bamboo.widget.autocomplete.variableSelect.item = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.key) + '<a class="remove"></a><input type="hidden" name="variablesToAutoIncrement" value="' + soy.$$escapeHtml(opt_data.key) + '" />';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableSelect.item.soyTemplateName = 'bamboo.widget.autocomplete.variableSelect.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:status-widgets', location = '/widget/status/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.status.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.status == 'undefined') { widget.status = {}; }


widget.status.deploymentResultStatusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var colour__soy3 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        colour__soy3 += 'default';
        break;
      case 'SUCCESS':
        colour__soy3 += 'success';
        break;
      case 'FAILED':
        colour__soy3 += 'error';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        colour__soy3 += 'current';
        break;
      case 'QUEUED':
        colour__soy3 += 'current';
        break;
      case 'IN_PROGRESS':
        colour__soy3 += 'current';
        break;
      case 'NOT_BUILT':
        colour__soy3 += 'default';
        break;
    }
  }
  var text__soy23 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        text__soy23 += 'Unknown';
        break;
      case 'SUCCESS':
        text__soy23 += 'Success';
        break;
      case 'FAILED':
        text__soy23 += 'Failed';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        text__soy23 += 'Queued';
        break;
      case 'QUEUED':
        text__soy23 += 'Queued';
        break;
      case 'IN_PROGRESS':
        text__soy23 += 'In Progress';
        break;
      case 'NOT_BUILT':
        text__soy23 += 'Not Built';
        break;
    }
  }
  output += widget.lozenges.auilozenge({colour: colour__soy3, text: text__soy23, subtle: opt_data.subtle});
  return output;
};
if (goog.DEBUG) {
  widget.status.deploymentResultStatusLozenge.soyTemplateName = 'widget.status.deploymentResultStatusLozenge';
}


widget.status.buildResultStatusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var class__soy48 = '' + widget.status.buildResultStatusClass(opt_data);
  output += widget.icons.statusIcon({status: class__soy48});
  return output;
};
if (goog.DEBUG) {
  widget.status.buildResultStatusIcon.soyTemplateName = 'widget.status.buildResultStatusIcon';
}


widget.status.buildResultStatusClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.resultSummary.continuable && opt_data.resultSummary.successful) ? 'SuccessfulPartial' : (opt_data.resultSummary.notRunYet) ? 'NotRunYet' : (opt_data.resultSummary.finished) ? soy.$$escapeHtml(opt_data.resultSummary.buildState) : soy.$$escapeHtml(opt_data.resultSummary.lifeCycleState));
};
if (goog.DEBUG) {
  widget.status.buildResultStatusClass.soyTemplateName = 'widget.status.buildResultStatusClass';
}


widget.status.statusRibbon = function(opt_data, opt_ignored) {
  var output = '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon' + aui.renderExtraClasses(opt_data) + '" data-statuses="' + soy.$$escapeHtml(opt_data.statuses.length) + '"' + aui.renderExtraAttributes(opt_data) + '><div class="status-ribbon-inner">';
  var statusList77 = opt_data.statuses;
  var statusListLen77 = statusList77.length;
  for (var statusIndex77 = 0; statusIndex77 < statusListLen77; statusIndex77++) {
    var statusData77 = statusList77[statusIndex77];
    output += widget.status.statusRibbonItem(statusData77);
  }
  output += '</div>' + ((opt_data.progressbarContent) ? '<div class="status-ribbon-progress-bar">' + soy.$$filterNoAutoescape(opt_data.progressbarContent) + '</div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  widget.status.statusRibbon.soyTemplateName = 'widget.status.statusRibbon';
}


widget.status.statusRibbonItem = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon-status ' + soy.$$escapeHtml(opt_data.state) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + ' class="status-ribbon-status-heading">' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.state, reversed: true}) + ' ' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + '></div>';
};
if (goog.DEBUG) {
  widget.status.statusRibbonItem.soyTemplateName = 'widget.status.statusRibbonItem';
}


widget.status.deploymentVersionStatus = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.deploymentVersionState && opt_data.deploymentVersionState != 'UNKNOWN') ? widget.lozenges.auilozenge({colour: '' + ((opt_data.deploymentVersionState == 'BROKEN' || opt_data.deploymentVersionState == 'INCOMPLETE') ? 'error' : 'success'), text: opt_data.deploymentVersionState, subtle: opt_data.subtle, extraClasses: 'version-lozenge'}) : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatus.soyTemplateName = 'widget.status.deploymentVersionStatus';
}


widget.status.deploymentVersionStatusInfo = function(opt_data, opt_ignored) {
  return '' + ((opt_data.deploymentVersionState == 'APPROVED' || opt_data.deploymentVersionState == 'BROKEN') ? '<div class="detailed-version-info-container reviewed-user-avatar">' + aui.avatar.avatar({size: 'small', avatarImageUrl: opt_data.avatar ? opt_data.avatar : "" + '/images/icons/useravatar-grey.png', accessibilityText: opt_data.userName ? opt_data.userName : "Anonymous user", title: opt_data.displayName ? opt_data.displayName : "Anonymous user", badgeContent: '' + ((opt_data.deploymentVersionState == 'BROKEN') ? '<span class="badge reviewed broken"></span>' : (opt_data.deploymentVersionState == 'APPROVED') ? '<span class="badge reviewed approved"></span>' : '')}) + '<script>AJS.$(".aui-avatar-inner > img").tooltip({gravity: \'n\'});<\/script></div>' : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatusInfo.soyTemplateName = 'widget.status.deploymentVersionStatusInfo';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:tooltip-widget', location = '/widget/tooltip/tooltip.soy' */
// This file was automatically generated from tooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.tooltip.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.tooltip == 'undefined') { bamboo.widget.tooltip = {}; }


bamboo.widget.tooltip.tooltip = function(opt_data, opt_ignored) {
  return '<script type="text/javascript">require([\'aui\', \'jquery\', \'underscore\'], function(AJS, $, _){var $element = $(\'' + soy.$$escapeHtml(opt_data.trigger) + '\'); AJS.InlineDialog( $element, undefined' + ((opt_data.url) ? ',\'' + soy.$$escapeHtml("") + soy.$$escapeJsString(opt_data.url) + '\'' : ',function(content, trigger, showPopup){content .css({padding: \'20px\'}) .html(_.unescape(\'' + soy.$$escapeHtml(opt_data.content) + '\')); showPopup(); return false;}') + ',{' + ((opt_data.width) ? ' width: ' + soy.$$escapeHtml(opt_data.width) + ' ' : '') + ((opt_data.showDelay) ? ' ' + ((opt_data.width) ? ',' : '') + ' showDelay: ' + soy.$$escapeHtml(opt_data.showDelay) : '') + ((opt_data.width || opt_data.showDelay) ? ',' : '') + ' onHover: true});' + ((opt_data.addMarker) ? '$element.addClass(\'tooltip-marker\');' : '') + '});<\/script>';
};
if (goog.DEBUG) {
  bamboo.widget.tooltip.tooltip.soyTemplateName = 'bamboo.widget.tooltip.tooltip';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/feature/variables/variables.js' */
define('feature/variables', [
    'jquery',
    'underscore',
    'widget/dialog',
    'widget/variable-single-select',
    'feature/config-read-only',
    'exports'
], function(
    $,
    _,
    Dialog,
    VariableSingleSelect,
    /** @type {module:feature/config-read-only} */ readOnlyMode,
    exports
) {

    'use strict';

    /**
     * Array of keywords to determine whether a variable should be masked. Lazily initialised by #isPasswordVariable
     * function.
     */
    var passwordKeywords;

    /**
     * A function that determines whether a variable should be masked.
     * @param variableName name of the variable
     * @returns {boolean}
     */
    var isPasswordVariable = function(variableName) {
        if (!passwordKeywords) {
            var resourceKey = 'bamboo.web.resources:variables.password-variable-keywords';
            passwordKeywords = _.map(WRM.data.claim(resourceKey), function(keyword) {
                return keyword.toLowerCase();
            });
        }
        var lcVariableName = (variableName || '').toLowerCase();
        return passwordKeywords.some(function(keyword) {
            return lcVariableName.indexOf(keyword) >= 0;
        });
    };

    /**
     * Inline Editing
     * @param options
     *  - target        String - selector targeting the span/element to make inline-editable
     *  - submit        Function - handles what to do when value is submitted
     *  - cancel        Function - handles what to do when cancel is triggered
     *  - focus         Function - handles what to do when focus is given to the edit field
     *  - $delegator    jQuery Object - where the event handler should be bound
     */
    var inlineEdit = function(options) {
        var defaults = {
                target: null,
                submit: null,
                cancel: null,
                focus: null
            },
            handleEdit = function(event) {
                var $target = $(this);
                var $row = $target.parents('tr:first');

                if (!keyIsPassword($row)) {
                    prepareRow($row, $target);
                }
                // field contains password
                else {
                    prepareRow($row, $target, true,
                        _.bind(function() {
                            var keyElement = $row.find('td:eq(0) .inline-edit-field');
                            var $input = $target.siblings('div.input-password');

                            keyElement.trigger('selected', !!$input.length);
                        }, this)
                    );
                }

                event.preventDefault();
            },
            handleKeyDown = function(event) {
                var keyCode = event.which;
                var $element = $(event.currentTarget);

                // on ESCAPE revert current changes
                if (keyCode === $.ui.keyCode.ESCAPE) {
                    revertRow($element.blur().parents('tr:first'));
                    event.preventDefault();
                }
                // on ENTER apply current changes
                else if (keyCode === $.ui.keyCode.ENTER) {
                    updateRow($element.blur().parents('tr:first'));
                    event.preventDefault();
                }
            },
            prepareRow = function($row, $target, clearValue, callback) {
                // update currently active row
                options.$delegator.find('tr.active').each(function() {
                    revertRow($(this));
                });

                // find elements
                var $elements = $row.find('.inline-edit-view');
                var elementsCount = $elements.length;

                $elements.each(function(index) {
                    var $target = $(this);
                    var $input = $target.parent('td:first').find('.inline-edit-field:text');

                    // set current value
                    $input.val($target.text());

                    // clear value for last element if flag was set
                    if (clearValue && (elementsCount - 1) === index) {
                        $input.val('');
                    }

                    if (!$input.data('hasInlineEditHandlers')) {
                        $input.keydown(handleKeyDown)
                            .data('hasInlineEditHandlers', true)
                            .data('lastValidValue', $input.val());
                    }

                    $target.hide();
                    $input.parent().removeClass('hidden');
                });

                if ($.isFunction(options.focus)) {
                    options.focus($target);
                }

                // focus on first input field (which was clicked)
                $target.parent().find('.inline-edit-field').addClass('focus').focus();

                if ($.isFunction(callback)) {
                    callback();
                }
            },
            revertRow = function($row) {
                // activate first row
                options.$delegator.find('tr.inactive').removeClass('inactive');

                // cancel callback
                if ($.isFunction(options.cancel)) {
                    options.cancel($row.find('td:eq(0) input:visible'));
                }

                // reset styles and behaviour
                $row.removeClass('active')
                    .find('.inline-edit-view, .inline-edit-field')
                    .attr('style', '');

                $row.find('td:eq(1) .input-password').addClass('hidden');
            },
            updateRow = function($row) {
                if (!$.isFunction(options.submit)) {
                    updateRowSuccess();
                }
                // submit callback
                else {
                    options.submit($row.find('td:eq(1)').find('input:visible'), _.bind(function() {
                        updateRowSuccess($row);
                    }, this));
                }
            },
            updateRowSuccess = function($row) {
                var keyCell = $row.find('td:eq(0)');

                // is key value empty?
                if ($.trim(keyCell.find('input').val()).length > 0) {
                    // activate first row
                    options.$delegator.find('tr.inactive').removeClass('inactive');

                    // cancel callback
                    if ($.isFunction(options.cancel)) {
                        options.cancel(keyCell.find('input:visible'));
                    }

                    // reset styles and behaviour
                    $row.removeClass('active')
                        .find('.inline-edit-view, .inline-edit-field')
                        .attr('style', '');

                    keyCell.find('.inline-edit-view:first').text(
                        keyCell.find('.inline-edit-field:text').val()
                    );

                    // default password value
                    var value = '********';
                    var valueCell = $row.find('td:eq(1)');

                    valueCell.find('.input-password')
                        .addClass('hidden');

                    if (!keyIsPassword($row)) {
                        value = valueCell.find('.inline-edit-field:text').val();
                    }

                    $row.find('td:eq(1) .inline-edit-view:first').text(value);
                }
            },
            keyIsPassword = function($row) {
                var value = $.trim($row.find('.inline-edit-view:first').text());
                return isPasswordVariable(value);
            };

        options = $.extend(true, defaults, options);

        // append update handler
        options.$delegator.find('.operations button[name="update"]').on('click', function() {
            updateRow($(this).parents('tr:first'));
        });

        // append revert handler
        options.$delegator.find('.operations a.cancel-variable').on('click', function() {
            revertRow($(this).parents('tr:first'));
        });

        // revert current active TR if user click on .add-variable fields
        options.$delegator.find('tr.add-variable').on('click', 'input', _.bind(function() {
            var $active = options.$delegator.find('tr.active');

            if ($active.length) {
                revertRow($active);
                $(this).removeClass('inactive');
            }
        }, this));

        if (options.target) {
            options.$delegator.delegate(options.target, 'click', handleEdit);
        }
    };

    function VariablesTable(options) {
        if (!(this instanceof VariablesTable)) {
            return new VariablesTable(options);
        }

        var defaults = {
            selectors: {
                table: null,
                addRow: '.add-variable',
                deleteRow: '.delete-variable',
                overrideButton: 'a.variables-override'
            },
            templates: {
                row: null
            },
            availableVariables: null
        }, that = this;
        this.options = $.extend(true, defaults, options);

        this.$table = $(this.options.selectors.table)
            .on('click', this.options.selectors.deleteRow, function(e) {
                _.bind(that.handleDeleteClick, that)(this, e);
            })
            .on('click', this.options.selectors.overrideButton, _.bind(this.handleOverrideClick, this))
            .on('change', 'select', this.handleChangeVariableSelection);

        this.$addVariable = this.$table.find(this.options.selectors.addRow)
            .on('keydown', 'input:text, select', _.bind(this.handleAdd, this))
            .on('click', 'input:submit', _.bind(this.handleAdd, this));
    }

    VariablesTable.prototype = {
        handleAdd: function(e) {
            if (e.type == 'click' || e.which == jQuery.ui.keyCode.ENTER) {
                e.preventDefault();
                var $inputs = this.$addVariable.find(':input'),
                    key = $inputs.filter('[name="variableKey"]').val(),
                    value = $inputs.filter('[name="variableValue"]').val();

                $(AJS.template.load(this.options.templates.row).fill({
                    id: 'variable_' + key,
                    key: key,
                    value: value
                }).toString()).appendTo(this.$table.find('tbody'));
            }
        },
        handleChangeVariableSelection: function() {
            var $this = $(this),
                $option = $this.find('option:selected'),
                $text = $this.closest('tr').find('input:text, input:password'),
                id = $option.val(),
                hasPassword = isPasswordVariable(id);
            $this.prop('name', 'key_' + id);
            $text.prop('type', hasPassword ? 'password' : 'text');
            $text.prop('name', 'variable_' + id).val($option.get(0).getAttribute('data-current-value') || '');
        },
        handleDeleteClick: function(el, event) {
            var $this = $(el);
            var href = $this.attr('href');
            var self = this;

            event.preventDefault();

            // if in override mode (customised build) then just delete nearest TR
            if (!!this.overrideMode) {
                $this.closest('tr').remove();
            }
            // show confirmation dialog when deleting a record
            else {
                new Dialog({
                    header: "Delete a variable",
                    content: bamboo.feature.variables.deleteConfirmaton(),
                    height: 260,
                    width: 600,
                    buttons: [
                        {
                            id: 'confirm',
                            label: "Confirm",
                            cssClass: 'aui-button aui-button-primary',
                            params: {
                                self: self,
                                $this: $this,
                                href: href
                            },
                            callback: function(id, params) {
                                if (params.href) {
                                    $.post(params.href, { 'bamboo.successReturnMode': 'json', decorator: 'nothing', confirm: true }).done(_.bind(function(result) {
                                        if (params.self.resultStatusMatches(result, 'OK')) {
                                            if (!$('table[id=global-variable-config]').length) {
                                                var variable = {};
                                                variable.key = params.$this.data('variableKey');

                                                if (params.self.options.overriddenVariablesMap[variable.key]) {
                                                    var oldPicker = params.$this.closest('tbody').find('.bamboo-single-select');

                                                    if (oldPicker) {
                                                        oldPicker.remove();
                                                    }

                                                    params.self.options.globalNotOverriddenVariables.push(variable);

                                                    var variableSelect = new VariableSingleSelect({
                                                        el: '#variableKey',
                                                        bootstrap: params.self.options.globalNotOverriddenVariables
                                                    });

                                                    variableSelect.singleSelect.field.$placeholder.attr(
                                                        'placeholder', "Choose from global variables or type in your own"
                                                    );
                                                }
                                            }
                                            params.$this.closest('tr').remove();
                                        }
                                    }, params.self));
                                } else {
                                    params.$this.closest('tr').remove();
                                }

                                this.dialog.remove();
                            }
                        },
                        {
                            id: 'cancel',
                            label: "Cancel",
                            type: 'link'
                        }
                    ]
                });
            }
        },
        handleOverrideClick: function(e) {
            var $row = $(bamboo.feature.variables.variablesTableRow({
                id: '',
                key: '',
                value: '',
                availableVariables: this.options.availableVariables
            })).appendTo(this.$table.find('tbody'));

            this.handleChangeVariableSelection.call($row[0]);
            this.overrideMode = true;

            e.preventDefault();
        },
        resultStatusMatches: function(result, match) {
            return (result.status.toUpperCase() == match);
        }
    };

    function VariablesConfigurationForm(options) {
        if (!(this instanceof VariablesConfigurationForm)) {
            return new VariablesConfigurationForm(options);
        }

        var defaults = {
            selectors: {
                form: null,
                table: '.variables-list',
                addRow: '.add-variable',
                deleteRow: '.delete-variable'
            },
            templates: {
                row: null
            },
            classes: {
                active: 'active',
                inactive: 'inactive'
            },
            updateVariableUrl: null,
            overriddenVariablesMap: {},
            globalNotOverriddenVariables: [],
            readOnly: false
        }, that = this;

        this.options = $.extend(true, defaults, options);
        this.cache = {};

        this.$form = $(this.options.selectors.form)
            .on('submit', _.bind(this.handleSubmit, this));
        this.$table = this.$form.find(this.options.selectors.table)
            .on('click', this.options.selectors.deleteRow, function(event) {
                _.bind(that.handleDeleteClick, that)(this, event);
            });

        this.$addVariable = this.$table.find(this.options.selectors.addRow)
            .on('change', 'select', this.handleChangeVariableSelection);

        // global table handler for input <> password fields
        this.$table.on('selected keyup', 'tr td:first-child input', function(event, focusValue) {
            _.bind(that.handleChangeVariableName, this)(that, focusValue);
        });
        
        if (!this.options.readOnly) {
            inlineEdit({
                target: '.inline-edit-view',
                $delegator: this.$form,
                submit: _.bind(this.handleInlineSubmit, this),
                focus: _.bind(this.handleInlineFocus, this),
                cancel: _.bind(this.handleInlineCancel, this)
            });
        }
        else {
            readOnlyMode.makeReadOnly(this.$table);
        }
    }

    VariablesConfigurationForm.prototype = new VariablesTable();

    $.extend(true, VariablesConfigurationForm.prototype, {
        clearFormErrors: function() {
            this.$form.find('.error,.aui-message').remove();
        },
        clearFieldErrors: function($field) {
            $field.nextAll('.error').remove();
        },
        resultFieldErrors: function(fieldErrors, func) {
            for (var fieldName in fieldErrors) {
                if (fieldErrors.hasOwnProperty(fieldName)) {
                    func(fieldName, fieldErrors[fieldName]);
                }
            }
        },
        handleChangeVariableSelection: function() {
            var $this = $(this),
                $option = $this.find('option:selected'),
                $text = $this.closest('tr').find('input:text');

            $text.val($option.get(0).getAttribute('data-current-value') || '');
        },
        handleChangeVariableName: function(self, focusValue) {
            var $this = $(this);
            var $tr = $this.parents('tr:first');
            var id = $tr.attr('id');

            var value = $.trim($this.val());
            var hasPassword = isPasswordVariable(value);

            // initialize cache object
            if (!self.cache[id]) {
                self.cache[id] = {};
            }

            // runs only once per row & then is cached
            if (_.isEmpty(self.cache[id])) {
                self.cache[id].varHasPassword = null;

                // always synchronize input & password field
                self.cache[id].$varInput = $tr.find('.variable-value input')
                    .on('keyup', _.bind(function() {
                        self.cache[id].$varPassword.val(
                            self.cache[id].$varInput.val()
                        );
                    }, $this));

                self.cache[id].$varPassword = $tr.find('.variable-value-password input')
                    .on('keyup', _.bind(function() {
                        self.cache[id].$varInput.val(
                            self.cache[id].$varPassword.val()
                        );
                    }, $this));

                // register toggle for show/hide password field
                self.cache[id].$varToggle = $tr.find('.input-password > button').on('click', _.bind(function(event) {
                    self.cache[id].$varInput.parent().toggleClass('hidden')
                        .find('button').toggleClass('hidden');

                    self.cache[id].$varPassword
                        .parent().toggleClass('hidden');

                    event.preventDefault();
                }, self));
            }

            // input contains variable to mask
            if (hasPassword) {
                self.cache[id].$varInput.parent().addClass('hidden');
                self.cache[id].$varPassword.val(self.cache[id].$varInput.val()).parent().removeClass('hidden');
                self.cache[id].varHasPassword = true;

                if (focusValue) {
                    self.cache[id].$varPassword.focus();
                }
            }
            else if (self.cache[id].varHasPassword !== false) {
                self.cache[id].$varInput.parent().removeClass('hidden').find('button').addClass('hidden');
                self.cache[id].$varPassword.parent().addClass('hidden');
                self.cache[id].varHasPassword = false;

                if (focusValue) {
                    self.cache[id].$varInput.focus();
                }
            }

            // focus variable key
            if (!_.isUndefined(focusValue) && !focusValue) {
                $this.focus();
            }
        },
        handleSubmit: function(e) {
            e.preventDefault();
            this.clearFormErrors();
            var formUrl = this.$form.attr('action'),
                data = this.$addVariable.find(':input').serialize() + '&'
                    + BAMBOO.XsrfUtils.getAtlTokenQueryParam(formUrl)
                    + '&bamboo.successReturnMode=json&decorator=nothing&confirm=true';
            $.post(formUrl, data, _.bind(function(result) {
                if (this.resultStatusMatches(result, 'OK')) {
                    window.location.reload();
                } else if (this.resultStatusMatches(result, 'ERROR')) {
                    var fieldErrors = result.fieldErrors,
                        errors = result.errors,
                        $firstError;

                    if (fieldErrors) {
                        this.resultFieldErrors(fieldErrors, _.bind(function(fieldName, fieldError) {
                            this.$addVariable.find(':input[name="' + fieldName + '"]').after(BAMBOO.buildFieldError(fieldError));
                        }, this));
                    }
                    if (errors) {
                        this.$form.prepend(BAMBOO.buildAUIErrorMessage(errors));
                    }
                    $firstError = this.$addVariable.find(':input:visible:enabled.errorField:first').focus();
                    if (!$firstError.length) {
                        this.$addVariable.find(':input:visible:enabled:first').focus();
                    }
                }
            }, this));
        },
        handleInlineSubmit: function($target, callback) {
            var $loading = $('<span/>', { 'class': 'icon icon-loading' }),
                name = $target.attr('name'),
                id, $key, $value;

            if (name.indexOf('key_') === 0) {
                id = BAMBOO.stripPrefixFromId('key_', name);
                $key = $target;
                $value = this.$form.find(':input[name="value_' + id + '"]');
            }
            else if (name.indexOf('value_') === 0) {
                id = BAMBOO.stripPrefixFromId('value_', name);
                $key = this.$form.find(':input[name="key_' + id + '"]');
                $value = $target;
            }

            if (id && $key && $value) {
                $loading.insertAfter($target[0]);
                this.clearFieldErrors($target);

                $.post(this.options.updateVariableUrl, BAMBOO.XsrfUtils.addXsrfTokenProperty(this.options.updateVariableUrl, {
                        variableId: id,
                        variableKey: $key.val(),
                        variableValue: $value.val(),
                        'bamboo.successReturnMode': 'json',
                        decorator: 'nothing',
                        confirm: true
                    })).done(_.bind(function(result) {
                        var fieldErrors = result.fieldErrors,
                            errors = result.errors,
                            $tr = $target.closest('tr');

                        $loading.remove();

                        if (!$tr.find('.focus').length) {
                            $tr.removeClass('active');
                        }
                        if (this.resultStatusMatches(result, 'OK')) {
                            $target.data('lastValidValue', $target.val());
                            var $div = $('#override_field_' + id);

                            $div.html($(bamboo.feature.variables.overrideText({
                                variable: this.options.overriddenVariablesMap[$key.val()]
                            })));

                            if (!this.$form.find('.focus').length) {
                                this.$addVariable
                                    .removeClass(this.options.classes.inactive)
                                    .find('input')
                                    .removeAttr('disabled');
                            }

                            if (callback) {
                                callback();
                            }
                        }
                        else if (this.resultStatusMatches(result, 'ERROR')) {
                            if (fieldErrors) {
                                this.resultFieldErrors(fieldErrors, _.bind(function(fieldName, fieldError) {
                                    var $field = (fieldName === 'variableValue' ? $value : $key);
                                    this.clearFieldErrors($field);
                                    $field.after(BAMBOO.buildFieldError(fieldError));
                                }, this));
                            }
                            if (errors) {
                                $key.after(BAMBOO.buildAUIErrorMessage(errors));
                            }
                        }

                        // update variable meta-data
                        $tr.find('td.variable-value-container')
                            .attr('data-variable-key', $key.val());

                    }, this)).fail(function() {
                        $loading.remove();
                        var error = ["Server error - variable not saved"];
                        $key.after(BAMBOO.buildFieldError(error));
                    });
            }
        },
        handleInlineFocus: function($target) {
            $target.closest('tr').addClass(this.options.classes.active);
            this.$addVariable.addClass(this.options.classes.inactive);
        },
        handleInlineCancel: function($target) {
            this.clearFieldErrors($target.closest('tr').removeClass(this.options.classes.active).end());
            this.$addVariable.removeClass(this.options.classes.inactive);
        }
    });

    exports.VariablesTable = VariablesTable;
    exports.VariablesConfigurationForm = VariablesConfigurationForm;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/feature/variables/variables.soy' */
// This file was automatically generated from variables.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.variables.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.variables == 'undefined') { bamboo.feature.variables = {}; }


bamboo.feature.variables.variablesTable = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param28 = '' + ((! opt_data.hideAddHeader) ? '<tr class="add-variable"><td>' + bamboo.feature.variables.selectOrInput({id: 'variableKey', options: opt_data.availableVariables}) + '</td><td>' + bamboo.feature.variables.selectOrInput({id: 'variableValue', value: opt_data.firstAvailableVariable}) + '</td><td class="operations">' + aui.form.submit({text: "Add", id: ''}) + '</td></tr>' : '');
  if (opt_data.variables) {
    var variableList46 = opt_data.variables;
    var variableListLen46 = variableList46.length;
    for (var variableIndex46 = 0; variableIndex46 < variableListLen46; variableIndex46++) {
      var variableData46 = variableList46[variableIndex46];
      param28 += bamboo.feature.variables.variablesTableRow(soy.$$augmentMap(variableData46, {inlineEdit: opt_data.inlineEdit, availableVariables: opt_data.availableVariables, deleteVariableUrl: opt_data.deleteVariableUrl}));
    }
  }
  var output = '' + aui.table({extraClasses: 'variables-list', columnsContent: '<colgroup><col width="30%" /><col width="*" /><col width="60" /></colgroup>', theadContent: '<tr><th>' + soy.$$escapeHtml("Variable name") + '</th><th>' + soy.$$escapeHtml("Value") + '</th><th class="operations"><span class="assistive">' + soy.$$escapeHtml("Operations") + '</span></th></tr>', tfootContent: '' + ((opt_data.showOverrideFooter) ? '<tr>' + ((opt_data.userCanOverrideVariables) ? '<td colspan="3"><a class="aui-button aui-button-link aui-style variables-override">' + soy.$$escapeHtml("Override a variable") + '</a></td>' : '<td colspan="3"><span class="variables-override">' + soy.$$escapeHtml("Build variables override is forbidden") + '</span></td>') + '</tr>' : ''), content: param28});
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTable.soyTemplateName = 'bamboo.feature.variables.variablesTable';
}


bamboo.feature.variables.variablesTableRow = function(opt_data, opt_ignored) {
  return '<tr data-variable-id="' + soy.$$escapeHtml(opt_data.id) + '"><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables}) : bamboo.feature.variables.selectOrInput({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables})) + '</td><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'value_' + opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput({id: 'value_' + opt_data.id, value: opt_data.key})) + '</td><td class="operations"><a id="deleteVariable_' + soy.$$escapeHtml(opt_data.id) + '" class="delete-variable"' + ((opt_data.deleteVariableUrl) ? ' href="' + soy.$$escapeHtml(opt_data.deleteVariableUrl) + '"' : '') + ' title="' + soy.$$escapeHtml("Delete") + '" tabindex="-1">' + aui.icons.icon({icon: 'remove', useIconFont: true, accessibilityText: "Delete", extraAttributes: {title: "Delete"}}) + '</a></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTableRow.soyTemplateName = 'bamboo.feature.variables.variablesTableRow';
}


bamboo.feature.variables.inPlaceEditField = function(opt_data, opt_ignored) {
  return '<span class="inline-edit-view"' + ((! opt_data.readonly) ? ' tabindex="0"' : '') + ' id="key_' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.value) + '</span>' + ((opt_data.readonly) ? aui.form.input({type: 'hidden', name: opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput(soy.$$augmentMap(opt_data, {extraClasses: 'inline-edit-field'})));
};
if (goog.DEBUG) {
  bamboo.feature.variables.inPlaceEditField.soyTemplateName = 'bamboo.feature.variables.inPlaceEditField';
}


bamboo.feature.variables.selectOrInput = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options) ? bamboo.feature.variables.select({name: opt_data.id, options: opt_data.options, extraClasses: opt_data.extraClasses}) : aui.form.input({type: 'text', name: opt_data.id, value: opt_data.value, extraClasses: opt_data.extraClasses, extraAttributes: {autocomplete: 'off'}}));
};
if (goog.DEBUG) {
  bamboo.feature.variables.selectOrInput.soyTemplateName = 'bamboo.feature.variables.selectOrInput';
}


bamboo.feature.variables.passwordConfirmaton = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: "variables.password.dialog.title", content: '<p>' + soy.$$escapeHtml("variables.password.dialog.description") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.variables.passwordConfirmaton.soyTemplateName = 'bamboo.feature.variables.passwordConfirmaton';
}


bamboo.feature.variables.deleteConfirmaton = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("You are about to delete the selected variable. Are you sure you want to continue?");
};
if (goog.DEBUG) {
  bamboo.feature.variables.deleteConfirmaton.soyTemplateName = 'bamboo.feature.variables.deleteConfirmaton';
}


bamboo.feature.variables.select = function(opt_data, opt_ignored) {
  var output = '<select' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'multi-select' : 'select') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isMultiple) ? ' multiple' : '') + aui.renderExtraAttributes(opt_data) + '>';
  var optionList167 = opt_data.options;
  var optionListLen167 = optionList167.length;
  for (var optionIndex167 = 0; optionIndex167 < optionListLen167; optionIndex167++) {
    var optionData167 = optionList167[optionIndex167];
    output += bamboo.feature.variables.optionOrOptgroup(optionData167);
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.select.soyTemplateName = 'bamboo.feature.variables.select';
}


bamboo.feature.variables.optionOrOptgroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.options) {
    output += '<optgroup label="' + soy.$$escapeHtml(opt_data.text) + '"' + aui.renderExtraAttributes(opt_data) + '>';
    var optionList179 = opt_data.options;
    var optionListLen179 = optionList179.length;
    for (var optionIndex179 = 0; optionIndex179 < optionListLen179; optionIndex179++) {
      var optionData179 = optionList179[optionIndex179];
      output += bamboo.feature.variables.optionOrOptgroup(optionData179);
    }
    output += '</optgroup>';
  } else {
    output += '<option value="' + soy.$$escapeHtml(opt_data.value) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.selected) ? ' selected' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.optionOrOptgroup.soyTemplateName = 'bamboo.feature.variables.optionOrOptgroup';
}


bamboo.feature.variables.overrideText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.variable) ? '<div class="variable-override-text">' + ((opt_data.variable.variableType == 'PLAN') ? soy.$$escapeHtml("Overrides plan value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value) : soy.$$escapeHtml("Overrides global value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value)) + '</div>' : '');
};
if (goog.DEBUG) {
  bamboo.feature.variables.overrideText.soyTemplateName = 'bamboo.feature.variables.overrideText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/widget/autocomplete-controls/bamboo/single-select.js' */
define('widget/single-select', [
    'jquery',
    'underscore',
    'backbone'
], function(
    $,
    _,
    Backbone
) {

    'use strict';

    var SingleSelectResultView = AJS.ResultsList.extend({
        events: function() {
            // Required because Backbone doesn't easily support
            // adding event to the event object when extending a View, it just replaces them
            return _.extend({}, AJS.ResultsList.prototype.events, {
                'hover [data-id]': 'setActive',
                mouseenter: 'setContainerActive',
                mouseleave: 'setContainerInactive'
            });
        },
        process: function() {
            if (!this.size() && !this.model.get('query')) {
                this.hide();
            } else {
                this.show();
            }
        },
        render: function() {
            var $ul = jQuery('<ul/>');
            if (this.size()) {
                this.model.each(function(model) {
                    var $li = jQuery('<li/>', {
                        'data-id': model.id,
                        html: this.renderItem(model)
                    });
                    $li.attr('title', $li.text());
                    $ul.append($li);
                }, this);
            } else {
                jQuery('<li/>', {
                    'class': 'autocomplete-nomatch',
                    text: "No matches"
                }).appendTo($ul);
            }
            this.$el.html($ul);
            return this;
        },
        setActive: function(event) {
            var id = jQuery(event.target).closest('li[data-id]').data('id');
            this.model.setActive(id);
        },
        isContainerActive: function() {
            return !!this._containerActive;
        },
        setContainerActive: function() {
            this._containerActive = true;
        },
        setContainerInactive: function() {
            this._containerActive = false;
        }
    });

    var SingleSelectInputDropdown = Backbone.View.extend({
        initialize: function() {
            this.render();
        },
        _loadingClass: 'loading',
        tagName: 'span',
        className: 'icon bamboo-single-select-icon drop-menu',
        events: {
            mouseenter: 'setActive',
            mouseleave: 'setInactive'
        },
        render: function() {
            this.$el.html('<span>More</span>');
            return this;
        },
        isActive: function() {
            return !!this._active;
        },
        setActive: function() {
            this._active = true;
        },
        setInactive: function() {
            this._active = false;
        },
        setLoading: function(isLoading) {
            this.$el.toggleClass(this._loadingClass, isLoading);
        }
    });

    var SingleSelectField = Backbone.View.extend({
        initialize: function(options) {
            this.$original = options.$original;
            this.dropMenu = new SingleSelectInputDropdown();
            this.$placeholder = jQuery('<input type="text" autocomplete="off" class="bamboo-single-select-field text" />');
            this.render();
        },
        _hasIconClass: 'bamboo-single-select-has-entity-icon',
        render: function() {
            this.$el.removeClass('text'); // remove AUI field class names
            this.dropMenu.$el.appendTo(this.$el);
            this.$placeholder
                .attr('placeholder', this.$original.attr('placeholder') || '')
                .val(this.$original.attr('data-field-text') || this.$original.val())
                .prependTo(this.$el);
            this.setIcon(this.$original.attr('data-icon'));
            jQuery('label').filter('[for="' + this.$original.attr('id') + '"]').click(_.bind(function() {
                this.$placeholder.focus();
            }, this));

            return this;
        },
        addDropMenuEvents: function(events) {
            this.dropMenu.delegateEvents(_.extend(SingleSelectInputDropdown.prototype.events, events));
        },
        indicateActivity: function(ds) {
            this.dropMenu.setLoading(ds.activity);
        },
        setIcon: function(iconUrl) {
            this.$icon = this.$icon || jQuery('<div />', { 'class': 'bamboo-single-select-entity-icon' });
            if (iconUrl) {
                this.$icon.css('background-image', 'url(' + iconUrl + ')').appendTo(this.$el);
                this.$el.addClass(this._hasIconClass);
            } else {
                this.$icon.detach();
                this.$el.removeClass(this._hasIconClass);
            }
        }
    });

    var SingleSelect = Backbone.View.extend({
        initialize: function(options) {
            this._chosen = options.chosen || !!this.$el.data('chosen');
            this._activeClass = options.activeClass || 'active';
            this.datasource = new AJS.ProgressiveDataSet(options.bootstrap || [], {
                queryEndpoint: options.queryEndpoint,
                queryParamKey: options.queryParamKey,
                maxResults: options.maxResults,
                allowEmptyQuery: (typeof options.allowEmptyQuery != 'undefined' ? options.allowEmptyQuery : true),
                matchAnyOnEmptyQuery: options.matchAnyOnEmptyQuery,
                queryData: options.queryData
            });
            this.datasource.matcher = options.matcher;
            this.datasource.parse = options.parser;

            this.field = new SingleSelectField({
                className: 'bamboo-single-select ' + this.$el.attr('class'),
                $original: this.$el
            });

            this.queryInput = new AJS.QueryInput({ el: this.field.$placeholder });
            this.queryInput
                .on('change', this.datasource.query)
                .on('change', this.handleInputChange, this)
                .delegateEvents(_.extend(AJS.QueryInput.prototype.events || {}, {
                    keydown: _.bind(this.handleInputKeydown, this),
                    blur: _.bind(this.handleInputBlur, this),
                    focus: _.bind(this.handleInputFocus, this),
                    click: _.bind(this.requestMatches, this)
                }));

            var singleSelect = this;

            var ResultView = SingleSelectResultView.extend({
                renderItem: function(model) {
                    return options.resultItemTemplate(model.attributes);
                },
                process: function() {
                    if (!singleSelect.disableRendering)
                    {
                        SingleSelectResultView.prototype.process.call(this);
                    }
                    singleSelect.disableRendering = false;
                }
            });

            this.field.addDropMenuEvents({
                click: _.bind(function() {
                    this.queryInput.$el.focus();
                    if (this.queryResult.$el.is(':visible')) {
                        this.queryResult.hide();
                    } else {
                        this.requestMatches();
                    }
                }, this)
            });

            this.datasource.on('activity', this.field.indicateActivity, this.field);

            this.queryResult = new ResultView({ source: this.datasource });
            this.queryResult
                .on('selected', this.setValue, this)
                .on('rendered', this.highlightActive, this)
                .on('shown', this.indicateActive, this)
                .on('hidden', this.indicateInactive, this)
                .model.on('change:active', this.highlightActive, this);

            this.render();
        },
        render: function() {
            this.field.$el.insertBefore(this.$el.hide());
            this.queryResult.hide();
            this.queryResult.$el.addClass('autocomplete').appendTo(document.body);

            return this;
        },
        highlightActive: function() {
            var active = this.queryResult.model.get('active');
            var id = active && active.id;
            this.queryResult.$('li[data-id]').filter(function(i, li) {
                var $li = jQuery(li);
                var method = (id == $li.attr('data-id')) ? 'addClass' : 'removeClass';
                $li[method]('active');
            });
        },
        reset: function() {
            this.datasource.reset();
            this.setValue(null);
            this.trigger('reset');
        },
        setValue: function(model) {
            this.$el.val(model ? model.id : '');
            this.queryInput.val(model ? this.getDisplayValue(model) : '');
            this.field.setIcon(model ? this.getIconValue(model) : null);
            this.queryResult.hide();
            if (model) {
                this.queryInput.$el.focus();
                this._chosen = true;
                this.trigger('selected', model);
            } else {
                this._chosen = false;
            }
            // QueryResult and dropmenu being active prevents blurring the field,
            // so ensure we set them inactive if an option is chosen to allow taking focus from field
            this.queryResult.setContainerInactive();
            this.field.dropMenu.setInactive();
        },
        getDisplayValue: function(model) {
            return model.id;
        },
        getIconValue: function() {
            return null;
        },
        indicateActive: function() {
            this.queryInput.$el.addClass(this._activeClass);
        },
        indicateInactive: function() {
            this.queryInput.$el.removeClass(this._activeClass);
        },
        requestMatchesQuietly: function(callback) {
            this.requestMatches();

            this.datasource.once('sync',
                    _.bind(function()
                    {
                        callback();
                        this.disableRendering = true;
                    }, this));
        },
        requestMatches: function() {
            this.datasource.query(this._chosen ? '' : this.queryInput.val());
        },
        handleInputKeydown: function(e) {
            var active;
            if (this.queryResult.$el.is(':visible')) {
                switch (e.which) {
                    case jQuery.ui.keyCode.UP:
                        e.preventDefault();
                        this.queryResult.model.prev();
                        break;
                    case jQuery.ui.keyCode.DOWN:
                        e.preventDefault();
                        this.queryResult.model.next();
                        break;
                    case jQuery.ui.keyCode.ENTER:
                    case jQuery.ui.keyCode.TAB:
                        e.preventDefault();
                        active = this.queryResult.model.get('active');
                        if (active) {
                            this.queryResult.trigger('selected', active);
                        }
                        break;
                    case jQuery.ui.keyCode.ESCAPE:
                        e.stopPropagation();
                        this.queryResult.hide();
                        break;
                }
            } else if (e.which == jQuery.ui.keyCode.DOWN) {
                this.requestMatches();
            }
        },
        handleInputBlur: function() {
            if (this.field.dropMenu.isActive() || this.queryResult.isContainerActive()) {
                this.queryInput.$el.focus();
            } else {
                if (this.queryResult.$el.is(':visible')) {
                    this.queryResult.hide();
                }
            }
        },
        handleInputFocus: function() {
            var $input = this.queryInput.$el;
            var inputOffset = $input.offset();
            var inputWidth = $input.outerWidth();
            var inputHeight = $input.outerHeight();
            this.queryResult.$el.css({
                width: inputWidth,
                top: inputOffset.top + inputHeight,
                left: inputOffset.left
            });
            // setTimeout will fire after user has clicked in field to give it focus,
            // ensures text is always selected on focus
            setTimeout(function() {
                $input.select();
            });
        },
        handleInputChange: function() {
            this.$el.val(this.queryInput.val());
            this.field.setIcon(null);
            this._chosen = false;
        }
    });

    return SingleSelect;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('BAMBOO.SingleSelect', null, require('widget/single-select'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/widget/autocomplete-controls/bamboo/variables/variable-singleselect.js' */
define('widget/variable-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/single-select'
], function(
    $,
    _,
    Backbone,
    SingleSelect
) {

    'use strict';

    /* currently only supports pre-bootstrapped data.  No rest end point. */
    var VariableSingleSelect = Backbone.View.extend({
        initialize: function(options) {
            options || (options = {});
            this.singleSelect = new SingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap ? _.map(options.bootstrap, function(variable) {
                    return $.extend(true, variable, {id: variable.key});
                }) : [],
                maxResults: options.maxResults || 5,
                matcher: _.bind(this.matcher, this),
                resultItemTemplate: bamboo.widget.autocomplete.variableItemResult
            });
            this.singleSelect.on('selected', this.handleSelection, this);
        },
        containsMatch: function(str, find) {
            return (str.toLowerCase().indexOf(find.toLowerCase()) > -1);
        },
        matcher: function(variable, query) {
            var matches = false;
            matches = matches || this.containsMatch(variable.get('key'), query);
            return matches;
        },
        handleSelection: function(model) {
            this.$el.trigger('selected', model);
        }
    });

    return VariableSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-clipboard', location = '/bower/clipboard/clipboard.js' */
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT  Zeno Rocha
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["ClipboardJS"] = factory();
	else
		root["ClipboardJS"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _clipboardAction = __webpack_require__(1);

var _clipboardAction2 = _interopRequireDefault(_clipboardAction);

var _tinyEmitter = __webpack_require__(3);

var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);

var _goodListener = __webpack_require__(4);

var _goodListener2 = _interopRequireDefault(_goodListener);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * Base class which takes one or more elements, adds event listeners to them,
 * and instantiates a new `ClipboardAction` on each click.
 */
var Clipboard = function (_Emitter) {
    _inherits(Clipboard, _Emitter);

    /**
     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger
     * @param {Object} options
     */
    function Clipboard(trigger, options) {
        _classCallCheck(this, Clipboard);

        var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));

        _this.resolveOptions(options);
        _this.listenClick(trigger);
        return _this;
    }

    /**
     * Defines if attributes would be resolved using internal setter functions
     * or custom functions that were passed in the constructor.
     * @param {Object} options
     */


    _createClass(Clipboard, [{
        key: 'resolveOptions',
        value: function resolveOptions() {
            var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            this.action = typeof options.action === 'function' ? options.action : this.defaultAction;
            this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;
            this.text = typeof options.text === 'function' ? options.text : this.defaultText;
            this.container = _typeof(options.container) === 'object' ? options.container : document.body;
        }

        /**
         * Adds a click event listener to the passed trigger.
         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger
         */

    }, {
        key: 'listenClick',
        value: function listenClick(trigger) {
            var _this2 = this;

            this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {
                return _this2.onClick(e);
            });
        }

        /**
         * Defines a new `ClipboardAction` on each click event.
         * @param {Event} e
         */

    }, {
        key: 'onClick',
        value: function onClick(e) {
            var trigger = e.delegateTarget || e.currentTarget;

            if (this.clipboardAction) {
                this.clipboardAction = null;
            }

            this.clipboardAction = new _clipboardAction2.default({
                action: this.action(trigger),
                target: this.target(trigger),
                text: this.text(trigger),
                container: this.container,
                trigger: trigger,
                emitter: this
            });
        }

        /**
         * Default `action` lookup function.
         * @param {Element} trigger
         */

    }, {
        key: 'defaultAction',
        value: function defaultAction(trigger) {
            return getAttributeValue('action', trigger);
        }

        /**
         * Default `target` lookup function.
         * @param {Element} trigger
         */

    }, {
        key: 'defaultTarget',
        value: function defaultTarget(trigger) {
            var selector = getAttributeValue('target', trigger);

            if (selector) {
                return document.querySelector(selector);
            }
        }

        /**
         * Returns the support of the given action, or all actions if no action is
         * given.
         * @param {String} [action]
         */

    }, {
        key: 'defaultText',


        /**
         * Default `text` lookup function.
         * @param {Element} trigger
         */
        value: function defaultText(trigger) {
            return getAttributeValue('text', trigger);
        }

        /**
         * Destroy lifecycle.
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            this.listener.destroy();

            if (this.clipboardAction) {
                this.clipboardAction.destroy();
                this.clipboardAction = null;
            }
        }
    }], [{
        key: 'isSupported',
        value: function isSupported() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];

            var actions = typeof action === 'string' ? [action] : action;
            var support = !!document.queryCommandSupported;

            actions.forEach(function (action) {
                support = support && !!document.queryCommandSupported(action);
            });

            return support;
        }
    }]);

    return Clipboard;
}(_tinyEmitter2.default);

/**
 * Helper function to retrieve attribute value.
 * @param {String} suffix
 * @param {Element} element
 */


function getAttributeValue(suffix, element) {
    var attribute = 'data-clipboard-' + suffix;

    if (!element.hasAttribute(attribute)) {
        return;
    }

    return element.getAttribute(attribute);
}

module.exports = Clipboard;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _select = __webpack_require__(2);

var _select2 = _interopRequireDefault(_select);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Inner class which performs selection from either `text` or `target`
 * properties and then executes copy or cut operations.
 */
var ClipboardAction = function () {
    /**
     * @param {Object} options
     */
    function ClipboardAction(options) {
        _classCallCheck(this, ClipboardAction);

        this.resolveOptions(options);
        this.initSelection();
    }

    /**
     * Defines base properties passed from constructor.
     * @param {Object} options
     */


    _createClass(ClipboardAction, [{
        key: 'resolveOptions',
        value: function resolveOptions() {
            var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            this.action = options.action;
            this.container = options.container;
            this.emitter = options.emitter;
            this.target = options.target;
            this.text = options.text;
            this.trigger = options.trigger;

            this.selectedText = '';
        }

        /**
         * Decides which selection strategy is going to be applied based
         * on the existence of `text` and `target` properties.
         */

    }, {
        key: 'initSelection',
        value: function initSelection() {
            if (this.text) {
                this.selectFake();
            } else if (this.target) {
                this.selectTarget();
            }
        }

        /**
         * Creates a fake textarea element, sets its value from `text` property,
         * and makes a selection on it.
         */

    }, {
        key: 'selectFake',
        value: function selectFake() {
            var _this = this;

            var isRTL = document.documentElement.getAttribute('dir') == 'rtl';

            this.removeFake();

            this.fakeHandlerCallback = function () {
                return _this.removeFake();
            };
            this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;

            this.fakeElem = document.createElement('textarea');
            // Prevent zooming on iOS
            this.fakeElem.style.fontSize = '12pt';
            // Reset box model
            this.fakeElem.style.border = '0';
            this.fakeElem.style.padding = '0';
            this.fakeElem.style.margin = '0';
            // Move element out of screen horizontally
            this.fakeElem.style.position = 'absolute';
            this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';
            // Move element to the same position vertically
            var yPosition = window.pageYOffset || document.documentElement.scrollTop;
            this.fakeElem.style.top = yPosition + 'px';

            this.fakeElem.setAttribute('readonly', '');
            this.fakeElem.value = this.text;

            this.container.appendChild(this.fakeElem);

            this.selectedText = (0, _select2.default)(this.fakeElem);
            this.copyText();
        }

        /**
         * Only removes the fake element after another click event, that way
         * a user can hit `Ctrl+C` to copy because selection still exists.
         */

    }, {
        key: 'removeFake',
        value: function removeFake() {
            if (this.fakeHandler) {
                this.container.removeEventListener('click', this.fakeHandlerCallback);
                this.fakeHandler = null;
                this.fakeHandlerCallback = null;
            }

            if (this.fakeElem) {
                this.container.removeChild(this.fakeElem);
                this.fakeElem = null;
            }
        }

        /**
         * Selects the content from element passed on `target` property.
         */

    }, {
        key: 'selectTarget',
        value: function selectTarget() {
            this.selectedText = (0, _select2.default)(this.target);
            this.copyText();
        }

        /**
         * Executes the copy operation based on the current selection.
         */

    }, {
        key: 'copyText',
        value: function copyText() {
            var succeeded = void 0;

            try {
                succeeded = document.execCommand(this.action);
            } catch (err) {
                succeeded = false;
            }

            this.handleResult(succeeded);
        }

        /**
         * Fires an event based on the copy operation result.
         * @param {Boolean} succeeded
         */

    }, {
        key: 'handleResult',
        value: function handleResult(succeeded) {
            this.emitter.emit(succeeded ? 'success' : 'error', {
                action: this.action,
                text: this.selectedText,
                trigger: this.trigger,
                clearSelection: this.clearSelection.bind(this)
            });
        }

        /**
         * Moves focus away from `target` and back to the trigger, removes current selection.
         */

    }, {
        key: 'clearSelection',
        value: function clearSelection() {
            if (this.trigger) {
                this.trigger.focus();
            }

            window.getSelection().removeAllRanges();
        }

        /**
         * Sets the `action` to be performed which can be either 'copy' or 'cut'.
         * @param {String} action
         */

    }, {
        key: 'destroy',


        /**
         * Destroy lifecycle.
         */
        value: function destroy() {
            this.removeFake();
        }
    }, {
        key: 'action',
        set: function set() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';

            this._action = action;

            if (this._action !== 'copy' && this._action !== 'cut') {
                throw new Error('Invalid "action" value, use either "copy" or "cut"');
            }
        }

        /**
         * Gets the `action` property.
         * @return {String}
         */
        ,
        get: function get() {
            return this._action;
        }

        /**
         * Sets the `target` property using an element
         * that will be have its content copied.
         * @param {Element} target
         */

    }, {
        key: 'target',
        set: function set(target) {
            if (target !== undefined) {
                if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {
                    if (this.action === 'copy' && target.hasAttribute('disabled')) {
                        throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');
                    }

                    if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {
                        throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');
                    }

                    this._target = target;
                } else {
                    throw new Error('Invalid "target" value, use a valid Element');
                }
            }
        }

        /**
         * Gets the `target` property.
         * @return {String|HTMLElement}
         */
        ,
        get: function get() {
            return this._target;
        }
    }]);

    return ClipboardAction;
}();

module.exports = ClipboardAction;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

function select(element) {
    var selectedText;

    if (element.nodeName === 'SELECT') {
        element.focus();

        selectedText = element.value;
    }
    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {
        var isReadOnly = element.hasAttribute('readonly');

        if (!isReadOnly) {
            element.setAttribute('readonly', '');
        }

        element.select();
        element.setSelectionRange(0, element.value.length);

        if (!isReadOnly) {
            element.removeAttribute('readonly');
        }

        selectedText = element.value;
    }
    else {
        if (element.hasAttribute('contenteditable')) {
            element.focus();
        }

        var selection = window.getSelection();
        var range = document.createRange();

        range.selectNodeContents(element);
        selection.removeAllRanges();
        selection.addRange(range);

        selectedText = selection.toString();
    }

    return selectedText;
}

module.exports = select;


/***/ }),
/* 3 */
/***/ (function(module, exports) {

function E () {
  // Keep this empty so it's easier to inherit from
  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)
}

E.prototype = {
  on: function (name, callback, ctx) {
    var e = this.e || (this.e = {});

    (e[name] || (e[name] = [])).push({
      fn: callback,
      ctx: ctx
    });

    return this;
  },

  once: function (name, callback, ctx) {
    var self = this;
    function listener () {
      self.off(name, listener);
      callback.apply(ctx, arguments);
    };

    listener._ = callback
    return this.on(name, listener, ctx);
  },

  emit: function (name) {
    var data = [].slice.call(arguments, 1);
    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();
    var i = 0;
    var len = evtArr.length;

    for (i; i < len; i++) {
      evtArr[i].fn.apply(evtArr[i].ctx, data);
    }

    return this;
  },

  off: function (name, callback) {
    var e = this.e || (this.e = {});
    var evts = e[name];
    var liveEvents = [];

    if (evts && callback) {
      for (var i = 0, len = evts.length; i < len; i++) {
        if (evts[i].fn !== callback && evts[i].fn._ !== callback)
          liveEvents.push(evts[i]);
      }
    }

    // Remove event from queue to prevent memory leak
    // Suggested by https://github.com/lazd
    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910

    (liveEvents.length)
      ? e[name] = liveEvents
      : delete e[name];

    return this;
  }
};

module.exports = E;


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

var is = __webpack_require__(5);
var delegate = __webpack_require__(6);

/**
 * Validates all params and calls the right
 * listener function based on its target type.
 *
 * @param {String|HTMLElement|HTMLCollection|NodeList} target
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listen(target, type, callback) {
    if (!target && !type && !callback) {
        throw new Error('Missing required arguments');
    }

    if (!is.string(type)) {
        throw new TypeError('Second argument must be a String');
    }

    if (!is.fn(callback)) {
        throw new TypeError('Third argument must be a Function');
    }

    if (is.node(target)) {
        return listenNode(target, type, callback);
    }
    else if (is.nodeList(target)) {
        return listenNodeList(target, type, callback);
    }
    else if (is.string(target)) {
        return listenSelector(target, type, callback);
    }
    else {
        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');
    }
}

/**
 * Adds an event listener to a HTML element
 * and returns a remove listener function.
 *
 * @param {HTMLElement} node
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenNode(node, type, callback) {
    node.addEventListener(type, callback);

    return {
        destroy: function() {
            node.removeEventListener(type, callback);
        }
    }
}

/**
 * Add an event listener to a list of HTML elements
 * and returns a remove listener function.
 *
 * @param {NodeList|HTMLCollection} nodeList
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenNodeList(nodeList, type, callback) {
    Array.prototype.forEach.call(nodeList, function(node) {
        node.addEventListener(type, callback);
    });

    return {
        destroy: function() {
            Array.prototype.forEach.call(nodeList, function(node) {
                node.removeEventListener(type, callback);
            });
        }
    }
}

/**
 * Add an event listener to a selector
 * and returns a remove listener function.
 *
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenSelector(selector, type, callback) {
    return delegate(document.body, selector, type, callback);
}

module.exports = listen;


/***/ }),
/* 5 */
/***/ (function(module, exports) {

/**
 * Check if argument is a HTML element.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.node = function(value) {
    return value !== undefined
        && value instanceof HTMLElement
        && value.nodeType === 1;
};

/**
 * Check if argument is a list of HTML elements.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.nodeList = function(value) {
    var type = Object.prototype.toString.call(value);

    return value !== undefined
        && (type === '[object NodeList]' || type === '[object HTMLCollection]')
        && ('length' in value)
        && (value.length === 0 || exports.node(value[0]));
};

/**
 * Check if argument is a string.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.string = function(value) {
    return typeof value === 'string'
        || value instanceof String;
};

/**
 * Check if argument is a function.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.fn = function(value) {
    var type = Object.prototype.toString.call(value);

    return type === '[object Function]';
};


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

var closest = __webpack_require__(7);

/**
 * Delegates event to a selector.
 *
 * @param {Element} element
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @param {Boolean} useCapture
 * @return {Object}
 */
function _delegate(element, selector, type, callback, useCapture) {
    var listenerFn = listener.apply(this, arguments);

    element.addEventListener(type, listenerFn, useCapture);

    return {
        destroy: function() {
            element.removeEventListener(type, listenerFn, useCapture);
        }
    }
}

/**
 * Delegates event to a selector.
 *
 * @param {Element|String|Array} [elements]
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @param {Boolean} useCapture
 * @return {Object}
 */
function delegate(elements, selector, type, callback, useCapture) {
    // Handle the regular Element usage
    if (typeof elements.addEventListener === 'function') {
        return _delegate.apply(null, arguments);
    }

    // Handle Element-less usage, it defaults to global delegation
    if (typeof type === 'function') {
        // Use `document` as the first parameter, then apply arguments
        // This is a short way to .unshift `arguments` without running into deoptimizations
        return _delegate.bind(null, document).apply(null, arguments);
    }

    // Handle Selector-based usage
    if (typeof elements === 'string') {
        elements = document.querySelectorAll(elements);
    }

    // Handle Array-like based usage
    return Array.prototype.map.call(elements, function (element) {
        return _delegate(element, selector, type, callback, useCapture);
    });
}

/**
 * Finds closest match and invokes callback.
 *
 * @param {Element} element
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @return {Function}
 */
function listener(element, selector, type, callback) {
    return function(e) {
        e.delegateTarget = closest(e.target, selector);

        if (e.delegateTarget) {
            callback.call(element, e);
        }
    }
}

module.exports = delegate;


/***/ }),
/* 7 */
/***/ (function(module, exports) {

var DOCUMENT_NODE_TYPE = 9;

/**
 * A polyfill for Element.matches()
 */
if (typeof Element !== 'undefined' && !Element.prototype.matches) {
    var proto = Element.prototype;

    proto.matches = proto.matchesSelector ||
                    proto.mozMatchesSelector ||
                    proto.msMatchesSelector ||
                    proto.oMatchesSelector ||
                    proto.webkitMatchesSelector;
}

/**
 * Finds the closest parent that matches a selector.
 *
 * @param {Element} element
 * @param {String} selector
 * @return {Function}
 */
function closest (element, selector) {
    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {
        if (typeof element.matches === 'function' &&
            element.matches(selector)) {
          return element;
        }
        element = element.parentNode;
    }
}

module.exports = closest;


/***/ })
/******/ ]);
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-clipboard', location = '/util/shims/clipboard.js' */
define('clipboard', function() {
    return window.ClipboardJS;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-copy-clipboard', location = '/widget/copy-clipboard/copy-clipboard.soy' */
// This file was automatically generated from copy-clipboard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.copyclipboard.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.copyclipboard == 'undefined') { bamboo.widget.copyclipboard = {}; }


bamboo.widget.copyclipboard.element = function(opt_data, opt_ignored) {
  var output = '';
  var copyMessage__soy3 = opt_data.copyMessage != null ? opt_data.copyMessage : "Click to copy";
  var copyCompleteMessage__soy4 = opt_data.copyCompleteMessage != null ? opt_data.copyCompleteMessage : "Copied!";
  output += aui.icons.icon({tagName: 'copy-clipboard', useIconFont: true, icon: 'copy-clipboard', accessibilityText: opt_data.text, extraAttributes: {'data-clipboard-text': opt_data.text, 'data-message': copyMessage__soy3, 'data-message-complete': copyCompleteMessage__soy4}});
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.copyclipboard.element.soyTemplateName = 'bamboo.widget.copyclipboard.element';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-copy-clipboard', location = '/widget/copy-clipboard/copy-clipboard.js' */
require(["jquery","atlassian/libs/skate-0.12.6","clipboard"],function(a,t,e){"use strict";a(function(){t("copy-clipboard",{attached:function(t){var s=a(t);s.attr("data-original-message",s.attr("data-message")),new e(t).on("success",function(){s.attr("data-message",s.attr("data-message-complete")).tipsy("show"),s.one("mouseout",function(){s.attr("data-message",s.attr("data-original-message"))})}),s.tipsy({title:"data-message",delayIn:0,delayOut:100,trigger:"hover"})}})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-trigger', location = 'src/js/aui/trigger.js' */
("undefined"===typeof window?global:window).__27e78313b4347da1dfc07c0aa71513d5=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(a.isEnabled()){var c=document.getElementById(a.getAttribute("aria-controls"));c&&c.message&&c.message(b)}}"use strict";var g=e(__bd7207540b95ff683caa1d3c0bfcc3d7),h=e(__65f46acd493e225a8705ab04389e284d),f=e(__7acfe7fd38bbf8b5bf76cc953770b033);(0,f.default)("data-aui-trigger",{type:f.default.type.ATTRIBUTE,events:{click:function(a,b){var c=
b.target,c=(0,g.default)(c).closest("a[href]",a);c.length&&c[0]!==a||(d(a,b),b.preventDefault())},mouseenter:function(a,b){d(a,b)},mouseleave:function(a,b){d(a,b)},focus:function(a,b){d(a,b)},blur:function(a,b){d(a,b)}},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")}}});(0,h.default)("aui/trigger");return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-trigger', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-attributes', location = 'src/js/aui/internal/attributes.js' */
("undefined"===typeof window?global:window).__4512e4b5489c59d7921508536665c00f=function(){function d(a){return null!==a}function e(a,b,c){c?a.setAttribute(b,""):a.removeAttribute(b)}function f(a,b){var c=function(a){return a.toLowerCase()===b.toLowerCase()},d=null===b,e=!d&&!a.values.filter(c).length;return d?a.hasOwnProperty("missingDefault")?a.missingDefault:null:e?a.hasOwnProperty("invalidDefault")?a.invalidDefault:a.hasOwnProperty("missingDefault")?a.missingDefault:null:a.values.length?a.values.filter(c)[0]:
null}function g(a,b,c){a.setAttribute(b.attribute,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.computeBooleanValue=d;b.setBooleanAttribute=e;b.computeEnumValue=f;b.setEnumAttribute=g;b.default={computeBooleanValue:d,setBooleanAttribute:e,computeEnumValue:f,setEnumAttribute:g};return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-enforcer', location = 'src/js/aui/internal/enforcer.js' */
("undefined"===typeof window?global:window).__c220881a6424c0b144a85afc642e17bb=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;var a=__2f5c294b01e66b15309518e39bcb949d;if(a&&a.__esModule)d=a;else{var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;d=b}c.default=function(a){function c(b){return e(function(){return a.hasAttribute(b)},b+" wasn't defined")}function b(d){if(!c(d,a))return!1;var f=a.getAttribute(d);
return e(function(){return document.getElementById(f)},'an element with id set to "'+f+'" was not found')}function e(b,c){return!b()?(a?d.error(c,a):d.error(c),!1):!0}return{attributeExists:c,refersTo:b,satisfiesRules:e,ariaControls:function(){return b("aria-controls")},ariaOwns:function(){return b("aria-owns")}}};return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-inline-dialog2', location = 'src/js/aui/inline-dialog2.js' */
("undefined"===typeof window?global:window).__718e51878b026db6649db1cbe5fb27d1=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function l(a,b){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&b(d)}function n(a){a=a.target;(0,e.default)(a).set("mouse-inside",!0);a.message({type:"mouseenter"})}function o(a){a=a.target;(0,e.default)(a).set("mouse-inside",!1);a.message({type:"mouseleave"})}function m(a){(0,e.default)(a).set("mouse-inside",void 0);a.removeEventListener("mouseenter",
n);a.removeEventListener("mouseleave",o);"hover"===a.respondsTo&&((0,e.default)(a).set("mouse-inside",!1),a.addEventListener("mouseenter",n),a.addEventListener("mouseleave",o))}function j(a){var b=!a.hasAttribute("aria-hidden"),d=a.hasAttribute("open");if(b||a.open!==d)d?((0,e.default)(a).set("is-processing-show",!0),(0,f.default)(a).show(),(0,f.default)(a).isVisible()?l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.enable();b.setAttribute("aria-expanded","true")}):
a.open=!1,(0,e.default)(a).set("is-processing-show",!1)):((0,f.default)(a).hide(),(0,f.default)(a).isVisible()?a.open=!0:l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.disable();b.setAttribute("aria-expanded","false")}))}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});var q=c(__bd7207540b95ff683caa1d3c0bfcc3d7),p=c(__df78b4690da2c4aae9e9dc85c77219d0),r=c(__65f46acd493e225a8705ab04389e284d),g=c(__4512e4b5489c59d7921508536665c00f),s=c(__c220881a6424c0b144a85afc642e17bb),
t=c(__9a668cbde1e182d8e721c23580356df2),f=c(__bbe882dbb07e18e72992d5f992bba14c),h=c(__7acfe7fd38bbf8b5bf76cc953770b033),e=c(__60d0fde69902306f271d8ee27e7ed8ae),u={click:function(a){if(a.open){if(!(0,f.default)(a).isPersistent())a.open=!1}else a.open=!0},mouseenter:function(a){a.open||(a.open=!0);a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout()},mouseleave:function(a){if(!(0,f.default)(a).isPersistent()&&a.open){a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout();var b=setTimeout(function(){if(!(0,
e.default)(a).get("mouse-inside"))a.open=!1},1E3);a._clearMouseleaveTimeout=function(){clearTimeout(b);a._clearMouseleaveTimeout=null}}},focus:function(a){a.open||(a.open=!0)},blur:function(a){if(!(0,f.default)(a).isPersistent()&&a.open)a.open=!1}},i={attribute:"responds-to",values:["toggle","hover"],missingDefault:"toggle",invalidDefault:"toggle"},h=(0,h.default)("aui-inline-dialog",{prototype:{get open(){return(0,f.default)(this).isVisible()},set open(a){g.default.setBooleanAttribute(this,"open",
a);j(this)},get persistent(){return this.hasAttribute("persistent")},set persistent(a){g.default.setBooleanAttribute(this,"persistent",a)},get respondsTo(){return g.default.computeEnumValue(i,this.getAttribute(i.attribute))},set respondsTo(a){var b=this.respondsTo;g.default.setEnumAttribute(this,i,a);b!==this.respondsTo&&m(this)},message:function(a){var b={toggle:["click"],hover:["mouseenter","mouseleave","focus","blur"]}[this.respondsTo];if(b&&-1<b.indexOf(a.type))u[a.type](this,a);return this}},
created:function(a){(0,e.default)(a).set("is-processing-show",!1);l(a,function(b){b.setAttribute("aria-expanded",a.open);b.setAttribute("aria-haspopup","true")})},attributes:{"aria-hidden":function(a,b){if("true"===b.newValue){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&d.setAttribute("aria-expanded","false")}g.default.setBooleanAttribute(a,"open","false"===b.newValue)},open:function(a){document.body.contains(a)&&j(a)},"responds-to":function(a,b){var d=g.default.computeEnumValue(i,
b.oldValue),c=g.default.computeEnumValue(i,b.newValue);d!==c&&m(a)}},attached:function(a){(0,s.default)(a).attributeExists("id");a.hasAttribute("open")?(0,e.default)(a).get("is-processing-show")||j(a):j(a);m(a)},detached:function(a){a._auiAlignment&&a._auiAlignment.destroy()},template:function(a){var b=(0,q.default)('<div class="aui-inline-dialog-contents"></div>').append(a.childNodes);(0,q.default)(a).addClass("aui-layer").html(b)}});(0,r.default)("aui/inline-dialog2",h);(0,t.default)("InlineDialog2",
h);k.default=h;return k=k["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-inline-dialog2', location = 'src/soy/inline-dialog2.soy' */
// This file was automatically generated from inline-dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.inlineDialog2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.inlineDialog2 == 'undefined') { aui.inlineDialog2 = {}; }


aui.inlineDialog2.inlineDialog2 = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.alignment) ? ' alignment="' + soy.$$escapeHtml(opt_data.alignment) + '"' : '') + ((opt_data.open) ? ' open' : '') + ((opt_data.persistent) ? ' persistent' : '') + ((opt_data.respondsTo) ? ' responds-to="' + soy.$$escapeHtml(opt_data.respondsTo) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  aui.inlineDialog2.inlineDialog2.soyTemplateName = 'aui.inlineDialog2.inlineDialog2';
}


aui.inlineDialog2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {showIcon: opt_data.showIcon ? opt_data.showIcon : false}));
};
if (goog.DEBUG) {
  aui.inlineDialog2.trigger.soyTemplateName = 'aui.inlineDialog2.trigger';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/header/branch-selection-view.js' */
define("branchinator/views/layout/header/branch-selection-view",["backbone","branchinator/utils/branchinator-utils","jquery","branchinator/utils/radio-utils"],function(f,a,d,c){var b=function(g){g.data("select2").opts.minimumInputLength=2};b.prototype={url:function(){return a.getRestUrl("branchesWithPlans")},results:function(g){g.unshift({disabled:true});return{results:g}},formatResult:function(g){if(g.disabled){return "Can\u0027t find what you\u0027re looking for? Select a repository on the left."}else{return bamboo.plugins.branchinator.renderBranchSelectorOption({repoName:g.repoName,branchName:g.branchName})}},fetchErrorMessage:function(){return "Couldn\u0027t obtain the list of branches. Try reloading the page."}};var e=function(h,g){this.branchSelectionModel=g;h.data("select2").opts.minimumInputLength=0};e.prototype={getRepoId:function(){return this.branchSelectionModel.get("repo").id},url:function(){return a.getRestUrl("branches?repoId={0}",this.getRepoId())},results:function(g){return{results:g}},formatResult:function(g){return bamboo.plugins.branchinator.renderBranchSelectorOption({branchName:g.branchName})},fetchErrorMessage:function(){return "Couldn\u0027t obtain the list of branches for the selected repository. Check repository\u0027s settings."}};return Marionette.ItemView.extend({tagName:"span",ui:{repoSelector:"#repoSelector",branchSelector:"#branchSelector",copyLink:"#copyBranchNameLink"},modelEvents:{"repo:selected":"onRepoSelected","repo:cleared":"onRepoCleared","branch:selected":"onBranchSelected","branch:cleared":"onBranchCleared"},events:{"change @ui.repoSelector":"onRepoSelectorChange","change @ui.branchSelector":"onBranchSelectorChange"},branchSelectionMode:void 0,template:function(){return bamboo.plugins.branchinator.renderBranchSelectionView()},onShow:function(){this.ui.repoSelector.auiSelect2({placeholder:"Select repository to scan",minimumInputLength:0,dropdownCssClass:"repoSelectorDropdown",ajax:{url:a.getRestUrl("repos"),dataType:"json",data:function(g,h){return{searchTerm:g}},results:function(h,g){return{results:h}},cache:true,params:{error:this.onRepoFetchError.bind(this)}},formatResult:function(g){return g.name},formatSelection:function(g){return g.name}});this.ui.branchSelector.auiSelect2({placeholder:"Select VCS branch",minimumInputLength:2,dropdownCssClass:"branchSelectorDropdown",ajax:{url:function(){return this.branchSelectionMode.url()}.bind(this),dataType:"json",data:function(g){return{searchTerm:g}},results:function(h,g){return this.branchSelectionMode.results(h,g)}.bind(this),cache:false,params:{error:this.onBranchFetchError.bind(this)}},id:function(g){return g.branchName},formatResult:function(g){return this.branchSelectionMode.formatResult(g)}.bind(this),formatSelection:function(g){return bamboo.plugins.branchinator.renderBranchSelection({branch:g.branchName})},formatInputTooShort:function(h,g){return "Please enter more characters or select a repository on the left."}});this.branchSelectionMode=new b(this.ui.branchSelector)},onRepoSelectorChange:function(h){var g=this.ui.repoSelector.auiSelect2("data");this.model.selectRepo(g.id,g.name)},onBranchSelectorChange:function(h){var g=this.ui.branchSelector.auiSelect2("data");this.model.selectBranch(g.repoId,g.repoName,g.branchName)},onRepoCleared:function(){this.ui.repoSelector.val("");this.ui.repoSelector.auiSelect2("data","");this.branchSelectionMode=new b(this.ui.branchSelector);this.ui.copyLink.empty()},onRepoSelected:function(g){this.branchSelectionMode=new e(this.ui.branchSelector,this.model);this.ui.repoSelector.val(g.id);this.ui.repoSelector.auiSelect2("data",{id:g.id,name:g.name});this.ui.copyLink.empty()},onBranchCleared:function(){this.ui.branchSelector.val("");this.ui.branchSelector.auiSelect2("data","");this.ui.copyLink.empty()},onBranchSelected:function(i){this.onRepoSelected(i.repo);var h=i.branch;var g=h.branchName;this.ui.branchSelector.val(h.id);this.ui.branchSelector.auiSelect2("data",{id:h.id,branchName:g});this.ui.copyLink.html(bamboo.plugins.branchinator.renderCopyBranchLink({branchName:g}))},onRepoFetchError:function(g){if(g.status!==0||g.statusText!=="abort"){var h=a.getErrorFromResponse(g,"Couldn\u0027t obtain the list of repositories. Try reloading the page.");c.trigger("message:error",h)}},onBranchFetchError:function(g){if(g.status!==0||g.statusText!=="abort"){var h=a.getErrorFromResponse(g,this.branchSelectionMode.fetchErrorMessage());c.trigger("message:error",h)}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/dialogs/discovery-dialog.js' */
define("branchinator/dialogs/discovery-dialog",["backbone","branchinator/utils/branchinator-utils","jquery","util/ajax"],function(d,a,c,b){return d.View.extend({events:{"click .close":"onCloseDialog"},initialize:function(){this.dialog=this.$el.get(0);this.dialog.open=true},onCloseDialog:function(){if(this.$el.is(":visible")){this.$el.hide()}this.saveDialogDisplayed().done(function(){c("#branchStatusLink").addClass("persisted")})},saveDialogDisplayed:function(){var f="plan.page.navigation.discovery.dialog.displayed";var e={property:f,value:"true"};return b({url:a.getRestUrl("config/user/{0}",f),type:"PUT",data:JSON.stringify(e),contentType:"application/json",dataType:"json"})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/collections/pull-requests-collection.js' */
define("branchinator/collections/pull-requests-collection",["backbone","branchinator/utils/branchinator-utils","branchinator/models/pull-request-model","underscore"],function(d,a,c,b){return d.Collection.extend({model:c,initialize:function(f,e){this.repoId=e.repoId;this.branchName=e.branchName;this.resetMergeabilityStates();if(f){f.forEach(this.normalizePullRequestObject,this)}this.fetchMergeabilityStates();this.on("sync",this.fetchMergeabilityStates);this.on("remove",function(g){this.removeMergeabilityState(g.getId())});this.on("reset",this.resetMergeabilityStates)},parse:function(f){var g=f.pullRequests||{};var e=g.values||[];e.forEach(this.normalizePullRequestObject,this);return e},normalizePullRequestObject:function(e){e[c.prototype.bambooRepoIdAttribute]=this.repoId;var f=e[c.prototype.idAttribute];if(f!==void 0){b.extend(e,this.getMergeabilityState(f))}},fetchMergeabilityStates:function(){this.models.forEach(function(e){e.fetchMergeabilityState().done(function(){this._mergeabilityState[e.getId()]=e.getMergeabilityState()}.bind(this))},this)},getMergeabilityState:function(e){return this._mergeabilityState[e]||{}},removeMergeabilityState:function(e){delete this._mergeabilityState[e]},resetMergeabilityStates:function(){this._mergeabilityState={}}},{forRepositoryBranch:function(f,e){return new this([],{url:a.getRestUrl("pullRequest?repoId={0}&branchName={1}",f,encodeURIComponent(e)),repoId:f,branchName:e})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/behaviors/fetch-state-aware-behavior.js' */
define("branchinator/behaviors/fetch-state-aware-behavior",["marionette"],function(b){var a={request:"onFetchStarted","sync error":"onFetchEnded"};return b.Behavior.extend({collectionEvents:a,modelEvents:a,initialize:function(){this.resetFetchState();this.view.resetFetchState=this.resetFetchState.bind(this);this.view.isFetched=this.isFetched.bind(this);this.view.isFetching=this.isFetching.bind(this)},onFetchStarted:function(){this.fetchState.fetching=true},onFetchEnded:function(){this.fetchState.fetching=false;if(!this.fetchState.fetched){this.fetchState.fetched=true;this.view.triggerMethod("initial:fetch:complete")}},resetFetchState:function(){this.fetchState={fetched:false,fetching:false}},isFetched:function(){return this.fetchState.fetched},isFetching:function(){return this.fetchState.fetching}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/collections/recent-branches-collection.js' */
define("branchinator/collections/recent-branches-collection",["backbone","branchinator/utils/branchinator-utils"],function(b,a){return b.Collection.extend({url:a.getRestUrl("recent/branch")})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/utils/branchinator-utils.js' */
define("branchinator/utils/branchinator-utils",[],function(){var d=AJS.contextPath()+"/branchStatus";var c=AJS.contextPath()+"/rest/branchStatus/latest/";var a=AJS.contextPath()+"/download/resources/com.atlassian.bamboo.plugins.branchinator:branchinator-resources/";var b=(function(){var e=document.createElement("fakeElement");var f={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var g in f){if(e.style[g]!==undefined){return f[g]}}})();return Object.freeze({getApplicationRootUrl:function(){return d},getRestUrl:function(){return c+AJS.format.apply(null,arguments)},getResourceUrl:function(){return a+AJS.format.apply(null,arguments)},getRepoUrlPath:function(e,f){return(e&&f)?e+"/"+this.slashSafeUrlEncode(f):""},getRepoAndBranchUrlPath:function(f,g,e){return this.getRepoUrlPath(f,g)+(e?"/"+this.slashSafeUrlEncode(e):"")},slashSafeUrlEncode:function(e){if(e){return encodeURIComponent(e).replace(/%2[fF]/g,"%252F").replace(/%5C/,"%255C")}},slashSafeUrlDecode:function(e){if(e){return e.replace(/%2[fF]/g,"/").replace(/%5C/,"\\")}},getErrorFromResponse:function(e,g){var h=e.responseJSON;var f=h&&h.errors&&h.errors[0];return f||g||"Couldn\u0027t update the branch view. Try reloading the page."},getAnimationCompletedEventName:function(){return b}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/integrations/pull-requests-table-view.js' */
define("branchinator/views/layout/content/integrations/pull-requests-table-view",["branchinator/views/layout/content/integrations/base-integrations-table-view","marionette"],function(a,e){var c=JSON.stringify({name:"branch.view.action.pullRequest.create.clicked"});var d=JSON.stringify({name:"branch.view.action.pullRequest.details.clicked"});var b=e.ItemView.extend({tagName:"tr",modelEvents:{change:"render"},template:function(f){return bamboo.plugins.branchinator.renderPullRequestTableRowView({pullRequest:f,pullRequestDetailsAnalyticsData:d})}});return a.extend({childView:b,template:function(){return bamboo.plugins.branchinator.renderPullRequestsTableView({createPullRequestUrl:this.createPullRequestUrl,createPullRequestAnalyticsData:c})},getFetchErrorContent:function(f){if(f.errorKey==="unsupportedRepositoryType"){return bamboo.plugins.branchinator.renderPullRequestsNotSupportedInfo()}else{if(f.remoteRequestStatus===401){return aui.message.warning({content:"You do not have sufficient permissions for this repository to access pull requests."})}else{return null}}},getOauthRequestExplanation:function(){return "Bamboo requires your approval before it can gather information about pull requests."},getEmptyText:function(){return "There are no open pull requests for this branch."},onCollectionSync:function(g,f){this.createPullRequestUrl=f.createPullRequestUrl;a.prototype.onCollectionSync.apply(this,Array.prototype.slice.call(arguments))},onCollectionError:function(g,f){this.createPullRequestUrl=void 0;a.prototype.onCollectionError.apply(this,Array.prototype.slice.call(arguments))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/landing-page-recent-branch-view.js' */
define("branchinator/views/layout/content/landing-page-recent-branch-view",["branchinator/utils/branchinator-utils","marionette"],function(a,b){return b.ItemView.extend({tagName:"li",ui:{branchSuggestion:".branchSuggestion"},triggers:{"click @ui.branchSuggestion":"recent:branch:selected"},template:function(c){return bamboo.plugins.branchinator.renderLandingPageRecentBranchView({recentBranch:c})},onRender:function(){var c=a.getRepoAndBranchUrlPath(this.model.get("repoId"),this.model.get("repoName"),this.model.get("branchName"));this.ui.branchSuggestion.attr("href",a.getApplicationRootUrl()+"/"+c);return this}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/models/jira-issue-model.js' */
define("branchinator/models/jira-issue-model",["backbone","branchinator/utils/branchinator-utils","underscore"],function(f,b,c){var a={success:["resolved","closed","done","complete","completed"],current:["inprogress","tobereviewed","review","toreview","inreview","techincalreview"],moved:["reopened"]};var e={};c.each(a,function(h,g){h.forEach(function(i){e[i]=g})});var d=function(g){return e[g]||"default"};return f.Model.extend({parse:function(g){return c.extend(g||{},{lozengeType:d(g.statusClass),iconUrl:g.iconUrl||b.getResourceUrl("images/jiraIssueIcon.svg"),iconAltText:g.issueType||"Jira issue",issueLink:g.url?g.url.href:null})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/header-view.js' */
define("branchinator/views/layout/header-view",["branchinator/views/layout/header/branch-selection-view","jquery","marionette"],function(c,a,b){return b.LayoutView.extend({id:"branchStatusHeader",tagName:"header",className:"aui-page-header",regions:{branchSelection:"#branchSelectionContainer"},template:function(){return bamboo.plugins.branchinator.renderHeaderView()},initialize:function(d){this.options=d},onShow:function(){if(this.getOption("hasRepositories")){this.branchSelection.show(new c({model:this.model}))}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/soy/branchinator.soy' */
// This file was automatically generated from branchinator.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.branchinator.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.branchinator == 'undefined') { bamboo.plugins.branchinator = {}; }


bamboo.plugins.branchinator.renderLayoutView = function(opt_data, opt_ignored) {
  return '<div id="headerContainer"></div><div id="messagesContainer"></div><div id="contentContainer"></div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderLayoutView.soyTemplateName = 'bamboo.plugins.branchinator.renderLayoutView';
}


bamboo.plugins.branchinator.renderHeaderView = function(opt_data, opt_ignored) {
  return '<div class="aui-page-header-inner"><div class="aui-page-header-main"><ol id="breadcrumb" class="aui-nav aui-nav-breadcrumbs"><li><a href="' + soy.$$escapeHtml("") + '/allPlans.action">' + soy.$$escapeHtml("Build projects") + '</a></li></ol><h1>' + soy.$$escapeHtml("Branch status") + '</h1><span id="branchSelectionContainer"></span></div></div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderHeaderView.soyTemplateName = 'bamboo.plugins.branchinator.renderHeaderView';
}


bamboo.plugins.branchinator.renderContentView = function(opt_data, opt_ignored) {
  return '<div id="landingPageContainer"></div><div id="innerContentContainer"><div id="buildsContainer"></div><div id="integrationsContainer"></div></div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderContentView.soyTemplateName = 'bamboo.plugins.branchinator.renderContentView';
}


bamboo.plugins.branchinator.renderBranchSelectionView = function(opt_data, opt_ignored) {
  return '<form id="branchSelectionForm" class="aui"><span><input id="repoSelector"/></span><span><input id="branchSelector"/></span><span id="copyBranchNameLink"></span></form>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBranchSelectionView.soyTemplateName = 'bamboo.plugins.branchinator.renderBranchSelectionView';
}


bamboo.plugins.branchinator.renderCopyBranchLink = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.copyclipboard.element({text: opt_data.branchName, copyMessage: "Click to copy branch name", copyCompleteMessage: "Copied!"});
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderCopyBranchLink.soyTemplateName = 'bamboo.plugins.branchinator.renderCopyBranchLink';
}


bamboo.plugins.branchinator.renderBranchSelection = function(opt_data, opt_ignored) {
  return aui.icons.icon({useIconFont: true, icon: 'devtools-branch'}) + ' ' + soy.$$escapeHtml(opt_data.branch);
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBranchSelection.soyTemplateName = 'bamboo.plugins.branchinator.renderBranchSelection';
}


bamboo.plugins.branchinator.renderBranchSelectorOption = function(opt_data, opt_ignored) {
  return '<span>' + ((opt_data.repoName) ? soy.$$escapeHtml(opt_data.repoName) + aui.icons.icon({useIconFont: true, icon: 'devtools-branch', extraClasses: 'repoBranchSeparator'}) : '') + soy.$$escapeHtml(opt_data.branchName) + '</span>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBranchSelectorOption.soyTemplateName = 'bamboo.plugins.branchinator.renderBranchSelectorOption';
}


bamboo.plugins.branchinator.renderLandingPageView = function(opt_data, opt_ignored) {
  return '<img id="landingPageLogo" src="' + soy.$$escapeHtml("") + '/download/resources/com.atlassian.bamboo.plugins.branchinator:branchinator-resources/images/landingPage.png"/><h1>' + soy.$$escapeHtml("Track and handle build plans of your branches") + '</h1><p>' + soy.$$escapeHtml("Pick a branch to view build statuses and manage plan assignments.") + ' <a target="_blank" href="' + soy.$$escapeHtml("http://docs.atlassian.com/bamboo/docs-0610/") + soy.$$escapeHtml("Using+the+branch+status+page") + '">' + soy.$$escapeHtml("Learn more") + '</a></p><h3>' + soy.$$escapeHtml("Recently visited branches") + '</h3><div id="recentlyVisited"><ul class="branchSuggestions"></ul></div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderLandingPageView.soyTemplateName = 'bamboo.plugins.branchinator.renderLandingPageView';
}


bamboo.plugins.branchinator.renderLandingPageRecentBranchView = function(opt_data, opt_ignored) {
  return '<a href="#" class="branchSuggestion" title="' + soy.$$escapeHtml(opt_data.recentBranch.branchName) + '" data-repository-id="' + soy.$$escapeHtml(opt_data.recentBranch.repoId) + '" data-repository-name="' + soy.$$escapeHtml(opt_data.recentBranch.repoName) + '" data-branch-name="' + soy.$$escapeHtml(opt_data.recentBranch.branchName) + '">' + aui.icons.icon({icon: 'devtools-branch', useIconFont: true}) + ' ' + soy.$$escapeHtml(opt_data.recentBranch.repoName) + ' / ' + soy.$$escapeHtml(opt_data.recentBranch.branchName) + '</a>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderLandingPageRecentBranchView.soyTemplateName = 'bamboo.plugins.branchinator.renderLandingPageRecentBranchView';
}


bamboo.plugins.branchinator.renderLandingPageRecentBranchesEmptyView = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.fetched) ? '<div id="landingPageLoadingIcon">' + bamboo.plugins.branchinator.renderBigSpinner(null) + '</div>' : '<p class="noRecentBranches">' + soy.$$escapeHtml("You have not visited any branches recently.") + '</p>');
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderLandingPageRecentBranchesEmptyView.soyTemplateName = 'bamboo.plugins.branchinator.renderLandingPageRecentBranchesEmptyView';
}


bamboo.plugins.branchinator.renderBuildsView = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml("Plans building this branch") + '</h2><div id="buildsSortOrderContainer"><label for="buildsSortOrderSelect">' + soy.$$escapeHtml("Order by:") + '</label><select id="buildsSortOrderSelect">';
  var sortOrderList87 = opt_data.buildsSortOrderings;
  var sortOrderListLen87 = sortOrderList87.length;
  for (var sortOrderIndex87 = 0; sortOrderIndex87 < sortOrderListLen87; sortOrderIndex87++) {
    var sortOrderData87 = sortOrderList87[sortOrderIndex87];
    output += '<option value="' + soy.$$escapeHtml(sortOrderData87.column) + '" ' + ((sortOrderData87.selected) ? 'selected' : '') + '>' + soy.$$escapeHtml(sortOrderData87.label) + '</option>';
  }
  output += '</select></div><div id="addPlansContainer"></div><div id="buildsTableContainer"></div>';
  return output;
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBuildsView.soyTemplateName = 'bamboo.plugins.branchinator.renderBuildsView';
}


bamboo.plugins.branchinator.renderAddPlansView = function(opt_data, opt_ignored) {
  return '<form class="aui"><table id="addPlansTable"><tr><td id="addPlansSelectColumn"><input id="addPlansSelect" /></td><td id="addPlansButtonColumn"><button id="addPlansButton" class="aui-button aui-button-primary">' + soy.$$escapeHtml("Add") + '</button></td></tr></table></form>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderAddPlansView.soyTemplateName = 'bamboo.plugins.branchinator.renderAddPlansView';
}


bamboo.plugins.branchinator.renderBuildsTableView = function(opt_data, opt_ignored) {
  return '<table class="aui"><colgroup><col width="30%"/><col width=""/><col width=""/><col width=""/><col width=""/><col width="70px"/></colgroup><thead><tr><th id=\'plan-header\' data-sort="none">' + soy.$$escapeHtml("Plan") + '</th><th>' + soy.$$escapeHtml("Build") + '</th><th id=\'buildtime-header\' data-sort="ascending">' + soy.$$escapeHtml("Completed") + '</th><th>' + soy.$$escapeHtml("Tests") + '</th><th>' + soy.$$escapeHtml("Reason") + '</th><th></th></tr></thead><tbody></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBuildsTableView.soyTemplateName = 'bamboo.plugins.branchinator.renderBuildsTableView';
}


bamboo.plugins.branchinator.renderBuildsTableRowView = function(opt_data, opt_ignored) {
  var output = '<td class="plan" data-plan-key="' + soy.$$escapeHtml(opt_data.build.planKey) + '" data-status="' + soy.$$escapeHtml(opt_data.build.statusIcon.statusCode) + '"><a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.build.planKey) + '" class="view-branches">' + bamboo.plugins.branchinator.renderBuildName({planName: opt_data.build.planName, projectName: opt_data.build.projectName, branchName: opt_data.build.branchName}) + '</a></td><td class="build ' + ((opt_data.build.buildState) ? soy.$$escapeHtml(opt_data.build.buildState) : 'disabled') + '">';
  var latestActiveBuildNumber__soy136 = opt_data.build.latestActiveBuildNumber != null ? opt_data.build.latestActiveBuildNumber : opt_data.build.buildNumber;
  output += '<a class="statusIcon" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.build.planKey) + ((latestActiveBuildNumber__soy136 != null) ? '-' + soy.$$escapeHtml(latestActiveBuildNumber__soy136) : '') + '">' + widget.icons.statusIcon({status: opt_data.build.statusIcon.iconType, text: opt_data.build.statusIcon.displayText}) + '</a> ' + ((opt_data.build.buildNumber) ? '<a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.build.planKey) + '/latest" title="Latest build">#' + soy.$$escapeHtml(opt_data.build.buildNumber) + '</a>' + ((opt_data.build.nrCommits > 0) ? ' (<a href="#" class="commitsLink ' + ((opt_data.build.committerIsCurrentUser) ? 'me' : '') + '" data-plan-key="' + soy.$$escapeHtml(opt_data.build.planKey) + '">' + ((opt_data.build.nrCommits == 1) ? soy.$$escapeHtml(AJS.format("{0} commit",1)) : soy.$$escapeHtml(AJS.format("{0} commits",opt_data.build.nrCommits))) + '</a>)' : '') : soy.$$escapeHtml("Never built")) + '</td>' + ((opt_data.build.buildNumber) ? '<td class="lastBuildTime" data-lastbuildepoch="-' + soy.$$escapeHtml(opt_data.build.lastBuildEpoch) + '">' + soy.$$escapeHtml(opt_data.build.lastBuildTime) + '</td><td>' + soy.$$escapeHtml(opt_data.build.testResultsSummary) + '</td><td>' + soy.$$filterNoAutoescape(opt_data.build.reason) + '</td>' : '<td colspan="3"></td>') + '<td class="actions">' + bamboo.plugins.branchinator.renderBuildActions(opt_data) + '</td>';
  return output;
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBuildsTableRowView.soyTemplateName = 'bamboo.plugins.branchinator.renderBuildsTableRowView';
}


bamboo.plugins.branchinator.renderBuildsTableEmptyView = function(opt_data, opt_ignored) {
  return '<td colspan="6">' + ((! opt_data.fetched) ? bamboo.plugins.branchinator.renderBigSpinner(null) : (opt_data.isFetchError) ? soy.$$filterNoAutoescape(opt_data.fetchErrorContent) : soy.$$escapeHtml("There aren\x27t any plans scheduled to run on the selected VCS branch.")) + '</td>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBuildsTableEmptyView.soyTemplateName = 'bamboo.plugins.branchinator.renderBuildsTableEmptyView';
}


bamboo.plugins.branchinator.renderBuildActions = function(opt_data, opt_ignored) {
  return '' + ((opt_data.build.hasBuildPermission) ? ((opt_data.build.statusIcon.statusCode == 'disabled') ? '<a class="action resumeBuild mutative" id="resumeBuild_' + soy.$$escapeHtml(opt_data.build.planKey) + '" href="#" data-plan-key="' + soy.$$escapeHtml(opt_data.build.planKey) + '"><span class="icon icon-build-enable" title="Enable \'' + soy.$$escapeHtml(opt_data.build.planName) + '\'"><span >Enable \'' + soy.$$escapeHtml(opt_data.build.planName) + '\'</span></span></a>' : '') + ((opt_data.build.statusIcon.statusCode != 'inProgress' && opt_data.build.statusIcon.statusCode != 'disabled' && opt_data.build.statusIcon.statusCode != 'queued' && opt_data.build.statusIcon.statusCode != 'checkingOut') ? '<a class="action asynchronous mutative startBuild" id="manualBuild_' + soy.$$escapeHtml(opt_data.build.planKey) + '" href="#" data-plan-key="' + soy.$$escapeHtml(opt_data.build.planKey) + '"><span class="icon icon-build-run" title="Run"><span>Run</span></span></a>' : '') + ((opt_data.build.statusIcon.statusCode == 'inProgress' || opt_data.build.statusIcon.statusCode == 'queued' || opt_data.build.statusIcon.statusCode == 'checkingOut') ? '<a class="action asynchronous mutative stopBuild" id="stopSingleBuild_' + soy.$$escapeHtml(opt_data.build.planKey) + '" href="#" data-plan-key="' + soy.$$escapeHtml(opt_data.build.planKey) + '"><span class="icon icon-build-stop" title="Stop \'' + soy.$$escapeHtml(opt_data.build.planName) + '\'"><span>Stop \'' + soy.$$escapeHtml(opt_data.build.planName) + '\'</span></span></a>' : '') : '') + ((opt_data.build.hasEditPermission) ? '<a class="action editBuild" id="editBuild:' + soy.$$escapeHtml(opt_data.build.planKey) + '" href="' + soy.$$escapeHtml("") + '/chain/admin/config/editChainConfiguration.action?buildKey=' + soy.$$escapeHtml(opt_data.build.planKey) + '"><span class="action icon icon-build-configure" title="Edit \'' + soy.$$escapeHtml(opt_data.build.planName) + '\'"><span>Edit \'' + soy.$$escapeHtml(opt_data.build.planName) + '\'</span></span></a><a href="#" class="action deleteBuild" data-plan-key="' + soy.$$escapeHtml(opt_data.build.planKey) + '"><span class="aui-icon aui-icon-small aui-iconfont-remove">Delete</span></a>' : '');
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBuildActions.soyTemplateName = 'bamboo.plugins.branchinator.renderBuildActions';
}


bamboo.plugins.branchinator.renderBuildName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.projectName) ? soy.$$escapeHtml(opt_data.projectName) + ' &rsaquo; ' : '') + soy.$$escapeHtml(opt_data.planName) + ((opt_data.branchName) ? ' ' + widget.icons.fontIcon({type: 'devtools-branch'}) + ' ' + soy.$$escapeHtml(opt_data.branchName) : '');
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBuildName.soyTemplateName = 'bamboo.plugins.branchinator.renderBuildName';
}


bamboo.plugins.branchinator.renderBigSpinner = function(opt_data, opt_ignored) {
  return '<div class="bigSpinner"><img src=\'' + soy.$$escapeHtml("") + '/download/resources/com.atlassian.bamboo.plugins.branchinator:branchinator-resources/images/loading.gif\' /></div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderBigSpinner.soyTemplateName = 'bamboo.plugins.branchinator.renderBigSpinner';
}


bamboo.plugins.branchinator.renderSmallSpinner = function(opt_data, opt_ignored) {
  return '<div class="smallSpinner">' + aui.icons.icon({icon: 'wait'}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderSmallSpinner.soyTemplateName = 'bamboo.plugins.branchinator.renderSmallSpinner';
}


bamboo.plugins.branchinator.renderCommitsDialog = function(opt_data, opt_ignored) {
  var output = '<table class="aui aui-zebra commits-table"><colgroup><col width="30%"/><col width="100px"/><col width=""/></colgroup><thead><tr><th>' + soy.$$escapeHtml("Author") + '</th><th>' + soy.$$escapeHtml("Commit") + '</th><th>' + soy.$$escapeHtml("Message") + '</th></tr></thead><tbody>';
  var commitList283 = opt_data.commits;
  var commitListLen283 = commitList283.length;
  for (var commitIndex283 = 0; commitIndex283 < commitListLen283; commitIndex283++) {
    var commitData283 = commitList283[commitIndex283];
    output += '<tr class="commit"><td><img src="' + soy.$$escapeHtml(commitData283.authorGravatarUrl) + '"/><span style="margin-left:5px">' + soy.$$escapeHtml(commitData283.authorName) + '</span></td><td class="revision">' + ((commitData283.commitUrl) ? '<a href="' + soy.$$escapeHtml(commitData283.commitUrl) + '" class="revision-id" title="' + soy.$$escapeHtml("View change set in web repository viewer") + '">' + soy.$$escapeHtml(commitData283.hash) + '</a>' : '<span class="revision-id">' + soy.$$escapeHtml(commitData283.hash) + '</span>') + '</td><td colspan="4">' + soy.$$escapeHtml(commitData283.message) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderCommitsDialog.soyTemplateName = 'bamboo.plugins.branchinator.renderCommitsDialog';
}


bamboo.plugins.branchinator.renderIntegrationsView = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml("Jira issues") + '</h2><div id="jiraIssuesContainer"></div><h2>' + soy.$$escapeHtml("Pull requests") + '</h2><div id="pullRequestsContainer"></div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderIntegrationsView.soyTemplateName = 'bamboo.plugins.branchinator.renderIntegrationsView';
}


bamboo.plugins.branchinator.renderIntegrationsTableEmptyView = function(opt_data, opt_ignored) {
  return '<td>' + ((! opt_data.fetched) ? bamboo.plugins.branchinator.renderBigSpinner(null) : (opt_data.isFetchError) ? soy.$$filterNoAutoescape(opt_data.fetchErrorContent) : '<p>' + soy.$$escapeHtml(opt_data.emptyText) + '</p>') + '</td>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderIntegrationsTableEmptyView.soyTemplateName = 'bamboo.plugins.branchinator.renderIntegrationsTableEmptyView';
}


bamboo.plugins.branchinator.renderJiraIssuesTableView = function(opt_data, opt_ignored) {
  return '<table class="aui jiraIssuesTable"><tbody></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderJiraIssuesTableView.soyTemplateName = 'bamboo.plugins.branchinator.renderJiraIssuesTableView';
}


bamboo.plugins.branchinator.renderJiraIssueTableRowView = function(opt_data, opt_ignored) {
  return '<td class="jiraIssueInfo">' + ((opt_data.jiraIssue.issueLink != null) ? '<a href="' + soy.$$escapeHtml(opt_data.jiraIssue.issueLink) + '" target="_blank" data-bamboo-analytics-event="' + soy.$$escapeHtml(opt_data.jiraIssueDetailsAnalyticsData) + '">' : '') + '<img src="' + soy.$$escapeHtml(opt_data.jiraIssue.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.jiraIssue.iconAltText) + '"/><span class="jiraIssueKey">' + soy.$$escapeHtml(opt_data.jiraIssue.key) + '</span>' + ((opt_data.jiraIssue.issueLink != null) ? '</a>' : '') + ((opt_data.jiraIssue.summary != null) ? '<span class="jiraIssueSummary"> - ' + soy.$$escapeHtml(opt_data.jiraIssue.summary) + '</span>' : '') + ((opt_data.jiraIssue.status != null) ? '<span class="jiraIssueStatusLozenge">' + aui.lozenges.lozenge({type: opt_data.jiraIssue.lozengeType, text: opt_data.jiraIssue.status, isSubtle: true}) + '</span>' : '') + '</td>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderJiraIssueTableRowView.soyTemplateName = 'bamboo.plugins.branchinator.renderJiraIssueTableRowView';
}


bamboo.plugins.branchinator.renderPullRequestsTableView = function(opt_data, opt_ignored) {
  return '<table class="aui pullRequestsTable"><tbody></tbody>' + ((opt_data.createPullRequestUrl) ? '<tfoot><tr><td><a href="' + soy.$$escapeHtml(opt_data.createPullRequestUrl) + '" target="_blank" class="aui-button" data-bamboo-analytics-event="' + soy.$$escapeHtml(opt_data.createPullRequestAnalyticsData) + '">' + soy.$$escapeHtml("Create pull request") + '</a></td></tr></tfoot>' : '') + '</table>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderPullRequestsTableView.soyTemplateName = 'bamboo.plugins.branchinator.renderPullRequestsTableView';
}


bamboo.plugins.branchinator.renderPullRequestTableRowView = function(opt_data, opt_ignored) {
  var output = '';
  var hasConflicts__soy374 = opt_data.pullRequest.mergeabilityKnown && opt_data.pullRequest.conflicted;
  output += '<td class="prDetails"><div><a class="prLink" href="' + soy.$$escapeHtml(opt_data.pullRequest.url) + '" target="_blank" data-bamboo-analytics-event="' + soy.$$escapeHtml(opt_data.pullRequestDetailsAnalyticsData) + '">' + soy.$$escapeHtml(opt_data.pullRequest.title) + '</a><span class="prTargetBranchWrapper"><span class="prTargetBranchIcon">' + aui.icons.icon({useIconFont: true, icon: 'devtools-arrow-right'}) + '</span><span class="revision-id prTargetBranch">' + soy.$$escapeHtml(opt_data.pullRequest.toRef.displayId) + '</span></span>' + ((hasConflicts__soy374) ? '<span class="prAdditionalInfo">' + aui.lozenges.lozenge({type: 'current', title: "This pull request has conflicts that need to be resolved before it can be merged.", text: "Conflict"}) + '</span>' : '') + '</div></td>';
  return output;
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderPullRequestTableRowView.soyTemplateName = 'bamboo.plugins.branchinator.renderPullRequestTableRowView';
}


bamboo.plugins.branchinator.renderPullRequestsNotSupportedInfo = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Viewing pull requests is only available for Bitbucket Server repositories.") + '</p><p><a target="_blank" href="' + soy.$$escapeHtml("http://docs.atlassian.com/bamboo/docs-0610/") + soy.$$escapeHtml("Using+the+branch+status+page") + '">' + soy.$$escapeHtml("Learn more") + '</a></p>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderPullRequestsNotSupportedInfo.soyTemplateName = 'bamboo.plugins.branchinator.renderPullRequestsNotSupportedInfo';
}


bamboo.plugins.branchinator.renderOauthError = function(opt_data, opt_ignored) {
  return '<div class="oauthErrorContainer">' + aui.message.info({titleContent: '' + soy.$$escapeHtml(AJS.format("{0} - approval required",opt_data.instanceName)), content: '<p>' + soy.$$escapeHtml(opt_data.explanation) + '</p><p><a class="oauth-approve" href="' + soy.$$escapeHtml(opt_data.redirectUrl) + '" target="_blank">' + soy.$$escapeHtml("Login \x26 approve") + '</a></p>'}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.branchinator.renderOauthError.soyTemplateName = 'bamboo.plugins.branchinator.renderOauthError';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/regions/header-region.js' */
define("branchinator/regions/header-region",["marionette","jquery"],function(b,a){return b.Region.extend({attachHtml:function(c){var e=a("section#content");var d=a(c.el).attr("id");e.find("#"+d).remove();e.prepend(c.el);this.$el.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/messages-view.js' */
define("branchinator/views/layout/messages-view",["aui/flag","backbone","branchinator/utils/radio-utils","underscore"],function(c,d,b,a){return Marionette.ItemView.extend({className:function(){return this.getOption("hasRepositories")?"hasRepositories":""},template:false,openedFlags:[],onShow:function(){b.listenTo("message:info",a.bind(this.showMessage,this,"info"));b.listenTo("message:warn",a.bind(this.showMessage,this,"warning"));b.listenTo("message:error",a.bind(this.showMessage,this,"error"));b.listenTo("message:success",a.bind(this.showMessage,this,"success"));b.listenTo("message:clear",this.clearMessage.bind(this))},showMessage:function(g,h){var f=typeof h==="object"?h:{body:h};if(f.clear){this.clearMessage()}var i=f.close||"manual";if(i==="never"){var e=aui.message[g];this.$el.append(e({titleContent:f.title||"",content:f.body||""}))}else{this.openedFlags.push(new c({type:g,close:i,title:f.title||"",body:f.body||""}))}},clearMessage:function(){this.$el.empty();this.openedFlags.forEach(function(e){e.close()});this.openedFlags=[]}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/models/branch-selection-model.js' */
define("branchinator/models/branch-selection-model",["backbone","underscore"],function(b,a){return b.Model.extend({defaults:{repo:{id:0,name:""},branch:{repoId:0,repoName:"",id:"",branchName:""}},getRepoId:function(){return this.get("repo").id},getRepoName:function(){return this.get("repo").name},getBranchName:function(){return this.get("branch").branchName},clearRepo:function(){if(this.get("repo").id>0){this.clearBranch();this.set("repo",this.defaults.repo);this.trigger("repo:cleared")}},selectRepo:function(e,d){var c={id:e,name:d};if(!a.isEqual(this.get("repo"),c)){this.clearBranch();this.set("repo",c);this.trigger("repo:selected",this.get("repo"))}},clearBranch:function(){if(this.get("branch").branchName){this.set("branch",this.defaults.branch);this.trigger("branch:cleared",this.get("repo"))}},selectBranch:function(d,f,c){var e={repoId:d,repoName:f,id:c,branchName:c};if(!a.isEqual(this.get("branch"),e)){this.set("repo",{id:d,name:f});this.set("branch",e);this.trigger("branch:selected",{repo:this.get("repo"),branch:this.get("branch")})}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/builds-view.js' */
define("branchinator/views/layout/content/builds-view",["branchinator/collections/builds-collection","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","branchinator/views/layout/content/builds/add-plans-view","branchinator/views/layout/content/builds/builds-table-view","jquery","marionette","util/ajax"],function(c,g,a,i,e,b,f,h){var d=WRM.data.claim("com.atlassian.bamboo.plugins.branchinator:branchinator-resources.builds-sort-orderings");return f.LayoutView.extend({regions:{addPlans:"#addPlansContainer",buildsTable:"#buildsTableContainer"},ui:{sortOrderSelect:"#buildsSortOrderSelect"},events:{"change @ui.sortOrderSelect":"onSortOrderChanged"},modelEvents:{"repo:cleared repo:selected branch:cleared":"onBranchCleared","branch:selected":"onBranchSelected"},template:function(){return bamboo.plugins.branchinator.renderBuildsView({buildsSortOrderings:d})},showBuildsTable:function(){this.buildsTable.show(new e({collection:c.forRepositoryBranch(this.model.getRepoId(),this.model.getBranchName(),this.ui.sortOrderSelect.val())}))},saveSortOrderForUser:function(){var k="branch.builds.sort.order";var j={property:k,value:this.ui.sortOrderSelect.val()};return h({url:g.getRestUrl("config/user/{0}",k),type:"PUT",data:JSON.stringify(j),contentType:"application/json",dataType:"json"})},onRender:function(){this.ui.sortOrderSelect.auiSelect2({minimumResultsForSearch:Infinity})},onShow:function(){this.addPlans.show(new i({model:this.model}))},onChildviewBuildAdded:function(){if(this.buildsTable.currentView){this.buildsTable.currentView.fetchCollection()}},onBranchSelected:function(){this.showBuildsTable()},onBranchCleared:function(){this.buildsTable.reset()},onSortOrderChanged:function(){this.saveSortOrderForUser();if(this.buildsTable.currentView){this.showBuildsTable()}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/builds/add-plans-view.js' */
define("branchinator/views/layout/content/builds/add-plans-view",["backbone","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","jquery","marionette"],function(e,a,c,b,d){return d.ItemView.extend({ui:{input:"#addPlansSelect",addButton:"#addPlansButton"},events:{"click @ui.addButton":"onAddButtonClicked"},template:function(){return bamboo.plugins.branchinator.renderAddPlansView()},onRender:function(){this.ui.input.auiSelect2({placeholder:"Add plans",minimumInputLength:0,multiple:true,ajax:{url:function(){return a.getRestUrl("builds/available?repoId={0}&branchName={1}",this.model.get("repo").id,encodeURIComponent(this.model.get("branch").branchName))}.bind(this),dataType:"json",data:function(f){return{searchTerm:f}},results:function(f){return{results:f}},cache:false},id:function(f){return f.planKey},formatResult:function(f){return bamboo.plugins.branchinator.renderBuildName({planName:f.buildName,projectName:f.project.name})},formatSelection:function(f){return f.buildName}})},onAddButtonClicked:function(h){h.preventDefault();var f=[];var g=this.ui.input.auiSelect2("val");this.ui.input.auiSelect2("val","");this.ui.input.auiSelect2("disable");this.ui.addButton.prop("disabled",true);g.forEach(function(i){f.push(this.addPlan(i))}.bind(this));b.when.apply(b,f).fail(function(){c.trigger("message:error","An error occurred - not all plans have been added successfully.")}).always(function(){this.ui.input.auiSelect2("enable");this.ui.addButton.prop("disabled",false)}.bind(this))},addPlan:function(g){var f=this.model.get("branch").branchName;return b.ajax({url:a.getRestUrl("actions/create?planKey={0}&branchName={1}",g,encodeURIComponent(f)),type:"POST",contentType:"application/json",dataType:"json"}).done(function(h){AJS.trigger("analyticsEvent",{name:"branch.view.action.plan.branch.created"});this.triggerMethod("build:added",h.branchKey)}.bind(this))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/utils/radio-utils.js' */
define("branchinator/utils/radio-utils",["backbone","underscore"],function(c,a){var b=c.Wreqr.radio.channel("branchinator");return Object.freeze({trigger:function(d,e){b.vent.trigger.apply(b.vent,Array.prototype.slice.call(arguments))},listenTo:function(d,f,e){b.vent.on(d,f,e)},stopListening:function(d,f,e){b.vent.off(d,f,e)},request:function(d){return b.reqres.request(d)},respondTo:function(f,d){var e=a.isFunction(d)?d:function(){return d};b.reqres.setHandler(f,e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/integrations/jira-issues-table-view.js' */
define("branchinator/views/layout/content/integrations/jira-issues-table-view",["branchinator/views/layout/content/integrations/base-integrations-table-view","marionette"],function(a,d){var c=JSON.stringify({name:"branch.view.action.jiraIssue.details.clicked"});var b=d.ItemView.extend({tagName:"tr",template:function(e){return bamboo.plugins.branchinator.renderJiraIssueTableRowView({jiraIssue:e,jiraIssueDetailsAnalyticsData:c})}});return a.extend({childView:b,template:function(){return bamboo.plugins.branchinator.renderJiraIssuesTableView()},getFetchErrorContent:function(e){if(e.errorKey==="noJiraApplicationLink"){return "No Jira server is linked with Bamboo."}else{return null}},getOauthRequestExplanation:function(){return "Bamboo requires your approval before it can gather information about Jira issues."},getEmptyText:function(){return "No Jira issues found for this branch."}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/integrations/base-integrations-table-view.js' */
define("branchinator/views/layout/content/integrations/base-integrations-table-view",["branchinator/behaviors/fetch-state-aware-behavior","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","marionette"],function(d,a,c,e){var b=e.ItemView.extend({tagName:"tr",className:function(){return this.getOption("isFetchError")?"fetchError":"noResults"},template:function(){return bamboo.plugins.branchinator.renderIntegrationsTableEmptyView({emptyText:this.getOption("emptyText"),fetched:this.getOption("isFetched"),isFetchError:this.getOption("isFetchError"),fetchErrorContent:this.getOption("fetchErrorContent")})}});return e.CompositeView.extend({getFetchErrorContent:function(f){throw new Error("requires implementation")},getOauthRequestExplanation:function(){throw new Error("requires implementation")},getEmptyText:function(){throw new Error("requires implementation")},childViewContainer:"tbody",emptyView:b,emptyViewOptions:function(){return{emptyText:this.getEmptyText(),isFetchError:this.isFetchError,fetchErrorContent:this.fetchErrorContent,isFetched:this.isFetched()}},collectionEvents:{sync:"onCollectionSync",error:"onCollectionError"},behaviors:{FetchStateAware:{behaviorClass:d}},isFetchError:false,fetchErrorContent:"",initialize:function(){c.listenTo("applinks.auth.completion",this.onOauthDanceComplete,this);this.fetchCollection()},fetchCollection:function(){clearTimeout(this.fetchTimer);this.collection.fetch()},onBeforeDestroy:function(){c.stopListening(null,null,this)},onCollectionSync:function(g,f){clearTimeout(this.fetchTimer);this.fetchTimer=setTimeout(this.fetchCollection.bind(this),30000);this.isFetchError=false;this.render()},onCollectionError:function(g,f){clearTimeout(this.fetchTimer);this.isFetchError=true;this.fetchTimer=setTimeout(this.fetchCollection.bind(this),30000);this.collection.reset();var h=f.responseJSON||{};if(h.authenticationInstanceName){this.fetchErrorContent=bamboo.plugins.branchinator.renderOauthError({instanceName:h.authenticationInstanceName,explanation:this.getOauthRequestExplanation(),redirectUrl:h.authenticationRedirectUrl})}else{this.fetchErrorContent=this.getFetchErrorContent(h)}if(!this.fetchErrorContent){this.fetchErrorContent=aui.message.error({content:a.getErrorFromResponse(f)})}this.render()},onInitialFetchComplete:function(){if(this.collection.isEmpty()){this.render()}},onOauthDanceComplete:function(f,h,g){if(g){this.isFetchError=false;this.resetFetchState();this.render();this.fetchCollection()}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/dialogs/build-commits-dialog.js' */
define("branchinator/dialogs/build-commits-dialog",["backbone","branchinator/collections/build-commits-collection","underscore","widget/dialog"],function(d,c,b,a){return a.extend({defaultSettings:{width:800,height:400,buttons:[{id:"cancel",label:"Close",type:"link",cssClass:"close-commits-dialog"}]},initialize:function(e){var f={header:AJS.format("Commits for latest build of {0}",e.planKey),content:bamboo.plugins.branchinator.renderBigSpinner()};a.prototype.initialize.call(this,b.defaults(f,this.defaultSettings));this.collection=c.forPlanKey(e.planKey);this.collection.on("sync",this.onCollectionSync,this);this.collection.on("error",this.onCollectionError,this);this.collection.fetch()},onCollectionSync:function(){this.$dialogContent.html(bamboo.plugins.branchinator.renderCommitsDialog({commits:this.collection.toJSON()}))},onCollectionError:function(){this.$dialogContent.html("An error occurred while trying to obtain most recent commits.")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content-view.js' */
define("branchinator/views/layout/content-view",["branchinator/collections/recent-branches-collection","branchinator/utils/radio-utils","branchinator/views/layout/content/builds-view","branchinator/views/layout/content/integrations-view","branchinator/views/layout/content/landing-page-view","jquery","marionette"],function(f,d,b,e,a,c,g){return g.LayoutView.extend({regions:{landingPage:"#landingPageContainer",builds:"#buildsContainer",integrations:"#integrationsContainer"},modelEvents:{"repo:cleared repo:selected branch:cleared":"showLandingPage","branch:selected":"showContent"},template:function(){return bamboo.plugins.branchinator.renderContentView()},onShow:function(){this.$el.hide();this.landingPage.show(new a({model:this.model,collection:new f()}));this.builds.show(new b({model:this.model}));this.showLandingPage();this.$el.show()},showLandingPage:function(){this.builds.$el.hide();this.landingPage.$el.show();this.integrations.reset()},showContent:function(){this.builds.$el.show();this.landingPage.$el.hide();this.integrations.show(new e({model:this.model}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/collections/build-commits-collection.js' */
define("branchinator/collections/build-commits-collection",["branchinator/utils/branchinator-utils","backbone"],function(a,b){return b.Collection.extend({},{forPlanKey:function(c){return new this([],{url:a.getRestUrl("commits?planKey={0}",c)})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/routers/router.js' */
define("branchinator/routers/router",["backbone","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","util/uri-utils"],function(e,b,d,c){var a=WRM.data.claim("com.atlassian.bamboo.plugins.branchinator:branchinator-resources.known-navigation-sources");return e.Router.extend({routes:{"(/)":"selectNone",":repoId/:repoName(/)":"selectRepo",":repoId/:repoName/:branchName(/)":"selectRepoAndBranch"},initialize:function(f){this.model=f.model;this.triggerAnalytics()},triggerAnalytics:function(){var g=c.queryToObject();var f=g.source&&this.isSourceKnown(g.source)?g.source:"direct";AJS.trigger("analyticsEvent",{name:"branch.view.page.opened",data:{source:f}})},isSourceKnown:function(f){return a.indexOf(f)>-1},removeQueryParams:function(){if(window.location.search){var f=e.history.getFragment();this.navigate(f+"/clear",{replace:true});this.navigate(f,{replace:true})}},selectNone:function(){this.removeQueryParams();this.model.clearRepo()},selectRepo:function(f,g){this.removeQueryParams();this.model.selectRepo(f,b.slashSafeUrlDecode(g));this.model.clearBranch()},selectRepoAndBranch:function(g,h,f){this.removeQueryParams();this.model.selectBranch(g,b.slashSafeUrlDecode(h),b.slashSafeUrlDecode(f))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/landing-page-view.js' */
define("branchinator/views/layout/content/landing-page-view",["backbone","branchinator/behaviors/fetch-state-aware-behavior","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","branchinator/views/layout/content/landing-page-recent-branch-view","jquery","marionette"],function(h,f,a,e,b,d,g){var c=g.ItemView.extend({tagName:"li",template:function(){return bamboo.plugins.branchinator.renderLandingPageRecentBranchesEmptyView({fetched:this.getOption("isFetched")()})}});return g.CompositeView.extend({childView:b,childViewContainer:"ul.branchSuggestions",emptyView:c,emptyViewOptions:function(){return{isFetched:this.isFetched}},modelEvents:{"repo:cleared repo:selected branch:cleared branch:selected":"fetchCollection"},childEvents:{"recent:branch:selected":"onRecentBranchSelected"},behaviors:{FetchStateAware:{behaviorClass:f}},template:function(){return bamboo.plugins.branchinator.renderLandingPageView()},initialize:function(){this.fetchCollection()},fetchCollection:function(){this.collection.fetch({reset:true})},onInitialFetchComplete:function(){if(this.collection.isEmpty()){this.render()}},onRecentBranchSelected:function(i){var j=i.model;this.model.selectBranch(j.get("repoId"),j.get("repoName"),j.get("branchName"))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/integrations-view.js' */
define("branchinator/views/layout/content/integrations-view",["branchinator/collections/jira-issues-collection","branchinator/collections/pull-requests-collection","branchinator/views/layout/content/integrations/jira-issues-table-view","branchinator/views/layout/content/integrations/pull-requests-table-view","marionette"],function(d,c,a,b,e){return e.LayoutView.extend({regions:{jiraIssues:"#jiraIssuesContainer",pullRequests:"#pullRequestsContainer"},template:function(){return bamboo.plugins.branchinator.renderIntegrationsView()},onShow:function(){this.jiraIssues.show(new a({model:this.model,collection:d.forRepositoryBranch(this.model.getRepoId(),this.model.getBranchName())}));this.pullRequests.show(new b({model:this.model,collection:c.forRepositoryBranch(this.model.getRepoId(),this.model.getBranchName())}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/application.js' */
define("branchinator/application",["backbone","branchinator/models/branch-selection-model","branchinator/routers/router","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","branchinator/views/layout-view","jquery","marionette"],function(h,g,e,a,c,d,b,f){return f.Application.extend({onStart:function(i){var j=new f.RegionManager({regions:{main:i.el}});this.options=i;this.mainRegion=j.get("main");this.branchSelection=new g();this.proxyJqueryEvent(b(window),"applinks.auth.completion");this.initializeNavigation();this.showPageLayout();this.initializeRouting();this.displayMessages()},proxyJqueryEvent:function(j,i){j.on(i,function(){var k=Array.prototype.slice.call(arguments);k.unshift(i);c.trigger.apply(c,k)})},initializeNavigation:function(){this.listenTo(this.branchSelection,"repo:cleared",function(){h.history.navigate()});this.listenTo(this.branchSelection,"repo:selected branch:cleared",function(i){h.history.navigate(a.getRepoUrlPath(i.id,i.name))});this.listenTo(this.branchSelection,"branch:selected",function(i){h.history.navigate(a.getRepoAndBranchUrlPath(i.repo.id,i.repo.name,i.branch.branchName))})},showPageLayout:function(){this.mainRegion.show(new d({model:this.branchSelection,hasRepositories:this.options.hasBranchableRepos}))},initializeRouting:function(){new e({model:this.branchSelection});h.history.start({pushState:true,root:a.getApplicationRootUrl()})},displayMessages:function(){if(!this.options.hasLinkedRepos){c.trigger("message:info",{body:"You can only view branches of linked repositories. There are no linked repositories configured on this Bamboo server, or you do not have access to any.",close:"never"})}else{if(!this.options.hasBranchableRepos){c.trigger("message:info",{body:"We could not find any linked repositories that support branches.",close:"never"})}}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/models/build-model.js' */
define("branchinator/models/build-model",["backbone","branchinator/utils/branchinator-utils","util/ajax"],function(c,a,b){return c.Model.extend({idAttribute:"planKey",isBuildInProgress:function(){return this.get("numberOfCurrentlyBuildingPlans")>0},isBuildSuccessful:function(){return this.get("buildState")==="Successful"},isBuildFailed:function(){return this.get("buildState")==="Failed"},isJustAdded:function(){return this.get("justAdded")===true},stopBuild:function(){return b({url:a.getRestUrl("actions/stop?planKey={0}",this.get("planKey")),type:"POST"})},startBuild:function(){return b({url:a.getRestUrl("actions/start?planKey={0}",this.get("planKey")),type:"POST"})},resumeBuild:function(){return b({url:a.getRestUrl("actions/resume?planKey={0}",this.get("planKey")),type:"POST"})},deleteBuild:function(){return b({url:a.getRestUrl("actions/delete?planKey={0}&branchName={1}",this.get("planKey"),encodeURIComponent(this.get("branchName"))),type:"DELETE"})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout-view.js' */
define("branchinator/views/layout-view",["branchinator/regions/header-region","branchinator/utils/radio-utils","branchinator/views/layout/content-view","branchinator/views/layout/header-view","branchinator/views/layout/messages-view","marionette"],function(d,c,f,a,b,e){return e.LayoutView.extend({regions:{header:{selector:"#headerContainer",regionClass:d},messages:"#messagesContainer",content:"#contentContainer"},modelEvents:{"repo:cleared repo:selected branch:cleared branch:selected":"clearErrorMessages"},initialize:function(g){this.options=g},template:function(){return bamboo.plugins.branchinator.renderLayoutView()},onShow:function(){var g=this.getOption("hasRepositories");this.messages.show(new b({hasRepositories:g}));this.header.show(new a({model:this.model,hasRepositories:g}));if(g){this.content.show(new f({model:this.model}))}},clearErrorMessages:function(){c.trigger("message:clear")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/builds/builds-table-view.js' */
define("branchinator/views/layout/content/builds/builds-table-view",["branchinator/behaviors/fetch-state-aware-behavior","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","branchinator/views/layout/content/builds/builds-table-row-view","marionette"],function(e,b,d,c,f){var a=f.ItemView.extend({tagName:"tr",className:function(){return this.getOption("isFetchError")?"fetchError":"noResults"},template:function(){return bamboo.plugins.branchinator.renderBuildsTableEmptyView({fetched:this.getOption("isFetched"),isFetchError:this.getOption("isFetchError"),fetchErrorContent:this.getOption("fetchErrorContent")})}});return f.CompositeView.extend({id:"enabledBuilds",childView:c,childViewContainer:"tbody",emptyView:a,emptyViewOptions:function(){return{isFetchError:this.isFetchError,fetchErrorContent:this.fetchErrorContent,isFetched:this.isFetched()}},collectionEvents:{sync:"onCollectionSync",error:"onCollectionError"},behaviors:{FetchStateAware:{behaviorClass:e}},isFetchError:false,fetchErrorContent:"",template:function(){return bamboo.plugins.branchinator.renderBuildsTableView()},initialize:function(){this.fetchCollection()},fetchCollection:function(){clearTimeout(this.fetchTimer);this.collection.fetch({reset:true})},updateFavicon:function(){var g;if(this.collection.anyBuildInProgress()){g="/images/iconsv4/icon-building-static-64x64.png"}else{if(this.collection.anyBuildFailed()){g="/images/iconsv4/icon-build-failed-64x64.png"}else{if(this.collection.anyBuildSuccessful()){g="/images/iconsv4/icon-build-successful-64x64.png"}else{g="/images/icons/favicon.png"}}}Piecon.setFavicon(BAMBOO.staticResourcePrefix+g)},onCollectionSync:function(){clearTimeout(this.fetchTimer);this.fetchTimer=setTimeout(this.fetchCollection.bind(this),10000);this.updateFavicon();if(this.isFetchError){this.isFetchError=false;this.render()}},onCollectionError:function(h,g){clearTimeout(this.fetchTimer);this.isFetchError=true;this.fetchTimer=setTimeout(this.fetchCollection.bind(this),10000);this.collection.reset();this.fetchErrorContent=aui.message.error({content:b.getErrorFromResponse(g)});this.render()},onInitialFetchComplete:function(){if(this.collection.isEmpty()){this.render()}},onChildviewBuildStopped:function(){this.fetchCollection()},onChildviewBuildStarted:function(){this.fetchCollection()},onChildviewBuildResumed:function(){this.fetchCollection()},onChildviewBuildDeleted:function(g){g.hideWithHighlight().done(this.fetchCollection.bind(this))},onAddChild:function(g){if(this.isFetched()&&g instanceof c&&g.model.isJustAdded()){g.showWithHighlight()}},onBeforeDestroy:function(){clearTimeout(this.fetchTimer)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/collections/builds-collection.js' */
define("branchinator/collections/builds-collection",["backbone","branchinator/utils/branchinator-utils","branchinator/models/build-model","underscore"],function(d,a,c,b){return d.Collection.extend({model:c,initialize:function(){this.saveCurrentIds();this.on("request",this.saveCurrentIds)},parse:function(e){return e.builds.map(function(g){var f=g[c.prototype.idAttribute];if(b.indexOf(this._previousIds,f,true)===-1){g.justAdded=true}return g},this)},anyBuildInProgress:function(){return this.some(function(e){return e.isBuildInProgress()})},anyBuildSuccessful:function(){return this.some(function(e){return e.isBuildSuccessful()})},anyBuildFailed:function(){return this.some(function(e){return e.isBuildFailed()})},saveCurrentIds:function(){this._previousIds=b.pluck(this.models,"id").sort()}},{forRepositoryBranch:function(f,e,g){return new this([],{url:a.getRestUrl("builds?repoId={0}&branchName={1}&sortBy={2}",f,encodeURIComponent(e),g||"")})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/views/layout/content/builds/builds-table-row-view.js' */
define("branchinator/views/layout/content/builds/builds-table-row-view",["branchinator/dialogs/build-commits-dialog","branchinator/dialogs/delete-build-confirmation-dialog","branchinator/utils/branchinator-utils","jquery","marionette"],function(a,d,b,c,e){return e.ItemView.extend({tagName:"tr",className:function(){return"plan-"+this.model.get("planKey")},events:{"click .stopBuild":"onStopBuildClicked","click .startBuild":"onStartBuildClicked","click .resumeBuild":"onResumeBuildClicked","click .editBuild":"onEditBuildClicked","click .deleteBuild":"onDeleteBuildClicked","click .commitsLink":"onCommitsLinkClicked"},modelEvents:{change:"render"},template:function(f){return bamboo.plugins.branchinator.renderBuildsTableRowView({build:f})},onStopBuildClicked:function(f){f.preventDefault();this.model.stopBuild().done(function(){this.trigger("build:stopped",this.model.get("planKey"));AJS.trigger("analyticsEvent",{name:"branch.view.action.build.stopped"})}.bind(this))},onStartBuildClicked:function(f){f.preventDefault();this.model.startBuild().done(function(){this.trigger("build:started",this.model.get("planKey"));AJS.trigger("analyticsEvent",{name:"branch.view.action.build.started"})}.bind(this))},onResumeBuildClicked:function(f){f.preventDefault();this.model.resumeBuild().done(function(){this.trigger("build:resumed",this.model.get("planKey"));AJS.trigger("analyticsEvent",{name:"branch.view.action.plan.branch.enabled"})}.bind(this))},onEditBuildClicked:function(f){f.preventDefault();AJS.trigger("analyticsEvent",{name:"branch.view.action.build.configured"});window.location.href=c(f.currentTarget).attr("href")},onDeleteBuildClicked:function(f){f.preventDefault();new d({callback:this.deleteBuild.bind(this)})},onCommitsLinkClicked:function(f){f.preventDefault();AJS.trigger("analyticsEvent",{name:"branch.view.action.commits.show"});new a({planKey:this.model.get("planKey")})},deleteBuild:function(){this.model.deleteBuild().done(function(){this.trigger("build:deleted",this.model.get("planKey"));AJS.trigger("analyticsEvent",{name:"branch.view.action.plan.branch.deleted"})}.bind(this))},showWithHighlight:function(){return c.Deferred(function(f){this.$el.addClass("animateHighlight");this.$el.one(b.getAnimationCompletedEventName(),f.resolve)}.bind(this)).promise()},hideWithHighlight:function(){return c.Deferred(function(f){this.$el.addClass("animateFadeOut");this.$el.one(b.getAnimationCompletedEventName(),function(){this.$el.hide();f.resolve()}.bind(this))}.bind(this)).promise()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/models/pull-request-model.js' */
define("branchinator/models/pull-request-model",["backbone","branchinator/utils/branchinator-utils","jquery"],function(c,a,b){return c.Model.extend({bambooRepoIdAttribute:"bambooRepoId",getId:function(){return this.get("id")},getBambooRepoId:function(){return this.get(this.bambooRepoIdAttribute)},getUrl:function(){return this.get("url")},getMergeabilityState:function(){return{canMerge:this.get("canMerge"),conflicted:this.get("conflicted"),mergeabilityKnown:this.get("mergeabilityKnown")}},setMergeabilityState:function(d,e){this.set({canMerge:d,conflicted:e,mergeabilityKnown:true})},fetchMergeabilityState:function(){return b.ajax({url:a.getRestUrl("pullRequest/canMerge?repoId={0}&pullRequestId={1}",this.getBambooRepoId(),this.getId()),context:this,type:"GET",dataType:"json"}).done(function(d){this.setMergeabilityState(d.canMerge,d.conflicted)})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/dialogs/delete-build-confirmation-dialog.js' */
define("branchinator/dialogs/delete-build-confirmation-dialog",["backbone","branchinator/utils/branchinator-utils","branchinator/utils/radio-utils","underscore","widget/dialog"],function(e,b,d,c,a){return a.extend({defaultSettings:{width:600,height:300,closeOnOutsideClick:true,header:"Do you want to delete this branch build?",content:"This will irreversibly remove all build results and associated artifacts for this branch build.",buttons:[{id:"delete",label:"Delete",cssClass:"aui-button aui-button-primary confirm-delete-plan-branch"},{id:"cancel",label:"Cancel",type:"link",cssClass:"cancel-delete-plan-branch"}]},initialize:function(f){this.callback=f.callback;a.prototype.initialize.call(this,this.defaultSettings)},onButtonClick:function(f){a.prototype.onButtonClick.apply(this,arguments);if(f==="delete"){this.callback();this.dialog.remove()}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.branchinator:branchinator-resources', location = '/client/js/collections/jira-issues-collection.js' */
define("branchinator/collections/jira-issues-collection",["backbone","branchinator/models/jira-issue-model","branchinator/utils/branchinator-utils"],function(c,b,a){return c.Collection.extend({model:b},{forRepositoryBranch:function(e,d){return new this([],{url:a.getRestUrl("jiraIssues?repoId={0}&branchName={1}",e,encodeURIComponent(d))})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: "Other applications", content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics', location = 'browser-metrics-legacy.js' */
(function(){var a=window.BrowserMetrics||{};var b=window.WRM||{};a.isFunction=function(c){return !!(c&&c.constructor&&c.call&&c.apply)};a.isEnabled=function(){if(a.enabled===undefined){var c="com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy";a.enabled=a.isFunction(b.data)?b.data(c):b.data.claim(c)}return a.enabled};window.BrowserMetrics=a}());(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var f=5;var e=12000;var c=function(g){return Math.round(g)};var a=function(g){return Math.round(g*100)/100};var d=function(k){var h=(function(){var n=/^(\w+):\/\/([^\/]*)(.*)$/;return function(p){var o=p.match(n);if(!o){return{path:p}}return{scheme:o[1],host:o[2],path:o[3]}}}());var i=(function(){var n=["secureConnectionStart","requestStart","responseStart","responseEnd","domContentLoadedEventStart","domContentLoadedEventEnd","loadEventEnd"];return function(o){if(k.performance){var s=k.performance.timing;var p=s.navigationStart;if(p){for(var r=0;r<n.length;++r){var q=n[r];var t=s[q];if(t){o(q,t-p)}}}}}}());var g=(function(){var o=[{key:"LOGIN",pattern:/^\/login.*/i},{key:"J-DASH",pattern:/^\/secure\/dashboard\.jspa.*/i},{key:"J-ISSUE",pattern:/^\/browse\/\w+\-\w+.*/i},{key:"J-NAV",pattern:/^\/issues.*/i},{key:"J-RAPID",pattern:/secure\/rapidboard\.jspa/i},{key:"SD-AGENT",pattern:/^(\/\w+)?\/servicedesk\/agent\/.*/i},{key:"SD-CUSTOMER",pattern:/^(\/\w+)?\/servicedesk\/customer\/.*/i},{key:"C-DASH",pattern:/^\/wiki(\/)?(\?.*|#.*)?$/i},{key:"C-DASH",pattern:/^\/wiki\/dashboard\.action.*$/i},{key:"C-SPACE",pattern:/^\/wiki\/display\/\w+(\?.*|#.*)?$/i},{key:"C-PAGE",pattern:/^\/wiki\/display\/\w+\/.*/i},{key:"C-PAGE",pattern:/^\/wiki\/pages\/viewpage\.action.*/i},{key:"C-BLOG",pattern:/^\/wiki\/display\/~\w+\/\d+\/\d+\/\d+\/.*/i},{key:"C-EDITOR",pattern:/^\/wiki\/pages\/editpage\.action.*/i},{key:"C-CREATE",pattern:/^\/wiki\/pages\/createpage\.action.*/i}];return function n(){var r=h(k.location.href).path;for(var p=0;p<o.length;++p){var q=o[p];if(r.match(q.pattern)){return q.key}}return null}}());function j(){var n=g();if(n){i(function(p,r){var o="browser.metrics."+p,q={version:f,page:n,value:r>e?"x":Math.ceil((r)/100),rawValue:c(r)};AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(o,q):AJS.trigger("analyticsEvent",{name:o,data:q})})}}function m(){try{j()}catch(n){if(window.console){window.console.log("Error reporting browser metrics: "+n)}}}function l(){if(k.performance.timing.loadEventEnd){m()}else{setTimeout(l,1000)}}if(k.performance&&k.performance.timing){l()}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initPageLoad=d}}());(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var e=5;var d=12000;var a=function(f){return Math.round(f*100)/100};var c=function(g){var l={};function h(){return g.performance&&g.performance.now?g.performance.now():new Date().getTime()}function n(o){return o===Object(o)}function k(o){if(n(o)){return o.eventName+"."+o.eventType}else{return o}}function m(o){if(n(o)){return o.eventName}else{return o}}function j(o){if(n(o)){return o.eventType}else{return""}}function f(o){var p=k(o);l[p]=h()}function i(r,u){var v=k(r);if(!l[v]){throw ("Error logging browser metrics event end: no start event for key '"+v+"'")}var t=h()-l[v];l[v]=null;var o=m(r),q=j(r);var p="browser.metrics.e."+o+(u?"."+u:""),s={version:e,value:t>d?"x":Math.ceil((t)/100),rawValue:a(t),eventType:q};g.AJS.Analytics?g.AJS.Analytics.triggerPrivacyPolicySafeEvent(p,s):g.AJS.trigger("analyticsEvent",{name:p,data:s})}return{start:f,end:i}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initEvents=c}}());(function(){var a=window.BrowserMetrics||{};if(a.isEnabled()){if(Math.random()<0.1){window.ATL_PERF&&window.ATL_PERF.initPageLoad&&window.ATL_PERF.initPageLoad(window)}window.ATL_PERF&&window.ATL_PERF.initEvents&&(function(){window.BrowserMetrics=window.ATL_PERF.initEvents(window)}())}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml("Application Links") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml("Shortcuts") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}}) + '<script>\n                (function (NL) {\n                    var initialise = function () {\n                        new NL.SideBar({\n                            sidebarContents: \'#app-switcher\'\n                        });\n                    };\n                    if (NL.SideBar) {\n                        initialise();\n                    } else {\n                        NL.onInit = initialise;\n                    }\n                }(window.NL = (window.NL || {})));\n                window.NL.isUserAdmin = ' + soy.$$escapeHtml(false) + '<\/script>';
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true">' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(c,a){a.SideBar=function(d){var e=this;this.$sidebar=null;d=c.extend({sidebarContents:null},d);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(g,f){e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:f,name:g}))};this.getProjectData=function(){var f=c(".project-shortcut-dialog-trigger"),g=f.data("key"),h=f.data("entity-type");if(f.size()==0||!g||!h){c(".app-switcher-shortcuts").remove();return}var j,i;i=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+g,cache:false,data:{entityType:h},dataType:"json"});j=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+g,cache:false,data:{entityType:h},dataType:"json"});c.when(i,j).then(function(l,k){e.updateProjectShortcuts(l,k,{key:g,entityType:h,name:f.data("name"),avatarUrl:f.find("img").prop("src")})},e.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=c(d.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){c(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(f,h){var g=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+f,label:"Customize shortcuts",title:""}];if(e.entityMappings[h]){g.push({href:e.generateEntityLinksUrl(f,e.entityMappings[h]),label:"Manage product links",title:""})}e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:g}))};this.updateAppLinks=function(f){c(function(){e.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:f}));if(a.isUserAdmin){e.addApplicationsCog()}e.bindAnalyticsHandlers(e.getSidebar(),f)})};this.updateProjectShortcuts=function(i,g,h){var j=i[0].shortcuts,f=g[0].shortcuts;e.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:j.concat(f)}));if(a.isUserAdmin){e.addProjectShortcutsCog(h.key,h.entityType)}e.populateProjectHeader(h.name,h.avatarUrl);e.bindAnalyticsHandlers(e.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(f,g){if(g===e.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+g+"&key="+f}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+g+"/"+f}};this.showAppSwitcherError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.showProjectShortcutsError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.retryLoading=function(f){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();f&&f.stopPropagation()};this.bindAnalyticsHandlers=function(f,g){};this.getLinks();c(this.getProjectData);this.toggleSidebar=function(h){var i=e.getSidebar(),g=c("body"),f=c(window.document);if(!g.hasClass("app-switcher-open")){var k=c("#header");i.css("left",-i.width());i.parent("body").length||i.appendTo("body");b({data:i});i.animate({left:0},300);function j(l){var n=l.target&&c(l.target),m=l.keyCode;if(l.originalEvent===h.originalEvent){return}if(n&&!m&&!(n.closest(i).length||n.closest(k).length)&&h.which==1&&!(l.shiftKey||l.ctrlKey||l.metaKey)){e.toggleSidebar()}else{if(m===27){e.toggleSidebar()}}}f.on("click.appSwitcher",j);f.on("keydown.appSwitcher",j);f.on("scroll.appSwitcher",i,b)}else{f.off(".appSwitcher")}g.toggleClass("app-switcher-open")};c("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(f){var d=c(document).scrollTop(),g=c("#header"),e=(g.height()+g.offset().top)-d;if(e>=0){f.data.css({top:e,position:"fixed"})}else{f.data.css({top:0,left:0,position:"fixed"})}}if(a.onInit){a.onInit()}}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
(function(e,c){c.AppSwitcher=function(f){var g=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var h=this;this.$dropdown=null;f=e.extend({dropdownContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=e(f.dropdownContents)}return this.$dropdown};this.updateDropdown=function(i){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:i,showAdminLink:c.environment.isUserAdmin,adminLink:g}));h.bindAnalyticsHandlers(h.getDropdown(),i);if(window.NL.environment.isAppSuggestionAvailable){h.handleSuggestionApps(i)}})};this.bindAnalyticsHandlers=function(i,j){};this.handleSuggestionApps=function(k){var l=_.map(k,function(m){return m.applicationType.toLowerCase()});$suggestionApps=e("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");$suggestionApps.html(navlinks.templates.appswitcher_old.suggestionApps);var j=$suggestionApps.find(".suggestion-apps");var i=false;_.each(a,function(m){if(!_.contains(l,m.appName)){i=true;j.append(navlinks.templates.appswitcher_old.suggestionApp({appName:m.appName,appDesc:m.appDesc}))}});if(!i){return}e("#app-switcher").append($suggestionApps);e(".app-discovery-suggestion-app").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.user.select."+e(this).find("a").attr("id").toLowerCase()});window.open(e(this).find("a").attr("title"),"_blank")});e(".app-discovery-suggestion-app").hover(function(){e(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});e(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});d(b,"true");$suggestionApps.remove()})};this.showError=function(){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(h.retryLoading,h))})};this.retryLoading=function(i){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();i&&i.stopPropagation()};this.getLinks()};var b="key-no-thanks";var a=[{appName:"jira",appDesc:"Issue & Project Tracking Software"},{appName:"confluence",appDesc:"Collaboration and content sharing"},{appName:"bamboo",appDesc:"Continuous integration"}];var d=function(f,g){e.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:f,value:g})})};if(c.onInit){c.onInit()}}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape("Configure\x26hellip;") + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default'}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}}) + '<script>\n            (function (NL) {\n                var initialise = function () {\n                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.\n                    window.atlassian = window.atlassian || window.aui;\n                    new NL.AppSwitcher({\n                        dropdownContents: \'#app-switcher\'\n                    });\n                };\n                if (NL.AppSwitcher) {\n                    initialise();\n                } else {\n                    NL.onInit = initialise;\n                }\n            }(window.NL = (window.NL || {})));\n            window.NL.environment = ' + soy.$$escapeHtml({}) + ';<\/script>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  return '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.appName) + '" href="#" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.appName) + '-product-icon" title="https://www.atlassian.com/software/' + soy.$$escapeHtml(opt_data.appName) + '"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.appDesc) + '</div></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml("Try other Atlassian apps") + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml("Don\x27t show this again") + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/inline-dialog.js' */
(function(d){AJS.CustomInlineDialog=AJS.CustomInlineDialog||function(B,n,r,p){p=p||[];if(p.hasOwnProperty("getArrowAttributes")){getArrowAttributesDeprecationLogger()}if(p.hasOwnProperty("getArrowPath")){getArrowPathDeprecationLogger();if(p.hasOwnProperty("gravity")){getArrowPathWithGravityDeprecationLogger()}}if(p.hasOwnProperty("onTop")){onTopDeprecationLogger();if(p.onTop&&p.gravity===undefined){p.gravity="s"}}if(typeof n==="undefined"){n=String(Math.random()).replace(".","");if(d("#inline-dialog-"+n+", #arrow-"+n+", #inline-dialog-shim-"+n).length){throw"GENERATED_IDENTIFIER_NOT_UNIQUE"}}var z=d.extend(false,AJS.CustomInlineDialog.opts,p);if(z.gravity==="w"){z.offsetX=p.offsetX===undefined?10:p.offsetX;z.offsetY=p.offsetY===undefined?0:p.offsetY}var v=function(){return window.Raphael&&p&&(p.getArrowPath||p.getArrowAttributes)};var j;var q;var K;var u=false;var A=false;var I=false;var J;var x;var g=d('<div id="inline-dialog-'+n+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+n+'" class="aui-inline-dialog-arrow arrow"></div></div>');var m=d("#arrow-"+n,g);var G=g.find(".contents");if(!v()){g.find(".aui-inline-dialog-arrow").addClass("aui-css-arrow")}if(!z.displayShadow){G.addClass("aui-inline-dialog-no-shadow")}if(z.autoWidth){G.addClass("aui-inline-dialog-auto-width")}else{G.css("width",z.width+"px")}G.mouseover(function(O){clearTimeout(q);g.unbind("mouseover")}).mouseout(function(){E()});var D=function(){if(!j){j={popup:g,hide:function(){E(0)},id:n,show:function(){y()},persistent:z.persistent?true:false,reset:function(){function S(U,T){U.css(T.popupCss);if(v()){if(T.gravity==="s"){T.arrowCss.top-=d.browser.msie?10:9}if(!U.arrowCanvas){U.arrowCanvas=Raphael("arrow-"+n,16,16)}var V=z.getArrowPath,W=d.isFunction(V)?V(T):V;U.arrowCanvas.path(W).attr(z.getArrowAttributes())}else{m.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");if(T.gravity==="s"&&!m.hasClass("aui-bottom-arrow")){m.addClass("aui-bottom-arrow")}else{if(T.gravity==="n"){}else{if(T.gravity==="w"){m.addClass("aui-left-arrow")}else{if(T.gravity==="e"){m.addClass("aui-right-arrow")}}}}}m.css(T.arrowCss)}var P=AJS.$(window).height();var Q=Math.round(P*0.75);g.children(".aui-inline-dialog-contents").css("max-height",Q);var O=z.calculatePositions(g,x,J,z);if(O.hasOwnProperty("displayAbove")){displayAboveDeprecationLogger();O.gravity=O.displayAbove?"s":"n"}S(g,O);g.fadeIn(z.fadeTime,function(){});if(d.browser.msie&&~~(d.browser.version)<10){var R=d("#inline-dialog-shim-"+n);if(!R.length){d(g).prepend(d('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+n+'" frameBorder="0" src="javascript:false;"></iframe>'))}R.css({width:G.outerWidth(),height:G.outerHeight()})}}}}return j};var y=function(){if(g.is(":visible")){return}K=setTimeout(function(){if(!I||!A){return}z.addActiveClass&&d(B).addClass("active");u=true;if(!z.persistent){H()}AJS.CustomInlineDialog.current=D();d(document).trigger("showLayer",["inlineDialog",D()]);D().reset()},z.showDelay)};var E=function(O){if(typeof O=="undefined"&&z.persistent){return}A=false;if(u&&z.preHideCallback.call(g[0].popup)){O=(O==null)?z.hideDelay:O;clearTimeout(q);clearTimeout(K);if(O!=null){q=setTimeout(function(){l();z.addActiveClass&&d(B).removeClass("active");g.fadeOut(z.fadeTime,function(){z.hideCallback.call(g[0].popup)});if(g.arrowCanvas){g.arrowCanvas.remove();g.arrowCanvas=null}u=false;A=false;d(document).trigger("hideLayer",["inlineDialog",D()]);AJS.CustomInlineDialog.current=null;if(!z.cacheContent){I=false;w=false}},O)}}};var F=function(R,P){var O=d(P);z.upfrontCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});g.each(function(){if(typeof this.popup!="undefined"){this.popup.hide()}});if(z.closeOthers){d(".aui-inline-dialog").each(function(){!this.popup.persistent&&this.popup.hide()})}x={target:O};if(!R){J={x:O.offset().left,y:O.offset().top}}else{J={x:R.pageX,y:R.pageY}}if(!u){clearTimeout(K)}A=true;var Q=function(){w=false;I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()};if(!w){w=true;if(d.isFunction(r)){r(G,P,Q)}else{d.get(r,function(T,S,U){G.html(z.responseHandler(T,S,U));I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()})}}clearTimeout(q);if(!u){y()}return false};g[0].popup=D();var w=false;var t=false;var s=function(){if(!t){d(z.container).append(g);t=true}};var o=d(B);if(z.onHover){if(z.useLiveEvents){if(o.selector){d(document).on("mousemove",o.selector,function(O){s();F(O,this)}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.mousemove(function(O){s();F(O,this)}).mouseout(function(){E()})}}else{if(!z.noBind){if(z.useLiveEvents){if(o.selector){d(document).on("click",o.selector,function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.click(function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).mouseout(function(){E()})}}}var M=function(){return u&&z.closeOnTriggerClick};var H=function(){k();f()};var l=function(){C();N()};var i=false;var h=n+".inline-dialog-check";var k=function(){if(!i){d("body").bind("click."+h,function(P){var O=d(P.target);if(O.closest("#inline-dialog-"+n+" .contents").length===0){E(0)}});i=true}};var C=function(){if(i){d("body").unbind("click."+h)}i=false};var L=function(O){if(O.keyCode===27){E(0)}};var f=function(){d(document).on("keydown",L)};var N=function(){d(document).off("keydown",L)};g.show=function(P,O){if(P){P.stopPropagation()}s();if(z.noBind&&!(B&&B.length)){F(P,O===undefined?P.target:O)}else{F(P,B)}};g.hide=function(){E(0)};g.refresh=function(){if(u){D().reset()}};g.getOptions=function(){return z};return g};function c(g){var f=d(g);var h=d.extend({left:0,top:0},f.offset());return{left:h.left,top:h.top,width:f.outerWidth(),height:f.outerHeight()}}function b(h,j,t,f){var m=AJS.$.isFunction(f.offsetX)?f.offsetX(h,j,t,f):f.offsetX;var l=AJS.$.isFunction(f.offsetY)?f.offsetY(h,j,t,f):f.offsetY;var q=AJS.$.isFunction(f.arrowOffsetX)?f.arrowOffsetX(h,j,t,f):f.arrowOffsetX;var p=AJS.$.isFunction(f.arrowOffsetY)?f.arrowOffsetY(h,j,t,f):f.arrowOffsetY;var s=f.container.toLowerCase()!=="body";var g=AJS.$(f.container);var o=s?AJS.$(f.container).parent():AJS.$(window);var r=s?g.offset():{left:0,top:0};var k=s?o.offset():{left:0,top:0};var i=j.target;var u=i.offset();var n=i[0].getBBox&&i[0].getBBox();return{screenPadding:10,arrowMargin:5,window:{top:k.top,left:k.left,scrollTop:o.scrollTop(),scrollLeft:o.scrollLeft(),width:o.width(),height:o.height()},scrollContainer:{width:g.width(),height:g.height()},trigger:{top:u.top-r.top,left:u.left-r.left,width:n?n.width:i.outerWidth(),height:n?n.height:i.outerHeight()},dialog:{width:h.width(),height:h.height(),offset:{top:l,left:m}},arrow:{height:h.find(".arrow").outerHeight(),offset:{top:p,left:q}}}}function e(f,p,G,r){var n=b(f,p,G,r);var j=n.screenPadding;var k=n.window;var t=n.trigger;var D=n.dialog;var i=n.arrow;var z=n.scrollContainer;var E={top:t.top-k.scrollTop,left:t.left-k.scrollLeft};var A=Math.floor(t.height/2);var v=Math.floor(D.height/2);var u=Math.floor(i.height/2);var C=E.left-D.offset.left-j;var H=z.width-E.left-t.width-D.offset.left-j;var B=C>=D.width;var h=H>=D.width;var l=!h&&B?"e":"w";var o=E.top+A-u;var q=k.height-o-i.height;j=Math.min(j,o-n.arrowMargin);j=Math.min(j,q-n.arrowMargin);var g=E.top+A;var x=Math.max(g-j,0);var F=Math.max(k.height-g-j,0);var y=v-D.offset.top>x;var m=v+D.offset.top>F;var w;var s;if(y){w={top:k.scrollTop+j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{if(m){w={top:k.scrollTop+k.height-D.height-j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{w={top:t.top+A-v+D.offset.top,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:v-u+i.offset.top}}}return{gravity:l,popupCss:w,arrowCss:s}}function a(g,o,z,s){var x=AJS.$.isFunction(s.offsetX)?s.offsetX(g,o,z,s):s.offsetX;var v=AJS.$.isFunction(s.offsetY)?s.offsetY(g,o,z,s):s.offsetY;var m=AJS.$.isFunction(s.arrowOffsetX)?s.arrowOffsetX(g,o,z,s):s.arrowOffsetX;var l=AJS.$.isFunction(s.arrowOffsetY)?s.arrowOffsetY(g,o,z,s):s.arrowOffsetY;var f=c(window);var p=c(o.target);var y=c(g);var j=c(g.find(".aui-inline-dialog-arrow"));var i=p.left+p.width/2;var u=(window.pageYOffset||document.documentElement.scrollTop)+f.height;var k=10;y.top=p.top+p.height+~~v;y.left=p.left+~~x;var r=f.width-(y.left+y.width+k);j.left=i-y.left+~~m;j.top=-(j.height/2);var n=p.top>y.height;var h=(y.top+y.height)<u;var q=(!h&&n)||(n&&s.gravity==="s");if(q){y.top=p.top-y.height-(j.height/2);j.top=y.height}if(s.isRelativeToMouse){if(r<0){y.right=k;y.left="auto";j.left=z.x-(f.width-y.width)}else{y.left=z.x-20;j.left=z.x-y.left}}else{if(r<0){y.right=k;y.left="auto";var w=f.width-y.right;var t=w-y.width;j.right="auto";j.left=i-t-j.width/2}else{if(y.width<=p.width/2){j.left=y.width/2;y.left=i-y.width/2}}}return{gravity:q?"s":"n",displayAbove:q,popupCss:{left:y.left,top:y.top,right:y.right},arrowCss:{left:j.left,top:j.top,right:j.right}}}AJS.CustomInlineDialog.opts={onTop:false,responseHandler:function(g,f,h){return g},closeOthers:true,isRelativeToMouse:false,addActiveClass:true,onHover:false,useLiveEvents:false,noBind:false,fadeTime:100,persistent:false,hideDelay:10000,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:true,displayShadow:true,autoWidth:false,gravity:"n",closeOnTriggerClick:false,preHideCallback:function(){return true},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(f,i,j,h){h=h||{};var g=h.gravity==="w"?e:a;return g(f,i,j,h)},getArrowPath:function(f){if(f.gravity==="s"){return"M0,8L8,16,16,8"}else{return"M0,8L8,0,16,8"}},getArrowAttributes:function(){return{fill:"#fff",stroke:"#ccc"}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-ajax-form', location = '/util/ajax-form/ajax-form.js' */
define("util/ajax-form",["jquery","underscore","util/ajax","util/errors"],function(t,e,i,n){"use strict";function r(i,n){var r=function(e){return t("<div/>").addClass("error").text(e)};i.find(".error").remove();var s=[];n.message&&s.push(n.message),n.errors&&n.errors.forEach(function(t){return s.push(t)}),s.length&&i.prepend(aui.message.error({content:s.join("\n")})),e.each(e.keys(n.fieldErrors||{}),function(t){var e=i.find(':input[name="'+t+'"]');if(e.length){var s=r(n.fieldErrors[t].join("\n")),o=e.siblings(".description");o.length?o.before(s):e.parent().append(s)}})}function s(t){this.$el.trigger("success",t)}function o(e){var i=e.responseJSON;if(void 0===e.responseJSON&&(i=t.parseJSON(e.responseText)),!this.$el.triggerHandler("error",[i,e.status]))switch(e.status){case 400:r(this.$el,i);break;default:n.call(null,e)}}var a={contentType:"application/json",processData:!1,dataType:"json",type:"POST",async:!0},u=["atl_token","atl_token_source"],l=function(t){var e=function(){};return function i(){var n=this;this instanceof i||(e.prototype=i.prototype,n=new e);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return t.apply(n,s),n}}(function(i,n){var l=t(i);if(l.is("form")||(l=l.find("form:first")),this.$el=l,n=n||{},void 0===n.url){var c=l.attr("target");c&&(n.url=c)}if(void 0===n.type){var h=l.attr("action");h&&(n.type=h)}n=e.defaults(n,a),this.ignoreFields=e.unique((n.ignoreFields||[]).concat(u)),n.serialize&&(this.serialize=n.serialize),this.settings=e.extend(n,{success:e.bind(s,this),error:e.bind(o,this)}),this.injectErrors=e.bind(r,this,this.$el)});return l.prototype.bind=function(t){return this.settings=e.extend(this.settings,t||{}),this.$el.unbind("submit").find(":input").unbind("keydown"),this.request=e.bind(function(t){return i(e.extend({data:JSON.stringify(t)},this.settings))},this),this.$el.find(":input").keydown(e.bind(function(t){13===t.keyCode&&this.$el.trigger("submit")},this)),this.$el.on("submit",e.bind(function(t){var e=this.$el.find("button[type=submit], input[type=submit]");t.preventDefault(),e.attr("disabled",!0);var i=!(!this.settings||!this.settings.checkboxAsBoolean);this.request(this.serialize(i)).always(function(){e.attr("disabled",!1)})},this)),this},l.prototype.serialize=function(i){var n={};return e.each(this.$el.serializeArray(),e.bind(function(t){var i=t.name,r=t.value;e.indexOf(this.ignoreFields,i)>-1||(void 0===n[i]?n[i]=r:e.isArray(n[i])?n[i]=n[i].concat(r):n[i]=[n[i],r])},this)),i&&e.each(this.$el.find("input[type=checkbox]"),function(e){var i=t(e);n[i.attr("name")]=!!i.is(":checked")}),this.$el.triggerHandler("serialize",[this,n])||n},l.prototype.on=function(t,e){return this.$el.on(t,e),this},l});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-plan-branch-selector', location = '/widget/plan-branch-selector/plan-branch-selector.js' */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();define("widget/plan-branch-selector",["jquery"],function(e){"use strict";return function(){function t(n){var a=this;_classCallCheck(this,t),this.options=e.extend(!0,t.defaults,n),this.inlineDialog=AJS.InlineDialog(this.options.trigger,this.options.id,this.createInlineDialogContent.bind(this),t.inlineDialogOpts),this.inlineDialog.addClass("plan-branch-selector "+this.options.inlineDialogClass),e(document).delegate(n.trigger,"keydown",function(e){e.which===jQuery.ui.keyCode.ENTER&&(e.preventDefault(),a.inlineDialog.show.call(a))})}return _createClass(t,null,[{key:"defaults",get:function(){return{trigger:void 0,planKey:void 0,id:"plan-branch-selector",includeMaster:!1,masterBranchName:void 0,masterBranchDescription:void 0,includeLatestResult:!1,inlineDialogClass:"",maxBranches:10,getPlanDetailsUrl:AJS.contextPath()+"/rest/api/latest/plan/{planKey}/branch",templates:{branchItem:void 0,branchItemActiveBuild:void 0}}}},{key:"inlineDialogOpts",get:function(){return{fadeTime:0,showDelay:0,useLiveEvents:!0,width:250,offsetY:14,arrowOffsetX:10}}}]),_createClass(t,[{key:"getPlanDetails",value:function(t){return e.ajax({url:this.options.getPlanDetailsUrl.replace("{planKey}",t),cache:!1,dataType:"json",data:{expand:this.options.includeLatestResult?"branches.branch":"branches","max-results":this.options.maxBranches}})}},{key:"createInlineDialogContent",value:function(t,n,a){var i=e(n),l=this.options,s=l.planKey||i.data("planKey");t.html(widget.icons.icon({type:"loading"})),this.inlineDialog.is(":visible")||a(),this.inlineDialog.refresh(),this.getPlanDetails(s).done(function(n){var i=e("<ul/>"),r=n.branches.branch;l.includeMaster&&e(AJS.template.load(l.templates.branchItem).fill({key:s,shortName:l.masterBranchName,description:l.masterBranchDescription,"icon:html":bamboo.widget.plan.branch.selector.icon({})}).toString()).addClass("master").appendTo(i);for(var o=0;o<r.length;o+=1){var c=r[o],h={latestResult:{key:c.key+"/latest",state:"NeverExecuted",number:"--",suspendedClass:"",description:""}},u=e.extend(!0,h,c),d=u.latestResult.number;"number"==typeof d&&(u.latestResult.number="#"+d),c.enabled||(u.latestResult.suspendedClass="Suspended");var p=bamboo.widget.plan.branch.selector.icon({workflow:u.workflowType}),m=l.templates.branchItemActiveBuild&&u.latestCurrentlyActive?l.templates.branchItemActiveBuild:l.templates.branchItem;e(AJS.template.load(m).fill(u).fill({"icon:html":p}).toString()).appendTo(i)}t.html(i),e("<a/>",{text:"View all branches",href:AJS.contextPath()+"/browse/"+s+"/branches",class:"complete-listing"}).insertAfter(i),a()})}}]),t}()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-plan-branch-selector', location = '/widget/plan-branch-selector/plan-branch-selector.soy' */
// This file was automatically generated from plan-branch-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.plan.branch.selector.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.plan == 'undefined') { bamboo.widget.plan = {}; }
if (typeof bamboo.widget.plan.branch == 'undefined') { bamboo.widget.plan.branch = {}; }
if (typeof bamboo.widget.plan.branch.selector == 'undefined') { bamboo.widget.plan.branch.selector = {}; }


bamboo.widget.plan.branch.selector.icon = function(opt_data, opt_ignored) {
  var output = '';
  var iconType__soy3 = '';
  switch (opt_data.workflow) {
    case 'pullRequests':
      iconType__soy3 += 'devtools-pull-request';
      break;
    case 'branches':
      iconType__soy3 += 'devtools-branch';
      break;
    default:
      iconType__soy3 += 'devtools-branch';
  }
  output += '<span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(iconType__soy3) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.plan.branch.selector.icon.soyTemplateName = 'bamboo.widget.plan.branch.selector.icon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-error-collection', location = '/util/error-collection/error-collection.js' */
define("util/error-collection",["jquery"],function(r){"use strict";var t=function(){this.errors=[],this.fieldErrors={}};return t.prototype.hasErrors=function(){return!r.isEmptyObject(this.errors)||!r.isEmptyObject(this.fieldErrors)},t.prototype.addErrorMessage=function(r){this.errors.push(r)},t.prototype.addFieldError=function(r,t){this.fieldErrors[r]||(this.fieldErrors[r]=[]),this.fieldErrors[r].push(t)},t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-preferences', location = '/util/preferences/preferences.js' */
define("util/preferences",["jquery","underscore"],function(e,r){"use strict";var n=WRM.data.claim("bamboo.web.resources.common:util-preferences.user-preferences");return{setValue:function(t,s){r.isUndefined(s)&&(s=!0),n[t]=JSON.stringify(s);var a={};a[t]=n[t],e.post(AJS.contextPath()+"/rest/pref/latest/user",a)},getValue:function(e){var t=n[e];return r.isUndefined(t)?null:JSON.parse(t)},getBoolean:function(e){var r=this.getValue(e);return"false"!==r&&!!r}}}),AJS.namespace&&AJS.namespace("Bamboo.PreferencesManager",null,require("util/preferences"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-options', location = '/util/options/options.js' */
define("util/options",[],function(){"use strict";return{animationSpeed:200,spinner:{color:"#fff",length:20,lines:12,radius:30,speed:1.5,trail:60,width:10}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-uri', location = '/util/uri/uri-utils.js' */
define("util/uri-utils",["exports"],function(e){"use strict";function t(e){return(e||document.location.search).replace(/(^\?)/,"").split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{})}e.queryToObject=t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-router', location = '/util/router/router.js' */
define("util/router",["underscore","backbone"],function(t,e){"use strict";return t.extend(e.History.prototype,{routeStripper:/^[#]|\s+$/g,trailingSlash:/\/$/,getFragment:function(t,e){if(!t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var r=this.root.replace(this.trailingSlash,""),i=this.location.search;t.indexOf(r)||(t=t.substr(r.length)),i&&this._hasPushState&&(t+=i)}else t=this.getHash();return t.replace(this.routeStripper,"")}}),e.Router.extend({navigate:function(r,i){var a={trigger:!0};t.extend(a,i),delete a.params,e.Router.prototype.navigate(r,a)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-dark-features', location = '/util/dark-features/dark-features.js' */
define("util/dark-features",[],function(){"use strict";var e=WRM.data.claim("bamboo.web.resources.common:util-dark-features.enabled-dark-features");return{isEnabled:function(r){return e.indexOf(r)!==-1}}}),AJS.DarkFeatures=require("util/dark-features");
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-help-links', location = '/util/help-links/help-links.js' */
define("util/help-links",[],function(){"use strict";var e=void 0;return{getHelpLink:function(i){if(!e){e=WRM.data.claim("bamboo.web.resources.common:util-help-links.help-links")}return e[i]||""}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog2-confirmation', location = '/widget/dialog2-confirmation/dialog2-confirmation.js' */
define("widget/dialog2-confirmation",["widget/dialog2"],function(t){"use strict";return t.extend({initialize:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.titleText,n=i.content,o=i.onConfirm,a=i.warning,l=void 0!==a&&a,r=i.extraClasses,s=void 0===r?"":r,c=i.confirmLabel,d=void 0===c?"Confirm":c,g=i.size,f=void 0===g?t.SMALL:g;t.prototype.initialize.call(this,{titleText:e,content:n,warning:l,extraClasses:s,size:f,removeOnHide:!0,buttons:[{onClick:o,text:d,type:"primary",extraClasses:"dialog2-confirmation__confirm"},{onClick:function(t){return t.hide()},text:"Cancel",type:"link",extraClasses:"dialog2-confirmation__cancel"}]})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form', location = '/widget/dialog-form/dialog-form.js' */
define("widget/dialog-form",["jquery","underscore","widget/dialog","util/ajax-form","util/error-helper"],function(t,o,i,e,r){"use strict";return i.extend({defaultSettings:{buttons:[{id:"save",label:"Save",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},formSettings:{checkboxAsBoolean:!0},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.helpLink&&(this.helpLink=t.helpLink,delete t.helpLink),t.form&&(this.formSettings=o.defaults(t.form,this.formSettings),delete t.form),this.formEvents={error:[this.onFormError.bind(this)],submit:[this.onFormSubmit.bind(this)],success:[this.onFormSuccess.bind(this)]},t.error&&this.formEvents.error.push(t.error),t.submit&&this.formEvents.submit.push(t.submit),t.success&&this.formEvents.success.push(t.success),i.prototype.initialize.call(this,o.defaults(t||{},this.defaultSettings))},onContentLoaded:function(){for(var t,o=this,r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];(t=i.prototype.onContentLoaded).call.apply(t,[this].concat(n));var a={};this.formSettings.serialize&&(a.serialize=this.formSettings.serialize),this.form=new e(this.dialog.getPage(0).body,a),this.formSettings.noBind||this.form.bind(this.formSettings),this.formEvents.error.forEach(function(t){return o.form.on("error",t)}),this.formEvents.submit.forEach(function(t){return o.form.on("submit",t)}),this.formEvents.success.forEach(function(t){return o.form.on("success",t)}),this.helpLink&&this.dialog.getPage(0).header.after(bamboo.widget.dialog.form.helpLink(this.helpLink))},onContentLoadError:function(t){for(var o,e=arguments.length,n=Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];(o=i.prototype.onContentLoaded).call.apply(o,[this,t].concat(n));var a=r.getErrorFromResponse(t);r.displayErrorDialog(a)},onButtonClick:function(t){for(var o,e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];(o=i.prototype.onButtonClick).call.apply(o,[this,t].concat(r)),"save"===t&&this.form.$el.trigger("submit")},onFormSuccess:function(){this.dialog.hide(),this.dialog.remove()},onFormSubmit:function(){var t=this.dialog.getPage(0).buttonpanel;t.prepend(aui.icons.icon({size:"small",icon:"wait"})),t.find(":button").attr("disabled",!0)},onFormError:function(){var t=this.dialog.getPage(0).buttonpanel;t.find(".aui-icon-wait").remove(),t.find(":button").removeAttr("disabled")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form', location = '/widget/dialog-form/dialog-form.soy' */
// This file was automatically generated from dialog-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.dialog.form.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.dialog == 'undefined') { bamboo.widget.dialog = {}; }
if (typeof bamboo.widget.dialog.form == 'undefined') { bamboo.widget.dialog.form = {}; }


bamboo.widget.dialog.form.content = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.content.soyTemplateName = 'bamboo.widget.dialog.form.content';
}


bamboo.widget.dialog.form.helpLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank" class="dialog-form--help-link">' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.helpLink.soyTemplateName = 'bamboo.widget.dialog.form.helpLink';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form-deletion', location = '/widget/dialog-form-deletion/dialog-form-deletion.soy' */
// This file was automatically generated from dialog-form-deletion.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.dialog.form.deletion.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.dialog == 'undefined') { bamboo.widget.dialog = {}; }
if (typeof bamboo.widget.dialog.form == 'undefined') { bamboo.widget.dialog.form = {}; }
if (typeof bamboo.widget.dialog.form.deletion == 'undefined') { bamboo.widget.dialog.form.deletion = {}; }


bamboo.widget.dialog.form.deletion.loading = function(opt_data, opt_ignored) {
  return '<form><div class="aui-message aui-message-generic">' + soy.$$escapeHtml("Checking artifact dependencies ...") + ' <span class="icon icon-loading aui-dialog-content-loading"></span></div></form>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.deletion.loading.soyTemplateName = 'bamboo.widget.dialog.form.deletion.loading';
}


bamboo.widget.dialog.form.deletion.invalidToken = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '<p>' + soy.$$escapeHtml("Artifact dependencies have changed, please try again.") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.deletion.invalidToken.soyTemplateName = 'bamboo.widget.dialog.form.deletion.invalidToken';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form-deletion', location = '/widget/dialog-form-deletion/dialog-form-deletion.js' */
define("widget/dialog-form-deletion",["jquery","underscore","widget/dialog-form","util/ajax"],function(t,e,i,n){"use strict";return i.extend({urlRoot:AJS.contextPath()+"/rest/api/latest/",defaultSettings:{buttons:[{id:"confirm",label:"Confirm",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},initialize:function(t){var e=t||{};this.templateDelete=bamboo.widget.dialog.form.deletion,e.content=this.templateDelete.loading(),e.height=320,e.form={type:"DELETE",noBind:!0},this.url=this.urlRoot+e.resourceUrl,this.formTemplateData=t.templateData||{},this.formTemplate=t.template,i.prototype.initialize.call(this,e),this.dialogPage=this.dialog.getPage(0),this.fetchWarnings()},onButtonClick:function(t){for(var n,o=arguments.length,a=Array(o>1?o-1:0),r=1;r<o;r++)a[r-1]=arguments[r];(n=i.prototype.onButtonClick).call.apply(n,[this,t].concat(a)),"confirm"===t&&(this.refetchToken?(this.form.$el.html(this.templateDelete.loading()),this.fetchWarnings()):this.warningData.confirmationToken&&(this.form.bind(e.defaults({url:this.url+"?confirmationToken="+this.warningData.confirmationToken},this.formSettings)),this.form.$el.trigger("submit")))},onWarningLoaded:function(t){var i=this.dialogPage.button[0];this.refetchToken&&(i.item.text(i.originalText),i.originalText=null,this.refetchToken=!1),i.item.show().focus(),this.warningData=t,this.form.$el.html(this.formTemplate({isRunning:this.warningData.running,jobs:this.getConsumerJobs(this.warningData.artifactSubscriptions),data:this.formTemplateData})),this.warningData.running?(e.each(this.dialogPage.button,function(t){t.item.hide()}),this.dialog.addButton("Close",function(t){t.remove()})):this.dialogPage.button[0].item.removeAttr("disabled")},onFormError:function(t,e,n){for(var o,a=arguments.length,r=Array(a>3?a-3:0),l=3;l<a;l++)r[l-3]=arguments[l];if((o=i.prototype.onFormError).call.apply(o,[this,t,e,n].concat(r)),409===n){var s=this.dialogPage.button[0];s.originalText=s.item.text(),s.item.text("Try again"),this.form.$el.html(this.templateDelete.invalidToken()),this.refetchToken=!0}},fetchWarnings:function(){this.dialogPage.button[0].item.hide(),n(this.url+"/deletionWarnings?expand=stage,plan,project").done(e.bind(this.onWarningLoaded,this))},getConsumerJobs:function(t){var i=[],n=[];return e.each(t,function(t){e.each(t.consumerJobs,function(t){e.indexOf(n,t.id)===-1&&i.push(t)})}),i}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-view-results-item.js' */
define("widget/quicksearch-view-results-item",["backbone"],function(t){"use strict";return t.View.extend({initialize:function(t){this.options=t,this.template=bamboo.widget.quicksearch},render:function(){var t={content:this.template[this.options.type.toLowerCase()]({id:this.options.id,entity:this.options.entity})};return this.options.newType&&(t.cssClass="new-type"),this.setElement(this.template.row(t)),this.$el}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-collection-results.js' */
define("widget/quicksearch-collection-results",["backbone"],function(e){"use strict";return e.Collection.extend({url:AJS.contextPath()+"/rest/api/latest/quicksearch"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-view-results.js' */
define("widget/quicksearch-view-results",["jquery","underscore","widget/quicksearch-collection-results","widget/quicksearch-view-results-item"],function(e,i,t,s){"use strict";return Backbone.View.extend({initialize:function(){this.template=bamboo.widget.quicksearch,this.initialElements(),this.registerEvents()},initialElements:function(){this.$noMatches=e(this.template.nomatches()),this.$items=this.$el},registerEvents:function(){this.listenTo(this.collection,"add",this.onChange),this.listenTo(this,"select",this.onSelect),this.listenTo(this,"move",this.onMove),this.listenTo(this,"hide",this.onHide)},onSelect:function(){var e=this.$items.find("li.active");e.length&&(this.$el.addClass("hidden"),window.location.href=e.find("a").attr("href"))},onChange:function(t){var n=t.get("searchResults"),h=document.createDocumentFragment();this.$items.find("li").remove(),this.$el.toggleClass("hidden",!1);var l=null;i.each(n,i.bind(function(e){l!==e.type&&(e.newType=null!==l,l=e.type);var i=new s(e);h.appendChild(i.render().get(0))},this)),e(h.childNodes[0]).addClass("active"),n.length||h.appendChild(this.$noMatches.get(0)),this.$items.append(h)},onMove:function(e){var i=this.$items.find("li.no-results").length,t=void 0;i||(e?(t=this.$items.find("li.active").removeClass("active").next(),t.length||(t=this.$items.find("li:first"))):(t=this.$items.find("li.active").removeClass("active").prev(),t.length||(t=this.$items.find("li:last"))),t&&t.length&&t.addClass("active"))},onHide:function(){this.$el.addClass("hidden"),this.$items.find("li.active").removeClass("active")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch.soy' */
// This file was automatically generated from quicksearch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.quicksearch.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.quicksearch == 'undefined') { bamboo.widget.quicksearch = {}; }


bamboo.widget.quicksearch.row = function(opt_data, opt_ignored) {
  return '<li ' + ((opt_data.cssClass) ? 'class="' + soy.$$escapeHtml(opt_data.cssClass) + '"' : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.row.soyTemplateName = 'bamboo.widget.quicksearch.row';
}


bamboo.widget.quicksearch.nomatches = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.quicksearch.row({content: '' + soy.$$escapeHtml("No matches found"), cssClass: 'no-results'});
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.nomatches.soyTemplateName = 'bamboo.widget.quicksearch.nomatches';
}


bamboo.widget.quicksearch.project = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.entity.key) + '" tabindex="-1" class="entity project">' + widget.icons.fontIcon({type: 'devtools-folder-closed'}) + '<span class="title"><span class="single project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.project.soyTemplateName = 'bamboo.widget.quicksearch.project';
}


bamboo.widget.quicksearch.chain = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.entity.key) + '" tabindex="-1" class="entity chain">' + widget.icons.fontIcon({type: 'build'}) + '<span class="title"><span class="single plan-name">' + soy.$$escapeHtml(opt_data.entity.planName) + '</span></span><span class="subtitle project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.chain.soyTemplateName = 'bamboo.widget.quicksearch.chain';
}


bamboo.widget.quicksearch.branch = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.entity.key) + '" tabindex="-1" class="entity branch">' + widget.icons.fontIcon({type: 'devtools-branch'}) + '<span class="title"><span class="plan-name">' + soy.$$escapeHtml(opt_data.entity.planName) + '</span><span class="branch"><span class="divider"></span>' + soy.$$escapeHtml(opt_data.entity.branchName) + '</span></span><span class="subtitle project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.branch.soyTemplateName = 'bamboo.widget.quicksearch.branch';
}


bamboo.widget.quicksearch.deploymentproject = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/deploy/viewDeploymentProjectEnvironments.action?id=' + soy.$$escapeHtml(opt_data.id) + '" tabindex="-1" class="entity deployment-project">' + widget.icons.fontIcon({type: 'deploy'}) + '<span class="title"><span class="single deployment-project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.deploymentproject.soyTemplateName = 'bamboo.widget.quicksearch.deploymentproject';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-view-input.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}define("widget/quicksearch-view-input",["jquery","underscore","backbone"],function(e,t,n){"use strict";return n.View.extend({keys:{13:function(){return["select"]},27:function(){return["hide",!0]},38:function(){return["move",!1]},40:function(){return["move",!0]}},initialize:function(){this.$el.on("keydown",t.bind(this.onKeyPress,this)),this.$el.on("keyup",t.debounce(t.bind(this.onKeyUp,this),250));var n=this.$el.parent();e(document.body).on("click",t.bind(function(t){e(t.target).closest(n).length||this.trigger.call(this,"hide")},this))},onKeyPress:function(e){var t=this.keys[e.keyCode];t&&(this.trigger.apply(this,_toConsumableArray(t())),e.stopPropagation(),e.preventDefault())},onKeyUp:function(t){if(!this.keys[t.keyCode]){var n=e.trim(this.$el.val());n.length>0?this.trigger("change",n):this.trigger("hide")}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch.js' */
define("widget/quicksearch",["jquery","underscore","backbone","widget/quicksearch-collection-results","widget/quicksearch-view-input","widget/quicksearch-view-results"],function(e,t,i,s,n,r){"use strict";return i.View.extend({initialize:function(){this.collection=new s,this.includeView(),this.registerEvents()},includeView:function(){this.input=new n({el:this.$el.find(".term")}),this.results=new r({el:this.$el.find(".results"),collection:this.collection}),AJS.whenIType("/").execute(t.bind(this.onHide,this))},registerEvents:function(){this.listenTo(this.input,"select",this.onSelect),this.listenTo(this.input,"change",this.onChange),this.listenTo(this.input,"move",this.onMove),this.listenTo(this.input,"hide",this.onHide)},onSelect:function(){this.results.trigger("select")},onChange:function(t){this.requestInProgress&&this.requestInProgress.readyState>0&&this.requestInProgress.readyState<4&&this.requestInProgress.abort(),this.requestInProgress=this.collection.fetch({data:e.param({searchTerm:t})})},onMove:function(e){this.results.trigger("move",e),this.results.$el.focus()},onHide:function(e){this.results.trigger("hide"),e&&this.input.$el.focus()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-bulk-selection-links', location = '/widget/bulk-selection-links/bulk-selection-links.soy' */
// This file was automatically generated from bulk-selection-links.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.bulk.selection.links.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.bulk == 'undefined') { bamboo.widget.bulk = {}; }
if (typeof bamboo.widget.bulk.selection == 'undefined') { bamboo.widget.bulk.selection = {}; }
if (typeof bamboo.widget.bulk.selection.links == 'undefined') { bamboo.widget.bulk.selection.links = {}; }


bamboo.widget.bulk.selection.links.displayLinks = function(opt_data, opt_ignored) {
  return '<span class="bulk-select-links">' + soy.$$escapeHtml("Select") + ': <span tabindex="0" role="link" class="bulk-select-link bulk-select-link-all">' + soy.$$escapeHtml("All") + '</span>, <span tabindex="0" role="link" class="bulk-select-link bulk-select-link-none">' + soy.$$escapeHtml("None") + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.widget.bulk.selection.links.displayLinks.soyTemplateName = 'bamboo.widget.bulk.selection.links.displayLinks';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-bulk-selection-links', location = '/widget/bulk-selection-links/bulk-selection-links.js' */
define("widget/bulk-selection-links",["jquery","underscore"],function(e,t){"use strict";return Backbone.View.extend({defaults:{checkboxClass:null},events:{"click .bulk-select-link-all":"selectAll","click .bulk-select-link-none":"selectNone"},template:bamboo.widget.bulk.selection.links.displayLinks,initialize:function(e){this.options=t.defaults(e,this.defaults),this.$form=this.$el.closest("form"),this.selector=t.template("input:checkbox.<%= checkboxClass %>")(this.options),this.render()},render:function(){this.$el.empty().append(this.template())},selectAll:function(){this.$form.find(this.selector).attr("checked","checked")},selectNone:function(){this.$form.find(this.selector).removeAttr("checked")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.8.3', location = 'libs/underscore/1.8.3/underscore-1.8.3.js' */
'use strict';(function(z){define("atlassian/libs/underscore-1.8.3",function(){var u={};z.call(u);return"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports?module.exports.noConflict():exports.noConflict():u._.noConflict()})})(function(){(function(){function z(a){return function(c,d,e,f){d=v(d,f,4);var g=!n(c)&&b.keys(c),h=(g||c).length,k=0<a?0:h-1;3>arguments.length&&(e=c[g?g[k]:k],k+=a);for(var p=d,m=e;0<=k&&k<h;k+=a){var l=g?g[k]:k;m=p(m,c[l],l,c)}return m}}function u(a){return function(c,
b,e){b=l(b,e);e=r(c);for(var d=0<a?0:e-1;0<=d&&d<e;d+=a)if(b(c[d],d,c))return d;return-1}}function K(a,c,d){return function(e,f,g){var h=0,k=r(e);if("number"==typeof g)0<a?h=0<=g?g:Math.max(g+k,h):k=0<=g?Math.min(g+1,k):g+k+1;else if(d&&g&&k)return g=d(e,f),e[g]===f?g:-1;if(f!==f)return g=c(q.call(e,h,k),b.isNaN),0<=g?g+h:-1;for(g=0<a?h:k-1;0<=g&&g<k;g+=a)if(e[g]===f)return g;return-1}}function L(a,c){var d=M.length,e=a.constructor;e=b.isFunction(e)&&e.prototype||C;var f="constructor";for(b.has(a,
f)&&!b.contains(c,f)&&c.push(f);d--;)f=M[d],f in a&&a[f]!==e[f]&&!b.contains(c,f)&&c.push(f)}var D=this,S=D._,A=Array.prototype,C=Object.prototype,T=A.push,q=A.slice,w=C.toString,U=C.hasOwnProperty,B=Array.isArray,N=Object.keys,E=Function.prototype.bind,O=Object.create,F=function(){},b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):D._=
b;b.VERSION="1.8.3";var v=function(a,c,b){if(void 0===c)return a;switch(null==b?3:b){case 1:return function(b){return a.call(c,b)};case 2:return function(b,d){return a.call(c,b,d)};case 3:return function(b,d,g){return a.call(c,b,d,g)};case 4:return function(b,d,g,h){return a.call(c,b,d,g,h)}}return function(){return a.apply(c,arguments)}},l=function(a,c,d){return null==a?b.identity:b.isFunction(a)?v(a,c,d):b.isObject(a)?b.matcher(a):b.property(a)};b.iteratee=function(a,c){return l(a,c,Infinity)};
var x=function(a,c){return function(b){var d=arguments.length;if(2>d||null==b)return b;for(var f=1;f<d;f++)for(var g=arguments[f],h=a(g),k=h.length,p=0;p<k;p++){var m=h[p];c&&void 0!==b[m]||(b[m]=g[m])}return b}},P=function(a){if(!b.isObject(a))return{};if(O)return O(a);F.prototype=a;a=new F;F.prototype=null;return a},y=function(a){return function(c){return null==c?void 0:c[a]}},V=Math.pow(2,53)-1,r=y("length"),n=function(a){a=r(a);return"number"==typeof a&&0<=a&&a<=V};b.each=b.forEach=function(a,
c,d){c=v(c,d);var e;if(n(a))for(d=0,e=a.length;d<e;d++)c(a[d],d,a);else{var f=b.keys(a);d=0;for(e=f.length;d<e;d++)c(a[f[d]],f[d],a)}return a};b.map=b.collect=function(a,c,d){c=l(c,d);d=!n(a)&&b.keys(a);for(var e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=c(a[h],h,a)}return f};b.reduce=b.foldl=b.inject=z(1);b.reduceRight=b.foldr=z(-1);b.find=b.detect=function(a,c,d){c=n(a)?b.findIndex(a,c,d):b.findKey(a,c,d);if(void 0!==c&&-1!==c)return a[c]};b.filter=b.select=function(a,c,d){var e=
[];c=l(c,d);b.each(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e};b.reject=function(a,c,d){return b.filter(a,b.negate(l(c)),d)};b.every=b.all=function(a,c,d){c=l(c,d);d=!n(a)&&b.keys(a);for(var e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!c(a[g],g,a))return!1}return!0};b.some=b.any=function(a,c,d){c=l(c,d);d=!n(a)&&b.keys(a);for(var e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(c(a[g],g,a))return!0}return!1};b.contains=b.includes=b.include=function(a,c,d,e){n(a)||(a=b.values(a));if("number"!=
typeof d||e)d=0;return 0<=b.indexOf(a,c,d)};b.invoke=function(a,c){var d=q.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){var b=e?c:a[c];return null==b?b:b.apply(a,d)})};b.pluck=function(a,c){return b.map(a,b.property(c))};b.where=function(a,c){return b.filter(a,b.matcher(c))};b.findWhere=function(a,c){return b.find(a,b.matcher(c))};b.max=function(a,c,d){var e=-Infinity,f=-Infinity,g;if(null==c&&null!=a){a=n(a)?a:b.values(a);for(var h=0,k=a.length;h<k;h++)d=a[h],d>e&&(e=d)}else c=
l(c,d),b.each(a,function(a,b,d){g=c(a,b,d);if(g>f||-Infinity===g&&-Infinity===e)e=a,f=g});return e};b.min=function(a,c,d){var e=Infinity,f=Infinity,g;if(null==c&&null!=a){a=n(a)?a:b.values(a);for(var h=0,k=a.length;h<k;h++)d=a[h],d<e&&(e=d)}else c=l(c,d),b.each(a,function(a,b,d){g=c(a,b,d);if(g<f||Infinity===g&&Infinity===e)e=a,f=g});return e};b.shuffle=function(a){a=n(a)?a:b.values(a);for(var c=a.length,d=Array(c),e=0,f;e<c;e++)f=b.random(0,e),f!==e&&(d[e]=d[f]),d[f]=a[e];return d};b.sample=function(a,
c,d){return null==c||d?(n(a)||(a=b.values(a)),a[b.random(a.length-1)]):b.shuffle(a).slice(0,Math.max(0,c))};b.sortBy=function(a,c,d){c=l(c,d);return b.pluck(b.map(a,function(a,b,d){return{value:a,index:b,criteria:c(a,b,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var G=function(a){return function(c,d,e){var f={};d=l(d,e);b.each(c,function(b,e){e=d(b,e,c);a(f,b,e)});return f}};b.groupBy=G(function(a,
c,d){b.has(a,d)?a[d].push(c):a[d]=[c]});b.indexBy=G(function(a,b,d){a[d]=b});b.countBy=G(function(a,c,d){b.has(a,d)?a[d]++:a[d]=1});b.toArray=function(a){return a?b.isArray(a)?q.call(a):n(a)?b.map(a,b.identity):b.values(a):[]};b.size=function(a){return null==a?0:n(a)?a.length:b.keys(a).length};b.partition=function(a,c,d){c=l(c,d);var e=[],f=[];b.each(a,function(a,b,d){(c(a,b,d)?e:f).push(a)});return[e,f]};b.first=b.head=b.take=function(a,c,d){if(null!=a)return null==c||d?a[0]:b.initial(a,a.length-
c)};b.initial=function(a,b,d){return q.call(a,0,Math.max(0,a.length-(null==b||d?1:b)))};b.last=function(a,c,d){if(null!=a)return null==c||d?a[a.length-1]:b.rest(a,Math.max(0,a.length-c))};b.rest=b.tail=b.drop=function(a,b,d){return q.call(a,null==b||d?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var t=function(a,c,d,e){var f=[],g=0;e=e||0;for(var h=r(a);e<h;e++){var k=a[e];if(n(k)&&(b.isArray(k)||b.isArguments(k))){c||(k=t(k,c,d));var p=0,m=k.length;for(f.length+=m;p<m;)f[g++]=k[p++]}else d||
(f[g++]=k)}return f};b.flatten=function(a,b){return t(a,b,!1)};b.without=function(a){return b.difference(a,q.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){b.isBoolean(c)||(e=d,d=c,c=!1);null!=d&&(d=l(d,e));e=[];for(var f=[],g=0,h=r(a);g<h;g++){var k=a[g],p=d?d(k,g,a):k;c?(g&&f===p||e.push(k),f=p):d?b.contains(f,p)||(f.push(p),e.push(k)):b.contains(e,k)||e.push(k)}return e};b.union=function(){return b.uniq(t(arguments,!0,!0))};b.intersection=function(a){for(var c=[],d=arguments.length,e=0,
f=r(a);e<f;e++){var g=a[e];if(!b.contains(c,g)){for(var h=1;h<d&&b.contains(arguments[h],g);h++);h===d&&c.push(g)}}return c};b.difference=function(a){var c=t(arguments,!0,!0,1);return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){return b.unzip(arguments)};b.unzip=function(a){for(var c=a&&b.max(a,r).length||0,d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,e);return d};b.object=function(a,b){for(var c={},e=0,f=r(a);e<f;e++)b?c[a[e]]=b[e]:c[a[e][0]]=a[e][1];return c};b.findIndex=u(1);b.findLastIndex=
u(-1);b.sortedIndex=function(a,b,d,e){d=l(d,e,1);b=d(b);e=0;for(var c=r(a);e<c;){var g=Math.floor((e+c)/2);d(a[g])<b?e=g+1:c=g}return e};b.indexOf=K(1,b.findIndex,b.sortedIndex);b.lastIndexOf=K(-1,b.findLastIndex);b.range=function(a,b,d){null==b&&(b=a||0,a=0);d=d||1;b=Math.max(Math.ceil((b-a)/d),0);for(var c=Array(b),f=0;f<b;f++,a+=d)c[f]=a;return c};var Q=function(a,c,d,e,f){if(!(e instanceof c))return a.apply(d,f);c=P(a.prototype);a=a.apply(c,f);return b.isObject(a)?a:c};b.bind=function(a,c){if(E&&
a.bind===E)return E.apply(a,q.call(arguments,1));if(!b.isFunction(a))throw new TypeError("Bind must be called on a function");var d=q.call(arguments,2),e=function(){return Q(a,e,c,this,d.concat(q.call(arguments)))};return e};b.partial=function(a){var c=q.call(arguments,1),d=function(){for(var e=0,f=c.length,g=Array(f),h=0;h<f;h++)g[h]=c[h]===b?arguments[e++]:c[h];for(;e<arguments.length;)g.push(arguments[e++]);return Q(a,d,this,this,g)};return d};b.bindAll=function(a){var c,d=arguments.length;if(1>=
d)throw Error("bindAll must be passed function names");for(c=1;c<d;c++){var e=arguments[c];a[e]=b.bind(a[e],a)}return a};b.memoize=function(a,c){var d=function(e){var f=d.cache,g=""+(c?c.apply(this,arguments):e);b.has(f,g)||(f[g]=a.apply(this,arguments));return f[g]};d.cache={};return d};b.delay=function(a,b){var c=q.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};b.defer=b.partial(b.delay,b,1);b.throttle=function(a,c,d){var e,f,g,h=null,k=0;d||(d={});var p=function(){k=
!1===d.leading?0:b.now();h=null;g=a.apply(e,f);h||(e=f=null)};return function(){var m=b.now();k||!1!==d.leading||(k=m);var l=c-(m-k);e=this;f=arguments;0>=l||l>c?(h&&(clearTimeout(h),h=null),k=m,g=a.apply(e,f),h||(e=f=null)):h||!1===d.trailing||(h=setTimeout(p,l));return g}};b.debounce=function(a,c,d){var e,f,g,h,k,l=function(){var m=b.now()-h;m<c&&0<=m?e=setTimeout(l,c-m):(e=null,d||(k=a.apply(g,f),e||(g=f=null)))};return function(){g=this;f=arguments;h=b.now();var m=d&&!e;e||(e=setTimeout(l,c));
m&&(k=a.apply(g,f),g=f=null);return k}};b.wrap=function(a,c){return b.partial(c,a)};b.negate=function(a){return function(){return!a.apply(this,arguments)}};b.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,e=a[b].apply(this,arguments);c--;)e=a[c].call(this,e);return e}};b.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};b.before=function(a,b){var c;return function(){0<--a&&(c=b.apply(this,arguments));1>=a&&(b=null);return c}};b.once=b.partial(b.before,
2);var R=!{toString:null}.propertyIsEnumerable("toString"),M="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");b.keys=function(a){if(!b.isObject(a))return[];if(N)return N(a);var c=[],d;for(d in a)b.has(a,d)&&c.push(d);R&&L(a,c);return c};b.allKeys=function(a){if(!b.isObject(a))return[];var c=[],d;for(d in a)c.push(d);R&&L(a,c);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.mapObject=function(a,
c,d){c=l(c,d);d=b.keys(a);for(var e=d.length,f={},g,h=0;h<e;h++)g=d[h],f[g]=c(a[g],g,a);return f};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=x(b.allKeys);b.extendOwn=b.assign=x(b.keys);b.findKey=function(a,c,d){c=l(c,d);d=b.keys(a);for(var e,
f=0,g=d.length;f<g;f++)if(e=d[f],c(a[e],e,a))return e};b.pick=function(a,c,d){var e={},f=a;if(null==f)return e;if(b.isFunction(c)){var g=b.allKeys(f);var h=v(c,d)}else g=t(arguments,!1,!1,1),h=function(a,b,c){return b in c},f=Object(f);for(var k=0,l=g.length;k<l;k++){var m=g[k],n=f[m];h(n,m,f)&&(e[m]=n)}return e};b.omit=function(a,c,d){if(b.isFunction(c))c=b.negate(c);else{var e=b.map(t(arguments,!1,!1,1),String);c=function(a,c){return!b.contains(e,c)}}return b.pick(a,c,d)};b.defaults=x(b.allKeys,
!0);b.create=function(a,c){a=P(a);c&&b.extendOwn(a,c);return a};b.clone=function(a){return b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a};b.tap=function(a,b){b(a);return a};b.isMatch=function(a,c){var d=b.keys(c),e=d.length;if(null==a)return!e;a=Object(a);for(var f=0;f<e;f++){var g=d[f];if(c[g]!==a[g]||!(g in a))return!1}return!0};var H=function(a,c,d,e){if(a===c)return 0!==a||1/a===1/c;if(null==a||null==c)return a===c;a instanceof b&&(a=a._wrapped);c instanceof b&&(c=c._wrapped);var f=w.call(a);
if(f!==w.call(c))return!1;switch(f){case "[object RegExp]":case "[object String]":return""+a===""+c;case "[object Number]":return+a!==+a?+c!==+c:0===+a?1/+a===1/c:+a===+c;case "[object Date]":case "[object Boolean]":return+a===+c}f="[object Array]"===f;if(!f){if("object"!=typeof a||"object"!=typeof c)return!1;var g=a.constructor,h=c.constructor;if(g!==h&&!(b.isFunction(g)&&g instanceof g&&b.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in c)return!1}d=d||[];e=e||[];for(g=d.length;g--;)if(d[g]===
a)return e[g]===c;d.push(a);e.push(c);if(f){g=a.length;if(g!==c.length)return!1;for(;g--;)if(!H(a[g],c[g],d,e))return!1}else{f=b.keys(a);g=f.length;if(b.keys(c).length!==g)return!1;for(;g--;)if(h=f[g],!b.has(c,h)||!H(a[h],c[h],d,e))return!1}d.pop();e.pop();return!0};b.isEqual=function(a,b){return H(a,b)};b.isEmpty=function(a){return null==a?!0:n(a)&&(b.isArray(a)||b.isString(a)||b.isArguments(a))?0===a.length:0===b.keys(a).length};b.isElement=function(a){return!(!a||1!==a.nodeType)};b.isArray=B||
function(a){return"[object Array]"===w.call(a)};b.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};b.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){b["is"+a]=function(b){return w.call(b)==="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return b.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(a){return"function"==typeof a||!1});b.isFinite=function(a){return isFinite(a)&&
!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!==+a};b.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===w.call(a)};b.isNull=function(a){return null===a};b.isUndefined=function(a){return void 0===a};b.has=function(a,b){return null!=a&&U.call(a,b)};b.noConflict=function(){D._=S;return this};b.identity=function(a){return a};b.constant=function(a){return function(){return a}};b.noop=function(){};b.property=y;b.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};
b.matcher=b.matches=function(a){a=b.extendOwn({},a);return function(c){return b.isMatch(c,a)}};b.times=function(a,b,d){var c=Array(Math.max(0,a));b=v(b,d,1);for(d=0;d<a;d++)c[d]=b(d);return c};b.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};b.now=Date.now||function(){return(new Date).getTime()};B={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"};x=b.invert(B);y=function(a){var c=function(b){return a[b]},d="(?:"+
b.keys(a).join("|")+")",e=RegExp(d),f=RegExp(d,"g");return function(a){a=null==a?"":""+a;return e.test(a)?a.replace(f,c):a}};b.escape=y(B);b.unescape=y(x);b.result=function(a,c,d){c=null==a?void 0:a[c];void 0===c&&(c=d);return b.isFunction(c)?c.call(a):c};var W=0;b.uniqueId=function(a){var b=++W+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},
Y=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(a){return"\\"+X[a]};b.template=function(a,c,d){!c&&d&&(c=d);c=b.defaults({},c,b.templateSettings);d=RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g");var e=0,f="__p+\x3d'";a.replace(d,function(b,c,d,g,l){f+=a.slice(e,l).replace(Y,Z);e=l+b.length;c?f+="'+\n((__t\x3d("+c+"))\x3d\x3dnull?'':_.escape(__t))+\n'":d?f+="'+\n((__t\x3d("+d+"))\x3d\x3dnull?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+\x3d'");return b});f+="';\n";
c.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p\x3d'',__j\x3dArray.prototype.join,print\x3dfunction(){__p+\x3d__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(h){throw h.source=f,h;}d=function(a){return g.call(this,a,b)};d.source="function("+(c.variable||"obj")+"){\n"+f+"}";return d};b.chain=function(a){a=b(a);a._chain=!0;return a};var J=function(a,c){return a._chain?b(c).chain():c};b.mixin=function(a){b.each(b.functions(a),function(c){var d=
b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];T.apply(a,arguments);return J(this,d.apply(b,a))}})};b.mixin(b);b.each("pop push reverse shift sort splice unshift".split(" "),function(a){var c=A[a];b.prototype[a]=function(){var b=this._wrapped;c.apply(b,arguments);"shift"!==a&&"splice"!==a||0!==b.length||delete b[0];return J(this,b)}});b.each(["concat","join","slice"],function(a){var c=A[a];b.prototype[a]=function(){return J(this,c.apply(this._wrapped,arguments))}});b.prototype.value=function(){return this._wrapped};
b.prototype.valueOf=b.prototype.toJSON=b.prototype.value;b.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:lib-underscore', location = '/lib/underscore/underscore-1.8.3.js' */
define("lib/underscore-1.8.3",["atlassian/libs/underscore-1.8.3"],function(e){"use strict";return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-aui', location = '/util/shims/aui.js' */
define('aui', function() {
    return window.AJS;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-project-selector', location = '/widget/project-selector/project-selector.js' */
define("widget/project-selector",["underscore","aui","marionette"],function(t,e,i){"use strict";var n=function(t){var e=t.id;return{text:t.projectName,id:e}},s={endpoint:null,permission:null,placeholder:null,toSelect2Result:n,onSelect:function(){},defaultSelection:null,debouncePeriod:250,pageSize:25},o=function(t,e){var i=this,n=e*this.options.pageSize<t.size;return{results:t.searchResults.map(function(t){var e=t.searchEntity;return i.options.toSelect2Result(e)}),more:n}},a=function(t,e){return{searchTerm:t,permission:this.options.permission,"start-index":this.options.pageSize*(e-1),"max-result":this.options.pageSize}};return i.ItemView.extend({template:!1,initialize:function(t){this.options=e.$.extend(!0,Object.create(s),t)},onRender:function(){this.initSelect2(),this.setInitialData(),this.attachListeners()},initSelect2:function(){this.$el.auiSelect2({placeholder:this.options.placeholder,data:this.options.defaultSelection,ajax:{url:this.options.endpoint,dataType:"json",quietMillis:this.options.debouncePeriod,data:t.bind(a,this),results:t.bind(o,this)}})},setInitialData:function(){var t=this.options.defaultSelection;t.id&&t.text&&this.$el.auiSelect2("data",t)},attachListeners:function(){this.$el.on("change",this.options.onSelect)}},{create:function(t){return new this(t).render()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-async-link', location = '/widget/async-link/async-link.js' */
define("widget/async-link",["underscore","backbone","util/ajax"],function(t,e,n){"use strict";return e.View.extend({defaults:{el:null,url:null,type:"POST",confirmationMessage:"",returnUrl:""},events:{click:"onClick"},initialize:function(e){this.settings=t.defaults(e||{},this.defaults)},onClick:function(t){var e=this;t.preventDefault(),this.settings.confirmationMessage&&!confirm(this.settings.confirmationMessage)||n({url:this.settings.url,type:this.settings.type}).then(function(){e.settings.returnUrl&&(window.location.href=e.settings.returnUrl)})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-spin', location = 'src/js/aui/spin.js' */
("undefined"===typeof window?global:window).__6fa2292fd3bc72aee8a14c7b4326719a=function(){"use strict";var f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=__bd7207540b95ff683caa1d3c0bfcc3d7,c=b&&b.__esModule?b:{"default":b};__05bca48700965a7a8a29288c57bd100b;var g=(b=__7acfe7fd38bbf8b5bf76cc953770b033)&&b.__esModule?b:{"default":b},b=__c88c0dc6258c37804917fb6a0e4092fa;
c.default.fn.spin=(0,b.fn)(function(a,b){var d={size:"small"};if("object"===("undefined"===typeof b?"undefined":f(b)))d=c.default.extend(d,b);if("object"===("undefined"===typeof a?"undefined":f(a)))d=c.default.extend(d,a);"string"===typeof a&&(d.size=a);return"boolean"===typeof a&&!1===a?this.spinStop():this.each(function(){if(this&&this.nodeType){var a=(0,c.default)(this),b=a.data();if(b){var e=(0,c.default)("<aui-spinner filled></aui-spinner>");e.attr("size",d.size);e.css("color",d.color);a.spinStop();
a.append(e);g.default.init(this);b.spinner=e}}})},"jQuery.fn.spin",{sinceVersion:"7.9.4",removeInVersion:"9",alternativeName:"<aui-spinner>"});c.default.fn.spinStop=(0,b.fn)(function(){return this.each(function(){if(this&&this.nodeType){var a=(0,c.default)(this).data();a&&a.spinner&&(a.spinner.remove(),delete a.spinner)}})},"jQuery.fn.spinStop",{sinceVersion:"7.9.4",removeInVersion:"9",alternativeName:"<aui-spinner>"});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-request', location = '/util/request/request.js' */
function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}var _extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r};define("util/request",["util/errors"],function(r){"use strict";var e=require("jquery"),n=require("ajs"),t=require("backbone"),a=n.contextPath(),o={redirectIfUnauthorised:!0},u=function(r,e,t){r.location.href=n.format.apply(n,_toConsumableArray([a+e].concat(t)))},i=function(e,n,t){if(n.redirectIfUnauthorised)switch(t.status){case 401:u(e,"/userlogin!doDefault.action");break;default:r(t)}else r(t)};return function(r,n){return{ajax:function(){return e.ajax.apply(e,arguments).fail(i.bind(null,r,_extends({},o,n)))},sync:function(e,a){for(var u=arguments.length,c=Array(u>2?u-2:0),f=2;f<u;f++)c[f-2]=arguments[f];return t.sync.apply(a,[e,a].concat(c)).fail(i.bind(null,r,_extends({},o,n)))}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-analytics-base', location = '/util/analytics-base/analytics-base.js' */
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}define("util/analytics-base",[],function(){"use strict";function t(t,i,r){if(null==t)throw new Error("Event bus should be specified");this.prefix=i,this.eventBus=t,this.options=r,this.localEventBus=e.extend({},n.Events);var s=e.isFunction(this.register)?this.register():this.register;e.keys(s).forEach(function(t){this.registerListener.apply(this,[t].concat(_toConsumableArray(s[t])))},this)}var e=require("underscore"),n=require("backbone"),i=require("ajs"),r=function(t,n,r){return function(){var s=t?[t,n].join("."):n,o=e.isFunction(r)?r.apply(void 0,arguments):{};i.trigger("analyticsEvent",{name:s,data:o})}};return t.extend=n.View.extend,t.create=function(t,e,n){return new this(t,e,n)},t.prototype={register:{},registerListener:function(t,e,n){this.localEventBus.listenTo.bind(this.localEventBus,this.eventBus)(t,r.bind(null,this.prefix)(e,n))},stopListening:function(){this.localEventBus.stopListening()}},t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
'use strict';(function(k){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(l,n){k.call({_:l,Backbone:n});l=n.PageableCollection.noConflict();l.VERSION="2.0.2";return l}})})(function(){(function(k){var l=this.Backbone,n=l.PageableCollection,F=k(this._,l);l.PageableCollection.noConflict=function(){l.PageableCollection=n;return F}}).call(this,function(k,l){function n(a,b){if(!k.isNumber(a)||k.isNaN(a)||!k.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");
return a}function F(a){for(var b,e,c={},d=decodeURIComponent,f=a.split("\x26"),g=0,h=f.length;g<h;g++)b=f[g].split("\x3d"),a=b[0],b=b[1]||!0,a=d(a),b=d(b),e=c[a],A(e)?e.push(b):c[a]=e?[e,b]:b;return c}function G(a,b,e){if((a=a._events[b])&&a.length){var c=a[a.length-1],d=c.callback;c.callback=function(){try{d.apply(this,arguments),e()}catch(f){throw f;}finally{c.callback=d}}}else e()}var p=k.extend,r=k.omit,v=k.clone,q=k.each,K=k.pick,L=k.contains,H=k.isEmpty,I=k.pairs,R=k.invert,A=k.isArray,B=k.isFunction,
M=k.isObject,y=k.keys,z=k.isUndefined,C=Math.ceil,N=Math.floor,J=Math.max,D=l.Collection.prototype,O=/[\s'"]/g,S=/[<>\s'"]/g,Q=l.PageableCollection=l.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){D.constructor.apply(this,
arguments);b=b||{};var e=this.mode=b.mode||this.mode||x.mode,c=p({},x.queryParams,this.queryParams,b.queryParams||{});c.directions=p({},x.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=p({},x.state,this.state,b.state||{});c.currentPage=null==c.currentPage?c.firstPage:c.currentPage;A(a)||(a=a?[a]:[]);a=a.slice();"server"==e||null!=c.totalRecords||H(a)||(c.totalRecords=a.length);this.switchMode(e,p({fetch:!1,resetState:!1,models:a},b));var d=b.comparator;
c.sortKey&&!d&&this.setSorting(c.sortKey,c.order,b);"server"!=e&&(e=this.fullCollection,d&&b.full&&(this.comparator=null,e.comparator=d),b.full&&e.sort(),a&&!H(a)&&(this.reset(a,p({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models))));this._initState=v(this.state)},_makeFullCollection:function(a,b){var e=["url","model","sync","comparator"],c=this.constructor.prototype,d,f={};var g=0;for(d=e.length;g<d;g++){var h=e[g];z(c[h])||(f[h]=c[h])}a=new (l.Collection.extend(f))(a,
b);g=0;for(d=e.length;g<d;g++)h=e[g],this[h]!==c[h]&&(a[h]=this[h]);return a},_makeCollectionEventHandler:function(a,b){return function(e,c,d,f){var g=a._handlers;q(y(g),function(d){var c=g[d];a.off(d,c);b.off(d,c)});var h=v(a.state),t=h.firstPage,k=h.pageSize,m=(0===t?h.currentPage:h.currentPage-1)*k,l=m+k;if("add"==e){var n;f=f||{};if(d==b){var u=b.indexOf(c);if(u>=m&&u<l){var r=a;var w=n=u-m}}else w=a.indexOf(c),u=m+w,r=b,n=z(f.at)?u:f.at+m;f.onRemove||(++h.totalRecords,delete f.onRemove);a.state=
a._checkState(h);if(r){r.add(c,p({},f||{},{at:n}));var P=w>=k?c:!z(f.at)&&n<l&&a.length>k?a.at(k):null;P&&G(d,e,function(){a.remove(P,{onAdd:!0})})}}if("remove"==e)if(f.onAdd)delete f.onAdd;else{--h.totalRecords?(w=h.totalPages=C(h.totalRecords/k),h.lastPage=0===t?w-1:w||t,h.currentPage>w&&(h.currentPage=h.lastPage)):(h.totalRecords=null,h.totalPages=null);a.state=a._checkState(h);var E;t=f.index;d==a?((E=b.at(l))?G(a,e,function(){a.push(E,{onRemove:!0})}):!a.length&&h.totalRecords&&a.reset(b.models.slice(m-
k,l-k),p({},f,{parse:!1})),b.remove(c)):t>=m&&t<l&&((E=b.at(l-1))&&G(a,e,function(){a.push(E,{onRemove:!0})}),a.remove(c),!a.length&&h.totalRecords&&a.reset(b.models.slice(m-k,l-k),p({},f,{parse:!1})))}"reset"==e&&(f=d,d=c,d==a&&null==f.from&&null==f.to?(h=b.models.slice(0,m),k=b.models.slice(m+a.models.length),b.reset(h.concat(a.models).concat(k),f)):d==b&&((h.totalRecords=b.models.length)||(h.totalRecords=null,h.totalPages=null),"client"==a.mode&&(h.lastPage=h.currentPage=h.firstPage),a.state=a._checkState(h),
a.reset(b.models.slice(m,l),p({},f,{parse:!1}))));"sort"==e&&(f=d,c===b&&a.reset(b.models.slice(m,l),p({},f,{parse:!1})));q(y(g),function(d){var c=g[d];q([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,e=this.links,c=a.totalRecords,d=a.pageSize,f=a.currentPage,g=a.firstPage;if(null!=c&&null!=d&&null!=f&&null!=g&&("infinite"==b?e:1)){c=n(c,"totalRecords");d=n(d,"pageSize");f=n(f,"currentPage");g=n(g,"firstPage");if(1>d)throw new RangeError("`pageSize` must be \x3e\x3d 1");
c=a.totalPages=C(c/d);if(0>g||1<g)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===g?J(0,c-1):c||g;if("infinite"==b){if(!e[f+""])throw new RangeError("No link found for page "+f);}else if(f<g||0<c&&(g?f>c:f>=c))throw new RangeError("`currentPage` must be firstPage \x3c\x3d currentPage "+(g?"\x3e":"\x3e\x3d")+" totalPages if "+g+"-based. Got "+f+".");}return a},setPageSize:function(a,b){a=n(a,"pageSize");b=b||{first:!1};var e=this.state,c=C(e.totalRecords/a),d=c?J(e.firstPage,N(c*
e.currentPage/e.totalPages)):e.firstPage;e=this.state=this._checkState(p({},e,{pageSize:a,currentPage:b.first?e.firstPage:d,totalPages:c}));return this.getPage(e.currentPage,r(b,["first"]))},switchMode:function(a,b){if(!L(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');b=b||{fetch:!0,resetState:!0};var e=this.state=b.resetState?v(this._initState):this._checkState(p({},this.state));this.mode=a;var c=this,d=this.fullCollection,f=this._handlers=
this._handlers||{},g;if("server"==a||d)"server"==a&&d&&(q(y(f),function(a){g=f[a];c.off(a,g);d.off(a,g)}),delete this._handlers,this._fullComparator=d.comparator,delete this.fullCollection);else{d=this._makeFullCollection(b.models||[],b);d.pageableCollection=this;this.fullCollection=d;var h=this._makeCollectionEventHandler(this,d);q(["add","remove","reset","sort"],function(a){f[a]=g=k.bind(h,{},a);c.on(a,g);d.on(a,g)});d.comparator=this._fullComparator}if("infinite"==a){a=this.links={};var t=e.firstPage,
l=C(e.totalRecords/e.pageSize);t=0===t?J(0,l-1):l||t;for(e=e.firstPage;e<=t;e++)a[e]=this.url}else this.links&&delete this.links;return b.fetch?this.fetch(r(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",
a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var e=this.mode,c=this.fullCollection;b=b||{fetch:!1};var d=this.state,f=d.firstPage,g=d.currentPage,h=d.lastPage,k=d.pageSize;switch(a){case "first":a=f;break;case "prev":a=g-1;break;case "next":a=g+1;break;case "last":a=h;break;default:a=n(a,"index")}this.state=this._checkState(p({},d,{currentPage:a}));b.from=g;b.to=a;d=(0===f?a:a-1)*k;c=c&&c.length?c.models.slice(d,
d+k):[];if(("client"==e||"infinite"==e&&!H(c))&&!b.fetch)return this.reset(c,r(b,"fetch")),this;"infinite"==e&&(b.url=this.links[a]);return this.fetch(r(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be \x3e 0`");a=n(a);a=N(a/this.state.pageSize);0!==this.state.firstPage&&a++;a>this.state.lastPage&&(a=this.state.lastPage);return this.getPage(a,b)},sync:function(a,b,e){var c=this;if("infinite"==c.mode){var d=e.success,f=c.state.currentPage;e.success=function(a,
b,k){var g=c.links,h=c.parseLinks(a,p({xhr:k},e));h.first&&(g[c.state.firstPage]=h.first);h.prev&&(g[f-1]=h.prev);h.next&&(g[f+1]=h.next);d&&d(a,b,k)}}return(D.sync||l.sync).call(c,a,b,e)},parseLinks:function(a,b){var e={};if(a=b.xhr.getResponseHeader("Link")){var c=["first","prev","next"];q(a.split(","),function(a){a=a.split(";");var b=a[0].replace(S,"");a=a.slice(1);q(a,function(a){var d=a.split("\x3d");a=d[0].replace(O,"");d=d[1].replace(O,"");"rel"==a&&L(c,d)&&(e[d]=b)})})}return e},parse:function(a,
b){var e=this.parseState(a,v(this.queryParams),v(this.state),b);e&&(this.state=this._checkState(p({},this.state,e)));return this.parseRecords(a,b)},parseState:function(a,b,e,c){if(a&&2===a.length&&M(a[0])&&A(a[1])){var d=v(e),f=a[0];q(I(r(b,"directions")),function(a){var b=a[0];a=a[1];var c=f[a];z(c)||k.isNull(c)||(d[b]=f[a])});f.order&&(d.order=1*R(b.directions)[f.order]);return d}},parseRecords:function(a,b){return a&&2===a.length&&M(a[0])&&A(a[1])?a[1]:a},fetch:function(a){a=a||{};var b=this._checkState(this.state),
e=this.mode;"infinite"!=e||a.url||(a.url=this.links[b.currentPage]);var c=a.data||{},d=a.url||this.url||"";B(d)&&(d=d.call(this));var f=d.indexOf("?");-1!=f&&(p(c,F(d.slice(f+1))),d=d.slice(0,f));a.url=d;a.data=c;var g="client"==this.mode?K(this.queryParams,"sortKey","order"):r(K(this.queryParams,y(x.queryParams)),"directions"),h=I(g);d=v(this);for(f=0;f<h.length;f++){var k=h[f];var l=k[0];var m=k[1];m=B(m)?m.call(d):m;null!=b[l]&&null!=m&&(c[m]=b[l])}b.sortKey&&b.order?(f=B(g.order)?g.order.call(d):
g.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[g.order];b=I(r(this.queryParams,y(x.queryParams)));for(f=0;f<b.length;f++)k=b[f],m=k[1],m=B(m)?m.call(d):m,null!=m&&(c[k[0]]=m);if("server"!=e){var n=this,q=this.fullCollection,u=a.success;a.success=function(b,d,c){c=c||{};z(a.silent)?delete c.silent:c.silent=a.silent;var f=b.models;"client"==e?q.reset(f,c):(q.add(f,p({at:q.length},p(c,{parse:!1}))),n.trigger("reset",n,c));u&&u(b,d,c)};return D.fetch.call(this,p({},a,{silent:!0}))}return D.fetch.call(this,
a)},_makeComparator:function(a,b,e){var c=this.state;a=a||c.sortKey;b=b||c.order;if(a&&b)return e||(e=function(a,b){return a.get(b)}),function(c,f){c=e(c,a);f=e(f,a);if(1===b){var d=c;c=f;f=d}return c===f?0:c<f?-1:1}},setSorting:function(a,b,e){var c=this.state;c.sortKey=a;c.order=b=b||c.order;c=this.fullCollection;var d=!1,f=!1;a||(d=f=!0);var g=this.mode;e=p({side:"client"==g?g:"server",full:!0},e);a=this._makeComparator(a,b,e.sortValue);b=e.full;e=e.side;"client"==e?b?(c&&(c.comparator=a),d=!0):
(this.comparator=a,f=!0):"server"!=e||b||(this.comparator=a);d&&(this.comparator=null);f&&c&&(c.comparator=null);return this}}),x=Q.prototype;return Q})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-navigation-infinite-view.js' */
define("widget/permissions/views/permissions-navigation-infinite-view",["underscore","marionette","widget/permissions/permissions-templates"],function(i,e,t){"use strict";return e.ItemView.extend({template:t.infiniteNavigation,ui:{loadMore:".permissions-navigation__load-more",spinner:".permissions-navigation__spinner"},events:{"click @ui.loadMore":"loadMoreClickHandler"},collectionEvents:{"add remove reset":"onCollectionChange"},onCollectionChange:function(){this.toggleNavigation(),this.collection.isEmpty()&&this.hasMorePages()&&this.loadFirstPage()},loadMoreClickHandler:function(i){i.preventDefault(),this.loadNextPage()},hasMorePages:function(){var i=this.collection.state;return null!==i.lastPage&&i.lastPage!==i.currentPage},loadFirstPage:function(){this.toggleLoading(!0),this.collection.getFirstPage({remove:!1,merge:!1,add:!0}).always(this.toggleNavigation.bind(this))},loadNextPage:function(){this.hasMorePages()&&(this.toggleLoading(!0),this.collection.getNextPage({remove:!1,merge:!1,add:!0}).always(this.toggleNavigation.bind(this)))},toggleNavigation:function(){this.$el.toggle(this.hasMorePages()),this.toggleLoading(!1)},toggleLoading:function(i){this.ui.loadMore.prop("disabled",i),i?this.ui.spinner.spin():this.ui.spinner.spinStop()},serializeData:function(){return{colspan:this.options.columns.length+2}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-row-view.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var i=0,s=Array(e.length);i<e.length;i++)s[i]=e[i];return s}return Array.from(e)}define("widget/permissions/views/permissions-row-view",["underscore","jquery","ajs","marionette","util/errors","widget/permissions/permissions-templates","widget/permissions/permissions-error","widget/permissions/views/cell/permissions-cell-empty-view","widget/permissions/views/cell/permissions-cell-yes-no-view"],function(e,i,s,n,r,t,o,m,l){"use strict";return n.ItemView.extend({tagName:"tr",className:"permissions-row",template:t.entry,ui:{permissionCell:".permissions-row__cell--permission",remove:".permissions-list__remove-entry",removeSpinner:".permissions-list__remove-spinner"},events:{mouseover:"mouseoverHandler",mouseleave:"mouseleaveHandler","click @ui.remove":"removeClickHandler"},initialize:function(){var i=this;this.childParentDependencies={},this.options.columns.map(function(e){return e.permission}).forEach(function(e){i.childParentDependencies[e]=[]}),e.keys(this.options.dependencies).forEach(function(e){return i.options.dependencies[e].forEach(function(s){return i.childParentDependencies[s].push(e)})})},onRender:function(){this.initPermissionCells()},mouseoverHandler:function(){this.canRemoveEntity()&&this.ui.remove.show()},mouseleaveHandler:function(){this.canRemoveEntity()&&this.ui.remove.hide()},removeClickHandler:function(e){e.preventDefault(),this.removeEntry()},initPermissionCells:function(){this.cellViews=[];var e=this.ui.permissionCell;this.options.columns.forEach(function(i,s){if(this.options.columnPredicate(this.model.getEntryName(),i)){var n=l.create(e.eq(s),this.prepareYesNoPermission(i));this.cellViews.push(n),this.listenTo(n,"permissions:add",this.addPermissions),this.listenTo(n,"permissions:remove",this.removePermissions)}else this.cellViews.push(m.create(e.eq(s)))},this)},prepareYesNoPermission:function(e){var s=i.extend(!0,{},e),n=this.model;n.hasPermission(e.permission)&&(s.isChecked=!0);var r=n.getControlledPermissions().indexOf(e.permission)!==-1,t=this.isPermissionDependent(e.permission);return(!r||s.isChecked&&t)&&(s.isDisabled=!0),s},isPermissionDependent:function(e){var i=this;return this.childParentDependencies[e].some(function(e){return i.model.hasPermission(e)})},addPermissions:function(i,s){for(var n=this,t=this.model.getPermissions(),o=e.chain(s).filter(function(e){return t.indexOf(e)===-1}).uniq().value(),m=[].concat(_toConsumableArray(o));m.length;){var c=m.pop(),a=this.options.dependencies[c];a&&(m.push.apply(m,_toConsumableArray(a)),o.push.apply(o,_toConsumableArray(a)))}o.length?this.model.save(e.uniq(o)).done(this.triggerEntryModified.bind(this)).done(function(){return i.triggerMethod("permissions:add:success")}).done(function(){var i=e.chain(n.model.getPermissions()).filter(function(e){return n.isPermissionDependent(e)}).value();n.cellViews.filter(function(e){return e instanceof l}).filter(function(e){return i.indexOf(e.options.permission)!==-1}).forEach(function(e){return e.checkAndDisableCheckbox()})}).fail(r).fail(function(){return i.triggerMethod("permissions:add:error")}):i.triggerMethod("permissions:add:success")},removePermissions:function(i,s){var n=this,t=this.model.getPermissions(),o=s.filter(function(e){return t.indexOf(e)!==-1});o.length?this.model.destroyPermissions(o).done(this.triggerEntryModified.bind(this)).done(function(){var i=e.chain(n.model.getPermissions()).filter(function(e){return!n.isPermissionDependent(e)}).value();n.cellViews.filter(function(e){return e instanceof l}).filter(function(e){return i.indexOf(e.options.permission)!==-1}).forEach(function(e){return e.enableCheckbox()})}).done(function(){return i.triggerMethod("permissions:remove:success")}).fail(r).fail(function(){return i.triggerMethod("permissions:remove:error")}):i.triggerMethod("permissions:remove:success")},removeEntry:function(){if(!this.canRemoveEntity())throw new o("Deleting entries is not allowed.");var e=this.ui.removeSpinner,i=this.options.eventBus,n=s.escapeHtml(this.model.getEntryDisplayName());e.spin(),this.model.destroy({wait:!0}).fail(function(){e.spinStop()}).done(function(){i.trigger("PERMISSION_ANALYTICS:ENTRY_REMOVED"),i.trigger("notification:success",s.format("\u003cstrong\u003e{0}\u003c/strong\u003e has been removed.",n))})},triggerEntryModified:function(){this.options.eventBus.trigger("PERMISSION_ANALYTICS:ENTRY_MODIFIED")},serializeData:function(){return{displayName:this.model.getEntryDisplayName(),columns:this.options.columns,canRemove:this.canRemoveEntity()}},canRemoveEntity:function(){var e=this;return this.options.canRemove&&this.model.getPermissions().every(function(i){return e.model.getControlledPermissions().indexOf(i)!==-1})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-filter-view.js' */
define("widget/permissions/views/permissions-filter-view",["underscore","marionette","widget/permissions/permissions-templates"],function(i,e,t){"use strict";return e.ItemView.extend({template:t.filter,ui:{filter:".permissions-filter__query",icon:".permissions-filter__icon"},events:{submit:"submitHandler",input:"inputHandler","click @ui.icon":"iconClickHandler"},initialize:function(){this.requestDebounce=i.debounce(this.request.bind(this),300)},submitHandler:function(i){i.preventDefault(),this.filter(!0)},iconClickHandler:function(){this.filter(!0)},inputHandler:function(){this.filter()},filter:function(i){i?this.request():this.requestDebounce()},request:function(){this.model.set("filter",this.ui.filter.val().trim()).trigger("set")},serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/models/permissions-model.js' */
function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}define("widget/permissions/models/permissions-model",["underscore","backbone","util/request"],function(t,i,n){"use strict";var s=n(window,{redirectIfUnauthorised:!1});return i.Model.extend({sync:s.sync,idAttribute:"name",defaults:{permissions:[]},initialize:function(){this.url=this.urlRoot+"/"+encodeURIComponent(this.id)},save:function(t){return t||(t=this.getPermissions()),i.Model.prototype.save.call(this,null,{data:JSON.stringify(t),contentType:"application/json",context:this}).done(function(){this.addPermissions(t)})},destroy:function(n){return i.Model.prototype.destroy.call(this,t.extend({},n,{data:JSON.stringify(this.controls),contentType:"application/json"}))},destroyPermissions:function(t){return this.sync("delete",this,{data:JSON.stringify(t),contentType:"application/json",context:this}).done(function(i){this.removePermissions(t),this.trigger("sync",this,i)}).fail(function(t){this.trigger("error",this,t)})},getEntryName:function(){return this.get("name")},getEntryDisplayName:function(){return this.get("displayName")},getPermissions:function(){return this.get("permissions").slice()},setPermissions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.set("permissions",[].concat(_toConsumableArray(t)))},hasPermission:function(t){return this.getPermissions().indexOf(t)!==-1},modifyPermissions:function(i){var n=i.call(this,this.getPermissions()),s=this.getPermissions(),e=t.intersection(n,s);(s.length===n.length&&e.length===n.length)==!1&&this.set("permissions",n)},addPermissions:function(t){this.modifyPermissions(function(i){return t.forEach(function(t){i.indexOf(t)===-1&&i.push(t)}),i})},removePermissions:function(t){this.modifyPermissions(function(i){return t.forEach(function(t){var n=i.indexOf(t);n!==-1&&i.splice(n,1)}),i})},getControlledPermissions:function(){return this.controls}},{create:function(t,i,n){return new this.prototype.constructor({permissions:i,name:t,displayName:n||t})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/collections/permissions-any-of-collection.js' */
define("widget/permissions/collections/permissions-any-of-collection",["underscore","backbone"],function(e,t){"use strict";return t.Collection.extend({toggleByText:function(e,t){this.toggle(this.getByText(e),t)},toggleByPermission:function(e,t){this.toggle(this.getByPermission(e),t)},toggle:function(e,t){e.set({isChecked:t})},getByText:function(e){return this.findWhere({text:e})},getByPermission:function(e){return this.filter(function(t){return t.get("permissions").indexOf(e)!==-1})[0]},getSelected:function(){return this.where({isChecked:!0})},getSelectedPermissions:function(){return e.unique(e.flatten(this.getSelected().map(function(e){return e.get("permissions")})))},clearSelection:function(){this.forEach(function(e){return e.set({isChecked:!1})})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-notifications.js' */
define("widget/permissions/permissions-notification",["aui/flag"],function(s){"use strict";function t(s){this.eventBus=s,this.attachListeners()}return t.prototype={attachListeners:function(){this.eventBus.on("notification:error",this.showError).on("notification:success",this.showSuccess)},showError:function(t){s({type:"error",close:"manual",body:t})},showSuccess:function(t){s({type:"success",close:"auto",body:t})}},t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/abstract/permissions-abstract-cell-view.js' */
define("widget/permissions/views/abstract/permissions-abstract-cell-view",["jquery","underscore","marionette"],function(e,s,r){"use strict";var n=["permissions:add","permissions:remove"],i=["permissions:add:success","permissions:remove:success"],o=["permissions:add:error","permissions:remove:error"];return r.ItemView.extend({template:null,initialize:function(){var e=this;n.forEach(function(s){return e.on(s,e.onPermissionsChange)}),i.forEach(function(s){return e.on(s,e.onPermissionsChangeSuccess)}),o.forEach(function(s){return e.on(s,e.onPermissionsChangeError)})},onPermissionsChange:e.noop,onPermissionsChangeSuccess:e.noop,onPermissionsChangeError:e.noop,triggerAdd:function(e){this.triggerMethod("permissions:add",this,e)},triggerRemove:function(e){this.triggerMethod("permissions:remove",this,e)}},{create:function(e,r){return new this(s.extend({},r,{el:e})).render()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-header-view.js' */
define("widget/permissions/views/permissions-header-view",["underscore","marionette","widget/permissions/permissions-templates"],function(e,i,t){"use strict";return i.ItemView.extend({tagName:"tr",template:t.header,serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/preset/permissions-preset-any-of-view.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}define("widget/permissions/views/preset/permissions-preset-any-of-view",["underscore","jquery","marionette","widget/permissions/permissions-templates","widget/permissions/collections/permissions-any-of-collection"],function(e,n,t,i,o){"use strict";return t.ItemView.extend({template:i.anyOfPreset,events:{"aui-dropdown2-show":"onDropdownShow"},ui:{checkbox:".permissions-add__preset-checkbox--any-of"},initialize:function(){this.collection=new o(this.options.items)},onDropdownShow:function(e){n(e.target).off("change.permission-preset").on("change.permission-preset",".permissions-add__preset-checkbox--any-of",this.onCheckboxChange.bind(this))},onCheckboxChange:function(e){var n=this,t=e.target.checked;this.collection.toggleByText(e.target.value,t),t?this.getDependentPermissions().forEach(function(e){return n.checkAndDisableCheckbox(e)}):this.getIndependentPermissions().forEach(function(e){return n.enableCheckbox(e)})},getSelectedPermissionNames:function(){return this.collection.getSelectedPermissions()},getDependentPermissionNames:function(){var n=this,t=function e(t){var i=n.options.dependencies[t]||[],o=[].concat(_toConsumableArray(i));return i.forEach(function(n){return o.push.apply(o,_toConsumableArray(e(n)))}),o};return e.chain(this.getSelectedPermissionNames()).map(t).flatten().uniq().value()},getDependentPermissions:function(){var n=this;return e.chain(this.getDependentPermissionNames()).map(function(e){return n.collection.getByPermission(e)}).value()},getIndependentPermissions:function(){var e=this.getDependentPermissionNames();return this.collection.filter(function(n){return n.get("permissions").every(function(n){return!(e.indexOf(n)!==-1)})})},clearSelection:function(){this.collection.clearSelection(),this.ui.checkbox.prop("checked",!1),this.ui.checkbox.prop("disabled",!1)},checkAndDisableCheckbox:function(e){this.collection.toggleByText(e.get("text"),!0),this.findCheckbox(e).prop("checked",!0).prop("disabled",!0)},enableCheckbox:function(e){this.findCheckbox(e).prop("disabled",!1)},findCheckbox:function(e){return this.ui.checkbox.filter('[value="'+e.get("text")+'"]')},serializeData:function(){return e.extend({},this.options,{id:e.uniqueId("permissions-preset-unique-id-")})}},{create:function(n,t,i){return new this(e.extend({},t,i,{el:n})).render()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-analytics.js' */
define("widget/permissions/permissions-analytics",["util/analytics-base"],function(t){"use strict";return t.extend({eventName:"bamboo.permissions.changed",getAnalyticsData:function(t){return{changeType:t,entryType:this.options.entryType,entityType:this.options.entityType}},register:function(){var t=this;return{"PERMISSION_ANALYTICS:ENTRY_ADDED":[this.eventName,function(){return t.getAnalyticsData("ENTRY_ADDED")}],"PERMISSION_ANALYTICS:ENTRY_REMOVED":[this.eventName,function(){return t.getAnalyticsData("ENTRY_REMOVED")}],"PERMISSION_ANALYTICS:ENTRY_MODIFIED":[this.eventName,function(){return t.getAnalyticsData("ENTRY_MODIFIED")}]}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-list-view.js' */
define("widget/permissions/views/permissions-list-view",["underscore","marionette","widget/permissions/views/permissions-row-view","widget/permissions/views/permissions-empty-view"],function(e,i,n,s){"use strict";return i.CollectionView.extend({childView:n,emptyView:s,childViewOptions:function(){return e.pick(this.options,["eventBus","columns","columnPredicate","canRemove","dependencies"])},emptyViewOptions:function(){return{collection:this.collection,notFoundText:this.options.notFoundText,colspan:this.options.columns.length+2}},collectionEvents:{request:"onRequest","sync error destroy":"onComplete"},onRequest:function(){this.toggleSyncingClass(!0)},onComplete:function(){this.toggleSyncingClass(!1)},toggleSyncingClass:function(e){this.$el.toggleClass("permissions-list--syncing",e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/cell/permissions-cell-empty-view.js' */
define("widget/permissions/views/cell/permissions-cell-empty-view",["widget/permissions/permissions-templates","widget/permissions/views/abstract/permissions-abstract-cell-view"],function(e,s){"use strict";return s.extend({template:e.emptyCell})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-title-view.js' */
define("widget/permissions/views/permissions-title-view",["underscore","marionette","widget/permissions/permissions-templates"],function(e,i,t){"use strict";return i.ItemView.extend({template:t.title,serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions.js' */
define("widget/permissions",["underscore","ajs","backbone","widget/permissions/permissions-props","widget/permissions/permissions-notification","widget/permissions/permissions-error","widget/permissions/collections/permissions-collection","widget/permissions/models/permissions-model","widget/permissions/views/permissions-layout-view","widget/permissions/views/permissions-add-view","widget/permissions/views/permissions-title-view","widget/permissions/views/permissions-filter-view","widget/permissions/views/permissions-header-view","widget/permissions/views/permissions-list-view","widget/permissions/views/permissions-navigation-infinite-view","widget/permissions/permissions-analytics"],function(e,i,n,t,s,o,r,a,c,d,l,m,p,u,f,w){"use strict";var v=["container","endpoint","controls","columns","presets","searchEndpoint","dependencies","columnPredicate","searchPlaceholder","formatEntity","formatSearchResult","pageSize","navigationType","entryColumnLabel","filterPlaceholder","title","notFoundText","canAdd","canRemove","analytics"],y=function(e,n){n.forEach(function(n){if(void 0===e[n])throw new o(i.format('option "{0}" is required',n))})},g=function(e,n){n.forEach(function(n){if(0===e[n].length)throw new o(i.format('option "{0}" cannot be empty',n))})},h=function(e){var i=["controls","container","columns","searchEndpoint"],n=["columns"];e.canAdd&&(i.push("presets"),n.push("presets")),y(e,i),g(e,n),e.columns.forEach(function(e){y(e,["label","permission"])}),e.presets&&e.presets.forEach(function(e){y(e,["label","items"]),g(e,["items"]),e.items.forEach(function(e){y(e,["text","permissions"])})}),e.analytics&&y(e.analytics,["entityType","entryType"])},E=function(i){e.defaults(i,{dependencies:{},formatSearchResult:function(e){return e.name},formatEntity:function(e){return e.name},columnPredicate:function(){return!0},navigationType:t.NAVIGATION_TYPES.infinite,searchPlaceholder:"Pick one or more items",entryColumnLabel:"Name",filterPlaceholder:"Search by name",notFoundText:"No results found",canAdd:!0,canRemove:!0,analytics:null})};return function(i){h(i),E(i);var o=new n.Model({filter:""}),y=e.pick(i,v),g=void 0;switch(y.navigationType){case t.NAVIGATION_TYPES.infinite:default:g=f}var P=a.extend({urlRoot:y.endpoint,controls:y.controls}),T=r.extend({url:y.endpoint,model:P,state:e.extend({},r.prototype.state,e.pick(y,"pageSize")),queryParams:e.extend({},r.prototype.queryParams,{name:function(){return o.get("filter")}})}),A=e.extend({},n.Events);new s(A);var x=new T([],{formatEntity:y.formatEntity}),b=y.analytics,V=i.canAdd,N=i.canRemove,R=c.create(e.extend({},y,{eventBus:A,collection:x,filterModel:o,AddView:d,TitleView:l,FilterView:m,HeaderView:p,ListView:u,NavigationView:g,canAdd:V,canRemove:N}));return R.$el.appendTo(i.container),x.loadFirstPage(),o.on("set",function(){x.loadFirstPage()}),e.isEmpty(b)||w.create(A,void 0,b),R}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-props.js' */
define("widget/permissions/permissions-props",[],function(){"use strict";return{NAVIGATION_TYPES:{infinite:"infinite"}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions.soy' */
// This file was automatically generated from permissions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.permissions.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.permissions == 'undefined') { bamboo.widget.permissions = {}; }


bamboo.widget.permissions.contents = function(opt_data, opt_ignored) {
  return '<div class="permissions-title"></div>' + aui.form.form({action: '#', extraClasses: 'permissions-filter', content: ''}) + '<div class="permissions-add"></div><table class="permissions-table aui"><thead class="permissions-header"></thead><tbody class="permissions-list permissions-list--syncing"></tbody><tbody class="permissions-navigation"></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.contents.soyTemplateName = 'bamboo.widget.permissions.contents';
}


bamboo.widget.permissions.title = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.title) + '</h3>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.title.soyTemplateName = 'bamboo.widget.permissions.title';
}


bamboo.widget.permissions.filter = function(opt_data, opt_ignored) {
  return '' + aui.form.input({type: 'text', name: 'name', extraClasses: 'permissions-filter__query full-width-field doNotDisableInConfigReadOnlyMode', placeholderText: opt_data.filterPlaceholder, autocomplete: 'off', value: ''}) + aui.icons.icon({extraClasses: 'permissions-filter__icon', icon: 'search-small', size: 'small', useIconFont: true});
};
if (goog.DEBUG) {
  bamboo.widget.permissions.filter.soyTemplateName = 'bamboo.widget.permissions.filter';
}


bamboo.widget.permissions.header = function(opt_data, opt_ignored) {
  var output = '';
  var className__soy27 = 'permissions-header__column';
  output += '<tr><th class="' + soy.$$escapeHtml(className__soy27) + '">' + soy.$$escapeHtml(opt_data.entryColumnLabel) + '</th>';
  var columnList34 = opt_data.columns;
  var columnListLen34 = columnList34.length;
  for (var columnIndex34 = 0; columnIndex34 < columnListLen34; columnIndex34++) {
    var columnData34 = columnList34[columnIndex34];
    output += '<th class="' + soy.$$escapeHtml(className__soy27) + '">' + soy.$$escapeHtml(columnData34.label) + '</th>';
  }
  output += '<th class="' + soy.$$escapeHtml(className__soy27) + '"></th></tr>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.header.soyTemplateName = 'bamboo.widget.permissions.header';
}


bamboo.widget.permissions.add = function(opt_data, opt_ignored) {
  var output = '';
  var content__soy45 = '<div class="permissions-add__cell">' + aui.form.input({type: 'text', autofocus: 'off', name: 'items', id: opt_data.itemsId, extraClasses: 'full-width-field permissions-add__items', placeholderText: opt_data.searchPlaceholder, value: ''}) + '</div>';
  var presetList56 = opt_data.presets;
  var presetListLen56 = presetList56.length;
  for (var presetIndex56 = 0; presetIndex56 < presetListLen56; presetIndex56++) {
    var presetData56 = presetList56[presetIndex56];
    content__soy45 += '<div class="permissions-add__cell permissions-add__cell--preset"></div>';
  }
  content__soy45 += '<div class="permissions-add__cell permissions-add__cell--add">' + aui.form.submit({type: 'primary', text: 'Add', extraClasses: 'permissions-add__submit'}) + '</div>';
  output += aui.form.form({action: '#', extraClasses: 'permissions-add__form', content: content__soy45});
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.add.soyTemplateName = 'bamboo.widget.permissions.add';
}


bamboo.widget.permissions.anyOfPreset = function(opt_data, opt_ignored) {
  var output = '';
  var content__soy70 = '';
  var itemList71 = opt_data.items;
  var itemListLen71 = itemList71.length;
  for (var itemIndex71 = 0; itemIndex71 < itemListLen71; itemIndex71++) {
    var itemData71 = itemList71[itemIndex71];
    content__soy70 += aui.form.label({extraClasses: 'permissions-add__preset-item--any-of', content: '' + aui.form.input({type: 'checkbox', name: 'preset', extraClasses: 'permissions-add__preset-checkbox--any-of', isDisabled: itemData71.isDisabled, isChecked: itemData71.isChecked, value: itemData71.text}) + soy.$$escapeHtml(itemData71.text)});
  }
  var menu__soy84 = {id: opt_data.id, extraClasses: 'aui-style-default permissions-add__preset-content permissions-add__preset-content--any-of', content: content__soy70};
  var trigger__soy85 = {menu: menu__soy84, tagName: 'button', extraClasses: 'aui-button aui-button-light permissions-add__preset-trigger', text: opt_data.label};
  output += aui.dropdown2.dropdown2({trigger: trigger__soy85, menu: menu__soy84});
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.anyOfPreset.soyTemplateName = 'bamboo.widget.permissions.anyOfPreset';
}


bamboo.widget.permissions.entry = function(opt_data, opt_ignored) {
  var output = '<td class="permissions-row__principal">' + soy.$$escapeHtml(opt_data.displayName) + '</td>';
  var className__soy93 = 'permissions-row__cell';
  var columnList95 = opt_data.columns;
  var columnListLen95 = columnList95.length;
  for (var columnIndex95 = 0; columnIndex95 < columnListLen95; columnIndex95++) {
    var columnData95 = columnList95[columnIndex95];
    output += '<td class="' + soy.$$escapeHtml(className__soy93) + ' ' + soy.$$escapeHtml(className__soy93) + '--permission"></td>';
  }
  output += '<td>' + ((opt_data.canRemove) ? '<span class="permissions-list__remove-spinner"></span>' + bamboo.widget.permissions.removeButton(null) : '') + '</td>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.entry.soyTemplateName = 'bamboo.widget.permissions.entry';
}


bamboo.widget.permissions.emptyRow = function(opt_data, opt_ignored) {
  return '<td class="table-empty-message__content ' + ((opt_data.isLoading) ? 'table-empty-message__content--loading' : '') + '" colspan="' + soy.$$escapeHtml(opt_data.colspan) + '">' + ((opt_data.isLoading) ? soy.$$escapeHtml("Loading...") : '<div class="empty-text light full-size">' + soy.$$escapeHtml(opt_data.notFoundText) + '</div>') + '</td>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.emptyRow.soyTemplateName = 'bamboo.widget.permissions.emptyRow';
}


bamboo.widget.permissions.yesNoCell = function(opt_data, opt_ignored) {
  return aui.form.input({type: 'checkbox', extraClasses: 'permissions-cell__permission-toggle', isDisabled: opt_data.isDisabled, isChecked: opt_data.isChecked, value: opt_data.label}) + '<div class="permissions-cell__spinner"></div>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.yesNoCell.soyTemplateName = 'bamboo.widget.permissions.yesNoCell';
}


bamboo.widget.permissions.emptyCell = function(opt_data, opt_ignored) {
  return '<span></span>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.emptyCell.soyTemplateName = 'bamboo.widget.permissions.emptyCell';
}


bamboo.widget.permissions.removeButton = function(opt_data, opt_ignored) {
  return '<a href="#" class="permissions-list__remove-entry">' + aui.icons.icon({icon: 'remove', useIconFont: true}) + '</a>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.removeButton.soyTemplateName = 'bamboo.widget.permissions.removeButton';
}


bamboo.widget.permissions.infiniteNavigation = function(opt_data, opt_ignored) {
  return '<tr colspan="' + soy.$$escapeHtml(opt_data.colspan) + '"><td><a href="#" class="permissions-navigation__load-more">Load more</a><span class="permissions-navigation__spinner"></span></td></tr>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.infiniteNavigation.soyTemplateName = 'bamboo.widget.permissions.infiniteNavigation';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/cell/permissions-cell-yes-no-view.js' */
define("widget/permissions/views/cell/permissions-cell-yes-no-view",["jquery","widget/permissions/permissions-templates","widget/permissions/views/abstract/permissions-abstract-cell-view"],function(e,i,s){"use strict";return s.extend({template:i.yesNoCell,ui:{spinner:".permissions-cell__spinner",toggle:".permissions-cell__permission-toggle"},events:{"change @ui.toggle":"toggleChangeHandler"},toggleChangeHandler:function(i){var s=this;this.showSpinner(),this.responsePromise=e.Deferred();var n=e.Deferred(),t=e.fx.off?0:500;setTimeout(function(){return n.resolve()},t),e.when(this.responsePromise,n).always(function(){return s.hideSpinner()}),i.currentTarget.checked?this.triggerAdd([this.options.permission]):this.triggerRemove([this.options.permission])},onPermissionsChangeSuccess:function(){this.responsePromise&&this.responsePromise.resolve()},onPermissionsChangeError:function(){this.ui.toggle.prop("checked",!this.ui.toggle.prop("checked")),this.responsePromise&&this.responsePromise.reject()},checkAndDisableCheckbox:function(){this.ui.toggle.prop("checked",!0),this.ui.toggle.prop("disabled",!0)},enableCheckbox:function(){this.ui.toggle.prop("disabled",!1)},showSpinner:function(){this.ui.toggle.hide(),this.ui.spinner.spin()},hideSpinner:function(){this.ui.spinner.spinStop(),this.ui.toggle.show()},serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-templates.js' */
define("widget/permissions/permissions-templates",[],function(){"use strict";return bamboo.widget.permissions});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-empty-view.js' */
define("widget/permissions/views/permissions-empty-view",["underscore","marionette","widget/permissions/permissions-templates"],function(e,t,s){"use strict";return t.ItemView.extend({tagName:"tr",className:"table-empty-message",template:s.emptyRow,collectionEvents:{request:"onRequest","sync error destroy":"onComplete"},onRequest:function(){this.isLoading=!0,this.render()},onComplete:function(){this.isLoading=!1,this.render()},serializeData:function(){return{isLoading:this.isLoading,notFoundText:this.options.notFoundText,colspan:this.options.colspan}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-layout-view.js' */
define("widget/permissions/views/permissions-layout-view",["underscore","backbone","marionette","widget/permissions/permissions-templates"],function(e,i,s,t){"use strict";return s.ItemView.extend({className:"permissions",template:t.contents,ui:{add:".permissions-add",title:".permissions-title",filter:".permissions-filter",header:".permissions-header",list:".permissions-list",navigation:".permissions-navigation"}},{create:function(s){var t=new this(s).render(),n=function(i,t,n){new i(e.extend({},s,n,{el:t})).render()};return s.canAdd&&n(s.FilterView,t.ui.filter,{model:s.filterModel}),n(s.HeaderView,t.ui.header),n(s.ListView,t.ui.list),n(s.NavigationView,t.ui.navigation),s.canAdd&&n(s.AddView,t.ui.add,{permissionsCollection:s.collection,collection:new i.Collection}),s.title&&n(s.TitleView,t.ui.title),t}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-add-view.js' */
define("widget/permissions/views/permissions-add-view",["underscore","marionette","widget/permissions/models/permissions-model","widget/permissions/permissions-templates","widget/permissions/views/preset/permissions-preset-any-of-view","util/request"],function(e,t,i,s,n,r){"use strict";var o=r(window,{redirectIfUnauthorised:!1});return t.ItemView.extend({template:s.add,ui:{items:".permissions-add__items",presetCell:".permissions-add__cell--preset",preset:".permissions-add__preset",submit:".permissions-add__submit"},events:{submit:"onSubmit","change @ui.items":"onItemsChange"},collectionEvents:{"add remove reset":"toggleAddButton"},onRender:function(){this.initItems(),this.initPresets(),this.toggleAddButton()},onItemsChange:function(e){this.updateCollection(e.added,"add"),this.updateCollection(e.removed,"remove")},onPresetChange:function(){this.updateEntitiesPermissions(),this.toggleAddButton()},onSubmit:function(t){var i=this;t.preventDefault();var s=this.options,n=this.collection,r=this.ui.items.data("select2"),o=this.toggleAddButton.bind(this),a=new Array(n.length),u=function(e,t){a[e]=t},c=e.after(n.length,function(){var t=function(e,t){return e.filter(function(e,i){return a[i]===t})},u=t(n,!0);if(u.length){switch(u.reverse().forEach(function(e){s.permissionsCollection.add(e.toJSON(),{at:0}),s.eventBus.trigger("PERMISSION_ANALYTICS:ENTRY_ADDED")}),u.length){case 1:var c=AJS.escapeHtml(u[0].getEntryDisplayName());s.eventBus.trigger("notification:success",AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e has been added.",c));break;default:s.eventBus.trigger("notification:success",AJS.format("\u003cstrong\u003e{0} entries\u003c/strong\u003e have been added.",u.length))}i.presetViews.forEach(function(e){return e.clearSelection()})}var l=t(n,!1);r.val(l.length?e.pluck(l,"id"):"",!0),o()});o(!0),n.map(function(e,t){return e.save().done(function(){u(t,!0)}).fail(function(){u(t,!1)}).always(c)})},updateCollection:function(e,t){if(e){(Array.isArray(e)?e:[e]).map(this.createModel,this).forEach(this.collection[t],this.collection)}},createModel:function(e){var t=this.getSelectedPermissions();return i.extend({urlRoot:this.options.endpoint}).create(e.name,t,e.displayName)},updateEntitiesPermissions:function(){var e=this;this.collection.forEach(function(t){return t.setPermissions(e.getSelectedPermissions())})},initItems:function(){var e=this.options.formatEntity,t=this.options.formatSearchResult;this.ui.items.auiSelect2({multiple:!0,minimumInputLength:1,ajax:{transport:o.ajax,url:this.options.searchEndpoint,quietMillis:250,dataType:"json",data:function(e,t){return{name:e,limit:25,start:25*(t-1)}},results:function(i){return{more:!!i.next,results:i.results.map(function(i){return{name:i.name,displayName:e(i),searchResult:t(i)}})}}},id:function(e){return e.name},formatResult:function(e,t,i,s){return s(e.searchResult)},formatSelection:function(e,t,i){return i(e.displayName)}})},initPresets:function(){var t=this;this.presetViews=[];var i=this.ui.presetCell,s=e.pick(this.options,"dependencies");this.options.presets.forEach(function(e,r){var o=n.create(i.eq(r),e,s);t.listenTo(o.collection,"change",t.onPresetChange),t.presetViews.push(o)},this)},getSelectedPermissions:function(){return e.unique(e.flatten(e.map(this.presetViews,function(e){return e.getSelectedPermissionNames()})))},toggleAddButton:function(e){this.ui.submit.prop("disabled",/true|false/.test(e)?e:!this.isValid())},isValid:function(){var e=this.collection.length>0,t=this.getSelectedPermissions().length>0;return e&&t},serializeData:function(){return e.extend({},this.options,{itemsId:e.uniqueId("permissions-add__items-unique-id-")})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-errors.js' */
define("widget/permissions/permissions-error",[],function(){"use strict";function r(r){this.name="PermissionsComponentError",this.message=r}return r.prototype=Error.prototype,r});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/collections/permissions-collection.js' */
define("widget/permissions/collections/permissions-collection",["underscore","backbone","atlassian/libs/factories/backbone.paginator-2.0.2","util/request"],function(t,e,s,i){"use strict";var r=i(window,{redirectIfUnauthorised:!1}),n=s(t,e);return n.extend({sync:r.sync,state:{firstPage:0,pageSize:30},queryParams:{totalPages:null,totalRecords:null,currentPage:null,pageSize:"limit",start:function(){return this.state.currentPage*this.state.pageSize}},initialize:function(t,e){this.options=e},parseState:function(t,e,s){return{totalRecords:(s.currentPage+1)*s.pageSize+(t.next?1:0)}},parseRecords:function(t){var e=this;return t.results.map(function(t){return{name:t.name,displayName:e.options.formatEntity(t),permissions:t.permissions}})},fetch:function(e){return n.prototype.fetch.call(this,t.extend(e,{cache:!1}))},loadFirstPage:function(){try{this._firstPageRequest.abort()}catch(t){}return this._firstPageRequest=this.switchMode(this.mode,{resetState:!0,fetch:!0,reset:!0}),this._firstPageRequest}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-submit-button', location = '/widget/submit-button/submit-button.js' */
define("widget/submit-button",["jquery","underscore"],function(t,o){"use strict";function n(n){var c=this;this.options=t.extend(!0,Object.create(e),n),t(function(){c.$button=t(c.options.buttonSelector),c.$form=t(c.options.formSelector),c.$button.off(),c.$button.click(o.bind(i,c))})}var e={buttonSelector:null,formSelector:null,callback:null},i=function(t){t.preventDefault(),o.isFunction(this.options.callback)&&this.options.callback(),this.$form.submit()};return n});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-build-autocomplete', location = '/feature/build-autocomplete/build-autocomplete.js' */
define("feature/build-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events","util/ajax"],function(t,e,i,s,a){"use strict";return i.extend({mixins:[s.EventBusMixin],initialize:function(s){s=t.extend({minimumResultsForSearch:-1},s||{}),this.params=s.params||{},s.params&&delete s.params;var a=e.bind(function(e,i){return t.extend({searchTerm:e,"start-index":Math.max((i-1)*this.params["max-results"],0)},this.params)},this),n={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/deploy/preview/possibleResults",dataType:"json",data:a,results:e.bind(function(t){return this.processData({results:t,more:!!t&&t.length>=this.params["max-results"]})},this)},id:function(t){return t.planResultKey.key}};i.prototype.initialize.apply(this,[t.extend(n,s||{})])},onRegisterEvents:function(){this.proxyEvents("build",["change"],this.$el);var t=["branch:change"];this.$el.val()||t.push("branch:change:initial"),this.onEvent(t,this.onMasterChange),this.onEvent("build:hide",this.onHide),this.onEvent("build:show",this.onShow)},onInitSelection:function(i,s){t(document).ready(e.bind(function(){var a=t(i).val();e.isString(a)&&a.length&&(this.$el.auiSelect2("data",this.settings.initialValue),this.processData({results:[this.settings.initialValue]}),this.params.planKey=this.settings.initialValue.planResultKey.entityKey.key,this.triggerEvent("build:change:initial"),s(this.settings.initialValue))},this))},onLoadAndProcess:function(t,i){var s=e.defaults({data:this.settings.ajax.data("",1)},this.settings.ajax);a(s).done(e.bind(function(t){if(e.isEmpty(t))this.$el.val(null),this.$el.auiSelect2("data",null),this.params.planKey=null;else{var s=t[0];this.$el.val(this.settings.id(s)),this.$el.auiSelect2("data",s),this.processData({results:t,more:!!t&&t.length>=this.params["max-results"]}),this.params.planKey=s.planResultKey.entityKey.key,i&&i(s)}this.triggerEvent("build:change"),this.triggerEvent("deploy:release:warning")},this))},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.build.autocomplete.result({resultSummary:t})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.build.autocomplete.selection({resultSummary:t})},onMasterChange:function(t){if(this.settings.masterPickerId&&t.$el.attr("id")===this.settings.masterPickerId){this.clearValue();var e=t.getSelectedData();e?(this.params.planKey=e.searchEntity.key,this.onLoadAndProcess(),this.enable()):this.disable()}},onHide:function(t,e){e&&!e.find(this.$el).length||this.$el.parents(".field-group:first").hide()},onShow:function(t,e){e&&!e.find(this.$el).length||this.$el.parents(".field-group:first").show()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-build-autocomplete', location = '/feature/build-autocomplete/build-autocomplete.soy' */
// This file was automatically generated from build-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.build.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.build == 'undefined') { bamboo.feature.build = {}; }
if (typeof bamboo.feature.build.autocomplete == 'undefined') { bamboo.feature.build.autocomplete = {}; }


bamboo.feature.build.autocomplete.result = function(opt_data, opt_ignored) {
  return ' ' + widget.buildresult.resultStatus(opt_data) + ' <span class="info">' + soy.$$escapeHtml(opt_data.resultSummary.buildRelativeTime) + '</span>';
};
if (goog.DEBUG) {
  bamboo.feature.build.autocomplete.result.soyTemplateName = 'bamboo.feature.build.autocomplete.result';
}


bamboo.feature.build.autocomplete.selection = function(opt_data, opt_ignored) {
  return widget.buildresult.resultStatus(opt_data) + ' ' + soy.$$escapeHtml(opt_data.resultSummary.buildRelativeTime);
};
if (goog.DEBUG) {
  bamboo.feature.build.autocomplete.selection.soyTemplateName = 'bamboo.feature.build.autocomplete.selection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-label', location = '/feature/branch-label/branch-label.js' */
define("feature/branch-label",["jquery","backbone","brace","util/events"],function(e,n,t,i){"use strict";return t.View.extend({mixins:[i.EventBusMixin],initialize:function(){this.onEvent("plan:selected",this.onPlanChange)},onPlanChange:function(e,t){t instanceof n.Model&&this.$el.html(bamboo.widget.deployment.version.branch({planBranchName:t.get("branchName"),label:"Currently"}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-autocomplete', location = '/feature/branch-autocomplete/branch-autocomplete.js' */
define("feature/branch-autocomplete",["jquery","underscore","backbone","widget/autocomplete-ajax","util/ajax","util/events"],function(t,e,a,n,s,i){"use strict";return n.extend({mixins:[i.EventBusMixin],initialize:function(a){a=t.extend({placeholder:"Search for a branch ..."},a||{}),this.params=t.extend({includeMasterBranch:!1},a.params||{}),a.params&&delete a.params;var s=e.bind(function(e,a){return t.extend({searchTerm:e,"start-index":Math.max((a-1)*this.params["max-results"],0)},this.params)},this),i={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/search/branches",dataType:"json",data:s,results:e.bind(function(t,e){return this.processData({results:t.searchResults,more:!!t.size&&t.size>e*this.params["max-results"]})},this)}};n.prototype.initialize.apply(this,[t.extend(i,a||{})])},onRegisterEvents:function(){this.onEvent("plan:selected",this.onMasterChange),this.proxyEvents("branch",["change"],this.$el)},onInitSelection:function(a,n){t(document).ready(e.bind(function(){var i=t(a).val();e.isString(i)&&i.length&&s({url:this.settings.ajax.url,dataType:this.settings.ajax.dataType,data:{includeMasterBranch:!0,masterPlanKey:i,"start-index":0,"max-results":1}}).done(e.bind(function(t){var e=t.searchResults[0];this.$el.auiSelect2("data",e),this.processData({results:t.searchResults}),this.triggerEvent("branch:change:initial"),n(e)},this))},this))},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.branch.autocomplete.result({label:t.searchEntity.branchName})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.branch.autocomplete.result({label:t.searchEntity.branchName})},onMasterChange:function(e,n){if(!this.settings.masterPickerId||e.$el.attr("id")===this.settings.masterPickerId)if(this.clearValue(),n instanceof a.Model){var s=t.trim(n.get("key"));s.length&&(this.params.masterPlanKey=s)}else this.triggerEvent("branch:empty")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-autocomplete', location = '/feature/branch-autocomplete/branch-autocomplete.soy' */
// This file was automatically generated from branch-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.branch.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.branch == 'undefined') { bamboo.feature.branch = {}; }
if (typeof bamboo.feature.branch.autocomplete == 'undefined') { bamboo.feature.branch.autocomplete = {}; }


bamboo.feature.branch.autocomplete.result = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-devtools-branch"></span>  ' + soy.$$escapeHtml(opt_data.label);
};
if (goog.DEBUG) {
  bamboo.feature.branch.autocomplete.result.soyTemplateName = 'bamboo.feature.branch.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-stage-autocomplete', location = '/feature/stage-autocomplete/stage-autocomplete.js' */
define("feature/stage-autocomplete",["jquery","underscore","backbone","widget/autocomplete-ajax","util/ajax","util/events"],function(t,e,a,s,n,i){"use strict";return s.extend({mixins:[i.EventBusMixin],initialize:function(a){a=t.extend({placeholder:"Search for a stage &hellip;"},a||{}),a=a||{},this.params=a.params||{},a.params&&delete a.params;var n=e.bind(function(e,a){return t.extend({searchTerm:e,"start-index":Math.max((a-1)*this.params["max-results"],0)},this.params)},this),i={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/search/stages/"+this.params.masterPlanKey,dataType:"json",data:n,results:e.bind(this.onAjaxResult,this)}};s.prototype.initialize.apply(this,[t.extend(i,a||{})])},onAjaxResult:function(t,e){return this.processData({results:t.searchResults,more:!!t.size&&t.size>e*this.params["max-results"]})},onRegisterEvents:function(){this.proxyEvents("stage",["change"],this.$el)},onInitSelection:function(a,s){t(document).ready(e.bind(function(){var i=t(a).val();e.isString(i)&&i.length&&n({url:this.settings.ajax.url,dataType:this.settings.ajax.dataType,data:{stageId:i,"start-index":0,"max-results":1}}).done(e.bind(function(t){var e=t.searchResults[0];this.$el.auiSelect2("data",e),this.processData({results:t.searchResults}),this.triggerEvent("stage:change:initial"),s(e)},this))},this))},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.stage.autocomplete.result({label:t.searchEntity.name})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.stage.autocomplete.result({label:t.searchEntity.name})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-stage-autocomplete', location = '/feature/stage-autocomplete/stage-autocomplete.soy' */
// This file was automatically generated from stage-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.stage.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.stage == 'undefined') { bamboo.feature.stage = {}; }
if (typeof bamboo.feature.stage.autocomplete == 'undefined') { bamboo.feature.stage.autocomplete = {}; }


bamboo.feature.stage.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.label);
};
if (goog.DEBUG) {
  bamboo.feature.stage.autocomplete.result.soyTemplateName = 'bamboo.feature.stage.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-deployment-tasksdialog', location = '/feature/deployment-tasksdialog/deployment-tasksdialog.js' */
define("feature/deployment-tasksdialog",["jquery","widget/dialog"],function(e,t){"use strict";return t.extend({initialize:function(t){var i=[];t.editTasksRedirect&&i.push({id:"editTasks",label:"Edit tasks",type:"button"}),i.push({id:"cancel",label:"Close",type:"button"});var n=e.extend({buttons:i,header:"Deployment tasks to run",$triggerEl:e("#view-tasks"),width:500,height:300},t||{});this.constructor.__super__.initialize.apply(this,[n])},onButtonClick:function(e){"editTasks"===e?window.location=this.settings.editTasksRedirect:"cancel"===e&&this.dialog.remove()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-job-autocomplete', location = '/feature/job-autocomplete/job-autocomplete.soy' */
// This file was automatically generated from job-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.job.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.job == 'undefined') { bamboo.feature.job = {}; }
if (typeof bamboo.feature.job.autocomplete == 'undefined') { bamboo.feature.job.autocomplete = {}; }


bamboo.feature.job.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + ((opt_data.item.searchEntity.groupName) ? soy.$$escapeHtml(opt_data.item.searchEntity.groupName) : soy.$$escapeHtml(opt_data.item.searchEntity.jobName));
};
if (goog.DEBUG) {
  bamboo.feature.job.autocomplete.result.soyTemplateName = 'bamboo.feature.job.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-job-autocomplete', location = '/feature/job-autocomplete/job-autocomplete.js' */
define("feature/job-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events"],function(t,e,s,a){"use strict";return s.extend({template:bamboo.feature.job.autocomplete,mixins:[a.EventBusMixin],initialize:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params=a.params||{},this.lastGroup=null,a.params&&delete a.params;var i=e.bind(function(t,s){return e.extend({searchTerm:t,"start-index":Math.max((s-1)*this.params["max-results"],0)},this.params)},this),r={minimumInputLength:0,ajax:{url:e.bind(this.onAjaxUrl,this),results:e.bind(this.onAjaxResults,this),data:i,dataType:"json"}};s.prototype.initialize.apply(this,[t.extend(r,a||{})])},onAjaxUrl:function(){if(this.query&&this.query.plan)return AJS.contextPath()+"/rest/api/latest/search/jobs/"+this.query.plan;this.disable().clearValue()},onAjaxResults:function(t,s){var a=[];return 1===s&&(this.lastGroup=null),e.each(t.searchResults,e.bind(function(t){if(this.lastGroup!==t.searchEntity.stageName){this.lastGroup=t.searchEntity.stageName;var e={isGroup:!0,searchEntity:{groupName:this.lastGroup}};a.push(e)}a.push(t)},this)),this.processData({results:a,more:!!t.size&&t.size>s*this.params["max-results"]})},onFormatResult:function(t){if(!e.isEmpty(t))return this.template.result({item:t})},onFormatSelection:function(t){if(!e.isEmpty(t))return this.template.result({item:t})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plan-autocomplete', location = '/feature/plan-autocomplete/plan-autocomplete.soy' */
// This file was automatically generated from plan-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.plan.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.plan == 'undefined') { bamboo.feature.plan = {}; }
if (typeof bamboo.feature.plan.autocomplete == 'undefined') { bamboo.feature.plan.autocomplete = {}; }


bamboo.feature.plan.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + ((opt_data.item.searchEntity.groupName) ? soy.$$escapeHtml(opt_data.item.searchEntity.groupName) : soy.$$escapeHtml(opt_data.item.searchEntity.planName));
};
if (goog.DEBUG) {
  bamboo.feature.plan.autocomplete.result.soyTemplateName = 'bamboo.feature.plan.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plan-autocomplete', location = '/feature/plan-autocomplete/plan-autocomplete.js' */
define("feature/plan-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events"],function(t,e,s,a){"use strict";return s.extend({template:bamboo.feature.plan.autocomplete,mixins:[a.EventBusMixin],initialize:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params=a.params||{},this.lastGroup=null,a.params&&delete a.params;var i=e.bind(function(t,s){return e.extend({searchTerm:t,"start-index":Math.max((s-1)*this.params["max-results"],0)},this.params)},this),r={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/search/plans",results:e.bind(this.onAjaxResults,this),data:i,dataType:"json"}};s.prototype.initialize.apply(this,[t.extend(r,a||{})])},onAjaxResults:function(t,s){var a=[];return 1===s&&(this.lastGroup=null),e.each(t.searchResults,e.bind(function(t){if(this.lastGroup!==t.searchEntity.projectName){this.lastGroup=t.searchEntity.projectName;var e={isGroup:!0,searchEntity:{groupName:this.lastGroup}};a.push(e)}a.push(t)},this)),this.processData({results:a,more:!!t.size&&t.size>s*this.params["max-results"]})},onFormatResult:function(t){if(!e.isEmpty(t))return this.template.result({item:t})},onFormatSelection:function(t){if(!e.isEmpty(t))return this.template.result({item:t})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-soft-limit-warning', location = '/feature/dialog-storage-soft-limit-warning/dialog-storage-soft-limit-warning.soy' */
// This file was automatically generated from dialog-storage-soft-limit-warning.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.dialog.storage.soft.limit.warning.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.dialog == 'undefined') { bamboo.feature.dialog = {}; }
if (typeof bamboo.feature.dialog.storage == 'undefined') { bamboo.feature.dialog.storage = {}; }
if (typeof bamboo.feature.dialog.storage.soft == 'undefined') { bamboo.feature.dialog.storage.soft = {}; }
if (typeof bamboo.feature.dialog.storage.soft.limit == 'undefined') { bamboo.feature.dialog.storage.soft.limit = {}; }
if (typeof bamboo.feature.dialog.storage.soft.limit.warning == 'undefined') { bamboo.feature.dialog.storage.soft.limit.warning = {}; }


bamboo.feature.dialog.storage.soft.limit.warning.content = function(opt_data, opt_ignored) {
  var output = '';
  var storagePolicyUrl__soy3 = "https://confluence.atlassian.com/display/Cloud/Atlassian+Cloud+Storage+Policy";
  output += aui.message.warning({content: '' + soy.$$escapeHtml("Careful, you\x27re about to run out of storage.")}) + '<p>' + soy.$$escapeHtml("Need more than the storage provided on your Atlassian Cloud account? You can use your AWS account for storing artifacts on your own Amazon S3 instance.") + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Read more about the \x3ca href\x3d\x22{0}\x22\x3eAtlassian Cloud storage policy\x3c/a\x3e.",typeof (storagePolicyUrl__soy3) === 'number' ? storagePolicyUrl__soy3 : soy.$$escapeHtml(storagePolicyUrl__soy3)))) + '</p>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.dialog.storage.soft.limit.warning.content.soyTemplateName = 'bamboo.feature.dialog.storage.soft.limit.warning.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-soft-limit-warning', location = '/feature/dialog-storage-soft-limit-warning/dialog-storage-soft-limit-warning.js' */
define("feature/dialog-storage-soft-limit-warning",["jquery","underscore","widget/dialog"],function(t,i,e){"use strict";return e.extend({defaultSettings:{height:300,width:600,header:"Storage almost full",buttons:[{id:"configure",label:"Configure artifact storage",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Remind me later",type:"link"}]},initialize:function(t){var n=t||{};this.interval=n.interval||1,this.currentTimestamp=(new Date).getTime(),this.cookieName="storage.soft.limit.warning."+n.username;var a=+(24*this.interval*60*60*1e3),o=AJS.Cookie.read(this.cookieName);this.isTimeToDisplay=!o||o<this.currentTimestamp-a,this.defaultSettings.content=bamboo.feature.dialog.storage.soft.limit.warning.content({}),e.prototype.initialize.call(this,i.defaults(n,this.defaultSettings))},createInstance:function(){this.isTimeToDisplay&&(AJS.Cookie.save(this.cookieName,this.currentTimestamp,this.interval),e.prototype.createInstance.call(this))},onButtonClick:function(t){for(var n,a=arguments.length,o=Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];if((n=e.prototype.onButtonClick).call.apply(n,[this,t].concat(o)),"configure"===t){var s=this.dialog.getPage(0).buttonpanel;s.prepend(aui.icons.icon({size:"small",icon:"wait"})),s.find(":button").attr("disabled",!0),i.delay(i.bind(function(){window.location.href=AJS.contextPath()+"/admin/configureArtifactStorage.action"},this),500)}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-hard-limit-warning', location = '/feature/dialog-storage-hard-limit-warning/dialog-storage-hard-limit-warning.soy' */
// This file was automatically generated from dialog-storage-hard-limit-warning.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.dialog.storage.hard.limit.warning.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.dialog == 'undefined') { bamboo.feature.dialog = {}; }
if (typeof bamboo.feature.dialog.storage == 'undefined') { bamboo.feature.dialog.storage = {}; }
if (typeof bamboo.feature.dialog.storage.hard == 'undefined') { bamboo.feature.dialog.storage.hard = {}; }
if (typeof bamboo.feature.dialog.storage.hard.limit == 'undefined') { bamboo.feature.dialog.storage.hard.limit = {}; }
if (typeof bamboo.feature.dialog.storage.hard.limit.warning == 'undefined') { bamboo.feature.dialog.storage.hard.limit.warning = {}; }


bamboo.feature.dialog.storage.hard.limit.warning.content = function(opt_data, opt_ignored) {
  var output = '';
  var storagePolicyUrl__soy3 = "https://confluence.atlassian.com/display/Cloud/Atlassian+Cloud+Storage+Policy";
  var header__soy4 = '' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("You\x27ve exceeded the Atlassian Cloud storage limit. Unfortunately your builds have been disabled until you configure S3 storage for artifacts."));
  output += aui.message.warning({content: '' + soy.$$escapeHtml(header__soy4)}) + '<p>' + soy.$$escapeHtml("You can configure Bamboo\x27s artifact storage to use your own Amazon S3 account for increased storage capacity. Doing so will immediately re-enable builds.") + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Read more about the \x3ca href\x3d\x22{0}\x22\x3eAtlassian Cloud storage policy\x3c/a\x3e.",typeof (storagePolicyUrl__soy3) === 'number' ? storagePolicyUrl__soy3 : soy.$$escapeHtml(storagePolicyUrl__soy3)))) + '</p>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.dialog.storage.hard.limit.warning.content.soyTemplateName = 'bamboo.feature.dialog.storage.hard.limit.warning.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-hard-limit-warning', location = '/feature/dialog-storage-hard-limit-warning/dialog-storage-hard-limit-warning.js' */
define("feature/dialog-storage-hard-limit-warning",["jquery","underscore","widget/dialog"],function(t,i,e){"use strict";var n="storage.hard.limit.warning.displayed";return e.extend({defaultSettings:{height:320,width:600,header:"Storage full and builds disabled",buttons:[{id:"configure",label:"Configure artifact storage",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Remind me later",type:"link"}]},initialize:function(t){var a=t||{},o=AJS.Cookie.read(n),r=!a.userLoggedIn&&o;this.shouldDisplay=a.userLoggedIn&&!o,this.shouldDisplay?AJS.Cookie.save(n,!0):r&&AJS.Cookie.erase(n),this.defaultSettings.content=bamboo.feature.dialog.storage.hard.limit.warning.content({}),e.prototype.initialize.call(this,i.defaults(a,this.defaultSettings))},createInstance:function(){this.shouldDisplay&&e.prototype.createInstance.call(this)},onButtonClick:function(t){for(var n,a=arguments.length,o=Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];if((n=e.prototype.onButtonClick).call.apply(n,[this,t].concat(o)),"configure"===t){var l=this.dialog.getPage(0).buttonpanel;l.prepend(aui.icons.icon({size:"small",icon:"wait"})),l.find(":button").attr("disabled",!0),i.delay(i.bind(function(){window.location.href=AJS.contextPath()+"/admin/configureArtifactStorage.action"},this),500)}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-fetch', location = '/util/fetch/fetch.js' */
define("util/fetch",[],function(){"use strict";return function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return new Promise(function(t,e){fetch.apply(void 0,n).then(t).catch(e)})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters', location = '/feature/quick-filters/quick-filters.soy' */
// This file was automatically generated from quick-filters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.quick.filters.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.quick == 'undefined') { bamboo.feature.quick = {}; }
if (typeof bamboo.feature.quick.filters == 'undefined') { bamboo.feature.quick.filters = {}; }


bamboo.feature.quick.filters.dashboardFilter = function(opt_data, opt_ignored) {
  return '<button data-filter-id="' + soy.$$escapeHtml(opt_data.filterId) + '" class="aui-button quick-filter ' + ((opt_data.active) ? 'active' : '') + '">' + soy.$$escapeHtml(opt_data.name) + '</button>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.dashboardFilter.soyTemplateName = 'bamboo.feature.quick.filters.dashboardFilter';
}


bamboo.feature.quick.filters.notFoundError = function(opt_data, opt_ignored) {
  return '' + bamboo.util.error.helper.dialogMessage({content: AJS.format("Quick filter \x27\x27{0}\x27\x27 not found. It might have been removed.",opt_data.name)});
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.notFoundError.soyTemplateName = 'bamboo.feature.quick.filters.notFoundError';
}


bamboo.feature.quick.filters.choiceForm = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml("Select quick filters to display on Bamboo dashboard. This change will not affect other users.") + '</p><p>' + aui.icons.icon({icon: 'info', useIconFont: true, extraClasses: 'grey'}) + ' ' + soy.$$escapeHtml("The order in which filters appear on the board is managed by Bamboo administrators.") + '</p><form action="PUT" target="' + soy.$$escapeHtml("") + '/rest/api/latest/quickFilter/visible" class="aui"><fieldset><div class="field-group"><label for="selectedQuickFilters">' + soy.$$escapeHtml("Quick filters") + '</label><select name="selectedQuickFilters" id="selectedQuickFilters" class="long-field" multiple="multiple">';
  var filterList30 = opt_data.filters;
  var filterListLen30 = filterList30.length;
  for (var filterIndex30 = 0; filterIndex30 < filterListLen30; filterIndex30++) {
    var filterData30 = filterList30[filterIndex30];
    output += '<option value="' + soy.$$escapeHtml(filterData30.id) + '" ' + ((filterData30.selected) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(filterData30.name) + '</option>';
  }
  output += '</select><a href="#" class="clear-selected-quick-filters">' + soy.$$escapeHtml("Clear all") + '</a></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.choiceForm.soyTemplateName = 'bamboo.feature.quick.filters.choiceForm';
}


bamboo.feature.quick.filters.choiceFormError = function(opt_data, opt_ignored) {
  return '' + bamboo.util.error.helper.dialogMessage({content: "An error has occurred while loading the list of available quick filters."});
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.choiceFormError.soyTemplateName = 'bamboo.feature.quick.filters.choiceFormError';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters', location = '/feature/quick-filters/quick-filters.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};define("feature/quick-filters",["jquery","underscore","util/ajax","util/errors","util/fetch","util/help-links","widget/dialog-error","widget/dialog-form","widget/feature-discovery-dialog"],function(e,t,i,n,o,l,r,a,s){"use strict";var c=AJS.contextPath()+"/rest/api/latest/quickFilter",d=t.template(c+"/<%= filterId %>/activate"),h=t.template(c+"/<%= filterId %>/deactivate"),u=c+"/deactivate",g=AJS.contextPath()+"/ajax/toggleQuickFilter.action",f=a.extend({defaultSettings:{buttons:[{id:"save",label:"Save",cssClass:"quick-filters-choice-save aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link",cssClass:"quick-filters-choice-cancel"}]},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.prototype.initialize.call(this,_extends({},this.defaultSettings,e))},onContentLoaded:function(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];(e=a.prototype.onContentLoaded).call.apply(e,[this].concat(i));var o=this.form.$el.find("select");o.auiSelect2({closeOnSelect:!1,placeholder:"No quick filters selected"}),this.form.$el.find(".clear-selected-quick-filters").on("click",function(e){e.preventDefault(),o.auiSelect2("data",null)})}}),p=s.extend({shouldDisplay:function(){return this.options.quickFiltersCount>=10&&s.prototype.shouldDisplay.call(this)}});return Backbone.View.extend({initialize:function(t){var i=this,n=t||{};this.dashboard=n.dashboard,this.$iconContainer=e(n.iconContainer),this.$projectFilterToggle=e(n.projectFilter.toggle),this.$projectFilterEdit=e(n.projectFilter.edit),this.$chooseLink=e(n.chooseLink),this.template=bamboo.feature.quick.filters,setTimeout(function(){i.discoveryDialog=new p({el:n.discoveryDialog,preferenceKey:"quick.filters.choose.discovery.dialog.displayed",quickFiltersCount:i.$el.find(".quick-filter").length})},500),this.$el.find(".quick-filter.active").length>0&&(this.deactivateProjectFilter(),this.refreshDashboard()),this.registerEvents()},registerEvents:function(){this.$el.on("click",".quick-filter",this.onQuickFilterToggled.bind(this)),this.$projectFilterToggle.on("click",this.onProjectFilterToggled.bind(this,"toggle")),this.$projectFilterEdit.on("click",this.onProjectFilterToggled.bind(this,"edit")),this.$chooseLink.on("click",this.onChooseLinkClicked.bind(this)),e(document).on("click",".quick-filters-disable-all",this.onDisableAllQuickFiltersClicked.bind(this))},getChoiceDialogContent:function(){var e=this,t={method:"GET",credentials:"same-origin",headers:{Accept:"application/json"}},i=o(AJS.contextPath()+"/rest/api/latest/quickFilter?configured=true",t).then(function(e){return e.json().then(function(t){return e.ok?Promise.resolve(t):Promise.reject(t)})}),n=o(AJS.contextPath()+"/rest/api/latest/quickFilter/visible",t).then(function(e){return e.json().then(function(t){return e.ok?Promise.resolve(t):Promise.reject(t)})});return Promise.all([i,n]).then(function(t){var i=t[0],n=t[1],o=new Set(n.map(function(e){return e.id}));return i.forEach(function(e){e.selected=o.has(e.id)}),Promise.resolve(e.template.choiceForm({filters:i}))})},onQuickFilterToggled:function(n){n.preventDefault(),this.cancelRequest(this.toggleRequest),this.cancelRequest(this.dashboardRequest),this.displayLoadingIcon(),this.deactivateProjectFilter();var o=e(n.target),l=o.attr("data-filter-id"),r=o.hasClass("active"),a=r?h:d,s=this.$el.find(".quick-filter.active").length;this.triggerAnalyticsEventOnToggle(!r,r?s-1:s+1),o.toggleClass("active"),this.toggleRequest=i({type:"PUT",url:a({filterId:l}),error:t.bind(this.onQuickFilterToggledError,this,o)}),this.refreshDashboard()},onQuickFilterToggledError:function(e,t){if(this.hideLoadingIcon(),404===t.status){var i=e.text();new r.Dialog({content:this.template.notFoundError({name:i})})}else n.call(null,t)},onProjectFilterToggled:function(e){this.cancelRequest(this.toggleRequest),this.cancelRequest(this.dashboardRequest),this.hideLoadingIcon(),this.triggerAnalyticsEventOnDisableAll("PERSONAL_FILTER_ENABLED"),this.disableAllQuickFilters(),("edit"===e||this.$projectFilterToggle.hasClass("edit-project-filter"))&&this.refreshDashboard()},onDisableAllQuickFiltersClicked:function(e){e.preventDefault(),this.cancelRequest(this.toggleRequest),this.cancelRequest(this.dashboardRequest),this.displayLoadingIcon(),this.triggerAnalyticsEventOnDisableAll("DISABLE_ALL_BUTTON_CLICKED"),this.disableAllQuickFilters(),this.refreshDashboard()},onChooseLinkClicked:function(e){e.preventDefault(),this.discoveryDialog&&this.discoveryDialog.close(),new f({header:"Choose your quick filters",helpLink:{url:l.getHelpLink("quick.filters.help"),label:"How quick filters work"},content:this.getChoiceDialogContent.bind(this),form:{serialize:function(){return this.$el.serializeArray().map(function(e){return e.value})},success:function(){setTimeout(function(){return window.location.reload(!0)},500)}}})},disableAllQuickFilters:function(){return this.$el.find(".quick-filter.active").removeClass("active"),i({type:"PUT",url:u})},deactivateProjectFilter:function(){"true"===this.$projectFilterToggle.attr("aria-pressed")&&(this.$projectFilterToggle.attr("aria-pressed","false"),this.$projectFilterToggle.html(widget.icons.icon({type:"filter"})+"&nbsp;"+"Personal filter is off"),i({type:"POST",url:AJS.contextPath()+"/toggleDashboardFilterInline.action",dataType:"html",contentType:"application/x-www-form-urlencoded",data:{filterEnabled:!1}}))},refreshDashboard:function(){var t=this;this.cancelRequest(this.dashboardRequest),this.displayLoadingIcon();var n=this.$el.find(".quick-filter.active"),o=n.toArray().map(function(t){return e(t).attr("data-filter-id")});return this.dashboardRequest=i({type:"POST",url:g,dataType:"html",contentType:"application/x-www-form-urlencoded",data:{filterIds:o}}),this.dashboardRequest.then(function(i){e(t.dashboard).replaceWith(i),t.discoveryDialog&&t.discoveryDialog.realign()}).always(this.hideLoadingIcon.bind(this))},cancelRequest:function(e){e&&4!==e.readyState&&e.abort()},displayLoadingIcon:function(){this.$iconContainer.find(".aui-icon-wait").length||this.$iconContainer.append(aui.icons.icon({size:"small",icon:"wait"}))},hideLoadingIcon:function(){var e=this.$iconContainer.find(".aui-icon-wait");e.length&&e.remove()},triggerAnalyticsEventOnToggle:function(e,t){AJS.trigger("analyticsEvent",{name:"bamboo.quick.filter.toggled",data:{enabling:e,totalActive:t}})},triggerAnalyticsEventOnDisableAll:function(e){AJS.trigger("analyticsEvent",{name:"bamboo.quick.filters.all.disabled",data:{reason:e}})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-repository-connect', location = '/feature/repository-connect/repository-connect.soy' */
// This file was automatically generated from repository-connect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.repository.connect.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.repository == 'undefined') { bamboo.feature.repository = {}; }
if (typeof bamboo.feature.repository.connect == 'undefined') { bamboo.feature.repository.connect = {}; }


bamboo.feature.repository.connect.result = function(opt_data, opt_ignored) {
  return '<div class="connection-result ' + soy.$$escapeHtml(opt_data.resultClass) + '"><div class="connection-result-icon"><span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span></div><div class="connection-result-message">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.repository.connect.result.soyTemplateName = 'bamboo.feature.repository.connect.result';
}


bamboo.feature.repository.connect.success = function(opt_data, opt_ignored) {
  return '' + bamboo.feature.repository.connect.result({resultClass: 'connection-result-success', iconClass: 'aui-icon-success', content: '<p>' + soy.$$escapeHtml("Connection successful") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.repository.connect.success.soyTemplateName = 'bamboo.feature.repository.connect.success';
}


bamboo.feature.repository.connect.errors = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param22 = '<p>' + soy.$$escapeHtml("We couldn\x27t connect to the repository.") + ' ' + ((opt_data.message) ? soy.$$escapeHtml(opt_data.message) : (opt_data.messages && opt_data.messages.length) ? soy.$$escapeHtml("Here\x27s what we got back:") : '') + '</p>';
  if (opt_data.messages && opt_data.messages.length) {
    param22 += '<div class="connection-result-error-message command-output">';
    var messageList35 = opt_data.messages;
    var messageListLen35 = messageList35.length;
    for (var messageIndex35 = 0; messageIndex35 < messageListLen35; messageIndex35++) {
      var messageData35 = messageList35[messageIndex35];
      param22 += '<pre>' + soy.$$changeNewlineToBr(soy.$$escapeHtml(messageData35)) + '</pre>';
    }
    param22 += '</div>';
  }
  var output = '' + bamboo.feature.repository.connect.result({resultClass: 'connection-result-error', iconClass: 'aui-icon-warning', content: param22});
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.repository.connect.errors.soyTemplateName = 'bamboo.feature.repository.connect.errors';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-repository-connect', location = '/feature/repository-connect/repository-connect.js' */
define("feature/repository-connect",["jquery","underscore","util/ajax","util/ajax-form","util/errors"],function(t,e,s,i,r){"use strict";return Backbone.View.extend({defaults:{timeout:60},initialize:function(t){this.options=e.defaults(t,this.defaults),this.templateNamespace=bamboo.feature.repository.connect,this.url=AJS.contextPath()+"/rest/api/latest/repository/testConnection",this.$button=this.$el,this.$container=this.$button.parent(),this.$form=this.$button.closest("form"),this.ajaxForm=new i(this.$form),this.registerEvents()},registerEvents:function(){this.$button.on("click",e.bind(this.testConnection,this))},triggerAnalyticsEvent:function(t){AJS.trigger("analyticsEvent",{name:"bamboo.repository.connection.test",data:{repositoryKey:t}})},testConnection:function(t){t.preventDefault(),this.$form.find(".error, .connection-result").remove(),this.$button.attr("disabled",!0),this.$button.siblings().remove(),this.$container.append(aui.icons.icon({size:"small",icon:"wait"}));var i=this.ajaxForm.serialize();this.triggerAnalyticsEvent(i.selectedRepository),s({url:this.url,type:"PUT",data:JSON.stringify(i),success:e.bind(this.handleSuccess,this),error:e.bind(this.handleError,this),timeout:1e3*this.options.timeout})},handleSuccess:function(t){this.$button.attr("disabled",!1),this.$button.siblings().remove();var e=t.connectionErrors;e&&e.length?this.displayErrors(e):this.displaySuccess()},handleError:function(t,e){if(this.$button.attr("disabled",!1),this.$button.siblings().remove(),"timeout"===e)this.displayError(AJS.format("Timed out after {0} seconds.",this.options.timeout));else switch(t.status){case 400:this.ajaxForm.settings.error(t),this.displayError("The details you provided were invalid.");break;case 401:var s=t.responseJSON?t.responseJSON.message:null,i="The request was unauthorised. Please reload the page and try again.";this.displayError(s||i);break;default:r.call(null,t)}},displaySuccess:function(){var t=this.templateNamespace.success();this.$container.append(t)},displayError:function(t){var e=this.templateNamespace.errors({message:t});this.$container.append(e)},displayErrors:function(t){var e=this.templateNamespace.errors({messages:t});this.$container.append(e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-constants', location = 'src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__1925ac36fad64f3d36f6e0c6dbf87479=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.INPUT_SUFFIX="-input";return a}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-toggle', location = 'src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__c4f71c15eb935221cf84c2bf2b79a050=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function j(a){a._canFireEventsNow&&a.dispatchEvent(new o.default("change",{bubbles:!0}))}function c(a){return a._input||(a._input=a.querySelector("input"))}function g(a,b){c(b).removeAttribute(a)}function k(a,b,d){c(b).setAttribute(a,d.newValue)}function h(a){return{removed:g.bind(this,a),fallback:k.bind(this,a)}}"use strict";__6fa2292fd3bc72aee8a14c7b4326719a;
__9736345f6947949dc28f91f6cd21cbe6;var f=__4512e4b5489c59d7921508536665c00f,i=e(__bd7207540b95ff683caa1d3c0bfcc3d7),p=e(__c220881a6424c0b144a85afc642e17bb),q=e(__3f6f6650e96d80fefaaf71feed8f822b),r=e(__2b1734744f1decec6fe4109762d4ff9c),s=e(__7acfe7fd38bbf8b5bf76cc953770b033),t=__1925ac36fad64f3d36f6e0c6dbf87479,o=e(__b4f5303c3f6b97d2fd503b5013ff8de7),l=__05bca48700965a7a8a29288c57bd100b,m=e(l),n={removed:function(a){g.call(this,"form",a);a._formId=null},fallback:function(a,b){k.call(this,"form",a,
b);a._formId=b.newValue}},u={removed:g.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+t.INPUT_SUFFIX)}};(0,s.default)("aui-toggle",{template:(0,r.default)('<input type="checkbox" class="aui-toggle-input assistive">','<span class="aui-toggle-view">','<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){c(a);(a._spinner||
(a._spinner=new m.default)).setAttribute("size",l.SIZE.SMALL.name);(0,i.default)(c(a)).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});c(a).addEventListener("keydown",function(b){a.busy&&b.keyCode===q.default.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&c(a).addEventListener("click",function(b){a.busy&&b.preventDefault()});a.hasAttribute("checked")&&c(a).setAttribute("checked",
"");a._canFireEventsNow=!0},attached:function(a){(0,p.default)(a).attributeExists("label")},events:{click:function(a,b){var d=c(a);!a.disabled&&(!a.busy&&b.target!==d)&&(d.checked=!d.checked);(0,f.setBooleanAttribute)(a,"checked",d.checked)}},attributes:{id:u,checked:{removed:function(a){c(a).checked=!1;j(a)},fallback:function(a){c(a).checked=!0;j(a)}},disabled:h("disabled"),form:n,name:h("name"),value:h("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",
b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){c(this).focus();return this},get checked(){return c(this).checked},set checked(a){c(this).checked!==a&&(c(this).checked=a,(0,f.setBooleanAttribute)(this,
"checked",a))},get disabled(){return c(this).disabled},set disabled(a){return(0,f.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){n.fallback.call(this,this,{newValue:a||null});return this.form},get name(){return c(this).name},set name(a){this.setAttribute("name",a);return a},get value(){return c(this).value},set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===c(this).getAttribute("aria-busy")},set busy(a){var b=
c(this),d=this._spinner||(this._spinner=new m.default);(0,f.setBooleanAttribute)(this,"busy",a);a?(b.setAttribute("aria-busy","true"),b.indeterminate=!0,this.checked?(b.classList.add("indeterminate-checked"),(0,i.default)(this.querySelector(".aui-toggle-tick")).append(d)):(0,i.default)(this.querySelector(".aui-toggle-cross")).append(d)):(b.classList.remove("indeterminate-checked"),b.indeterminate=!1,b.removeAttribute("aria-busy"),d.parentNode&&d.parentNode.removeChild(this._spinner));var e=!!a;this.id&&
Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=e});return a}}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-repository-overrides', location = '/feature/repository-overrides/repository-overrides.js' */
define("feature/repository-overrides",["backbone","jquery","marionette","util/events"],function(e,i,r,o){"use strict";return r.ItemView.extend({template:!1,ui:function(){var e=this.getOption("selectors");return{overrideToggle:e.overrideToggle,overrideRepositoryLocation:e.overrideRepositoryLocation,serverConfiguration:e.serverConfiguration,inheritedConfiguration:e.inheritedConfiguration}},events:{"click @ui.overrideToggle":"onOverrideToggleClick"},onRender:function(){this.ui.inheritedConfiguration.find(":input").prop("disabled",!0);var e="true"===this.ui.overrideRepositoryLocation.val();this.showHideControls(e)},onOverrideToggleClick:function(){var e=!!this.ui.overrideToggle.attr("checked");this.ui.overrideRepositoryLocation.val(e),this.showHideControls(e),e||o.EventBus.trigger("repository:server:reset"),o.EventBus.trigger("repository:server:toggle-override")},showHideControls:function(e){this.ui.serverConfiguration.toggle(e),this.ui.inheritedConfiguration.toggle(!e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-agent-executable-pane', location = '/feature/agent-executable-pane/agent-executable-pane.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};define("feature/agent-executable-pane",["jquery","backbone"],function(e,t){"use strict";return t.View.extend({initialize:function(e){this.options=_extends({},e),this.loaded=!1,this.registerEvents(),this.isVisible()&&this.load()},registerEvents:function(){e('a[href="'+this.options.el+'"]').on("click",this.load.bind(this))},isVisible:function(){var e=this.$el.attr("aria-hidden");return!e||"false"===e},load:function(){var t=this;this.loaded||(this.loaded=!0,e.ajax({url:this.options.url}).done(function(e){return t.render(e)}))},render:function(e){this.$el.html(e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-onboarding-dialog', location = '/feature/specs-onboarding-dialog/specs-onboarding-dialog.js' */
define("feature/specs-onboarding-dialog",["widget/dialog2","util/help-links"],function(e,o){"use strict";return e.extend({initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.repositoryId,n=t.requiresWebhook,s=t.bambooBaseUrl,r=t.bambooSpecsVersion,a=t.onClose,l=void 0===a?function(){}:a,c=t.buildProjectKey,b=t.webhookSetupDocumentationUrl,d=t.footerActionContent,u=void 0===d?" ":d,g=t.showSecuritySettingsHint;e.prototype.initialize.call(this,{id:"specs-onboarding-dialog",titleText:"Few more things...",content:bamboo.feature.specs.onboarding.dialog.content({repositoryId:i,requiresWebhook:n,bambooBaseUrl:s,bambooSpecsVersion:r,buildProjectKey:c,webhookSetupDocumentationUrl:b,specsReferenceUrl:o.getHelpLink("bamboo.specs.help"),showSecuritySettingsHint:g}),warning:!1,modal:!0,extraClasses:"",size:e.XLARGE,removeOnHide:!0,footerActionContent:u,buttons:[{onClick:function(e){l(e),e.hide(),AJS.$("div.aui-blanket").remove()},text:"Got it"}]})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-onboarding-dialog', location = '/feature/specs-onboarding-dialog/specs-onboarding-dialog.soy' */
// This file was automatically generated from specs-onboarding-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.specs.onboarding.dialog.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.specs == 'undefined') { bamboo.feature.specs = {}; }
if (typeof bamboo.feature.specs.onboarding == 'undefined') { bamboo.feature.specs.onboarding = {}; }
if (typeof bamboo.feature.specs.onboarding.dialog == 'undefined') { bamboo.feature.specs.onboarding.dialog = {}; }


bamboo.feature.specs.onboarding.dialog.content = function(opt_data, opt_ignored) {
  return '<div class="specs-onboarding-dialog__dialog-content">' + ((opt_data.requiresWebhook) ? '<h3>' + soy.$$escapeHtml("Step 1: Setup a webhook in your repository") + '</h3>' + bamboo.feature.specs.onboarding.dialog.showWebhookUrl({bambooBaseUrl: opt_data.bambooBaseUrl, repositoryId: opt_data.repositoryId, cssClass: 'dialog-content__code dialog-content__code--full-width', webhookSetupDocumentationUrl: opt_data.webhookSetupDocumentationUrl, showSecuritySettingsHint: opt_data.showSecuritySettingsHint}) : '') + '<h3>' + ((opt_data.requiresWebhook) ? soy.$$escapeHtml("Step 2:") + ' ' : '') + soy.$$escapeHtml("Start with Bamboo Specs") + '</h3><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Use Bamboo YAML Specs to quickly create simple plans. For advanced configuration options, use Java Specs. Whichever option you choose, we\x27\x27ve prepared customized snippets to get you started. For more information, see \x3ca href\x3d\x22{0}\x22\x3eBamboo Specs reference guide\x3c/a\x3e.",typeof (opt_data.specsReferenceUrl) === 'number' ? opt_data.specsReferenceUrl : soy.$$escapeHtml(opt_data.specsReferenceUrl)))) + '</p><div class="dialog-content__code-row"><div class="dialog-content__code-cell dialog-content__code-cell--left"><h5>' + soy.$$escapeHtml("JAVA SPECS") + '</h5><div class="dialog-content__code">' + bamboo.feature.specs.onboarding.dialog.mvnTemplate(opt_data) + '</div></div>' + ((opt_data.buildProjectKey) ? '<div class="dialog-content__code-cell dialog-content__code-cell--right"><h5>' + soy.$$escapeHtml("YAML SPECS") + '</h5><div class="dialog-content__code">' + bamboo.feature.specs.onboarding.dialog.yamlTemplate(opt_data) + '</div></div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.content.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.content';
}


bamboo.feature.specs.onboarding.dialog.showWebhookUrl = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eEnable webhooks\x3c/a\x3e for your repository so that Bamboo knows about new commits. Use this URL as the destination for the webhook:",typeof (opt_data.webhookSetupDocumentationUrl) === 'number' ? opt_data.webhookSetupDocumentationUrl : soy.$$escapeHtml(opt_data.webhookSetupDocumentationUrl)))) + '</p><div class="' + soy.$$escapeHtml(opt_data.cssClass) + '">' + soy.$$escapeHtml(opt_data.bambooBaseUrl) + '/rest/api/latest/repository/scan?repositoryId=' + soy.$$escapeHtml(opt_data.repositoryId) + '</div><div>' + aui.icons.icon({icon: 'info', useIconFont: true}) + ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("Webhooks must be triggered by HTTP \x3cspan class\x3d\x22inlineCode\x22\x3ePOST\x3c/span\x3e method and the \x3cspan class\x3d\x22inlineCode\x22\x3eContent-Type\x3c/span\x3e header should be set to \x3cspan class\x3d\x22inlineCode\x22\x3eapplication/json\x3c/span\x3e.")) + '</div>' + ((opt_data.showSecuritySettingsHint) ? '<div>' + aui.icons.icon({icon: 'info', useIconFont: true}) + ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("The anonymous access is disabled for webhooks. To enable it, go to \x3cb\x3eBamboo administration\x3c/b\x3e \x3e \x3cb\x3eSecurity settings\x3c/b\x3e.")) + '</div>' : '');
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.showWebhookUrl.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.showWebhookUrl';
}


bamboo.feature.specs.onboarding.dialog.mvnTemplate = function(opt_data, opt_ignored) {
  return 'mvn archetype:generate -B \\\n  -DarchetypeGroupId=com.atlassian.bamboo \\\n  -DarchetypeArtifactId=bamboo-specs-archetype \\\n  -DarchetypeVersion=' + soy.$$escapeHtml(opt_data.bambooSpecsVersion) + ' \\\n  -DgroupId=com.atlassian.bamboo \\\n  -DartifactId=bamboo-specs \\\n  -Dversion=1.0.0-SNAPSHOT \\\n  -Dpackage=tutorial \\\n  -Dtemplate=minimal';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.mvnTemplate.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.mvnTemplate';
}


bamboo.feature.specs.onboarding.dialog.yamlTemplate = function(opt_data, opt_ignored) {
  return 'version: 2\nplan:\n  project-key: ' + soy.$$escapeHtml(opt_data.buildProjectKey) + '\n  key: PLAN\n  name: My Plan\n\nstages:\n  - Stage 1:\n      jobs:\n        - Job 1\n\nJob 1:\n  tasks:\n    - script:\n        - echo \'Hello from YAML Specs\'';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.yamlTemplate.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.yamlTemplate';
}


bamboo.feature.specs.onboarding.dialog.dontShowAgain = function(opt_data, opt_ignored) {
  return '<div class="field-group dont-show__content"><div class="checkbox"><input type="checkbox" name="dontshow" value="true" id="dontshow" class="checkbox"/><label for="dontshow" id="label_dontshow">' + soy.$$escapeHtml("Don\x27t show this again") + '</label></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.dontShowAgain.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.dontShowAgain';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-admin-panel-header', location = '/feature/admin-panel-header/admin-panel-header.js' */
define("feature/admin-panel-header",["marionette"],function(e){"use strict";return e.ItemView.extend({template:bamboo.feature.admin.panel.header.content,ui:{searchLink:"#admin-panel-search-link"},events:{"click @ui.searchLink":"openSearch"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.showSearch=e.showSearch},serializeData:function(){return{showSearch:this.showSearch&&BAMBOO.ACTIONSDIALOG&&BAMBOO.ACTIONSDIALOG.showDialog}},openSearch:function(e){e.preventDefault(),BAMBOO.ACTIONSDIALOG.showDialog("Administration")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-admin-panel-header', location = '/feature/admin-panel-header/admin-panel-header.soy' */
// This file was automatically generated from admin-panel-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.admin.panel.header.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.admin == 'undefined') { bamboo.feature.admin = {}; }
if (typeof bamboo.feature.admin.panel == 'undefined') { bamboo.feature.admin.panel = {}; }
if (typeof bamboo.feature.admin.panel.header == 'undefined') { bamboo.feature.admin.panel.header = {}; }


bamboo.feature.admin.panel.header.content = function(opt_data, opt_ignored) {
  return '<ol class="aui-nav aui-nav-horizontal">' + ((opt_data.showSearch) ? '<li><h1>' + soy.$$escapeHtml("Administration") + '</h1></li><li id="admin-panel-search"><a id="admin-panel-search-link" href="#" class="aui-button aui-button-subtle">' + aui.icons.icon({icon: 'search', useIconFont: true}) + '<span>' + soy.$$escapeHtml("Search Bamboo admin") + '</span></a></li>' : '<li><h1>' + soy.$$escapeHtml("Bamboo administration") + '</h1></li>') + '</ol>';
};
if (goog.DEBUG) {
  bamboo.feature.admin.panel.header.content.soyTemplateName = 'bamboo.feature.admin.panel.header.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-permissions', location = '/page/permissions/permissions.js' */
function _defineProperty(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};define("page/permissions",["underscore","backbone","widget/permissions","feature/config-read-only"],function(e,n,s,i){"use strict";var t,o={user:"user",group:"group",role:"role"},r={anonymous:"ANONYMOUS",loggedIn:"LOGGED_IN"},a=(t={},_defineProperty(t,r.anonymous,"Anonymous users"),_defineProperty(t,r.loggedIn,"Logged in users"),t),p=["READ"],l=["baseEndpoint","permissions","dependencies","editablePermissions","usersPermissions","anonymousPermissions","analyticsEntityType","readOnly"];return n.View.extend({template:function(){var e=this.hasRolePermissions();return bamboo.page.permissions.content({hasRolePermissions:e})},initialize:function(n){this.options=e.pick(n,l),this.validate(),this.appendDefaults(),this.options.readOnly&&i.makeReadOnly(this.$el)},render:function(){this.$el.html(this.template()),this.showPermissions({entryType:o.user,container:this.$el.find(".singlePagePermissions__users"),title:"User access",searchPlaceholder:"Add users",notFoundText:"No users have been given explicit permissions.",formatEntity:function(e){return e.fullName},formatSearchResult:function(e){return e.fullName+" - "+e.email},canAdd:!this.options.readOnly,canRemove:!this.options.readOnly}),this.showPermissions({entryType:o.group,container:this.$el.find(".singlePagePermissions__groups"),title:"Group access",searchPlaceholder:"Add groups",notFoundText:"No groups have been given explicit permissions.",canAdd:!this.options.readOnly,canRemove:!this.options.readOnly}),this.hasRolePermissions()&&this.showPermissions({entryType:o.role,container:this.$el.find(".singlePagePermissions__roles"),title:"Other",canAdd:!1,canRemove:!1,columnPredicate:this.rolePermissionPredicate.bind(this),formatEntity:function(e){return a[e.name]}})},hasRolePermissions:function(){return this.options.usersPermissions||this.options.anonymousPermissions},rolePermissionPredicate:function(e,n){var s=void 0;switch(e){case r.loggedIn:s=this.options.usersPermissions;break;case r.anonymous:s=this.options.anonymousPermissions;break;default:s=[]}return s.indexOf(n.permission)!==-1},ensureOptionsDefined:function(e,n){n.forEach(function(n){if(void 0===e[n])throw new Error(AJS.format('option "{0}" is required',n))})},ensurePropertiesAreNotEmpty:function(e,n){n.forEach(function(n){if(0===e[n].length)throw new Error(AJS.format('option "{0}" cannot be empty',n))})},validate:function(){var e=this;this.ensureOptionsDefined(this.options,["baseEndpoint","permissions"]),this.ensurePropertiesAreNotEmpty(this.options,["permissions"]),this.options.permissions.forEach(function(n){e.ensureOptionsDefined(n,["name","label"])})},appendDefaults:function(){this.options.permissions.forEach(function(n){return e.defaults(n,{editable:!0})});var n=this.getPermissionNames();e.defaults(this.options,{editablePermissions:n,usersPermissions:n,anonymousPermissions:n.filter(function(e){return p.indexOf(e)!==-1}),dependencies:{}})},getPermissionNames:function(){return this.options.permissions.map(function(e){return e.name})},getDefaultPreset:function(){var e=this;return{label:"Select permissions",items:this.options.permissions.filter(function(n){return e.options.editablePermissions.indexOf(n.name)!==-1}).map(function(e){return{text:e.label,permissions:[e.name]}})}},getColumns:function(){return this.options.permissions.map(function(e){return{label:e.label,permission:e.name}})},showPermissions:function(e){e=_extends({canAdd:!0,canRemove:!0},e);var n=!!this.options.editablePermissions.length,i=e.canAdd&&n,t=e.canRemove&&n,o=this.options.baseEndpoint,r=e.entryType,a=this.options.analyticsEntityType?{entityType:this.options.analyticsEntityType,entryType:r.toUpperCase()}:void 0;new s({container:e.container,endpoint:o+"/"+r+"s",controls:this.options.editablePermissions,dependencies:this.options.dependencies,columns:this.getColumns(),columnPredicate:e.columnPredicate,presets:i?[this.getDefaultPreset()]:[],searchEndpoint:o+"/available-"+r+"s",searchPlaceholder:e.searchPlaceholder,title:e.title,notFoundText:e.notFoundText,canAdd:i,canRemove:t,formatEntity:e.formatEntity,formatSearchResult:e.formatSearchResult,analytics:a})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-permissions', location = '/page/permissions/permissions.soy' */
// This file was automatically generated from permissions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.permissions.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.permissions == 'undefined') { bamboo.page.permissions = {}; }


bamboo.page.permissions.content = function(opt_data, opt_ignored) {
  return '<div class="singlePagePermissions"><div class="singlePagePermissions__users"></div><div class="singlePagePermissions__groups"></div>' + ((opt_data.hasRolePermissions) ? '<div class="singlePagePermissions__roles"></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bamboo.page.permissions.content.soyTemplateName = 'bamboo.page.permissions.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/entity/trusted-keys-collection.js' */
define("feature/trusted-keys/entity/trusted-keys-collection",["backbone","feature/trusted-keys/entity/trusted-keys-model"],function(e,t){"use strict";return e.Collection.extend({model:t,url:AJS.contextPath()+"/rest/admin/latest/security/trustedKey",comparator:"id"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-add-view.js' */
define("feature/trusted-keys/trusted-keys-add-view",["jquery","marionette","feature/trusted-keys/entity/trusted-keys-model","aui/flag"],function(e,t,s,r){"use strict";var n=function(e){var t=[];return e&&e.responseJSON&&e.responseJSON.errors&&(t=e.responseJSON.errors),t};return t.ItemView.extend({settings:null,template:bamboo.feature.trustedKeys.createTrustedKeyForm,ui:{key:"#key",host:"#host",errors:".control-form-error"},initialize:function(e){this.settings=e||{}},save:function(t){this.hideErrors();var o=new s;o.set("key",this.ui.key.val()),o.set("host",this.ui.host.val());var i=o.validate(o.attributes);i?(i.forEach(function(t){var s=e('[data-field-name="'+t.name+'"]');s.html=t.message,s.show()}),t.error&&t.error()):this.settings.collection.create(o,{wait:!0,success:function(){t.success&&t.success(),new r({type:"success",close:"auto",body:"Trusted key has been added"})},error:function(e,s){if(409===s.status)t.success&&t.success(),new r({type:"success",close:"auto",body:"A trusted key with given host and SSH key already exists."});else{t.error&&t.error();var o=n(s),i=o.length?o.join(" "):"View the server logs for the details.";new r({type:"error",close:"manual",body:"The trusted key can\u0027t be added."+" "+i})}}})},hideErrors:function(){this.ui.errors.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-add-dialog.js' */
define("feature/trusted-keys/trusted-keys-add-dialog",["underscore","marionette","widget/dialog","feature/trusted-keys/trusted-keys-add-view"],function(t,e,i,o){"use strict";return i.extend({defaultSettings:{height:350,width:800,id:"dialog-add-trusted-key",header:"Add trusted key",collection:null,buttons:[{id:"dialog-save-trusted-key",label:"Add",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Close",type:"link"}]},initialize:function(e){var o=e||{};o.content=bamboo.feature.trustedKeys.addDialog(),AJS.bind("show.dialog",t.bind(this.onDialogShow,this)),AJS.bind("remove.dialog",t.bind(this.onDialogHide,this)),i.prototype.initialize.call(this,t.defaults(o,this.defaultSettings))},onDialogShow:function(t,i){i.dialog&&i.dialog===this.dialog&&(this.region=new e.Region({el:".dialog-add-trusted-key__content"}),this.region.show(new o({collection:this.collection})),this.dialog.updateHeight())},onDialogHide:function(){this.region&&this.region.empty()},onButtonClick:function(e){for(var o,n=arguments.length,d=Array(n>1?n-1:0),a=1;a<n;a++)d[a-1]=arguments[a];if((o=i.prototype.onButtonClick).call.apply(o,[this,e].concat(d)),"dialog-save-trusted-key"===e){this.region.currentView.save({success:t.bind(function(){this.dialog.remove()},this),error:t.bind(function(){this.dialog.updateHeight()},this)})}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-inline-add.js' */
define("feature/trusted-keys/trusted-keys-inline-add",["underscore","marionette","feature/trusted-keys/entity/trusted-keys-collection","jquery","aui/flag"],function(e,t,s,r,n){"use strict";var i=function(e){var t=[];return e&&e.responseJSON&&e.responseJSON.errors&&(t=e.responseJSON.errors),t};return t.ItemView.extend({settings:{},initialize:function(t){this.settings=t||{};var s=r(bamboo.feature.trustedKeys.addTrustedKeyInline({linkId:this.settings.linkId}));s.on("click",e.bind(this.addClickHandler,this));var n=r(this.settings.anchor);r(s).insertBefore(n)},addClickHandler:function(e){e.preventDefault(),e.stopPropagation();var t={host:this.settings.host,key:this.settings.key};(new s).create(t,{wait:!0,success:function(){r(e.target).off("click"),new n({type:"success",close:"auto",body:"Trusted key has been added"})},error:function(t,s){if(409===s.status)r(e.target).off("click"),new n({type:"success",close:"auto",body:"A trusted key with given host and SSH key already exists."});else{var a=i(s),o=a.length?a.join(" "):"View the server logs for the details.";new n({type:"error",close:"manual",body:"The trusted key can\u0027t be added."+" "+o})}}})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-confirm-delete-dialog.js' */
define("feature/trusted-keys/trusted-keys-confirm-delete-dialog",["jquery","marionette","widget/dialog","aui/flag"],function(e,t,i,o){"use strict";return i.extend({defaultSettings:{height:200,width:400,id:"dialog-confirm-delete-trusted-key",model:null,header:"Delete trusted key",buttons:[{id:"dialog-confirm-delete-trusted-key-confirm",label:"Delete",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},initialize:function(e){var t=e||{};t.content=bamboo.feature.trustedKeys.confirmDeleteTrustedKey({host:t.model.get("host")}),i.prototype.initialize.call(this,_.defaults(t,this.defaultSettings))},onButtonClick:function(e){for(var t,o=arguments.length,n=Array(o>1?o-1:0),l=1;l<o;l++)n[l-1]=arguments[l];(t=i.prototype.onButtonClick).call.apply(t,[this,e].concat(n)),"dialog-confirm-delete-trusted-key-confirm"===e&&(this.model.destroy({wait:!0,success:_.bind(this.onDeleteSuccess,this),error:_.bind(this.onDeleteError,this)}),this.dialog.remove())},onDeleteSuccess:function(){new o({type:"success",close:"auto",body:"Trusted key was removed"})},onDeleteError:function(){new o({type:"error",close:"manual",body:"The trusted key can\u0027t be removed. View the server logs for the details."})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-app.js' */
define("feature/trusted-keys/trusted-keys-app",["jquery","feature/trusted-keys/trusted-keys-list-view","feature/trusted-keys/entity/trusted-keys-collection","feature/trusted-keys/trusted-keys-add-dialog","marionette","aui/flag"],function(t,e,n,i,o,r){"use strict";return o.Application.extend({collection:null,el:null,addBtn:null,initialize:function(t){var e=t||{};this.el=e.el,this.addBtn=e.addBtn},onStart:function(){this.addRegions({main:this.el}),this.collection=new n,this.collection.fetch({error:_.bind(this.onFetchErrorHandler,this)});var o=this.collection;this.getRegion("main").show(new e({collection:o})),t(this.addBtn).on("click",_.bind(function(){new i({collection:this.collection})},this))},onFetchErrorHandler:function(){new r({type:"error",close:"manual",body:"The trusted key can\u0027t be read from the server."})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/entity/trusted-keys-model.js' */
define("feature/trusted-keys/entity/trusted-keys-model",["backbone"],function(e){"use strict";return e.Model.extend({idAttribute:"id",defaults:{id:null,host:"",key:""},validate:function(e){var t=[];return e.host||t.push({name:"host",message:"This field is required"}),e.key||t.push({name:"key",message:"This field is required"}),t.length>0&&t}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys.soy' */
// This file was automatically generated from trusted-keys.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.trustedKeys.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.trustedKeys == 'undefined') { bamboo.feature.trustedKeys = {}; }


bamboo.feature.trustedKeys.view = function(opt_data, opt_ignored) {
  return '<div class="trusted_keys"><table id="trusted-keys" class="aui"><thead><tr><th id="trusted-keys-host" class="trusted-keys-host-col">' + soy.$$escapeHtml("Host") + '</th><th id="trusted-keys-key" class="trusted-keys-key-col">' + soy.$$escapeHtml("SSH key") + '</th><th id="trusted-keys-action" class="trusted-keys-action"></th></tr></thead><tbody></tbody></table></div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.view.soyTemplateName = 'bamboo.feature.trustedKeys.view';
}


bamboo.feature.trustedKeys.trustedKeyRow = function(opt_data, opt_ignored) {
  return '<td class="trusted-keys-host-col" title="' + soy.$$escapeHtml(opt_data.host) + '"><span>' + soy.$$escapeHtml(opt_data.host) + '</span></td><td class="trusted-keys-key-col" title="' + soy.$$escapeHtml(opt_data.key) + '"><span>' + soy.$$escapeHtml(opt_data.key) + '</span></td><td class="trusted-keys-action"><a id="delete-trusted-key-' + soy.$$escapeHtml(opt_data.id) + '" data-id="' + soy.$$escapeHtml(opt_data.id) + '" href="" class="delete delete-trusted-key" title="' + soy.$$escapeHtml("Revoke access for this key") + '">' + soy.$$escapeHtml("Delete") + '</a></td>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.trustedKeyRow.soyTemplateName = 'bamboo.feature.trustedKeys.trustedKeyRow';
}


bamboo.feature.trustedKeys.confirmDeleteTrustedKey = function(opt_data, opt_ignored) {
  return '<div >' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Do you want to remove the trusted key for \x3cstrong\x3e\x27\x27{0}\x27\x27\x3c/strong\x3e?",typeof (opt_data.host) === 'number' ? opt_data.host : soy.$$escapeHtml(opt_data.host)))) + '</div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.confirmDeleteTrustedKey.soyTemplateName = 'bamboo.feature.trustedKeys.confirmDeleteTrustedKey';
}


bamboo.feature.trustedKeys.addDialog = function(opt_data, opt_ignored) {
  return '<div class="dialog-add-trusted-key__content"></div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.addDialog.soyTemplateName = 'bamboo.feature.trustedKeys.addDialog';
}


bamboo.feature.trustedKeys.createTrustedKeyForm = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><form class="aui"><fieldset class="trusted-keys-fieldset group"><div id="fieldArea_host" class="field-group required"><label for="host">' + soy.$$escapeHtml("Host") + '<span class="aui-icon icon-required"> required</span></label><input name="host" id="host" class="text long-field" /><div class="error control-form-error" data-field-name="host" style="display:none">' + soy.$$escapeHtml("This field is required") + '</div></div><div id="fieldArea_key" class="field-group required"><label for="key">' + soy.$$escapeHtml("SSH key") + '<span class="aui-icon icon-required"> required</span></label><textarea spellcheck="false" name="key" id="key" class="textarea long-field" rows="5"></textarea><div class="error control-form-error" data-field-name="key" style="display:none">' + soy.$$escapeHtml("This field is required") + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.createTrustedKeyForm.soyTemplateName = 'bamboo.feature.trustedKeys.createTrustedKeyForm';
}


bamboo.feature.trustedKeys.addTrustedKeyInline = function(opt_data, opt_ignored) {
  return '<a href="#" id="' + soy.$$escapeHtml(opt_data.linkId) + '">' + soy.$$escapeHtml("Add to trusted keys") + '</a>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.addTrustedKeyInline.soyTemplateName = 'bamboo.feature.trustedKeys.addTrustedKeyInline';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-list-view.js' */
define("feature/trusted-keys/trusted-keys-list-view",["marionette","feature/trusted-keys/trusted-keys-confirm-delete-dialog"],function(e,t){"use strict";return e.CompositeView.extend({template:function(){return bamboo.feature.trustedKeys.view()},childViewContainer:"tbody",childView:e.ItemView.extend({template:bamboo.feature.trustedKeys.trustedKeyRow,tagName:"tr",ui:{deleteBtn:".delete-trusted-key"},events:{"click @ui.deleteBtn":"warnBeforeDelete"},warnBeforeDelete:function(e){e.preventDefault(),new t({model:this.model})}})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'browser-metrics.js' */
(function(){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.0.0
 */
var j,z,e,r,p,x,H,I,u,q,J,M,L,s,i,f,m,F,v,n,O,D,R,l,N,C,y,A,h,g,E,o,d,w,c,T,K,a,G,b,P,Q,t,S;(function(){function aO(a6){return typeof a6==="function"||typeof a6==="object"&&a6!==null}function am(a6){return typeof a6==="function"}function a4(a6){return typeof a6==="object"&&a6!==null}var a1;if(!Array.isArray){a1=function(a6){return Object.prototype.toString.call(a6)==="[object Array]"}}else{a1=Array.isArray}var aG=a1;var ar=Date.now||function(){return new Date().getTime()};function av(){}var Z=Object.create||function(a6){if(arguments.length>1){throw new Error("Second argument not supported")}if(typeof a6!=="object"){throw new TypeError("Argument must be an object")}av.prototype=a6;return new av()};var aZ=0;var ai=function aM(a7,a6){aY[aZ]=a7;aY[aZ+1]=a6;aZ+=2;if(aZ===2){W()}};var aF=typeof window!=="undefined"?window:{};var ap=aF.MutationObserver||aF.WebKitMutationObserver;var ah=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function aJ(){return function(){process.nextTick(a0)}}function aU(){var a8=0;var a6=new ap(a0);var a7=document.createTextNode("");a6.observe(a7,{characterData:true});return function(){a7.data=a8=++a8%2}}function aK(){var a6=new MessageChannel();a6.port1.onmessage=a0;return function(){a6.port2.postMessage(0)}}function aQ(){return function(){setTimeout(a0,1)}}var aY=new Array(1000);function a0(){for(var a7=0;a7<aZ;a7+=2){var a8=aY[a7];var a6=aY[a7+1];a8(a6);aY[a7]=undefined;aY[a7+1]=undefined}aZ=0}var W;if(typeof process!=="undefined"&&{}.toString.call(process)==="[object process]"){W=aJ()}else{if(ap){W=aU()}else{if(ah){W=aK()}else{W=aQ()}}}function ak(){}var aw=void 0;var aR=1;var ax=2;var aX=new a3();function aV(){return new TypeError("You cannot resolve a promise with itself")}function aE(){return new TypeError("A promises callback cannot return that same promise.")}function aN(a7){try{return a7.then}catch(a6){aX.error=a6;return aX}}function Y(ba,a8,a7,a6){try{ba.call(a8,a7,a6)}catch(a9){return a9}}function aP(a8,a6,a7){ai(function(bb){var ba=false;var a9=Y(a7,a6,function(bc){if(ba){return}ba=true;if(a6!==bc){af(bb,bc)}else{ae(bb,bc)}},function(bc){if(ba){return}ba=true;aD(bb,bc)},"Settle: "+(bb._label||" unknown promise"));if(!ba&&a9){ba=true;aD(bb,a9)}},a8)}function aa(a7,a6){if(a6._state===aR){ae(a7,a6._result)}else{if(a7._state===ax){aD(a7,a6._result)}else{a5(a6,undefined,function(a8){af(a7,a8)},function(a8){aD(a7,a8)})}}}function ab(a8,a6){if(a6.constructor===a8.constructor){aa(a8,a6)}else{var a7=aN(a6);if(a7===aX){aD(a8,aX.error)}else{if(a7===undefined){ae(a8,a6)}else{if(am(a7)){aP(a8,a6,a7)}else{ae(a8,a6)}}}}}function af(a7,a6){if(a7===a6){aD(a7,aV())}else{if(aO(a6)){ab(a7,a6)}else{ae(a7,a6)}}}function aI(a6){if(a6._onerror){a6._onerror(a6._result)}ad(a6)}function ae(a7,a6){if(a7._state!==aw){return}a7._result=a6;a7._state=aR;if(a7._subscribers.length===0){}else{ai(ad,a7)}}function aD(a7,a6){if(a7._state!==aw){return}a7._state=ax;a7._result=a6;ai(aI,a7)}function a5(a6,bb,ba,a9){var a8=a6._subscribers;var a7=a8.length;a6._onerror=null;a8[a7]=bb;a8[a7+aR]=ba;a8[a7+ax]=a9;if(a7===0&&a6._state){ai(ad,a6)}}function ad(ba){var a9=ba._subscribers;var a6=ba._state;if(a9.length===0){return}var bc,bb,a8=ba._result;for(var a7=0;a7<a9.length;a7+=3){bc=a9[a7];bb=a9[a7+a6];if(bc){aT(a6,bc,bb,a8)}else{bb(a8)}}ba._subscribers.length=0}function a3(){this.error=null}var al=new a3();function aC(a8,a6){try{return a8(a6)}catch(a7){al.error=a7;return al}}function aT(bc,be,bb,a8){var a6=am(bb),ba,a9,bd,a7;if(a6){ba=aC(bb,a8);if(ba===al){a7=true;a9=ba.error;ba=null}else{bd=true}if(be===ba){aD(be,aE());return}}else{ba=a8;bd=true}if(be._state!==aw){}else{if(a6&&bd){af(be,ba)}else{if(a7){aD(be,a9)}else{if(bc===aR){ae(be,ba)}else{if(bc===ax){aD(be,ba)}}}}}}function ac(ba,a9){try{a9(function a6(bb){af(ba,bb)},function a8(bb){aD(ba,bb)})}catch(a7){aD(ba,a7)}}function a2(a8,a6,a7){if(a8===aR){return{state:"fulfilled",value:a7}}else{return{state:"rejected",reason:a7}}}function aW(a8,a6,a9,a7){this._instanceConstructor=a8;this.promise=new a8(ak,a7);this._abortOnReject=a9;if(this._validateInput(a6)){this._input=a6;this.length=a6.length;this._remaining=a6.length;this._init();if(this.length===0){ae(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){ae(this.promise,this._result)}}}else{aD(this.promise,this._validationError())}}aW.prototype._validateInput=function(a6){return aG(a6)};aW.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};aW.prototype._init=function(){this._result=new Array(this.length)};var aH=aW;aW.prototype._enumerate=function(){var a8=this.length;var a9=this.promise;var a6=this._input;for(var a7=0;a9._state===aw&&a7<a8;a7++){this._eachEntry(a6[a7],a7)}};aW.prototype._eachEntry=function(a7,a6){var a8=this._instanceConstructor;if(a4(a7)){if(a7.constructor===a8&&a7._state!==aw){a7._onerror=null;this._settledAt(a7._state,a6,a7._result)}else{this._willSettleAt(a8.resolve(a7),a6)}}else{this._remaining--;this._result[a6]=this._makeResult(aR,a6,a7)}};aW.prototype._settledAt=function(a8,a6,a7){var a9=this.promise;if(a9._state===aw){this._remaining--;if(this._abortOnReject&&a8===ax){aD(a9,a7)}else{this._result[a6]=this._makeResult(a8,a6,a7)}}if(this._remaining===0){ae(a9,this._result)}};aW.prototype._makeResult=function(a8,a6,a7){return a7};aW.prototype._willSettleAt=function(a7,a6){var a8=this;a5(a7,undefined,function(a9){a8._settledAt(aR,a6,a9)},function(a9){a8._settledAt(ax,a6,a9)})};var at=function aq(a6,a7){return new aH(this,a6,true,a7).promise};var ay=function ag(a6,a7){var bd=this;var bc=new bd(ak,a7);if(!aG(a6)){aD(bc,new TypeError("You must pass an array to race."));return bc}var a9=a6.length;function bb(be){af(bc,be)}function ba(be){aD(bc,be)}for(var a8=0;bc._state===aw&&a8<a9;a8++){a5(bd.resolve(a6[a8]),undefined,bb,ba)}return bc};var ao=function au(a7,a6){var a9=this;if(a7&&typeof a7==="object"&&a7.constructor===a9){return a7}var a8=new a9(ak,a6);af(a8,a7);return a8};var V=function aA(a7,a6){var a9=this;var a8=new a9(ak,a6);aD(a8,a7);return a8};var aB=0;function aS(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function aj(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var aL=X;function X(a7,a6){this._id=aB++;this._label=a6;this._state=undefined;this._result=undefined;this._subscribers=[];if(ak!==a7){if(!am(a7)){aS()}if(!(this instanceof X)){aj()}ac(this,a7)}}X.all=at;X.race=ay;X.resolve=ao;X.reject=V;X.prototype={constructor:X,then:function(bb,ba,a7){var a8=this;var a9=a8._state;if(a9===aR&&!bb||a9===ax&&!ba){return this}a8._onerror=null;var bd=new this.constructor(ak,a7);var a6=a8._result;if(a9){var bc=arguments[a9-1];ai(function(){aT(a9,bd,bc,a6)})}else{a5(a8,bd,bb,ba)}return bd},"catch":function(a7,a6){return this.then(null,a7,a6)}};var an=function U(){var a7;if(typeof global!=="undefined"){a7=global}else{if(typeof window!=="undefined"&&window.document){a7=window}else{a7=self}}var a6="Promise" in a7&&"resolve" in a7.Promise&&"reject" in a7.Promise&&"all" in a7.Promise&&"race" in a7.Promise&&function(){var a8;new a7.Promise(function(a9){a8=a9});return am(a8)}();if(!a6){a7.Promise=aL}};var az={Promise:aL,polyfill:an};if(true){j=function(){return az}()}else{if(typeof module!=="undefined"&&module.exports){module.exports=az}else{if(typeof this!=="undefined"){this["ES6Promise"]=az}}}}.call(this));z=function(V){var U=V.Promise;return U}(j);e=function(){return window}();r=function(W){var V=W.HTMLElement.prototype;var U=V.matches||V.msMatchesSelector||V.webkitMatchesSelector||V.mozMatchesSelector||V.oMatchesSelector;return U}(e);p=function k(U){var V=false;return function(){if(!V){V=true;setTimeout(function(){V=false;U()},1)}}};x=function(U,X){function W(aa){this.callback=aa;this.elements=[]}W.prototype={observe:function(ah,ap){function ab(aq){ao.push(aq);aa()}function an(at){var ar=at.target;if(!ar){return}var aq=ar.parentNode;if(!ai(aq)){return}if(am&&Z(am,ar)){return}if(!ak||ak.target!==aq){aj.push(ak=Y(aq))}if(aq){if(!ak.addedNodes){ak.addedNodes=[]}ak.addedNodes.push(ar)}else{if(!ak.removedNodes){ak.removedNodes=[]}ak.removedNodes.push(ar)}am=ar}function ag(aq){return ap.attributes&&(ap.subtree||aq===ah)}function ai(aq){return ap.childList&&(ap.subtree||aq===ah)}var ae=this;var am;var ak;var ao=[];var aj=[];var aa=U(function(){var aq=ao.length;for(var ar=0;ar<aq;ar++){an(ao[ar])}ae.callback(aj);ao=[];aj=[];am=undefined;ak=undefined});var al={};var ad=[];var af=U(function(){var aq=ad.length;ae.callback(ad);ad.splice(0,aq)});var ac={target:ah,options:ap,insertHandler:ab,removeHandler:ab,attributeHandler:function(aw){var au=aw.target;if(!ag(au)){return}var ar=aw.attrName;var at=aw.prevValue;var av=aw.newValue;var aq=Y(au,"attributes");aq.attributeName=ar;if(ap.attributeOldValue){aq.oldValue=al[ar]||at||null}ad.push(aq);if(ap.attributeOldValue){al[ar]=av}af()}};this.elements.push(ac);if(ap.childList){ah.addEventListener("DOMNodeInserted",ac.insertHandler);ah.addEventListener("DOMNodeRemoved",ac.removeHandler)}if(ap.attributes){ah.addEventListener("DOMAttrModified",ac.attributeHandler)}return this},disconnect:function(){this.elements.forEach(function(aa){aa.target.removeEventListener("DOMNodeInserted",aa.insertHandler);aa.target.removeEventListener("DOMNodeRemoved",aa.removeHandler);aa.target.removeEventListener("DOMAttrModified",aa.attributeHandler)});this.elements=[];return this}};function Y(ab,aa){return{addedNodes:null,attributeName:null,attributeNamespace:null,nextSibling:null,oldValue:null,previousSibling:null,removedNodes:null,target:ab,type:aa||"childList"}}var V=X.HTMLElement.prototype.contains;function Z(aa,ab){if(aa.nodeType!==1){return false}return aa.contains?aa.contains(ab):V.call(aa,ab)}return W}(p,e);H=function(V,U){return U.MutationObserver||U.WebkitMutationObserver||U.MozMutationObserver||V}(x,e);I=function(){function U(){this._items={};this.length=0}U.prototype.add=function(W,V){if(!this._items.hasOwnProperty(W)){this.length++;this._items[W]=[]}this._items[W].push(V)};U.prototype.remove=function(Y,W){var V,X=false;if(this._items.hasOwnProperty(Y)){if(arguments.length===1){delete this._items[Y];X=true}else{V=this._items[Y].indexOf(W);if(V>-1){this._items[Y].splice(V,1);if(this._items[Y].length===0){delete this._items[Y]}X=true}}}return X};U.prototype.get=function(V){if(this._items.hasOwnProperty(V)){return this._items[V]}return[]};U.prototype.forEach=function(W){var V=this._items;Object.keys(V).forEach(function(X){W(V[X],X)})};return U}();u=function(ad,ae,W,Y,aa){var ac,X=false,Z;Z=new Y();function V(af,ag){if(!X){ac.observe(aa.document,{attributes:true,childList:true,subtree:true});X=true}Z.add(af,ag)}function ab(af,ag){Z.remove.apply(Z,arguments);if(Z.length===0){ac.disconnect();X=false}}ac=new W(function(af){af.forEach(function(ah){var ag=ah.type==="childList"&&ah.addedNodes&&ah.addedNodes.length>0;var ai=ah.type==="attributes";if(!ag&&!ai){return}Z.forEach(function(ak,aj){if(ah.target.querySelector(aj)||ae.call(ah.target,aj)){ak.forEach(function(al){al()});ab(aj)}})})});function U(ag){var ah;if(!ag.forEach){ag=[ag]}var af=new ad(function(al,ak){var am=[];var ai=[];ag.forEach(function(an){var ap;var ao;if(!aa.document.querySelector(an)){ap=new ad(function(aq){V(an,aq);ao=function(){ab(an,aq)}});am.push(ap);ai.push(ao)}});function aj(){ai.forEach(function(an){an()})}ad.all(am).then(aj).then(al,ak);ah=function(){aj();ak()}});af.dismiss=ah;return af}return U}(z,r,H,I,e);q=function(ad,ae,V,X,aa){var ac,W=false,Z;Z=new X();function U(af,ag){if(!W){ac.observe(aa.document,{childList:true,subtree:true});W=true}Z.add(af,ag)}function ab(af,ag){Z.remove.apply(Z,arguments);if(Z.length===0){ac.disconnect();W=false}}ac=new V(function(af){af.forEach(function(ag){var ah=ag.type==="childList"&&ag.removedNodes&&ag.removedNodes.length>0;if(ah){Z.forEach(function(al,ai){var am;for(var ak=0;ak<ag.removedNodes.length;ak++){am=ag.removedNodes[ak];if(am.querySelector&&(am.querySelector(ai)||ae.call(am,ai))){for(var aj=0;aj<al.length;aj++){al[aj]()}ab(ai)}}})}})});function Y(ag){var ah;if(!ag.forEach){ag=[ag]}var af=new ad(function(al,ak){var am=[];var ai=[];ag.forEach(function(an){var ap;var ao;if(aa.document.querySelector(an)){ap=new ad(function(aq){U(an,aq);ao=function(){ab(an,aq)}});am.push(ap);ai.push(ao)}});function aj(){ai.forEach(function(an){an()})}ad.all(am).then(aj).then(al,ak);ah=function(){aj();ak()}});af.dismiss=ah;return af}return Y}(z,r,H,I,e);J=function(){var V={};var W={};var U=function(X,Z,Y){if(!W.hasOwnProperty(X)){W[X]=[]}if(Z){W[X].push({callback:Z,once:Y})}};V.on=function(X,Y){U(X,Y,false)};V.one=function(X,Y){U(X,Y,true)};V.trigger=function(X,Y){var Z=[];(W[X]||[]).forEach(function(aa){aa.callback.apply(undefined,[Y]);if(!aa.once){Z.push(aa)}});if(Z.length===0){delete W[X]}else{W[X]=Z}};return V}();M=function(U){return function V(){return U.performance&&U.performance.navigation&&U.performance.timing&&typeof U.performance.timing.navigationStart!=="undefined"}}(e);L=function(V){function U(X,W){return new V(function(Z){var aa;function Y(){var ab=X();if(ab!==undefined){clearInterval(aa);Z(ab)}}aa=setInterval(Y,W);Y()})}return U}(z);s=function(Y,ab,Z,W){var X=["unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];function U(){var ac=Y.performance.timing.loadEventEnd>0;var ad={};if(ac){X.forEach(function ae(af){var ag=Y.performance.timing[af];var ah=ag>0;if(ah){ad[af]=ag-Y.performance.timing.navigationStart}});return ad}}var aa;function V(){if(!ab()){return Z.reject("The navigation timing API is required to produce a report for this navigation.")}if(typeof aa==="undefined"){aa=W(U,250)}return aa}return V}(e,M,z,L);i=function(W,V,X){function U(Y){return V().then(function(){var Z=Y.isInitial?W.performance.timing.navigationStart:Y.start;return{readyForUser:Math.round(Y.end-Z)}})}return U}(e,s,z);f=function(V){return function U(W){return V(W).then(function(X){var Y;var aa=W.threshold;var Z=W.threshold*4;if(X.readyForUser<aa){Y=1}else{if(X.readyForUser<Z){Y=0.5}else{Y=0}}return{apdex:Y}})}}(i);m=function(Y,X,ab){function aa(ac){if(!ac.isInitial){return{}}return W().then(function(ad){return{firstPaint:Math.round(ad)}},function(){return{}})}function U(){return Y.chrome&&Y.chrome.loadTimes}function Z(){return typeof Y.performance.timing.msFirstPaint!=="undefined"}function V(){if(U()&&Y.chrome.loadTimes().firstPaintTime>0){return Y.chrome.loadTimes().firstPaintTime*1000-Y.performance.timing.navigationStart}else{if(Z()&&Y.performance.timing.msFirstPaint>0){return Y.performance.timing.msFirstPaint-Y.performance.timing.navigationStart}}}function W(){if(U()||Z()){return X(V,250)}else{return ab.reject("The browser does not have a first paint metric")}}return aa}(e,L,z);F=function B(U){return{isInitial:U.isInitial}};v=function(W,X){var Y="browser-metrics-journey";function V(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ab){var aa=W.Math.random()*16|0;var Z=ab==="x"?aa:aa&3|8;return Z.toString(16)})}function U(){if(typeof W.sessionStorage==="undefined"){return X.reject("sessionStorage is required to produce a report for this navigation.")}if(W.sessionStorage.getItem(Y)===null){W.sessionStorage.setItem(Y,V())}return X.resolve({journeyId:W.sessionStorage.getItem(Y)})}return U}(e,z);n=function(){function U(V){return{key:V.key}}return U}();O=function(V,W){function U(Y){var X={};if(Y.isInitial&&W()){X.navigationType=V.performance.navigation.type}return X}return U}(e,M);D=function(V,X,W){function U(Z){var Y={};if(Z.isInitial){if(!X()){return W.reject("The navigation timing API is required to produce a report for this navigation.")}if(typeof V.performance.navigation.redirectCount!=="undefined"){Y.redirectCount=V.performance.navigation.redirectCount}}return W.resolve(Y)}return U}(e,M,z);R=function(U){function V(X){var W=U.document.createElement("a");W.href=X;return W.href}return V}(e);l=function(Y,V,X){function U(){var Z=X.document.querySelectorAll("script[src][async]");return Array.prototype.map.call(Z,function(aa){return Y(aa.src)})}function W(){var Z=U();function aa(ad){return X.performance.getEntriesByType("resource").filter(function ae(af){return af.initiatorType==="link"||af.initiatorType==="script"}).filter(function ac(af){return af.responseEnd<ad.domContentLoadedEventStart}).filter(function ab(af){return af.initiatorType!=="script"||Z.indexOf(af.name)===-1})}return V().then(aa)}return W}(R,s,e);N=function(V,U){function W(Y){if(!Y.isInitial){return{}}return U().then(function X(ad){var ac=ad.map(function Z(ae){return ae.responseEnd}).map(function ab(ae){return Math.round(ae)}).reduce(function aa(af,ae){return Math.max(af,ae)},0);return{resourceLoadedEnd:ac}})}return W}(z,l);C=function(X,U,V){function W(){function Y(aa){return V.performance.getEntriesByType("resource").filter(function ac(ad){return ad.initiatorType!=="img"}).filter(function ab(ad){return ad.startTime<aa.domContentLoadedEventEnd}).filter(function Z(ad){return ad.name.indexOf("https://ace.atlassian.com")===-1})}return U().then(Y)}return W}(R,s,e);
/*!
 * resourcetiming-compression.js
 *
 * Compresses ResourceTiming data.
 *
 * Based on https://github.com/nicjansma/resourcetiming-compression.js
 *
 */
y=function(){var U={};U.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5};U.convertToTrie=function(Z){var aa={},V,Y,ac,ab,W,ad,X;for(V in Z){if(!Z.hasOwnProperty(V)){continue}ac=Z[V];ab=V.split("");ad=aa;for(Y=0;Y<ab.length;Y++){W=ab[Y];X=ad[W];if(typeof X==="undefined"){ad=ad[W]=Y===ab.length-1?ac:{}}else{if(typeof X==="string"){ad=ad[W]={"|":X}}else{if(Y===ab.length-1){ad[W]["|"]=ac}else{ad=ad[W]}}}}}return aa};U.optimizeTrie=function(aa,Z){var X=0,Y,W,V;for(Y in aa){if(typeof aa[Y]==="object"){W=this.optimizeTrie(aa[Y],false);if(W){delete aa[Y];Y=Y+W.name;aa[Y]=W.value}}X++}if(X===1){if(Z){V={};V[Y]=aa[Y];return V}else{return{name:Y,value:aa[Y]}}}else{if(Z){return aa}else{return false}}};U.trimTiming=function(W,V){if(typeof W!=="number"||typeof V!=="number"||W===0){return null}var X=Math.round(W-V);return X===0?null:X};U.toBase36=function(V){return typeof V==="number"?V.toString(36):""};U.compressResourceData=function(W){var V=this.INITIATOR_TYPES[W.initiatorType];if(typeof V==="undefined"){V=0}return V+[this.trimTiming(W.startTime,0),this.trimTiming(W.responseEnd,W.startTime),this.trimTiming(W.responseStart,W.startTime),this.trimTiming(W.requestStart,W.startTime),this.trimTiming(W.connectEnd,W.startTime),this.trimTiming(W.secureConnectionStart,W.startTime),this.trimTiming(W.connectStart,W.startTime),this.trimTiming(W.domainLookupEnd,W.startTime),this.trimTiming(W.domainLookupStart,W.startTime),this.trimTiming(W.redirectEnd,W.startTime),this.trimTiming(W.redirectStart,W.startTime)].map(this.toBase36).join(",").replace(/,+$/,"")};U.getResourceTiming=function(aa){var X,Z,W={},V,Y;if(!aa||!aa.length){return[]}for(X=0;X<aa.length;X++){Z=aa[X];if(Z.name.indexOf("about:")===0||Z.name.indexOf("javascript:")===0){continue}Y=this.compressResourceData(Z);V=Z.name;if(W[V]!==undefined){W[V]+="|"+Y}else{W[V]=Y}}return this.optimizeTrie(this.convertToTrie(W),true)};return U}();A=function(V,W,Y,X){function U(aa){if(!aa.isInitial){return{}}return Y().then(function Z(ab){return{resourceTimings:JSON.stringify(X.getResourceTiming(ab))}})}return U}(e,z,C,y);h=function(){function U(V){return{threshold:V.threshold}}return U}();g=function(U){function V(W){if(!W.isInitial){return{}}return U()}return V}(s);E=function(U){function V(){return{userAgent:U.navigator.userAgent}}return V}(e);o=function(ac,af,ad,Z,W,ae,ag,V,Y,ah,ab,X,aa){var U=[ac,af,ad,Z,W,ae,ag,V,Y,ah,ab,X,aa];return{get:function(){return U.concat()},add:function(ai){U.push(ai)}}}(f,m,F,v,n,O,i,D,N,A,h,g,E);d=function(){var U=Object.prototype.hasOwnProperty;function V(){var Z={};var Y,aa;for(var W=0,X=arguments.length;W<X;W++){Y=arguments[W];for(aa in Y){if(U.call(Y,aa)){Z[aa]=Y[aa]}}}return Z}return V}();w=function(V){var U=V.document.readyState!=="loading";if(!U){V.document.addEventListener("DOMContentLoaded",function(){V.setTimeout(function(){U=true},0)})}function W(){return U}return W}(e);c=function(V,Z,ae,ac,U,ad,X){var ab={};function aa(ag,af){if(!Array.isArray(ag)){ag=[ag]}return ag.map(function(ah){if(typeof ah==="string"){ah={selector:ah}}return ad(af,ah)})}function Y(ag){var af;af=ag.map(function(ai){var ah;if(ai.requireUpdate){ah=new Z(ai.selector);ae.one("start",function(){ah.dismiss()})}else{ah=ac.resolve()}return ah.then(function(){var aj=new V(ai.selector);ae.one("start",function(){aj.dismiss()});return aj})});return ac.all(af)}ab.start=function(ag){var ai;var ah="isInitial" in ag?ag.isInitial:X()===false;var af="threshold" in ag?ag.threshold:1000;ae.trigger("start",{key:ag.key,isInitial:ah,threshold:af});if(ag.ready){ai=aa(ag.ready,{requireUpdate:!ah});Y(ai).then(function(){ab.end({key:ag.key})})}};ab.end=function(af){ae.trigger("end",{key:af.key})};ab.addReporter=function W(af){U.add(af)};return ab}(u,q,J,z,o,d,w);T=function(U){return U.AJS||(U.AJS={})}(e);K=function(U){U.EventQueue=U.EventQueue||[];function V(W,X){U.EventQueue.push({name:W,properties:X})}return V}(T);a=function(V){function U(W){(V.console.error||V.console.log).call(V.console,W.stack||W)}return U}(e);G=function(ac,Y,Z,X,aa,U){function V(ad){return Y.all([ad]).then(function(ae){return ae[0]})}function ab(ad){return V(ad).then(null,function(){return{}})}function W(af){var ag=U.get().map(function ae(ai){var ah;try{ah=ai(af)}catch(aj){aa(aj);ah={}}return ab(ah)});return Y.all(ag).then(function ad(ah){return Z.apply(undefined,ah)})}return W}(L,z,d,e,a,o);b=function(V){var U;if(V.performance&&V.performance.now){U=function(){return V.performance.timing.navigationStart+V.performance.now()}}else{U=V.Date.now.bind(V.Date)}return U}(e);P=function(Y,V,W){function U(Z){if(!(this instanceof U)){return new U(Z)}this.isInitial="isInitial" in Z?Z.isInitial:false;this.start=W();this.end=null;this.key=Z.key;this.threshold=Z.threshold}function X(Z){var aa;Z.on("start",function(ab){aa=new U(ab)});Z.on("end",function(ab){if(aa&&aa.key===ab.key){aa.end=W();V(aa).then(function(ac){Y("browser.metrics.navigation",ac)});aa=null}})}return X}(K,G,b);Q=function(U){return U.WRM||(U.WRM={})}(e);t=function(U){var Z="com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.feature-data-provider",V;function Y(aa){return !!(aa&&aa.constructor&&aa.call&&aa.apply)}function X(aa,ab){if(U&&U.data&&U.data.claim&&Y(U.data.claim)){return U.data.claim(aa)}else{if(U&&U.data&&Y(U.data)){return U.data(aa)}else{return ab}}}function W(){if(V===undefined){V=X(Z,true)}return V}return W}(Q);S=function(X,W,U,V){if(!V()){return{start:function(){},end:function(){}}}W(U);return X}(c,P,J,t);window["browser-metrics"]=S;if(window.define){window.define("internal/browser-metrics",[],function(){return S})}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'main.js' */
define("internal/browser-metrics-plugin/lib/window",["require","exports"],function(b,a){return window});define("internal/browser-metrics-plugin/lib/jquery",["require","exports","./window"],function(b,a,c){var d;try{d=c.require("jquery")}catch(f){d=c.jQuery}return d});define("internal/browser-metrics-plugin/reporters/experiments",["require","exports","../lib/jquery","../lib/window"],function(a,d,f,i){var h=i.AJS.contextPath()+"/experimental/main.js";function c(){return Array.prototype.slice.call(i.document.getElementsByTagName("script"))}function j(){return(i.GROW&&i.GROW.experimentId)||[]}function e(){var m=f.Deferred();f(function n(){var o=c().some(function p(q){return q.getAttribute("src")===h});m.resolve(o)});return m.promise()}var g=e().pipe(function l(n){var m={};if(n){m.experiments=JSON.stringify(j())}return m});var b=function k(){return g};return b});define("internal/browser-metrics-plugin/lib/wrm",["require","exports","./window"],function(b,a,d){var c=d.WRM;return c});define("internal/browser-metrics-plugin/reporters/rack",["require","exports","../lib/wrm"],function(f,e,d){var g=false;var h;function c(){if(g===false){h=d.data.claim("com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.rack-data-provider");g=true}return typeof h==="undefined"?"":h}var b=function a(){return{rack:c()}};return b});define("internal/browser-metrics-plugin/main",["require","exports","./reporters/experiments","./reporters/rack","internal/browser-metrics"],function(d,b,c,a,e){e.addReporter(c);e.addReporter(a)});require(["internal/browser-metrics-plugin/main"]);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.bamboo-plugin-browser-metrics:bamboo-browser-metrics-js', location = '/javascript/bamboo-browser-metrics.js' */
define("internal/bamboo-browser-metrics",["internal/browser-metrics","jquery"],function(b,c){var a=function(){var d="bamboo."+this.apdexKey();var e=this.apdexReady();if(d!=="default"&&e!=="default"){b.start({key:d,isInitial:true,ready:e})}};a.prototype.apdexKey=function(){return c('meta[name="apdex-key"]').attr("content")||"default"};a.prototype.apdexReady=function(){return c('meta[name="apdex-ready"]').attr("content")||"default"};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.bamboo-artifact-downloader-plugin:artifactdownloaderjs', location = 'js/artifact.js' */
(function(b,a){a.ArtifactDownloaderConfiguration=(function(){var f={planSelector:null,planKey:null,addArtifactSelector:null,removeArtifactSelector:null,artifactListSelector:null,templates:{artifactListItem:null},i18n:{allArtifacts:null,individualArtifacts:null}};var m;var i;var g=function(){var o=+i.data("nextTransferId")+1;i.data("nextTransferId",o);b(AJS.template.load(m.templates.artifactListItem).fill({index:o}).toString()).appendTo(i).find(m.selectedArtifactSelector).end().slideDown();l(o).done(function(){a.DynamicFieldParameters.syncFieldShowHide(i)});if(o===0){var n=b('[data-artifact-id="0"]',i);b(m.removeArtifactSelector,n).remove()}};var e=function(n,o){if(o instanceof Backbone.Model){var p=o.get("key");if(m.planKey===p){return}m.planKey=p;c();g();if(m.planKey!==""){b(m.addArtifactSelector).show()}}};var l=function(o){var p;b(m.artifactListSelector).find("li").each(function(){var q=b(this).attr("data-artifact-id");if(+q===o){p=b(this);return false}});p.find("input").val("");var n=p.find("select");n.find("optgroup").remove();return h().then(function(q){d(n,q)})};var h=function(){var n=b.Deferred();j().then(function(p){var s=p.artifacts.size;var o=p.artifacts["max-result"];if(s>o){var q=[];for(var r=1;r<Math.ceil(s/o);r++){q.push(j(r*o,o))}b.when.apply(b,q).done(function(){var t=p.artifacts.artifact;(q.length===1?[arguments]:_.toArray(arguments)).forEach(function(u){t=t.concat(u[0].artifacts.artifact)});n.resolve(t)})}else{n.resolve(p.artifacts.artifact)}}).fail(function(p,q,o){console.log("couldn't retrieve artifacts: "+q)});return n};var j=function(o,n){return b.ajax({url:AJS.contextPath()+"/rest/api/latest/plan/"+m.planKey+"/artifact",dataType:"json",data:_.extend({"start-index":o||0},n?{"max-results":n}:{})})};var d=function(n,q){var p=b("<optgroup/>").attr("label",m.i18n.individualArtifacts);for(var r=0,t=q.length;r<t;r++){var o=q[r];var s=b("<option/>").attr("value",o.id).text(o.name);p.append(s)}n.append(p)};var k=function(n){n.preventDefault();b(this).closest("li").slideUp(function(){b(this).remove()})};var c=function(){b(m.artifactListSelector).find("li").remove()};return{init:function(n){m=b.extend(true,f,n);b(function(){m.planKey=b(m.planSelector).val();i=b(m.artifactListSelector).on("click",m.removeArtifactSelector,k);require("util/events").EventBus.on("plan:selected",e);b(m.addArtifactSelector).click(g);if(m.planKey===""){b(m.addArtifactSelector).hide()}})}}}())}(jQuery,window.BAMBOO=(window.BAMBOO||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.troubleshooting.plugin-bamboo:atst-healthchecks-notification', location = 'js/ajs-amd.js' */
define('troubleshooting/ajs', [], function () {
    'use strict';

    return AJS;
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.troubleshooting.plugin-bamboo:atst-healthchecks-notification', location = 'js/notification.js' */
/* global AJS */
require([
    "jquery",
    "aui/flag",
    "troubleshooting/ajs",
    "troubleshooting/location"
], function ($, flag, AJS, location) {
    'use strict';

    if (location.isOnSupportToolsPage()) {
        // Exit if we are on the ATST screen, we don't want to display healthcheck notification if user browsing on ATST
        return;
    }
    
    var pluginPageUrl =  AJS.contextPath() + '/plugins/servlet/troubleshooting/view';

    AJS.toInit(function () {
        var restBase = AJS.contextPath() + '/rest/troubleshooting/1.0';
        var user = $('meta[name=ajs-remote-user]').attr('content');

        // Initialise the healthcheck notification. Make a GET call to /check/{username} endpoint to get the list of failed check by user
        var initHealthcheckNotification = function () {
            $.getJSON(restBase + '/check/' + user).done(function (statusReport) {
                statusReport.statuses.forEach(function (status) {
                    showNotification(status);
                });

                // Listen to click event to dismiss or snooze notification
                $(document).find('.dismiss-notification').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    dismissNotification($notification);
                });

                $(document).find('.healthcheck-detail').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    var application = $notification.attr('application');
                    var severity = $notification.attr('severity');
                    var completeKey = $notification.attr('completeKey');

                    analyticsModule.run("Viewed", completeKey, application, severity);
                    snoozeNotification($notification);
                });
            });
        };

        // Renders the flat notification here, and set the necessary attribute to the flag
        var showNotification = function (status) {

            var healthCheckName = status.name;
            var severity = status.severity;
            var notificationId = status.id;
            var application = status.application;
            var completeKey = status.completeKey;
            var key = completeKey.split(':').pop();

            var flagType = severity === 'warning' ? 'warning' : 'error';
            var healthCheckUrl = pluginPageUrl + '?source=notification&healthCheck=' + key;

            var healthcheckNotification = flag({
                type: flagType,
                body: '<p>' + AJS.format("The {0} health check has failed in your system.", '<strong>' + healthCheckName + '</strong>') + '</p>' +
                    '<ul class="aui-nav-actions-list">' +
                        '<li><a href="' + healthCheckUrl + '" class="healthcheck-detail" target="_self">' + "Find out more" + '</a></li>' +
                        '<li><a href="#" class="dismiss-notification">' + "Don\u0027t remind me again" + '</a></li>' +
                    '</ul>',
                close: 'manual'
            });

            healthcheckNotification.setAttribute('id', 'healthcheck-notification');
            healthcheckNotification.setAttribute('healthcheck-name', healthCheckName);
            healthcheckNotification.setAttribute('notification-id', notificationId);
            healthcheckNotification.setAttribute('application', application);
            healthcheckNotification.setAttribute('severity', severity);
            healthcheckNotification.setAttribute('completeKey', completeKey);

            healthcheckNotification.addEventListener('aui-flag-close', function () {
                var $notification = $(this);
                snoozeNotification($notification);
            });


            analyticsModule.run('Display', completeKey, application, severity);
        };

        // Called when the "Dont remind me again" link is clicked. Notifications that are dismissed / marked as read won't reappear to the user anymore
        var dismissNotification = function ($notification) {
            $notification.attr("aria-hidden", "true");

            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = false;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function () {

                    analyticsModule.run("Dismissed", completeKey, application, severity);
                }
            })
        };

        // Called when the notification is closed via the cross button or if user open the link to the healthcheck
        // A notification is dismissed / marked as read automatically if it snoozes 3 times
        var snoozeNotification = function ($notification) {
            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = true;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function (data, textStatus, jqXHR) {

                    isAutoDismissed(id, completeKey, name, application, severity);
                    analyticsModule.run("Snoozed", completeKey, application, severity);

                }
            })
        };

        var isAutoDismissed = function (notificationId, completeKey, name, application, severity) {
            var url = restBase + '/dismissNotification/' + user + '/' + notificationId;

            AJS.$.ajax({
                async: false,
                type: 'GET',
                url: url,
                contentType: "text/xml",
                success: function (data, textStatus, jqXHR) {
                    if (jqXHR.status == 200) {
                        notificationAutoDismissed(name);
                        analyticsModule.run("Autodismissed", completeKey, application, severity);
                    }


                }
            });
        };

        // This module allows for us to capture the correct Analytics events per display as per SHC-344.
        var analyticsModule = (function () {
            var lastEvent;
            var event = {};

            event.run = function (action, completeKey, application, severity) {
                if (lastEvent == "Viewed") {
                    // when user views info, we snooze the notification. We only want to record the Viewed AA event.
                    lastEvent = action;
                } else {
                    lastEvent = action;
                    if (action == "Display") {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.display",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    } else {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.action",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    }
                }
            };
            return event;
        }());

        // This function is called when a notification is automatically marked as read (normally is called when a notification is snoozed 3 times)
        var notificationAutoDismissed = function (healthCheckName) {
            // We set a quick timeout here so the animation will be displayed properly
            setTimeout(function () {
                flag({
                    type: "info",
                    body: "<p>The <strong>" + healthCheckName + "</strong> notification is now dismissed. </p>" +
                    "<p>Please visit <a href='" + AJS.contextPath() + "/plugins/servlet/troubleshooting/view/?source=notification' class='healthcheck-detail' target='_self'>this link</a> for more on the check.</p>",
                    close: "auto"
                });
            }, 1500);
        };

        initHealthcheckNotification();
    });
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.troubleshooting.plugin-bamboo:atst-healthchecks-notification', location = 'js/shc-location.js' */
define('troubleshooting/location', [], function () {
    return {
        // Get the path name of the current page URL, and returns true if user is on ATST page or false if user is on other admin screens
        isOnSupportToolsPage: function () {
            return window.location.pathname.toLowerCase().indexOf("/troubleshooting/view") >= 0;
        }
    }
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.brokenbuildtracker:trackingjs', location = 'js/tracking.js' */
BAMBOO.BrokenBuildTracking=(function(c){var b={};var a;var d={containerSelector:null,buildKey:null,buildNumber:null,refreshUrl:null};var e={add:function(){c(a.containerSelector).addClass("loading")},remove:function(){c(a.containerSelector).removeClass("loading")}};b.init=function(f){a=c.extend(true,d,f);c(document).delegate(".take-responsibility, .remove-responsibility","click",function(g){g.preventDefault();e.add();c.post(this.href,{"bamboo.successReturnMode":"json"}).always(b.refresh)})};b.refresh=function(){e.add();c.get(a.refreshUrl,{buildKey:a.buildKey,buildNumber:a.buildNumber}).done(function(f){var g=c(f).filter(a.containerSelector);c(a.containerSelector).replaceWith(g)}).always(e.remove)};return b})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete-static', location = '/widget/autocomplete/autocomplete-static.js' */
define('widget/autocomplete-static', [
    'jquery',
    'underscore',
    'widget/autocomplete'
], function(
    $,
    _,
    Autocomplete
) {

    'use strict';

    var AutocompleteStatic = Autocomplete.extend({

        initialize: function(options) {
            var settings = $.extend({
                data: [],
                query: function(query) {
                    var pageSize = options.pageSize || 10;
                    var results = _.filter(this.data, function(e) {
                        return (query.text === '' ||
                            e.text.toUpperCase().indexOf(
                                query.term.toUpperCase()
                            ) >= 0
                        );
                    });

                    query.callback({
                        results: results.slice(Math.max(query.page - 1, 0) * pageSize, query.page * pageSize),
                        more: results.length >= query.page * pageSize
                    });

                    results = null;
                    pageSize = null;
                }
            }, options || {});

            if (_.isFunction(this.onFormatSelection)) {
                settings.formatSelection = _.bind(this.onFormatSelection, this);
            }

            if (_.isFunction(this.onFormatResult)) {
                settings.formatResult = _.bind(this.onFormatResult, this);
            }

            Autocomplete.prototype.initialize.apply(
                this, [settings]
            );
        }

    });

    return AutocompleteStatic;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-form.soy' */
// This file was automatically generated from repository-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.repository.form.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.repository == 'undefined') { bamboo.plugins.stash.repository = {}; }
if (typeof bamboo.plugins.stash.repository.form == 'undefined') { bamboo.plugins.stash.repository.form = {}; }


bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("A new public key for the selected repository will be stored as a repository access key.");
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription.soyTemplateName = 'bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription';
}


bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription = function(opt_data, opt_ignored) {
  return aui.icons.icon({useIconFont: true, size: 'small', icon: 'warning'}) + '<span>' + soy.$$escapeHtml("A new public key for the selected repository will be stored in your Bitbucket Server user profile because you don\x27t have administrative permissions.") + '</span>';
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription.soyTemplateName = 'bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/branch-autocomplete.soy' */
// This file was automatically generated from branch-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.branch.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.branch == 'undefined') { bamboo.plugins.stash.branch = {}; }
if (typeof bamboo.plugins.stash.branch.autocomplete == 'undefined') { bamboo.plugins.stash.branch.autocomplete = {}; }


bamboo.plugins.stash.branch.autocomplete.row = function(opt_data, opt_ignored) {
  return aui.icons.icon({icon: 'devtools-branch', useIconFont: true}) + ' ' + soy.$$escapeHtml(opt_data.item.displayId);
};
if (goog.DEBUG) {
  bamboo.plugins.stash.branch.autocomplete.row.soyTemplateName = 'bamboo.plugins.stash.branch.autocomplete.row';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/server-autocomplete.soy' */
// This file was automatically generated from server-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.server.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.server == 'undefined') { bamboo.plugins.stash.server = {}; }
if (typeof bamboo.plugins.stash.server.autocomplete == 'undefined') { bamboo.plugins.stash.server.autocomplete = {}; }


bamboo.plugins.stash.server.autocomplete.row = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.plugins.stash.server.autocomplete.row.soyTemplateName = 'bamboo.plugins.stash.server.autocomplete.row';
}


bamboo.plugins.stash.server.autocomplete.serverEmpty = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="stash-server-empty">' + aui.message.info({titleContent: "Bitbucket Server application link required", content: '' + ((opt_data.appLinkRemoved) ? '<p>' + ((opt_data.hasGlobalAdminPermission) ? soy.$$escapeHtml("Your application link to this Bitbucket Server instance has been removed. You will need to link it again to be able to use the available repositories and branches.") : soy.$$escapeHtml("Your application link to this Bitbucket Server instance has been removed. Please contact your Bamboo administrator to link it again to use the available repositories and branches.")) + '</p>' : '<p>' + ((opt_data.hasGlobalAdminPermission) ? soy.$$escapeHtml("On first use, Bamboo needs to establish an application link to a Bitbucket Server instance. It will then be able to display all available repositories and branches. This has to be done only once per Bitbucket Server instance.") : soy.$$escapeHtml("On first use, Bamboo needs to establish an application link to a Bitbucket Server instance. It will then be able to display all available repositories and branches. Please contact your Bamboo administrator to establish a link to Bitbucket Server.")) + '</p>') + ((opt_data.hasGlobalAdminPermission) ? '<button class="aui-button" type="button" id="start-create-applink" onclick="window.open(\'' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks\')" >' + soy.$$escapeHtml("Link Bamboo to Bitbucket Server") + '</button>' : '')}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.stash.server.autocomplete.serverEmpty.soyTemplateName = 'bamboo.plugins.stash.server.autocomplete.serverEmpty';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-autocomplete.soy' */
// This file was automatically generated from repository-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.repository.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.repository == 'undefined') { bamboo.plugins.stash.repository = {}; }
if (typeof bamboo.plugins.stash.repository.autocomplete == 'undefined') { bamboo.plugins.stash.repository.autocomplete = {}; }


bamboo.plugins.stash.repository.autocomplete.row = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.item.project.name) + ' / ' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.autocomplete.row.soyTemplateName = 'bamboo.plugins.stash.repository.autocomplete.row';
}


bamboo.plugins.stash.repository.autocomplete.oauthError = function(opt_data, opt_ignored) {
  return '' + aui.message.info({titleContent: '' + soy.$$escapeHtml(AJS.format("{0} - approval required",opt_data.instanceName)), content: '<p><p>' + soy.$$escapeHtml("Bamboo requires your approval before it can display repositories and branches, and automatically set up authentication.") + '</p><br/><a class="oauth-approve" href="' + soy.$$escapeHtml(opt_data.redirectUrl) + '" target="_blank">' + soy.$$escapeHtml("Login \x26 approve") + '</a></p>'});
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.autocomplete.oauthError.soyTemplateName = 'bamboo.plugins.stash.repository.autocomplete.oauthError';
}


bamboo.plugins.stash.repository.autocomplete.unauthorizedError = function(opt_data, opt_ignored) {
  var param20 = '<p>';
  switch (opt_data.requestStatus) {
    case 401:
      param20 += soy.$$escapeHtml("You don\x27t have permission to see this repository. Bamboo can still access this repository at build time, but simply can\x27t show you any details. Bamboo will continue to work without problems.");
      break;
    case 404:
      param20 += soy.$$escapeHtml("Your repository was renamed or deleted. This will make it impossible for Bamboo to work with this repository. Please adjust your configuration as soon as possible.");
      break;
  }
  param20 += '</p>';
  var output = '' + aui.message.error({titleContent: "Repository could not be found", content: param20});
  return output;
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.autocomplete.unauthorizedError.soyTemplateName = 'bamboo.plugins.stash.repository.autocomplete.unauthorizedError';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/mirror-autocomplete.js' */
define("plugin-stash/mirror-autocomplete",["jquery","underscore","widget/autocomplete","util/events","util/elements"],function(e,a,c,b,d){var f=c.extend({mixins:[b.EventBusMixin,d],initialize:function(g){this.queryParams={};g=g||{};this.params=g.params||{};this.mirrors=[];this.onEvent("stash:server:change",this.onServerChange);this.onEvent("stash:repository:change",this.onRepositoryChange);this.$outerDiv=g.params.outerDiv;this.mirrosSelectInput=this.$outerDiv.find(".repository-stash-mirror-available");this.primaryObject=(function(){var j=g.params.primary;return function(){return{id:"",name:j}}})();if(g.params){delete g.params}var i=function(){return this.queryParams}.bind(this);var h={formatSelection:a.bind(this.onFormatSelection,this),formatResult:a.bind(this.onFormatResult,this),query:function(j){return j.callback({results:this.mirrors})}.bind(this),minimumResultsForSearch:-1};c.prototype.initialize.apply(this,[e.extend(h,g||{})])},onRegisterEvents:function(){this.$el.on("change",this.onMirrorChange.bind(this))},onMirrorChange:function(g){this.params.elName.val(g.added.name);this.params.elUrl.val(g.added.url);this.hideErrorMessage()},onFormatResult:function(g){return g.name},onFormatSelection:function(g){return g.name},onServerChange:function(g,h){this.queryParams.serverKey=h&&h.id?h.id:""},showInput:function(){this.mirrosSelectInput.show();this.toggleContainer(this.$outerDiv,true)},showErrorMessage:function(){this.errorMessageBox=AJS.messages.error("#mirror-configuration-error",{body:"Bamboo doesn\u0027t support Smart Mirroring with the version of Bitbucket Server you\u0027re using. Upgrade your Bitbucket Server to version 5.0 or later with the Data Center license to be able to use Smart Mirroring in Bamboo. Alternatively, switch back to \u0022Primary\u0022 mirror to save the configuration. "})},hideErrorMessage:function(){if(this.errorMessageBox){this.errorMessageBox.hide()}},handleMirrorUnsupported:function(){var g=e.extend(this.primaryObject(),{url:""});this.onMirrorChange({added:g});if(this.$el.val()){this.showInput();this.showErrorMessage()}else{this.mirrosSelectInput.hide()}},fetchData:function(){this.addLoadingIcon();var g=this.removeLoadingIcon.bind(this);var i=this.handleMirrorUnsupported.bind(this);var h=this.mirrors;var j=this.params;e.ajax(AJS.contextPath()+"/rest/stash/latest/projects/repository/mirrors",{data:this.queryParams,dataType:"json"}).fail(function(k){g();var l=k.responseJSON;if(l.errorCode==="mirrors.not.supported"){i()}}).done(function(k){k.values.filter(function(l){return l&&l.enabled}).forEach(function(l){h.push({id:l.id,name:l.name,url:l.sshUrl});if(l.name===j.initialName&&!j.initialId.length){j.initialId=l.id}});g()})},onRepositoryChange:function(g,h,i){if(h&&h.id){this.queryParams.projectKey=h.project.key;this.queryParams.repositorySlug=h.slug}else{this.queryParams.projectKey=null;this.queryParams.repositorySlug=null}if(this.queryParams.projectKey&&this.queryParams.repositorySlug&&this.queryParams.serverKey){this.mirrors=[this.primaryObject()];this.fetchData();this.showInput()}if(i!==true){this.$el.auiSelect2("data",this.primaryObject());this.params.elName.val("")}else{this.$el.auiSelect2("data",this.getInitialData())}},getInitialData:function(){var g=this.primaryObject();if(this.params.initialId){g.id=this.params.initialId;g.name=this.params.initialName}return g}});return f});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-form.js' */
define("plugin-stash/repository-form",["jquery","underscore","brace","util/events","util/elements"],function(f,a,c,b,e){var d=c.View.extend({mixins:[b.EventBusMixin,e],elements:{serverKey:'input[name="repository.stash.server"]',projectKey:'input[name="repository.stash.projectKey"]',repositoryUrl:'input[name="repository.stash.repositoryUrl"]',repositorySlug:'input[name="repository.stash.repositorySlug"]',isAdmin:'input[name="repository.stash.temporary.isAdmin"]',repositoryMessages:"#repository-stash-messages"},initialData:{serverKey:"",projectKey:"",repositoryUrl:"",repositorySlug:"",isAdmin:""},initialize:function(g){this.params=g.params||{};if(g.elements){this.elements=g.elements}if(g.params.initialData){this.initialData=g.params.initialData}this.$repositoryDisplayName=f("#repository-display-name");this.$repositoryAccessPoint=f("#repository-access-option");this.onEvent("unbind",this.onUnbind);this.onEvent("repository:selector:change",a.bind(function(h,j,i){this.updateWebRepository(i);if(i===this.params.namespace&&j==="NEW"){this.triggerEvent("stash:server:init")}},this));this.onEvent("repository:server:reset",this.onServerReset);this.onEvent("stash:repository:update",this.onRepositoryUpdate);this.onEvent("stash:repository:init",a.bind(function(h,i){this.onRepositoryUpdate(h,i,true)},this));this.onEvent("stash:server:update",this.onServerUpdate);this.onEvent("stash:server:error:empty",this.onServerEmpty);this.onEvent("stash:server:error:permissions",this.onServerPermissions);this.onEvent("stash:errors:show",this.onShowFieldErrors);this.onEvent("stash:errors:clear",this.onClearFieldErrors);this.triggerEvent("stash:form:config",this.getConfig());if(f("#selectedRepository").val()===this.params.namespace||f("#repositoryPluginKey").val()===this.params.namespace){this.updateWebRepository(this.params.namespace);this.triggerEvent("stash:server:init")}},onUnbind:function(){this.undelegateEvents();this.clearElementsCache();this.$el.removeData().unbind();this.offEventNamespace("repository");this.offEventNamespace("stash")},onServerUpdate:function(g,h){if(h&&h.id&&h.id!==this.getElement("serverKey").val()){this.getElement("serverKey").val(h.id);this.getElement("projectKey").val("");this.getElement("repositoryUrl").val("");this.getElement("repositorySlug").val("");this.getElement("isAdmin").val("")}this.triggerEvent("stash:form:config",this.getConfig());this.triggerEvent("stash:server:change",h)},onServerReset:function(){if(this.initialData&&this.initialData.serverKey){var h=this.getElement("serverKey").val();var i=this.getElement("projectKey").val();var g=this.getElement("repositorySlug").val();this.getElement("serverKey").val(this.initialData.serverKey);this.getElement("projectKey").val(this.initialData.projectKey);this.getElement("repositoryUrl").val(this.initialData.repositoryUrl);this.getElement("repositorySlug").val(this.initialData.repositorySlug);this.getElement("isAdmin").val(this.initialData.isAdmin);this.triggerEvent("stash:form:config",this.getConfig());if(h!==this.initialData.serverKey||i!==this.initialData.projectKey||g!==this.initialData.repositorySlug){this.triggerEvent("stash:server:change",{id:this.initialData.serverKey,project:{key:this.initialData.projectKey},sshCloneUrl:this.initialData.repositoryUrl,slug:this.initialData.repositorySlug,permission:this.initialData.isAdmin?"ADMIN":""})}}},onRepositoryUpdate:function(g,i,j){if(i&&i.id){this.getElement("projectKey").val(i.id?i.project.key:"");this.getElement("repositoryUrl").val(i.id?i.sshCloneUrl:"");this.getElement("repositorySlug").val(i.id?i.slug:"");this.getElement("isAdmin").val(i.id?i.permission==="ADMIN":"");var h=i.permission==="ADMIN"?bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription():bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription();this.triggerEvent("stash:repository:description:set",h)}this.triggerEvent("stash:form:config",this.getConfig());this.triggerEvent("stash:repository:change",i,!!j)},onServerEmpty:function(g,h){if(a.isUndefined(h)){h=true}this.toggleContainer(this.$repositoryDisplayName,!h)},onServerPermissions:function(g,h){if(a.isUndefined(h)){h=true}if(this.$repositoryAccessPoint.length){this.toggleContainer(this.$repositoryAccessPoint,!h)}},onClearFieldErrors:function(){this.$el.find(".error").remove()},onShowFieldErrors:function(g,h,i){if(a.isString(h)){h=this.getElement(h)}h.parent().find(".error").remove();BAMBOO.addFieldErrors(h.closest("form"),h.attr("name"),i,true)},updateWebRepository:function(g){var h=this.$el.parents("form:first");if(h.length){var i=h.find('input[name="repositoryType"]');if(i.length&&g!==this.params.namespace){i.val("")}else{if(+h.find('input[name="repositoryId"]').val()===0||i.val()!==g){h.find("#selectedWebRepositoryViewer").val(this.params.viewer).change()}}}},getConfig:function(){return{serverKey:this.getElement("serverKey").val(),projectKey:this.getElement("projectKey").val(),repositorySlug:this.getElement("repositorySlug").val(),repositoryUrl:this.getElement("repositoryUrl").val()}}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/branch-autocomplete.js' */
define("plugin-stash/branch-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events","util/elements"],function(f,b,a,d,e){var c=a.extend({mixins:[d.EventBusMixin,e],initialize:function(g){this.params=f.extend({url:AJS.contextPath()+"/rest/stash/latest/projects/repositories/branches",urlSingle:AJS.contextPath()+"/rest/stash/latest/projects/repositories/branch",urlDefault:AJS.contextPath()+"/rest/stash/latest/projects/repositories/branches/default"},g.params||{});this.query=f.extend({limit:10},g.query||{});var i=b.bind(function(k,m,j){var l=f.extend({start:Math.max((m-1),0),query:k},this.query);if(!j&&(m-1)>0&&this.data.nextPage){l.start=this.data.nextPage}return l},this);var h={minimumInputLength:0,ajax:{url:this.params.url,dataType:"json",data:i,params:{error:f.noop},results:b.bind(function(k,j){return this.processData({results:k.values,nextPage:k.nextPageStart||0,more:!k.lastPage})},this)},id:function(j){return j.displayId}};this.onEvent("unbind",this.onUnbind);this.onEvent("stash:repository:change",this.onRepositoryChange);this.onEvent("stash:server:error:empty",this.onServerEmpty);this.onEvent("stash:server:change",this.onServerChange);this.onEvent("stash:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");a.prototype.initialize.apply(this,[f.extend(h,this.params)]);this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("stash");f(window).off("applinks.auth.completion")},onFormConfig:function(g,h){this.config=h},onServerEmpty:function(g,h){if(b.isUndefined(h)){h=true}else{if(h){this.clearValue().$el.val("")}}this.toggleContainer(this.$fieldGroup,!h)},onServerChange:function(g,h){if(h.id){this.query.serverKey=h.id}this.clearQueryCache().clearValue().disable().toggleContainer(this.$fieldGroup.parent(),false)},onRepositoryChange:function(g,h,k){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.$fieldGroup.find(".aui-message").remove();this.clearQueryCache().disable();if(h&&h.id){this.query.projectKey=h.project.key;this.query.repositorySlug=h.slug}this.query=b.omit(b.defaults(this.query,this.config),"branch");if(k!==true){this.$el.val("")}if(this.query.projectKey&&this.query.repositorySlug&&this.query.serverKey){var i=this.$el.val();var j=b.bind(function(l){this.triggerEvent("stash:branch:change",l);this.$el.auiSelect2("data",l);this.removeLoadingIcon().enable()},this);this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(b.bind(function(){this.addLoadingIcon()},this));if(!i.length){this.getRemoteData(this.params.urlDefault,{dataType:this.settings.ajax.dataType,data:this.settings.ajax.data("",1,false)}).done(j)}else{this.config.branch=i;this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:this.config}).done(j)}}},onRegisterEvents:function(){this.$el.on("change",b.bind(function(g){if(g.val.length>0){this.triggerEvent("stash:errors:clear");this.triggerEvent("stash:branch:change",g.added)}},this))},onFormatResult:function(g){if(!b.isEmpty(g)){return bamboo.plugins.stash.branch.autocomplete.row({item:g})}},onFormatSelection:function(g){if(!b.isEmpty(g)){return bamboo.plugins.stash.branch.autocomplete.row({item:g})}},onRemoteError:function(h){var i=[];this.$fieldGroup.show();this.$el.auiSelect2("close");this.removeLoadingIcon().clearValue().enable().$el.val("");if(h.responseText){var g=JSON.parse(h.responseText);if(g.authenticationInstanceName){this.$fieldGroup.find(".field-value").hide();this.$fieldGroup.append(bamboo.plugins.stash.repository.autocomplete.oauthError({instanceName:g.authenticationInstanceName,redirectUrl:g.authenticationRedirectUrl}));f(window).on("applinks.auth.completion",b.bind(function(j,l,k){if(k){f(window).off("applinks.auth.completion");this.triggerEvent("stash:repository:change")}},this));return}if(g.errors){i=g.errors}}if(!i.length){i.push("Failed to load data from Bitbucket Server.")}this.triggerEvent("stash:errors:show",this.$el,i)},getRemoteData:function(g,h){this.$el.removeClass("ajax-completed");return f.ajax(g,b.defaults({type:"GET",dataType:"json"},h)).fail(b.bind(this.onRemoteError,this)).complete(b.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime())},this))}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-view.soy' */
// This file was automatically generated from repository-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.repository.view.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.repository == 'undefined') { bamboo.plugins.stash.repository = {}; }
if (typeof bamboo.plugins.stash.repository.view == 'undefined') { bamboo.plugins.stash.repository.view = {}; }


bamboo.plugins.stash.repository.view.error = function(opt_data, opt_ignored) {
  return '<div class="error control-form-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.view.error.soyTemplateName = 'bamboo.plugins.stash.repository.view.error';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/server-autocomplete.js' */
define("plugin-stash/server-autocomplete",["jquery","underscore","widget/autocomplete-static","util/events"],function(e,c,b,d){var a=b.extend({mixins:[d.EventBusMixin],initialize:function(f){this.params=e.extend({serverPollingTimeout:3000,minimumResultsForSearch:-1,url:AJS.contextPath()+"/rest/stash/latest/servers/"},f.params||{});this.onEvent("unbind",this.onUnbind);this.onEvent("stash:server:init",this.onServerInit);this.onEvent("stash:server:loaded",this.onServerLoaded);this.$fieldGroup=this.$el.parents(".field-group:first");this.serverPolling=null;b.prototype.initialize.apply(this,[this.params]);this.initConfig()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("stash");if(this.serverPolling){this.serverPolling=null}},onServerInit:function(){this.initConfig({placeholder:this.settings.loadingPlaceholder}).clearValue().disable();this.getRemoteData(this.params.url).done(c.bind(function(f){this.triggerEvent("stash:server:loaded",(f&&f.servers)?f.servers:[])},this))},onServerLoaded:function(f,h){if(h&&h.length){if(this.serverPolling){this.serverPolling=null;this.triggerEvent("stash:server:error:empty",false);this.$fieldGroup.find(".field-value").show();this.$fieldGroup.find("#stash-server-empty").remove()}this.initConfig({data:h,placeholder:this.settings.placeholder});var g=this.$el.data("initial");var i=null;if(g&&g.length){i=c.find(h,function(j){return j.id===g})}if(!i&&g){if(!this.$fieldGroup.find("#stash-server-empty").length){this.triggerEvent("stash:server:error:empty",true);this.$fieldGroup.append(bamboo.plugins.stash.server.autocomplete.serverEmpty({hasGlobalAdminPermission:this.params.hasGlobalAdminPermission,appLinkRemoved:true}))}}else{if(!i&&h.length===1){i=h[h.length-1]}if(i){this.triggerEvent("stash:server:error:empty",false);this.triggerEvent("stash:server:update",i)}this.$el.removeData("initial").auiSelect2("data",i)}this.enable()}else{if(this.$fieldGroup.is(":visible")){if(!this.$fieldGroup.find("#stash-server-empty").length){this.$fieldGroup.find(".field-value").hide();this.$fieldGroup.append(bamboo.plugins.stash.server.autocomplete.serverEmpty({hasGlobalAdminPermission:this.params.hasGlobalAdminPermission,appLinkRemoved:!!this.$el.data("initial")})).append(this.$fieldGroup.find(".error.control-form-error"))}this.serverPolling=true;this.triggerEvent("stash:server:error:empty");this.triggerEvent("stash:server:error:permissions");setTimeout(c.bind(function(){this.triggerEvent("stash:server:init")},this),this.params.serverPollingTimeout)}}},onInitSelection:function(f,g){f.data("initial",f.val())},onRegisterEvents:function(){this.$el.on("change",c.bind(function(f){if(f.val.length>0){this.$fieldGroup.find(".field-value").show();this.$fieldGroup.find("#stash-server-empty").remove();this.triggerEvent("stash:server:update",f.added);this.triggerEvent("stash:server:error:empty",false);this.triggerEvent("stash:errors:clear")}},this))},onFormatResult:function(f){if(!c.isEmpty(f)){return bamboo.plugins.stash.server.autocomplete.row({item:f})}},onFormatSelection:function(f){if(!c.isEmpty(f)){return bamboo.plugins.stash.server.autocomplete.row({item:f})}},onRemoteError:function(g){var h=[];this.$el.auiSelect2("close");this.clearValue().$el.val("");if(g.responseText){var f=JSON.parse(g.responseText);if(f.errors){h=f.errors}}if(!h.length){h.push("Failed to load data from Bitbucket Server.")}this.triggerEvent("stash:errors:show",this.$el,h)},getRemoteData:function(f){this.$el.removeClass("ajax-completed");return e.ajax({url:f,type:"GET",dataType:"json"}).fail(c.bind(this.onRemoteError,this)).complete(c.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime())},this))}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-autocomplete.js' */
define("plugin-stash/repository-autocomplete",["jquery","underscore","widget/autocomplete-ajax","widget/help-dialog","util/events","util/elements","util/ajax"],function(h,c,b,e,d,g,f){var a=b.extend({mixins:[d.EventBusMixin,g],initialize:function(i){this.params=h.extend({url:AJS.contextPath()+"/rest/stash/latest/projects/repositories",urlSingle:AJS.contextPath()+"/rest/stash/latest/projects/repository"},i.params||{});this.query=h.extend({limit:10},i.query||{});var k=c.bind(function(m,o,l){var n=h.extend({start:Math.max((o-1),0),query:m},this.query);if(!l&&(o-1)>0&&this.data.nextPage){n.start=this.data.nextPage}return n},this);var j={minimumInputLength:0,ajax:{url:this.params.url,dataType:"json",data:k,params:{error:h.noop},results:c.bind(function(m,l){return this.processData({results:m.values,nextPage:m.nextPageStart||0,more:!m.lastPage})},this)}};this.onEvent("unbind",this.onUnbind);this.onEvent("stash:repository:description:set",this.onDescriptionSet);this.onEvent("stash:server:error:empty",this.onServerEmpty);this.onEvent("stash:server:change",this.onServerChange);this.onEvent("stash:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");b.prototype.initialize.apply(this,[h.extend(j,this.params)]);this.addDescriptionField();this.linkHelpDialog(this.params.helpDialogEl);this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("stash");h(window).off("applinks.auth.completion")},onFormConfig:function(i,j){this.config=j},onServerEmpty:function(i,j){if(c.isUndefined(j)){j=true}else{if(j){this.clearValue();this.$el.val("")}}this.toggleContainer(this.$fieldGroup,!j)},onServerChange:function(i,j){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.clearRepositoryErrorMessages();this.$fieldGroup.find(".aui-message").remove();this.clearQueryCache().disable();if(j.id){this.query.serverKey=j.id;this.triggerEvent("stash:server:error:permissions",false);this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(c.bind(function(){this.addLoadingIcon()},this));if(this.params.slugEl.val().length){this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:this.config}).then(c.bind(function(k){return this.appendPermissions(k,j.id)},this)).done(c.bind(function(k){this.triggerEvent("stash:repository:init",k);this.$el.auiSelect2("data",k)},this)).always(c.bind(function(){this.removeLoadingIcon().enable()},this))}else{this.config.serverKey=j.id;this.getRemoteData(this.params.url,{dataType:this.settings.ajax.dataType,data:this.config}).done(c.bind(function(k){if(k.values&&k.values.length){this.addQueryCache(this.settings.ajax.data("",1,true),{results:k.values||[],nextPage:k.nextPageStart||0,more:!k.lastPage});this.removeLoadingIcon().enable()}else{this.removeLoadingIcon().triggerEvent("stash:errors:show",this.$el,["Selected server has no repositories."])}},this))}}else{this.clearValue()}},onRegisterEvents:function(){this.$el.on("change",c.bind(this.onRepositoryChange,this))},onRepositoryChange:function(j){if(j.val.length>0){this.triggerEvent("stash:errors:clear");var i=j.added;if(i&&i.id){this.addLoadingIcon();this.clearRepositoryErrorMessages();this.appendPermissions(i,this.config.serverKey).done(c.bind(this.triggerEvent,this,"stash:repository:update")).always(c.bind(this.removeLoadingIcon,this))}else{this.triggerEvent("stash:repository:update",i)}}},onFormatResult:function(i){if(!c.isEmpty(i)){return bamboo.plugins.stash.repository.autocomplete.row({item:i})}},onFormatSelection:function(i){if(!c.isEmpty(i)){return bamboo.plugins.stash.repository.autocomplete.row({item:i})}},onRemoteError:function(k){var l=[];this.$fieldGroup.show();this.$el.auiSelect2("close");var i=this.$el.val();this.removeLoadingIcon().clearValue().enable().$el.val("");if(k.responseText){var j=JSON.parse(k.responseText);if(j.serverErrorMessage){this.$fieldGroup.hide();this.triggerEvent("stash:errors:show","serverKey",[j.serverErrorMessage]);return}if(j.authenticationInstanceName){this.triggerEvent("stash:server:error:permissions");this.$fieldGroup.find(".field-value").hide();this.$fieldGroup.append(bamboo.plugins.stash.repository.autocomplete.oauthError({instanceName:j.authenticationInstanceName,redirectUrl:j.authenticationRedirectUrl})).append(this.$fieldGroup.find(".error.control-form-error"));h(window).on("applinks.auth.completion",c.bind(function(m,o,n){if(n){h(window).off("applinks.auth.completion");this.$el.val(i);this.triggerEvent("stash:server:change",{id:this.config.serverKey})}},this));return}if(j.remoteRequestStatus&&c.contains([401,404],j.remoteRequestStatus)){this.$fieldGroup.parent().append(bamboo.plugins.stash.repository.autocomplete.unauthorizedError({requestStatus:j.remoteRequestStatus}));return}if(j.errors){l=j.errors}}if(!l.length){l.push("Failed to load data from Bitbucket Server.")}this.triggerEvent("stash:errors:show",this.$el,l)},getRemoteData:function(i,j){this.$el.removeClass("ajax-completed");return h.ajax(i,c.defaults({type:"GET",dataType:"json"},j)).fail(c.bind(this.onRemoteError,this)).complete(c.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime());this.$el.addClass("ajax-completed")},this))},clearRepositoryErrorMessages:function(){this.$fieldGroup.find(".aui-message").remove()},linkHelpDialog:function(j){var i=h(document.createElement("span")).attr("id",this.$el.attr("id")+"-help-dialog-trigger").addClass("aui-icon aui-icon-small aui-iconfont-help");this.$el.siblings(".select2-container:first").append(i);new e({el:i,content:j});return this},addDescriptionField:function(){var i=h(document.createElement("div")).addClass("description");this.$el.parent(".field-value").after(i);return this},onDescriptionSet:function(i,j){this.$el.parent(".field-value").siblings(".description").html(j)},appendPermissions:function(j,i){return f({url:AJS.contextPath()+"/rest/stash/latest/projects/repositories/permission",type:"GET",data:{serverKey:i,projectKey:j.project.key,repositorySlug:j.slug}}).then(function(k){return c.extend(j,{permission:k.permissionLevel})})}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-view.js' */
define("plugin-stash/repository-view",["jquery","underscore","brace","util/events","util/elements"],function(f,b,d,c,e){var a=d.View.extend({mixins:[c.EventBusMixin,e],elements:{serverKey:'input[name="repository.stash.readonly.serverKey"]',projectKey:'input[name="repository.stash.readonly.projectKey"]',repositorySlug:'input[name="repository.stash.readonly.repositorySlug"]',repositoryUrl:'input[name="repository.stash.readonly.repositoryUrl"]'},initialize:function(g){this.params=f.extend({url:AJS.contextPath()+"/rest/stash/latest/projects/repository"},g.params||{});if(g.elements){this.elements=g.elements}this.$container=this.$el.parents(".repository:first");this.onEvent("unbind",this.onUnbind);this.onEvent("repository:selector:change",b.bind(function(h,j,i){if(i&&i.length&&j==="LINKED"){if(+i===this.$container.data("key")){this.$el.hide();this.$container.show();this.onReadonlyInit()}}},this));this.onReadonlyInit()},onUnbind:function(){this.undelegateEvents();this.clearElementsCache();this.$el.removeData().unbind();this.offEvent("repository:selector:change")},onReadonlyInit:function(){this.clearElementsCache();this.$el.parent().find(".aui-message").remove();this.$container.find(".field-group:first").append(f(document.createElement("span")).addClass("aui-icon aui-icon-wait"));this.getRemoteData(this.params.url,{data:this.getConfig()}).done(b.bind(this.onRepositoryLoaded,this)).always(b.bind(function(){this.$container.find(".aui-icon.aui-icon-wait").fadeOut(function(){f(this).remove()})},this))},onRepositoryLoaded:function(g){this.$el.find(".stash-repository > option").text(bamboo.plugins.stash.repository.autocomplete.row({item:g}));this.$el.slideDown()},onRemoteError:function(i){if(i.responseText){var g=JSON.parse(i.responseText,{errors:["Failed to load data from Bitbucket Server."]});if(g.authenticationInstanceName){this.$el.hide().parent().append(bamboo.plugins.stash.repository.autocomplete.oauthError({instanceName:g.authenticationInstanceName,redirectUrl:g.authenticationRedirectUrl}));f(window).on("applinks.auth.completion",b.bind(function(j,l,k){if(k){f(window).off("applinks.auth.completion");this.onReadonlyInit()}},this));return}if(g.remoteRequestStatus&&b.contains([401,404],g.remoteRequestStatus)){this.$el.hide().parent().append(bamboo.plugins.stash.repository.autocomplete.unauthorizedError({requestStatus:g.remoteRequestStatus}));return}if(g.errors){this.$container.find(".error").remove();this.$el.slideDown();var h=this.$container.find(".stash-repository").parent();b.each(g.errors,b.bind(function(j){h.append(bamboo.plugins.stash.repository.view.error({message:j}))},this))}}},getRemoteData:function(g,h){return f.ajax(g,b.defaults({type:"GET",dataType:"json"},h)).fail(b.bind(this.onRemoteError,this))},getConfig:function(){return{serverKey:this.getElement("serverKey").val(),projectKey:this.getElement("projectKey").val(),repositorySlug:this.getElement("repositorySlug").val(),repositoryUrl:this.getElement("repositoryUrl").val()}}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.feature.discovery.feature-discovery-plugin-bamboo:feature.discovery.resources', location = '/static/feature-discovery-dialog.soy' */
// This file was automatically generated from feature-discovery-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace feature.discovery.notifications.
 */

if (typeof feature == 'undefined') { var feature = {}; }
if (typeof feature.discovery == 'undefined') { feature.discovery = {}; }
if (typeof feature.discovery.notifications == 'undefined') { feature.discovery.notifications = {}; }


feature.discovery.notifications.discoveryDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.id) + '" class="feature-discovery__discovery-dialog aui-help" persistent="true" open="true" alignment="bottom right"><p><strong>' + soy.$$escapeHtml(AJS.format("Bamboo {0}",[opt_data.currentVersion])) + '</strong></p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("Your Bamboo has been upgraded! Check out the \x3cstrong\x3eWhat\x27s new\x3c/strong\x3e section from the help menu to find out about new features and fixes.")) + '</p><br/><button class="feature-discovery__discovery-dialog__acknowledge-button aui-button">' + soy.$$escapeHtml("OK, got it") + '</button></aui-inline-dialog>';
};
if (goog.DEBUG) {
  feature.discovery.notifications.discoveryDialog.soyTemplateName = 'feature.discovery.notifications.discoveryDialog';
}


feature.discovery.notifications.menuLink = function(opt_data, opt_ignored) {
  return '<aui-item-link for="feature-discovery__dropdown-menu" id="feature-discovery__dropdown-trigger">' + soy.$$escapeHtml("What\x27s new") + '</aui-item-link>';
};
if (goog.DEBUG) {
  feature.discovery.notifications.menuLink.soyTemplateName = 'feature.discovery.notifications.menuLink';
}


feature.discovery.notifications.menuContent = function(opt_data, opt_ignored) {
  var output = '<aui-dropdown-menu id="feature-discovery__dropdown-menu"><div class="feature-discovery__dropdown-menu__container"><p class="feature-discovery__dropdown-menu__title">' + soy.$$escapeHtml("What\x27s new") + '</p><p class="feature-discovery__dropdown-menu__description">' + soy.$$escapeHtml(AJS.format("Your are using Bamboo version {0}. Here are some of the new features:",[opt_data.currentVersion])) + '</p><ul class="feature-discovery__dropdown-menu__notifications">';
  var notificationList22 = opt_data.notifications;
  var notificationListLen22 = notificationList22.length;
  for (var notificationIndex22 = 0; notificationIndex22 < notificationListLen22; notificationIndex22++) {
    var notificationData22 = notificationList22[notificationIndex22];
    output += '<li class="feature-discovery__dropdown-menu__notification">' + ((notificationData22.title) ? '<div class="feature-discovery__dropdown-menu__notification-title"><p>' + soy.$$escapeHtml(notificationData22.title) + '</p>' + ((notificationData22.productVersion) ? '<div class="feature-discovery__dropdown-menu__lozenge-version"><span class="aui-lozenge aui-lozenge-subtle">' + soy.$$escapeHtml(notificationData22.productVersion) + '</span></div>' : '') + '</div>' : '') + ((notificationData22.description) ? '<p class="feature-discovery__dropdown-menu__notification-description">' + soy.$$escapeHtml(notificationData22.description) + '</p>' : '') + ((notificationData22.featureUrl || notificationData22.documentationUrl) ? '<p class="feature-discovery__dropdown-menu__notification-links">' + ((notificationData22.featureUrl) ? '<a class="feature-discovery__dropdown-menu__notification-link" href="' + soy.$$escapeHtml(notificationData22.featureUrl) + '" target="' + soy.$$escapeHtml(notificationData22.featureUrlTarget) + '" data-bamboo-analytics-event=\'' + soy.$$escapeHtml(notificationData22.featureUrlAnalyticsData) + '\'>' + soy.$$escapeHtml("Try it") + '</a>' : '') + ((notificationData22.documentationUrl) ? ((notificationData22.featureUrl) ? '<span class="feature-discovery__dropdown-menu__notification-link-separator">&bull;</span>' : '') + '<a class="feature-discovery__dropdown-menu__notification-link" href="' + soy.$$escapeHtml(notificationData22.documentationUrl) + '" target="' + soy.$$escapeHtml(notificationData22.documentationUrlTarget) + '" data-bamboo-analytics-event=\'' + soy.$$escapeHtml(notificationData22.documentationUrlAnalyticsData) + '\'>' + soy.$$escapeHtml("Read more") + '</a>' : '') + '</p>' : '') + '</li>';
  }
  output += '</ul><div><a class="feature-discovery__dropdown-menu__documentation-home-link" href="' + soy.$$escapeHtml(opt_data.featuresSummaryPageUrl) + '" target="_blank" data-bamboo-analytics-event=\'' + soy.$$escapeHtml(opt_data.featuresSummaryPageAnalyticsData) + '\'>' + soy.$$escapeHtml("All features and fixes") + '</a></div></div></aui-dropdown-menu>';
  return output;
};
if (goog.DEBUG) {
  feature.discovery.notifications.menuContent.soyTemplateName = 'feature.discovery.notifications.menuContent';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.feature.discovery.feature-discovery-plugin-bamboo:feature.discovery.resources', location = '/static/feature-discovery-dialog.js' */
require([
    'jquery',
    'underscore'
], function(
    $,
    _
) {
    'use strict';

    /**
     * Tests whether the given URL is absolute or relative to the product's context path.
     * @param {String} url
     * @return {Boolean}
     */
    var isAbsolute = function(url) {
        return url && (url.indexOf('http://') === 0 || url.indexOf('https://') === 0);
    };

    /**
     * Prepends the context path to the URL if it doesn't already contain it.
     * @param {String} url
     * @return {String}
     */
    var prependContextPath = function(url) {
        if (url.indexOf('/') !== 0) {
            url = '/' + url;
        }
        return url.indexOf(AJS.contextPath()) === 0 ? url : AJS.contextPath() + url;
    };

    /**
     * Convert the given URL to an effective one which can be used in a product.
     * @param {String} url
     * @return {String}
     */
    var getEffectiveUrl = function(url) {
        return (!url || isAbsolute(url)) ? url : prependContextPath(url);
    };

    /**
     * Retrieve the 'target' attribute for a given URL.
     * @param {String} url
     * @return {String}
     */
    var getUrlTarget = function(url) {
        return isAbsolute(url) ? '_blank' : '_self';
    };

    /**
     * Get the value of the 'bamboo-analytics-event' link attribute.
     * @param {String} type type of link which triggered the analytics event
     * @param {Number} [id] unique ID of the notification
     * @return {String}
     */
    var getAnalyticsEventData = function(type, id) {
        var analyticsData = {
            name: 'bamboo.feature.discovery.link.clicked',
            data: {
                type: type
            }
        };
        if (id) {
            analyticsData.data.id = id;
        }
        return JSON.stringify(analyticsData)
    };

    /**
     * Acknowledges product version for current user. Will affect future feature discovery notifications.
     * @param {String} version
     */
    var acknowledgeProductVersion = function(version) {
        var url = AJS.contextPath() + '/rest/featureDiscovery/latest/notifications/acknowledge/' + version;
        $.ajax({ url: url, type: 'PUT' });
    };

    $(document).ready(function() {
        var templates = feature.discovery.notifications;

        var pluginKey = 'com.atlassian.feature.discovery.feature-discovery-plugin-bamboo';
        var webResourceDataKey = 'feature.discovery.resources.feature-discovery-data';
        var fullKey = pluginKey + ':' + webResourceDataKey;
        var data = WRM.data.claim(fullKey);

        if (!data || !data.currentUser) {
            return;
        }

        var $body = $('body');
        var $helpMenuListEntry = $('#system_help_menu');
        var $helpMenuLink = $('#bamboo\\.global\\.header-help\\.menu');

        // adjust links
        var notifications = data.notificationsForUser.map(function(notification) {
            return _.defaults({
                featureUrl: getEffectiveUrl(notification.featureUrl),
                featureUrlTarget: getUrlTarget(notification.featureUrl),
                featureUrlAnalyticsData: getAnalyticsEventData('TRY_IT', notification.id),
                documentationUrl: getEffectiveUrl(notification.documentationUrl),
                documentationUrlTarget: getUrlTarget(notification.documentationUrl),
                documentationUrlAnalyticsData: getAnalyticsEventData('READ_MORE', notification.id)
            }, notification);
        });

        // append the notifications
        $body.append(templates.menuContent({
            notifications: notifications,
            currentVersion: data.currentProductVersion,
            featuresSummaryPageUrl: data.featuresSummaryPageUrl,
            featuresSummaryPageAnalyticsData: getAnalyticsEventData('DOCUMENTATION_HOME', -1)
        }));
        $helpMenuLink.find('ul').append(templates.menuLink());

        // if user has not yet been notified about the upgrade
        if (data.showDiscoveryDialog) {

            // display the discovery dialog after a short delay
            setTimeout(function() {
                var discoveryDialogId = 'feature-discovery__discovery-dialog';
                var $discoveryDialog = $(templates.discoveryDialog({
                    id: discoveryDialogId,
                    currentVersion: data.currentProductVersion
                }));

                // register handlers to persist that the user has acknowledged the new version
                var dialogHidden = false;
                var hideDialog = function() {
                    if (!dialogHidden) {
                        dialogHidden = true;
                        acknowledgeProductVersion(data.currentProductVersion);
                        $discoveryDialog.remove();
                    }
                };

                $helpMenuLink.on('aui-dropdown2-show', hideDialog);
                $discoveryDialog.on('click', '.feature-discovery__discovery-dialog__acknowledge-button', function(e) {
                    e.preventDefault();
                    hideDialog();
                });

                // make sure the dialog will be pointing at the menu
                $helpMenuListEntry.attr('data-aui-trigger', '');
                $helpMenuListEntry.attr('aria-controls', discoveryDialogId);

                // append the discovery dialog
                $helpMenuListEntry.append($discoveryDialog);
            }, 500);

        } else if (data.currentProductVersion !== data.lastProductVersionForUser) {
            // acknowledge current version for future releases
            acknowledgeProductVersion(data.currentProductVersion);
        }
    });
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-repository-type', location = '/widget/repository/repository-selector-new.js' */
define('widget/repository-selector-new', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {

    'use strict';

    var RepositorySelectorNew = Brace.View.extend({

        mixins: [
            events.EventBusMixin
        ],

        initialize: function(options) {
            var settings = options || [];
            this.$selectedRepository = $('#selectedRepository');

            this.$el.find('li.option').on('click', _.bind(this.onSelectRepository, this));
            this.$el.find('li').tooltip({ gravity: 's' });

            this.$trigger = this.$el.find('a.aui-dropdown2-trigger');

            this.$forms = $('#repository-forms');
            this.$dropdown = $('#repository-other-dropdown');
            this.$staticElements = $('#repository-display-name');
            var $accessOptions = $('#repository-access-option');
            if ($accessOptions.length) {
                this.$staticElements = this.$staticElements.add($accessOptions);
            }

            this.onEvent('repository:selector:form', this.onFormChanged);
            this.selectByKey(this.getSelectedKey());
        },

        onFormChanged: function(instance, type) {
            if (type === 'NEW') {
                this.selectByKey(this.getSelectedKey());
            }
        },

        onSelectRepository: function(event) {
            event.preventDefault();

            var $element = $(event.target).parents('li:first');
            var key = $element.data('key');

            //update text in dropdown trigger
            this.$trigger.text($element.text());

            if (!this.$staticElements.toArray().every(function(element) {
                    return $(element).is(':visible');
                })) {
                this.$staticElements.show();
            }

            this.$selectedRepository.val(key);
            this.$selectedRepository.trigger('change');

            var id = ['repository', key].join('-');
            var $container = $('div[id="' + id + '"]');
            var $selected = this.$forms.find('.repository:visible').not($container);

            if ($selected && $selected.length) {
                $selected.hide();
            }

            this.$el.find('li.selected').removeClass('selected');
            $element.addClass('selected');
            $container.show();

            if (this.$dropdown.find($element).length) {
                this.$el.find('a[aria-controls="' + this.$dropdown.attr('id') + '"]')
                    .parents('li').addClass('selected');
            }

            AJS.layer(this.$dropdown).hide();
        },

        getSelectedKey: function() {
            var selectedKey = this.$selectedRepository.val();
            if (/^\d+$/.test(selectedKey)) { //test if selected repository is a number
                selectedKey = '';
            }

            if (!selectedKey.length) {
                var $elements = this.$el.find('li.option.selected')
                    .add(this.$dropdown.find('li.option.selected'));

                var key = $elements.first().data('key');

                if (key && key.length) {
                    selectedKey = key;
                }
            }

            return selectedKey;
        },

        selectByKey: function(key) {
            if (key && key.length) {
                var keySelector = 'li[data-key="' + key + '"] a';
                var $items = this.$el.find(keySelector).add(this.$dropdown.find(keySelector));

                if ($items.length) {
                    $items.trigger('click');
                }
            }
            else {
                this.$selectedRepository.val('');
                this.$selectedRepository.trigger('change');
            }
        }

    });

    return RepositorySelectorNew;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-repository-type', location = '/widget/repository/repository-selector-linked.js' */
define('widget/repository-selector-linked', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {

    'use strict';

    var RepositorySelectorLinked = Brace.View.extend({

        mixins: [
            events.EventBusMixin
        ],

        initialize: function(options) {
            this.params = options.params || {};

            this.$selectedRepository = $('#selectedRepository');
            this.$select = this.$el.find('select:first');
            this.$select.auiSelect2({
                // by default select2 defines formatResult which does matching/highlighting
                formatResult: function(item) {
                    return item.text;
                }
            });

            this.$select.on('change', _.bind(function(event) {
                if (event.val.length > 0 && event.added) {
                    this.onSelectRepository(event.added.id);
                }
            }, this));

            this.onEvent('repository:selector:form',
                this.onFormChanged
            );
        },

        onFormChanged: function(instance, type) {
            if (type === 'LINKED') {
                this.onSelectRepository(this.getSelectedKey());
            }
        },

        onSelectRepository: function(key) {
            var $container = $(['#repository-shared', key].join('-'));

            if ($container.length && !$container.is(':visible')) {
                var repositories = this.$el.find('.repository:visible');

                if (!repositories.length) {
                    $container.delay(400).slideDown();
                }
                else {
                    repositories.slideUp();
                    $container.slideDown();
                }
            }

            this.$selectedRepository.val(key);
            this.$selectedRepository.trigger('change');
        },

        getSelectedKey: function() {
            return this.$select.val();
        }

    });
    return RepositorySelectorLinked;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-repository-type', location = '/widget/repository/repository-selector.js' */
define('widget/repository-selector', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {

    'use strict';

    var RepositorySelector = Brace.View.extend({

        mixins: [
            events.EventBusMixin
        ],

        initialize: function() {
            this.$selectedRepository = $('#selectedRepository');
            this.$selectedRepository.on('change', _.bind(function() {
                this.triggerEvent('repository:selector:change',
                    this.$el.find('input:radio[name="repositoryTypeOption"]:checked').val(),
                    this.$selectedRepository.val()
                );

                if (this.$selectedRepository.val().length) {
                    this.$el.find('.radio > .error').remove();
                }
            }, this));

            var callback = _.bind(function(input) {
                if (input.length) {
                    if (input.val() === 'NONE') {
                        this.$selectedRepository.val('nullRepository');
                        this.$selectedRepository.trigger('change');
                    } else {
                        this.triggerEvent('repository:selector:form', input.val());
                    }
                }
            }, this);

            $(document).on('change',
                'form input:radio[name="repositoryTypeOption"]', function(event) {
                    callback($(event.target));
                }
            );

            var $typeOption = this.$el.find(
                'input:radio[name="repositoryTypeOption"]:checked'
            );

            if ($typeOption.length) {
                callback($typeOption);
            }
        }

    });

    return RepositorySelector;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-jquery-keygen', location = '/bower/jquery-keygen/jquery.keygen.js' */
(function (exp, $) {
    exp.KeyGenerator = function () {
        // These words will not be used in key generation for acronyms.
        var IGNORED_WORDS = ["THE", "A", "AN", "AS", "AND", "OF", "OR"],
            // The (non-ascii) characters used as keys will be replaced with their (ascii) value.
            CHARACTER_MAP = {},

            getTotalLength = function (words) {
                return words.join("").length;
            },

            removeIgnoredWords = function (words) {
                return $.grep(words, function (word, index) {
                    return $.inArray(word, IGNORED_WORDS) === -1;
                });
            },

            createAcronym = function (words) {
                var result = "";
                $.each(words, function (i, word) {
                    result += word.charAt(0);
                });
                return result;
            },

            getFirstSyllable = function (word) {
                // Best guess at getting the first syllable
                // Returns the substring up to and including the first consonant to appear after a vowel
                var pastVowel = false;
                var i;
                for (i = 0; i < word.length; i++) {
                    if (isVowelOrY(word[i])) {
                        pastVowel = true;
                    } else {
                        if (pastVowel) {
                            return word.substring(0, i + 1);
                        }
                    }
                }
                return word;
            },

            isVowelOrY = function (c) {
                return c && c.length === 1 && c.search("[AEIOUY]") !== -1;
            };

        CHARACTER_MAP[199] = "C"; // 
        CHARACTER_MAP[231] = "c"; // ?
        CHARACTER_MAP[252] = "u"; // 
        CHARACTER_MAP[251] = "u"; // ?
        CHARACTER_MAP[250] = "u"; // 
        CHARACTER_MAP[249] = "u"; // ?
        CHARACTER_MAP[233] = "e"; // ?
        CHARACTER_MAP[234] = "e"; // ?
        CHARACTER_MAP[235] = "e"; // 
        CHARACTER_MAP[232] = "e"; // ?
        CHARACTER_MAP[226] = "a"; // 
        CHARACTER_MAP[228] = "a"; // ?
        CHARACTER_MAP[224] = "a"; // 
        CHARACTER_MAP[229] = "a"; // 
        CHARACTER_MAP[225] = "a"; // 
        CHARACTER_MAP[239] = "i"; // 
        CHARACTER_MAP[238] = "i"; // 
        CHARACTER_MAP[236] = "i"; // 
        CHARACTER_MAP[237] = "i"; // 
        CHARACTER_MAP[196] = "A"; // 
        CHARACTER_MAP[197] = "A"; // ?
        CHARACTER_MAP[201] = "E"; // 
        CHARACTER_MAP[230] = "ae"; // ?
        CHARACTER_MAP[198] = "Ae"; // 
        CHARACTER_MAP[244] = "o"; // 
        CHARACTER_MAP[246] = "o"; // ?
        CHARACTER_MAP[242] = "o"; // 
        CHARACTER_MAP[243] = "o"; // 
        CHARACTER_MAP[220] = "U"; // 
        CHARACTER_MAP[255] = "Y"; // 
        CHARACTER_MAP[214] = "O"; // 
        CHARACTER_MAP[241] = "n"; // 
        CHARACTER_MAP[209] = "N"; // 

        return {
            generateKey: function (name, options) {
                options = $.extend({}, options);

                var desiredKeyLength = (typeof options.desiredKeyLength == 'number') ? options.desiredKeyLength : 4,
                    maxKeyLength = (typeof options.maxKeyLength == 'number') ? options.maxKeyLength : Infinity,
                    charBlacklistRegex = (typeof options.charBlacklistRegex != 'undefined'? options.charBlacklistRegex : /[^a-zA-Z0-9]/g);

                name = $.trim(name);
                if (!name) {
                    return "";
                }

                // Brute-force chunk-by-chunk substitution and filtering.
                var filtered = [];
                for (var i = 0, ii = name.length; i < ii; i++) {
                    var sub = CHARACTER_MAP[name.charCodeAt(i)];
                    filtered.push(sub ? sub : name[i]);
                }

                name = filtered.join('');

                // Split into words
                var words = [];
                $.each(name.split(/\s+/), function (i, word) {
                    if (word) {
                        // Remove blacklisted characters
                        word = word.replace(charBlacklistRegex, "");
                        // uppercase the word (NOTE: JavaScript attempts to convert characters like ? in to SS)
                        word = word.toUpperCase();
                        // add the word, should it be worthy.
                        word.length && words.push(word);
                    }
                });

                // Remove ignored words
                if (desiredKeyLength && getTotalLength(words) > desiredKeyLength) {
                    words = removeIgnoredWords(words);
                }

                var key;

                if (words.length == 0) {
                    // No words were worthy!
                    key = "";
                } else if (words.length == 1) {
                    // If we have one word, and it is longer than a desired key, get the first syllable

                    var word = words[0],
                        firstSyllable = getFirstSyllable(word);

                    if (maxKeyLength < word.length || // must use the smaller one
                        Math.abs(word.length - desiredKeyLength) >= Math.abs(firstSyllable.length - desiredKeyLength)) { // should use the smaller one because it's closer to desired length.
                        key = firstSyllable;
                    } else {
                        key = word;
                    }
                } else {
                    var totalLength = getTotalLength(words),
                        acronym = createAcronym(words);
                    if (maxKeyLength < totalLength  || // must use the smaller one
                        Math.abs(totalLength - desiredKeyLength) >= Math.abs(acronym.length - desiredKeyLength)) { // should use the smaller one because it's closer to desired length.
                        key = acronym;
                    } else {
                        // The words are short enough to use as a key
                        key = words.join('');
                    }
                }

                // Limit the length of the key
                if (maxKeyLength && key.length > maxKeyLength) {
                    key = key.substr(0, maxKeyLength);
                }

                return key;
            }
        };
    };

    var keyGenerator = exp.KeyGenerator();

    $.fn.generateFrom = function ($nameElement, options) {
        var defaultOptions = {
                desiredKeyLength: 4,
                maxKeyLength: 10,
                maxNameLength: 30,
                timeoutMS: 100,
                charBlacklistRegex: /[^a-zA-Z0-9]/g, // Remove whitespace and punctuation characters (i.e. anything not A-Z or 0-9)
                uppercase: true,
                validationCallback: function () {
                },
                errorCallback: function () {
                }
            },

            $keyElement = $(this).first(),

            $nameElement = $nameElement.first(),

            options = $.extend({}, defaultOptions, options);

        (function () {
            var shouldUpdateKey = function () {
                    return $keyElement.data("autosuggest") !== false;
                },

                setKeyEdited = function (key) {
                    if (key) {
                        // If the key is manually edited, do not suggest automatically generated keys anymore
                        if ($keyElement.data("lastGeneratedValue") !== key) {
                            $keyElement.data("autosuggest", false);
                        }
                    } else {
                        // If the user deletes the entire key field, turn suggest back on.
                        $keyElement.data("autosuggest", true);
                    }
                },

                updateKey = function (key) {
                    var oldKey = $keyElement.val();
                    $keyElement.data("lastGeneratedValue", key);
                    $keyElement.val(key);
                    return oldKey != key;
                },

                onNameTimeout = function () {
                    setKeyEdited($keyElement.val());
                    autofillKeyIfNeeded();
                },

                bindNameHook = function (e) {
                    bindHook(e, onNameTimeout);
                },

                bindHook = function (e, func) {
                    var el = $(e.target), hook;
                    hook = function () {
                        unbindHook(e);
                        func();
                        if (el.is(":visible")) {
                            el.data("checkHook", setTimeout(hook, options.timeoutMS));
                        }
                    };
                    if (!el.data("checkHook")) {
                        el.data("checkHook", setTimeout(hook, 0));
                    }
                },

                unbindHook = function (e) {
                    var el = $(e.target);
                    clearTimeout(el.data("checkHook"));
                    el.removeData("checkHook");
                },

                autofillKeyIfNeeded = function () {
                    if (shouldUpdateKey()) {
                        var key = keyGenerator.generateKey($nameElement.val(), {
                            desiredKeyLength: options.desiredKeyLength,
                            maxKeyLength: options.maxKeyLength,
                            charBlacklistRegex: options.charBlacklistRegex
                        });
                        if (updateKey(key)) {
                            options.validationCallback();
                        }
                    }
                };

            // Input restrictions
            $nameElement.attr("maxlength", options.maxNameLength);
            $keyElement.attr("maxlength", options.maxKeyLength);
            if (options.uppercase) {
                $keyElement.css("text-transform", "uppercase");
            }

            // Poll the name field for updates
            if (document.activeElement && document.activeElement === $nameElement[0]) {
                bindNameHook({ target: $nameElement[0] });
            }
            $nameElement.focus(bindNameHook);
            $nameElement.blur(unbindHook);

        })();

        return this;
    };
})(window, jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:plan-dependency-config', location = '/widget/autocomplete-controls/bamboo/plandependencies/plan-dependency.js' */
define('widget/dependent-plan-select', [
    'jquery',
    'underscore',
    'brace',
    'backbone',
    'widget/plan-single-select',
    'widget/selected-list',
    'util/events'
], function(
    $,
    _,
    Brace,
    Backbone,
    PlanSingleSelect,
    SelectedList,
    events
) {

    'use strict';

    var DependentPlanSelect = Brace.View.extend({
        mixins: [events.EventBusMixin],
        initialize: function(options) {
            this.planSelect = new PlanSingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: 10,
                queryData: {
                    fuzzy: true,
                    permission: 'BUILD'
                }
            });

            this.selectedPlans = new SelectedList({
                el: options.selectedPlansEl,
                bootstrap: options.bootstrap || [],
                itemTemplate: bamboo.widget.autocomplete.planDependency.item
            });

            this.onEvent('plan:selected', this.handleSelection);
        },
        // using global event-bus event handling (first argument is an instance)
        handleSelection: function(instance, model) {
            if (model instanceof Backbone.Model) {
                this.selectedPlans.addItem(model);
                this.planSelect.singleSelect.setValue('');
            }
        }
    });

    return DependentPlanSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:plan-dependency-config', location = '/widget/autocomplete-controls/bamboo/plandependencies/plan-dependency.soy' */
// This file was automatically generated from plan-dependency.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.planDependency.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }
if (typeof bamboo.widget.autocomplete.planDependency == 'undefined') { bamboo.widget.autocomplete.planDependency = {}; }


bamboo.widget.autocomplete.planDependency.list = function(opt_data, opt_ignored) {
  var output = '<ul class="' + soy.$$escapeHtml(opt_data.dependencies.length == 0 ? 'empty' : '') + aui.renderExtraClasses(opt_data) + '">';
  var dependencyList7 = opt_data.dependencies;
  var dependencyListLen7 = dependencyList7.length;
  for (var dependencyIndex7 = 0; dependencyIndex7 < dependencyListLen7; dependencyIndex7++) {
    var dependencyData7 = dependencyList7[dependencyIndex7];
    var plan__soy8 = opt_data.isParent ? dependencyData7.childPlan : dependencyData7.parentPlan;
    output += '<li data-id="' + soy.$$escapeHtml(plan__soy8.key) + '">' + bamboo.widget.autocomplete.planDependency.item({id: plan__soy8.key, projectName: plan__soy8.project.name, planName: plan__soy8.buildName, isEditable: dependencyData7.editable, isReadOnly: opt_data.isReadOnly}) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planDependency.list.soyTemplateName = 'bamboo.widget.autocomplete.planDependency.list';
}


bamboo.widget.autocomplete.planDependency.item = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("" + '/chain/admin/config/editChainDependencies.action?buildKey=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.projectName) + ((opt_data.planName) ? ' &rsaquo; ' + soy.$$escapeHtml(opt_data.planName) : '') + '</a>' + ((! (opt_data.isEditable == false)) ? (! opt_data.isReadOnly) ? '<a class="remove"></a><input type="hidden" name="childPlanKeys" value="' + soy.$$escapeHtml(opt_data.id) + '" />' : '' : widget.lozenges.lozenge({text: "Generated", subtle: true, extraClasses: 'dependencies-generated'}));
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planDependency.item.soyTemplateName = 'bamboo.widget.autocomplete.planDependency.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-git:github', location = 'javascript/github.js' */
define("feature/github-repository-form",["jquery","underscore","util/ajax-form","util/events"],function(e,b,a,c){function d(g){var h={repositoryKey:null,repositoryId:0,selectors:{container:null,repositoryType:null,repositoryPluginKey:null,username:null,password:null,loadRepositoriesButton:null,repository:null,branch:null,baseUrl:"http://github.com",enterprise:null},inheritedData:{repository:"",id:""}};var f=e.extend(true,h,g);this.repositoryKey=f.repositoryKey;this.repositoryId=f.repositoryId;this._jqXHRRepository=null;this._jqXHRBranch=null;this.$container=e(f.selectors.container);this.$repositoryType=e(f.selectors.repositoryType);this.$repositoryPluginKey=e(f.selectors.repositoryPluginKey);this.$username=this.$container.find(f.selectors.username);this.$password=this.$container.find(f.selectors.password);this.$loadRepositoriesButton=this.$container.find(f.selectors.loadRepositoriesButton);this.$repository=this.$container.find(f.selectors.repository);this.$branch=e(f.selectors.branch);this.$form=this.$username.closest("form");this.$baseUrl=this.$container.find(f.selectors.baseUrl);this.$enterprise=this.$container.find(f.selectors.enterprise);this.inheritedData=f.inheritedData;this.$overrideRepositoryLocation=e("#overrideRepositoryLocation");c.EventBus.on("repository:server:toggle-override",this.resetRepository.bind(this))}d.prototype={init:function(){this.$repository.select2({enable:false,width:"copy"});this.$loadRepositoriesButton.click(b.bind(this.loadRepositoriesClick,this));this.$repository.change(b.bind(this.repositoryChange,this));var f=(this.$repositoryType.val()===this.repositoryKey||this.$repositoryPluginKey.val()===this.repositoryKey);if(f&&(this.repositoryId||(this.$username.val()&&this.$password.val()))){this.loadRepositories();if(this.$repository.val()!==null){this.loadBranches(true)}}},loadRepositoriesClick:function(){this.clearFieldErrors();this.$repository.prop("disabled",true);this.$branch.prop("disabled",true);if(this._jqXHRBranch){this._jqXHRBranch.abort()}this.loadRepositories().done(b.bind(function(g){var f=g.repositories;if(g.status==="OK"&&f&&f.length){this.$repository.focus();if(!this.$branch.children().length){this.$branch.append(this.generateBranchOption(this.defaultBranch()))}this.$repository.val(this.$repository.find("option:first").val());this.loadBranches(this.isOverrideOn())}},this))},isOverrideOn:function(){return !this.$overrideRepositoryLocation.length||this.$overrideRepositoryLocation.val()==="true"},resetRepository:function(){var f=this.isOverrideOn();if(this.inheritedData.repository&&this.inheritedData.repository!==this.$repository.val()){this.clearFieldErrors();this.$branch.prop("disabled",true).empty().append(this.generateBranchOption(this.defaultBranch()));this.loadBranches(f)}},repositoryChange:function(){this.clearFieldErrors();this.$branch.prop("disabled",true).empty().append(this.generateBranchOption(this.defaultBranch()));this.loadBranches(true)},loadRepositories:function(){var h=this.$repository;var l=e("<optgroup />").attr("label","Loading Repositories...").appendTo(h);var j=h.val();var g=this.generateRepositoryOption;var k=b.bind(function(o,q,p){var m=document.createDocumentFragment();var n=o.repositories;if(o.status==="OK"&&n&&n.length){e.each(n,function(){m.appendChild(g(this).get(0))});h.empty().prop("disabled",false).get(0).appendChild(m);h.val(j)}else{f(p)}},this);var i=b.bind(function(){l.remove();this.$loadRepositoriesButton.prop("disabled",false)},this);var f=b.bind(function(p){var n;var r=[];var o;var m={};if(p.statusText!=="abort"){try{n=e.parseJSON(p.responseText);r=n.errors||[];o=n.repositories;m=n.fieldErrors||{}}catch(q){}if(o&&!o.length){r.push("No repositories found for user {0}.".replace("{0}",this.$username.val()))}if(!r.length){r.push("Failed to load data from GitHub."+"["+p.status+" "+p.statusText+"]")}this.addFieldErrors(this.$repository,r,m)}},this);this.$loadRepositoriesButton.prop("disabled",true);return this.getRepositoryList().done(k).fail(f).always(i)},generateRepositoryOption:function(f){return e("<option/>",{text:f.full_name,val:f.full_name,data:f})},loadBranches:function(m){var i=this.$branch;var l=e("<optgroup />").attr("label","Loading Branches...").appendTo(i);var n=i.closest(".field-group");var j=i.val();var f=this.generateBranchOption;var h=b.bind(function(q,s,r){var p=e();var o=q.branches;if(q.status==="OK"&&o){e.each(o,function(){p=p.add(f(this.name))});i.empty().append(p).prop("disabled",false).val(j);if(j&&i.val()!==j){i.val(this.defaultBranch())}}else{g(r)}},this);var k=b.bind(function(){l.remove()},this);var g=b.bind(function(q){var p;var s=[];var o={};if(q.statusText!=="abort"){try{p=e.parseJSON(q.responseText);s=p.errors||[];o=p.fieldErrors||{}}catch(r){}if(!s.length){s.push("Failed to load data from GitHub."+"["+q.status+" "+q.statusText+"]")}this.addFieldErrors(this.$branch,s,o)}},this);if(n.hasClass("hidden")){n.hide().removeClass("hidden").slideDown()}return this.getBranchList(this.$repository.val(),m).done(h).fail(g).always(k)},generateBranchOption:function(f){return e("<option/>",{text:f})},defaultBranch:function(){return"master"},getJsonResponse:function(f,j,h,g){var k=g.closest(".field-group");var i="loading";if(h){h.abort()}k.addClass(i);return e.ajax({type:"POST",url:f,data:JSON.stringify(j),contentType:"application/json",processData:false,dataType:"json"}).always(function(){k.removeClass(i)})},getRepositoryList:function(){var f=AJS.contextPath()+"/rest/git/latest/gh/repositories/"+this.$username.val()+"/";this._jqXHRRepository=this.getJsonResponse(f,{password:this.$password.val(),repositoryId:this.repositoryId,apiBaseUri:this.$baseUrl.val()},this._jqXHRRepository,this.$repository);return this._jqXHRRepository},getBranchList:function(h,f){var g=AJS.contextPath()+"/rest/git/latest/gh/repositories/";if(f){g=g+h+"/branches/";this._jqXHRBranch=this.getJsonResponse(g,{username:this.$username.val(),password:this.$password.val(),repository:h,repositoryId:this.repositoryId,apiBaseUri:this.$baseUrl.val()},this._jqXHRBranch,this.$branch)}else{g=g+this.inheritedData.repository+"/branches/";this._jqXHRBranch=this.getJsonResponse(g,{repository:this.inheritedData.repository,repositoryId:this.inheritedData.repositoryId,apiBaseUri:this.$baseUrl.val()},this._jqXHRBranch,this.$branch)}return this._jqXHRBranch},addFieldErrors:function(g,i,f){if(i&&i.length){var h=g.attr("name");f[h]=f[h]||[];i.forEach(function(j){f[h].push(j)})}new a(this.$form).injectErrors({errors:[],fieldErrors:f})},clearFieldErrors:function(){this.$form.find(".error").remove()}};return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-fetch-state-aware', location = '/util/fetch-state-aware/fetch-state-aware.js' */
define("util/fetch-state-aware",["marionette"],function(t){"use strict";var e={request:"onFetchStarted","sync error":"onFetchEnded"};return t.Behavior.extend({collectionEvents:e,modelEvents:e,initialize:function(){this.resetFetchState(),this.view.resetFetchState=this.resetFetchState.bind(this),this.view.isFetched=this.isFetched.bind(this),this.view.isFetching=this.isFetching.bind(this)},onFetchStarted:function(){this.fetchState.fetching=!0},onFetchEnded:function(){this.fetchState.fetching=!1,this.fetchState.fetched||(this.fetchState.fetched=!0,this.view.triggerMethod("initial:fetch:complete"))},resetFetchState:function(){this.fetchState={fetched:!1,fetching:!1}},isFetched:function(){return this.fetchState.fetched},isFetching:function(){return this.fetchState.fetching}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status.js' */
var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t};define("feature/specs-status",["jquery","underscore","backbone","marionette","aui/flag","util/error-helper","util/fetch-state-aware","feature/specs-status/templates","feature/specs-status/model"],function(t,e,r,s,o,n,i,a,c){"use strict";return s.CompositeView.extend({childView:s.ItemView.extend({tagName:"tr",template:a.logsTableRow,serializeData:function(){var t=s.ItemView.prototype.serializeData.apply(this);return _extends({},t,{formattedExecutionDate:BAMBOO.Time.format(t.specsExecutionDate,"full")})}}),childViewContainer:".logs-table__body",emptyView:s.ItemView.extend({tagName:"tr",template:a.logsTableEmptyRow,className:function(){return this.getOption("isFetchError")?"fetchError":"noResults"},serializeData:function(){return{isFetched:this.getOption("isFetched"),isFetchError:this.getOption("isFetchError"),fetchErrorContent:this.getOption("fetchErrorContent")}}}),emptyViewOptions:function(){return this.getFetchInfo()},modelEvents:{sync:"onModelSync",error:"onModelError"},behaviors:{FetchStateAware:{behaviorClass:i}},ui:{scanButton:".status-table__scan-button"},events:{"click @ui.scanButton":"onScanButtonClick"},template:a.layout,isFetchError:!1,fetchErrorContent:"",initialize:function(t){this.model=new c({repositoryId:t.repositoryId}),this.collection=this.model.getSpecsLogsCollection(),this.fetchSpecsStatus()},serializeData:function(){return _extends({},this.model.toJSON(),this.getFetchInfo())},getFetchInfo:function(){return{isFetched:this.isFetched(),isFetchError:this.isFetchError,fetchErrorContent:this.fetchErrorContent}},getScanUrl:function(){var t=this.model.getRepositoryId();return AJS.contextPath()+"/rest/api/latest/repository/"+t+"/scanNow"},scheduleSpecsStatusFetch:function(){clearTimeout(this.fetchTimer);var t=this.model.isInProgress()?1e4:6e4;this.fetchTimer=setTimeout(this.fetchSpecsStatus.bind(this),t)},fetchSpecsStatus:function(){clearTimeout(this.fetchTimer),this.model.fetch()},onModelSync:function(){this.isFetchError=!1,this.scheduleSpecsStatusFetch(),this.render()},onModelError:function(t,e){this.isFetchError=!0,this.scheduleSpecsStatusFetch(),this.model.reset(),this.fetchErrorContent=aui.message.error({content:n.getErrorFromResponse(e,"An error occurred while we were obtaining Bamboo Specs status for this repository. Try reloading the page.")}),this.render()},onInitialFetchComplete:function(){this.render()},onScanButtonClick:function(){this.model.isInProgress()||(t.ajax({type:"POST",url:this.getScanUrl()}).done(this.onManualScanSuccess.bind(this)).fail(this.onManualScanError.bind(this)).always(this.fetchSpecsStatus.bind(this)),this.model.setInProgress(!0),this.render())},onManualScanSuccess:function(){new o({type:"info",close:"auto",title:"Bamboo Specs scanning started",body:"The Specs status will appear in the table once the scanning completes."})},onManualScanError:function(t){new o({type:"error",close:"manual",title:"Couldn\u0027t start Bamboo Specs scanning",body:n.getErrorFromResponse(t,"An unknown error has occurred. See the logs for more details.")})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status.soy' */
// This file was automatically generated from specs-status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.specs.status.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.specs == 'undefined') { bamboo.feature.specs = {}; }
if (typeof bamboo.feature.specs.status == 'undefined') { bamboo.feature.specs.status = {}; }


bamboo.feature.specs.status.layout = function(opt_data, opt_ignored) {
  return '<div class="specs-status"><div class="specs-status__status-table ' + ((opt_data.isFetchError || ! opt_data.isFetched) ? 'hidden' : '') + '"><table class="aui"><tr><td><span class="status-table__status-row">' + bamboo.feature.specs.status.statusLineContent(opt_data) + '</span></td><td><a class="aui-button status-table__scan-button" ' + ((opt_data.inProgress) ? 'disabled="disabled"' : '') + '>' + soy.$$escapeHtml("Scan") + '</a></td></tr></table></div><div class="specs-status__logs-table"><table class="aui"><thead class="logs-table__head ' + ((opt_data.isFetchError) ? 'hidden' : '') + '"><tr><th>' + soy.$$escapeHtml("Timestamp") + '</th><th>' + soy.$$escapeHtml("Specs status") + '</th><th>' + soy.$$escapeHtml("Log") + '</th></tr></thead><tbody class="logs-table__body"></tbody></table></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.layout.soyTemplateName = 'bamboo.feature.specs.status.layout';
}


bamboo.feature.specs.status.logsTableRow = function(opt_data, opt_ignored) {
  return '<td>' + soy.$$escapeHtml(opt_data.formattedExecutionDate) + '</td><td>' + ((opt_data.specImportState == 'SUCCESS') ? bamboo.feature.specs.status.specsStatusCell({statusIcon: 'specs-success', statusIconText: "Specs execution was successful", statusText: "Specs execution successful"}) : (opt_data.specImportState == 'ERROR') ? bamboo.feature.specs.status.specsStatusCell({statusIcon: 'specs-failure', statusIconText: "Specs execution failed", statusText: "Error in Bamboo Specs"}) : bamboo.feature.specs.status.specsStatusCell({statusIcon: 'building', statusIconText: "Specs execution in progress", statusText: "Scanning in progress..."})) + '</td><td>' + ((opt_data.logFilename) ? '<a href="' + soy.$$escapeHtml("") + '/spec-logs/' + soy.$$escapeHtml(opt_data.vcsLocationId) + '/' + soy.$$escapeHtml(opt_data.logFilename) + '" target="_blank">' + ((opt_data.specImportState == 'ERROR') ? soy.$$escapeHtml("View error logs") : soy.$$escapeHtml("View logs")) + '</a>' : '') + '</td>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.logsTableRow.soyTemplateName = 'bamboo.feature.specs.status.logsTableRow';
}


bamboo.feature.specs.status.logsTableEmptyRow = function(opt_data, opt_ignored) {
  return '<td colspan="3">' + ((! opt_data.isFetched) ? '<span class="logs-table__loading-spinner">' + aui.icons.icon({size: 'large', icon: 'wait'}) + '</span>' : (opt_data.isFetchError) ? soy.$$filterNoAutoescape(opt_data.fetchErrorContent) : '<div class="logs-table__no-results"><h3>' + soy.$$escapeHtml("No specs logs yet") + '</h3><p class="description">' + soy.$$escapeHtml("Bamboo hasn\x27t detected any specs in your repository.") + '</p></div>') + '</td>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.logsTableEmptyRow.soyTemplateName = 'bamboo.feature.specs.status.logsTableEmptyRow';
}


bamboo.feature.specs.status.specsStatusCell = function(opt_data, opt_ignored) {
  return widget.icons.statusIcon({status: opt_data.statusIcon, text: opt_data.statusIconText}) + ' ' + soy.$$escapeHtml(opt_data.statusText);
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.specsStatusCell.soyTemplateName = 'bamboo.feature.specs.status.specsStatusCell';
}


bamboo.feature.specs.status.statusLineContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.inProgress) ? bamboo.feature.specs.status.scanningInProgress(null) : (opt_data.specsLogs.length) ? (opt_data.specsLogs[0].specImportState != null) ? soy.$$filterNoAutoescape(AJS.format("Last scanned {0} ago.",opt_data.specsLogs[0].relativeExecutionDate)) : bamboo.feature.specs.status.scanningInProgress(null) : soy.$$escapeHtml("This repository was never scanned."));
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.statusLineContent.soyTemplateName = 'bamboo.feature.specs.status.statusLineContent';
}


bamboo.feature.specs.status.scanningInProgress = function(opt_data, opt_ignored) {
  return '<span class="status-table__in-progress-icon">' + aui.icons.icon({icon: 'wait'}) + '</span>' + soy.$$escapeHtml("Scanning in progress...");
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.scanningInProgress.soyTemplateName = 'bamboo.feature.specs.status.scanningInProgress';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status-model.js' */
define("feature/specs-status/model",["backbone"],function(t){"use strict";return t.Model.extend({url:function(){return AJS.contextPath()+"/rest/api/latest/repository/"+this.getRepositoryId()+"/scan/status"},initialize:function(e){var s=this;this.set("repositoryId",e.repositoryId),this.reset(),this.logsCollection=new t.Collection,this.on("change",function(){return s.logsCollection.reset(s.get("specsLogs"))})},reset:function(){this.set({inProgress:!1,specsLogs:[]})},getRepositoryId:function(){return this.get("repositoryId")},isInProgress:function(){return!!this.get("inProgress")},setInProgress:function(t){this.set("inProgress",t)},getSpecsLogsCollection:function(){return this.logsCollection}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status-templates.js' */
define("feature/specs-status/templates",[],function(){"use strict";return bamboo.feature.specs.status});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-usages-view.js' */
define("feature/specs-configuration/specs-configuration-usages-view",["marionette"],function(e){"use strict";return e.ItemView.extend({className:"specs-configuration-usages",template:function(){var e;return(e=bamboo.feature.specs).usages.apply(e,arguments)},serializeData:function(){var e=this.model.getUsages(),s=e.projects,t=void 0===s?[]:s,i=e.deploymentProjects,o=void 0===i?[]:i,r=e.repositories;return{projects:t,deploymentProjects:o,repositories:void 0===r?[]:r,hideRepositories:this.model.isAllRepositoriesAccess(),hideProjects:this.model.isAllProjectsAccess()}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-layout-view.js' */
define("feature/specs-configuration/specs-configuration-layout-view",["marionette","feature/specs-configuration/specs-configuration-settings-view","feature/specs-configuration/specs-configuration-access-view","feature/specs-configuration/specs-configuration-usages-view"],function(e,s,c,t){"use strict";return e.LayoutView.extend({className:"specs-configuration",template:function(){var e;return(e=bamboo.feature.specs).layout.apply(e,arguments)},regions:{settings:".specs-configuration-settings-container",access:".specs-configuration-access-container",usages:".specs-configuration-usages-container"},modelEvents:{"change:scan":"onScanChange","change:allProjectsAccess":"onAllProjectsAccessChange","change:allRepositoriesAccess":"onAllRepositoriesAccessChange"},initialize:function(e){var s=e.endpoints,c=s.enableCi,t=s.enableAllProjectsAccessUrl,n=s.enableAllRepositoriesAccessUrl;this.enableCi=c,this.enableAllProjectsAccessUrl=t,this.enableAllRepositoriesAccessUrl=n},onRender:function(){this.showSettings(),this.toggleAccess(),this.toggleUsages()},onScanChange:function(){this.toggleAccess(),this.toggleUsages()},onAllProjectsAccessChange:function(){this.toggleUsages()},onAllRepositoriesAccessChange:function(){this.toggleUsages()},showSettings:function(){this.settings.show(new s({enableCi:this.enableCi,model:this.model}))},toggleAccess:function(){var e=this.model,s=this.access,t=this.enableAllProjectsAccessUrl,n=this.enableAllRepositoriesAccessUrl;e.isScanEnabled()?s.show(new c({enableAllProjectsAccessUrl:t,enableAllRepositoriesAccessUrl:n,model:e})):(e.setAllProjectsAccess(!1),e.setAllRepositoriesAccess(!1),s.reset())},toggleUsages:function(){var e=this.model,s=this.usages;!e.isScanEnabled()||e.isAllProjectsAccess()&&e.isAllRepositoriesAccess()?s.reset():s.show(new t({model:e}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration.soy' */
// This file was automatically generated from specs-configuration.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.specs.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.specs == 'undefined') { bamboo.feature.specs = {}; }


bamboo.feature.specs.layout = function(opt_data, opt_ignored) {
  return '' + aui.form.form({action: '#', extraClasses: 'specs-configuration-settings-container', content: ''}) + aui.form.form({action: '#', isTopLabels: true, extraClasses: 'specs-configuration-access-container', content: ''}) + '<div class="specs-configuration-usages-container"></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.layout.soyTemplateName = 'bamboo.feature.specs.layout';
}


bamboo.feature.specs.settings = function(opt_data, opt_ignored) {
  return '<tbody><tr><td class="specs-configuration-settings__header"><h3>' + soy.$$escapeHtml("Scan for Bamboo Specs") + '</h3><p class="description full-size">' + soy.$$escapeHtml("Allow Bamboo to scan this repository for YAML and Java Specs.") + '</p></td><td class="specs-configuration-settings__toggle-cell"><aui-toggle ' + ((opt_data.scan) ? 'checked="checked" ' : '') + 'class="specs-configuration-settings__toggle" label="' + soy.$$escapeHtml("Scan for Bamboo Specs") + '"></aui-toggle></td></tr>' + ((! opt_data.mailServerConfigured) ? '<tr class="specs-configuration-settings__mail-server-warning-row"><td colspan="2">' + bamboo.feature.specs.mailServerWarning(opt_data) + '</td></tr>' : '') + '</tbody>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.settings.soyTemplateName = 'bamboo.feature.specs.settings';
}


bamboo.feature.specs.mailServerWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({extraClasses: 'specs-configuration-settings__mail-server-warning', titleContent: "Email server not configured", content: '<p>' + soy.$$escapeHtml("Without an email server configured, we won\x27t be able to send you notifications about the status of your Bamboo Specs.") + '</p><p>' + ((opt_data.mailServerEditable) ? '<a class="mail-server-warning__link--active" href="' + soy.$$escapeHtml("") + '/admin/viewMailServer.action">' + soy.$$escapeHtml("Configure email server") + '</a>' : '<a class="mail-server-warning__link--passive" href="' + soy.$$escapeHtml("") + '/viewAdministrators.action">' + soy.$$escapeHtml("View administrators") + '</a>') + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.specs.mailServerWarning.soyTemplateName = 'bamboo.feature.specs.mailServerWarning';
}


bamboo.feature.specs.access = function(opt_data, opt_ignored) {
  return ((opt_data.showWebhookLink) ? '<h4>' + soy.$$escapeHtml("Setup webhook") + '</h4>' + bamboo.feature.specs.onboarding.dialog.showWebhookUrl({bambooBaseUrl: opt_data.bambooBaseUrl, repositoryId: opt_data.repositoryId, cssClass: 'code-full-width', webhookSetupDocumentationUrl: opt_data.webhookSetupDocumentationUrl, showSecuritySettingsHint: opt_data.showSecuritySettingsHint}) : '') + '<h3>' + soy.$$escapeHtml("Access") + '</h3><div class="description">' + soy.$$escapeHtml("This repository has access to projects and repositories listed below.") + '</div><div class="specs-configuration-projects-settings">' + aui.form.checkboxField({legendContent: '', fields: [{id: 'specs-configuration-all-projects', name: 'specs-configuration-all-projects', isChecked: opt_data.allProjectsAccess, isDisabled: ! opt_data.allProjectsEditable, labelText: "Access all projects", descriptionText: "Allows this repository to access all projects and to create new projects."}]}) + '</div><div class="specs-configuration-repositories-settings">' + aui.form.checkboxField({legendContent: '', fields: [{id: 'specs-configuration-all-repositories', name: 'specs-configuration-all-repositories', isChecked: opt_data.allRepositoriesAccess, isDisabled: ! opt_data.allRepositoriesEditable, labelText: "Access all repositories", descriptionText: "Allows this repository to access all linked repositories."}]}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.access.soyTemplateName = 'bamboo.feature.specs.access';
}


bamboo.feature.specs.usages = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.hideProjects) ? bamboo.feature.specs.usagesSection({heading: "Build projects", items: opt_data.projects, emptyRowLabel: "Bamboo Specs in this repository are not accessing any projects", extraClasses: 'specs-configuration-usages-table--build-projects'}) + bamboo.feature.specs.usagesSection({heading: "Deployment projects", items: opt_data.deploymentProjects, emptyRowLabel: "Bamboo Specs in this repository are not accessing any deployment projects", extraClasses: 'specs-configuration-usages-table--deployment-projects'}) : '') + ((! opt_data.hideRepositories) ? bamboo.feature.specs.usagesSection({heading: "Linked repositories", items: opt_data.repositories, emptyRowLabel: "Bamboo Specs in this repository are not accessing any other repositories", extraClasses: 'specs-configuration-usages-table--repositories'}) : '');
};
if (goog.DEBUG) {
  bamboo.feature.specs.usages.soyTemplateName = 'bamboo.feature.specs.usages';
}


bamboo.feature.specs.usagesSection = function(opt_data, opt_ignored) {
  var output = '<h4>' + soy.$$escapeHtml(opt_data.heading) + '</h4><table class="aui specs-configuration-usages-table ' + soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses : null) + '"><tbody>';
  if (opt_data.items.length > 0) {
    var itemList107 = opt_data.items;
    var itemListLen107 = itemList107.length;
    for (var itemIndex107 = 0; itemIndex107 < itemListLen107; itemIndex107++) {
      var itemData107 = itemList107[itemIndex107];
      output += '<tr class="repository-row"><td><a href="' + soy.$$escapeHtml(itemData107.url) + '">' + soy.$$escapeHtml(itemData107.name) + '</a></td></tr>';
    }
  } else {
    output += '<tr class="specs-configuration-usages-empty"><td>' + soy.$$escapeHtml(opt_data.emptyRowLabel) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.specs.usagesSection.soyTemplateName = 'bamboo.feature.specs.usagesSection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-settings-view.js' */
define("feature/specs-configuration/specs-configuration-settings-view",["aui","underscore","jquery","atlassian/libs/skate-0.12.6","marionette","aui/flag","util/help-links","feature/specs-onboarding-dialog"],function(e,o,t,s,i,n,a,r){"use strict";var c=function(){if(t("#dontshow").is(":checked")){var o=e.contextPath()+"/rest/pref/latest/user";t.post(o,{"bamboo.user.repository.specs.splashscreen.show":!1}),this.model.setShowOnboardingDialog(!1)}};return i.ItemView.extend({tagName:"table",className:"aui specs-configuration-settings",template:function(){var e;return(e=bamboo.feature.specs).settings.apply(e,arguments)},ui:{toggle:".specs-configuration-settings__toggle",mailServerWarning:".specs-configuration-settings__mail-server-warning-row"},events:{"change @ui.toggle":"scanChangeHandler"},onRender:function(){this.specsEnabled=!!this.ui.toggle.attr("checked"),this.toggleMailServerWarning()},toggleMailServerWarning:function(){this.model.isMailServerConfigured()||(this.model.isScanEnabled()?this.ui.mailServerWarning.show():this.ui.mailServerWarning.hide())},scanChangeHandler:function(){var o=this,s=this.ui.toggle.get(0),i=this.model.isShowOnboardingDialog();s.checked!==this.specsEnabled&&(s.busy=!0,t.ajax({url:this.options.enableCi,type:"PUT",contentType:"application/json",data:JSON.stringify({enable:s.checked})}).done(function(){o.specsEnabled=s.checked,s.checked&&(i?o.showOnboardingDialog():o.showFlag())}).fail(function(){var o=s.checked?"Could not enable Bamboo Specs for this repository. Try again.":"Could not disable Bamboo Specs for this repository. Try again.";s.checked=!s.checked,n({body:o,type:"error"})}).always(function(){s.busy=!1,o.model.setScanEnabled(o.specsEnabled),o.toggleMailServerWarning()}))},showFlag:function(){var o=e.format("\u003cb\u003eScanning for Bamboo specs\u003c/b\u003e has been enabled. To get you started, we\u0027\u0027ve prepared \u003ca href=\u0022{0}\u0022\u003eBamboo Specs documentation\u003c/a\u003e.",a.getHelpLink("bamboo.specs.help"));n({body:o,type:"success",close:"auto"})},showOnboardingDialog:function(){var t="PROJ";new r({repositoryId:this.model.getRepositoryId(),requiresWebhook:this.model.isShowWebhookLink(),bambooBaseUrl:this.model.getBambooBaseUrl(),bambooSpecsVersion:this.model.getBambooSpecsVersion(),webhookSetupDocumentationUrl:this.model.getWebhookSetupDocumentationUrl(),showSecuritySettingsHint:this.model.isShowSecuritySettingsHint(),onClose:o.bind(c,this),buildProjectKey:t,footerActionContent:bamboo.feature.specs.onboarding.dialog.dontShowAgain()}).show()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-model.js' */
define("feature/specs-configuration/specs-configuration-model",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{scan:!1,allProjectsAccess:!1,allProjectsEditable:!1,allRepositoriesAccess:!1,allRepositoriesEditable:!1,mailServerConfigured:!1,mailServerEditable:!1,repositoryId:null,requiresWebhook:!1,bambooBaseUrl:null,bambooSpecsVersion:null,webhookSetupDocumentationUrl:null,showSecuritySettingsHint:!1,showOnboardingDialog:!1,usages:{projects:[],deploymentProjects:[],repositories:[]}},isScanEnabled:function(){return this.get("scan")},setScanEnabled:function(e){this.set("scan",e)},isAllProjectsEditable:function(){return this.get("allProjectsEditable")},setAllProjectsEditable:function(e){this.set("allProjectsEditable",e)},isAllRepositoriesEditable:function(){return this.get("allRepositoriesEditable")},setAllRepositoriesEditable:function(e){this.set("allRepositoriesEditable",e)},isMailServerConfigured:function(){return this.get("mailServerConfigured")},isMailServerEditable:function(){return this.get("mailServerEditable")},isAllProjectsAccess:function(){return this.get("allProjectsAccess")},setAllProjectsAccess:function(e){this.set("allProjectsAccess",e)},isAllRepositoriesAccess:function(){return this.get("allRepositoriesAccess")},setAllRepositoriesAccess:function(e){this.set("allRepositoriesAccess",e)},getRepositoryId:function(){return this.get("repositoryId")},isShowWebhookLink:function(){return this.get("showWebhookLink")},getBambooBaseUrl:function(){return this.get("bambooBaseUrl")},getBambooSpecsVersion:function(){return this.get("bambooSpecsVersion")},getWebhookSetupDocumentationUrl:function(){return this.get("webhookSetupDocumentationUrl")},isShowSecuritySettingsHint:function(){return this.get("showSecuritySettingsHint")},isShowOnboardingDialog:function(){return this.get("showOnboardingDialog")},setShowOnboardingDialog:function(e){this.set("showOnboardingDialog",e)},getUsages:function(){return this.get("usages")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration.js' */
define("feature/specs-configuration",["feature/specs-configuration/specs-configuration-model","feature/specs-configuration/specs-configuration-layout-view"],function(e,o){"use strict";return function(s){var i=s.el,r=s.scan,t=s.allProjectsAccess,a=s.allProjectsEditable,n=s.allRepositoriesAccess,l=s.allRepositoriesEditable,c=s.usages,u=s.endpoints,b=s.mailServerConfigured,d=s.mailServerEditable,p=s.repositoryId,g=s.bambooBaseUrl,f=s.bambooSpecsVersion,m=s.showWebhookLink,S=s.webhookSetupDocumentationUrl,w=s.showOnboardingDialog,h=s.showSecuritySettingsHint,k=new e({scan:r,allProjectsAccess:t,allProjectsEditable:a,allRepositoriesAccess:n,allRepositoriesEditable:l,mailServerConfigured:b,mailServerEditable:d,usages:c,repositoryId:p,bambooBaseUrl:g,bambooSpecsVersion:f,showWebhookLink:m,webhookSetupDocumentationUrl:S,showOnboardingDialog:w,showSecuritySettingsHint:h});return new o({el:i,model:k,endpoints:u}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-access-view.js' */
define("feature/specs-configuration/specs-configuration-access-view",["aui","jquery","marionette","aui/flag"],function(e,s,a,t){"use strict";return a.ItemView.extend({className:"specs-configuration-projects",template:function(){var e;return(e=bamboo.feature.specs).access.apply(e,arguments)},ui:{allProjects:'[name="specs-configuration-all-projects"]',allRepositories:'[name="specs-configuration-all-repositories"]'},events:{"change @ui.allProjects":"allProjectsChangeHandler","change @ui.allRepositories":"allRepositoriesChangeHandler"},allProjectsChangeHandler:function(s){return this.changeHandler({event:s,url:this.options.enableAllProjectsAccessUrl,modelUpdateHandler:this.model.setAllProjectsAccess.bind(this.model),errorMessage:"Could not change repository access settings. Try again."})},allRepositoriesChangeHandler:function(s){return this.changeHandler({event:s,url:this.options.enableAllRepositoriesAccessUrl,modelUpdateHandler:this.model.setAllRepositoriesAccess.bind(this.model),errorMessage:"Could not change repository access settings. Try again."})},changeHandler:function(e){var a=e.event.currentTarget,r=a.checked;a.disabled=!0,s.ajax({url:e.url,type:"PUT",contentType:"application/json",data:JSON.stringify({enable:r})}).fail(function(){a.checked=!r,t({type:"error",body:e.errorMessage})}).always(function(){a.disabled=!1,e.modelUpdateHandler(a.checked)})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-list-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-list-view",["feature/specs-repositories-selection/specs-repositories-selection-list-item-view","feature/specs-repositories-selection/specs-repositories-selection-empty-list-view","marionette"],function(e,s,t){"use strict";return t.CompositeView.extend({className:"specs-repositories-selection-list",template:function(){var e;return(e=bamboo.page.project.specs.repositories).list.apply(e,arguments)},childViewContainer:"tbody",childView:e,emptyView:s,emptyViewOptions:function(){return{targetType:this.options.targetType}},childViewOptions:function(){return{destroy:this.options.sync===!0}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection.js' */
define("feature/specs-repositories-selection",["feature/specs-repositories-selection/specs-repositories-selection-layout-view"],function(e){"use strict";return function(t){var s=t.el,i=t.targetType,r=void 0===i?"project":i,n=t.sync,o=void 0===n||n,c=t.endpoints;return new e({el:s,sync:o,endpoints:void 0===c?{}:c,targetType:r}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-spinner-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-spinner-view",["marionette"],function(e){"use strict";return e.ItemView.extend({className:"specs-repositories-selection-spinner",template:!1,onShow:function(){this.$el.spin()},onDestroy:function(){this.$el.spinStop()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-list-item-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-list-item-view",["aui","marionette","aui/flag"],function(e,t,i){"use strict";return t.ItemView.extend({tagName:"tr",className:"specs-repositories-selection-list-item",template:function(){var e;return(e=bamboo.page.project.specs.repositories).listItem.apply(e,arguments)},ui:{remove:".specs-repositories-selection-remove",spinner:".specs-repositories-selection-remove-spinner"},events:{"click @ui.remove":"removeClickHandler"},removeClickHandler:function(e){e.preventDefault(),this.options.destroy?this.destroyEntry():this.removeEntry()},destroyEntry:function(){var t=this;this.ui.spinner.spin(),this.model.destroy({wait:!0}).fail(function(){t.ui.spinner.spinStop(),i({type:"error",body:"Could not remove repository from the list. Try again."})})},removeEntry:function(){this.model.collection.remove(this.model)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-layout-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-layout-view",["aui","feature/specs-repositories-selection/specs-repositories-selection-add-view","feature/specs-repositories-selection/specs-repositories-selection-spinner-view","feature/specs-repositories-selection/specs-repositories-selection-list-view","marionette","aui/flag"],function(e,s,o,i,t,n){"use strict";return t.LayoutView.extend({className:"specs-repositories-selection",template:function(){var e;return(e=bamboo.page.project.specs.repositories).layout.apply(e,arguments)},regions:{add:".specs-repositories-selection-add-container",list:".specs-repositories-selection-list-container"},onRender:function(){var t=this,r=this.options,c=r.sync,p=r.endpoints,a=r.targetType,l=p.add,d=p.search,u=p.list,f=new Backbone.Collection([],{url:u});this.add.show(new s({collection:f,add:l,search:d,sync:c})),this.list.show(new o),f.fetch().done(function(){t.list.show(new i({collection:f,sync:c,targetType:a}))}).fail(function(){n({type:"error",body:"Could not load the list of repositories. Try again."})})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-empty-list-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-empty-list-view",["marionette"],function(e){"use strict";return e.ItemView.extend({tagName:"tr",className:"specs-repositories-selection-empty-list",initialize:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.targetType=t[0].targetType},template:function(){return bamboo.page.project.specs.repositories.emptyList({targetType:this.targetType})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-add-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-add-view",["aui","jquery","marionette","aui/flag"],function(e,t,i,n){"use strict";return i.ItemView.extend({tagName:"form",className:"specs-repositories-selection-add aui",template:function(){var e;return(e=bamboo.page.project.specs.repositories).add.apply(e,arguments)},ui:{input:'[name="specs-repositories-selection-input"]',submit:'[type="submit"]'},events:{input:"toggleSubmit",change:"toggleSubmit",submit:"submitHandler"},onShow:function(){this.initSelect2(),this.toggleSubmit()},submitHandler:function(e){e.preventDefault();var t=this.options.sync,i=this.ui.input.select2("data");t?this.addAndSyncWithServer(i):this.addWithoutSyncingWithServer(i)},initSelect2:function(){var e=this.convertToSelect2Result.bind(this);this.ui.input.auiSelect2({multiple:!0,placeholder:"",formatResult:bamboo.page.project.specs.repositories.result,id:function(e){return e?e.id:void 0},initSelection:function(e,t){var i=e.select2("data"),n=e.val().split(",");t(i.filter(function(e){return n.indexOf(e.id)!==-1}))},ajax:{url:this.options.search,dataType:"json",quietMillis:250,data:function(e,t){return{"start-index":25*(t-1),"max-result":25,searchTerm:e}},results:function(t,i){var n=25*i<t.size;return{results:t.searchResults.map(e),more:n}}}})},toggleSubmit:function(e){var t=this.ui,i=t.submit,n=t.input;/true|false/.test(e)?i.prop("disabled",e):i.prop("disabled",0===n.select2("data").length)},convertToSelect2Result:function(e){var t=e.id,i=e.name,n=e.url,s=e.rssEnabled;return{id:String(t),text:i,url:n,rssEnabled:s}},convertFromSelect2Result:function(e){var t=e.id,i=e.text,n=e.url,s=e.rssEnabled;return{id:String(t),name:i,url:n,rssEnabled:s}},addWithoutSyncingWithServer:function(e){var t=this;0!==e.length&&(this.ui.input.select2("val","",!0),this.collection.add(e.map(function(e){return t.convertFromSelect2Result(e)})))},addAndSyncWithServer:function(i){var s=this;if(0!==i.length){var r=_.after(i.length,function(){var t=_.where(i,{isSaved:!0}),r=t.length;if(r){t.reverse().forEach(function(e){s.collection.add(s.convertFromSelect2Result(e),{at:0})});var o=void 0;o=1===r?e.format("\u003cb\u003e{0}\u003c/b\u003e has been added.",e.escapeHtml(t[0].text)):e.format("{0} repositories have been added.",r),n({type:"success",close:"auto",body:o})}var a=_.where(i,{isSaved:!1}),u=a.length;if(u){var c=void 0;c=1===u?e.format("Could not add \u003cb\u003e{0}\u003c/b\u003e. Try again.",e.escapeHtml(a[0].text)):e.format("Could not add {0} repositories. Try again.",u),n({type:"error",body:c})}s.ui.input.select2("val",a.length?_.pluck(a,"id"):"",!0),s.toggleSubmit()});this.toggleSubmit(!0),i.forEach(function(e){t.ajax({url:s.options.add,data:JSON.stringify({id:e.id}),contentType:"application/json",dataType:"json",type:"POST"}).done(function(){e.isSaved=!0}).fail(function(){e.isSaved=!1}).always(r)})}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection.soy' */
// This file was automatically generated from specs-repositories-selection.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.project.specs.repositories.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.project == 'undefined') { bamboo.page.project = {}; }
if (typeof bamboo.page.project.specs == 'undefined') { bamboo.page.project.specs = {}; }
if (typeof bamboo.page.project.specs.repositories == 'undefined') { bamboo.page.project.specs.repositories = {}; }


bamboo.page.project.specs.repositories.layout = function(opt_data, opt_ignored) {
  return '<div class="specs-repositories-selection-add-container"></div><div class="specs-repositories-selection-list-container"><div class="spinner"></div></div>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.layout.soyTemplateName = 'bamboo.page.project.specs.repositories.layout';
}


bamboo.page.project.specs.repositories.add = function(opt_data, opt_ignored) {
  return '<div>' + aui.form.input({type: 'text', name: 'specs-repositories-selection-input', extraClasses: 'full-width-field'}) + '</div><div class="specs-repositories-selection-add-cell">' + aui.buttons.button({text: "Add", type: 'primary', tagName: 'input', inputType: 'submit', id: 'add-repository-to-project'}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.add.soyTemplateName = 'bamboo.page.project.specs.repositories.add';
}


bamboo.page.project.specs.repositories.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.text) + ((! opt_data.rssEnabled) ? widget.lozenges.auilozenge({colour: 'current', text: "Scan for Bamboo Specs disabled", subtle: true, extraClasses: 'specs-disabled-lozenge'}) : '');
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.result.soyTemplateName = 'bamboo.page.project.specs.repositories.result';
}


bamboo.page.project.specs.repositories.list = function(opt_data, opt_ignored) {
  return '<table class="aui"><tbody></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.list.soyTemplateName = 'bamboo.page.project.specs.repositories.list';
}


bamboo.page.project.specs.repositories.listItem = function(opt_data, opt_ignored) {
  return '<td><a href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + soy.$$escapeHtml(opt_data.name) + '</a>' + ((! opt_data.rssEnabled) ? widget.lozenges.auilozenge({colour: 'current', text: "Scan for Bamboo Specs disabled", subtle: true, extraClasses: 'specs-disabled-lozenge'}) : '') + '<input type="hidden" name="repositoryIds" value="' + soy.$$escapeHtml(opt_data.id) + '" /></td><td><span class="specs-repositories-selection-remove-spinner"></span><a class="specs-repositories-selection-remove" href="#">' + aui.icons.icon({icon: 'remove', useIconFont: true}) + '</a></td>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.listItem.soyTemplateName = 'bamboo.page.project.specs.repositories.listItem';
}


bamboo.page.project.specs.repositories.emptyList = function(opt_data, opt_ignored) {
  return '' + ((opt_data.targetType == 'repository') ? '<td>' + soy.$$escapeHtml("No Bamboo Specs repositories granted access to this repository") + '</td>' : '<td>' + soy.$$escapeHtml("No Bamboo Specs repositories in this project") + '</td>');
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.emptyList.soyTemplateName = 'bamboo.page.project.specs.repositories.emptyList';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-class-names', location = 'src/js/aui/restful-table/class-names.js' */
("undefined"===typeof window?global:window).__4a2e769765f4ab9e5f71742ddd84535b=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",
DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",LOADING:"loading"};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-custom-create-view', location = 'src/js/aui/restful-table/custom-create-view.js' */
("undefined"===typeof window?global:window).__35d801328ff02c8c3d4fbca7b7df924e=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__fa226178965fdea8a278a23624815dae;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-custom-edit-view', location = 'src/js/aui/restful-table/custom-edit-view.js' */
("undefined"===typeof window?global:window).__54ad0917de71d3389dccfd464e30c7c5=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__fa226178965fdea8a278a23624815dae;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-custom-read-view', location = 'src/js/aui/restful-table/custom-read-view.js' */
("undefined"===typeof window?global:window).__04ee8e7cc5312c7bb39e5284e1f27ddd=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__fa226178965fdea8a278a23624815dae;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-data-keys', location = 'src/js/aui/restful-table/data-keys.js' */
("undefined"===typeof window?global:window).__f46d9d92b0201a145aaa5ec7a36988e3=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-serializetoobject', location = 'src/js-vendor/jquery/serializetoobject.js' */
("undefined"===typeof window?global:window).__1ce5cac3649657acdc49b957e1d702ff=function(){jQuery.fn.serializeObject=function(){var a={};this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),a[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)});this.find("input:radio:checked").each(function(){a[this.name]=this.value});this.find("select[multiple]").each(function(){var c=
jQuery(this),b=c.val();a[this.name]=c.data("aui-ss")?b?b[0]:"":null!==b?b:[]});return a};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-events', location = 'src/js/aui/restful-table/events.js' */
("undefined"===typeof window?global:window).__268119e0b2c231edeb5fd896f8396d00=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",
CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized",ROW_EDIT:"editRow"};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-throbber', location = 'src/js/aui/restful-table/throbber.js' */
("undefined"===typeof window?global:window).__635cd1b807a5b846b4ef14c2e6920f91=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return'<span class="aui-restfultable-throbber"></span>'};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-edit-row', location = 'src/js/aui/restful-table/edit-row.js' */
("undefined"===typeof window?global:window).__58efa91636d92d285fb02c0f345d80dc=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c=f(__bd7207540b95ff683caa1d3c0bfcc3d7);__1ce5cac3649657acdc49b957e1d702ff;var l=
f(__fa226178965fdea8a278a23624815dae),m=f(__4a2e769765f4ab9e5f71742ddd84535b),n=f(__f46d9d92b0201a145aaa5ec7a36988e3),o=f(__268119e0b2c231edeb5fd896f8396d00);f(__780f92e84f7b06d16e986a531e56e288);var p=f(__635cd1b807a5b846b4ef14c2e6920f91),j=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");g.default=l.default.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(a){this.$el=(0,c.default)(this.el);this._event=o.default;this.classNames=
m.default;this.dataKeys=n.default;this.columns=a.columns;this.isCreateRow=a.isCreateRow;this.allowReorder=a.allowReorder;this.events["click ."+this.classNames.CANCEL]="_cancel";this.delegateEvents();a.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=a.model,this.model=new this._modelClass);this.fieldFocusSelector=a.fieldFocusSelector;this.bind(this._event.CANCEL,function(){this.disabled=true}).bind(this._event.SAVE,function(a){this.disabled||this.submit(a)}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,
function(){this.$el.removeClass(this.classNames.FOCUSED);this.disable()}).bind(this._event.SUBMIT_STARTED,function(){this._submitStarted()}).bind(this._event.SUBMIT_FINISHED,function(){this._submitFinished()})},defaultColumnRenderer:function(a){if(!1!==a.allowEdit)return(0,c.default)("<input type='text' />").addClass("text").attr({name:a.name,value:a.value});if(a.value)return document.createTextNode(a.value)},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},
_handleKeyUpEvent:function(a){27===a.keyCode&&this.trigger(this._event.CANCEL)},_cancel:function(a){this.trigger(this._event.CANCEL);a.preventDefault();return this},_submitStarted:function(){this.submitting=!0;this.showLoading().disable().delegateEvents({});return this},_submitFinished:function(){this.submitting=!1;this.hideLoading().enable().delegateEvents(this.events);return this},_focus:function(a){this.hasFocus()||this.trigger(this._event.FOCUS,a.target.name);return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},
focus:function(a){this.enable();a?a=this.$el.find(this.fieldFocusSelector(a)):(a=this.$el.find(this.classNames.ERROR+":first"),a=0===a.length?this.$el.find(":input:text:first"):a.parent().find(":input"));this.$el.addClass(this.classNames.FOCUSED);a.focus().trigger("select");return this},disable:function(){var a,b;j&&(b=this.$el.find(":submit"),b.length&&(a=(0,c.default)("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(b.attr("class")).val(b.val()).data(this.dataKeys.ENABLED_SUBMIT,
b),b.replaceWith(a)));this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled");return this},enable:function(){var a,b;j&&(a=this.$el.find(this.classNames.SUBMIT),(b=a.data(this.dataKeys.ENABLED_SUBMIT))&&a.length&&a.replaceWith(b));this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled");return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);
return this},hasUpdates:function(){return!!this.mapSubmitParams(this.serializeObject())},serializeObject:function(){var a=this.$el;return a.serializeObject?a.serializeObject():a.serialize()},mapSubmitParams:function(a){return this.model.changedAttributes(a)},submit:function(a){var b=this,h;document.activeElement!==window&&(0,c.default)(document.activeElement).blur();if(this.isUpdateMode){if(h=this.mapSubmitParams(this.serializeObject()),!h)return b.trigger(b._event.CANCEL)}else this.model.clear(),
h=this.mapSubmitParams(this.serializeObject());this.trigger(this._event.SUBMIT_STARTED);this.model.save(h,{success:function(){b.isUpdateMode?b.trigger(b._event.UPDATED,b.model,a):(b.trigger(b._event.CREATED,b.model.toJSON()),b.model=new b._modelClass,b.render({errors:{},values:{}}),b.trigger(b._event.FOCUS));b.trigger(b._event.SUBMIT_FINISHED)},error:function(a,c,h){400===h.status&&(b.renderErrors(c.errors),b.trigger(b._event.VALIDATION_ERROR,c.errors));b.trigger(b._event.SUBMIT_FINISHED)},silent:!0});
return this},renderError:function(a,b){return(0,c.default)("<div />").attr("data-field",a).addClass(this.classNames.ERROR).text(b)},renderErrors:function(a){var b=this;this.$("."+this.classNames.ERROR).remove();a&&c.default.each(a,function(a,c){b.$el.find("[name='"+a+"']").closest("td").append(b.renderError(a,c))});return this},render:function(a){var b=this;this.$el.empty();this.allowReorder&&(0,c.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(b.$el);
c.default.each(this.columns,function(f,d){var e,i;e=a.values[d.id];var g=[{name:d.id,value:e,allowEdit:d.allowEdit},a.values,b.model];e&&b.$el.attr("data-"+d.id,e);e=b.isCreateRow&&d.createView?(new d.createView({model:b.model})).render(g[0]):d.editView?(new d.editView({model:b.model})).render(g[0]):b.defaultColumnRenderer.apply(b,g);i=(0,c.default)("<td />");"object"===("undefined"===typeof e?"undefined":k(e))&&e.done?e.done(function(a){i.append(a)}):i.append(e);d.styleClass&&i.addClass(d.styleClass);
i.appendTo(b.$el)});this.$el.append(this.renderOperations(a.update,a.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW);this.trigger(this._event.RENDER,this.$el,a.values);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this},renderOperations:function(a){var b=(0,c.default)('<td class="aui-restfultable-operations" />');a?b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append((0,
c.default)('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"}));return b.add((0,c.default)('<td class="aui-restfultable-status" />').append((0,p.default)()))}});return g=g["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-events', location = 'src/js/aui/events.js' */
("undefined"===typeof window?global:window).__59907a7fc051134760b1b5811454a768=function(){function d(a,b){h.trigger(a,b)}function f(a,b){h.bind(a,b)}function g(a,b,c){(0,i.default)(b).trigger(a,c);d(a,c);b.id&&d(b.id+"-"+a,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.triggerEvtForInst=b.triggerEvt=b.bindEvt=void 0;var a=__bd7207540b95ff683caa1d3c0bfcc3d7,i=a&&a.__esModule?a:{"default":a},c;if((a=__c88c0dc6258c37804917fb6a0e4092fa)&&a.__esModule)c=a;else{var e={};if(null!=
a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);e.default=a;c=e}var a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a},e=document||{},h=(0,i.default)(e);b.bindEvt=f=c.fn(f,"bindEvt",{sinceVersion:"5.8.0"});b.triggerEvt=d=c.fn(d,"triggerEvt",{sinceVersion:"5.8.0"});b.triggerEvtForInst=g=c.fn(g,"triggerEvtForInst",{sinceVersion:"5.8.0"});(0,a.default)("bindEvt",f);(0,a.default)("triggerEvt",d);(0,a.default)("triggerEvtForInst",g);b.bindEvt=f;b.triggerEvt=d;b.triggerEvtForInst=
g;return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-entry-model', location = 'src/js/aui/restful-table/entry-model.js' */
("undefined"===typeof window?global:window).__6c5b453ccaa493560e2194b7be89c7dc=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var i={};"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=f(__bd7207540b95ff683caa1d3c0bfcc3d7),m=__59907a7fc051134760b1b5811454a768,
j=f(__b8debe7dbacd8c0f9a68380b427aca10),h=f(__fa226178965fdea8a278a23624815dae),n=f(__268119e0b2c231edeb5fd896f8396d00),k=h.default.Model.extend({sync:function(a,b,c){var d=this,e=c.error;c.error=function(a){d._serverErrorHandler(a,this);e&&e.apply(this,arguments)};return h.default.sync.apply(h.default,arguments)},save:function(a,b){var b=b||{},c=this,d,e=b.error,f=b.success;b.error=function(a,b){var d=g.default.parseJSON(b.responseText||b.data);e&&e.call(c,c,d,b)};this.isNew()?h.default.Model.prototype.save.call(this,
a,b):a&&(d=k.extend({url:this.url()}),d=new d({id:this.id}),d.save=h.default.Model.prototype.save,b.success=function(a,b){c.clear().set(a.toJSON());f&&f.call(c,c,b)},d.save(a,b))},destroy:function(a){var a=a||{},b=this,c=this.url(),d;a.data&&(d=g.default.param(a.data));d&&d.length&&(c=c+"?"+d);g.default.ajax({url:c,type:"DELETE",dataType:"json",contentType:"application/json",success:function(d){b.collection&&b.collection.remove(b);a.success&&a.success.call(b,d)},error:function(d){b._serverErrorHandler(d,
this);a.error&&a.error.call(b,d)}});return this},changedAttributes:function(a){var b={},c=this.toJSON();g.default.each(a,function(a,e){c[a]?c[a]&&c[a]!==e&&("object"===("undefined"===typeof e?"undefined":l(e))?j.default.isEqual(e,c[a])||(b[a]=e):b[a]=e):"string"===typeof e?""!==g.default.trim(e)&&(b[a]=e):g.default.isArray(e)?0!==e.length&&(b[a]=e):b[a]=e});if(!j.default.isEmpty(b))return this.addExpand(b),b},addExpand:function(){},_serverErrorHandler:function(a,b){var c;400!==a.status&&(c=g.default.parseJSON(a.responseText||
a.data),(0,m.triggerEvtForInst)(n.default.SERVER_ERROR,this,[c,a,b]))},fetch:function(a){a=a||{};this.clear();h.default.Model.prototype.fetch.call(this,a)}});i.default=k;return i=i["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table-row', location = 'src/js/aui/restful-table/row.js' */
("undefined"===typeof window?global:window).__cf603d779ca91812af596b24a596ba8d=function(){function e(a){return a&&a.__esModule?a:{"default":a}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var b=e(__bd7207540b95ff683caa1d3c0bfcc3d7),j;var c=__aa116fc0f3815f1a600215af3b7b5390;if(c&&c.__esModule)j=c;else{var k={};if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(k[d]=c[d]);k.default=c;j=k}d=e(__fa226178965fdea8a278a23624815dae);var l=e(__4a2e769765f4ab9e5f71742ddd84535b),
m=e(__f46d9d92b0201a145aaa5ec7a36988e3),n=e(__268119e0b2c231edeb5fd896f8396d00);e(__780f92e84f7b06d16e986a531e56e288);var o=e(__635cd1b807a5b846b4ef14c2e6920f91);h.default=d.default.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(a){a=a||{};this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;this.allowEdit=a.allowEdit;this.allowDelete=a.allowDelete;if(!this.events["click .aui-restfultable-editable"])throw Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");
this.index=a.index||0;this.deleteConfirmation=a.deleteConfirmation;this.allowReorder=a.allowReorder;this.$el=(0,b.default)(this.el);this.bind(this._event.CANCEL,function(){this.disabled=!0}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.unfocus()}).bind(this._event.MODAL,function(){this.$el.addClass(this.classNames.ACTIVE)}).bind(this._event.MODELESS,function(){this.$el.removeClass(this.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+
this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(a){if(a.value)return document.createTextNode(a.value.toString())},sync:function(a){var b=this;this.model.addExpand(a);this.showLoading();this.model.save(a,{success:function(){b.hideLoading().render();b.trigger(b._event.UPDATED)},error:function(){b.hideLoading()}});return this},refresh:function(a,b){var c=this;this.showLoading();this.model.fetch({success:function(){c.hideLoading().render();a&&a.apply(this,arguments)},error:function(){c.hideLoading();
b&&b.apply(this,arguments)}});return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){(0,b.default)(this.el).addClass(this.classNames.FOCUSED);return this},unfocus:function(){(0,b.default)(this.el).removeClass(this.classNames.FOCUSED);return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);return this},edit:function(a){a=(0,b.default)(a.target).is("."+
this.classNames.EDITABLE)?(0,b.default)(a.target).attr("data-field-name"):(0,b.default)(a.target).closest("."+this.classNames.EDITABLE).attr("data-field-name");this.trigger(this._event.ROW_EDIT,a);return this},renderOperations:function(){var a=this;if(!1!==this.allowDelete)return(0,b.default)("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(b){b.preventDefault();a.destroy()})},destroy:function(){if(this.deleteConfirmation){var a=
j.popup(400,200,"delete-entity-"+this.model.get("id"));a.element.html(this.deleteConfirmation(this.model.toJSON()));a.show();a.element.find(".cancel").click(function(){a.hide()});a.element.find("form").submit(function(b){a.hide();this.model.destroy();b.preventDefault()}.bind(this))}else this.model.destroy()},render:function(){var a=this,c=this.model.toJSON(),e=(0,b.default)("<td class='aui-restfultable-operations' />").append(this.renderOperations({},c)),d=(0,b.default)("<td class='aui-restfultable-status' />").append((0,
o.default)());this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.LOADING+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty();this.allowReorder&&(0,b.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(a.$el);this.$el.attr("data-id",this.model.id);b.default.each(this.columns,function(e,f){var g,d=(0,b.default)("<td />");g=c[f.id];var i=f.fieldName||f.id,h=[{name:i,value:g,allowEdit:f.allowEdit},
c,a.model];g&&a.$el.attr("data-"+f.id,g);g=f.readView?(new f.readView({model:a.model})).render(h[0]):a.defaultColumnRenderer.apply(a,h);if(!1!==a.allowEdit&&!1!==f.allowEdit){if(i=(0,b.default)("<span />").addClass(a.classNames.EDITABLE).append('<span class="aui-icon aui-icon-small aui-iconfont-edit"></span>').append(g).attr("data-field-name",i),d=(0,b.default)("<td />").append(i).appendTo(a.$el),!g||""==b.default.trim(g))d.addClass(a.classNames.NO_VALUE),i.html((0,b.default)("<em />").text(this.emptyText||
"Enter value"))}else d.append(g);f.styleClass&&d.addClass(f.styleClass);d.appendTo(a.$el)});this.$el.append(e).append(d).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY);this.trigger(this._event.RENDER,this.$el,c);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this}});return h=h["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-restful-table', location = 'src/js/aui/restful-table.js' */
("undefined"===typeof window?global:window).__faba917abf230557f26a83033eae4ec6=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function j(a,b,c){(0,e.default)(b).trigger(a,c);(0,e.default)(document).trigger(a,c);b.id&&(a=b.id+"_"+a,(0,e.default)(document).trigger(a,c))}var m={};"use strict";Object.defineProperty(m,"__esModule",{value:!0});var e=f(__bd7207540b95ff683caa1d3c0bfcc3d7),n;var h=__2f5c294b01e66b15309518e39bcb949d;if(h&&h.__esModule)n=h;else{var k={};if(null!=h)for(var l in h)Object.prototype.hasOwnProperty.call(h,
l)&&(k[l]=h[l]);k.default=h;n=k}var o=f(__fa226178965fdea8a278a23624815dae),r=f(__4a2e769765f4ab9e5f71742ddd84535b);l=f(__35d801328ff02c8c3d4fbca7b7df924e);var h=f(__54ad0917de71d3389dccfd464e30c7c5),k=f(__04ee8e7cc5312c7bb39e5284e1f27ddd),s=f(__f46d9d92b0201a145aaa5ec7a36988e3),t=f(__58efa91636d92d285fb02c0f345d80dc),p=f(__6c5b453ccaa493560e2194b7be89c7dc),u=f(__268119e0b2c231edeb5fd896f8396d00),w=f(__9a668cbde1e182d8e721c23580356df2);f(__780f92e84f7b06d16e986a531e56e288);var q=f(__cf603d779ca91812af596b24a596ba8d),
v=f(__635cd1b807a5b846b4ef14c2e6920f91),g=o.default.View.extend({initialize:function(a){var b=this;b.options=e.default.extend(!0,b._getDefaultOptions(a),a);b.id=this.options.id;b._event=u.default;b.classNames=r.default;b.dataKeys=s.default;this.$table=(0,e.default)(a.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);this.$table.wrapAll("<form class='aui' action='#' />");this.$thead=(0,e.default)("<thead/>");this.$theadRow=
(0,e.default)("<tr />").appendTo(this.$thead);this.$tbody=(0,e.default)("<tbody/>");if(!this.$table.length)throw Error("RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw Error("RestfulTable: Init failed! You haven't provided any columns to render.");this.showGlobalLoading();this.options.columns.forEach(function(a){var d=e.default.isFunction(a.header)?a.header():a.header;"undefined"===typeof d&&(n.warn("You have not specified [header] for column ["+
a.id+"]. Using id for now..."),d=a.id);b.$theadRow.append("<th>"+d+"</th>")});b.$theadRow.append("<th></th><th></th>");this._models=this._createCollection();this._rowClass=this.options.views.row;this.editRows=[];this.$table.closest("form").submit(function(a){b.focusedRow&&b.focusedRow.trigger(b._event.SAVE);a.preventDefault()});this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(a,d){var i=(0,e.default)("<div/>").attr("class",
d.attr("class")).addClass(b.classNames.MOVEABLE);d.children().each(function(){var a=(0,e.default)(this),b=parseInt(0+a.css("border-left-width"),10),c=parseInt(0+a.css("border-right-width"),10),b=a[0].clientWidth+b+c;i.append((0,e.default)("<div/>").html(a.html()).attr("class",a.attr("class")).width(b))});i=(0,e.default)("<div class='aui-restfultable-readonly'/>").append(i);i.css({left:d.offset().left});i.appendTo(document.body);return i},start:function(a,d){var i=d.helper[0].clientHeight,f=d.placeholder.find("td");
d.item.addClass(b.classNames.MOVEABLE).children().each(function(a){(0,e.default)(this).width(f.eq(a).width())});var g='<td colspan="'+b.getColumnCount()+'">&nbsp;</td>';d.placeholder.html(g).css({height:i,visibility:"visible"});b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(a,d){if((0,e.default)(d.item[0]).is(":visible"))d.item.removeClass(b.classNames.MOVEABLE).children().attr("style",""),d.placeholder.removeClass(b.classNames.ROW),b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)},
update:function(a,d){var e={row:b.getRowFromElement(d.item[0]),item:d.item,nextItem:d.item.next(),prevItem:d.item.prev()};b.move(e)},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8E3}),this.$tbody.bind("selectstart mousedown",function(a){return!(0,e.default)(a.target).is("."+b.classNames.DRAG_HANDLE)}));!1!==this.options.allowCreate&&(this._createRow=(new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return b.options.resources.self}}),
cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder,fieldFocusSelector:this.options.fieldFocusSelector})).bind(this._event.CREATED,function(a){b.options.addPosition==void 0&&b.options.createPosition==="bottom"||b.options.addPosition==="bottom"?b.addRow(a):b.addRow(a,0)}).bind(this._event.VALIDATION_ERROR,function(){this.trigger(b._event.FOCUS)}).render({errors:{},values:{}}),this.$create=(0,e.default)('<tbody class="'+this.classNames.CREATE+
'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._event.FOCUS));this._models.bind("remove",function(a){b.getRows().forEach(function(d){if(d.model===a){d.hasFocus()&&b._createRow&&b._createRow.trigger(b._event.FOCUS);b.removeRow(d)}})});this.fetchInitialResources()},fetchInitialResources:function(){var a=this;e.default.isFunction(this.options.resources.all)?this.options.resources.all(function(b){a.populate(b)}):e.default.get(this.options.resources.all,
function(b){a.populate(b)})},move:function(a){var b=this,c=function(a){return a.length?{after:b.getRowFromElement(a).model.url()}:{position:"First"}};a.row&&(c=b.options.reverseOrder?c(a.nextItem):c(a.prevItem),e.default.ajax({url:a.row.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(c),complete:function(){a.row.hideLoading()},success:function(a){j(b._event.REORDER_SUCCESS,b,[a])},error:function(a){var c=e.default.parseJSON(a.responseText||a.data);
j(b._event.SERVER_ERROR,b,[c,a,this])}}),a.row.showLoading())},_createCollection:function(){var a=this;return new (this.options.Collection.extend({sort:function(b){b||(b={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.tableRows=a.getRows();this.models=this.sortBy(this.comparator,this);this.tableRows=void 0;b.silent||this.trigger("refresh",this,b);return this},remove:function(b,c){this.tableRows=a.getRows();o.default.Collection.prototype.remove.apply(this,arguments);
this.tableRows=void 0;return this}}))([],{comparator:function(b){var c;(this&&void 0!==this.tableRows?this.tableRows:a.getRows()).some(function(a,e){if(a.model.id===b.id)return c=e,!0});return c}})},populate:function(a){this.options.reverseOrder&&a.reverse();this.hideGlobalLoading();a&&a.length?(this._models.reset([],{silent:!0}),this.renderRows(a),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg();this.$table.append(this.$thead);"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):
this.$table.append(this.$create).append(this.$tbody);this.$table.removeClass(this.classNames.LOADING).trigger(this._event.INITIALIZED,[this]);j(this._event.INITIALIZED,this,[this]);this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){this.$loading||(this.$loading=(0,e.default)('<div class="aui-restfultable-init">'+(0,v.default)()+'<span class="aui-restfultable-loading">'+this.options.loadingMsg+"</span></div>"));this.$loading.is(":visible")||this.$loading.insertAfter(this.$table);
return this},hideGlobalLoading:function(){this.$loading&&this.$loading.remove();return this},addRow:function(a,b){var c,d;if(!a.id)throw Error("RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(a));d=new this.options.model(a);c=this._renderRow(d,b);this._models.add(d);this.removeNoEntriesMsg();j(this._event.ROW_ADDED,this,[c,this]);return this},removeRow:function(a){this._models.remove(a.model);a.remove();
this.isEmpty()&&this.showNoEntriesMsg();j(this._event.ROW_REMOVED,this,[a,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){var a=2;this.allowReorder&&++a;return this.options.columns.length+a},getRowFromElement:function(a){return(0,e.default)(a).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){this.$noEntries&&
this.$noEntries.remove();this.$noEntries=(0,e.default)("<tr>").addClass(this.classNames.NO_ENTRIES).append((0,e.default)("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody);return this},removeNoEntriesMsg:function(){this.$noEntries&&0<this._models.length&&this.$noEntries.remove();return this},getRows:function(){var a=this,b=[];this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var c=(0,e.default)(this).data(a.dataKeys.ROW_VIEW);c&&b.push(c)});
return b},_renderRow:function(a,b){var c=this,d=this.$tbody.find("."+this.classNames.READ_ONLY),e,f;f=new this._rowClass({model:a,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmation:this.options.deleteConfirmation});this.removeNoEntriesMsg();f.bind(this._event.ROW_EDIT,function(a){j(this._event.EDIT_ROW,{},[this,c]);c.edit(this,a)});e=f.render().$el;-1!==b&&("number"===typeof b&&0!==d.length?e.insertBefore(d[b]):
this.$tbody.append(e));e.data(this.dataKeys.ROW_VIEW,f);f.bind(this._event.MODAL,function(){c.$table.removeClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("disable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents({})})});f.bind(this._event.MODELESS,function(){c.$table.addClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("enable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents()})});this._applyFocusCoordinator(f);this.trigger(this._event.ROW_INITIALIZED,
f);return f},isRowBeingEdited:function(a){var b=!1;this.editRows.some(function(c){if(c.el===a.el)return b=!0});return b},_applyFocusCoordinator:function(a){var b=this;a.hasFocusBound||(a.hasFocusBound=!0,a.bind(this._event.FOCUS,function(){b.focusedRow&&b.focusedRow!==a&&b.focusedRow.trigger(b._event.BLUR);b.focusedRow=a;a instanceof q.default&&b._createRow&&b._createRow.enable()}));return this},_removeEditRow:function(a){a=e.default.inArray(a,this.editRows);this.editRows.splice(a,1);return this},
_shiftFocusAfterEdit:function(){0<this.editRows.length?this.editRows[this.editRows.length-1].trigger(this._event.FOCUS):this._createRow&&this._createRow.trigger(this._event.FOCUS);return this},_saveEditRowOnBlur:function(){return 1>=this.editRows.length},dismissEditRows:function(){this.editRows.forEach(function(a){a.hasUpdates()||a.trigger(this._event.FINISHED_EDITING)},this)},edit:function(a,b){var c=this,d=new this.options.views.editRow({el:a.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,
fieldFocusSelector:this.options.fieldFocusSelector,model:a.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),e=a.model.toJSON();e.update=!0;d.render({errors:{},update:!0,values:e}).bind(c._event.UPDATED,function(b,d){c._removeEditRow(this);this.unbind();a.render().delegateEvents();a.trigger(c._event.UPDATED);!1!==d&&c._shiftFocusAfterEdit()}).bind(c._event.VALIDATION_ERROR,function(){this.trigger(c._event.FOCUS)}).bind(c._event.FINISHED_EDITING,function(){c._removeEditRow(this);
a.render().delegateEvents();this.unbind()}).bind(c._event.CANCEL,function(){c._removeEditRow(this);this.unbind();a.render().delegateEvents();c._shiftFocusAfterEdit()}).bind(c._event.BLUR,function(){c.dismissEditRows();c._saveEditRowOnBlur()&&this.trigger(c._event.SAVE,!1)});this._applyFocusCoordinator(d);d.trigger(c._event.FOCUS,b);c._createRow&&c._createRow.disable();this.editRows.push(d);return d},renderRows:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],c=this._models.comparator,
d=[];this._models.comparator=void 0;b=b.map(function(b){b=new a.options.model(b);d.push(a._renderRow(b,-1).el);return b});this._models.add(b,{silent:!0});this._models.comparator=c;this.removeNoEntriesMsg();this.$tbody.append(d);return this},_getDefaultOptions:function(a){return{model:a.model||p.default,allowEdit:!0,views:{editRow:t.default,row:q.default},Collection:o.default.Collection.extend({url:a.resources.self,model:a.model||p.default}),allowReorder:!1,fieldFocusSelector:function(a){return":input[name="+
a+"], #"+a},loadingMsg:a.loadingMsg||"Loading"}}});g.ClassNames=r.default;g.CustomCreateView=l.default;g.CustomEditView=h.default;g.CustomReadView=k.default;g.DataKeys=s.default;g.EditRow=t.default;g.EntryModel=p.default;g.Events=u.default;g.Row=q.default;g.Throbber=v.default;(0,w.default)("RestfulTable",g);m.default=g;return m=m["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-restfultable', location = '/util/restfultable/bamboo-restfultable-model.js' */
define("util/restfultable/bamboo-restfultable-model",["jquery"],function(e){"use strict";return AJS.RestfulTable.EntryModel.extend({save:function(t,r){var s=r.error;r.error=_.bind(function(t,r,l){400===l.status?(r.errors&&r.errors.length&&this.trigger(AJS.RestfulTable.Events.SERVER_ERROR,l),r={errors:r},l.responseText=JSON.stringify({errors:e.parseJSON(l.responseText||l.data)})):this.trigger(AJS.RestfulTable.Events.SERVER_ERROR,l),s&&s.call(this,t,r,l)},this),AJS.RestfulTable.EntryModel.prototype.save.apply(this,[t,r])},fetch:function(e){e.cache=!1,AJS.RestfulTable.EntryModel.prototype.fetch.call(this,e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-restfultable', location = '/util/restfultable/bamboo-restfultable.js' */
define("util/restfultable/bamboo-restfultable",["underscore","aui"],function(e,t){"use strict";return t.RestfulTable.extend({refresh:function(){var t=this;t.getModels().fetch({success:function(){e.forEach(t.getRows(),function(e){e.render()})}})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-capabilities-autocomplete.js' */
define("feature/requirements-table/requirements-table-capabilities-autocomplete",["jquery","underscore","aui","widget/autocomplete-ajax"],function(t,e,a,i){"use strict";return i.extend({initialize:function(s){s=t.extend({placeholder:"Search for a capability"},s||{}),this.params=s.params||{},s.params&&delete s.params;var r=e.bind(function(e,a){this.lastTerm=e;var i=Math.max((a-1)*this.params["max-results"],0),s={searchTerm:e,"start-index":i};return i>0&&(s.lastGroup=this.data.lastGroup),t.extend(s,this.params)},this),n={minimumInputLength:0,ajax:{url:a.contextPath()+"/rest/api/latest/capability/groupedListing",dataType:"json",data:r,results:e.bind(function(e,i){if(!e.hasExactMatch&&this.lastTerm.length){var s=[{value:"New custom requirement",isGroup:!0},{key:t.trim(this.lastTerm),value:t.trim(this.lastTerm)}];e.capabilities=s.concat(e.capabilities)}return this.processData({more:!!e&&e.size>i*this.params["max-results"],results:e.capabilities,lastGroup:e.lastGroup})},this)},id:function(t){return t.key}};i.prototype.initialize.apply(this,[t.extend(n,s||{})])},onInitSelection:function(t,e){t.val().length&&this.settings.selected&&e(this.settings.selected)},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.requirements.table.columnCapabilities({item:t})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.requirements.table.columnCapabilities({item:t})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-object-by-string-view.js' */
define("feature/requirements-table/requirements-table-object-by-string-view",["aui","underscore"],function(e,t){"use strict";return e.RestfulTable.CustomReadView.extend({render:function(e){return this.getObjectByString(this.model.toJSON(),e.name)},getObjectByString:function(e,n){return t.reduce(n.split("."),function(e,t){return e[t]},e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-match-value-edit-view.js' */
define("feature/requirements-table/requirements-table-match-value-edit-view",["jquery","aui","feature/requirements-table/requirements-table-match-type-edit-view"],function(e,t,a){"use strict";return t.RestfulTable.CustomEditView.extend({render:function(t){var i=soy.renderAsElement(bamboo.feature.requirements.table.columnMatchValueEdit,{id:this.cid+"matchValue",value:t.value,name:t.name});this.listenTo(this.model,"update:matchType",this.toggleInput,this);var r=this.model.isNew()?a.prototype.labels[0].val:this.model.get("matchType");return i=this.toggleInput(r,e(i))},toggleInput:function(a,i){return a&&(i||(i=e('input[id="'+this.cid+'matchValue"]')),i.toggleClass("hidden","EXISTS"===a).parents("tr:first").find("."+t.RestfulTable.ClassNames.ERROR).remove(),"MATCHES"===a?i.after(bamboo.feature.requirements.table.columnMatchRegex()):i.parent().find(".description").remove()),i}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table.soy' */
// This file was automatically generated from requirements-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.requirements.table.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.requirements == 'undefined') { bamboo.feature.requirements = {}; }
if (typeof bamboo.feature.requirements.table == 'undefined') { bamboo.feature.requirements.table = {}; }


bamboo.feature.requirements.table.columnOperations = function(opt_data, opt_ignored) {
  return '<span><a href="' + soy.$$escapeHtml("") + '/admin/agent/viewCapabilityKey.action?capabilityKey=' + soy.$$escapeHtml(opt_data.detailsKey) + '">' + soy.$$escapeHtml("Details") + '</a>' + ((opt_data.showDelete) ? '<span class="hideInConfigReadOnlyMode"> | <a href="#" class="aui-restfultable-delete">' + soy.$$escapeHtml("Delete") + '</a></span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.columnOperations.soyTemplateName = 'bamboo.feature.requirements.table.columnOperations';
}


bamboo.feature.requirements.table.columnMatchRegex = function(opt_data, opt_ignored) {
  return '<div class="description">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("A \x3ca href\x3d\x22http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html\x22 target\x3d\x22_blank\x22\x3eregular expression\x3c/a\x3e describing a pattern that the key must match.")) + '</div>';
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.columnMatchRegex.soyTemplateName = 'bamboo.feature.requirements.table.columnMatchRegex';
}


bamboo.feature.requirements.table.columnNoAgents = function(opt_data, opt_ignored) {
  return '' + widget.lozenges.auilozenge({colour: 'current', text: "No agents", subtle: true, title: "No available agent can build this job."});
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.columnNoAgents.soyTemplateName = 'bamboo.feature.requirements.table.columnNoAgents';
}


bamboo.feature.requirements.table.columnImagesAgents = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.text);
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.columnImagesAgents.soyTemplateName = 'bamboo.feature.requirements.table.columnImagesAgents';
}


bamboo.feature.requirements.table.columnCapabilityEdit = function(opt_data, opt_ignored) {
  return '<input type="text" class="capability-select text" value="' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '" name="' + soy.$$escapeHtml(opt_data.name) + '">';
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.columnCapabilityEdit.soyTemplateName = 'bamboo.feature.requirements.table.columnCapabilityEdit';
}


bamboo.feature.requirements.table.columnMatchValueEdit = function(opt_data, opt_ignored) {
  return '<input type="text" class="text" id="' + soy.$$escapeHtml(opt_data.id) + '" value="' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '" name="' + soy.$$escapeHtml(opt_data.name) + '">';
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.columnMatchValueEdit.soyTemplateName = 'bamboo.feature.requirements.table.columnMatchValueEdit';
}


bamboo.feature.requirements.table.columnCapabilities = function(opt_data, opt_ignored) {
  return '' + ((opt_data.item && opt_data.item.value) ? soy.$$escapeHtml(opt_data.item.value) : '');
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.columnCapabilities.soyTemplateName = 'bamboo.feature.requirements.table.columnCapabilities';
}


bamboo.feature.requirements.table.deleteConfirmaton = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: "Warning", content: '<p>' + soy.$$escapeHtml("You are about to delete the selected required capability. Are you sure you want to continue?") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.requirements.table.deleteConfirmaton.soyTemplateName = 'bamboo.feature.requirements.table.deleteConfirmaton';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-match-type-edit-view.js' */
define("feature/requirements-table/requirements-table-match-type-edit-view",["jquery","underscore","aui"],function(e,t,a){"use strict";return a.RestfulTable.CustomEditView.extend({labels:[{val:"EXISTS",text:"exists"},{val:"EQUALS",text:"equals"},{val:"MATCHES",text:"matches"}],render:function(a){var n=e(document.createElement("select")).attr("name",a.name).addClass("select");return t.each(this.labels,function(t){n.append(e(document.createElement("option")).attr("value",t.val).text(t.text))}),a.value?n.val(a.value):n.val(this.labels[0].val),n}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-images-agents-view.js' */
define("feature/requirements-table/requirements-table-images-agents-view",["feature/requirements-table/requirements-table-object-by-string-view"],function(e){"use strict";return e.extend({render:function(e){return soy.renderAsElement(bamboo.feature.requirements.table.columnImagesAgents,{text:this.getObjectByString(this.model.toJSON(),e.name),key:this.model.get("key")})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-capability-view.js' */
define("feature/requirements-table/requirements-table-capability-view",["aui"],function(e){"use strict";return e.RestfulTable.CustomEditView.extend({render:function(){var e=this.model.get("readonlyData");if(e&&e.requirementLabel)return e.requirementLabel}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table.js' */
define("feature/requirements-table/requirements-table",["jquery","underscore","aui","util/restfultable/bamboo-restfultable","util/restfultable/bamboo-restfultable-model","feature/requirements-table/requirements-table-row","feature/requirements-table/requirements-table-edit-row"],function(e,t,s,i,l,r,a){"use strict";return s.RestfulTable.Events.CHANGED="changed",i.extend({defaults:{model:l,noEntriesMsg:"No requirements specified for job. This job can be built by any agents.",deleteConfirmation:!0,allowReorder:!1,autoFocus:!0,views:{row:r,editRow:a}},initialize:function(i){this.defaults.el=this.$el;var l=t.defaults(i||{},this.defaults);s.RestfulTable.prototype.initialize.apply(this,[l]);var r=t.bind(function(){this.trigger(s.RestfulTable.Events.CHANGED)},this);return this.$el.on(s.RestfulTable.Events.INITIALIZED,r),e(this).on(s.RestfulTable.Events.ROW_REMOVED,r),this.getCreateRow().on(s.RestfulTable.Events.CREATED,r),this.on(s.RestfulTable.Events.ROW_INITIALIZED,function(e){e.on(s.RestfulTable.Events.UPDATED,r)}),this.$el.on("change","select",t.bind(function(t){var s=e(t.target).parents("tr:first").data("id");(s?this.getModels().get(s):this.getCreateRow().model).trigger("update:matchType",e(t.target).val()),t.stopPropagation(),t.preventDefault()},this)),this}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-match-type-view.js' */
define("feature/requirements-table/requirements-table-match-type-view",["aui"],function(e){"use strict";return e.RestfulTable.CustomEditView.extend({labels:{EXISTS:"exists",EQUALS:"equals",MATCHES:"matches"},render:function(e){return this.labels[e.value]}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-edit-row.js' */
define("feature/requirements-table/requirements-table-edit-row",["jquery","underscore","aui","feature/requirements-table/requirements-table-capabilities-autocomplete","util/errors"],function(e,t,r,i,n){"use strict";return r.RestfulTable.EditRow.extend({initialize:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];r.RestfulTable.EditRow.prototype.initialize.apply(this,t),this.model.on(r.RestfulTable.Events.SERVER_ERROR,function(e){n(e,e.status)}),this.bind(r.RestfulTable.Events.BLUR,function(){this.isCreateRow||this.trigger(this._event.CANCEL)}),this.bind(r.RestfulTable.Events.SAVE,function(){this.isCreateRow||(this.disabled=!1)})},renderOperations:function(e){for(var t,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];var a=(t=r.RestfulTable.EditRow.prototype.renderOperations).call.apply(t,[this,e].concat(n));return e||a.find("input:submit").addClass("aui-button-primary"),a},renderErrors:function(r){return this.$el.find("."+this.classNames.ERROR).remove(),r.fieldErrors&&t.each(t.keys(r.fieldErrors),t.bind(function(t){var i=e.trim(r.fieldErrors[t].join(" "));i.length&&this.$el.find('[name="'+t+'"]').closest("td").append(this.renderError(t,i))},this)),this},render:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.RestfulTable.EditRow.prototype.render.apply(this,t);var s=this.$el.find('input[name="key"]');if(s.length){var a=this.model.toJSON(),l=null;a.key&&a.readonlyData.requirementLabel&&(l={value:a.readonlyData.requirementLabel,key:a.key}),new i({el:s,selected:l})}return this}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-row.js' */
define("feature/requirements-table/requirements-table-row",["jquery","underscore","aui","widget/dialog"],function(e,t,a,i){"use strict";return a.RestfulTable.Row.extend({initialize:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];a.RestfulTable.Row.prototype.initialize.apply(this,i);var l=this.model.toJSON();l.operations&&!t.isUndefined(l.operations.canEdit)&&(this.allowEdit=!!l.operations.canEdit,this.allowEdit||this.$el.addClass("readonly"))},renderOperations:function(){var a=this.model.toJSON();if(a.operations){var i=a.operations.canDelete&&this.allowDelete!==!1,n=e(bamboo.feature.requirements.table.columnOperations({showDelete:i,detailsKey:a.key}));return i&&n.find(".aui-restfultable-delete").click(t.bind(function(e){e.preventDefault(),this.destroy()},this)),n}},render:function(){for(var e=a.RestfulTable.Row.prototype.render.call(this),t=0;this.columns.length>t;t+=1){var i=this.columns[t],n=null;if(i.className&&(n=e.$el.find("td:eq("+t+")"),n.addClass(i.className)),"matchType"===i.id&&"EXISTS"===this.model.get("matchType")){(n?n.next():e.$el.find("td:eq("+(t+1)+")")).find("*").remove()}if("readonlyData.matchingAgents"===i.id){var l=this.model.get("readonlyData");if(!l.matchingAgents&&!l.matchingImages){var o=e.$el.find("td:eq("+t+")"),r=o.next();!r.hasClass("aui-restfultable-operations")&&(o.attr("colspan",2),r.remove()),o.html(bamboo.feature.requirements.table.columnNoAgents()).find(".aui-lozenge ").tooltip()}}}return e},destroy:function(){this.deleteConfirmation?new i({header:"Delete a required capability",content:bamboo.feature.requirements.table.deleteConfirmaton(),height:260,width:600,buttons:[{id:"confirm",label:"Confirm",cssClass:"aui-button aui-button-primary requirement-delete-confirm-btn",params:{self:this},callback:function(e,t){t.self.model.destroy(),this.dialog.remove()}},{id:"cancel",label:"Cancel",cssClass:"requirement-delete-cancel-btn",type:"link"}]}):this.model.destroy()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-requirements-table', location = '/feature/requirements-table/requirements-table-capability-edit-view.js' */
define("feature/requirements-table/requirements-table-capability-edit-view",["aui"],function(e){"use strict";return e.RestfulTable.CustomEditView.extend({render:function(e){return soy.renderAsElement(bamboo.feature.requirements.table.columnCapabilityEdit,{name:e.name,value:e.value})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-requirements', location = '/page/requirements/requirements.js' */
define("page/requirements/requirements",["jquery","underscore","aui","backbone","feature/requirements-table/requirements-table-capability-view","feature/requirements-table/requirements-table-capability-edit-view","feature/requirements-table/requirements-table-match-type-view","feature/requirements-table/requirements-table-match-type-edit-view","feature/requirements-table/requirements-table-match-value-edit-view","feature/requirements-table/requirements-table-object-by-string-view","feature/requirements-table/requirements-table-images-agents-view","feature/requirements-table/requirements-table","util/ajax"],function(e,t,i,a,r,n,s,l,u,m,o,h,d){"use strict";return a.View.extend({buildTableConfig:function(){return{key:"",columns:[{id:"key",readView:r,editView:n,header:"Required capability",className:"row-capability"},{id:"matchType",readView:s,editView:l,className:"row-match-type",header:""},{id:"matchValue",editView:u,className:"row-match-value",header:""},{id:"readonlyData.ownerName",readView:m,header:"Required by task",className:"row-owner-name",allowEdit:!1},{id:"readonlyData.matchingAgents",readView:o,header:"Agents",className:"row-matching-agents",allowEdit:!1},{id:"readonlyData.matchingImages",readView:o,header:"Images",className:"row-matching-images",allowEdit:!1}]}},initialize:function(a){this.settings=a,this.settings.urlPath=[i.contextPath(),"rest/api/latest/config/job",this.settings.key,"requirement"].join("/"),this.settings.url=t.bind(function(e){d(this.settings.urlPath).then(e)},this);var r=this.buildTableConfig();this.settings.hideImages&&r.columns.pop(),this.$el.html(bamboo.page.requirements.panel()),this.$info=this.$el.find(".requirements-info"),this.table=new h(e.extend(r,{el:this.$el.find(".requirements-table"),resources:{all:this.settings.url,self:this.settings.urlPath}})),this.listenTo(this.table,i.RestfulTable.Events.CHANGED,this.updateInfo,this),this.$el.on("click",".jsTooltip",function(a){a.preventDefault();var r=i.InlineDialog(e(this),void 0,e(this).data("tooltip"),{offsetX:-60});t.defer(function(){r.show()})})},updateInfo:function(){d(this.settings.urlPath+"/summary").then(t.bind(function(e){this.$info.html(bamboo.page.requirements.info(t.defaults({planKey:this.settings.key},e)))},this))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-requirements', location = '/page/requirements/requirements.soy' */
// This file was automatically generated from requirements.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.requirements.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.requirements == 'undefined') { bamboo.page.requirements = {}; }


bamboo.page.requirements.panel = function(opt_data, opt_ignored) {
  return '<div class="requirements"><div class="requirements-info"></div><table class="requirements-table"></table></div>';
};
if (goog.DEBUG) {
  bamboo.page.requirements.panel.soyTemplateName = 'bamboo.page.requirements.panel';
}


bamboo.page.requirements.info = function(opt_data, opt_ignored) {
  return '<div class="description">' + ((opt_data.requirementsCount == 0) ? soy.$$escapeHtml("This job can be built by any agent because it has no requirements.") : (opt_data.requirementsCount == 1) ? soy.$$escapeHtml("This job can only be built by agents whose capabilities meet the 1 requirement below.") : soy.$$escapeHtml(AJS.format("This job can only be built by agents whose capabilities meet the {0} requirements below.",opt_data.requirementsCount))) + '</div>' + ((opt_data.matchingAgentsCount == 0 && ! opt_data.isElasticBambooEnabled || opt_data.matchingAgentsCount == 0 && opt_data.matchingImagesCount == 0) ? aui.message.warning({titleContent: "This job can not be built.", content: '' + ((opt_data.hasDedicatedExecutors == true) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("None of the dedicated agents or dedicated elastic images meet this job\x27\x27s requirements. \x3ca href\x3d\x22{0}\x22\x3eSee Agents Summary\x3c/a\x3e",typeof ("" + '/agent/viewAgents.action?planKey=' + opt_data.planKey) === 'number' ? "" + '/agent/viewAgents.action?planKey=' + opt_data.planKey : soy.$$escapeHtml("" + '/agent/viewAgents.action?planKey=' + opt_data.planKey)))) : (opt_data.matchingAgentsCount == 0 && ! opt_data.isElasticBambooEnabled) ? soy.$$escapeHtml("No agents meet this job\x27s requirements.") : (opt_data.matchingAgentsCount == 0 && opt_data.matchingImagesCount == 0) ? soy.$$escapeHtml("No agents or elastic images meet this job\x27s requirements.") : '') + bamboo.page.requirements.configureLinks(opt_data)}) : (opt_data.onlineEnabledAgentsCount == 0 && ! opt_data.isElasticBambooEnabled || opt_data.matchingImagesCount == 0 && opt_data.onlineEnabledAgentsCount == 0) ? bamboo.page.requirements.content(opt_data) + aui.message.warning({titleContent: "All agents that meet the requirements of this job are currently offline or disabled.", content: '' + bamboo.page.requirements.configureLinks(opt_data)}) : bamboo.page.requirements.content(opt_data));
};
if (goog.DEBUG) {
  bamboo.page.requirements.info.soyTemplateName = 'bamboo.page.requirements.info';
}


bamboo.page.requirements.content = function(opt_data, opt_ignored) {
  return '<dl class="details-list"><dt> ' + soy.$$escapeHtml("Can build on") + '</dt><dd>' + ((opt_data.matchingAgentsCount > 0) ? '<a href="' + soy.$$escapeHtml("") + '/agent/viewAgents.action?planKey=' + soy.$$escapeHtml(opt_data.planKey) + '">' + ((opt_data.matchingAgentsCount == 1) ? soy.$$escapeHtml("1 agent") : soy.$$escapeHtml(AJS.format("{0} agents",opt_data.matchingAgentsCount))) + '</a>' + aui.icons.icon({icon: 'info', useIconFont: true, extraClasses: 'jsTooltip', extraAttributes: {'data-tooltip': "" + '/ajax/viewAgentsMatchingRequirementsForJob.action?planKey=' + opt_data.planKey}}) + ((opt_data.onlineEnabledAgentsCount != opt_data.matchingAgentsCount) ? ' ' + ((opt_data.onlineEnabledAgentsCount == 0) ? soy.$$escapeHtml("(none online)") : soy.$$escapeHtml(AJS.format("({0} online)",opt_data.onlineEnabledAgentsCount))) : '') : soy.$$escapeHtml("No agents")) + '</dd>' + ((opt_data.isElasticBambooEnabled) ? '<dd>' + ((opt_data.matchingImagesCount > 0) ? '<a href="' + soy.$$escapeHtml("") + '/agent/viewAgents.action?planKey=' + soy.$$escapeHtml(opt_data.planKey) + '">' + ((opt_data.matchingImagesCount == 1) ? soy.$$escapeHtml("1 elastic image") : soy.$$escapeHtml(AJS.format("{0} elastic images",opt_data.matchingImagesCount))) + '</a>' + aui.icons.icon({icon: 'info', useIconFont: true, extraClasses: 'jsTooltip', extraAttributes: {'data-tooltip': "" + '/ajax/viewImagesMatchingRequirementsForJob.action?planKey=' + opt_data.planKey}}) : soy.$$escapeHtml("No elastic images")) + '</dd>' : '') + '</dl>';
};
if (goog.DEBUG) {
  bamboo.page.requirements.content.soyTemplateName = 'bamboo.page.requirements.content';
}


bamboo.page.requirements.configureLinks = function(opt_data, opt_ignored) {
  return '' + ((opt_data.canConfigureAgents || opt_data.canConfigureImages) ? '<p>' + ((opt_data.canConfigureAgents) ? '<a href="' + soy.$$escapeHtml("") + '/admin/agent/configureAgents!doDefault.action">' + soy.$$escapeHtml("Configure agents") + '</a>' + ((opt_data.canConfigureImages) ? ' ' + soy.$$escapeHtml("or") + ' ' : '') : '') + ((opt_data.canConfigureImages) ? '<a href="' + soy.$$escapeHtml("") + '/admin/elastic/image/configuration/viewElasticImageConfigurations.action">' + soy.$$escapeHtml("Manage elastic images") + '</a>' : '') + '</p>' : '');
};
if (goog.DEBUG) {
  bamboo.page.requirements.configureLinks.soyTemplateName = 'bamboo.page.requirements.configureLinks';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-feature-discovery-dialog', location = '/widget/feature-discovery-dialog/feature-discovery-dialog.js' */
define("widget/feature-discovery-dialog",["underscore","backbone","jquery","util/preferences"],function(e,t,n,i){"use strict";return t.View.extend({events:{"click .close":"close"},initialize:function(){this.shouldDisplay()&&this.open(),n(window).resize(e.debounce(this.realign.bind(this),500))},shouldDisplay:function(){return!i.getBoolean(this.options.preferenceKey)},open:function(){this.$el.attr("open","")},close:function(){this.$el.removeAttr("open"),i.getBoolean(this.options.preferenceKey)||i.setValue(this.options.preferenceKey,!0)},realign:function(){void 0!==this.$el.attr("open")&&this.$el.removeAttr("open").attr("open","")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-plan-branches', location = '/page/plan-branches/plan-branches.js' */
BAMBOO.BRANCHES={},BAMBOO.BRANCHES.EditChainBranchDetails=function(e){"use strict";var n=AJS.$,t={controls:{form:null,integrationEnabled:null,integrationStrategy:null,gateKeeperCheckoutBranch:null,gateKeeperPushBranch:null,integrationStrategies:".integration-strategy",pullRequestsBranchUpdaterMergeFrom:null,branchesBranchUpdaterMergeFrom:null}},r=n.extend(!0,t,e),a={form:null,integrationStrategy:null,gateKeeperPushBranch:null},o={MANUAL:"manually",PR:"pr",NEW_VCS_BRANCH:"new_vcs_branch",NEW_MATCHING_VCS_BRANCH:"matching_vcs_branch"},i=function(){var e=n(this).find("option:selected").text();a.gateKeeperPushBranch.text(e)},c=function(){a.integrationStrategy.each(function(){var e=n(this);e.closest(r.controls.integrationStrategies).toggleClass("active",e.is(":checked"))})},l=function(){n(this).is(":checked")&&(a.integrationStrategy.is(":checked")||a.integrationStrategy.filter(":first").prop("checked",!0),c())},h=function(){n(this).find(r.controls.integrationStrategy).prop("checked",!0),c()},s=void 0,d=function(e){if(!s){s=WRM.data.claim("bamboo.web.resources:bamboo-js.branch-workflow-integration-strategies")}return s[e]||[]},g=function(e){e===o.PR?(a.pullRequestsBranchUpdaterMergeFrom.show(),a.branchesBranchUpdaterMergeFrom.hide()):(a.branchesBranchUpdaterMergeFrom.show(),a.pullRequestsBranchUpdaterMergeFrom.hide())},u=function(e){var t=function(n){return e.indexOf(n.val())>-1},r=a.integrationStrategy.filter(":checked");t(r)||(a.integrationStrategy.filter(function(){return t(n(this))}).first().click(),a.integrationEnabled.is(":checked")&&a.integrationEnabled.click()),a.integrationStrategy.each(function(){var e=n(this),r=e.closest(".integration-strategy");t(e)?r.show():r.hide()})},f=function(){var e=a.planBranchCreation;switch(e.attr("type")){case"radio":return e.filter(":checked").val();case"hidden":return e.val();default:return null}},p=function(){var e=f(),n=d(e);u(n),g(e)},m=void 0,B=function(){m=f()},v=function(){var e=f(),n=m;p(),B(),e!==o.MANUAL&&n===o.MANUAL&&(a.removedBranchCleanUp.prop("checked",!0).change(),a.inactiveBranchCleanUp.prop("checked",!0).change())};return{init:function(){a.form=n(r.controls.form),a.integrationEnabled=a.form.find(r.controls.integrationEnabled),a.integrationStrategy=a.form.find(r.controls.integrationStrategy),a.gateKeeperPushBranch=a.form.find(r.controls.gateKeeperPushBranch),a.planBranchCreation=a.form.find(r.controls.planBranchCreation),a.removedBranchCleanUp=a.form.find(r.controls.removedBranchCleanUp),a.inactiveBranchCleanUp=a.form.find(r.controls.inactiveBranchCleanUp),a.branchesBranchUpdaterMergeFrom=a.form.find(r.controls.branchesBranchUpdaterMergeFrom).parent(),a.pullRequestsBranchUpdaterMergeFrom=a.form.find(r.controls.pullRequestsBranchUpdaterMergeFrom).parent(),a.integrationStrategy.click(c),a.form.find(r.controls.gateKeeperCheckoutBranch).change(i).each(i),a.form.find(r.controls.integrationEnabled).change(l).each(l),a.form.find(r.controls.integrationStrategies).click(h),a.planBranchCreation.change(v),B(),p()}}},BAMBOO.BRANCHES.BranchesSplashScreen=function(e){"use strict";var n=void 0,t={content:null,contentId:"branch-splash-content",dialog:{width:688,height:480,id:"branch-splash",keypressListener:function(e){e.which===jQuery.ui.keyCode.ESCAPE&&n.remove()}},templates:{dontShowCheckbox:null}},r=void 0,a=void 0;return{init:function(o){r=e.extend(!0,t,o);var i=function(){n.remove()};n=new AJS.Dialog(r.dialog).addHeader("Building branches").addPanel("",e("<div />",{html:r.content,id:r.contentId})).addButton("Close",i),a=e(AJS.template.load(r.templates.dontShowCheckbox).toString()).prependTo(e(n.page[0].element).find(".dialog-button-panel")).find("input:checkbox"),n.show();var c=function(n,t){if(t.dialog.id===r.dialog.id&&a.is(":checked")){var o=AJS.contextPath()+"/rest/pref/latest/user";e.post(o,{"bamboo.user.branches.splashscreen.hide":!0})}};e(window).bind("remove.dialog",c)}}}(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-create', location = '/feature/branch-create/branch-create.soy' */
// This file was automatically generated from branch-create.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.branchCreate.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.branchCreate == 'undefined') { bamboo.feature.branchCreate = {}; }


bamboo.feature.branchCreate.chooseBranch = function(opt_data, opt_ignored) {
  return '' + aui.form.fieldGroup({content: '' + aui.form.label({forField: 'branchesForCreation', content: "Branch name", isRequired: true}) + aui.form.input({id: 'branchesForCreation', type: 'text', extraClasses: 'text long-field', name: 'branchesForCreation', isRequired: true}) + ((opt_data.errors && opt_data.errors['branchesForCreation']) ? aui.form.fieldError({message: opt_data.errors['branchesForCreation'][0]}) : '')});
};
if (goog.DEBUG) {
  bamboo.feature.branchCreate.chooseBranch.soyTemplateName = 'bamboo.feature.branchCreate.chooseBranch';
}


bamboo.feature.branchCreate.row = function(opt_data, opt_ignored) {
  return aui.icons.icon({icon: 'devtools-branch', useIconFont: true}) + ' ' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.feature.branchCreate.row.soyTemplateName = 'bamboo.feature.branchCreate.row';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-create', location = '/feature/branch-create/branch-create-dialog.js' */
define("feature/branch-create/dialog",["jquery","marionette","feature/branch-create/branch-autocomplete"],function(t,e,n){"use strict";return e.ItemView.extend({tagName:"div",template:!1,initialize:function(){var e=this;t(this.getOption("manualSwitch")).on("click",function(){return e.switchToManual()}),t(this.getOption("autoSwitch")).on("click",function(){return e.switchToAuto()})},onRender:function(){new n({url:this.getOption("fetchBranchesUrl"),el:this.el,errors:this.getOption("errors")}).render()},switchToAuto:function(){t(this.getOption("autoBranchTab")).show().removeClass("hidden"),t(this.getOption("manualBranchTab")).hide().addClass("hidden"),t(this.getOption("creationTypeInput")).val("AUTO")},switchToManual:function(){t(this.getOption("autoBranchTab")).hide().addClass("hidden"),t(this.getOption("manualBranchTab")).show().removeClass("hidden"),t(this.getOption("creationTypeInput")).val("MANUAL")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-create', location = '/feature/branch-create/branch-autocomplete.js' */
define("feature/branch-create/branch-autocomplete",["underscore","jquery","marionette"],function(e,r,t){"use strict";return t.ItemView.extend({template:bamboo.feature.branchCreate.chooseBranch,serializeData:function(){return{errors:this.options.errors}},ui:{input:"#branchesForCreation"},onRender:function(){var r="";this.ui.input.auiSelect2({ajax:{url:this.options.url,dataType:"json",quietMillis:250,cache:!0,data:function(e){return r=e||"",{}},results:function(e){return{results:e.branches.branch.filter(function(e){return e.name.toUpperCase().indexOf(r.toUpperCase())>-1})}}},placeholder:"Choose the branch name",minimumResultsForSearch:0,multiple:!0,separator:"~",id:function(e){return e.name},formatResult:function(r){return e.isEmpty(r)?"":bamboo.feature.branchCreate.row({item:r})},formatSelection:function(r){return e.isEmpty(r)?"":bamboo.feature.branchCreate.row({item:r})}})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.3.3-factory', location = 'factories/backbone/1.3.3/backbone-1.3.3-factory.js' */
'use strict';(function(x){define("atlassian/libs/factories/backbone-1.3.3",function(){return function(h,d){return x({},{},h,d).noConflict()}})})(function(x,h,d,k){var K=x.Backbone,B=Array.prototype.slice;h.VERSION="1.3.3";h.$=k;h.noConflict=function(){x.Backbone=K;return this};h.emulateHTTP=!1;h.emulateJSON=!1;var L=function(a,b,c){switch(a){case 1:return function(){return d[b](this[c])};case 2:return function(a){return d[b](this[c],a)};case 3:return function(a,f){return d[b](this[c],C(a,this),f)};
case 4:return function(a,f,g){return d[b](this[c],C(a,this),f,g)};default:return function(){var a=B.call(arguments);a.unshift(this[c]);return d[b].apply(d,a)}}},p=function(a,b,c){d.each(b,function(b,f){d[f]&&(a.prototype[f]=L(b,f,c))})},C=function(a,b){return d.isFunction(a)?a:d.isObject(a)&&!b._isModel(a)?M(a):d.isString(a)?function(b){return b.get(a)}:a},M=function(a){var b=d.matches(a);return function(a){return b(a.attributes)}};k=h.Events={};var D=/\s+/,v=function(a,b,c,e,f){var g=0,t;if(c&&"object"===
typeof c)for(void 0!==e&&("context"in f)&&void 0===f.context&&(f.context=e),t=d.keys(c);g<t.length;g++)b=v(a,b,t[g],c[t[g]],f);else if(c&&D.test(c))for(t=c.split(D);g<t.length;g++)b=a(b,t[g],e,f);else b=a(b,c,e,f);return b};k.on=function(a,b,c){return E(this,a,b,c)};var E=function(a,b,c,e,f){a._events=v(N,a._events||{},b,c,{context:e,ctx:a,listening:f});f&&((a._listeners||(a._listeners={}))[f.id]=f);return a};k.listenTo=function(a,b,c){if(!a)return this;var e=a._listenId||(a._listenId=d.uniqueId("l")),
f=this._listeningTo||(this._listeningTo={}),g=f[e];g||(g=this._listenId||(this._listenId=d.uniqueId("l")),g=f[e]={obj:a,objId:e,id:g,listeningTo:f,count:0});E(a,b,c,this,g);return this};var N=function(a,b,c,e){if(c){b=a[b]||(a[b]=[]);var f=e.context,d=e.ctx;(e=e.listening)&&e.count++;b.push({callback:c,context:f,ctx:f||d,listening:e})}return a};k.off=function(a,b,c){if(!this._events)return this;this._events=v(O,this._events,a,b,{context:c,listeners:this._listeners});return this};k.stopListening=function(a,
b,c){var e=this._listeningTo;if(!e)return this;a=a?[a._listenId]:d.keys(e);for(var f=0;f<a.length;f++){var g=e[a[f]];if(!g)break;g.obj.off(b,c,this)}return this};var O=function(a,b,c,e){if(a){var f=0,g=e.context;e=e.listeners;if(b||c||g){for(var t=b?[b]:d.keys(a);f<t.length;f++){b=t[f];var h=a[b];if(!h)break;for(var q=[],k=0;k<h.length;k++){var l=h[k];c&&c!==l.callback&&c!==l.callback._callback||g&&g!==l.context?q.push(l):(l=l.listening)&&0===--l.count&&(delete e[l.id],delete l.listeningTo[l.objId])}q.length?
a[b]=q:delete a[b]}return a}for(a=d.keys(e);f<a.length;f++)l=e[a[f]],delete e[l.id],delete l.listeningTo[l.objId]}};k.once=function(a,b,c){var e=v(F,{},a,b,d.bind(this.off,this));"string"===typeof a&&null==c&&(b=void 0);return this.on(e,b,c)};k.listenToOnce=function(a,b,c){b=v(F,{},b,c,d.bind(this.stopListening,this,a));return this.listenTo(a,b)};var F=function(a,b,c,e){if(c){var f=a[b]=d.once(function(){e(b,f);c.apply(this,arguments)});f._callback=c}return a};k.trigger=function(a){if(!this._events)return this;
for(var b=Math.max(0,arguments.length-1),c=Array(b),e=0;e<b;e++)c[e]=arguments[e+1];v(Q,this._events,a,void 0,c);return this};var Q=function(a,b,c,e){if(a){c=a[b];var f=a.all;c&&f&&(f=f.slice());c&&G(c,e);f&&G(f,[b].concat(e))}return a},G=function(a,b){var c,e=-1,f=a.length,d=b[0],h=b[1],y=b[2];switch(b.length){case 0:for(;++e<f;)(c=a[e]).callback.call(c.ctx);break;case 1:for(;++e<f;)(c=a[e]).callback.call(c.ctx,d);break;case 2:for(;++e<f;)(c=a[e]).callback.call(c.ctx,d,h);break;case 3:for(;++e<f;)(c=
a[e]).callback.call(c.ctx,d,h,y);break;default:for(;++e<f;)(c=a[e]).callback.apply(c.ctx,b)}};k.bind=k.on;k.unbind=k.off;d.extend(h,k);var w=h.Model=function(a,b){var c=a||{};b||(b={});this.cid=d.uniqueId(this.cidPrefix);this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(c=this.parse(c,b)||{});var e=d.result(this,"defaults");c=d.defaults(d.extend({},e,c),e);this.set(c,b);this.changed={};this.initialize.apply(this,arguments)};d.extend(w.prototype,k,{changed:null,validationError:null,
idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return d.clone(this.attributes)},sync:function(){return h.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!d.iteratee(a,this)(this.attributes)},set:function(a,b,c){if(null==a)return this;if("object"===typeof a){var e=a;c=b}else(e={})[a]=b;c||(c={});if(!this._validate(e,c))return!1;var f=
c.unset;a=c.silent;var g=[],h=this._changing;this._changing=!0;h||(this._previousAttributes=d.clone(this.attributes),this.changed={});var y=this.attributes,k=this.changed,P=this._previousAttributes,l;for(l in e)b=e[l],d.isEqual(y[l],b)||g.push(l),d.isEqual(P[l],b)?delete k[l]:k[l]=b,f?delete y[l]:y[l]=b;this.idAttribute in e&&(this.id=this.get(this.idAttribute));if(!a)for(g.length&&(this._pending=c),b=0;b<g.length;b++)this.trigger("change:"+g[b],this,y[g[b]],c);if(h)return this;if(!a)for(;this._pending;)c=
this._pending,this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b=this._changing?this._previousAttributes:
this.attributes,c={},e;for(e in a){var f=a[e];d.isEqual(b[e],f)||(c[e]=f)}return d.size(c)?c:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return d.clone(this._previousAttributes)},fetch:function(a){a=d.extend({parse:!0},a);var b=this,c=a.success;a.success=function(e){var f=a.parse?b.parse(e,a):e;if(!b.set(f,a))return!1;c&&c.call(a.context,b,e,a);b.trigger("sync",b,e,a)};z(this,a);return this.sync("read",this,a)},
save:function(a,b,c){if(null==a||"object"===typeof a){var e=a;c=b}else(e={})[a]=b;c=d.extend({validate:!0,parse:!0},c);var f=c.wait;if(e&&!f){if(!this.set(e,c))return!1}else if(!this._validate(e,c))return!1;var g=this,h=c.success,k=this.attributes;c.success=function(a){g.attributes=k;var b=c.parse?g.parse(a,c):a;f&&(b=d.extend({},e,b));if(b&&!g.set(b,c))return!1;h&&h.call(c.context,g,a,c);g.trigger("sync",g,a,c)};z(this,c);e&&f&&(this.attributes=d.extend({},k,e));a=this.isNew()?"create":c.patch?"patch":
"update";"patch"!==a||c.attrs||(c.attrs=e);a=this.sync(a,this,c);this.attributes=k;return a},destroy:function(a){a=a?d.clone(a):{};var b=this,c=a.success,e=a.wait,f=function(){b.stopListening();b.trigger("destroy",b,b.collection,a)};a.success=function(d){e&&f();c&&c.call(a.context,b,d,a);b.isNew()||b.trigger("sync",b,d,a)};var g=!1;this.isNew()?d.defer(a.success):(z(this,a),g=this.sync("delete",this,a));e||f();return g},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||
H();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$\x26/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},d.extend({},a,{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=d.extend({},this.attributes,a);a=this.validationError=this.validate(a,b)||null;if(!a)return!0;
this.trigger("invalid",this,a,d.extend(b,{validationError:a}));return!1}});p(w,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var A=h.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,d.extend({silent:!0},b))},R={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1},I=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var e=Array(a.length-
c),f=b.length,d;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;d<f;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};d.extend(A.prototype,k,{model:w,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return h.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.extend({merge:!1},b,S))},remove:function(a,b){b=d.extend({},b);var c=!d.isArray(a);a=c?[a]:a.slice();a=this._removeModels(a,b);!b.silent&&a.length&&(b.changes={added:[],
merged:[],removed:a},this.trigger("update",this,b));return c?a[0]:a},set:function(a,b){if(null!=a){b=d.extend({},R,b);b.parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);var c=!d.isArray(a);a=c?[a]:a.slice();var e=b.at;null!=e&&(e=+e);e>this.length&&(e=this.length);0>e&&(e+=this.length+1);var f=[],g=[],h=[],k=[],q={},r=b.add,l=b.merge,v=b.remove,p=!1,w=this.comparator&&null==e&&!1!==b.sort,x=d.isString(this.comparator)?this.comparator:null,n;for(n=0;n<a.length;n++){var m=a[n];var u=this.get(m);u?
(l&&m!==u&&(m=this._isModel(m)?m.attributes:m,b.parse&&(m=u.parse(m,b)),u.set(m,b),h.push(u),w&&!p&&(p=u.hasChanged(x))),q[u.cid]||(q[u.cid]=!0,f.push(u)),a[n]=u):r&&(m=a[n]=this._prepareModel(m,b))&&(g.push(m),this._addReference(m,b),q[m.cid]=!0,f.push(m))}if(v){for(n=0;n<this.length;n++)m=this.models[n],q[m.cid]||k.push(m);k.length&&this._removeModels(k,b)}q=!1;f.length&&!w&&r&&v?(q=this.length!==f.length||d.some(this.models,function(a,b){return a!==f[b]}),this.models.length=0,I(this.models,f,0),
this.length=this.models.length):g.length&&(w&&(p=!0),I(this.models,g,null==e?this.length:e),this.length=this.models.length);p&&this.sort({silent:!0});if(!b.silent){for(n=0;n<g.length;n++)null!=e&&(b.index=e+n),m=g[n],m.trigger("add",m,this,b);(p||q)&&this.trigger("sort",this,b);if(g.length||k.length||h.length)b.changes={added:g,removed:k,merged:h},this.trigger("update",this,b)}return c?a[0]:a}},reset:function(a,b){b=b?d.clone(b):{};for(var c=0;c<this.models.length;c++)this._removeReference(this.models[c],
b);b.previousModels=this.models;this._reset();a=this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,d.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,d.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return B.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[this.modelId(a.attributes||
a)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){0>a&&(a+=this.length);return this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw Error("Cannot sort a set without a comparator");a||(a={});var c=b.length;d.isFunction(b)&&(b=d.bind(b,this));1===c||d.isString(b)?this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("sort",this,a);
return this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=d.extend({parse:!0},a);var b=a.success,c=this;a.success=function(e){c[a.reset?"reset":"set"](e,a);b&&b.call(a.context,c,e,a);c.trigger("sync",c,e,a)};z(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};var c=b.wait;a=this._prepareModel(a,b);if(!a)return!1;c||this.add(a,b);var e=this,f=b.success;b.success=function(a,b,d){c&&e.add(a,d);f&&f.call(d.context,a,b,d)};a.save(null,b);return a},parse:function(a,
b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?d.clone(b):{};b.collection=this;a=new this.model(a,b);if(!a.validationError)return a;this.trigger("invalid",this,a.validationError,b);return!1},_removeModels:function(a,
b){for(var c=[],e=0;e<a.length;e++){var d=this.get(a[e]);if(d){var g=this.indexOf(d);this.models.splice(g,1);this.length--;delete this._byId[d.cid];var h=this.modelId(d.attributes);null!=h&&delete this._byId[h];b.silent||(b.index=g,d.trigger("remove",d,this,b));c.push(d);this._removeReference(d,b)}}return c},_isModel:function(a){return a instanceof w},_addReference:function(a,b){this._byId[a.cid]=a;b=this.modelId(a.attributes);null!=b&&(this._byId[b]=a);a.on("all",this._onModelEvent,this)},_removeReference:function(a,
b){delete this._byId[a.cid];b=this.modelId(a.attributes);null!=b&&delete this._byId[b];this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,e){if(b){if(("add"===a||"remove"===a)&&c!==this)return;"destroy"===a&&this.remove(b,e);if("change"===a){var d=this.modelId(b.previousAttributes()),g=this.modelId(b.attributes);d!==g&&(null!=d&&delete this._byId[d],null!=g&&(this._byId[g]=b))}}this.trigger.apply(this,arguments)}});p(A,{forEach:3,each:3,map:3,
collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");p=h.View=function(a){this.cid=d.uniqueId("view");d.extend(this,d.pick(a,
T));this._ensureElement();this.initialize.apply(this,arguments)};var U=/^(\S+)\s*(.*)$/,T="model collection el id attributes className tagName events".split(" ");d.extend(p.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(a){this.undelegateEvents();this._setElement(a);this.delegateEvents();
return this},_setElement:function(a){this.$el=a instanceof h.$?a:h.$(a);this.el=this.$el[0]},delegateEvents:function(a){a||(a=d.result(this,"events"));if(!a)return this;this.undelegateEvents();for(var b in a){var c=a[b];d.isFunction(c)||(c=this[c]);if(c){var e=b.match(U);this.delegate(e[1],e[2],d.bind(c,this))}}return this},delegate:function(a,b,c){this.$el.on(a+".delegateEvents"+this.cid,b,c);return this},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid);return this},
undelegate:function(a,b,c){this.$el.off(a+".delegateEvents"+this.cid,b,c);return this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"));else{var a=d.extend({},d.result(this,"attributes"));this.id&&(a.id=d.result(this,"id"));this.className&&(a["class"]=d.result(this,"className"));this.setElement(this._createElement(d.result(this,"tagName")));this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}});
h.sync=function(a,b,c){var e=V[a];d.defaults(c||(c={}),{emulateHTTP:h.emulateHTTP,emulateJSON:h.emulateJSON});var f={type:e,dataType:"json"};c.url||(f.url=d.result(b,"url")||H());null!=c.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c)));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST";c.emulateJSON&&
(f.data._method=e);var g=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e);if(g)return g.apply(this,arguments)}}"GET"===f.type||c.emulateJSON||(f.processData=!1);var k=c.error;c.error=function(a,b,d){c.textStatus=b;c.errorThrown=d;k&&k.call(c.context,a,b,d)};a=c.xhr=h.ajax(d.extend(f,c));b.trigger("request",b,a,c);return a};var V={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};h.ajax=function(){return h.$.ajax.apply(h.$,arguments)};var J=
h.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},W=/\((.*?)\)/g,X=/(\(\?)?:\w+/g,Y=/\*\w+/g,Z=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(J.prototype,k,{initialize:function(){},route:function(a,b,c){d.isRegExp(a)||(a=this._routeToRegExp(a));d.isFunction(b)&&(c=b,b="");c||(c=this[b]);var e=this;h.history.route(a,function(d){d=e._extractParameters(a,d);!1!==e.execute(c,d,b)&&(e.trigger.apply(e,["route:"+b].concat(d)),e.trigger("route",
b,d),h.history.trigger("route",e,b,d))});return this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,b){h.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(Z,"\\$\x26").replace(W,"(?:$1)?").replace(X,function(a,c){return c?a:"([^/?]+)"}).replace(Y,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},
_extractParameters:function(a,b){var c=a.exec(b).slice(1);return d.map(c,function(a,b){return b===c.length-1?a||null:a?decodeURIComponent(a):null})}});var r=h.History=function(){this.handlers=[];this.checkUrl=d.bind(this.checkUrl,this);"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},aa=/^[#\/]|\s+$/g,ba=/^\/+|\/+$/g,ca=/#.*$/;r.started=!1;d.extend(r.prototype,k,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$\x26/")===this.root&&
!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===
a.charAt(0)?a.slice(1):a},getFragment:function(a){null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash());return a.replace(aa,"")},start:function(a){if(r.started)throw Error("Backbone.history has already been started");r.started=!0;this.options=d.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode);this._useHashChange=
this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.history||!this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(ba,"/");if(this._wantsHashChange&&this._wantsPushState)if(this._hasPushState||this.atRoot())this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});else return a=this.root.slice(0,-1)||"/",this.location.replace(a+
"#"+this.getPath()),!0;this._hasHashChange||!this._wantsHashChange||this._usePushState||(this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1,a=document.body,a=a.insertBefore(this.iframe,a.firstChild).contentWindow,a.document.open(),a.document.close(),a.location.hash="#"+this.fragment);a=window.addEventListener||function(a,c){return attachEvent("on"+a,c)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&
!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(!this.options.silent)return this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,c){return detachEvent("on"+a,c)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1);this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);
r.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getHash(this.iframe.contentWindow));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){if(!this.matchRoot())return!1;a=this.fragment=this.getFragment(a);return d.some(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!r.started)return!1;b&&!0!==b||
(b={trigger:!!b});a=this.getFragment(a||"");var c=this.root;if(""===a||"?"===a.charAt(0))c=c.slice(0,-1)||"/";c+=a;a=this.decodeFragment(a.replace(ca,""));if(this.fragment!==a){this.fragment=a;if(this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)&&(c=this.iframe.contentWindow,b.replace||(c.document.open(),c.document.close()),this._updateHash(c.location,
a,b.replace));else return this.location.assign(c);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});h.history=new r;w.extend=A.extend=J.extend=p.extend=r.extend=function(a,b){var c=this;var e=a&&d.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};d.extend(e,c,b);e.prototype=d.create(c.prototype,a);e.prototype.constructor=e;e.__super__=c.prototype;return e};var H=function(){throw Error('A "url" property or function must be specified');
},z=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b);a.trigger("error",a,d,b)}};return h});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:lib-backbone', location = '/lib/backbone/backbone-1.3.3.js' */
define("lib/backbone-1.3.3",["jquery","lib/underscore-1.8.3","atlassian/libs/factories/backbone-1.3.3"],function(e,i,n){"use strict";return n(i,e)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:marionette-3.1.0-factory', location = 'factories/marionette/3.1.0/marionette-3.1.0-factory.js' */
'use strict';(function(h){define("atlassian/libs/factories/marionette-3.1.0",function(){return function(b,r,L){return h(r,b,L).noConflict()}})})(function(h,b,r){function L(b,d,a){return a.toUpperCase()}function v(g){for(var d=arguments.length,a=Array(1<d?d-1:0),c=1;c<d;c++)a[c-1]=arguments[c];d=ha(g);d=M.call(this,d);c=void 0;b.isFunction(d)&&(c=d.apply(this,a));this.trigger.apply(this,arguments);return c}function m(g){for(var d=arguments.length,a=Array(1<d?d-1:0),c=1;c<d;c++)a[c-1]=arguments[c];
return b.isFunction(g.triggerMethod)?g.triggerMethod.apply(g,a):v.apply(g,a)}function F(g,d,a){g._getImmediateChildren&&b.each(g._getImmediateChildren(),function(c){a(c)&&m(c,d,c)})}function ia(b){return!b._isAttached}function ja(b){return b._isAttached?!1:b._isAttached=!0}function ka(b){return b._isAttached}function la(b){if(!b._isAttached)return!1;b._isAttached=!1;return!0}function T(b){b._isAttached&&b._isRendered&&m(b,"dom:refresh",b)}function ma(){F(this,"before:attach",ia)}function na(){F(this,
"attach",ja);T(this)}function oa(){F(this,"before:detach",ka)}function pa(){F(this,"detach",la)}function qa(){T(this)}function z(b){b._areViewEventsMonitored||(b._areViewEventsMonitored=!0,b.on({"before:attach":ma,attach:na,"before:detach":oa,detach:pa,render:qa}))}function ra(g,d,a,c,e){c=c.split(/\s+/);b.each(c,function(c){var b=g[c];if(!b)throw new l('Method "'+c+'" was configured as an event handler, but does not exist.');g[e](d,a,b)})}function U(g,d,a,c){if(d&&a){if(!b.isObject(a))throw new l({message:"Bindings must be an object.",
url:"marionette.functions.html#marionettebindevents"});b.each(a,function(a,k){if(b.isString(a))ra(g,d,k,a,c);else g[c](d,k,a)})}}function A(b,d){U(this,b,d,"listenTo");return this}function B(b,d){U(this,b,d,"stopListening");return this}function V(g,d,a,c){if(d&&a){if(!b.isObject(a))throw new l({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindrequests"});a=N.call(g,a);d[c](a,g)}}function W(b,d){V(this,b,d,"reply");return this}function X(b,d){V(this,b,d,"stopReplying");
return this}function O(b){if(Array.isArray(b)){for(var d=0,a=Array(b.length);d<b.length;d++)a[d]=b[d];return a}return Array.from(b)}function Y(g,d){return b.chain(d).map(function(a,c){c=a.behaviorClass?a.behaviorClass:b.isFunction(a)?a:b.isFunction(f.Behaviors.behaviorsLookup)?f.Behaviors.behaviorsLookup(a,c)[c]:f.Behaviors.behaviorsLookup[c];a=new c(a===c?{}:a,g);c=Y(g,b.result(a,"behaviors"));return[a].concat(c)}).flatten().value()}function sa(g,d){b.isString(d)&&(d={event:d});var a=d.event,c=!1!==
d.preventDefault,e=!1!==d.stopPropagation;return function(b){c&&b.preventDefault();e&&b.stopPropagation();g.triggerMethod(a,g)}}function Z(b){b.supportsDestroyLifecycle||m(b,"before:destroy",b);var d=!!b._isAttached;d&&m(b,"before:detach",b);b.remove();d&&(b._isAttached=!1,m(b,"detach",b));b._isDestroyed=!0;b.supportsDestroyLifecycle||m(b,"destroy",b)}function aa(g,d){if(g instanceof G)return g;d=b.extend({},d);if(b.isString(g))b.extend(d,{el:g}),g=P(d);else if(b.isFunction(g))b.extend(d,{regionClass:g}),
g=P(d);else if(b.isObject(g))g.selector&&n("The selector option on a Region definition object is deprecated. Use el to pass a selector string"),b.extend(d,{el:g.selector},g),g=P(d);else throw new l({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"});return g}function P(g){var d=g.regionClass;g=b.omit(g,"regionClass");return new d(g)}h="default"in h?h["default"]:h;b="default"in b?b["default"]:b;r="default"in r?r["default"]:r;var t=function(b){return function(d){for(var a=
arguments.length,c=Array(1<a?a-1:0),e=1;e<a;e++)c[e-1]=arguments[e];return b.apply(d,c)}},H=h.Model.extend,n=function c(d,a){b.isObject(d)&&(d=d.prev+" is going to be removed in the future. Please use "+d.next+" instead."+(d.url?" See: "+d.url:""));!f.DEV_MODE||void 0!==a&&a||c._cache[d]||(c._warn("Deprecation warning: "+d),c._cache[d]=!0)};n._console="undefined"!==typeof console?console:{};n._warn=function(){return(n._console.warn||n._console.log||b.noop).apply(n._console,arguments)};n._cache={};
var I=function(b){return h.$.contains(document.documentElement,b)},ba=function(d,a){var c=this;d&&b.each(a,function(a){var b=d[a];void 0!==b&&(c[a]=b)})},M=function(b){if(b)return this.options&&void 0!==this.options[b]?this.options[b]:this[b]},N=function(d){var a=this;return b.reduce(d,function(c,e,d){b.isFunction(e)||(e=a[e]);e&&(c[d]=e);return c},{})},ta=/(^|:)(\w)/gi,ha=b.memoize(function(b){return"on"+b.replace(ta,L)}),ca="description fileName lineNumber name message number".split(" "),l=H.call(Error,
{urlRoot:"http://marionettejs.com/docs/v3.1.0/",constructor:function(d,a){b.isObject(d)?(a=d,d=a.message):a||(a={});d=Error.call(this,d);b.extend(this,b.pick(d,ca),b.pick(a,ca));this.captureStackTrace();a.url&&(this.url=this.urlRoot+a.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,l)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});l.extend=H;var Q={normalizeMethods:N,_setOptions:function(){for(var d=arguments.length,
a=Array(d),c=0;c<d;c++)a[c]=arguments[c];this.options=b.extend.apply(b,[{},b.result(this,"options")].concat(a))},mergeOptions:ba,getOption:M,bindEvents:A,unbindEvents:B},w={_initRadio:function(){var d=b.result(this,"channelName");if(d){if(!r)throw new l({name:"BackboneRadioMissing",message:'The dependency "backbone.radio" is missing.'});d=this._channel=r.channel(d);var a=b.result(this,"radioEvents");this.bindEvents(d,a);a=b.result(this,"radioRequests");this.bindRequests(d,a);this.on("destroy",this._destroyRadio)}},
_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel},bindEvents:A,unbindEvents:B,bindRequests:W,unbindRequests:X},ua=["channelName","radioEvents","radioRequests"],p=function(d){this._setOptions(d);this.mergeOptions(d,ua);this.cid=b.uniqueId(this.cidPrefix);this._initRadio();this.initialize.apply(this,arguments)};p.extend=H;b.extend(p.prototype,h.Events,Q,w,{cidPrefix:"mno",_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},
initialize:function(){},destroy:function(){if(this._isDestroyed)return this;for(var b=arguments.length,a=Array(b),c=0;c<b;c++)a[c]=arguments[c];this.triggerMethod.apply(this,["before:destroy",this].concat(a));this._isDestroyed=!0;this.triggerMethod.apply(this,["destroy",this].concat(a));this.stopListening();return this},triggerMethod:v});var C=function(b){this.templateId=b};b.extend(C,{templateCaches:{},get:function(b,a){var c=this.templateCaches[b];c||(c=new C(b),this.templateCaches[b]=c);return c.load(a)},
clear:function(){var b=arguments.length;for(var a=Array(b),c=0;c<b;c++)a[c]=arguments[c];c=a.length;if(0<c)for(b=0;b<c;b++)delete this.templateCaches[a[b]];else this.templateCaches={}}});b.extend(C.prototype,{load:function(b){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId,b);return this.compiledTemplate=this.compileTemplate(a,b)},loadTemplate:function(b,a){a=h.$(b);if(!a.length)throw new l({name:"NoTemplateError",message:'Could not find template: "'+
b+'"'});return a.html()},compileTemplate:function(d,a){return b.template(d,a)}});var q=b.invokeMap||b.invoke;w={_delegateEntityEvents:function(d,a){this._undelegateEntityEvents(d,a);var c=b.result(this,"modelEvents");A.call(this,d,c);d=b.result(this,"collectionEvents");A.call(this,a,d)},_undelegateEntityEvents:function(d,a){var c=b.result(this,"modelEvents");B.call(this,d,c);d=b.result(this,"collectionEvents");B.call(this,a,d)}};var va=/^(\S+)\s*(.*)$/,da=function(d){d=d.match(va);var a=d[2];return[d[1]+
b.uniqueId(".evt"),a].join(" ")},D={_getViewTriggers:function(d,a){return b.reduce(a,function(a,b,k){k=da(k);a[k]=sa(d,b);return a},{})}},wa=function(d,a){return b.reduce(d,function(c,b,d){d=J(d,a);c[d]=b;return c},{})},J=function(b,a){return b.replace(/@ui\.[a-zA-Z-_$0-9]*/g,function(c){return a[c.slice(4)]})},xa=function k(a,c,e){b.each(a,function(u,f){b.isString(u)?a[f]=J(u,c):b.isObject(u)&&b.isArray(e)&&(b.extend(u,k(b.pick(u,e),c)),b.each(e,function(a){var e=u[a];b.isString(e)&&(u[a]=J(e,c))}))});
return a},ea={normalizeUIKeys:function(a){var c=this._getUIBindings();return wa(a,c)},normalizeUIString:function(a){var c=this._getUIBindings();return J(a,c)},normalizeUIValues:function(a,c){var b=this._getUIBindings();return xa(a,b,c)},_getUIBindings:function(){var a=b.result(this,"_uiBindings"),c=b.result(this,"ui");return a||c},_bindUIElements:function(){var a=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var c=b.result(this,"_uiBindings");this._ui={};b.each(c,function(c,b){a._ui[b]=
a.$(c)});this.ui=this._ui}},_unbindUIElements:function(){var a=this;this.ui&&this._uiBindings&&(b.each(this.ui,function(c,b){delete a.ui[b]}),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(a){return this._ui[a]}},x={supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(a){this._proxyBehaviorViewProperties();
this._buildEventProxies();var c=this._getEvents(a);"undefined"===typeof a&&(this.events=c);a=b.extend({},this._getBehaviorEvents(),c,this._getBehaviorTriggers(),this.getTriggers());h.View.prototype.delegateEvents.call(this,a);return this},_getEvents:function(a){a=a||this.events;return b.isFunction(a)?this.normalizeUIKeys(a.call(this)):this.normalizeUIKeys(a)},getTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(b.result(this,"triggers"));return this._getViewTriggers(this,a)}},delegateEntityEvents:function(){this._delegateEntityEvents(this.model,
this.collection);this._delegateBehaviorEntityEvents();return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.model,this.collection);this._undelegateBehaviorEntityEvents();return this},_ensureViewIsIntact:function(){if(this._isDestroyed)throw new l({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'});},destroy:function(){if(this._isDestroyed)return this;for(var a=!!this._isAttached,c=arguments.length,b=Array(c),k=
0;k<c;k++)b[k]=arguments[k];this.triggerMethod.apply(this,["before:destroy",this].concat(b));a&&this.triggerMethod("before:detach",this);this.unbindUIElements();this._removeElement();a&&(this._isAttached=!1,this.triggerMethod("detach",this));this._removeChildren();this._destroyBehaviors(b);this._isDestroyed=!0;this._isRendered=!1;this.triggerMethod.apply(this,["destroy",this].concat(b));this.stopListening();return this},bindUIElements:function(){this._bindUIElements();this._bindBehaviorUIElements();
return this},unbindUIElements:function(){this._unbindUIElements();this._unbindBehaviorUIElements();return this},getUI:function(a){this._ensureViewIsIntact();return this._getUI(a)},childViewEventPrefix:"childview",triggerMethod:function(){var a=v.apply(this,arguments);this._triggerEventOnBehaviors.apply(this,arguments);this._triggerEventOnParentLayout.apply(this,arguments);return a},_buildEventProxies:function(){this._childViewEvents=b.result(this,"childViewEvents");this._childViewTriggers=b.result(this,
"childViewTriggers")},_triggerEventOnParentLayout:function(){var a=this._parentView();a&&a._childViewEventHandler.apply(a,arguments)},_parentView:function(){for(var a=this._parent;a;){if(a instanceof K)return a;a=a._parent}},_childViewEventHandler:function(a){for(var c=this.normalizeMethods(this._childViewEvents),e=arguments.length,k=Array(1<e?e-1:0),f=1;f<e;f++)k[f-1]=arguments[f];"undefined"!==typeof c&&b.isFunction(c[a])&&c[a].apply(this,k);(c=this._childViewTriggers)&&b.isString(c[a])&&this.triggerMethod.apply(this,
[c[a]].concat(k));c=b.result(this,"childViewEventPrefix");!1!==c&&this.triggerMethod.apply(this,[c+":"+a].concat(k))}};b.extend(x,{_initBehaviors:function(){var a=b.result(this,"behaviors");this._behaviors=b.isObject(a)?Y(this,a):{}},_getBehaviorTriggers:function(){var a=q(this._behaviors,"getTriggers");return b.extend.apply(b,[{}].concat(O(a)))},_getBehaviorEvents:function(){var a=q(this._behaviors,"getEvents");return b.extend.apply(b,[{}].concat(O(a)))},_proxyBehaviorViewProperties:function(){q(this._behaviors,
"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){q(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){q(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(a){q.apply(void 0,[this._behaviors,"destroy"].concat(O(a)))},_bindBehaviorUIElements:function(){q(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){q(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(){for(var a=this._behaviors,c=0,b=a&&
a.length;c<b;c++)v.apply(a[c],arguments)}},Q,w,D,ea);var ya=["allowMissingEl","parentEl","replaceElement"],G=p.extend({cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,constructor:function(a){this._setOptions(a);this.mergeOptions(a,ya);this._initEl=this.el=this.getOption("el");this.el=this.el instanceof h.$?this.el[0]:this.el;if(!this.el)throw new l({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el);p.call(this,a)},show:function(a,c){if(this._ensureElement(c)){this._ensureView(a);
if(a===this.currentView)return this;this.triggerMethod("before:show",this,a,c);z(a);this.empty(c);a.on("destroy",this._empty,this);a._parent=this;this._renderView(a);this._attachView(a,c);this.triggerMethod("show",this,a,c);return this}},_renderView:function(a){a._isRendered||(a.supportsRenderLifecycle||m(a,"before:render",a),a.render(),a.supportsRenderLifecycle||(a._isRendered=!0,m(a,"render",a)))},_attachView:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=!a._isAttached&&
I(this.el);c="undefined"===typeof c.replaceElement?!!b.result(this,"replaceElement"):!!c.replaceElement;e&&m(a,"before:attach",a);c?this._replaceEl(a):this.attachHtml(a);e&&(a._isAttached=!0,m(a,"attach",a));this.currentView=a},_ensureElement:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);if(!this.$el||0===this.$el.length){if("undefined"===typeof a.allowMissingEl?b.result(this,"allowMissingEl"):a.allowMissingEl)return!1;
throw new l('An "el" must exist in DOM for this region '+this.cid);}return!0},_ensureView:function(a){if(!a)throw new l({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(a._isDestroyed)throw new l({name:"ViewDestroyedError",message:'View (cid: "'+a.cid+'") has already been destroyed and cannot be used.'});},getEl:function(a){return h.$(a,b.result(this,"parentEl"))},_replaceEl:function(a){this._restoreEl();this.el.parentNode.replaceChild(a.el,
this.el);this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var a=this.currentView;if(a){var c=a.el.parentNode;c&&(c.replaceChild(this.el,a.el),this._isReplaced=!1)}}},isReplaced:function(){return!!this._isReplaced},attachHtml:function(a){this.el.appendChild(a.el)},empty:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},c=this.currentView;if(!c)return this._ensureElement(a)&&this.detachHtml(),this;(a=!a.preventDestroy)||n("The preventDestroy option is deprecated. Use Region#detachView");
this._empty(c,a);return this},_empty:function(a,c){a.off("destroy",this._empty,this);this.triggerMethod("before:empty",this,a);this._restoreEl();delete this.currentView;a._isDestroyed||(this._removeView(a,c),delete a._parent);this.triggerMethod("empty",this,a)},_removeView:function(a,c){c?a.destroy?a.destroy():Z(a):this._detachView(a)},detachView:function(){var a=this.currentView;if(a)return this._empty(a),a},_detachView:function(a){var c=!!a._isAttached;c&&m(a,"before:detach",a);this.detachHtml();
c&&(a._isAttached=!1,m(a,"detach",a))},detachHtml:function(){this.$el.contents().detach()},hasView:function(){return!!this.currentView},reset:function(a){this.empty(a);this.$el&&(this.el=this._initEl);delete this.$el;return this},destroy:function(a){this.reset(a);return p.prototype.destroy.apply(this,arguments)}}),y={regionClass:G,_initRegions:function(){this.regions=this.regions||{};this._regions={};this.addRegions(b.result(this,"regions"))},_reInitRegions:function(){q(this._regions,"reset")},addRegion:function(a,
c){var b={};b[a]=c;return this.addRegions(b)[a]},addRegions:function(a){if(!b.isEmpty(a))return a=this.normalizeUIValues(a,["selector","el"]),this.regions=b.extend({},this.regions,a),this._addRegions(a)},_addRegions:function(a){var c=this,e={regionClass:this.regionClass,parentEl:b.partial(b.result,this,"el")};return b.reduce(a,function(a,b,f){a[f]=aa(b,e);c._addRegion(a[f],f);return a},{})},_addRegion:function(a,c){this.triggerMethod("before:add:region",this,c,a);a._parent=this;this._regions[c]=a;
this.triggerMethod("add:region",this,c,a)},removeRegion:function(a){var c=this._regions[a];this._removeRegion(c,a);return c},removeRegions:function(){var a=this.getRegions();b.each(this._regions,b.bind(this._removeRegion,this));return a},_removeRegion:function(a,c){this.triggerMethod("before:remove:region",this,c,a);a.destroy();delete this.regions[c];delete this._regions[c];this.triggerMethod("remove:region",this,c,a)},emptyRegions:function(){var a=this.getRegions();q(a,"empty");return a},hasRegion:function(a){return!!this.getRegion(a)},
getRegion:function(a){return this._regions[a]},getRegions:function(){return b.clone(this._regions)},showChildView:function(a,c){for(var b=this.getRegion(a),k=arguments.length,f=Array(2<k?k-2:0),h=2;h<k;h++)f[h-2]=arguments[h];return b.show.apply(b,[c].concat(f))},detachChildView:function(a){return this.getRegion(a).detachView()},getChildView:function(a){return this.getRegion(a).currentView}},fa={render:function(a,c){if(!a)throw new l({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});
return(b.isFunction(a)?a:C.get(a))(c)}},za="behaviors childViewEventPrefix childViewEvents childViewTriggers collectionEvents events modelEvents regionClass regions template templateContext triggers ui".split(" "),K=h.View.extend({constructor:function(a){this.render=b.bind(this.render,this);this._setOptions(a);this.mergeOptions(a,za);z(this);this._initBehaviors();this._initRegions();var c=Array.prototype.slice.call(arguments);c[0]=this.options;h.View.prototype.constructor.apply(this,c);this.delegateEntityEvents()},
serializeData:function(){return this.model||this.collection?this.model?this.serializeModel():{items:this.serializeCollection()}:{}},serializeModel:function(){return this.model?b.clone(this.model.attributes):{}},serializeCollection:function(){return this.collection?this.collection.map(function(a){return b.clone(a.attributes)}):{}},setElement:function(){var a=!!this.el;h.View.prototype.setElement.apply(this,arguments);a&&(this._isRendered=!!this.$el.length,this._isAttached=I(this.el));this._isRendered&&
this.bindUIElements();return this},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._isRendered&&this._reInitRegions();this._renderTemplate();this.bindUIElements();this._isRendered=!0;this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){var c=this.mixinTemplateContext(this.serializeData());a=fa.render(a,c,this);this.attachElContent(a)}},getTemplate:function(){return this.template},mixinTemplateContext:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.result(this,"templateContext");return b.extend(a,c)},attachElContent:function(a){this.$el.html(a);return this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return b.chain(this.getRegions()).map("currentView").compact().value()}});b.extend(K.prototype,x,y);var Aa="forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck reduce".split(" "),
R=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();b.each(a,b.bind(this.add,this))};(function(a,c){b.each(Aa,function(e){a[e]=function(){var a=[b.values(b.result(this,c))].concat(b.toArray(arguments));return b[e].apply(b,a)}})})(R.prototype,"_views");b.extend(R.prototype,{add:function(a,c){return this._add(a,c)._updateLength()},_add:function(a,c){var b=a.cid;this._views[b]=a;a.model&&(this._indexByModel[a.model.cid]=b);c&&(this._indexByCustom[c]=b);return this},
findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){return this._remove(a)._updateLength()},_remove:function(a){var c=a.cid;a.model&&delete this._indexByModel[a.model.cid];b.some(this._indexByCustom,b.bind(function(a,b){if(a===c)return delete this._indexByCustom[b],
!0},this));delete this._views[c];return this},_updateLength:function(){this.length=b.size(this._views);return this}});var Ba="behaviors childView childViewEventPrefix childViewEvents childViewOptions childViewTriggers collectionEvents events filter emptyView emptyViewOptions modelEvents reorderOnSort sort triggers ui viewComparator".split(" "),E=h.View.extend({sort:!0,constructor:function(a){this.render=b.bind(this.render,this);this._setOptions(a);this.mergeOptions(a,Ba);z(this);this._initBehaviors();
this.once("render",this._initialEvents);this._initChildViewStorage();this._bufferedChildren=[];var c=Array.prototype.slice.call(arguments);c[0]=this.options;h.View.prototype.constructor.apply(this,c);this.delegateEntityEvents()},_startBuffering:function(){this._isBuffering=!0},_endBuffering:function(){var a=this._isAttached?this._getImmediateChildren():[];this._isBuffering=!1;b.each(a,function(a){m(a,"before:attach",a)});this.attachBuffer(this,this._createBuffer());b.each(a,function(a){a._isAttached=
!0;m(a,"attach",a)});this._bufferedChildren=[]},_getImmediateChildren:function(){return b.values(this.children._views)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a,c,e){c=void 0!==e.at&&(e.index||c.indexOf(a));if(this.filter||!1===
c)c=b.indexOf(this._filteredSortedModels(c),a);this._shouldAddChild(a,c)&&(this._destroyEmptyView(),this._addChild(a,c))},_onCollectionUpdate:function(a,c){this._removeChildModels(c.changes.removed)},_removeChildModels:function(a){var c=!1!==(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).checkEmpty,b=this._getRemovedViews(a);b.length&&(this.children._updateLength(),this._updateIndices(b,!1),c&&this._checkEmpty())},_getRemovedViews:function(a){var c=this;return b.reduce(a,function(a,b){b=
c.children.findByModel(b);if(!b||b._isDestroyed)return a;c._removeChildView(b);a.push(b);return a},[])},_findGreatestIndexedView:function(a){return b.reduce(a,function(a,b){return!a||a._index<b._index?b:a},void 0)},_removeChildView:function(a){this.triggerMethod("before:remove:child",this,a);this.children._remove(a);a.destroy?a.destroy():Z(a);delete a._parent;this.stopListening(a);this.triggerMethod("remove:child",this,a)},setElement:function(){var a=!!this.el;h.View.prototype.setElement.apply(this,
arguments);a&&(this._isAttached=I(this.el));return this},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this._isRendered=!0;this.triggerMethod("render",this);return this},setFilter:function(a){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).preventRender,b=this.filter!==a;this._isRendered&&!this._isDestroyed&&b&&!c?(c=this._filteredSortedModels(),this.filter=a,b=this._filteredSortedModels(),this._applyModelDeltas(b,c)):
this.filter=a;return this},removeFilter:function(a){return this.setFilter(null,a)},_applyModelDeltas:function(a,c){var e=this,k={};b.each(a,function(a,b){e.children.findByModel(a)||e._onCollectionAdd(a,e.collection,{at:b});k[a.cid]=!0});a=b.filter(c,function(a){return!k[a.cid]&&e.children.findByModel(a)});this._removeChildModels(a)},reorder:function(){var a=this,c=this.children,e=this._filteredSortedModels();if(!e.length&&this._showingEmptyView)return this;b.some(e,function(a){return!c.findByModel(a)})?
this.render():function(){var k=[],f=c.reduce(function(a,c){var f=b.indexOf(e,c.model);if(-1===f)return k.push(c.model),a;c._index=f;a[f]=c.el;return a},Array(e.length));a.triggerMethod("before:reorder",a);a._appendReorderedChildren(f);a._removeChildModels(k);a.triggerMethod("reorder",a)}();return this},resortView:function(){this.reorderOnSort?this.reorder():this._renderChildren();return this},_sortViews:function(){var a=this,c=this._filteredSortedModels();b.find(c,function(c,b){c=a.children.findByModel(c);
return!c||c._index!==b})&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(a){this.$el.append(a)},_renderChildren:function(){this._isRendered&&(this._destroyEmptyView(),this._destroyChildren({checkEmpty:!1}));var a=this._filteredSortedModels();this.isEmpty({processedModels:a})?this._showEmptyView():(this.triggerMethod("before:render:children",this),this._startBuffering(),this._showCollection(a),this._endBuffering(),this.triggerMethod("render:children",this))},_createView:function(a,
c){var b=this._getChildView(a);c=this._getChildViewOptions(a,c);return this.buildChildView(a,b,c)},_setupChildView:function(a,c){a._parent=this;z(a);this._proxyChildEvents(a);this.sort&&(a._index=c)},_showCollection:function(a){b.each(a,b.bind(this._addChild,this));this.children._updateLength()},_filteredSortedModels:function(a){if(!this.collection||!this.collection.length)return[];var c=this.getViewComparator(),b=this.collection.models;a=Math.min(Math.max(a,0),b.length-1);if(c){var f=void 0;a&&(f=
b[a],b=b.slice(0,a).concat(b.slice(a+1)));b=this._sortModelsBy(b,c);f&&b.splice(a,0,f)}return b=this._filterModels(b)},getViewComparator:function(){return this.viewComparator},_filterModels:function(a){var c=this;this.filter&&(a=b.filter(a,function(a,b){return c._shouldAddChild(a,b)}));return a},_sortModelsBy:function(a,c){return"string"===typeof c?b.sortBy(a,function(a){return a.get(c)}):1===c.length?b.sortBy(a,b.bind(c,this)):a.sort(b.bind(c,this))},_showEmptyView:function(){var a=this._getEmptyView();
if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var c=new h.Model,e=this.emptyViewOptions||this.childViewOptions;b.isFunction(e)&&(e=e.call(this,c,this._emptyViewIndex));a=this.buildChildView(c,a,e);this.triggerMethod("before:render:empty",this,a);this.addChildView(a,0);this.triggerMethod("render:empty",this,a)}},_destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty",this),this._destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty",
this))},_getEmptyView:function(){var a=this.emptyView;if(a)return this._getView(a)},_getChildView:function(a){var b=this.childView;if(!b)throw new l({name:"NoChildViewError",message:'A "childView" must be specified'});b=this._getView(b,a);if(!b)throw new l({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return b},_getView:function(a,c){if(a.prototype instanceof h.View||a===h.View)return a;if(b.isFunction(a))return a.call(this,c)},
_addChild:function(a,b){a=this._createView(a,b);this.addChildView(a,b);return a},_getChildViewOptions:function(a,c){return b.isFunction(this.childViewOptions)?this.childViewOptions(a,c):this.childViewOptions},addChildView:function(a,b){this.triggerMethod("before:add:child",this,a);this._setupChildView(a,b);this._isBuffering?this.children._add(a):(this._updateIndices(a,!0),this.children.add(a));this._renderView(a);this._attachView(a,b);this.triggerMethod("add:child",this,a);return a},_updateIndices:function(a,
c){if(this.sort){var e=b.isArray(a)?this._findGreatestIndexedView(a):a;this.children.each(function(a){a._index>=e._index&&(a._index+=c?1:-1)})}},_renderView:function(a){a._isRendered||(a.supportsRenderLifecycle||m(a,"before:render",a),a.render(),a.supportsRenderLifecycle||(a._isRendered=!0,m(a,"render",a)))},_attachView:function(a,b){var c=!a._isAttached&&!this._isBuffering&&this._isAttached;c&&m(a,"before:attach",a);this.attachHtml(this,a,b);c&&(a._isAttached=!0,m(a,"attach",a))},buildChildView:function(a,
c,e){a=b.extend({model:a},e);return new c(a)},removeChildView:function(a){if(!a||a._isDestroyed)return a;this._removeChildView(a);this.children._updateLength();this._updateIndices(a,!1);return a},isEmpty:function(a){b.result(a,"processedModels")?a=a.processedModels:(a=this.collection?this.collection.models:[],a=this._filterModels(a));return 0===a.length},_checkEmpty:function(){this.isEmpty()&&this._showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},_createBuffer:function(){var a=document.createDocumentFragment();
b.each(this._bufferedChildren,function(b){a.appendChild(b.el)});return a},attachHtml:function(a,b,e){a._isBuffering?a._bufferedChildren.splice(e,0,b):a._insertBefore(b,e)||a._insertAfter(b)},_insertBefore:function(a,b){var c=void 0;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new R},_removeChildren:function(){this._destroyChildren({checkEmpty:!1})},
_destroyChildren:function(a){if(this.children.length){this.triggerMethod("before:destroy:children",this);var b=this.children.map("model");this._removeChildModels(b,a);this.triggerMethod("destroy:children",this)}},_shouldAddChild:function(a,c){var e=this.filter;return!b.isFunction(e)||e.call(this,a,c,this.collection)},_proxyChildEvents:function(a){this.listenTo(a,"all",this._childViewEventHandler)}});b.extend(E.prototype,x);var Ca=["childViewContainer","template","templateContext"];x=E.extend({constructor:function(a){n("CompositeView is deprecated. Convert to View at your earliest convenience");
this.mergeOptions(a,Ca);E.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_getChildView:function(a){var b=this.childView;if(!b)return this.constructor;b=this._getView(b,a);if(!b)throw new l({name:"InvalidChildViewError",
message:'"childView" must be a view class or a function that returns a view class'});return b},serializeData:function(){return this.serializeModel()},render:function(){this._ensureViewIsIntact();this._isRendering=!0;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.renderChildren();this._isRendering=!1;this._isRendered=!0;this.triggerMethod("render",this);return this},renderChildren:function(){(this._isRendered||this._isRendering)&&
E.prototype._renderChildren.call(this)},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this,a).append(a.el)},_appendReorderedChildren:function(a){this.getChildViewContainer(this).append(a)},getChildViewContainer:function(a,c){if(a.$childViewContainer)return a.$childViewContainer;if(a.childViewContainer){if(c=b.result(a,"childViewContainer"),c="@"===c.charAt(0)&&a.ui?a.ui[c.substr(4)]:a.$(c),0>=c.length)throw new l({name:"ChildViewContainerMissingError",
message:'The specified "childViewContainer" was not found: '+a.childViewContainer});}else c=a.$el;return a.$childViewContainer=c},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}});y=b.pick(K.prototype,"serializeModel","getTemplate","_renderTemplate","mixinTemplateContext","attachElContent");b.extend(x.prototype,y);var Da=["collectionEvents","events","modelEvents","triggers","ui"];y=p.extend({cidPrefix:"mnb",constructor:function(a,c){this.view=c;this.defaults=
b.clone(b.result(this,"defaults",{}));this._setOptions(this.defaults,a);this.mergeOptions(this.options,Da);this.ui=b.extend({},b.result(this,"ui"),b.result(c,"ui"));p.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening();return this},proxyViewProperties:function(){this.$el=this.view.$el;this.el=this.view.el;return this},bindUIElements:function(){this._bindUIElements();return this},unbindUIElements:function(){this._unbindUIElements();
return this},getUI:function(a){this.view._ensureViewIsIntact();return this._getUI(a)},delegateEntityEvents:function(){this._delegateEntityEvents(this.view.model,this.view.collection);return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.view.model,this.view.collection);return this},getEvents:function(){var a=this,c=this.normalizeUIKeys(b.result(this,"events"));return b.reduce(c,function(c,f,h){b.isFunction(f)||(f=a[f]);if(f)return h=da(h),c[h]=b.bind(f,a),c},{})},getTriggers:function(){if(this.triggers){var a=
this.normalizeUIKeys(b.result(this,"triggers"));return this._getViewTriggers(this.view,a)}}});b.extend(y.prototype,w,D,ea);var Ea=["region","regionClass"];w=p.extend({cidPrefix:"mna",constructor:function(a){this._setOptions(a);this.mergeOptions(a,Ea);this._initRegion();p.prototype.constructor.apply(this,arguments)},regionClass:G,_initRegion:function(){var a=this.region;a&&(this._region=aa(a,{regionClass:this.regionClass}))},getRegion:function(){return this._region},showView:function(a){for(var b=
this.getRegion(),e=arguments.length,f=Array(1<e?e-1:0),h=1;h<e;h++)f[h-1]=arguments[h];return b.show.apply(b,[a].concat(f))},getView:function(){return this.getRegion().currentView},start:function(a){this.triggerMethod("before:start",this,a);this.triggerMethod("start",this,a);return this}});var Fa=["appRoutes","controller"];D=h.Router.extend({constructor:function(a){this._setOptions(a);this.mergeOptions(a,Fa);h.Router.apply(this,arguments);var b=this.appRoutes,e=this._getController();this.processAppRoutes(e,
b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b);return this},_processOnRoute:function(a,c){if(b.isFunction(this.onRoute)){var e=b.invert(this.appRoutes)[a];this.onRoute(a,e,c)}},processAppRoutes:function(a,c){var e=this;if(!c)return this;var f=b.keys(c).reverse();b.each(f,function(b){e._addAppRoute(a,b,c[b])});return this},_getController:function(){return this.controller},_addAppRoute:function(a,c,e){var f=a[e];if(!f)throw new l('Method "'+
e+'" was not found on the controller');this.route(c,e,b.bind(f,a))},triggerMethod:v});b.extend(D.prototype,Q);var S={},Ga=h.Marionette,f=h.Marionette={};f.noConflict=function(){h.Marionette=Ga;return this};f.bindEvents=t(A);f.unbindEvents=t(B);f.bindRequests=t(W);f.unbindRequests=t(X);f.mergeOptions=t(ba);f.getOption=t(M);f.normalizeMethods=t(N);f.extend=H;f.isNodeAttached=I;f.deprecate=n;f.triggerMethod=t(v);f.triggerMethodOn=m;f.isEnabled=function(a){return!!S[a]};f.setEnabled=function(a,b){return S[a]=
b};f.monitorViewEvents=z;f.Behaviors={};f.Behaviors.behaviorsLookup=function(){throw new l({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.md#behaviorslookup"});};f.Application=w;f.AppRouter=D;f.Renderer=fa;f.TemplateCache=C;f.View=K;f.CollectionView=E;f.CompositeView=x;f.Behavior=y;f.Region=G;f.Error=l;f.Object=p;f.DEV_MODE=!1;f.FEATURES=S;f.VERSION="3.1.0";return f});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:backbone.radio-2.0.0-factory', location = 'factories/backbone.radio/2.0.0/backbone.radio-2.0.0-factory.js' */
'use strict';(function(f){define("atlassian/libs/factories/backbone.radio-2.0.0",function(){return function(e,k){return f(e,k).noConflict()}})})(function(f,e){function k(a){return f.isFunction(a)?a:function(){return a}}f="default"in f?f["default"]:f;e="default"in e?e["default"]:e;var q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},r=e.Radio,b=e.Radio={};b.VERSION=
"2.0.0";b.noConflict=function(){e.Radio=r;return this};b.DEBUG=!1;b._debugText=function(a,d,c){return a+(c?" on the "+c+" channel":"")+': "'+d+'"'};b.debugLog=function(a,d,c){b.DEBUG&&console&&console.warn&&console.warn(b._debugText(a,d,c))};var n=/\s+/;b._eventsApi=function(a,d,c,b){if(!c)return!1;var g={};if("object"===("undefined"===typeof c?"undefined":q(c))){for(var h in c){var e=a[d].apply(a,[h,c[h]].concat(b));n.test(h)?f.extend(g,e):g[h]=e}return g}if(n.test(c)){c=c.split(n);h=0;for(e=c.length;h<
e;h++)g[c[h]]=a[d].apply(a,[c[h]].concat(b));return g}return!1};b._callHandler=function(a,b,c){var d=c[0],f=c[1],e=c[2];switch(c.length){case 0:return a.call(b);case 1:return a.call(b,d);case 2:return a.call(b,d,f);case 3:return a.call(b,d,f,e);default:return a.apply(b,c)}};var l={};f.extend(b,{log:function(a,b){if("undefined"!==typeof console){var c=f.toArray(arguments).slice(2);console.log("["+a+'] "'+b+'"',c)}},tuneIn:function(a){var d=b.channel(a);d._tunedIn=!0;d.on("all",l[a]||(l[a]=f.bind(b.log,
b,a)));return this},tuneOut:function(a){var d=b.channel(a);d._tunedIn=!1;d.off("all",l[a]||(l[a]=f.bind(b.log,b,a)));delete l[a];return this}});b.Requests={request:function(a){var d=f.toArray(arguments).slice(1),c=b._eventsApi(this,"request",a,d);if(c)return c;var g=this.channelName;c=this._requests;g&&this._tunedIn&&b.log.apply(this,[g,a].concat(d));if(c&&(c[a]||c["default"]))return g=c[a]||c["default"],d=c[a]?d:arguments,b._callHandler(g.callback,g.context,d);b.debugLog("An unhandled request was fired",
a,g)},reply:function(a,d,c){if(b._eventsApi(this,"reply",a,[d,c]))return this;this._requests||(this._requests={});this._requests[a]&&b.debugLog("A request was overwritten",a,this.channelName);this._requests[a]={callback:k(d),context:c||this};return this},replyOnce:function(a,d,c){if(b._eventsApi(this,"replyOnce",a,[d,c]))return this;var g=this,e=f.once(function(){g.stopReplying(a);return k(d).apply(this,arguments)});return this.reply(a,e,c)},stopReplying:function(a,d,c){if(b._eventsApi(this,"stopReplying",
a))return this;if(a||d||c){var g=this._requests,e=a;g||(g={});for(var h=e?[e]:f.keys(g),l=!1,k=0,n=h.length;k<n;k++)if(e=h[k],g[e]){var m=g[e];d&&d!==m.callback&&d!==m.callback._callback||c&&c!==m.context?e=void 0:(delete g[e],e=!0);e&&(l=!0)}l||b.debugLog("Attempted to remove the unregistered request",a,this.channelName)}else delete this._requests;return this}};b._channels={};b.channel=function(a){if(!a)throw Error("You must provide a name for the channel.");return b._channels[a]?b._channels[a]:
b._channels[a]=new b.Channel(a)};b.Channel=function(a){this.channelName=a};f.extend(b.Channel.prototype,e.Events,b.Requests,{reset:function(){this.off();this.stopListening();this.stopReplying();return this}});var m,p;f.each([e.Events,b.Requests],function(a){f.each(a,function(a,c){b[c]=function(a){p=f.toArray(arguments).slice(1);m=this.channel(a);return m[c].apply(m,p)}})});b.reset=function(a){f.each(a?[this._channels[a]]:this._channels,function(a){a.reset()})};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:lib-backbone-radio', location = '/lib/backbone-radio/backbone-radio-2.0.0.js' */
define("lib/backbone-radio-2.0.0",["lib/underscore-1.8.3","lib/backbone-1.3.3","atlassian/libs/factories/backbone.radio-2.0.0"],function(i,b,e){"use strict";return e(i,b)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:lib-marionette', location = '/lib/marionette/marionette-3.1.0.js' */
define("lib/marionette-3.1.0",["lib/underscore-1.8.3","lib/backbone-1.3.3","lib/backbone-radio-2.0.0","atlassian/libs/factories/marionette-3.1.0"],function(e,i,n,t){"use strict";return t(e,i,n)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-docker-volume', location = '/feature/docker-volume/docker-volume.js' */
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};define("feature/docker-volume",["jquery","lib/underscore-1.8.3","lib/backbone-1.3.3","lib/marionette-3.1.0"],function(t,e,n,i){"use strict";var r=n.Model.extend({initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.set("hostDirectory",t.hostDirectory||""),this.set("containerDirectory",t.containerDirectory||"")}}),o=i.View.extend({tagName:"tr",className:function(){return 0===this.getOption("index")?"volumes-table__add":"volumes-table__row"},model:r,ui:{hostDirectoryInput:".volumes-table__directory input",containerDirectoryInput:".volumes-table__container input",addButton:".volumes-table__actions--add",removeButton:".volumes-table__actions--remove"},events:{"input @ui.hostDirectoryInput":"onVolumeMappingInput","input @ui.containerDirectoryInput":"onVolumeMappingInput"},triggers:{"change @ui.hostDirectoryInput":"mapping:change","change @ui.containerDirectoryInput":"mapping:change","click @ui.addButton":"before:mapping:add","click @ui.removeButton":"mapping:remove"},template:function(t){return bamboo.feature.docker.volume.mapping.tableRow(t)},serializeData:function(){return _extends({},i.View.prototype.serializeData.call(this),{index:this.getOption("index")})},removeErrors:function(){this.$el.removeClass("error"),this.$el.find(".error").remove()},addError:function(e,n){var i=t("<div>").addClass("error").addClass("control-form-error").text(n);e.after(i),this.$el.addClass("error")},validateField:function(t,n,i,r){var o=this.ui[t],a=o.val();if(!a){var u=e.isFunction(i)?i():i;return this.addError(o,u),!1}if(n.map(function(e){return e.ui[t].val()}).some(function(t){return t===a})){var c=e.isFunction(r)?r(a):r;return this.addError(o,c),!1}return!0},validate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.removeErrors();var e=this.validateField("hostDirectoryInput",t,function(){return "Host directory can not be empty"},function(t){return AJS.format("Host directory is already in use: {0}",t)}),n=this.validateField("containerDirectoryInput",t,function(){return "Container directory can not be empty"},function(t){return AJS.format("Container directory is already in use: {0}",t)});return e&&n},addVolumeMapping:function(){var t=this.ui.hostDirectoryInput.val(),e=this.ui.containerDirectoryInput.val();this.ui.hostDirectoryInput.val(""),this.ui.containerDirectoryInput.val(""),this.onVolumeMappingInput(),this.triggerMethod("mapping:add",t,e)},onVolumeMappingInput:function(){this.model.set("hostDirectory",this.ui.hostDirectoryInput.val()),this.model.set("containerDirectory",this.ui.containerDirectoryInput.val())}});return i.CompositeView.extend({childView:o,childViewContainer:"tbody",childViewOptions:function(t,e){return{index:e}},events:{'focus input[type="text"]':"onInputFocus",'blur input[type="text"]':"onInputBlur"},childViewEvents:{"mapping:change":"onVolumeMappingChange","before:mapping:add":"onBeforeVolumeMappingAdd","mapping:add":"onVolumeMappingAdd","mapping:remove":"onVolumeMappingRemove"},initialize:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.collection=new n.Collection,[].concat(_toConsumableArray(e.volumeMappings)).forEach(function(e){return t.collection.add(new r(e))}),this.collection.add(new r,{at:0}),this.$el.closest("form").submit(function(){return!t.$el.find(".error").length})},template:function(t){return bamboo.feature.docker.volume.mapping.table(t)},validate:function(){var t=this.children.toArray(),e=t.slice(1);return t.forEach(function(t){return t.removeErrors()}),e.map(function(t,n){var i=e.slice(0,n);return t.validate(i)}).every(function(t){return t===!0})},onVolumeMappingChange:function(){this.validate()},onBeforeVolumeMappingAdd:function(){var t=this.children.toArray(),e=t.slice(1),n=t[0];n.validate(e)&&n.addVolumeMapping()},onVolumeMappingAdd:function(t,e){this.collection.add(new r({hostDirectory:t,containerDirectory:e})),this.render(),this.validate()},onVolumeMappingRemove:function(t){this.collection.remove(t.model),this.render(),this.validate()},onInputFocus:function(e){t(e.currentTarget).closest("tr").addClass("active")},onInputBlur:function(e){t(e.currentTarget).closest("tr").removeClass("active")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-docker-volume', location = '/feature/docker-volume/docker-volume.soy' */
// This file was automatically generated from docker-volume.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.docker.volume.mapping.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.docker == 'undefined') { bamboo.feature.docker = {}; }
if (typeof bamboo.feature.docker.volume == 'undefined') { bamboo.feature.docker.volume = {}; }
if (typeof bamboo.feature.docker.volume.mapping == 'undefined') { bamboo.feature.docker.volume.mapping = {}; }


bamboo.feature.docker.volume.mapping.table = function(opt_data, opt_ignored) {
  return '<table class="docker-pipelines__volumes-table aui"><thead><tr><th>' + soy.$$escapeHtml("Host directory") + '</th><th>' + soy.$$escapeHtml("Container directory") + '</th><th></th></tr></thead><tbody></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.feature.docker.volume.mapping.table.soyTemplateName = 'bamboo.feature.docker.volume.mapping.table';
}


bamboo.feature.docker.volume.mapping.tableRow = function(opt_data, opt_ignored) {
  return '<td class="volumes-table__directory"><input type="text" name="hostDirectory' + ((opt_data.index > 0) ? '_' + soy.$$escapeHtml(opt_data.index) : '') + '" class="text" value="' + soy.$$escapeHtml(opt_data.hostDirectory) + '"/><td class="volumes-table__container"><input type="text" name="containerDirectory' + ((opt_data.index > 0) ? '_' + soy.$$escapeHtml(opt_data.index) : '') + '" class="text" value="' + soy.$$escapeHtml(opt_data.containerDirectory) + '"/></td><td class="volumes-table__actions">' + ((opt_data.index == 0) ? '<div class="volumes-table__actions--add aui-button">' + soy.$$escapeHtml("Add") + '</div>' : '<a class="volumes-table__actions--remove" id="container_remove_' + soy.$$escapeHtml(opt_data.index) + '">' + soy.$$escapeHtml("Remove") + '</a>') + '</td>';
};
if (goog.DEBUG) {
  bamboo.feature.docker.volume.mapping.tableRow.soyTemplateName = 'bamboo.feature.docker.volume.mapping.tableRow';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/credentials/dialog-form-add-credentials.soy' */
// This file was automatically generated from dialog-form-add-credentials.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.aws.dialog.form.add.credentials.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.aws == 'undefined') { bamboo.plugins.aws = {}; }
if (typeof bamboo.plugins.aws.dialog == 'undefined') { bamboo.plugins.aws.dialog = {}; }
if (typeof bamboo.plugins.aws.dialog.form == 'undefined') { bamboo.plugins.aws.dialog.form = {}; }
if (typeof bamboo.plugins.aws.dialog.form.add == 'undefined') { bamboo.plugins.aws.dialog.form.add = {}; }
if (typeof bamboo.plugins.aws.dialog.form.add.credentials == 'undefined') { bamboo.plugins.aws.dialog.form.add.credentials = {}; }


bamboo.plugins.aws.dialog.form.add.credentials.form = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: '<p>' + soy.$$escapeHtml("These credentials are availale for use by all Bamboo users.") + '</p>'}) + aui.form.form({action: "" + '/rest/aws/latest/credentials', method: 'POST', content: '' + aui.form.textField({labelContent: "Credential name", isRequired: true, name: 'name'}) + aui.form.textField({labelContent: "Access key ID", isRequired: true, name: 'accessKey'}) + aui.form.passwordField({labelContent: "Secret access key", isRequired: true, name: 'secretKey'})});
};
if (goog.DEBUG) {
  bamboo.plugins.aws.dialog.form.add.credentials.form.soyTemplateName = 'bamboo.plugins.aws.dialog.form.add.credentials.form';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/codedeploy/aws-autocomplete.soy' */
// This file was automatically generated from aws-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.aws.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.aws == 'undefined') { bamboo.plugins.aws = {}; }
if (typeof bamboo.plugins.aws.autocomplete == 'undefined') { bamboo.plugins.aws.autocomplete = {}; }


bamboo.plugins.aws.autocomplete.error = function(opt_data, opt_ignored) {
  return '<div class="error control-form-error ajax-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.aws.autocomplete.error.soyTemplateName = 'bamboo.plugins.aws.autocomplete.error';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/codedeploy/aws-autocomplete.js' */
define("codedeploy/aws-autocomplete",["jquery","underscore","util/ajax","widget/autocomplete","credentials/dialog-form-add-credentials"],function(f,b,e,d,a){var c=Backbone.View.extend({defaultSettings:{urlBuckets:b.template(AJS.contextPath()+"/rest/aws/latest/credentials/<%=credentialId%>/s3/buckets"),urlApplications:b.template(AJS.contextPath()+"/rest/aws/latest/credentials/<%=credentialId%>/regions/<%=region%>/codedeploy/applications"),urlDeploymentGroups:b.template(AJS.contextPath()+"/rest/aws/latest/credentials/<%=credentialId%>/regions/<%=region%>/codedeploy/applications/<%=application%>/deploymentGroups"),$credentialsEl:undefined,$regionEl:undefined,$bucketsEl:undefined,$applicationsEl:undefined,$deploymentGroupsEl:undefined},initialize:function(g){b.extend(this,this.defaultSettings,g);this.bucketsAutocomplete=this.createAutocomplete(this.$bucketsEl,"bucketsAutocomplete");this.applicationsAutocomplete=this.createAutocomplete(this.$applicationsEl,"applicationsAutocomplete");this.deploymentGroupsAutocomplete=this.createAutocomplete(this.$deploymentGroupsEl,"deploymentGroupsAutocomplete");this.attachEvents();this.populateAutocomplete()},createAutocomplete:function(h,g){return new d({el:h,formatResult:this.onAutocompleteFormat,formatSelection:this.onAutocompleteFormat,query:b.bind(this.onQuery,this,g)})},attachEvents:function(){f(this.$credentialsEl).add(this.$regionEl).change(b.bind(function(){[this.bucketsAutocomplete,this.applicationsAutocomplete,this.deploymentGroupsAutocomplete].forEach(function(g){g.clearValue();g.processData([])},this);this.populateAutocomplete()},this));this.$applicationsEl.change(b.bind(this.populateDeploymentGroups,this));this.$addCredentialsEl.click(b.bind(function(g){g.preventDefault();new a({$credentialsEl:this.$credentialsEl})},this))},onQuery:function(g,h){h.callback({results:b.filter(this[g].data,function(i){return h.text===""||i.text.toUpperCase().indexOf(h.term.toUpperCase())>=0})})},onAutocompleteFormat:function(g){return g.text},populateAutocomplete:function(){this.populateBuckets();this.populateApplications()},populateBuckets:function(){var g=this.$credentialsEl.val();if(!g){return}return this.fetchResults(this.bucketsAutocomplete,this.urlBuckets({credentialId:g}))},populateApplications:function(){var g=this.$credentialsEl.val();if(!g){return}return this.fetchResults(this.applicationsAutocomplete,this.urlApplications({credentialId:g,region:this.$regionEl.val()}))},populateDeploymentGroups:function(){var g=this.$applicationsEl.val();if(!g){return}return this.fetchResults(this.deploymentGroupsAutocomplete,this.urlDeploymentGroups({credentialId:this.$credentialsEl.val(),region:this.$regionEl.val(),application:g}))},fetchResults:function(h,g){h.$el.parent().find(".ajax-error, .aui-icon-wait").remove();h.addLoadingIcon();h.disable();return e({url:g,error:{}}).then(b.bind(this.onRequestSuccess,h)).fail(b.bind(this.onRequestError,h)).always(b.bind(this.onRequestEnd,h))},onRequestSuccess:function(j){var h=j.results.map(function(k){return{text:k.name,id:k.name}});var i=h[0];var g=this.$el.val();if(g){i=h.filter(function(k){return k.text===g},this)[0]||i}this.$el.auiSelect2("data",i);this.$el.trigger("change");this.processData(h)},onRequestError:function(g){if(g.responseJSON&&g.responseJSON.message){this.$el.after(f(bamboo.plugins.aws.autocomplete.error({message:g.responseJSON.message})))}this.clearValue();this.processData([])},onRequestEnd:function(){this.removeLoadingIcon();this.enable()}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/credentials/dialog-form-add-credentials.js' */
define("credentials/dialog-form-add-credentials",["jquery","underscore","widget/dialog-form","widget/dialog","util/ajax","util/ajax-form"],function(g,d,e,c,f,a){var b=e.extend({template:bamboo.plugins.aws.dialog.form.add.credentials,defaultSettings:{buttons:[{id:"save",label:"Save credentials",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}],header:"Add Amazon Web Services credentials",width:550,height:400},initialize:function(h){var i=h||{};i.content=this.template.form();e.prototype.initialize.call(this,i)},onCreateInstance:function(){c.prototype.onCreateInstance.apply(this,arguments);var h=this.dialog.getPage(0).body.find("form");this.form=new a(h,{url:h.attr("action"),type:h.attr("method")});this.form.bind(this.formSettings);this.form.on("error",d.bind(this.onFormError,this)).on("submit",d.bind(this.onFormSubmit,this)).on("success",d.bind(this.onFormSuccess,this))},onFormSuccess:function(i,h){g(this.settings.$credentialsEl).append(g("<option />",{val:h.id,text:h.name})).val(h.id).trigger("change");e.prototype.onFormSuccess.call(this)}});return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/repository-form.js' */
define("plugin-bitbucket/repository-form",["jquery","underscore","brace","util/events","util/elements"],function(f,a,c,b,e){var d=c.View.extend({mixins:[b.EventBusMixin,e],elements:{repository:'input[name="repository.bitbucket.repository"]'},inheritedData:{repository:""},initialize:function(g){this.params=g.params||{};if(g.elements){this.elements=g.elements}if(g.params.inheritedData){this.inheritedData=g.params.inheritedData}this.onEvent("unbind",this.onUnbind);this.onEvent("repository:server:toggle-override",this.onToggleBranchOverride);this.onEvent("bitbucket:repository:update",this.onRepositoryUpdate);this.onEvent("bitbucket:repository:init",a.bind(function(h,i){this.onRepositoryUpdate(h,i,true)},this));this.onEvent("bitbucket:errors:show",this.onShowFieldErrors);this.onEvent("bitbucket:errors:clear",this.onClearFieldErrors);this.triggerEvent("bitbucket:form:config",this.getConfig());this.triggerEvent("bitbucket:repository:selection:init")},onUnbind:function(){this.undelegateEvents();this.clearElementsCache();this.$el.removeData().unbind();this.offEventNamespace("repository");this.offEventNamespace("bitbucket")},isOverrideOn:function(){return !this.params.overrideRepositoryLocation.length||this.params.overrideRepositoryLocation.val()==="true"},onToggleBranchOverride:function(){if(this.inheritedData&&this.inheritedData.repository){var g=this.getElement("repository").val();if(g!==this.inheritedData.repository){if(this.isOverrideOn()){this.triggerEvent("bitbucket:repository:change",{fullName:g},false)}else{this.triggerEvent("bitbucket:repository:change",{fullName:this.inheritedData.repository},false)}}}},onRepositoryUpdate:function(g,h,i){this.triggerEvent("bitbucket:form:config",this.getConfig());this.triggerEvent("bitbucket:repository:change",h,!!i);this.params.scmEl.val(h.scm.toUpperCase());BAMBOO.DynamicFieldParameters.syncFieldShowHide(this.params.scmEl.parent(),true);if(this.params.detailedConfiguration.hasClass("hidden")){this.params.detailedConfiguration.hide().removeClass("hidden").slideDown()}},onClearFieldErrors:function(){this.$el.find(".error").remove()},onShowFieldErrors:function(g,h,i){if(a.isString(h)){h=this.getElement(h)}h.parent().find(".error").remove();BAMBOO.addFieldErrors(h.closest("form"),h.attr("name"),i,true)},getConfig:function(){return{repository:this.getElement("repository").val()}}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/branch-autocomplete.js' */
define("plugin-bitbucket/branch-autocomplete",["jquery","underscore","widget/autocomplete-ajax","plugin-bitbucket/bitbucket-autocomplete","util/events","util/elements"],function(g,b,a,e,d,f){var c=e.extend({mixins:[d.EventBusMixin,f],initialize:function(h){this.params=g.extend({url:AJS.contextPath()+"/rest/hg/latest/bb/branches",urlSingle:AJS.contextPath()+"/rest/hg/latest/bb/branch",urlDefault:AJS.contextPath()+"/rest/hg/latest/bb/branches/default"},h.params||{});this.query={limit:10};var j=b.bind(function(l,n,k){var m=g.extend({start:Math.max((n-1),0),query:l},this.query);if(!k&&(n-1)>0&&this.data.nextPage){m.start=this.data.nextPage}b.extend(m,this.getJsonAuthenticationParams());return JSON.stringify(m)},this);var i={minimumInputLength:0,ajax:{type:"POST",url:this.params.url,dataType:"json",data:j,params:{error:b.bind(this.onRemoteError,this)},results:b.bind(function(l,k){return this.processData({results:l.values,nextPage:l.nextPageStart||0,more:!l.lastPage})},this)},id:function(k){return k.branch}};this.onEvent("unbind",this.onUnbind);this.onEvent("bitbucket:repository:change",this.onRepositoryChange);this.onEvent("bitbucket:repository:selection:init",this.onRepositorySelectionInit);this.onEvent("bitbucket:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");a.prototype.initialize.apply(this,[g.extend(i,this.params)]);this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("bitbucket")},onFormConfig:function(h,i){this.config=i},onRepositorySelectionInit:function(){this.clearQueryCache().clearValue().disable().toggleContainer(this.$fieldGroup.parent(),false)},clearBranchErrorMessages:function(){this.$fieldGroup.find(".error").remove()},onRepositoryChange:function(h,i,l){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.clearBranchErrorMessages();this.clearQueryCache().disable();this.query={limit:10};if(i&&i.fullName){this.query.repository=i.fullName}if(l!==true){this.$el.val("")}if(this.query.repository){var j=this.$el.val();var k=b.bind(function(m){this.triggerEvent("bitbucket:branch:change",m);this.$el.auiSelect2("data",m);this.removeLoadingIcon().enable()},this);this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(b.bind(function(){this.addLoadingIcon()},this));if(!j.length){this.getRemoteData(this.params.urlDefault,{dataType:this.settings.ajax.dataType,data:this.query}).done(k)}else{this.query.branch=j;this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:this.query}).always(function(){k({branch:j})})}}},onRegisterEvents:function(){this.$el.on("change",b.bind(function(h){if(h.val.length>0){this.triggerEvent("bitbucket:errors:clear");this.triggerEvent("bitbucket:branch:change",h.added)}},this))},onFormatResult:function(h){if(!b.isEmpty(h)){return bamboo.plugins.bitbucket.branch.autocomplete.row({item:h})}},onFormatSelection:function(h){if(!b.isEmpty(h)){return bamboo.plugins.bitbucket.branch.autocomplete.row({item:h})}}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/branch-autocomplete.soy' */
// This file was automatically generated from branch-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.bitbucket.branch.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.bitbucket == 'undefined') { bamboo.plugins.bitbucket = {}; }
if (typeof bamboo.plugins.bitbucket.branch == 'undefined') { bamboo.plugins.bitbucket.branch = {}; }
if (typeof bamboo.plugins.bitbucket.branch.autocomplete == 'undefined') { bamboo.plugins.bitbucket.branch.autocomplete = {}; }


bamboo.plugins.bitbucket.branch.autocomplete.row = function(opt_data, opt_ignored) {
  return aui.icons.icon({icon: 'devtools-branch', useIconFont: true}) + ' ' + soy.$$escapeHtml(opt_data.item.branch);
};
if (goog.DEBUG) {
  bamboo.plugins.bitbucket.branch.autocomplete.row.soyTemplateName = 'bamboo.plugins.bitbucket.branch.autocomplete.row';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/bitbucket-autocomplete.js' */
define("plugin-bitbucket/bitbucket-autocomplete",["jquery","underscore","widget/autocomplete-ajax"],function(d,b,a){var c=a.extend({getRemoteData:function(e,g){this.$el.removeClass("ajax-completed");var f=b.extend(g.data,this.getJsonAuthenticationParams());return d.ajax({type:"POST",url:e,data:JSON.stringify(f),contentType:"application/json",dataType:"json"}).fail(b.bind(this.onRemoteError,this)).complete(b.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime());this.$el.addClass("ajax-completed")},this))},onRemoteError:function(f){var g=[];this.$fieldGroup.show();this.$el.auiSelect2("close");this.removeLoadingIcon().clearValue().enable().$el.val("");if(f.responseText){var e=JSON.parse(f.responseText);if(e.errors){g=e.errors}}if(!g.length){g.push("Failed to load data from Bitbucket.")}this.triggerEvent("bitbucket:errors:show",this.$el,g)},isOverrideOn:function(){return !this.params.overrideRepositoryLocation.length||this.params.overrideRepositoryLocation.val()==="true"},getJsonAuthenticationParams:function(){if(this.isOverrideOn()){var e={accessLevel:this.params.accessLevel.val()};if(e.accessLevel==="PUBLIC"){e.username=this.params.owner.val()}else{e.credentialsSource=this.getCredentialsSource();if(e.credentialsSource==="SHARED_CREDENTIALS"){e.sharedCredentialsId=this.params.sharedCredentialsId.val()}else{e.username=this.params.username.val();e.password=this.params.password.val()}}e.repositoryId=this.params.repositoryId;return e}else{return{repositoryId:this.params.inheritedData.id,repository:this.params.inheritedData.repository}}},getCredentialsSource:function(){return this.params.credentialsSource.filter(function(f,e){return d(e).is(":checked")}).val()}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/repository-autocomplete.js' */
define("plugin-bitbucket/repository-autocomplete",["jquery","underscore","widget/autocomplete-ajax","plugin-bitbucket/bitbucket-autocomplete","widget/help-dialog","util/events","util/elements","util/ajax"],function(c,g,b,e,d,i,a,f){var h=e.extend({mixins:[i.EventBusMixin,a],initialize:function(j){this.params=c.extend({url:AJS.contextPath()+"/rest/hg/latest/bb/repositories",urlSingle:AJS.contextPath()+"/rest/hg/latest/bb/repository"},j.params||{});this.query=c.extend({limit:10},j.query||{});var l=g.bind(function(n,p,m){var o=c.extend({start:Math.max((p-1),0),query:n},this.query);if(!m&&(p-1)>0&&this.data.nextPage){o.start=this.data.nextPage}g.extend(o,this.getJsonAuthenticationParams());return JSON.stringify(o)},this);var k={minimumInputLength:0,ajax:{url:this.params.url,type:"POST",dataType:"json",data:l,params:{error:g.bind(this.onRemoteError,this)},results:g.bind(function(n,m){return this.processData({results:n.values,nextPage:n.nextPageStart||0,more:!n.lastPage})},this)},id:function(m){return m.fullName}};this.onEvent("unbind",this.onUnbind);this.onEvent("bitbucket:repository:selection:init",this.onRepositorySelectionInit);this.onEvent("bitbucket:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");b.prototype.initialize.apply(this,[c.extend(k,this.params)]);this.addDescriptionField();this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("bitbucket")},onFormConfig:function(j,k){this.config=k},onRepositorySelectionInit:function(){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.clearRepositoryErrorMessages();this.$fieldGroup.find(".aui-message").remove();this.clearQueryCache().disable();this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(g.bind(function(){this.addLoadingIcon()},this));if(this.params.slugEl.val().length){var k=this.params.slugEl.val();var j=this.params.scmEl.val().toLowerCase();this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:{repository:k}}).done(g.bind(function(l){this.triggerEvent("bitbucket:repository:init",l);this.$el.auiSelect2("data",l)},this)).fail(g.bind(function(){var l={fullName:k,scm:j};this.triggerEvent("bitbucket:repository:init",l);this.$el.auiSelect2("data",l)},this)).always(g.bind(function(){this.removeLoadingIcon().enable()},this))}else{this.removeLoadingIcon().enable()}},onRegisterEvents:function(){this.$el.on("change",g.bind(this.onRepositoryChange,this))},onRepositoryChange:function(k){if(k.val.length>0){this.triggerEvent("bitbucket:errors:clear");var j=k.added;this.triggerEvent("bitbucket:repository:update",j)}},onFormatResult:function(j){if(!g.isEmpty(j)){return bamboo.plugins.bitbucket.repository.autocomplete.row({item:j})}},onFormatSelection:function(j){if(!g.isEmpty(j)){return bamboo.plugins.bitbucket.repository.autocomplete.row({item:j})}},clearRepositoryErrorMessages:function(){this.$fieldGroup.find(".aui-message").remove()},addDescriptionField:function(){var j=c(document.createElement("div")).addClass("description");this.$el.parent(".field-value").after(j);return this}});return h});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/repository-autocomplete.soy' */
// This file was automatically generated from repository-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.bitbucket.repository.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.bitbucket == 'undefined') { bamboo.plugins.bitbucket = {}; }
if (typeof bamboo.plugins.bitbucket.repository == 'undefined') { bamboo.plugins.bitbucket.repository = {}; }
if (typeof bamboo.plugins.bitbucket.repository.autocomplete == 'undefined') { bamboo.plugins.bitbucket.repository.autocomplete = {}; }


bamboo.plugins.bitbucket.repository.autocomplete.row = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.item.fullName) + ' (' + soy.$$escapeHtml(opt_data.item.scm) + ')';
};
if (goog.DEBUG) {
  bamboo.plugins.bitbucket.repository.autocomplete.row.soyTemplateName = 'bamboo.plugins.bitbucket.repository.autocomplete.row';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.bamboo-docker-plugin:docker-resources', location = '/docker/docker.js' */
(function(b,a){a.DOCKER={};a.DOCKER.DockerTaskConfiguration=(function(){var f={pluginSelector:"#docker-plugin",portsSelector:null,volumesSelector:null,templates:{portsListItem:null,volumesListItem:null}},q,p=/^[0-9]{1,5}$/,n,d,l=function(){var x=n.children("tbody");var w=x.children(":first");var v=x.children(":last");var z=(x.children().length>1?(parseInt(v.attr("data-ports-id"),10)+1):0);var y=w.find('input[name="hostPort"]');var t=w.find('input[name="containerPort"]');var r="";var u="";y.parent().find(".error").remove();t.parent().find(".error").remove();var B=n.find("input").serializeArray().filter(function(C){return(C.name&&(C.name.indexOf("containerPort_")===0||C.name.indexOf("hostPort_")===0))});var s=B.some(function(C){return(C.name.indexOf("hostPort")===0&&y.val()===C.value)});var A=B.some(function(C){return(C.name.indexOf("containerPort")===0&&t.val()===C.value)});if(y.val()){if(!p.test(y.val())){r="Invalid port"}else{if(s){r="Port already defined"}}}if(!t.val()){u="You must specify a container port"}else{if(!p.test(t.val())){u="Invalid port"}else{if(A){u="Port already defined"}}}if(r||u){y.after(b('<div class="error control-form-error"/>').text(r));t.after(b('<div class="error control-form-error"/>').text(u));return}b(AJS.template.load(q.templates.portsListItem).fill({index:z,hostPort:y.val(),containerPort:t.val()}).toString()).hide().appendTo(x).end().slideDown();y.val("");t.val("");a.DynamicFieldParameters.syncFieldShowHide(x)},i=function(){b(this).closest("tr").slideUp(function(){b(this).remove()})},j=function(r){b(this).parents("tr").addClass("active")},m=function(r){b(this).parents("tr").removeClass("active")},o=function(s){n.find(".error.control-form-error").remove();var r=n.find("input").serializeArray().filter(function(t){return(t.name&&(t.name.indexOf("containerPort_")===0||t.name.indexOf("hostPort_")===0))});r.forEach(function(v){var t="";var u=r.some(function(w){return(w.name.indexOf("containerPort")===0&&v.name.indexOf("containerPort")===0&&w.value===v.value&&v.name!==w.name)||(w.name.indexOf("hostPort")===0&&v.name.indexOf("hostPort")===0&&w.value===v.value&&v.name!==w.name)});if(!v.value){if(v.name.indexOf("containerPort")===0){t="You must specify a container port"}}else{if(!p.test(v.value)){t="Invalid port"}else{if(u){t="Port already defined"}}}if(t){b("#"+v.name).closest("td").append(b("<div/>").addClass("error control-form-error").text(t));s.stopPropagation();s.preventDefault()}})},e=function(){var w=d.children("tbody");var u=w.children(":first");var v=w.children(":last");var t=(w.children().length>1?(parseInt(v.attr("data-volumes-id"),10)+1):0);var r=u.find('input[name="hostDirectory"]');var s=u.find('input[name="containerDataVolume"]');s.parent().find(".error").remove();if(!s.val()){return s.after(b('<div class="error control-form-error"/>').text("Container data volume must be specified"))}b(AJS.template.load(q.templates.volumesListItem).fill({index:t,hostDirectory:r.val(),containerDataVolume:s.val()}).toString()).hide().appendTo(w).end().slideDown();r.val("");s.val("");a.DynamicFieldParameters.syncFieldShowHide(w)},k=function(){b(this).closest("tr").slideUp(function(){b(this).remove()})},g=function(r){b(this).parents("tr").addClass("active")},h=function(r){b(this).parents("tr").removeClass("active")},c=function(r){if(!b(this).val()){b(this).parents("tr").addClass("error");b(this).after(b('<div class="error control-form-error"/>').text("Container data volume must be specified"))}else{b(this).parents("tr").removeClass("error");b(this).parent().find(".error").remove()}};return{init:function(r){q=b.extend(true,f,r);b(function(){n=b(q.portsSelector).on("focus",'input[type="text"]',j).on("blur",'input[type="text"]',m).on("input",q.portsSelector+'-host--edit input[type="text"]',o).on("input",q.portsSelector+'-container--edit input[type="text"]',o).on("click",q.portsSelector+"-actions--add",l).on("click",q.portsSelector+"-actions--remove",i);n.find(".error").parents("tr").addClass("error");b(q.pluginSelector).closest("form").submit(function(){return n.find(q.portsSelector+"-container--edit.error").length});d=b(q.volumesSelector).on("focus",'input[type="text"]',g).on("blur",'input[type="text"]',h).on("input",q.volumesSelector+'-container--edit input[type="text"]',c).on("click",q.volumesSelector+"-actions--add",e).on("click",q.volumesSelector+"-actions--remove",k);d.find(".error").parents("tr").addClass("error");b(q.pluginSelector).closest("form").submit(function(){return d.find(q.volumesSelector+"-container--edit.error").length})})}}}())}(jQuery,window.BAMBOO=(window.BAMBOO||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;