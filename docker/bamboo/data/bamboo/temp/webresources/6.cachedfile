;
try {
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-plugin:data', location = 'js/data/data.js' */
(function(){if(!window.WRM){window.WRM={}}function a(c){if(!c){return c}return JSON.parse(c)}function b(d,c){return Object.prototype.hasOwnProperty.call(d,c)}WRM.data={claim:function(c){if(WRM._unparsedData&&b(WRM._unparsedData,c)){var g=WRM._unparsedData[c];try{var d=a(g);delete WRM._unparsedData[c];return d}catch(f){console&&console.log&&console.log("JSON Error parsing data with key "+c+": "+f)}}}};WRM.onData=function(d,c){if(!c){c=d;d=false}};if(typeof define==="function"){define("wrm/data",[],function(){return WRM.data})}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path', location = 'js/data/context-path.js' */
(function(){var a=null;(window.AJS||(window.AJS={}));AJS.contextPath=function(){if(a===null){a=WRM.data.claim("com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path")}return a};AJS.contextPath._reset=function(){a=null};if(typeof define==="function"){define("wrm/context-path",[],function(){return AJS.contextPath})}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-compatibility', location = 'src/js-vendor/jquery/jquery-compatibility.js' */
jQuery.noConflict();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-polyfills-console', location = 'src/js/aui/polyfills/console.js' */
("undefined"===typeof window?global:window).__c30f661a6916ee439c782cc0f3afb91d=function(){"use strict";"undefined"===typeof window.console?window.console={messages:[],log:function(a){this.messages.push(a)},show:function(){alert(this.messages.join("\n"));this.messages=[]}}:window.console.show=function(){};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-jquery', location = 'src/js/aui/jquery.js' */
("undefined"===typeof window?global:window).__bd7207540b95ff683caa1d3c0bfcc3d7=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=window.jQuery||window.Zepto;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-create-element', location = 'src/js/aui/create-element.js' */
("undefined"===typeof window?global:window).__23ef07a7ffd018f863640ca5236c2766=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__bd7207540b95ff683caa1d3c0bfcc3d7,c=b&&b.__esModule?b:{"default":b};a.default=function(){var a=null;arguments.length&&"string"===typeof arguments[0]&&(a=(0,c.default)(document.createElement(arguments[0])),2===arguments.length&&a.html(arguments[1]));"undefined"!==typeof console&&console.warn&&console.warn("AJS's create element functionality has been deprecated since 5.9.0.\nNo alternative will be provided.\nUse document.createElement() or jQuery.parseHTML(), or preferably use a templating library.");
return a};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-object-assign-4.0.1-index', location = 'node_modules/object-assign/index.js' */
("undefined"===typeof window?global:window).__264aaec7a36d2c0000702a2bc70b6514=function(){var h={},i=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;return h=Object.assign||function(e,h){var a,d;if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(e);for(var b,f=1;f<arguments.length;f++){a=Object(arguments[f]);for(var g in a)i.call(a,g)&&(d[g]=a[g]);if(Object.getOwnPropertySymbols){b=Object.getOwnPropertySymbols(a);for(var c=
0;c<b.length;c++)j.call(a,b[c])&&(d[b[c]]=a[b[c]])}}return d}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-globalize', location = 'src/js/aui/internal/globalize.js' */
("undefined"===typeof window?global:window).__9a668cbde1e182d8e721c23580356df2=function(){function d(){return e.default.apply(void 0,arguments)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){window[c]!==d&&(window[c]=(0,f.default)(d,window[c]));return window[c][a]=b};var a=__23ef07a7ffd018f863640ca5236c2766,e=a&&a.__esModule?a:{"default":a},f=(a=__264aaec7a36d2c0000702a2bc70b6514)&&a.__esModule?a:{"default":a},c="AJS";return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-deprecation', location = 'src/js/aui/internal/deprecation.js' */
("undefined"===typeof window?global:window).__c88c0dc6258c37804917fb6a0e4092fa=function(){function k(){"undefined"!==typeof console&&console.warn&&Function.prototype.apply.call(console.warn,console,arguments)}function h(c,b){if("function"===typeof c)return c;var a=!1,b=b||{};return function(d){var d=d?d:1,f=Error();(f=(f=f.stack||f.stacktrace)&&f.replace(/^Error\n/,"")||"")?(f=f.split("\n"),d=f[d+2]):d=f;d=d||"";if(!a||-1===n.indexOf(d)){n.push(d);a=!0;var f="DEPRECATED "+(b.deprecationType+" "||
"")+"- ",e;e=c;e=(e+="")?e.charAt(0).toUpperCase()+e.substring(1):"";f=f+e+" has been deprecated"+(b.sinceVersion?" since "+b.sinceVersion:"")+" and will be removed in "+(b.removeInVersion||"a future release")+".";b.alternativeName&&(f+=" Use "+b.alternativeName+" instead. ");b.extraInfo&&(f+=" "+b.extraInfo);d=""===d?" \n No stack trace of the deprecated usage is available in your current browser.":" \n "+d;b.extraObject?k(f+"\n",b.extraObject,d):k(f,d)}}}function o(c,b){var a=c.options.displayName,
a=a?" ("+a+")":"",d=l.default.extend({deprecationType:"CSS",extraObject:b},c.options);h("'"+c.selector+"' pattern"+a,d)()}function i(c,b,a){a=a||{};a.deprecationType=a.deprecationType||"JS";var d=h(b||c.name||"this function",a);return function(){d();return c.apply(this,arguments)}}function p(c,b,a){a=a||{};a.deprecationType=a.deprecationType||"JS";b=i(c,b,a);b.prototype=c.prototype;l.default.extend(b,c);return b}function m(c,b,a){if("function"===typeof c[b])a=a||{},a.deprecationType=a.deprecationType||
"JS",c[b]=i(c[b],a.displayName||b,a);else if(j){var d=c[b],a=a||{};a.deprecationType=a.deprecationType||"JS";var e=h(a.displayName||b,a);Object.defineProperty(c,b,{get:function(){e();return d},set:function(a){d=a;e();return a}})}}function q(c,b,a){var a=a||{},d;for(d in c)t.call(c,d)&&(a.deprecationType=a.deprecationType||"JS",a.displayName=b+d,a.alternativeName=a.alternativeNamePrefix&&a.alternativeNamePrefix+d,m(c,d,l.default.extend({},a)))}function u(c){return function(b){var a={selector:b,options:c||
{}};r.push(a);for(var b=document.querySelectorAll(b),d=0;d<b.length;d++)o(a,b[d])}}function s(c,b){window.MutationObserver?("string"===typeof c&&(c=[c]),c.forEach(u(b))):k("CSS could not be deprecated as Mutation Observer was not found.")}function v(c){return function(b){(c.matches||c.msMatchesSelector||c.webkitMatchesSelector||c.mozMatchesSelector||c.oMatchesSelector).call(c,b.selector)&&o(b,c)}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getMessageLogger=e.propertyDeprecationSupported=
e.obj=e.prop=e.css=e.construct=e.fn=void 0;var g=__bd7207540b95ff683caa1d3c0bfcc3d7,l=g&&g.__esModule?g:{"default":g},g=(g=__9a668cbde1e182d8e721c23580356df2)&&g.__esModule?g:{"default":g},t=Object.prototype.hasOwnProperty,n=[],r=[],j=!1;try{Object.defineProperty&&(Object.defineProperty({},"blam",{get:function(){},set:function(){}}),e.propertyDeprecationSupported=j=!0)}catch(x){}window.MutationObserver&&(new MutationObserver(function(c){c.forEach(function(b){for(var b=b.addedNodes,a=0;a<b.length;a++){var c=
b[a];1===c.nodeType&&r.forEach(v(c))}})})).observe(document,{childList:!0,subtree:!0});var w={fn:i,construct:p,css:s,prop:m,obj:q,propertyDeprecationSupported:j,getMessageLogger:h};(0,g.default)("deprecate",w);e.fn=i;e.construct=p;e.css=s;e.prop=m;e.obj=q;e.propertyDeprecationSupported=j;e.getMessageLogger=h;return e}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-polyfills-custom-event', location = 'src/js/aui/polyfills/custom-event.js' */
("undefined"===typeof window?global:window).__b4f5303c3f6b97d2fd503b5013ff8de7=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=void 0;a:{if(window.CustomEvent)try{var c=new window.CustomEvent("name",{bubbles:!1,cancelable:!0,detail:{x:"y"}});c.preventDefault();if(!0!==c.defaultPrevented)throw Error("Could not prevent default");if("name"!==c.type)throw Error("Could not set custom name");if("y"!==c.detail.x)throw Error("Could not set detail");a=window.CustomEvent;
break a}catch(e){}a=function(b,d){var d=d||{bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");a.initCustomEvent(b,!!d.bubbles,!!d.cancelable,d.detail);var c=a.preventDefault;a.preventDefault=function(){c.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(a){this.defaultPrevented=!0}};return a};a.prototype=window.Event.prototype}b.default=a;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-constants', location = 'node_modules/skatejs/lib/constants.js' */
("undefined"===typeof window?global:window).__9d236359921e13b5fcf3157e2c735602=function(){var d={exports:{}},e=d.exports,i={module:d,exports:e},a;a=function(f,a,g){var c=("undefined"===typeof window?global:window).define,b,h,g=[g,a,f].filter(function(a){return"function"===typeof a})[0],a=[a,f,[]].filter(Array.isArray)[0];b=g.apply(null,a.map(function(a){return i[a]}));h=typeof b;"function"===typeof c&&c("string"===typeof f?f:"__9d236359921e13b5fcf3157e2c735602",a,g);"string"===h?b=String(b):"number"===
h?b=Number(b):"boolean"===h&&(b=Boolean(b));void 0!==b&&(e=d.exports=b)};a.amd=!0;var c=function(a){Object.defineProperty(a,"__esModule",{value:!0});a.ATTR_IGNORE="data-skate-ignore";a.TYPE_ATTRIBUTE="a";a.TYPE_CLASSNAME="c";a.TYPE_ELEMENT="t"};"function"===typeof a&&a.amd?a(["exports"],c):"undefined"!==typeof e&&c(e);return d.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-version', location = 'node_modules/skatejs/lib/version.js' */
("undefined"===typeof window?global:window).__14e4e8bfa403103c4675c6cb0be7a4a3=function(){var d={exports:{}},f=d.exports,i={module:d,exports:f},a;a=function(a,c,g){var e=("undefined"===typeof window?global:window).define,b,h,g=[g,c,a].filter(function(a){return"function"===typeof a})[0],c=[c,a,[]].filter(Array.isArray)[0];b=g.apply(null,c.map(function(a){return i[a]}));h=typeof b;"function"===typeof e&&e("string"===typeof a?a:"__14e4e8bfa403103c4675c6cb0be7a4a3",c,g);"string"===h?b=String(b):"number"===
h?b=Number(b):"boolean"===h&&(b=Boolean(b));void 0!==b&&(f=d.exports=b)};a.amd=!0;var e=function(a,c){c.exports="0.13.17"};"function"===typeof a&&a.amd?a(["exports","module"],e):"undefined"!==typeof f&&"undefined"!==typeof d&&e(f,d);return d.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-globals', location = 'node_modules/skatejs/lib/globals.js' */
("undefined"===typeof window?global:window).__6466b6e8107a8bd9775ee239234e3544=function(){var e={exports:{}},g=e.exports,j={module:e,exports:g,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3},b;b=function(c,f,d){var b=("undefined"===typeof window?global:window).define,a,h,d=[d,f,c].filter(function(a){return"function"===typeof a})[0],f=[f,c,[]].filter(Array.isArray)[0];a=d.apply(null,f.map(function(a){return j[a]}));h=typeof a;"function"===typeof b&&b("string"===
typeof c?c:"__6466b6e8107a8bd9775ee239234e3544",f,d);"string"===h?a=String(a):"number"===h?a=Number(a):"boolean"===h&&(a=Boolean(a));void 0!==a&&(g=e.exports=a)};b.amd=!0;var i=function(c,b,d){c="__skate_"+(d&&d.__esModule?d["default"]:d).replace(/[^\w]/g,"_");window[c]||(window[c]={observer:void 0,registry:{}});b.exports=window[c]};"function"===typeof b&&b.amd?b(["exports","module","./version"],i):"undefined"!==typeof g&&"undefined"!==typeof e&&i(g,e,__14e4e8bfa403103c4675c6cb0be7a4a3);return e.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-data', location = 'node_modules/skatejs/lib/data.js' */
("undefined"===typeof window?global:window).__e5ac83e1fd2c7d9ba811c5dc3cf8b392=function(){var e={exports:{}},f=e.exports,j={module:e,exports:f},b;b=function(b,c,g){var h=("undefined"===typeof window?global:window).define,a,d,g=[g,c,b].filter(function(a){return"function"===typeof a})[0],c=[c,b,[]].filter(Array.isArray)[0];a=g.apply(null,c.map(function(a){return j[a]}));d=typeof a;"function"===typeof h&&h("string"===typeof b?b:"__e5ac83e1fd2c7d9ba811c5dc3cf8b392",c,g);"string"===d?a=String(a):"number"===
d?a=Number(a):"boolean"===d&&(a=Boolean(a));void 0!==a&&(f=e.exports=a)};b.amd=!0;var i=function(b,c){c.exports=function(b,c){var a=void 0===c?"":c,d=b.__SKATE_DATA||(b.__SKATE_DATA={});return a&&(d[a]||(d[a]={}))||d}};"function"===typeof b&&b.amd?b(["exports","module"],i):"undefined"!==typeof f&&"undefined"!==typeof e&&i(f,e);return e.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-mutation-observer', location = 'node_modules/skatejs/lib/mutation-observer.js' */
/*

 Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
("undefined"===typeof window?global:window).__04e4ad44d1846e5700205516c1a42717=function(){var k={exports:{}},n=k.exports,t={module:k,exports:n},i;i=function(g,o,p){var f=("undefined"===typeof window?global:window).define,d,l,p=[p,o,g].filter(function(d){return"function"===typeof d})[0],o=[o,g,[]].filter(Array.isArray)[0];d=p.apply(null,o.map(function(d){return t[d]}));l=typeof d;"function"===typeof f&&f("string"===typeof g?g:"__04e4ad44d1846e5700205516c1a42717",o,p);"string"===l?d=String(d):"number"===
l?d=Number(d):"boolean"===l&&(d=Boolean(d));void 0!==d&&(n=k.exports=d)};i.amd=!0;var q=function(){var g=window;if("undefined"===typeof WeakMap){var o=Object.defineProperty,p=Date.now()%1E9,f=function(){this.name="__st"+(1E9*Math.random()>>>0)+(p++ +"__")};f.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:o(a,this.name,{value:[a,b],writable:!0});return this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){var b=a[this.name];if(!b||b[0]!==
a)return!1;b[0]=b[1]=void 0;return!0},has:function(a){var b=a[this.name];return!b?!1:b[0]===a}};window.WeakMap=f}var d=function(){u=!1;var a=v;v=[];a.sort(function(b,a){return b.uid_-a.uid_});var b=!1;a.forEach(function(a){var e=a.takeRecords();a.nodes_.forEach(function(b){(b=m.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})});e.length&&(a.callback_(e,a),b=!0)});b&&d()},l=function(a,b){for(var c=a;c;c=c.parentNode){var e=m.get(c);if(e)for(var w=0;w<e.length;w++){var d=
e[w],h=d.options;if(c===a||h.subtree)(h=b(h))&&d.enqueue(h)}}},f=function(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++t},i=function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null},k=function(a,b){return r=new i(a,b)},n=function(a){if(j)return j;var b=r,c=new i(b.type,b.target);c.addedNodes=b.addedNodes.slice();c.removedNodes=b.removedNodes.slice();c.previousSibling=
b.previousSibling;c.nextSibling=b.nextSibling;c.attributeName=b.attributeName;c.attributeNamespace=b.attributeNamespace;c.oldValue=b.oldValue;j=c;j.oldValue=a;return j},q=function(a,b,c){this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[]};if(!g.JsMutationObserver){var m=new WeakMap,s;if(/Trident|Edge/.test(navigator.userAgent))s=setTimeout;else if(window.setImmediate)s=window.setImmediate;else{var x=[],y=String(Math.random());window.addEventListener("message",function(a){a.data===
y&&(a=x,x=[],a.forEach(function(b){b()}))});s=function(a){x.push(a);window.postMessage(y,"*")}}var u=!1,v=[],t=0;f.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var c=m.get(a);c||m.set(a,c=[]);for(var e,d=0;d<c.length;d++)if(c[d].observer===
this){e=c[d];e.removeListeners();e.options=b;break}e||(e=new q(this,a,b),c.push(e),this.nodes_.push(a));e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var a=m.get(a),b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var r,j;q.prototype={enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var e=b[c-1]===a?b[c-
1]:j&&(b[c-1]===j||b[c-1]===r)?j:null;if(e){b[c-1]=e;return}}else v.push(this.observer),u||(u=!0,s(d));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},
removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=m.get(a);b||m.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=
this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(b){this.removeListeners_(b);for(var b=m.get(b),a=0;a<b.length;a++)if(b[a]===this){b.splice(a,1);break}},this)},handleEvent:function(a){a.stopImmediatePropagation();switch(a.type){case "DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,e=a.target,d=new k("attributes",e);d.attributeName=b;d.attributeNamespace=c;var f=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;l(e,function(a){if(a.attributes&&(!a.attributeFilter||
!a.attributeFilter.length||!(-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c))))return a.attributeOldValue?n(f):d});break;case "DOMCharacterDataModified":e=a.target;d=k("characterData",e);f=a.prevValue;l(e,function(a){if(a.characterData)return a.characterDataOldValue?n(f):d});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var h=a.target,g;"DOMNodeInserted"===a.type?(e=[h],g=[]):(e=[],g=[h]);var i=h.previousSibling,h=h.nextSibling,d=k("childList",
a.target.parentNode);d.addedNodes=e;d.removedNodes=g;d.previousSibling=i;d.nextSibling=h;l(a.relatedNode,function(a){if(a.childList)return d})}r=j=void 0}};g.JsMutationObserver=f;g.MutationObserver||(g.MutationObserver=f,f._isPolyfilled=!0)}};"function"===typeof i&&i.amd?i(["exports"],q):"undefined"!==typeof n&&q(n);return k.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-utils', location = 'node_modules/skatejs/lib/utils.js' */
("undefined"===typeof window?global:window).__e41b80779e59ba9fc2f4dc8f4297bd33=function(){var f={exports:{}},j=f.exports,l={module:f,exports:j,"./constants":__9d236359921e13b5fcf3157e2c735602,"./constants":__9d236359921e13b5fcf3157e2c735602},d;d=function(b,i,g){var d=("undefined"===typeof window?global:window).define,c,e,g=[g,i,b].filter(function(a){return"function"===typeof a})[0],i=[i,b,[]].filter(Array.isArray)[0];c=g.apply(null,i.map(function(a){return l[a]}));e=typeof c;"function"===typeof d&&
d("string"===typeof b?b:"__e41b80779e59ba9fc2f4dc8f4297bd33",i,g);"string"===e?c=String(c):"number"===e?c=Number(c):"boolean"===e&&(c=Boolean(c));void 0!==c&&(j=f.exports=c)};d.amd=!0;var k=function(b,d){function g(a,m){return Object.prototype.hasOwnProperty.call(a,m)}b.hasOwn=g;b.camelCase=function(a){return a.split(/-/g).map(function(a,b){return 0===b?a:a[0].toUpperCase()+a.substring(1)}).join("")};b.elementContains=function(a,b){return a===document&&!a.contains?document.head.contains(b)||document.body.contains(b):
a.contains?a.contains(b):e.call(a,b)};b.debounce=function(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1;a()},1))}};b.getClosestIgnoredElement=function(a){for(;a instanceof Element;){if(a.hasAttribute(f))return a;a=a.parentNode}};b.inherit=function(a,b,c){for(var d=Object.getOwnPropertyNames(b),g=d.length,f=0;f<g;f++){var e=d[f];if(c||void 0===a[e]){var h=Object.getOwnPropertyDescriptor(b,e);h.get||h.set||!h.writable||!h.enumerable||!h.configurable?Object.defineProperty(a,e,h):
a[e]=b[e]}}return a};b.objEach=function(a,b){for(var c in a)g(a,c)&&b(a[c],c)};b.supportsNativeCustomElements=function(){return"function"===typeof document.registerElement};b.isValidNativeCustomElementName=function(a){return 0<a.indexOf("-")};Object.defineProperty(b,"__esModule",{value:!0});var f=d.ATTR_IGNORE,c=window.HTMLElement.prototype;b.elementPrototype=c;var e=c.contains};"function"===typeof d&&d.amd?d(["exports","./constants"],k):"undefined"!==typeof j&&k(j,__9d236359921e13b5fcf3157e2c735602);
return f.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-registry', location = 'node_modules/skatejs/lib/registry.js' */
("undefined"===typeof window?global:window).__2964ebf30f320caf67e277ab8abf2b53=function(){var h={exports:{}},l=h.exports,o={module:h,exports:l,"./constants":__9d236359921e13b5fcf3157e2c735602,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./constants":__9d236359921e13b5fcf3157e2c735602,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33},b;b=function(b,d,f){var k=("undefined"===typeof window?global:window).define,
a,n,f=[f,d,b].filter(function(a){return"function"===typeof a})[0],d=[d,b,[]].filter(Array.isArray)[0];a=f.apply(null,d.map(function(a){return o[a]}));n=typeof a;"function"===typeof k&&k("string"===typeof b?b:"__2964ebf30f320caf67e277ab8abf2b53",d,f);"string"===n?a=String(a):"number"===n?a=Number(a):"boolean"===n&&(a=Boolean(a));void 0!==a&&(l=h.exports=a)};b.amd=!0;var m=function(b,d,f,k,a){var h=f.TYPE_ATTRIBUTE,l=f.TYPE_CLASSNAME,m=f.TYPE_ELEMENT,i=k&&k.__esModule?k["default"]:k,p=a.hasOwn,o=a.isValidNativeCustomElementName,
q=a.supportsNativeCustomElements;d.exports={clear:function(){i.registry={};return this},get:function(e){return p(i.registry,e)&&i.registry[e]},getForElement:function(e){var a=e.attributes,b=a.length,f=[],j=a.is,d=j&&(j.value||j.nodeValue),j=(e.tagName||e.localName).toLowerCase(),c=d||j,g;this.isType(c,m)&&(c=i.registry[c],g=c["extends"],d?j===g&&f.push(c):g||f.push(c));for(d=0;d<b;d++)c=a[d].nodeName,this.isType(c,h)&&(c=i.registry[c],g=c["extends"],(!g||j===g)&&f.push(c));(a=e.classList)?e=a:(e=
e.attributes,e=e["class"]&&e["class"].nodeValue.split(/\s+/)||[]);a=e.length;for(b=0;b<a;b++)c=e[b],this.isType(c,l)&&(c=i.registry[c],g=c["extends"],(!g||j===g)&&f.push(c));return f},isType:function(a,b){var d=this.get(a);return d&&d.type===b},isNativeCustomElement:function(a){return q()&&this.isType(a,m)&&o(a)},set:function(a,b){if(p(i.registry,a))throw Error('A component definition of type "'+b.type+'" with the ID of "'+a+'" already exists.');i.registry[a]=b;return this}}};"function"===typeof b&&
b.amd?b(["exports","module","./constants","./globals","./utils"],m):"undefined"!==typeof l&&"undefined"!==typeof h&&m(l,h,__9d236359921e13b5fcf3157e2c735602,__6466b6e8107a8bd9775ee239234e3544,__e41b80779e59ba9fc2f4dc8f4297bd33);return h.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-lifecycle', location = 'node_modules/skatejs/lib/lifecycle.js' */
("undefined"===typeof window?global:window).__3fef6ec7435c6573502a7e24c04dbfbc=function(){var o={exports:{}},m=o.exports,s={module:o,exports:m,"./constants":__9d236359921e13b5fcf3157e2c735602,"./data":__e5ac83e1fd2c7d9ba811c5dc3cf8b392,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./constants":__9d236359921e13b5fcf3157e2c735602,"./data":__e5ac83e1fd2c7d9ba811c5dc3cf8b392,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,
"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33},k;k=function(i,f,l){var k=("undefined"===typeof window?global:window).define,d,j,l=[l,f,i].filter(function(d){return"function"===typeof d})[0],f=[f,i,[]].filter(Array.isArray)[0];d=l.apply(null,f.map(function(d){return s[d]}));j=typeof d;"function"===typeof k&&k("string"===typeof i?i:"__3fef6ec7435c6573502a7e24c04dbfbc",f,l);"string"===j?d=String(d):"number"===j?d=Number(d):"boolean"===j&&(d=Boolean(d));
void 0!==d&&(m=o.exports=d)};k.amd=!0;var q=function(i,f,l,k,d,j){function o(e,b,a){Object.defineProperty(e,a,{get:function(){return this.getAttribute(b)},set:function(a){void 0===a?this.removeAttribute(b):this.setAttribute(b,a)}})}function m(e,b,a){var d,f,c=a.name,h=a.newValue,g;t&&(g=r(e,"cachedAttributeOldValues"));var a=t&&p(g,c)?g[c]:a.oldValue,i="string"===typeof h,u="string"===typeof a,n=(b=b.attributes)&&b[c];!u&&i?f="created":u&&i?f="updated":u&&!i&&(f="removed");t&&("removed"===f?delete g[c]:
g[c]=h);n&&"function"===typeof n[f]?d=n[f]:n&&"function"===typeof n.fallback?d=n.fallback:"function"===typeof n?d=n:"function"===typeof b&&(d=b);d&&d(e,{type:f,name:c,newValue:void 0===h?null:h,oldValue:void 0===a?null:a})}function q(e,b){var a=r(e,b.id);if(!a.created){a.created=!0;C(e,b.prototype,!0);b.template&&!e.hasAttribute(b.resolvedAttribute)&&b.template(e);e.removeAttribute(b.unresolvedAttribute);e.setAttribute(b.resolvedAttribute,"");var d=function(a,b){return function(d){if(!b)return a(e,
d,e);for(var c=d.target;c&&c!==document&&c!==e.parentNode;){var f;var g=c;f=b;D&&(g=g.cloneNode(),document.createElement("div").appendChild(g));f=w.call(g,f);if(f)return a(e,d,c);c=c.parentNode}}};"object"===typeof b.events&&E(b.events,function(a,b){var c,f;f=b.split(" ");c=f.shift();f=f.join(" ");e.addEventListener(c,d(a,f),!!f&&("blur"===c||"focus"===c))});var f=e.attributes;b.attributes&&!v.isNativeCustomElement(b.id)&&(new window.MutationObserver(function(a){a.forEach(function(a){var c=a.attributeName,
d=f[c];m(e,b,{name:c,newValue:d&&(d.value||d.nodeValue),oldValue:a.oldValue})})})).observe(e,{attributes:!0,attributeOldValue:!0});a=b.attributes;if("object"===typeof a)for(var c in a){var h=F(c);p(a,c)&&!p(e,h)&&o(e,c,h)}c=b.attributes;if("object"===typeof c)for(var g in c)p(c,g)&&(p(c[g],"value")&&!e.hasAttribute(g))&&(a=c[g].value,a="function"===typeof a?a(e):a,e.setAttribute(g,a));h=e.attributes;c=[];a=h.length;for(g=0;g<a;g++)c.push(h[g]);for(g=0;g<a;g++)h=c[g],m(e,b,{name:h.nodeName,newValue:h.value||
h.nodeValue});b.created&&b.created(e)}}function x(e,b){var a=r(e,b.id);!a.attached&&G(document,e)&&(a.attached=!0,b.attached&&b.attached(e),a.detached=!1)}function y(e,b){var a=r(e,b.id);a.detached||(a.detached=!0,b.detached&&b.detached(e),a.attached=!1)}function z(e){for(var b=0;b<e.length;b++){var a=e[b];if(!(a.nodeType!==A.ELEMENT_NODE||a.attributes[s])){for(var d=v.getForElement(a),f=d.length,c=0;c<f;c++){var h=a,g=d[c];q(h,g);x(h,g)}a=a.childNodes||[];a.length&&z(a)}}}function B(e){for(var b=
0;b<e.length;b++){var a=e[b];if(a.nodeType===A.ELEMENT_NODE){B(a.childNodes);for(var d=v.getForElement(a),f=d.length,c=0;c<f;c++)y(a,d[c])}}}Object.defineProperty(i,"__esModule",{value:!0});var s=f.ATTR_IGNORE,r=l&&l.__esModule?l["default"]:l,v=d&&d.__esModule?d["default"]:d,F=j.camelCase,G=j.elementContains,p=j.hasOwn,C=j.inherit,E=j.objEach,A=window.Node,f=window.HTMLElement.prototype,w=f.matches||f.msMatchesSelector||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector,D=!w.call(document.createElement("div"),
"div"),t=/Edge/.test(navigator.userAgent);i.initElements=z;i.removeElements=B;i.triggerAttached=x;i.triggerAttributeChanged=m;i.triggerCreated=q;i.triggerDetached=y};"function"===typeof k&&k.amd?k("exports ./constants ./data ./mutation-observer ./registry ./utils".split(" "),q):"undefined"!==typeof m&&q(m,__9d236359921e13b5fcf3157e2c735602,__e5ac83e1fd2c7d9ba811c5dc3cf8b392,__04e4ad44d1846e5700205516c1a42717,__2964ebf30f320caf67e277ab8abf2b53,__e41b80779e59ba9fc2f4dc8f4297bd33);return o.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-fix-ie-innerhtml', location = 'node_modules/skatejs/lib/fix-ie-innerhtml.js' */
("undefined"===typeof window?global:window).__5bf8bab9193a36a76f2f07e8489c8bac=function(){var f={exports:{}},h=f.exports,k={module:f,exports:h},d;d=function(g,c,b){var e=("undefined"===typeof window?global:window).define,a,i,b=[b,c,g].filter(function(a){return"function"===typeof a})[0],c=[c,g,[]].filter(Array.isArray)[0];a=b.apply(null,c.map(function(a){return k[a]}));i=typeof a;"function"===typeof e&&e("string"===typeof g?g:"__5bf8bab9193a36a76f2f07e8489c8bac",c,b);"string"===i?a=String(a):"number"===
i?a=Number(a):"boolean"===i&&(a=Boolean(a));void 0!==a&&(h=f.exports=a)};d.amd=!0;var j=function(){function g(a,c){var b=a.childNodes;if(b)for(var e=b.length,d=0;d<e;d++){var f=b[d];c(f,a);g(f,c)}}var c=/MSIE/.test(navigator.userAgent),b=/Trident/.test(navigator.userAgent),e=window.HTMLElement.prototype;if(c||b)if(c=Object.getOwnPropertyDescriptor(e,"innerHTML"),!c||!c.get._hasBeenEnhanced){b&&(window.MutationObserver=window.JsMutationObserver||window.MutationObserver);var a=Object.getOwnPropertyDescriptor(e,
"innerHTML"),b=function(){return a.get.call(this)};b._hasBeenEnhanced=!0;Object.defineProperty(e,"innerHTML",{get:b,set:function(b){g(this,function(a,b){var c=document.createEvent("MutationEvent");c.initMutationEvent("DOMNodeRemoved",true,false,b,null,null,null,null);a.dispatchEvent(c)});a.set.call(this,b)}})}};"function"===typeof d&&d.amd?d(["exports"],j):"undefined"!==typeof h&&j(h);return f.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-document-observer', location = 'node_modules/skatejs/lib/document-observer.js' */
("undefined"===typeof window?global:window).__b7cb55ffd65d50bc7384d171b3fbf223=function(){var c={exports:{}},f=c.exports,j={module:c,exports:f,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,"./fix-ie-innerhtml":__5bf8bab9193a36a76f2f07e8489c8bac,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./globals":__6466b6e8107a8bd9775ee239234e3544,"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./mutation-observer":__04e4ad44d1846e5700205516c1a42717,
"./fix-ie-innerhtml":__5bf8bab9193a36a76f2f07e8489c8bac,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33},d;d=function(d,e,b){var k=("undefined"===typeof window?global:window).define,a,g,b=[b,e,d].filter(function(a){return"function"===typeof a})[0],e=[e,d,[]].filter(Array.isArray)[0];a=b.apply(null,e.map(function(a){return j[a]}));g=typeof a;"function"===typeof k&&k("string"===typeof d?d:"__b7cb55ffd65d50bc7384d171b3fbf223",e,b);"string"===g?a=String(a):"number"===g?a=Number(a):"boolean"===g&&(a=Boolean(a));
void 0!==a&&(f=c.exports=a)};d.amd=!0;var i=function(d,e,b,c,a,g,f){function i(a){for(var d=a.length,c=0;c<d;c++){var b=a[c],e=b.addedNodes,b=b.removedNodes;e&&(e.length&&!l(e[0].parentNode))&&j(e);b&&b.length&&m(b)}}var h=b&&b.__esModule?b["default"]:b,j=c.initElements,m=c.removeElements,l=f.getClosestIgnoredElement;e.exports={register:function(a){a&&this.unregister();h.observer||(a=new window.MutationObserver(i),a.observe(document,{childList:!0,subtree:!0}),h.observer=a);return this},unregister:function(){h.observer&&
(h.observer.disconnect(),h.observer=void 0);return this}}};"function"===typeof d&&d.amd?d("exports module ./globals ./lifecycle ./mutation-observer ./fix-ie-innerhtml ./utils".split(" "),i):"undefined"!==typeof f&&"undefined"!==typeof c&&i(f,c,__6466b6e8107a8bd9775ee239234e3544,__3fef6ec7435c6573502a7e24c04dbfbc,__04e4ad44d1846e5700205516c1a42717,__5bf8bab9193a36a76f2f07e8489c8bac,__e41b80779e59ba9fc2f4dc8f4297bd33);return c.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-skate', location = 'node_modules/skatejs/lib/skate.js' */
("undefined"===typeof window?global:window).__23d805956abb7113753ee633dcc7a634=function(){var g={exports:{}},e=g.exports,n={module:g,exports:e,"./constants":__9d236359921e13b5fcf3157e2c735602,"./document-observer":__b7cb55ffd65d50bc7384d171b3fbf223,"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3,"./constants":__9d236359921e13b5fcf3157e2c735602,"./document-observer":__b7cb55ffd65d50bc7384d171b3fbf223,
"./lifecycle":__3fef6ec7435c6573502a7e24c04dbfbc,"./registry":__2964ebf30f320caf67e277ab8abf2b53,"./utils":__e41b80779e59ba9fc2f4dc8f4297bd33,"./version":__14e4e8bfa403103c4675c6cb0be7a4a3},c;c=function(k,h,d){var c=("undefined"===typeof window?global:window).define,a,j,d=[d,h,k].filter(function(a){return"function"===typeof a})[0],h=[h,k,[]].filter(Array.isArray)[0];a=d.apply(null,h.map(function(a){return n[a]}));j=typeof a;"function"===typeof c&&c("string"===typeof k?k:"__23d805956abb7113753ee633dcc7a634",
h,d);"string"===j?a=String(a):"number"===j?a=Number(a):"boolean"===j&&(a=Boolean(a));void 0!==a&&(e=g.exports=a)};c.amd=!0;var m=function(c,h,d,g,a,j,e,m){function f(i,b){b=l({},b);b=l(b,f.defaults);b.id=i;o.set(i,b);if(o.isNativeCustomElement(i)){var a=b["extends"]?document.createElement(b["extends"]).constructor.prototype:r.prototype;a.isPrototypeOf(b.prototype)||(b.prototype=l(Object.create(a),b.prototype,!0));a={prototype:l(b.prototype,{createdCallback:function(){s(this,b)},attachedCallback:function(){v(this,
b)},detachedCallback:function(){w(this,b)},attributeChangedCallback:function(a,i,c){x(this,b,{name:a,oldValue:i,newValue:c})}})};b["extends"]&&(a["extends"]=b["extends"]);return document.registerElement(i,a)}y();z.register(!!b.detached);if(o.isType(i,p)){var c=b,d=function(){var a;a=c["extends"];var b=c.id;a?(a=document.createElement(a),a.setAttribute("is",b)):a=document.createElement(b);c.prototype=d.prototype;s(a,c);return a};d.prototype=c.prototype;return d}}var q=function(a){return a&&a.__esModule?
a["default"]:a},c=d.TYPE_ATTRIBUTE,n=d.TYPE_CLASSNAME,p=d.TYPE_ELEMENT,z=q(g),s=a.triggerCreated,v=a.triggerAttached,w=a.triggerDetached,x=a.triggerAttributeChanged,t=a.initElements,o=q(j),d=e.debounce,l=e.inherit,e=q(m),r=window.HTMLElement,u=!!document.attachEvent,y=d(function(){var a=function(){t(document.documentElement.childNodes)},b;b=u?"complete"===document.readyState:"interactive"===document.readyState||"complete"===document.readyState;b?a():u?window.addEventListener("load",a):document.addEventListener("DOMContentLoaded",
a)});f.init=function(a){var b=a;if(!a)return a;"string"===typeof a?b=a=document.querySelectorAll(a):a instanceof r&&(b=[a]);t(b);return a};f.type={ATTRIBUTE:c,CLASSNAME:n,ELEMENT:p};f.version=e;f.defaults={attributes:void 0,events:void 0,"extends":void 0,id:"",prototype:{},resolvedAttribute:"resolved",template:void 0,type:p,unresolvedAttribute:"unresolved"};var A=window.skate;f.noConflict=function(){window.skate=A;return f};window.skate=f;h.exports=f};"function"===typeof c&&c.amd?c("exports module ./constants ./document-observer ./lifecycle ./registry ./utils ./version".split(" "),
m):"undefined"!==typeof e&&"undefined"!==typeof g&&m(e,g,__9d236359921e13b5fcf3157e2c735602,__b7cb55ffd65d50bc7384d171b3fbf223,__3fef6ec7435c6573502a7e24c04dbfbc,__2964ebf30f320caf67e277ab8abf2b53,__e41b80779e59ba9fc2f4dc8f4297bd33,__14e4e8bfa403103c4675c6cb0be7a4a3);return g.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-tether-0.6.5-tether', location = 'node_modules/tether/tether.js' */
("undefined"===typeof window?global:window).__74afe8b96acdee164fa987a4fdd7afc1=function(){var I={exports:{}},W=I.exports,X={module:I,exports:W},P;P=function(w,p,x){var B=("undefined"===typeof window?global:window).define,l,v,x=[x,p,w].filter(function(l){return"function"===typeof l})[0],p=[p,w,[]].filter(Array.isArray)[0];l=x.apply(null,p.map(function(l){return X[l]}));v=typeof l;"function"===typeof B&&B("string"===typeof w?w:"__74afe8b96acdee164fa987a4fdd7afc1",p,x);"string"===v?l=String(l):"number"===
v?l=Number(l):"boolean"===v&&(l=Boolean(l));void 0!==l&&(W=I.exports=l)};P.amd=!0;(function(w){var p,x,B,l,v,Q,R,Y,C,X={}.hasOwnProperty,ya=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},za=[].slice;null==this.Tether&&(this.Tether={modules:[]});var oa;oa=0;Y=function(){return oa++};C={};v=function(a){var b,c,d;d=a._tetherZeroElement;if(d==null){d=a.createElement("div");d.setAttribute("data-tether-id",Y());l(d.style,{top:0,left:0,position:"absolute"});
a.body.appendChild(d);a._tetherZeroElement=d}b=d.getAttribute("data-tether-id");if(C[b]==null){C[b]={};d=d.getBoundingClientRect();for(c in d){a=d[c];C[b][c]=a}x(function(){return C[b]=void 0})}return C[b]};l=function(a){var b,c,d,e,h,f;a==null&&(a={});b=[];Array.prototype.push.apply(b,arguments);f=b.slice(1);e=0;for(h=f.length;e<h;e++)if(b=f[e])for(c in b)if(X.call(b,c)){d=b[c];a[c]=d}return a};R=function(a,b){var c,d,e,h,f;if(a.classList!=null){h=b.split(" ");f=[];d=0;for(e=h.length;d<e;d++){c=
h[d];c.trim()&&f.push(a.classList.remove(c))}return f}return a.className=a.className.replace(RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")};p=function(a,b){var c,d,e,h,f;if(a.classList!=null){h=b.split(" ");f=[];d=0;for(e=h.length;d<e;d++){c=h[d];c.trim()&&f.push(a.classList.add(c))}return f}R(a,b);return a.className=a.className+(" "+b)};Q=function(a,b){return a.classList!=null?a.classList.contains(b):RegExp("(^| )"+b+"( |$)","gi").test(a.className)};B=[];x=function(a){return B.push(a)};
var g=function(){};g.prototype.on=function(a,b,c,d){var e;d==null&&(d=false);if(this.bindings==null)this.bindings={};if((e=this.bindings)[a]==null)e[a]=[];return this.bindings[a].push({handler:b,ctx:c,once:d})};g.prototype.once=function(a,b,c){return this.on(a,b,c,true)};g.prototype.off=function(a,b){var c,d;if(((c=this.bindings)!=null?c[a]:void 0)!=null){if(b==null)return delete this.bindings[a];c=0;for(d=[];c<this.bindings[a].length;)this.bindings[a][c].handler===b?d.push(this.bindings[a].splice(c,
1)):d.push(c++);return d}};g.prototype.trigger=function(){var a,b,c,d,e,h,f;c=arguments[0];a=2<=arguments.length?za.call(arguments,1):[];if((b=this.bindings)!=null&&b[c]){e=0;for(f=[];e<this.bindings[c].length;){h=this.bindings[c][e];d=h.handler;b=h.ctx;h=h.once;d.apply(b!=null?b:this,a);h?f.push(this.bindings[c].splice(e,1)):f.push(e++)}return f}};this.Tether.Utils={getScrollParent:function(a){var b,c,d;b=getComputedStyle(a).position;if(b==="fixed")return a;for(;a=a.parentNode;){try{c=getComputedStyle(a)}catch(e){}if(c==
null||/(auto|scroll)/.test(c.overflow+c["overflow-y"]+c["overflow-x"])&&(b!=="absolute"||(d=c.position)==="relative"||d==="absolute"||d==="fixed"))return a}return document.body},getBounds:function(a){var b,c,d,e,h;if(a===document){c=document;a=document.documentElement}else c=a.ownerDocument;d=c.documentElement;b={};h=a.getBoundingClientRect();for(e in h){a=h[e];b[e]=a}e=v(c);b.top=b.top-e.top;b.left=b.left-e.left;if(b.width==null)b.width=document.body.scrollWidth-b.left-b.right;if(b.height==null)b.height=
document.body.scrollHeight-b.top-b.bottom;b.top=b.top-d.clientTop;b.left=b.left-d.clientLeft;b.right=c.body.clientWidth-b.width-b.left;b.bottom=c.body.clientHeight-b.height-b.top;return b},getOffsetParent:function(a){return a.offsetParent||document.documentElement},extend:l,addClass:p,removeClass:R,hasClass:Q,updateClasses:function(a,b,c){var d,e,h;e=0;for(h=c.length;e<h;e++){d=c[e];ya.call(b,d)<0&&Q(a,d)&&R(a,d)}h=[];c=0;for(e=b.length;c<e;c++){d=b[c];Q(a,d)?h.push(void 0):h.push(p(a,d))}return h},
defer:x,flush:function(){var a,b;for(b=[];a=B.pop();)b.push(a());return b},uniqueId:Y,Evented:g,getScrollBarSize:function(){var a,b,c;a=document.createElement("div");a.style.width="100%";a.style.height="200px";b=document.createElement("div");l(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);c=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;if(c===a)a=b.clientWidth;
document.body.removeChild(b);b=c-a;return{width:b,height:b}}};var pa,qa,Z,D,J,$,aa,ra,S,T,ba,E,U,ca,sa,V,K,da,ea,fa,ga,z,F,ha,ta,Aa=[].slice;if(null==this.Tether)throw Error("You must include the utils.js file before tether.js");D=this.Tether;g=D.Utils;sa=g.getScrollParent;E=g.getBounds;U=g.getOffsetParent;T=g.extend;J=g.addClass;ga=g.removeClass;ha=g.updateClasses;S=g.defer;ba=g.flush;ca=g.getScrollBarSize;ta=function(a,b,c){c==null&&(c=1);return a+c>=b&&b>=a-c};a:{var A,G,L,M,g=document.createElement("div");
M=["transform","webkitTransform","OTransform","MozTransform","msTransform"];G=0;for(L=M.length;G<L;G++)if(A=M[G],void 0!==g.style[A]){F=A;break a}F=void 0}z=[];fa=function(){var a,b,c;b=0;for(c=z.length;b<c;b++){a=z[b];a.position(false)}return ba()};V=function(){var a;return(a=typeof performance!=="undefined"&&performance!==null?typeof performance.now==="function"?performance.now():void 0:void 0)!=null?a:+new Date};var N,H,O,ia;O=H=N=null;ia=function(){if(H!=null&&H>16){H=Math.min(H-16,250);O=setTimeout(ia,
250)}else if(!(N!=null&&V()-N<10)){if(O!=null){clearTimeout(O);O=null}N=V();fa();return H=V()-N}};L=["resize","scroll","touchmove"];M=[];A=0;for(G=L.length;A<G;A++)g=L[A],M.push(window.addEventListener(g,ia));pa={center:"center",left:"right",right:"left"};qa={middle:"middle",top:"bottom",bottom:"top"};Z={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"};ra=function(a,b){var c,d;c=a.left;d=a.top;c==="auto"&&(c=pa[b.left]);d==="auto"&&(d=qa[b.top]);return{left:c,top:d}};aa=function(a){var b,
c;return{left:(b=Z[a.left])!=null?b:a.left,top:(c=Z[a.top])!=null?c:a.top}};$=function(){var a,b,c,d,e,h;b=1<=arguments.length?Aa.call(arguments,0):[];c={top:0,left:0};e=0;for(h=b.length;e<h;e++){a=b[e];d=a.top;a=a.left;typeof d==="string"&&(d=parseFloat(d,10));typeof a==="string"&&(a=parseFloat(a,10));c.top=c.top+d;c.left=c.left+a}return c};K=function(a,b){if(typeof a.left==="string"&&a.left.indexOf("%")!==-1)a.left=parseFloat(a.left,10)/100*b.width;if(typeof a.top==="string"&&a.top.indexOf("%")!==
-1)a.top=parseFloat(a.top,10)/100*b.height;return a};da=ea=function(a){a=a.split(" ");return{top:a[0],left:a[1]}};g=function(a){var b=this.position,c=this;this.position=function(){return b.apply(c,arguments)};var d,e,h,f;z.push(this);this.history=[];this.setOptions(a,false);h=D.modules;d=0;for(e=h.length;d<e;d++){a=h[d];(f=a.initialize)!=null&&f.call(this)}this.position()};g.modules=[];g.prototype.getClass=function(a){var b,c;return(b=this.options.classes)!=null&&b[a]?this.options.classes[a]:((c=
this.options.classes)!=null?c[a]:void 0)!==false?this.options.classPrefix?""+this.options.classPrefix+"-"+a:a:""};g.prototype.setOptions=function(a,b){var c,d,e,h;this.options=a;b==null&&(b=true);c=this.options=T({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options);this.element=c.element;this.target=c.target;this.targetModifier=c.targetModifier;if(this.target==="viewport"){this.target=document.body;this.targetModifier="visible"}else if(this.target==="scroll-handle"){this.target=
document.body;this.targetModifier="scroll-handle"}h=["element","target"];d=0;for(e=h.length;d<e;d++){c=h[d];if(this[c]==null)throw Error("Tether Error: Both element and target must be defined");this[c].jquery!=null?this[c]=this[c][0]:typeof this[c]==="string"&&(this[c]=document.querySelector(this[c]))}J(this.element,this.getClass("element"));J(this.target,this.getClass("target"));if(!this.options.attachment)throw Error("Tether Error: You must provide an attachment");this.targetAttachment=da(this.options.targetAttachment);
this.attachment=da(this.options.attachment);this.offset=ea(this.options.offset);this.targetOffset=ea(this.options.targetOffset);this.scrollParent!=null&&this.disable();this.scrollParent=this.targetModifier==="scroll-handle"?this.target:sa(this.target);if(this.options.enabled!==false)return this.enable(b)};g.prototype.getTargetBounds=function(){var a,b,c,d,e,h;if(this.targetModifier!=null)switch(this.targetModifier){case "visible":if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,
height:innerHeight,width:innerWidth};a=E(this.target);d={height:a.height,width:a.width,top:a.top,left:a.left};d.height=Math.min(d.height,a.height-(pageYOffset-a.top));d.height=Math.min(d.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));d.height=Math.min(innerHeight,d.height);d.height=d.height-2;d.width=Math.min(d.width,a.width-(pageXOffset-a.left));d.width=Math.min(d.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));d.width=Math.min(innerWidth,d.width);d.width=d.width-2;if(d.top<
pageYOffset)d.top=pageYOffset;if(d.left<pageXOffset)d.left=pageXOffset;return d;case "scroll-handle":e=this.target;if(e===document.body){e=document.documentElement;a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}}else a=E(e);h=getComputedStyle(e);b=e.scrollWidth>e.clientWidth||"scroll"===[h.overflow,h.overflowX]||this.target!==document.body;c=0;b&&(c=15);c=a.height-parseFloat(h.borderTopWidth)-parseFloat(h.borderBottomWidth)-c;d={width:15,height:c*0.975*(c/e.scrollHeight),
left:a.left+a.width-parseFloat(h.borderLeftWidth)-15};b=0;c<408&&this.target===document.body&&(b=-1.1E-4*Math.pow(c,2)-0.00727*c+22.58);if(this.target!==document.body)d.height=Math.max(d.height,24);e=this.target.scrollTop/(e.scrollHeight-c);d.top=e*(c-d.height-b)+a.top+parseFloat(h.borderTopWidth);if(this.target===document.body)d.height=Math.max(d.height,24);return d}else return E(this.target)};g.prototype.clearCache=function(){return this._cache={}};g.prototype.cache=function(a,b){if(this._cache==
null)this._cache={};this._cache[a]==null&&(this._cache[a]=b.call(this));return this._cache[a]};g.prototype.enable=function(a){a==null&&(a=true);J(this.target,this.getClass("enabled"));J(this.element,this.getClass("enabled"));this.enabled=true;this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position);if(a)return this.position()};g.prototype.disable=function(){ga(this.target,this.getClass("enabled"));ga(this.element,this.getClass("enabled"));this.enabled=false;if(this.scrollParent!=
null)return this.scrollParent.removeEventListener("scroll",this.position)};g.prototype.destroy=function(){var a,b,c,d,e;this.disable();e=[];a=c=0;for(d=z.length;c<d;a=++c){b=z[a];if(b===this){z.splice(a,1);break}else e.push(void 0)}return e};g.prototype.updateAttachClasses=function(a,b){var c,d,e,h,f,t=this;if(a==null)a=this.attachment;if(b==null)b=this.targetAttachment;e=["left","top","bottom","right","middle","center"];(c=this._addAttachClasses)!=null&&c.length&&this._addAttachClasses.splice(0,
this._addAttachClasses.length);c=this._addAttachClasses!=null?this._addAttachClasses:this._addAttachClasses=[];a.top&&c.push(""+this.getClass("element-attached")+"-"+a.top);a.left&&c.push(""+this.getClass("element-attached")+"-"+a.left);b.top&&c.push(""+this.getClass("target-attached")+"-"+b.top);b.left&&c.push(""+this.getClass("target-attached")+"-"+b.left);d=[];h=0;for(f=e.length;h<f;h++){c=e[h];d.push(""+this.getClass("element-attached")+"-"+c)}h=0;for(f=e.length;h<f;h++){c=e[h];d.push(""+this.getClass("target-attached")+
"-"+c)}return S(function(){if(t._addAttachClasses!=null){ha(t.element,t._addAttachClasses,d);ha(t.target,t._addAttachClasses,d);return t._addAttachClasses=void 0}})};g.prototype.position=function(a){var b,c,d,e,h,f,t,m,j,k,g,o,i,n,q,l,y,r,s,p,u=this;a==null&&(a=true);if(this.enabled){this.clearCache();i=ra(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);b=this.cache("element-bounds",function(){return E(u.element)});g=b.width;c=b.height;if(g===0&&c===0&&this.lastSize!=
null){c=this.lastSize;g=c.width;c=c.height}else this.lastSize={width:g,height:c};d=q=this.cache("target-bounds",function(){return u.getTargetBounds()});t=K(aa(this.attachment),{width:g,height:c});n=K(aa(i),d);e=K(this.offset,{width:g,height:c});h=K(this.targetOffset,d);t=$(t,e);n=$(n,h);d=q.left+n.left-t.left;l=q.top+n.top-t.top;p=D.modules;y=0;for(s=p.length;y<s;y++){f=p[y];f=f.position.call(this,{left:d,top:l,targetAttachment:i,targetPos:q,attachment:this.attachment,elementPos:b,offset:t,targetOffset:n,
manualOffset:e,manualTargetOffset:h,scrollbarSize:m});if(!(f==null||typeof f!=="object")){if(f===false)return false;l=f.top;d=f.left}}b={page:{top:l,left:d},viewport:{top:l-pageYOffset,bottom:pageYOffset-l-c+innerHeight,left:d-pageXOffset,right:pageXOffset-d-g+innerWidth}};if(document.body.scrollWidth>window.innerWidth){m=this.cache("scrollbar-size",ca);b.viewport.bottom=b.viewport.bottom-m.height}if(document.body.scrollHeight>window.innerHeight){m=this.cache("scrollbar-size",ca);b.viewport.right=
b.viewport.right-m.width}if((k=document.body.style.position)!==""&&k!=="static"||(o=document.body.parentElement.style.position)!==""&&o!=="static"){b.page.bottom=document.body.scrollHeight-l-c;b.page.right=document.body.scrollWidth-d-g}if(((r=this.options.optimizations)!=null?r.moveElement:void 0)!==false&&this.targetModifier==null){j=this.cache("target-offsetparent",function(){return U(u.target)});g=this.cache("target-offsetparent-bounds",function(){return E(j)});k=getComputedStyle(j);getComputedStyle(this.element);
m={};i=["Top","Left","Bottom","Right"];r=0;for(c=i.length;r<c;r++){o=i[r];m[o.toLowerCase()]=parseFloat(k["border"+o+"Width"])}g.right=document.body.scrollWidth-g.left-g.width+m.right;g.bottom=document.body.scrollHeight-g.top-g.height+m.bottom;if(b.page.top>=g.top+m.top&&b.page.bottom>=g.bottom&&b.page.left>=g.left+m.left&&b.page.right>=g.right){o=j.scrollTop;k=j.scrollLeft;b.offset={top:b.page.top-g.top+o-m.top,left:b.page.left-g.left+k-m.left}}}this.move(b);this.history.unshift(b);this.history.length>
3&&this.history.pop();a&&ba();return true}};g.prototype.move=function(a){var b,c,d,e,h,f,g,m,j,k,l,o,i=this;if(this.element.parentNode!=null){f={};for(g in a){f[g]={};for(d in a[g]){c=false;l=this.history;j=0;for(k=l.length;j<k;j++){h=l[j];if(!ta((o=h[g])!=null?o[d]:void 0,a[g][d])){c=true;break}}c||(f[g][d]=true)}}b={top:"",left:"",right:"",bottom:""};h=function(a,c){var d,e;if(((d=i.options.optimizations)!=null?d.gpu:void 0)!==false){if(a.top){b.top=0;e=c.top}else{b.bottom=0;e=-c.bottom}if(a.left){b.left=
0;d=c.left}else{b.right=0;d=-c.right}b[F]="translateX("+Math.round(d)+"px) translateY("+Math.round(e)+"px)";if(F!=="msTransform")return b[F]=b[F]+" translateZ(0)"}else{a.top?b.top=""+c.top+"px":b.bottom=""+c.bottom+"px";return a.left?b.left=""+c.left+"px":b.right=""+c.right+"px"}};c=false;if((f.page.top||f.page.bottom)&&(f.page.left||f.page.right)){b.position="absolute";h(f.page,a.page)}else if((f.viewport.top||f.viewport.bottom)&&(f.viewport.left||f.viewport.right)){b.position="fixed";h(f.viewport,
a.viewport)}else if(f.offset!=null&&f.offset.top&&f.offset.left){b.position="absolute";e=this.cache("target-offsetparent",function(){return U(i.target)});U(this.element)!==e&&S(function(){i.element.parentNode.removeChild(i.element);return e.appendChild(i.element)});h(f.offset,a.offset);c=true}else{b.position="absolute";h({top:true,left:true},a.page)}if(!c&&this.element.parentNode.tagName!=="BODY"){this.element.parentNode.removeChild(this.element);document.body.appendChild(this.element)}m={};c=false;
for(d in b){f=b[d];a=this.element.style[d];if(a!==""&&f!==""&&(d==="top"||d==="left"||d==="bottom"||d==="right")){a=parseFloat(a);f=parseFloat(f)}if(a!==f){c=true;m[d]=b[d]}}if(c)return S(function(){return T(i.element.style,m)})}};D.position=fa;this.Tether=T(g,D);var ja,ua,ka,va,la,ma,u=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},g=this.Tether.Utils;la=g.getBounds;ka=g.extend;ma=g.updateClasses;ua=g.defer;ja=["left","top","right","bottom"];
va=function(a,b){var c,d,e,h,f;b==="scrollParent"?b=a.scrollParent:b==="window"&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]);if(b===document)b=b.documentElement;if(b.nodeType!=null){c=d=la(b);e=getComputedStyle(b);b=[c.left,c.top,d.width+c.left,d.height+c.top];c=h=0;for(f=ja.length;h<f;c=++h){d=ja[c];d=d[0].toUpperCase()+d.substr(1);b[c]=d==="Top"||d==="Left"?b[c]+parseFloat(e["border"+d+"Width"]):b[c]-parseFloat(e["border"+d+"Width"])}}return b};this.Tether.modules.push({position:function(a){var b,
c,d,e,h,f,g,m,j,k,l,o,i,n,q,p,y,r,s,w,x,v=this;i=a.top;j=a.left;a=a.targetAttachment;if(!this.options.constraints)return true;n=this.cache("element-bounds",function(){return la(v.element)});m=n.height;n=n.width;if(n===0&&m===0&&this.lastSize!=null){m=this.lastSize;n=m.width;m=m.height}o=this.cache("target-bounds",function(){return v.getTargetBounds()});l=o.height;o=o.width;k={};f={};c=[this.getClass("pinned"),this.getClass("out-of-bounds")];q=this.options.constraints;f=0;for(k=q.length;f<k;f++){g=
q[f];g.outOfBoundsClass&&c.push(g.outOfBoundsClass);g.pinnedClass&&c.push(g.pinnedClass)}k=0;for(p=c.length;k<p;k++){f=c[k];e=["left","top","right","bottom"];q=0;for(y=e.length;q<y;q++){g=e[q];c.push(""+f+"-"+g)}}b=[];k=ka({},a);f=ka({},this.attachment);y=this.options.constraints;q=0;for(p=y.length;q<p;q++){g=y[q];e=g.to;d=g.attachment;g=g.pin;d==null&&(d="");if(u.call(d," ")>=0){h=d.split(" ");d=h[0];h=h[1]}else h=d;e=va(this,e);if(d==="target"||d==="both"){if(i<e[1]&&k.top==="top"){i=i+l;k.top=
"bottom"}if(i+m>e[3]&&k.top==="bottom"){i=i-l;k.top="top"}}if(d==="together"){if(i<e[1]&&k.top==="top")if(f.top==="bottom"){i=i+l;k.top="bottom";i=i+m;f.top="top"}else if(f.top==="top"){i=i+l;k.top="bottom";i=i-m;f.top="bottom"}if(i+m>e[3]&&k.top==="bottom")if(f.top==="top"){i=i-l;k.top="top";i=i-m;f.top="bottom"}else if(f.top==="bottom"){i=i-l;k.top="top";i=i+m;f.top="top"}if(k.top==="middle")if(i+m>e[3]&&f.top==="top"){i=i-m;f.top="bottom"}else if(i<e[1]&&f.top==="bottom"){i=i+m;f.top="top"}}if(h===
"target"||h==="both"){if(j<e[0]&&k.left==="left"){j=j+o;k.left="right"}if(j+n>e[2]&&k.left==="right"){j=j-o;k.left="left"}}if(h==="together")if(j<e[0]&&k.left==="left")if(f.left==="right"){j=j+o;k.left="right";j=j+n;f.left="left"}else{if(f.left==="left"){j=j+o;k.left="right";j=j-n;f.left="right"}}else if(j+n>e[2]&&k.left==="right")if(f.left==="left"){j=j-o;k.left="left";j=j-n;f.left="right"}else{if(f.left==="right"){j=j-o;k.left="left";j=j+n;f.left="left"}}else if(k.left==="center")if(j+n>e[2]&&f.left===
"left"){j=j-n;f.left="right"}else if(j<e[0]&&f.left==="right"){j=j+n;f.left="left"}if(d==="element"||d==="both"){if(i<e[1]&&f.top==="bottom"){i=i+m;f.top="top"}if(i+m>e[3]&&f.top==="top"){i=i-m;f.top="bottom"}}if(h==="element"||h==="both"){if(j<e[0]&&f.left==="right"){j=j+n;f.left="left"}if(j+n>e[2]&&f.left==="left"){j=j-n;f.left="right"}}if(typeof g==="string"){s=r=h=d=void 0;r=g.split(",");s=[];h=0;for(d=r.length;h<d;h++){g=r[h];s.push(g.trim())}g=s}else g===true&&(g=["top","left","right","bottom"]);
g||(g=[]);h=[];d=[];if(i<e[1])if(u.call(g,"top")>=0){i=e[1];h.push("top")}else d.push("top");if(i+m>e[3])if(u.call(g,"bottom")>=0){i=e[3]-m;h.push("bottom")}else d.push("bottom");if(j<e[0])if(u.call(g,"left")>=0){j=e[0];h.push("left")}else d.push("left");if(j+n>e[2])if(u.call(g,"right")>=0){j=e[2]-n;h.push("right")}else d.push("right");if(h.length){e=(w=this.options.pinnedClass)!=null?w:this.getClass("pinned");b.push(e);s=0;for(r=h.length;s<r;s++){g=h[s];b.push(""+e+"-"+g)}}if(d.length){e=(x=this.options.outOfBoundsClass)!=
null?x:this.getClass("out-of-bounds");b.push(e);s=0;for(r=d.length;s<r;s++){g=d[s];b.push(""+e+"-"+g)}}if(u.call(h,"left")>=0||u.call(h,"right")>=0)f.left=k.left=false;if(u.call(h,"top")>=0||u.call(h,"bottom")>=0)f.top=k.top=false;(k.top!==a.top||k.left!==a.left||f.top!==this.attachment.top||f.left!==this.attachment.left)&&this.updateAttachClasses(f,k)}ua(function(){ma(v.target,b,c);return ma(v.element,b,c)});return{top:i,left:j}}});var wa,xa,na,g=this.Tether.Utils;xa=g.getBounds;na=g.updateClasses;
wa=g.defer;this.Tether.modules.push({position:function(a){var b,c,d,e,h,f,g,m,j,k,l,o,i,n=this;g=a.top;e=a.left;f=this.cache("element-bounds",function(){return xa(n.element)});a=f.height;f=f.width;m=this.getTargetBounds();d=g+a;h=e+f;a=[];if(g<=m.bottom&&d>=m.top){i=["left","right"];j=0;for(o=i.length;j<o;j++){f=i[j];((k=m[f])===e||k===h)&&a.push(f)}}if(e<=m.right&&h>=m.left){h=["top","bottom"];k=0;for(e=h.length;k<e;k++){f=h[k];((l=m[f])===g||l===d)&&a.push(f)}}c=[];b=[];g=["left","top","right",
"bottom"];c.push(this.getClass("abutted"));l=0;for(m=g.length;l<m;l++){f=g[l];c.push(""+this.getClass("abutted")+"-"+f)}a.length&&b.push(this.getClass("abutted"));g=0;for(l=a.length;g<l;g++){f=a[g];b.push(""+this.getClass("abutted")+"-"+f)}wa(function(){na(n.target,b,c);return na(n.element,b,c)});return true}});this.Tether.modules.push({position:function(a){var b,c,d;d=a.top;b=a.left;if(this.options.shift){a=function(a){return typeof a==="function"?a.call(this,{top:d,left:b}):a};c=a(this.options.shift);
if(typeof c==="string"){c=c.split(" ");c[1]||(c[1]=c[0]);a=c[0];c=c[1];a=parseFloat(a,10);c=parseFloat(c,10)}else{c=[c.top,c.left];a=c[0];c=c[1]}d=d+a;b=b+c;return{top:d,left:b}}}});w.Tether=this.Tether;"function"===typeof P?P([],function(){return w.Tether}):"object"===typeof W&&(I.exports=w.Tether)})(this);return I.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-version', location = 'src/js/aui/version.js' */
("undefined"===typeof window?global:window).__849973663ed3d680bf7bf58ac8b9aec5=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("version","7.10.1");b.default="7.10.1";return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-prevent-default', location = 'src/js/aui/prevent-default.js' */
("undefined"===typeof window?global:window).__9d16f59b4360a103098a80db6f5b5d72=function(){function c(a){a.preventDefault()}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("preventDefault",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-stop-event', location = 'src/js/aui/stop-event.js' */
("undefined"===typeof window?global:window).__39f8d3139fef802ea62bd4a466864168=function(){function b(a){a.stopPropagation();return!1}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=__c88c0dc6258c37804917fb6a0e4092fa,a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},b=(0,d.fn)(b,"stopEvent",{alternativeName:"preventDefault()",sinceVersion:"5.8.0"});(0,a.default)("stopEvent",b);c.default=b;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-index-of', location = 'src/js/aui/index-of.js' */
("undefined"===typeof window?global:window).__7c1c1d052861cfa4c39b964e56839f98=function(){function d(b,c,a){var d=b.length;for(a?0>a&&(a=Math.max(0,d+a)):a=0;a<d;a++)if(b[a]===c)return a;return-1}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b};(0,b.default)("indexOf",d);c.default=d;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-contains', location = 'src/js/aui/contains.js' */
("undefined"===typeof window?global:window).__81cf7c69f2449ab89d910da23ce7c956=function(){function d(a,b){return-1<(0,e.default)(a,b)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},c=__7c1c1d052861cfa4c39b964e56839f98,e=c&&c.__esModule?c:{"default":c};(0,a.default)("contains",d);b.default=d;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-include', location = 'src/js/aui/include.js' */
("undefined"===typeof window?global:window).__1272ae1ce601d10da74dda15283d7de0=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function b(a){if(!(0,f.default)(e,a)){e.push(a);var b=document.createElement("script");b.src=a;(0,g.default)("body").append(b)}}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var g=d(__bd7207540b95ff683caa1d3c0bfcc3d7),h=__c88c0dc6258c37804917fb6a0e4092fa,f=d(__81cf7c69f2449ab89d910da23ce7c956),i=d(__9a668cbde1e182d8e721c23580356df2),
e=[],b=(0,h.fn)(b,"include",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use a proper module loader instead."});(0,i.default)("include",b);c.default=b;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-toggle-class-name', location = 'src/js/aui/toggle-class-name.js' */
("undefined"===typeof window?global:window).__24be96774d1dc9be07992cc8431cd955=function(){function c(a,b){(a=(0,e.default)(a))&&a.toggleClass(b)}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"toggleClassName",{sinceVersion:"5.8.0"});(0,b.default)("toggleClassName",c);d.default=c;
return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-set-visible', location = 'src/js/aui/set-visible.js' */
("undefined"===typeof window?global:window).__0f0bf05abd4e432d62689fada588acec=function(){function d(a,b){if(a=(0,c.default)(a))(0,c.default)(a).each(function(){var a=(0,c.default)(this).hasClass("hidden");a&&b?(0,c.default)(this).removeClass("hidden"):!a&&!b&&(0,c.default)(this).addClass("hidden")})}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,c=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,
b=b&&b.__esModule?b:{"default":b},d=(0,a.fn)(d,"setVisible",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.addClass() / removeClass() instead."});(0,b.default)("setVisible",d);e.default=d;return e=e["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-set-current', location = 'src/js/aui/set-current.js' */
("undefined"===typeof window?global:window).__6a7d491adb2a09c02e4e3ac909eac82b=function(){function c(a,b){if(a=(0,e.default)(a))b?a.addClass("current"):a.removeClass("current")}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"setCurrent",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.addClass() / removeClass() instead."});
(0,b.default)("setCurrent",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-is-visible', location = 'src/js/aui/is-visible.js' */
("undefined"===typeof window?global:window).__5a60a658948a2c0860b04ed1622fa0a4=function(){function c(a){return!(0,e.default)(a).hasClass("hidden")}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"isVisible",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.hasClass() instead."});
(0,b.default)("isVisible",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-is-clipped', location = 'src/js/aui/is-clipped.js' */
("undefined"===typeof window?global:window).__ee776d9150ae4c2ceb7a2b4f89a0f3e4=function(){function c(a){a=(0,d.default)(a);return a.prop("scrollWidth")>a.prop("clientWidth")}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,d=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("isClipped",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-params', location = 'src/js/aui/params.js' */
("undefined"===typeof window?global:window).__ebc0de961d64dceea3e57e01410a830b=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};b.default=(0,a.default)("params",{});return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-populate-parameters', location = 'src/js/aui/populate-parameters.js' */
("undefined"===typeof window?global:window).__42c7868600dc182ad91aa15094975e87=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){a||(a=g.default);(0,f.default)(".parameters input").each(function(){var c=this.value,b=this.title||this.id;(0,f.default)(this).hasClass("list")?a[b]?a[b].push(c):a[b]=[c]:a[b]=c.match(/^(tru|fals)e$/i)?c.toLowerCase()==="true":c})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=d(__bd7207540b95ff683caa1d3c0bfcc3d7),
h=d(__9a668cbde1e182d8e721c23580356df2),g=d(__ebc0de961d64dceea3e57e01410a830b);(0,h.default)("populateParameters",e);b.default=e;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-log', location = 'src/js/aui/internal/log.js' */
("undefined"===typeof window?global:window).__2f5c294b01e66b15309518e39bcb949d=function(){function c(a){return function(){"undefined"!==typeof console&&console[a]&&Function.prototype.apply.call(console[a],console,arguments)}}var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.error=a.warn=a.log=void 0;var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},d=c("log"),e=c("warn"),f=c("error");(0,b.default)("error",f);(0,b.default)("log",d);(0,b.default)("warn",
e);a.log=d;a.warn=e;a.error=f;return a}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-to-init', location = 'src/js/aui/to-init.js' */
("undefined"===typeof window?global:window).__3ceeda9744dc906daba5ed46a442b9e1=function(){function f(a){(0,g.default)(function(){try{a.apply(this,arguments)}catch(b){d.log("Failed to run init function: "+b+"\n"+a.toString())}});return this}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,g=a&&a.__esModule?a:{"default":a},d;if((a=__2f5c294b01e66b15309518e39bcb949d)&&a.__esModule)d=a;else{var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(e[b]=a[b]);e.default=a;d=e}b=(b=__9a668cbde1e182d8e721c23580356df2)&&b.__esModule?b:{"default":b};(0,b.default)("toInit",f);c.default=f;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-firebug', location = 'src/js/aui/firebug.js' */
("undefined"===typeof window?global:window).__469e4c263aa7b3b7681fe7afc590fcf6=function(){function e(){}function d(){var a=(0,g.default)(document.createElement("script"));a.attr("src","https://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js");(0,g.default)("head").append(a);window.firebug?d.init():setTimeout(d,0)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.warnAboutFirebug=b.firebug=void 0;var a=__bd7207540b95ff683caa1d3c0bfcc3d7,g=a&&a.__esModule?a:{"default":a},
c;if((a=__c88c0dc6258c37804917fb6a0e4092fa)&&a.__esModule)c=a;else{var f={};if(null!=a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(f[c]=a[c]);f.default=a;c=f}a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};b.firebug=d=c.fn(d,"firebug",{sinceVersion:"5.1.0"});b.warnAboutFirebug=e=c.fn(e,"warnAboutFirebug",{sinceVersion:"5.8.0"});(0,a.default)("firebug",d);(0,a.default)("warnAboutFirebug",e);b.firebug=d;b.warnAboutFirebug=e;return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-clone', location = 'src/js/aui/clone.js' */
("undefined"===typeof window?global:window).__4702df1831e4f587867761c58d6065cc=function(){function c(a){return(0,d.default)(a).clone().removeAttr("id")}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,d=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("clone",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-alphanum', location = 'src/js/aui/alphanum.js' */
("undefined"===typeof window?global:window).__733a994f2a095ea240f8e22eea3e73b2=function(){function h(c,d){for(var c=(c+"").toLowerCase(),d=(d+"").toLowerCase(),b=/(\d+|\D+)/g,e=c.match(b),b=d.match(b),h=Math.max(e.length,b.length),a=0;a<h;a++){if(a===e.length)return-1;if(a===b.length)return 1;var f=parseInt(e[a],10)+"",g=parseInt(b[a],10)+"";if(f===e[a]&&g===b[a]&&f!==g)return(f-g)/Math.abs(f-g);if((f!==e[a]||g!==b[a])&&e[a]!==b[a])return e[a]<b[a]?-1:1}return 0}var d={};"use strict";Object.defineProperty(d,
"__esModule",{value:!0});var c=__9a668cbde1e182d8e721c23580356df2,c=c&&c.__esModule?c:{"default":c};(0,c.default)("alphanum",h);d.default=h;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-on-text-resize', location = 'src/js/aui/on-text-resize.js' */
("undefined"===typeof window?global:window).__d19ef2a63d3d038250056497229b8b7e=function(){function c(a){if("function"===typeof a)if(c["on-text-resize"])c["on-text-resize"].push(function(b){a(b)});else{var b=(0,e.default)("<div></div>");b.css({width:"1em",height:"1em",position:"absolute",top:"-9999em",left:"-9999em"});(0,e.default)("body").append(b);b.size=b.width();setInterval(function(){if(b.size!==b.width()){b.size=b.width();for(var a=0,d=c["on-text-resize"].length;a<d;a++)c["on-text-resize"][a](b.size)}},
0);c.em=b;c["on-text-resize"]=[function(b){a(b)}]}}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__bd7207540b95ff683caa1d3c0bfcc3d7,e=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("onTextResize",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-unbind-text-resize', location = 'src/js/aui/unbind-text-resize.js' */
("undefined"===typeof window?global:window).__73c34f0fd40605f38dff315fb2d9163e=function(){function e(b){for(var a=0,c=d.default["on-text-resize"].length;a<c;a++)if(d.default["on-text-resize"][a]===b)return d.default["on-text-resize"].splice(a,1)}var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=__d19ef2a63d3d038250056497229b8b7e,d=c&&c.__esModule?c:{"default":c};(0,b.default)("unbindTextResize",e);a.default=
e;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-escape', location = 'src/js/aui/escape.js' */
("undefined"===typeof window?global:window).__ca63641f32276b57dde13a39951ecded=function(){function c(a){return d(a).replace(/%u\w{4}/gi,function(a){return unescape(a)})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},d=window.escape;(0,a.default)("escape",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-escape-html', location = 'src/js/aui/escape-html.js' */
("undefined"===typeof window?global:window).__75c0ba5c1d5da818c39f0ae31d9f5724=function(){function c(a){return a.replace(/[&"'<>`]/g,function(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"===typeof b[a]?b[a]:"&quot;"})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("escapeHtml",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-filter-by-search', location = 'src/js/aui/filter-by-search.js' */
("undefined"===typeof window?global:window).__188b1da071b0ba4a07b78a29f6581874=function(){function c(b,c,a){if(!c)return[];var e=a&&a.keywordsField||"keywords",d=a&&a.ignoreForCamelCase?"i":"",h=a&&a.matchBoundary?"\\b":"",f=[];c.split(a&&a.splitRegex||/\s+/).forEach(function(a){a=[RegExp(h+a,"i")];if(/^([A-Z][a-z]*) {2,}$/.test(this)){var b=this.replace(/([A-Z][a-z]*)/g,"\\b$1[^,]*");a.push(RegExp(b,d))}f.push(a)});var g=[];b.forEach(function(a){for(var b=0;b<f.length;b++){for(var c=!1,d=0;d<f[b].length;d++)if(f[b][d].test(a[e])){c=
!0;break}if(!c)return}g.push(a)});return g}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=__c88c0dc6258c37804917fb6a0e4092fa,b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},c=(0,d.fn)(c,"filterBySearch",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. If products require this function, this should be copied."});(0,b.default)("filterBySearch",c);e.default=c;return e=e["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-debounce', location = 'src/js/aui/debounce.js' */
("undefined"===typeof window?global:window).__797d10010c51da30b099c976f973e278=function(){function g(a,b){var c,d;return function(){var e=arguments,f=this;clearTimeout(c);c=setTimeout(function(){d=a.apply(f,e);f=e=null},b);return d}}function h(a,b){var c=null,d;return function(){var e=this,f=arguments;null===c&&(d=a.apply(e,f));clearTimeout(c);c=setTimeout(function(){c=e=f=null},b);return d}}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.default=g;b.debounceImmediate=h;var a=
__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a};(0,a.default)("debounce",g);(0,a.default)("debounceImmediate",h);return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-unique-id', location = 'src/js/aui/unique-id.js' */
("undefined"===typeof window?global:window).__e1499ff20858265795f80d7a4fc9c0f4=function(){function e(a){d=f++ +"";b=a?a+d:"aui-uid-"+d;if(document.getElementById(b)&&(b=b+"-"+(new Date).getTime(),document.getElementById(b)))throw Error('Timestamped fallback ID "'+b+'" exists.');return b}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},d,b,f=0;(0,a.default)("id",e);c.default=e;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-add-id', location = 'src/js/aui/internal/add-id.js' */
("undefined"===typeof window?global:window).__720511231eacfd9a564b2acaf400d3c5=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){var c=(0,e.default)(a),d=b||!1;c.each(function(){var a=(0,e.default)(this);a.attr("id")||a.attr("id",(0,f.default)(d))})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=c(__bd7207540b95ff683caa1d3c0bfcc3d7),g=c(__9a668cbde1e182d8e721c23580356df2),f=c(__e1499ff20858265795f80d7a4fc9c0f4);(0,g.default)("_addID",d);
b.default=d;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-forms', location = 'src/js/aui/forms.js' */
("undefined"===typeof window?global:window).__373dfbf532dc7dad0a2fbd134ab1e791=function(){function c(a,b){var c=(0,d.default)(a);"undefined"===typeof b&&(b=!0);return c.each(function(){this.disabled=!b})}function e(){(0,d.default)(".icon-inline-help").click(function(){var a=(0,d.default)(this).siblings(".field-help");a.hasClass("hidden")?a.removeClass("hidden"):a.addClass("hidden")})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.inlineHelp=b.enable=void 0;var a=__bd7207540b95ff683caa1d3c0bfcc3d7,
d=a&&a.__esModule?a:{"default":a},a=(a=__9a668cbde1e182d8e721c23580356df2)&&a.__esModule?a:{"default":a};(0,a.default)("enable",c);(0,a.default)("inlineHelp",e);b.enable=c;b.inlineHelp=e;return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-setup', location = 'src/js/aui/setup.js' */
("undefined"===typeof window?global:window).__b6d6016a041dc9cb00a2f1ccddcdabcf=function(){function b(a){return a&&a.__esModule?a:{"default":a}}"use strict";var c=b(__bd7207540b95ff683caa1d3c0bfcc3d7),d=b(__9a668cbde1e182d8e721c23580356df2),e=b(__42c7868600dc182ad91aa15094975e87),f=b(__849973663ed3d680bf7bf58ac8b9aec5);(0,c.default)(function(){var a=(0,c.default)("body");a.data("auiVersion")||a.attr("data-aui-version",f.default);(0,e.default)()});c.default.ajaxSettings.traditional=!0;(0,d.default)("$",
c.default);return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-format', location = 'src/js/aui/format.js' */
("undefined"===typeof window?global:window).__b9ecb36a7ca0505acec463b07515cb6c=function(){function l(g){var i=/'(?!')/g,o=/^\d+$/,p=/^(\d+),number$/,q=/^(\d+)\,choice\,(.+)/,r=/^(\d+)([#<])(.+)/,m=function(c){for(var h=!1,e=-1,a=0,b=0;b<c.length;b++){var d=c.charAt(b);"'"==d&&(h=!h);if(!h)if("{"===d)0===a&&(e=b),a++;else if("}"===d&&0<a&&(a--,0===a))return h=[],h.push(c.substring(0,b+1)),h.push(c.substring(0,e)),h.push(c.substring(e+1,b)),h}return null};return function(c){var h=arguments,e="";if(!c)return e;
for(var a=m(c);a;){var c=c.substring(a[0].length),e=e+a[1].replace(i,""),b=a[2],a=h,d="",f=void 0;if(b.match(o))d=a.length>++b?a[b]:"";else if(f=b.match(p))d=a.length>++f[1]?a[f[1]]:"";else if(f=b.match(q))if(b=a.length>++f[1]?a[f[1]]:null,null!==b){for(var f=f[2].split("|"),g=null,k=0;k<f.length;k++){var j=f[k].match(r),n=parseInt(j[1],10);if(b<n){d=g?g:j[3];break}if(b==n&&"#"==j[2]){d=j[3];break}k==f.length-1&&(d=j[3]);g=j[3]}a=[d].concat(Array.prototype.slice.call(a,1));d=l.apply(null,a)}e+=d;
a=m(c)}return e+=c.replace(i,"")}.apply(null,arguments)}var i={};Object.defineProperty(i,"__esModule",{value:!0});var g=__9a668cbde1e182d8e721c23580356df2,g=g&&g.__esModule?g:{"default":g};(0,g.default)("format",l);i.default=l;return i=i["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-animation', location = 'src/js/aui/internal/animation.js' */
("undefined"===typeof window?global:window).__5751b8a604ec61b53b208676ae78d41d=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.recomputeStyle=function(a){a=a.jquery?a[0]:a;window.getComputedStyle(a,null).getPropertyValue("left")};return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-blanket', location = 'src/js/aui/blanket.js' */
("undefined"===typeof window?global:window).__7f21a71921a14c7b5b83c94ec80f4db5=function(){function a(d,c){Array.prototype.forEach.call(document.body.children,function(a){!a.hasAttribute("aria-hidden")&&!a.classList.contains("aui-layer")&&(a.setAttribute("aria-hidden","true"),f.push(a))});b||(b=document.body);!0===d&&h();var e=!!a.$dim&&"false"===a.$dim.attr("aria-hidden");a.$dim&&(a.$dim.remove(),a.$dim=null);a.$dim=(0,i.default)("<div></div>").addClass("aui-blanket");a.$dim.attr("tabindex","0");
a.$dim.appendTo(document.body);e||((0,j.recomputeStyle)(a.$dim),a.cachedOverflow={overflow:b.style.overflow,overflowX:b.style.overflowX,overflowY:b.style.overflowY},b.style.overflowX="hidden",b.style.overflowY="hidden",b.style.overflow="hidden");a.$dim.attr("aria-hidden","false");c&&a.$dim.css({zIndex:c});return a.$dim}function g(){f.forEach(function(a){a.removeAttribute("aria-hidden")});f=[];a.$dim&&(a.$dim.attr("aria-hidden","true"),b&&(b.style.overflow=a.cachedOverflow.overflow,b.style.overflowX=
a.cachedOverflow.overflowX,b.style.overflowY=a.cachedOverflow.overflowY))}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.undim=c.dim=void 0;var e=__bd7207540b95ff683caa1d3c0bfcc3d7,i=e&&e.__esModule?e:{"default":e},e=__c88c0dc6258c37804917fb6a0e4092fa,j=__5751b8a604ec61b53b208676ae78d41d,d=__9a668cbde1e182d8e721c23580356df2,d=d&&d.__esModule?d:{"default":d},b,f=[],h=(0,e.getMessageLogger)("useShim",{extraInfo:"useShim has no alternative as it is now calculated by dim()."});
(0,d.default)("dim",a);(0,d.default)("undim",g);c.dim=a;c.undim=g;return c}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-plugins-jquery-aop', location = 'src/js-vendor/jquery/plugins/jquery.aop.js' */
("undefined"===typeof window?global:window).__af34b57a5ec480e648ba4e11f4ac56dc=function(){for(var g=!0,h,i=Object.prototype.toString,j={},q={1:"element",3:"textnode",9:"document",11:"fragment"},k="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),l=k.length;l--;){var m=k[l],n=window[m];if(n)try{j[i.call(new n)]=m.toLowerCase()}catch(r){}}h=function(a){return null==a&&(void 0===a?"undefined":"null")||
a.nodeType&&q[a.nodeType]||"number"==typeof a.length&&(a.callee&&"arguments"||a.alert&&"window"||a.item&&"nodelist")||j[i.call(a)]};var o=function(a,c,d){var f=a[c],b;1==d.type||2==d.type||3==d.type?b=function(){var a,b=null;try{a=f.apply(this,arguments)}catch(e){b=e}if(1==d.type)if(null==b)a=d.value.apply(this,[a,c]);else throw b;else 2==d.type&&null!=b?a=d.value.apply(this,[b,c]):3==d.type&&(a=d.value.apply(this,[a,b,c]));return a}:4==d.type?b=function(){d.value.apply(this,[arguments,c]);return f.apply(this,
arguments)}:6==d.type?b=function(){return d.value.apply(this,arguments)}:5==d.type&&(b=function(){var a=this,b=Array.prototype.slice.call(arguments);return d.value.apply(a,[{arguments:b,method:c,proceed:function(){return f.apply(a,b)}}])});b.unweave=function(){a[c]=f;pointcut=a=b=f=null};return a[c]=b},p=function(a,c,d){var f=[],b;for(b in a){var e=null;try{e=a[b]}catch(g){}null!=e&&(b.match(c.method)&&"function"==h(e))&&(f[f.length]={source:a,method:b,advice:d})}return f},e=function(a,c){var d="undefined"!=
typeof a.target.prototype?a.target.prototype:a.target,f=[];if(6!=c.type&&"undefined"==typeof d[a.method]){var b=p(a.target,a,c);0==b.length&&(b=p(d,a,c));for(var e in b)f[f.length]=o(b[e].source,b[e].method,b[e].advice)}else f[0]=o(d,a.method,c);return g?f:f[0]};jQuery.aop={after:function(a,c){return e(a,{type:1,value:c})},afterThrow:function(a,c){return e(a,{type:2,value:c})},afterFinally:function(a,c){return e(a,{type:3,value:c})},before:function(a,c){return e(a,{type:4,value:c})},around:function(a,
c){return e(a,{type:5,value:c})},introduction:function(a,c){return e(a,{type:6,value:c})},setup:function(a){g=a.regexMatch}};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-drop-down', location = 'src/js/aui/drop-down.js' */
("undefined"===typeof window?global:window).__00497a4f457d24a5ae71f7e09ff3cf48=function(){function r(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(d[b]=a[b]);d.default=a;return d}function d(c,h){var b=null,s=[],o=!1,q=(0,a.default)(document),g={item:"li:has(a)",activeClass:"active",alignment:"right",displayHandler:function(a){return a.name},escapeHandler:function(){this.hide("escape");return!1},hideHandler:function(){},moveHandler:function(){},
useDisabled:!1};a.default.extend(g,h);g.alignment={left:"left",right:"right"}[g.alignment.toLowerCase()]||"left";if(c&&c.jquery)b=c;else if("string"===typeof c)b=(0,a.default)(c);else if(c&&c.constructor===Array){for(var b=(0,a.default)("<div></div>").addClass("aui-dropdown").toggleClass("hidden",!!g.isHiddenByDefault),t=0,x=c.length;t<x;t++){for(var i=(0,a.default)("<ol></ol>"),e=0,n=c[t].length;e<n;e++){var j=(0,a.default)("<li></li>"),k=c[t][e];k.href?(j.append((0,a.default)("<a></a>").html("<span>"+
g.displayHandler(k)+"</span>").attr({href:k.href}).addClass(k.className)),a.default.data((0,a.default)("a > span",j)[0],"properties",k)):j.html(k.html).addClass(k.className);k.icon&&j.prepend((0,a.default)("<img />").attr("src",k.icon));k.insideSpanIcon&&j.children("a").prepend((0,a.default)("<span></span>").attr("class","icon"));k.iconFontClass&&j.children("a").prepend((0,a.default)("<span></span>").addClass("aui-icon aui-icon-small aui-iconfont-"+k.iconFontClass));a.default.data(j[0],"properties",
k);i.append(j)}t===x-1&&i.addClass("last");b.append(i)}(0,a.default)("body").append(b)}else throw Error("dropDown function was called with illegal parameter. Should be $ object, $ selector or array.");var l=function(){p(1)},m=function(){p(-1)},p=function(b){var c=!o,f=d.current.$[0],e=d.current.links,h=f.focused;o=!0;if(0!==e.length){f.focused="number"===typeof h?h:-1;if(!d.current)return y.log("move - not current, aborting"),!0;f.focused+=b;0>f.focused?f.focused=e.length-1:f.focused>=e.length&&(f.focused=
0);g.moveHandler((0,a.default)(e[f.focused]),0>b?"up":"down");c&&e.length?((0,a.default)(e[f.focused]).addClass(g.activeClass),o=!1):e.length||(o=!1)}},u=function(b){if(!d.current)return!0;var e=b.which,f=d.current.$[0],c=d.current.links;d.current.cleanActive();switch(e){case 40:l();break;case 38:m();break;case 27:return g.escapeHandler.call(d.current,b);case 13:return 0<=f.focused?g.selectionHandler?g.selectionHandler.call(d.current,b,(0,a.default)(c[f.focused])):"a"!=(0,a.default)(c[f.focused]).attr("nodeName")?
(0,a.default)("a",c[f.focused]).trigger("focus"):(0,a.default)(c[f.focused]).trigger("focus"):!0;default:return c.length&&(0,a.default)(c[f.focused]).addClass(g.activeClass),!0}b.stopPropagation();b.preventDefault();return!1},v=function(a){a&&a.which&&3==a.which||a&&a.button&&2==a.button||d.current&&d.current.hide("click")},w=function(b){return function(){d.current&&(d.current.cleanFocus(),this.originalClass=this.className,(0,a.default)(this).addClass(g.activeClass),d.current.$[0].focused=b)}},r=
function(b){if(b.button||b.metaKey||b.ctrlKey||b.shiftKey)return!0;d.current&&g.selectionHandler&&g.selectionHandler.call(d.current,b,(0,a.default)(this))};b.each(function(){var b=this,c=(0,a.default)(this),f={},e={reset:function(){f=a.default.extend(f,{$:c,links:(0,a.default)(g.item||"li:has(a)",b),cleanActive:function(){b.focused+1&&f.links.length&&(0,a.default)(f.links[b.focused]).removeClass(g.activeClass)},cleanFocus:function(){f.cleanActive();b.focused=-1},moveDown:l,moveUp:m,moveFocus:u,getFocusIndex:function(){return"number"===
typeof b.focused?b.focused:-1}});f.links.each(function(b){var c=(0,a.default)(this),d=!1;c.data("events")&&a.default.each(c.data("events"),function(b,c){a.default.each(c,function(b,a){if(r===a)return d=!0,!1})});d||(c.hover(w(b),f.cleanFocus),c.click(r))})},appear:function(a){a?(c.removeClass("hidden"),c.addClass("aui-dropdown-"+g.alignment)):c.addClass("hidden")},fade:function(a){a?c.fadeIn("fast"):c.fadeOut("fast")},scroll:function(a){a?c.slideDown("fast"):c.slideUp("fast")}};f.reset=e.reset;f.reset();
f.addControlProcess=function(b,c){a.default.aop.around({target:this,method:b},c)};f.addCallback=function(b,c){return a.default.aop.after({target:this,method:b},c)};f.show=function(c){if(!g.useDisabled||!this.$.closest(".aui-dd-parent").hasClass("disabled"))this.alignment=g.alignment,v(),d.current=this,this.method=c||this.method||"appear",this.timer=setTimeout(function(){q.click(v)},0),q.keydown(u),g.firstSelected&&this.links[0]&&w(0).call(this.links[0]),(0,a.default)(b.offsetParent).css({zIndex:2E3}),
e[this.method](!0),(0,a.default)(document).trigger("showLayer",["dropdown",d.current])};f.hide=function(b){this.method=this.method||"appear";(0,a.default)(c.get(0).offsetParent).css({zIndex:""});this.cleanFocus();e[this.method](!1);q.unbind("click",v).unbind("keydown",u);(0,a.default)(document).trigger("hideLayer",["dropdown",d.current]);d.current=null;return b};f.addCallback("reset",function(){g.firstSelected&&this.links[0]&&w(0).call(this.links[0])});d.iframes||(d.iframes=[]);d.createShims=function z(){(0,
a.default)("iframe").each(function(){if(!this.shim){this.shim=(0,a.default)("<div />").addClass("shim hidden").appendTo("body");d.iframes.push(this)}});return z}();f.addCallback("show",function(){(0,a.default)(d.iframes).each(function(){var b=(0,a.default)(this);if(b.is(":visible")){var c=b.offset();c.height=b.height();c.width=b.width();this.shim.css({left:c.left+"px",top:c.top+"px",height:c.height+"px",width:c.width+"px"}).removeClass("hidden")}})});f.addCallback("hide",function(){(0,a.default)(d.iframes).each(function(){this.shim.addClass("hidden")});
g.hideHandler()});s.push(f)});return s}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});var l=__bd7207540b95ff683caa1d3c0bfcc3d7,a=l&&l.__esModule?l:{"default":l};__af34b57a5ec480e648ba4e11f4ac56dc;var l=r(__c88c0dc6258c37804917fb6a0e4092fa),y=r(__2f5c294b01e66b15309518e39bcb949d),m=__9a668cbde1e182d8e721c23580356df2,m=m&&m.__esModule?m:{"default":m};d.getAdditionalPropertyValue=function(c,d){var b=c[0];(!b||"string"!==typeof b.tagName||"li"!==b.tagName.toLowerCase())&&y.log("dropDown.getAdditionalPropertyValue : item passed in should be an LI element wrapped by jQuery");
return(b=a.default.data(b,"properties"))?b[d]:null};d.removeAllAdditionalProperties=function(){};d.Standard=function(c){var h=[],b={selector:".aui-dd-parent",dropDown:".aui-dropdown",trigger:".aui-dd-trigger"};a.default.extend(b,c);var s=function(c,d,g,e){a.default.extend(e,{trigger:c});d.addClass("dd-allocated");g.addClass("hidden");!1==b.isHiddenByDefault&&e.show();e.addCallback("show",function(){d.addClass("active")});e.addCallback("hide",function(){d.removeClass("active")})},o=function(b,a,c,
e){e!=d.current&&(c.css({top:a.outerHeight()}),e.show(),b.stopImmediatePropagation());b.preventDefault()};if(b.useLiveEvents){var q=[],g=[];(0,a.default)(b.trigger).live("click",function(c){var h=(0,a.default)(this),i,e,n;if(0<=(i=a.default.inArray(this,q))){var j=g[i];e=j.dropdown;n=j.ddcontrol}else{i=h.closest(b.selector);e=i.find(b.dropDown);if(0===e.length)return;n=d(e,b)[0];if(!n)return;q.push(this);j={parent:i,dropdown:e,ddcontrol:n};s(h,i,e,n);g.push(j)}o(c,h,e,n)})}else c=this instanceof a.default?
this:(0,a.default)(b.selector),c=c.not(".dd-allocated").filter(":has("+b.dropDown+")").filter(":has("+b.trigger+")"),c.each(function(){var c=(0,a.default)(this),g=(0,a.default)(b.dropDown,this),i=(0,a.default)(b.trigger,this),e=d(g,b)[0];a.default.extend(e,{trigger:i});s(i,c,g,e);i.click(function(b){o(b,i,g,e)});h.push(e)});return h};d.Ajax=function(c){var h={cache:!0};a.default.extend(h,c||{});c=d.Standard.call(this,h);(0,a.default)(c).each(function(){var b=this;a.default.extend(b,{getAjaxOptions:function(c){var d=
function(a){h.formatResults&&(a=h.formatResults(a));h.cache&&b.cache.set(b.getAjaxOptions(),a);b.refreshSuccess(a)};return h.ajaxOptions?a.default.isFunction(h.ajaxOptions)?a.default.extend(h.ajaxOptions.call(b),{success:d}):a.default.extend(h.ajaxOptions,{success:d}):a.default.extend(c,{success:d})},refreshSuccess:function(b){this.$.html(b)},cache:function(){var b={};return{get:function(a){return b[(a.url+(a.data||"")).replace(/[\?\&]/gi,"")]},set:function(a,c){b[(a.url+(a.data||"")).replace(/[\?\&]/gi,
"")]=c},reset:function(){b={}}}}(),show:function(c){return function(){h.cache&&b.cache.get(b.getAjaxOptions())?(b.refreshSuccess(b.cache.get(b.getAjaxOptions())),c.call(b)):((0,a.default)(a.default.ajax(b.getAjaxOptions())).throbber({target:b.$,end:function(){b.reset()}}),c.call(b),b.iframeShim&&b.iframeShim.hide())}}(b.show),resetCache:function(){b.cache.reset()}});b.addCallback("refreshSuccess",function(){b.reset()})});return c};a.default.fn.dropDown=function(a,h){a=(a||"Standard").replace(/^([a-z])/,
function(a){return a.toUpperCase()});return d[a].call(this,h)};a.default.fn.dropDown=l.construct(a.default.fn.dropDown,"Dropdown constructor",{alternativeName:"Dropdown2"});(0,m.default)("dropDown",d);p.default=d;return p=p["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:dropdown', location = 'src/js-vendor/jquery/plugins/jquery.aop.js' */
("undefined"===typeof window?global:window).__af34b57a5ec480e648ba4e11f4ac56dc=function(){for(var g=!0,h,i=Object.prototype.toString,j={},q={1:"element",3:"textnode",9:"document",11:"fragment"},k="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),l=k.length;l--;){var m=k[l],n=window[m];if(n)try{j[i.call(new n)]=m.toLowerCase()}catch(r){}}h=function(a){return null==a&&(void 0===a?"undefined":"null")||
a.nodeType&&q[a.nodeType]||"number"==typeof a.length&&(a.callee&&"arguments"||a.alert&&"window"||a.item&&"nodelist")||j[i.call(a)]};var o=function(a,c,d){var f=a[c],b;1==d.type||2==d.type||3==d.type?b=function(){var a,b=null;try{a=f.apply(this,arguments)}catch(e){b=e}if(1==d.type)if(null==b)a=d.value.apply(this,[a,c]);else throw b;else 2==d.type&&null!=b?a=d.value.apply(this,[b,c]):3==d.type&&(a=d.value.apply(this,[a,b,c]));return a}:4==d.type?b=function(){d.value.apply(this,[arguments,c]);return f.apply(this,
arguments)}:6==d.type?b=function(){return d.value.apply(this,arguments)}:5==d.type&&(b=function(){var a=this,b=Array.prototype.slice.call(arguments);return d.value.apply(a,[{arguments:b,method:c,proceed:function(){return f.apply(a,b)}}])});b.unweave=function(){a[c]=f;pointcut=a=b=f=null};return a[c]=b},p=function(a,c,d){var f=[],b;for(b in a){var e=null;try{e=a[b]}catch(g){}null!=e&&(b.match(c.method)&&"function"==h(e))&&(f[f.length]={source:a,method:b,advice:d})}return f},e=function(a,c){var d="undefined"!=
typeof a.target.prototype?a.target.prototype:a.target,f=[];if(6!=c.type&&"undefined"==typeof d[a.method]){var b=p(a.target,a,c);0==b.length&&(b=p(d,a,c));for(var e in b)f[f.length]=o(b[e].source,b[e].method,b[e].advice)}else f[0]=o(d,a.method,c);return g?f:f[0]};jQuery.aop={after:function(a,c){return e(a,{type:1,value:c})},afterThrow:function(a,c){return e(a,{type:2,value:c})},afterFinally:function(a,c){return e(a,{type:3,value:c})},before:function(a,c){return e(a,{type:4,value:c})},around:function(a,
c){return e(a,{type:5,value:c})},introduction:function(a,c){return e(a,{type:6,value:c})},setup:function(a){g=a.regexMatch}};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-amdify', location = 'src/js/aui/internal/amdify.js' */
("undefined"===typeof window?global:window).__65f46acd493e225a8705ab04389e284d=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b){if(window.define){var c=window.define;c(a,[],function(){return b})}return b};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-skate', location = 'src/js/aui/internal/skate.js' */
("undefined"===typeof window?global:window).__7acfe7fd38bbf8b5bf76cc953770b033=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__23d805956abb7113753ee633dcc7a634,a=(a&&a.__esModule?a:{"default":a}).default.noConflict();b.default=a;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-underscorejs-underscore', location = 'src/js-vendor/underscorejs/underscore.js' */
("undefined"===typeof window?global:window).__f97340202cf7ae2d8f4dc9fc2d3264af=function(){var p={exports:{}},r=p.exports,x={module:p,exports:r},s;s=function(n,q,m){var k=("undefined"===typeof window?global:window).define,l,o,m=[m,q,n].filter(function(i){return"function"===typeof i})[0],q=[q,n,[]].filter(Array.isArray)[0];l=m.apply(null,q.map(function(i){return x[i]}));o=typeof l;"function"===typeof k&&k("string"===typeof n?n:"__f97340202cf7ae2d8f4dc9fc2d3264af",q,m);"string"===o?l=String(l):"number"===
o?l=Number(l):"boolean"===o&&(l=Boolean(l));void 0!==l&&(r=p.exports=l)};s.amd=!0;(function(){var n=this,q=n._,m={},k=Array.prototype,l=Object.prototype,o=k.push,i=k.slice,v=k.concat,t=l.toString,s=l.hasOwnProperty,E=k.forEach,F=k.map,G=k.reduce,H=k.reduceRight,I=k.filter,J=k.every,K=k.some,w=k.indexOf,L=k.lastIndexOf,l=Array.isArray,x=Object.keys,y=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof r?("undefined"!==
typeof p&&p.exports&&(r=p.exports=b),r._=b):n._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(E&&a.forEach===E)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===m)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,a[g[e]],g[e],a)===m)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(F&&a.map===F)return a.map(c,b);j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=
b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(G&&a.reduce===G){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,O){if(f)d=c.call(e,d,a,b,O);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(H&&a.reduceRight===H){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=
h.length;j(a,function(b,i,k){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,k);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;M(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(I&&a.filter===I)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};b.reject=function(a,c,d){return b.filter(a,function(a,b,
g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(J&&a.every===J)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return m});return!!e};var M=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(K&&a.some===K)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return m});return!!e};b.contains=b.include=function(a,c){return a==null?false:w&&a.indexOf===w?a.indexOf(c)!=-1:M(a,function(a){return a===
c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&
b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=
b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var z=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=z(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<d||d===void 0)return-1}return a.index-c.index}),"value")};
var A=function(a){return function(c,d,e){var f={},g=d==null?b.identity:z(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=A(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=A(function(a,c,b){a[c]=b});b.countBy=A(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,c,d,e){for(var d=d==null?b.identity:z(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):
a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,
b.identity)};var N=function(a,c,d){if(c&&b.every(a,b.isArray))return v.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?o.apply(d,a):N(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return N(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,
true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=v.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:
d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(w&&a.indexOf===w)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(L&&a.lastIndexOf===L)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=
1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var B=function(){};b.bind=function(a,c){var d,e;if(y&&a.bind===y)return y.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));B.prototype=a.prototype;var b=new B;B.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=
function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,
d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var k=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var j=new Date;!i&&d.leading===false&&(i=j);var l=b-(j-i);e=this;f=arguments;if(l<=0){clearTimeout(h);h=null;i=j;g=a.apply(e,f)}else!h&&d.trailing!==false&&(h=setTimeout(k,l));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=
new Date;var k=function(){var j=new Date-h;if(j<b)e=setTimeout(k,b-j);else{e=null;d||(i=a.apply(g,f))}},j=d&&!e;e||(e=setTimeout(k,b));j&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=null;return d}};b.wrap=function(a,b){return function(){var d=[a];o.apply(d,arguments);return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};
b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};
b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=v.apply(k,i.call(arguments,1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=v.apply(k,i.call(arguments,1)),e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===
void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var C=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=t.call(a);if(f!=t.call(c))return false;switch(f){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==
+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=C(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,
i)){g++;if(!(h=b.has(c,i)&&C(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return C(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===1)};b.isArray=l||function(a){return t.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),
function(a){b["is"+a]=function(b){return t.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a==="function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!=+a};b.isBoolean=function(a){return a===true||a===false||t.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===
void 0};b.has=function(a,b){return s.call(a,b)};b.noConflict=function(){n._=q;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};u.unescape=b.invert(u.escape);var P={escape:RegExp("["+b.keys(u.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(u.unescape).join("|")+
")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(P[a],function(b){return u[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];o.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var Q=0;b.uniqueId=function(a){var b=++Q+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,
interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||D).source,(d.interpolate||D).source,(d.evaluate||D).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(S,function(a){return"\\"+R[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));
d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{e=new Function(d.variable||"obj","_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};
b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
"function"===typeof window.define&&s("underscore",[],function(){return window._});return p.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-underscore', location = 'src/js/aui/underscore.js' */
("undefined"===typeof window?global:window).__b8debe7dbacd8c0f9a68380b427aca10=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__f97340202cf7ae2d8f4dc9fc2d3264af,a=a&&a.__esModule?a:{"default":a};window._||(window._=a.default);b.default=window._;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-spinner', location = 'src/js/aui/spinner.js' */
("undefined"===typeof window?global:window).__05bca48700965a7a8a29288c57bd100b=function(){function j(a){var d=f.MEDIUM.name;"string"===typeof a&&(a=a.toLowerCase(),-1<Object.keys(f).map(function(a){return a.toLowerCase()}).indexOf(a)&&(d=a));return d}function g(a){var d=k.default.find(f,function(b){return b.name===a._data.size})||f.MEDIUM,e=d.px,d=d.radius,b=a.querySelector("svg"),c=a.querySelector("circle");b.setAttribute("size",e);b.setAttribute("height",e);b.setAttribute("width",e);b.setAttribute("viewBox",
"0 0 "+e+" "+e);b=e/2;c.setAttribute("cx",b);c.setAttribute("cy",b);c.setAttribute("r",d);if(a._data.filled){if((c=a.parentNode)&&1===c.nodeType)d=a.getBoundingClientRect(),c=c.getBoundingClientRect(),c=c.top+c.height/2,e=d.top+e/2,a.querySelector("svg").style.top=c-e+"px"}else delete a.querySelector("svg").style.top}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.SIZE=void 0;var b=__23d805956abb7113753ee633dcc7a634,b=b&&b.__esModule?b:{"default":b},l=__c88c0dc6258c37804917fb6a0e4092fa,
i=__b8debe7dbacd8c0f9a68380b427aca10,k=i&&i.__esModule?i:{"default":i},f={SMALL:{name:"small",px:20,radius:9},MEDIUM:{name:"medium",px:30,radius:13.5},LARGE:{name:"large",px:50,radius:22.5}},m={filled:!1,size:f.MEDIUM.name},n=(0,l.getMessageLogger)("<aui-spinner> filled attribute",{sinceVersion:"7.9.4",removeInVersion:"9",extraInfo:"Add CSS to the parent element of the <aui-spinner>.\nUse CSS flexbox or grid to vertically align it.\nSee https://css-tricks.com/centering-css-complete-guide/ for techniques."}),
o=(0,l.getMessageLogger)("<aui-spinner> filled property",{sinceVersion:"7.9.4",removeInVersion:"9",extraInfo:"Add CSS to the parent element of the <aui-spinner>.\nUse CSS flexbox or grid to vertically align it.\nSee https://css-tricks.com/centering-css-complete-guide/ for techniques."}),b=(0,b.default)("aui-spinner",{template:function(a){a.innerHTML='<div class="aui-spinner spinner"><svg focusable="false"><circle></circle></svg></div>';g(a)},attached:function(a){g(a)},attributes:{filled:{created:function(a){n();
a._data.filled=!0;g(a)},removed:function(a){a._data.filled=!1;g(a)}},size:function(a,b){a._data.size=j(b.newValue);g(a)}},prototype:{get _data(){return this.__data||(this._data=k.default.defaults({},m))},set _data(a){return this.__data=a},set filled(a){o();a?this.setAttribute("filled",""):this.removeAttribute("filled")},set size(a){a=j(a);this.setAttribute("size",a)}}});h.default=b;h.SIZE=f;return h}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-button', location = 'src/js/aui/button.js' */
("undefined"===typeof window?global:window).__140df591716eb4582df81cdc5f79928b=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return a.hasAttribute("aria-busy")&&"true"===a.getAttribute("aria-busy")}"use strict";var c;var a=__2f5c294b01e66b15309518e39bcb949d;if(a&&a.__esModule)c=a;else{var b={};if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(b[f]=a[f]);b.default=a;c=b}var a=d(__65f46acd493e225a8705ab04389e284d),b=d(__7acfe7fd38bbf8b5bf76cc953770b033),
g=__05bca48700965a7a8a29288c57bd100b,h=d(g);(0,b.default)("aui-button",{type:b.default.type.CLASSNAME,created:function(a){a._spinner=new h.default;a._spinner.setAttribute("size",g.SIZE.SMALL.name)},prototype:{busy:function(){if("INPUT"===this.nodeName||e(this))return c.warn("It is not valid to call busy() on an input button."),this;this.appendChild(this._spinner);this.setAttribute("aria-busy",!0);this.setAttribute("busy","");return this},idle:function(){if("INPUT"===this.nodeName||!e(this))return c.warn("It is not valid to call idle() on an input button."),
this;this.removeChild(this._spinner);this.removeAttribute("aria-busy");this.removeAttribute("busy");return this},isBusy:function(){return"INPUT"===this.nodeName?(c.warn("It is not valid to call isBusy() on an input button."),!1):e(this)}}});(0,a.default)("aui/button");return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.soy.soy-template-plugin:soy-deps', location = 'js/soyutils.js' */
/*!
 * Copyright 2008 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var goog=goog||{};goog.global=this;COMPILED=true;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(a){return a!==void 0};goog.exportPath_=function(c,a,f){var d=c.split(".");var e=f||goog.global;if(!(d[0] in e)&&e.execScript){e.execScript("var "+d[0])}for(var b;d.length&&(b=d.shift());){if(!d.length&&goog.isDef(a)){e[b]=a}else{if(e[b]){e=e[b]}else{e=e[b]={}}}}};goog.define=function(b,a){var c=a;if(!COMPILED){if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,b)){c=goog.global.CLOSURE_UNCOMPILED_DEFINES[b]}else{if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,b)){c=goog.global.CLOSURE_DEFINES[b]}}}goog.exportPath_(b,c)};goog.DEBUG=true;goog.define("goog.LOCALE","en");goog.define("goog.TRUSTED_SITE",true);goog.define("goog.STRICT_MODE_COMPATIBLE",false);goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG);goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}}goog.constructNamespace_(a)};goog.constructNamespace_=function(a,c){if(!COMPILED){delete goog.implicitNamespaces_[a];var b=a;while((b=b.substring(0,b.lastIndexOf(".")))){if(goog.getObjectByName(b)){break}goog.implicitNamespaces_[b]=true}}goog.exportPath_(a,c)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(a){if(!goog.isString(a)||!a||a.search(goog.VALID_MODULE_RE_)==-1){throw Error("Invalid module identifier")}if(!goog.isInModuleLoader_()){throw Error("Module "+a+" has been loaded incorrectly.")}if(goog.moduleLoaderState_.moduleName){throw Error("goog.module may only be called once per module.")}goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(goog.isProvided_(a)){return a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a)}else{return null}}};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_()){throw new Error("goog.module.declareTestMethods must be called from within a goog.module")}goog.moduleLoaderState_.declareTestMethods=true};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_()){throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module")}if(!COMPILED&&!goog.moduleLoaderState_.moduleName){throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.")}goog.moduleLoaderState_.declareLegacyNamespace=true};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE){a=a||"";throw Error("Importing test-only code into non-debug environment"+(a?": "+a:"."))}};goog.forwardDeclare=function(a){};if(!COMPILED){goog.isProvided_=function(a){return(a in goog.loadedModules_)||(!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a)))};goog.implicitNamespaces_={"goog.module":true}}goog.getObjectByName=function(b,c){var d=b.split(".");var e=c||goog.global;for(var a;a=d.shift();){if(goog.isDefAndNotNull(e[a])){e=e[a]}else{return null}}return e};goog.globalize=function(d,b){var c=b||goog.global;for(var a in d){c[a]=d[a]}};goog.addDependency=function(f,e,l,d){if(goog.DEPENDENCIES_ENABLED){var g,a;var k=f.replace(/\\/g,"/");var h=goog.dependencies_;for(var c=0;g=e[c];c++){h.nameToPath[g]=k;h.pathIsModule[k]=!!d}for(var b=0;a=l[b];b++){if(!(k in h.requires)){h.requires[k]={}}h.requires[k][a]=true}}};goog.define("goog.ENABLE_DEBUG_LOADER",true);goog.logToConsole_=function(a){if(goog.global.console){goog.global.console.error(a)}};goog.require=function(b){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_){goog.maybeProcessDeferredDep_(b)}if(goog.isProvided_(b)){if(goog.isInModuleLoader_()){return goog.module.getInternal_(b)}else{return null}}if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(b);if(c){goog.included_[c]=true;goog.writeScripts_();return null}}var a="goog.require could not find: "+b;goog.logToConsole_(a);throw Error(a)}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.identityFunction=function(b,a){return b};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_){return a.instance_}if(goog.DEBUG){goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a}return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.define("goog.LOAD_MODULE_USING_EVAL",true);goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;if(goog.DEPENDENCIES_ENABLED){goog.included_={};goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write" in a};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else{if(!goog.inHtmlDocument_()){return}}var f=goog.global.document;var a=f.getElementsByTagName("script");for(var d=a.length-1;d>=0;--d){var c=(a[d]);var g=c.src;var e=g.lastIndexOf("?");var b=e==-1?g.length:e;if(g.substr(b-7,7)=="base.js"){goog.basePath=g.substr(0,b-7);return}}};goog.importScript_=function(c,a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(b(c,a)){goog.dependencies_.written[c]=true}};goog.IS_OLD_IE_=goog.global.document&&goog.global.document.all&&!goog.global.atob;goog.importModule_=function(b){var a='goog.retrieveAndExecModule_("'+b+'");';if(goog.importScript_("",a)){goog.dependencies_.written[b]=true}};goog.queuedModules_=[];goog.wrapModule_=function(b,a){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON)){return'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+b+"\n"}else{return"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+b+"\n")+");"}};goog.loadQueuedModules_=function(){var c=goog.queuedModules_.length;if(c>0){var a=goog.queuedModules_;goog.queuedModules_=[];for(var b=0;b<c;b++){var d=a[b];goog.maybeProcessDeferredPath_(d)}}};goog.maybeProcessDeferredDep_=function(a){if(goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)){var b=goog.getPathFromDeps_(a);goog.maybeProcessDeferredPath_(goog.basePath+b)}};goog.isDeferredModule_=function(a){var c=goog.getPathFromDeps_(a);if(c&&goog.dependencies_.pathIsModule[c]){var b=goog.basePath+c;return(b) in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(a){var b=goog.getPathFromDeps_(a);if(b&&(b in goog.dependencies_.requires)){for(var c in goog.dependencies_.requires[b]){if(!goog.isProvided_(c)&&!goog.isDeferredModule_(c)){return false}}}return true};goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}};goog.loadModule=function(d){var a=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined,declareTestMethods:false};var b;if(goog.isFunction(d)){b=d.call(goog.global,{})}else{if(goog.isString(d)){b=goog.loadModuleFromSource_.call(goog.global,d)}else{throw Error("Invalid module definition")}}var c=goog.moduleLoaderState_.moduleName;if(!goog.isString(c)||!c){throw Error('Invalid module name "'+c+'"')}if(goog.moduleLoaderState_.declareLegacyNamespace){goog.constructNamespace_(c,b)}else{if(goog.SEAL_MODULE_EXPORTS&&Object.seal){Object.seal(b)}}goog.loadedModules_[c]=b;if(goog.moduleLoaderState_.declareTestMethods){for(var e in b){if(e.indexOf("test",0)===0||e=="tearDown"||e=="setUp"||e=="setUpPage"||e=="tearDownPage"){goog.global[e]=b[e]}}}}finally{goog.moduleLoaderState_=a}};goog.loadModuleFromSource_=function(source){var exports={};eval(arguments[0]);return exports};goog.writeScriptTag_=function(e,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(c.readyState=="complete"){var f=/\bdeps.js$/.test(e);if(f){return false}else{throw Error('Cannot write "'+e+'" after document load')}}var d=goog.IS_OLD_IE_;if(b===undefined){if(!d){c.write('<script type="text/javascript" src="'+e+'"><\/script>')}else{var a=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";c.write('<script type="text/javascript" src="'+e+'"'+a+"><\/script>")}}else{c.write('<script type="text/javascript">'+b+"<\/script>")}return true}else{return false}};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(a,b){if(a.readyState=="complete"&&goog.lastNonModuleScriptIndex_==b){goog.loadQueuedModules_()}return true};goog.writeScripts_=function(){var a=[];var b={};var g=goog.dependencies_;function e(i){if(i in g.written){return}if(i in g.visited){if(!(i in b)){b[i]=true;a.push(i)}return}g.visited[i]=true;if(i in g.requires){for(var j in g.requires[i]){if(!goog.isProvided_(j)){if(j in g.nameToPath){e(g.nameToPath[j])}else{throw Error("Undefined nameToPath for "+j)}}}}if(!(i in b)){b[i]=true;a.push(i)}}for(var d in goog.included_){if(!g.written[d]){e(d)}}for(var c=0;c<a.length;c++){var d=a[c];goog.dependencies_.written[d]=true}var h=goog.moduleLoaderState_;goog.moduleLoaderState_=null;var f=false;for(var c=0;c<a.length;c++){var d=a[c];if(d){if(!g.pathIsModule[d]){goog.importScript_(goog.basePath+d)}else{f=true;goog.importModule_(goog.basePath+d)}}else{goog.moduleLoaderState_=h;throw Error("Undefined script input")}}goog.moduleLoaderState_=h};goog.getPathFromDeps_=function(a){if(a in goog.dependencies_.nameToPath){return goog.dependencies_.nameToPath[a]}else{return null}};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS){goog.importScript_(goog.basePath+"deps.js")}}goog.normalizePath_=function(c){var b=c.split("/");var a=0;while(a<b.length){if(b[a]=="."){b.splice(a,1)}else{if(a&&b[a]==".."&&b[a-1]&&b[a-1]!=".."){b.splice(--a,2)}else{a++}}}return b.join("/")};goog.retrieveAndExecModule_=function(g){if(!COMPILED){var d=g;g=goog.normalizePath_(g);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var b=null;var f=new goog.global.XMLHttpRequest();f.onload=function(){b=this.responseText};f.open("get",g,false);f.send();b=f.responseText;if(b!=null){var a=goog.wrapModule_(g,b);var e=goog.IS_OLD_IE_;if(e){goog.dependencies_.deferred[d]=a;goog.queuedModules_.push(d)}else{c(g,a)}}else{throw new Error("load of "+g+"failed")}}};goog.typeOf=function(c){var b=typeof c;if(b=="object"){if(c){if(c instanceof Array){return"array"}else{if(c instanceof Object){return b}}var a=Object.prototype.toString.call((c));if(a=="[object Window]"){return"object"}if((a=="[object Array]"||typeof c.length=="number"&&typeof c.splice!="undefined"&&typeof c.propertyIsEnumerable!="undefined"&&!c.propertyIsEnumerable("splice"))){return"array"}if((a=="[object Function]"||typeof c.call!="undefined"&&typeof c.propertyIsEnumerable!="undefined"&&!c.propertyIsEnumerable("call"))){return"function"}}else{return"null"}}else{if(b=="function"&&typeof c.call=="undefined"){return"object"}}return b};goog.isNull=function(a){return a===null};goog.isDefAndNotNull=function(a){return a!=null};goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(b){var a=goog.typeOf(b);return a=="array"||a=="object"&&typeof b.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};goog.isFunction=function(a){return goog.typeOf(a)=="function"};goog.isObject=function(b){var a=typeof b;return a=="object"&&b!=null||a=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return !!a[goog.UID_PROPERTY_]};goog.removeUid=function(b){if("removeAttribute" in b){b.removeAttribute(goog.UID_PROPERTY_)}try{delete b[goog.UID_PROPERTY_]}catch(a){}};goog.UID_PROPERTY_="closure_uid_"+((Math.random()*1000000000)>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(c){var b=goog.typeOf(c);if(b=="object"||b=="array"){if(c.clone){return c.clone()}var d=b=="array"?[]:{};for(var a in c){d[a]=goog.cloneObject(c[a])}return d}return c};goog.bindNative_=function(a,c,b){return(a.call.apply(a.bind,arguments))};goog.bindJs_=function(a,d,b){if(!a){throw new Error()}if(arguments.length>2){var c=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,c);return a.apply(d,e)}}else{return function(){return a.apply(d,arguments)}}};goog.bind=function(a,c,b){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){goog.bind=goog.bindNative_}else{goog.bind=goog.bindJs_}return goog.bind.apply(null,arguments)};goog.partial=function(b,c){var a=Array.prototype.slice.call(arguments,1);return function(){var d=a.slice();d.push.apply(d,arguments);return b.apply(this,d)}};goog.mixin=function(c,b){for(var a in b){c[a]=b[a]}};goog.now=(goog.TRUSTED_SITE&&Date.now)||(function(){return +new Date()});goog.globalEval=function(script){if(goog.global.execScript){goog.global.execScript(script,"JavaScript")}else{if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global._et_!="undefined"){delete goog.global._et_;goog.evalWorksForGlobals_=true}else{goog.evalWorksForGlobals_=false}}if(goog.evalWorksForGlobals_){goog.global.eval(script)}else{var doc=goog.global.document;var scriptElt=doc.createElement("script");scriptElt.type="text/javascript";scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else{throw Error("goog.globalEval not available")}}};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.getCssName=function(e,c){var d=function(f){return goog.cssNameMapping_[f]||f};var b=function(j){var h=j.split("-");var f=[];for(var g=0;g<h.length;g++){f.push(d(h[g]))}return f.join("-")};var a;if(goog.cssNameMapping_){a=goog.cssNameMappingStyle_=="BY_WHOLE"?d:b}else{a=function(f){return f}}if(c){return e+"-"+a(c)}else{return a(e)}};goog.setCssNameMapping=function(b,a){goog.cssNameMapping_=b;goog.cssNameMappingStyle_=a};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING){goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING}goog.getMsg=function(a,b){if(b){a=a.replace(/\{\$([^}]+)}/g,function(c,d){return d in b?b[d]:c})}return a};goog.getMsgWithFallback=function(d,c){return d};goog.exportSymbol=function(b,a,c){goog.exportPath_(b,a,c)};goog.exportProperty=function(b,a,c){b[a]=c};goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.base=function(g,d,h){var e=new Array(arguments.length-2);for(var f=2;f<arguments.length;f++){e[f-2]=arguments[f]}return a.prototype[d].apply(g,e)}};goog.base=function(g,c,j){var a=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||(goog.DEBUG&&!a)){throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C")}if(a.superClass_){var b=new Array(arguments.length-1);for(var e=1;e<arguments.length;e++){b[e-1]=arguments[e]}return a.superClass_.constructor.apply(g,b)}var f=new Array(arguments.length-2);for(var e=2;e<arguments.length;e++){f[e-2]=arguments[e]}var d=false;for(var h=g.constructor;h;h=h.superClass_&&h.superClass_.constructor){if(h.prototype[c]===a){d=true}else{if(d){return h.prototype[c].apply(g,f)}}}if(g[c]===a){return g.constructor.prototype[c].apply(g,f)}else{throw Error("goog.base called from a method of one name to a method of a different name")}};goog.scope=function(a){a.call(goog.global)};if(!COMPILED){goog.global.COMPILED=COMPILED}goog.defineClass=function(c,d){var b=d.constructor;var e=d.statics;if(!b||b==Object.prototype.constructor){b=function(){throw Error("cannot instantiate an interface (no constructor defined).")}}var a=goog.defineClass.createSealingConstructor_(b,c);if(c){goog.inherits(a,c)}delete d.constructor;delete d.statics;goog.defineClass.applyProperties_(a.prototype,d);if(e!=null){if(e instanceof Function){e(a)}else{goog.defineClass.applyProperties_(a,e)}}return a};goog.defineClass.ClassDescriptor;goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG);goog.defineClass.createSealingConstructor_=function(c,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]){return c}var a=function(){var d=c.apply(this,arguments)||this;d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_];if(this.constructor===a){Object.seal(d)}return d};return a}return c};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.defineClass.applyProperties_=function(d,c){var b;for(b in c){if(Object.prototype.hasOwnProperty.call(c,b)){d[b]=c[b]}}for(var a=0;a<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;a++){b=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[a];if(Object.prototype.hasOwnProperty.call(c,b)){d[b]=c[b]}}};goog.tagUnsealableClass=function(a){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES){a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true}};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";goog.DEBUG=false;goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.base=function(f,d,g){var e=Array.prototype.slice.call(arguments,2);return a.prototype[d].apply(f,e)}};if(!goog.userAgent){goog.userAgent=(function(){var b="";if("undefined"!==typeof navigator&&navigator&&"string"==typeof navigator.userAgent){b=navigator.userAgent}var a=b.indexOf("Opera")==0;return{jscript:{HAS_JSCRIPT:"ScriptEngine" in this},OPERA:a,IE:!a&&b.indexOf("MSIE")!=-1,WEBKIT:!a&&b.indexOf("WebKit")!=-1}})()}if(!goog.asserts){goog.asserts={assert:function(a){if(!a){throw Error("Assertion error")}},fail:function(a){}}}if(!goog.dom){goog.dom={};goog.dom.DomHelper=function(a){this.document_=a||document};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createDocumentFragment=function(){return this.document_.createDocumentFragment()}}if(!goog.format){goog.format={insertWordBreaks:function(j,a){j=String(j);var f=[];var h=0;var b=false;var k=false;var g=0;var d=0;for(var e=0,c=j.length;e<c;++e){var l=j.charCodeAt(e);if(g>=a&&l!=32){f[h++]=j.substring(d,e);d=e;f[h++]=goog.format.WORD_BREAK;g=0}if(b){if(l==62){b=false}}else{if(k){switch(l){case 59:k=false;++g;break;case 60:k=false;b=true;break;case 32:k=false;g=0;break}}else{switch(l){case 60:b=true;break;case 38:k=true;break;case 32:g=0;break;default:++g;break}}}}f[h++]=j.substring(d);return f.join("")},WORD_BREAK:goog.userAgent.WEBKIT?"<wbr></wbr>":goog.userAgent.OPERA?"&shy;":goog.userAgent.IE?"&#8203;":"<wbr>"}}if(!goog.i18n){goog.i18n={bidi:{}}}goog.i18n.bidi.IS_RTL=false;goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0,UNKNOWN:0};goog.i18n.bidi.toDir=function(b,a){if(typeof b=="number"){return b>0?goog.i18n.bidi.Dir.LTR:b<0?goog.i18n.bidi.Dir.RTL:a?null:goog.i18n.bidi.Dir.NEUTRAL}else{if(b==null){return null}else{return b?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR}}};goog.i18n.bidi.estimateDirection=function(h,c){var d=0;var a=0;var b=false;var g=soyshim.$$bidiStripHtmlIfNecessary_(h,c).split(soyshim.$$bidiWordSeparatorRe_);for(var f=0;f<g.length;f++){var e=g[f];if(soyshim.$$bidiRtlDirCheckRe_.test(e)){d++;a++}else{if(soyshim.$$bidiIsRequiredLtrRe_.test(e)){b=true}else{if(soyshim.$$bidiLtrCharRe_.test(e)){a++}else{if(soyshim.$$bidiHasNumeralsRe_.test(e)){b=true}}}}}return a==0?(b?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL):(d/a>soyshim.$$bidiRtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR)};goog.i18n.BidiFormatter=function(a){this.dir_=goog.i18n.bidi.toDir(a,true)};goog.i18n.BidiFormatter.prototype.getContextDir=function(){return this.dir_};goog.i18n.BidiFormatter.prototype.knownDirAttr=function(a){return !a||a==this.dir_?"":a<0?'dir="rtl"':'dir="ltr"'};goog.i18n.BidiFormatter.prototype.endEdge=function(){return this.dir_<0?"left":"right"};goog.i18n.BidiFormatter.prototype.mark=function(){return((this.dir_>0)?"\u200E":(this.dir_<0)?"\u200F":"")};goog.i18n.BidiFormatter.prototype.markAfterKnownDir=function(b,c,a){if(b==null){b=goog.i18n.bidi.estimateDirection(c,a)}return(this.dir_>0&&(b<0||soyshim.$$bidiIsRtlExitText_(c,a))?"\u200E":this.dir_<0&&(b>0||soyshim.$$bidiIsLtrExitText_(c,a))?"\u200F":"")};goog.i18n.BidiFormatter.prototype.spanWrapWithKnownDir=function(b,d,c){if(b==null){b=goog.i18n.bidi.estimateDirection(d,true)}var a=this.markAfterKnownDir(b,d,true);if(b>0&&this.dir_<=0){d='<span dir="ltr">'+d+"</span>"}else{if(b<0&&this.dir_>=0){d='<span dir="rtl">'+d+"</span>"}}return d+a};goog.i18n.BidiFormatter.prototype.startEdge=function(){return this.dir_<0?"right":"left"};goog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir=function(c,d,a){if(c==null){c=goog.i18n.bidi.estimateDirection(d,a)}var b=this.markAfterKnownDir(c,d,a);if(c>0&&this.dir_<=0){d="\u202A"+d+"\u202C"}else{if(c<0&&this.dir_>=0){d="\u202B"+d+"\u202C"}}return d+b};if(!goog.string){goog.string={newLineToBr:function(b,a){b=String(b);if(!goog.string.NEWLINE_TO_BR_RE_.test(b)){return b}return b.replace(/(\r\n|\r|\n)/g,a?"<br />":"<br>")},urlEncode:encodeURIComponent,NEWLINE_TO_BR_RE_:/[\r\n]/}}goog.string.StringBuffer=function(a,b){this.buffer_=goog.userAgent.jscript.HAS_JSCRIPT?[]:"";if(a!=null){this.append.apply(this,arguments)}};goog.string.StringBuffer.prototype.bufferLength_=0;goog.string.StringBuffer.prototype.append=function(c,b,e){if(goog.userAgent.jscript.HAS_JSCRIPT){if(b==null){this.buffer_[this.bufferLength_++]=c}else{var a=(this.buffer_);a.push.apply(a,arguments);this.bufferLength_=this.buffer_.length}}else{this.buffer_+=c;if(b!=null){for(var d=1;d<arguments.length;d++){this.buffer_+=arguments[d]}}}return this};goog.string.StringBuffer.prototype.clear=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};goog.string.StringBuffer.prototype.toString=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){var a=this.buffer_.join("");this.clear();if(a){this.append(a)}return a}else{return(this.buffer_)}};if(!goog.soy){goog.soy={renderAsElement:function(c,a,b,d){return(soyshim.$$renderWithWrapper_(c,a,d,true,b))},renderAsFragment:function(c,a,b,d){return soyshim.$$renderWithWrapper_(c,a,d,false,b)},renderElement:function(c,d,a,b){c.innerHTML=d(a,null,b)},data:{}}}goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:true}:{},JS:goog.DEBUG?{sanitizedContentJsChars:true}:{},JS_STR_CHARS:goog.DEBUG?{sanitizedContentJsStrChars:true}:{},URI:goog.DEBUG?{sanitizedContentUri:true}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:true}:{},CSS:goog.DEBUG?{sanitizedContentCss:true}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:true}:{}};goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly")};goog.soy.data.SanitizedContent.prototype.contentKind;goog.soy.data.SanitizedContent.prototype.contentDir=null;goog.soy.data.SanitizedContent.prototype.content;goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content};var soy={esc:{}};var soydata={};soydata.VERY_UNSAFE={};var soyshim={$$DEFAULT_TEMPLATE_DATA_:{}};soyshim.$$renderWithWrapper_=function(h,f,b,c,i){var d=b||document;var a=d.createElement("div");a.innerHTML=h(f||soyshim.$$DEFAULT_TEMPLATE_DATA_,undefined,i);if(a.childNodes.length==1){var g=a.firstChild;if(!c||g.nodeType==1){return(g)}}if(c){return a}var e=d.createDocumentFragment();while(a.firstChild){e.appendChild(a.firstChild)}return e};soyshim.$$bidiStripHtmlIfNecessary_=function(b,a){return a?b.replace(soyshim.$$BIDI_HTML_SKIP_RE_,""):b};soyshim.$$BIDI_HTML_SKIP_RE_=/<[^>]*>|&[^;]+;/g;soyshim.$$bidiLtrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";soyshim.$$bidiRtlChars_="\u0591-\u07FF\u200F\uFB1D-\uFDFF\uFE70-\uFEFC";soyshim.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soyshim.$$bidiLtrChars_+"]*["+soyshim.$$bidiRtlChars_+"]");soyshim.$$bidiLtrCharRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"]");soyshim.$$bidiIsRequiredLtrRe_=/^http:\/\/.*/;soyshim.$$bidiHasNumeralsRe_=/\d/;soyshim.$$bidiWordSeparatorRe_=/\s+/;soyshim.$$bidiRtlDetectionThreshold_=0.4;soyshim.$$bidiLtrExitDirCheckRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"][^"+soyshim.$$bidiRtlChars_+"]*$");soyshim.$$bidiRtlExitDirCheckRe_=new RegExp("["+soyshim.$$bidiRtlChars_+"][^"+soyshim.$$bidiLtrChars_+"]*$");soyshim.$$bidiIsLtrExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiLtrExitDirCheckRe_.test(b)};soyshim.$$bidiIsRtlExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiRtlExitDirCheckRe_.test(b)};soy.StringBuilder=goog.string.StringBuffer;soydata.SanitizedContentKind=goog.soy.data.SanitizedContentKind;soydata.isContentKind=function(a,b){return a!=null&&a.contentKind===b};soydata.getContentDir=function(a){if(a!=null){switch(a.contentDir){case goog.i18n.bidi.Dir.LTR:return goog.i18n.bidi.Dir.LTR;case goog.i18n.bidi.Dir.RTL:return goog.i18n.bidi.Dir.RTL;case goog.i18n.bidi.Dir.NEUTRAL:return goog.i18n.bidi.Dir.NEUTRAL}}return null};soydata.SanitizedHtml=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtml,goog.soy.data.SanitizedContent);soydata.SanitizedHtml.prototype.contentKind=soydata.SanitizedContentKind.HTML;soydata.SanitizedHtml.from=function(a){if(a!=null&&a.contentKind===soydata.SanitizedContentKind.HTML){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return(a)}return soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.esc.$$escapeHtmlHelper(String(a)),soydata.getContentDir(a))};soydata.SanitizedJs=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJs,goog.soy.data.SanitizedContent);soydata.SanitizedJs.prototype.contentKind=soydata.SanitizedContentKind.JS;soydata.SanitizedJs.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedJsStrChars=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJsStrChars,goog.soy.data.SanitizedContent);soydata.SanitizedJsStrChars.prototype.contentKind=soydata.SanitizedContentKind.JS_STR_CHARS;soydata.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedUri,goog.soy.data.SanitizedContent);soydata.SanitizedUri.prototype.contentKind=soydata.SanitizedContentKind.URI;soydata.SanitizedUri.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedHtmlAttribute=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtmlAttribute,goog.soy.data.SanitizedContent);soydata.SanitizedHtmlAttribute.prototype.contentKind=soydata.SanitizedContentKind.ATTRIBUTES;soydata.SanitizedHtmlAttribute.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedCss=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedCss,goog.soy.data.SanitizedContent);soydata.SanitizedCss.prototype.contentKind=soydata.SanitizedContentKind.CSS;soydata.SanitizedCss.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.UnsanitizedText=function(a,b){this.content=String(a);this.contentDir=b!=null?b:null};goog.inherits(soydata.UnsanitizedText,goog.soy.data.SanitizedContent);soydata.UnsanitizedText.prototype.contentKind=soydata.SanitizedContentKind.TEXT;soydata.$$EMPTY_STRING_={VALUE:""};soydata.$$makeSanitizedContentFactory_=function(b){function a(){}a.prototype=b.prototype;function c(e,f){var d=new a();d.content=String(e);if(f!==undefined){d.contentDir=f}return d}return c};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(b){function a(){}a.prototype=b.prototype;function c(e){var d=new a();d.content=String(e);return d}return c};soydata.markUnsanitizedText=function(a,b){return new soydata.UnsanitizedText(a,b)};soydata.VERY_UNSAFE.ordainSanitizedHtml=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.ordainSanitizedJs=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedJs);soydata.VERY_UNSAFE.ordainSanitizedJsStrChars=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedJsStrChars);soydata.VERY_UNSAFE.ordainSanitizedUri=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedUri);soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.ordainSanitizedCss=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedCss);soy.renderElement=goog.soy.renderElement;soy.renderAsFragment=function(d,b,a,c){return goog.soy.renderAsFragment(d,b,c,new goog.dom.DomHelper(a))};soy.renderAsElement=function(d,b,a,c){return goog.soy.renderAsElement(d,b,c,new goog.dom.DomHelper(a))};soy.$$IS_LOCALE_RTL=goog.i18n.bidi.IS_RTL;soy.$$augmentMap=function(a,d){function e(){}e.prototype=a;var b=new e();for(var c in d){b[c]=d[c]}return b};soy.$$checkMapKey=function(a){if((typeof a)!="string"){throw Error("Map literal's key expression must evaluate to string (encountered type \""+(typeof a)+'").')}return a};soy.$$getMapKeys=function(c){var b=[];for(var a in c){b.push(a)}return b};soy.$$getDelTemplateId=function(a){return a};soy.$$DELEGATE_REGISTRY_PRIORITIES_={};soy.$$DELEGATE_REGISTRY_FUNCTIONS_={};soy.$$registerDelegateFn=function(f,c,d,b){var e="key_"+f+":"+c;var a=soy.$$DELEGATE_REGISTRY_PRIORITIES_[e];if(a===undefined||d>a){soy.$$DELEGATE_REGISTRY_PRIORITIES_[e]=d;soy.$$DELEGATE_REGISTRY_FUNCTIONS_[e]=b}else{if(d==a){throw Error('Encountered two active delegates with the same priority ("'+f+":"+c+'").')}else{}}};soy.$$getDelegateFn=function(c,b,d){var a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+c+":"+b];if(!a&&b!=""){a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+c+":"]}if(a){return a}else{if(d){return soy.$$EMPTY_TEMPLATE_FN_}else{throw Error('Found no active impl for delegate call to "'+c+":"+b+'" (and not allowemptydefault="true").')}}};soy.$$EMPTY_TEMPLATE_FN_=function(a,c,b){return""};soydata.$$makeSanitizedContentFactoryForInternalBlocks_=function(b){function a(){}a.prototype=b.prototype;function c(e,f){var g=String(e);if(!g){return soydata.$$EMPTY_STRING_.VALUE}var d=new a();d.content=String(e);if(f!==undefined){d.contentDir=f}return d}return c};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_=function(b){function a(){}a.prototype=b.prototype;function c(e){var f=String(e);if(!f){return soydata.$$EMPTY_STRING_.VALUE}var d=new a();d.content=String(e);return d}return c};soydata.$$markUnsanitizedTextForInternalBlocks=function(a,b){var c=String(a);if(!c){return soydata.$$EMPTY_STRING_.VALUE}return new soydata.UnsanitizedText(c,b)};soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks=soydata.$$makeSanitizedContentFactoryForInternalBlocks_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.$$ordainSanitizedJsForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedJs);soydata.VERY_UNSAFE.$$ordainSanitizedUriForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedUri);soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.$$ordainSanitizedCssForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedCss);soy.$$escapeHtml=function(a){return soydata.SanitizedHtml.from(a)};soy.$$cleanHtml=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return(a)}return soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.$$stripHtmlTags(a,soy.esc.$$SAFE_TAG_WHITELIST_),soydata.getContentDir(a))};soy.$$escapeHtmlRcdata=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlHelper(a.content)}return soy.esc.$$escapeHtmlHelper(a)};soy.$$HTML5_VOID_ELEMENTS_=new RegExp("^<(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\\b");soy.$$stripHtmlTags=function(d,c){if(!c){return String(d).replace(soy.esc.$$HTML_TAG_REGEX_,"").replace(soy.esc.$$LT_REGEX_,"&lt;")}var b=String(d).replace(/\[/g,"&#91;");var a=[];b=b.replace(soy.esc.$$HTML_TAG_REGEX_,function(f,h){if(h){h=h.toLowerCase();if(c.hasOwnProperty(h)&&c[h]){var i=f.charAt(1)==="/"?"</":"<";var g=a.length;a[g]=i+h+">";return"["+g+"]"}}return""});b=soy.esc.$$normalizeHtmlHelper(b);var e=soy.$$balanceTags_(a);b=b.replace(/\[(\d+)\]/g,function(g,f){return a[f]});return b+e};soy.$$balanceTags_=function(c){var b=[];for(var d=0,f=c.length;d<f;++d){var a=c[d];if(a.charAt(1)==="/"){var e=b.length-1;while(e>=0&&b[e]!=a){e--}if(e<0){c[d]=""}else{c[d]=b.slice(e).reverse().join("");b.length=e}}else{if(!soy.$$HTML5_VOID_ELEMENTS_.test(a)){b.push("</"+a.substring(1))}}}return b.reverse().join("")};soy.$$escapeHtmlAttribute=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlAttributeNospace=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlNospaceHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlNospaceHelper(a)};soy.$$filterHtmlAttributes=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.ATTRIBUTES)){goog.asserts.assert(a.constructor===soydata.SanitizedHtmlAttribute);return a.content.replace(/([^"'\s])$/,"$1 ")}return soy.esc.$$filterHtmlAttributesHelper(a)};soy.$$filterHtmlElementName=function(a){return soy.esc.$$filterHtmlElementNameHelper(a)};soy.$$escapeJs=function(a){return soy.$$escapeJsString(a)};soy.$$escapeJsString=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.JS_STR_CHARS)){goog.asserts.assert(a.constructor===soydata.SanitizedJsStrChars);return a.content}return soy.esc.$$escapeJsStringHelper(a)};soy.$$escapeJsValue=function(a){if(a==null){return" null "}if(soydata.isContentKind(a,soydata.SanitizedContentKind.JS)){goog.asserts.assert(a.constructor===soydata.SanitizedJs);return a.content}switch(typeof a){case"boolean":case"number":return" "+a+" ";default:return"'"+soy.esc.$$escapeJsStringHelper(String(a))+"'"}};soy.$$escapeJsRegex=function(a){return soy.esc.$$escapeJsRegexHelper(a)};soy.$$problematicUriMarks_=/['()]/g;soy.$$pctEncode_=function(a){return"%"+a.charCodeAt(0).toString(16)};soy.$$escapeUri=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.URI)){goog.asserts.assert(a.constructor===soydata.SanitizedUri);return soy.$$normalizeUri(a)}var b=soy.esc.$$escapeUriHelper(a);soy.$$problematicUriMarks_.lastIndex=0;if(soy.$$problematicUriMarks_.test(b)){return b.replace(soy.$$problematicUriMarks_,soy.$$pctEncode_)}return b};soy.$$normalizeUri=function(a){return soy.esc.$$normalizeUriHelper(a)};soy.$$filterNormalizeUri=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.URI)){goog.asserts.assert(a.constructor===soydata.SanitizedUri);return soy.$$normalizeUri(a)}return soy.esc.$$filterNormalizeUriHelper(a)};soy.$$filterImageDataUri=function(a){return soydata.VERY_UNSAFE.ordainSanitizedUri(soy.esc.$$filterImageDataUriHelper(a))};soy.$$escapeCssString=function(a){return soy.esc.$$escapeCssStringHelper(a)};soy.$$filterCssValue=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.CSS)){goog.asserts.assert(a.constructor===soydata.SanitizedCss);return a.content}if(a==null){return""}return soy.esc.$$filterCssValueHelper(a)};soy.$$filterNoAutoescape=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.TEXT)){goog.asserts.fail("Tainted SanitizedContentKind.TEXT for |noAutoescape: `%s`",[a.content]);return"zSoyz"}return a};soy.$$changeNewlineToBr=function(b){var a=goog.string.newLineToBr(String(b),false);if(soydata.isContentKind(b,soydata.SanitizedContentKind.HTML)){return soydata.VERY_UNSAFE.ordainSanitizedHtml(a,soydata.getContentDir(b))}return a};soy.$$insertWordBreaks=function(c,b){var a=goog.format.insertWordBreaks(String(c),b);if(soydata.isContentKind(c,soydata.SanitizedContentKind.HTML)){return soydata.VERY_UNSAFE.ordainSanitizedHtml(a,soydata.getContentDir(c))}return a};soy.$$truncate=function(c,a,b){c=String(c);if(c.length<=a){return c}if(b){if(a>3){a-=3}else{b=false}}if(soy.$$isHighSurrogate_(c.charAt(a-1))&&soy.$$isLowSurrogate_(c.charAt(a))){a-=1}c=c.substring(0,a);if(b){c+="..."}return c};soy.$$isHighSurrogate_=function(a){return 55296<=a&&a<=56319};soy.$$isLowSurrogate_=function(a){return 56320<=a&&a<=57343};soy.$$bidiFormatterCache_={};soy.$$getBidiFormatterInstance_=function(a){return soy.$$bidiFormatterCache_[a]||(soy.$$bidiFormatterCache_[a]=new goog.i18n.BidiFormatter(a))};soy.$$bidiTextDir=function(d,a){var c=soydata.getContentDir(d);if(c!=null){return c}var b=a||soydata.isContentKind(d,soydata.SanitizedContentKind.HTML);return goog.i18n.bidi.estimateDirection(d+"",b)};soy.$$bidiDirAttr=function(b,f,a){var c=soy.$$getBidiFormatterInstance_(b);var e=soydata.getContentDir(f);if(e==null){var d=a||soydata.isContentKind(f,soydata.SanitizedContentKind.HTML);e=goog.i18n.bidi.estimateDirection(f+"",d)}return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute(c.knownDirAttr(e))};soy.$$bidiMarkAfter=function(b,e,a){var c=soy.$$getBidiFormatterInstance_(b);var d=a||soydata.isContentKind(e,soydata.SanitizedContentKind.HTML);return c.markAfterKnownDir(soydata.getContentDir(e),e+"",d)};soy.$$bidiSpanWrap=function(a,d){var c=soy.$$getBidiFormatterInstance_(a);var b=c.spanWrapWithKnownDir(soydata.getContentDir(d),d+"",true);return b};soy.$$bidiUnicodeWrap=function(a,f){var c=soy.$$getBidiFormatterInstance_(a);var d=soydata.isContentKind(f,soydata.SanitizedContentKind.HTML);var b=c.unicodeWrapWithKnownDir(soydata.getContentDir(f),f+"",d);var e=c.getContextDir();if(soydata.isContentKind(f,soydata.SanitizedContentKind.TEXT)){return new soydata.UnsanitizedText(b,e)}if(d){return soydata.VERY_UNSAFE.ordainSanitizedHtml(b,e)}if(soydata.isContentKind(f,soydata.SanitizedContentKind.JS_STR_CHARS)){return soydata.VERY_UNSAFE.ordainSanitizedJsStrChars(b,e)}return b};soy.esc.$$escapeUriHelper=function(a){return encodeURIComponent(String(a))};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_={"\x00":"\x26#0;","\x22":"\x26quot;","\x26":"\x26amp;","\x27":"\x26#39;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x09":"\x26#9;","\x0a":"\x26#10;","\x0b":"\x26#11;","\x0c":"\x26#12;","\x0d":"\x26#13;"," ":"\x26#32;","-":"\x26#45;","/":"\x26#47;","\x3d":"\x26#61;","`":"\x26#96;","\x85":"\x26#133;","\xa0":"\x26#160;","\u2028":"\x26#8232;","\u2029":"\x26#8233;"};soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_={"\x00":"\\x00","\x08":"\\x08","\x09":"\\t","\x0a":"\\n","\x0b":"\\x0b","\x0c":"\\f","\x0d":"\\r","\x22":"\\x22","\x26":"\\x26","\x27":"\\x27","/":"\\/","\x3c":"\\x3c","\x3d":"\\x3d","\x3e":"\\x3e","\\":"\\\\","\x85":"\\x85","\u2028":"\\u2028","\u2029":"\\u2029","$":"\\x24","(":"\\x28",")":"\\x29","*":"\\x2a","+":"\\x2b",",":"\\x2c","-":"\\x2d",".":"\\x2e",":":"\\x3a","?":"\\x3f","[":"\\x5b","]":"\\x5d","^":"\\x5e","{":"\\x7b","|":"\\x7c","}":"\\x7d"};soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_={"\x00":"\\0 ","\x08":"\\8 ","\x09":"\\9 ","\x0a":"\\a ","\x0b":"\\b ","\x0c":"\\c ","\x0d":"\\d ","\x22":"\\22 ","\x26":"\\26 ","\x27":"\\27 ","(":"\\28 ",")":"\\29 ","*":"\\2a ","/":"\\2f ",":":"\\3a ",";":"\\3b ","\x3c":"\\3c ","\x3d":"\\3d ","\x3e":"\\3e ","@":"\\40 ","\\":"\\5c ","{":"\\7b ","}":"\\7d ","\x85":"\\85 ","\xa0":"\\a0 ","\u2028":"\\2028 ","\u2029":"\\2029 "};soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[a]};soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_={"\x00":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\x08":"%08","\x09":"%09","\x0a":"%0A","\x0b":"%0B","\x0c":"%0C","\x0d":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20","\x22":"%22","\x27":"%27","(":"%28",")":"%29","\x3c":"%3C","\x3e":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_[a]};soy.esc.$$MATCHER_FOR_ESCAPE_HTML_=/[\x00\x22\x26\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_=/[\x00\x22\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g;soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i;soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_=/^data:image\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\/]+=*$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i;soy.esc.$$escapeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeJsStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeJsRegexHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeCssStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_)};soy.esc.$$filterCssValueHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(b)){return"zSoyz"}return b};soy.esc.$$normalizeUriHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterNormalizeUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(b)){return"#zSoyz"}return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterImageDataUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(b)){return"data:image/gif;base64,zSoyz"}return b};soy.esc.$$filterHtmlAttributesHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_.test(b)){return"zSoyz"}return b};soy.esc.$$filterHtmlElementNameHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(b)){return"zSoyz"}return b};soy.esc.$$HTML_TAG_REGEX_=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g;soy.esc.$$LT_REGEX_=/</g;soy.esc.$$SAFE_TAG_WHITELIST_={b:1,br:1,em:1,i:1,s:1,sub:1,sup:1,u:1};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.soy.soy-template-plugin:soy-deps', location = 'js/atlassian-deps.js' */
window.atl_soy=window.atl_soy||{};atl_soy.concat=function(d,c){if(d.concat){return d.concat(c)}var e={};for(var f in d){if(d.hasOwnProperty(f)){e[f]=d[f]}}for(var f in c){if(c.hasOwnProperty(f)){e[f]=c[f]}}return e};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-widget', location = 'src/js/aui/internal/widget.js' */
("undefined"===typeof window?global:window).__f6397c80406fe105a9ead0b34dba268d=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,d){var e="_aui-widget-"+a;return function(a,g){var b,c;f.default.isPlainObject(a)?c=a:(b=a,c=g);b=b&&(0,f.default)(b);!b||!b.data(e)?(c=new d(b,c||{}),b=c.$el,b.data(e,c)):c=b.data(e);return c}};var d=__bd7207540b95ff683caa1d3c0bfcc3d7,f=d&&d.__esModule?d:{"default":d};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-i18n-aui', location = 'src/js/aui/internal/i18n/aui.js' */
("undefined"===typeof window?global:window).__6f862c4c1a4dce4ede227d7c9ebe2e92=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={"aui.dropdown.async.error":"Error loading dropdown","aui.dropdown.async.loading":"Loading dropdown","aui.words.add":"Add","aui.words.update":"Update","aui.words.delete":"Delete","aui.words.remove":"Remove","aui.words.cancel":"Cancel","aui.words.loading":"Loading","aui.words.close":"Close","aui.enter.value":"Enter value","aui.words.more":"More",
"aui.words.moreitem":"More\u2026","aui.keyboard.shortcut.type.x":"Type ''{0}''","aui.keyboard.shortcut.then.x":"then ''{0}''","aui.keyboard.shortcut.or.x":"OR ''{0}''","aui.sidebar.expand.tooltip":"Expand sidebar ( [ )","aui.sidebar.collapse.tooltip":"Collapse sidebar ( [ )","aui.validation.message.maxlength":"Must be fewer than or equal to {0} characters","aui.validation.message.minlength":"Must be greater than or equal to {0} characters","aui.validation.message.exactlength":"Must be exactly {0} characters",
"aui.validation.message.matchingfield":"{0} and {1} do not match.","aui.validation.message.matchingfield-novalue":"These fields do not match.","aui.validation.message.doesnotcontain":"Do not include the phrase {0} in this field","aui.validation.message.pattern":"This field does not match the required format","aui.validation.message.required":"This is a required field","aui.validation.message.validnumber":"Please enter a valid number","aui.validation.message.min":"Enter a value greater than {0}","aui.validation.message.max":"Enter a value less than {0}",
"aui.validation.message.dateformat":"Enter a valid date","aui.validation.message.minchecked":"Tick at least {0,choice,0#0 checkboxes|1#1 checkbox|1<{0,number} checkboxes}.","aui.validation.message.maxchecked":"Tick at most {0,choice,0#0 checkboxes|1#1 checkbox|1<{0,number} checkboxes}.","aui.checkboxmultiselect.clear.selected":"Clear selected items","aui.select.no.suggestions":"No suggestions","aui.select.new.suggestions":"New suggestions added. Please use the up and down arrows to select.","aui.select.new.value":"new value",
"aui.toggle.on":"On","aui.toggle.off":"Off","ajs.datepicker.localisations.day-names.sunday":"Sunday","ajs.datepicker.localisations.day-names.monday":"Monday","ajs.datepicker.localisations.day-names.tuesday":"Tuesday","ajs.datepicker.localisations.day-names.wednesday":"Wednesday","ajs.datepicker.localisations.day-names.thursday":"Thursday","ajs.datepicker.localisations.day-names.friday":"Friday","ajs.datepicker.localisations.day-names.saturday":"Saturday","ajs.datepicker.localisations.day-names-min.sunday":"Sun",
"ajs.datepicker.localisations.day-names-min.monday":"Mon","ajs.datepicker.localisations.day-names-min.tuesday":"Tue","ajs.datepicker.localisations.day-names-min.wednesday":"Wed","ajs.datepicker.localisations.day-names-min.thursday":"Thu","ajs.datepicker.localisations.day-names-min.friday":"Fri","ajs.datepicker.localisations.day-names-min.saturday":"Sat","ajs.datepicker.localisations.first-day":0,"ajs.datepicker.localisations.is-RTL":!1,"ajs.datepicker.localisations.month-names.january":"January",
"ajs.datepicker.localisations.month-names.february":"February","ajs.datepicker.localisations.month-names.march":"March","ajs.datepicker.localisations.month-names.april":"April","ajs.datepicker.localisations.month-names.may":"May","ajs.datepicker.localisations.month-names.june":"June","ajs.datepicker.localisations.month-names.july":"July","ajs.datepicker.localisations.month-names.august":"August","ajs.datepicker.localisations.month-names.september":"September","ajs.datepicker.localisations.month-names.october":"October",
"ajs.datepicker.localisations.month-names.november":"November","ajs.datepicker.localisations.month-names.december":"December","ajs.datepicker.localisations.show-month-after-year":!1,"ajs.datepicker.localisations.year-suffix":null};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-i18n', location = 'src/js/aui/i18n.js' */
("undefined"===typeof window?global:window).__780f92e84f7b06d16e986a531e56e288=function(){function c(a){return a&&a.__esModule?a:{"default":a}}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=c(__b9ecb36a7ca0505acec463b07515cb6c),f=c(__9a668cbde1e182d8e721c23580356df2),d={keys:c(__6f862c4c1a4dce4ede227d7c9ebe2e92).default,getText:function(a){var b=Array.prototype.slice.call(arguments,1);return Object.prototype.hasOwnProperty.call(this.keys,a)?e.default.apply(null,[this.keys[a]].concat(b)):
a}};(0,f.default)("I18n",d);b.default=d;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-navigation', location = 'src/js/aui/navigation.js' */
("undefined"===typeof window?global:window).__7a3efe97736776c802c7260e27b6b534=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function b(a){this.$el=(0,d.default)(a).closest(".aui-nav");if(1<this.$el.length)return this.$el.map(function(a,d){return new b(d)})[0];if(this.$el.data("aui-navigation"))return this.$el.data("aui-navigation");this.$el.data("aui-navigation",this);this.$treeParent=this.$el.parent("li[aria-expanded]");this.$subtreeToggleIcon=this.$treeParent.children(".aui-nav-subtree-toggle").children("span.aui-icon");
this.hideMoreItems();this.$el.children("li:has(.aui-nav-selected)").addClass("aui-nav-child-selected");a=this.$el.children(".aui-nav-selected");a.parents(".aui-nav > [aria-expanded=false]").add(a.filter("[aria-expanded=false]")).each(function(){e((0,d.default)(this).children(".aui-nav")).expand()});this.$el.find("> li[aria-expanded] > .aui-nav-subtree-toggle").on("click",function(){e((0,d.default)(this).siblings(".aui-nav")).toggle()});return this}var f={};"use strict";Object.defineProperty(f,"__esModule",
{value:!0});__780f92e84f7b06d16e986a531e56e288;var d=c(__bd7207540b95ff683caa1d3c0bfcc3d7),g=c(__7acfe7fd38bbf8b5bf76cc953770b033),h=c(__9a668cbde1e182d8e721c23580356df2),i=c(__f6397c80406fe105a9ead0b34dba268d);b.prototype.isNested=function(){return 1===this.$treeParent.length};b.prototype.isCollapsed=function(){return"false"===this.$treeParent.attr("aria-expanded")};b.prototype.expand=function(){this.$treeParent.attr("aria-expanded","true");this.$subtreeToggleIcon.removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded");
this.hideMoreItems();return this};b.prototype.collapse=function(){this.$treeParent.attr("aria-expanded","false");this.$subtreeToggleIcon.removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed");return this};b.prototype.toggle=function(){this.isCollapsed()?this.expand():this.collapse();return this};b.prototype.hideMoreItems=function(){if(this.$el.is(".aui-nav:not([aria-expanded=false]) [data-more]")){var a=this.$el.attr("data-more")||"More\u2026",b=Math.abs(parseInt(this.$el.attr("data-more-limit")))||
5,c=this.$el.children("li"),e=c.length<=b+1,f=c.filter(".aui-nav-selected").length,g=c.filter(".aui-nav-more").length;if(e||f||g)return this;(0,d.default)("<li>",{"class":"aui-nav-more","aria-hidden":"true"}).append((0,d.default)("<a>",{href:"#","class":"aui-nav-item",text:a,click:function(a){a.preventDefault();(0,d.default)(this).parent().remove()}})).insertAfter(c.eq(b-1))}return this};var e=(0,i.default)("navigation",b);(0,g.default)("aui-nav",{type:g.default.type.CLASSNAME,attached:function(a){new b(a)},
detached:function(a){(0,d.default)(a).removeData()}});(0,h.default)("navigation",e);f.default=e;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-navigation', location = 'src/soy/navigation.soy' */
// This file was automatically generated from navigation.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.navigation.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.navigation == 'undefined') { aui.navigation = {}; }


aui.navigation.item = function(opt_data, opt_ignored) {
  return '<li class="' + ((opt_data.isSelected || opt_data.key && opt_data.selectedItemKey == opt_data.key) ? 'aui-nav-selected' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.isCollapsible && opt_data.children && opt_data.children.length > 0) ? 'aria-expanded="' + ((opt_data.isCollapsed) ? 'false' : 'true') + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.children && opt_data.children.length > 0 && opt_data.isCollapsible) ? '<a href="#" class="aui-nav-subtree-toggle">' + aui.icons.icon({icon: opt_data.isCollapsed ? 'collapsed' : 'expanded', size: 'small', useIconFont: true}) + '</a>' : '') + '<a class="aui-nav-item" href="' + soy.$$escapeHtml(opt_data.href) + '">' + ((opt_data.iconClass && ! opt_data.isChild) ? aui.icons.icon({icon: opt_data.iconClass, size: 'small', useIconFont: true}) : '') + ((opt_data.count == 0 || opt_data.count) ? '<aui-badge>' + soy.$$escapeHtml(opt_data.count) + '</aui-badge>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a>' + ((opt_data.children && opt_data.children.length > 0) ? aui.navigation.nav({items: opt_data.children, selectedItemKey: opt_data.selectedItemKey, isChild: true}) : '') + '</li>';
};
if (goog.DEBUG) {
  aui.navigation.item.soyTemplateName = 'aui.navigation.item';
}


aui.navigation.nav = function(opt_data, opt_ignored) {
  var output = '<ul class="aui-nav' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>';
  var itemList58 = opt_data.items;
  var itemListLen58 = itemList58.length;
  for (var itemIndex58 = 0; itemIndex58 < itemListLen58; itemIndex58++) {
    var itemData58 = itemList58[itemIndex58];
    output += aui.navigation.item(soy.$$augmentMap(itemData58, {isChild: opt_data.isChild, selectedItemKey: opt_data.selectedItemKey}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  aui.navigation.nav.soyTemplateName = 'aui.navigation.nav';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-template-html-0.0.0-dist-template-html', location = 'node_modules/skatejs-template-html/dist/template-html.js' */
("undefined"===typeof window?global:window).__2b1734744f1decec6fe4109762d4ff9c=function(){var i={exports:{}},u=i.exports,A={module:i,exports:u},l;l=function(a,b,f){var g=("undefined"===typeof window?global:window).define,e,c,f=[f,b,a].filter(function(d){return"function"===typeof d})[0],b=[b,a,[]].filter(Array.isArray)[0];e=f.apply(null,b.map(function(d){return A[d]}));c=typeof e;"function"===typeof g&&g("string"===typeof a?a:"__2b1734744f1decec6fe4109762d4ff9c",b,f);"string"===c?e=String(e):"number"===
c?e=Number(e):"boolean"===c&&(e=Boolean(e));void 0!==e&&(u=i.exports=e)};l.amd=!0;var v=function(a,b,f){a.__SKATE_TEMPLATE_HTML_DATA||(a.__SKATE_TEMPLATE_HTML_DATA={});a.__SKATE_TEMPLATE_HTML_DATA[b]=f;return a},q=function(a){var b={caption:"table",dd:"dl",dt:"dl",li:"ul",tbody:"table",td:"tr",thead:"table",tr:"tbody"},f=a.match(/\s*<([^\s>]+)/),b=document.createElement(f&&b[f[1]]||"div");b.innerHTML=a;return w(b.childNodes)},w=function(a){for(var b=document.createDocumentFragment();a&&a.length;)b.appendChild(a[0]);
return b},r=function(a,b){for(var f=[],g=a.nextSibling;g!==b;)f.push(g),g=g.nextSibling;return f},s=function(a){for(var b=a.defaultNodes,f=b.length,g=0;g<f;g++)a.container.insertBefore(b[g],a.endNode);a.isDefault=!0},t=function(a){for(var b=a.defaultNodes,f=b.length,g=0;g<f;g++){var e=b[g];e.parentNode.removeChild(e)}a.isDefault=!1},B=function(a,b){return{get:function(){var f=a[b];return"function"===typeof f?f.bind(a):f},set:function(f){a[b]=f}}},x=function(a){for(var b=a.childNodes,f=b.length,g=
[],e,a=0;a<f;a++){var c=b[a];if(8===c.nodeType){var d;d=c;var j=void 0,h=d.textContent.match(/^ (\/?)content (.*)/i);if(h){if(h[2])try{j=JSON.parse(h[2])}catch(p){throw Error('Unable to parse content comment data: "'+p+'" in "<\!--'+d.textContent+'--\>".');}d={data:j||{defaultContent:void 0,isDefault:void 0,selector:void 0},type:h[1]?"close":"open"}}else d=void 0;if(d)if("open"===d.type){if(e)throw Error('Cannot have an opening content placeholder after another content placeholder at the same level in the DOM tree: "'+
c.textContent+'" in "'+c.parentNode.innerHTML+'".');e={container:c.parentNode,contentNode:c,defaultNodes:d.data.defaultContent&&q(d.data.defaultContent).childNodes||[],isDefault:d.data.isDefault,selector:d.data.selector,startNode:c}}else if("close"===d.type){if(!e)throw Error('Unmatched closing content placeholder: "'+c.textContent+'" in "'+c.parentNode.innerHTML+'".');e.endNode=c;g.push(e);e=void 0}}else g=g.concat(x(c))}return g},k=function(){var a=[].slice.call(arguments).join("");return function(b){var f=
w(b.childNodes);b.innerHTML=a;var g=b.getElementsByTagName("content");if(g&&g.length){for(var e=[];g.length;){var c=g[0],d=c.parentNode,j=c.getAttribute("select"),h=document.createComment(" content "),p=document.createComment(" /content ");e.push({container:d,contentNode:c,defaultNodes:[].slice.call(c.childNodes),endNode:p,isDefault:!0,selector:j,startNode:h});d.replaceChild(p,c);d.insertBefore(h,p);h.textContent+=JSON.stringify({defaultContent:c.innerHTML,selector:j})+" "}v(b,"content",e)}f.childNodes.length&&
k.wrap(b).appendChild(f)}},y=window.DocumentFragment,m=window.HTMLElement.prototype,z=m.matches||m.msMatchesSelector||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector;k.wrap=function(a){var b;b=a.__SKATE_TEMPLATE_HTML_DATA?a.__SKATE_TEMPLATE_HTML_DATA.content:void 0;b||v(a,"content",x(a));var f;f=a.__SKATE_TEMPLATE_HTML_DATA?a.__SKATE_TEMPLATE_HTML_DATA.content:void 0;var g=f.length;b={childNodes:{get:function(){for(var d=[],j=0;j<g;j++){var h=f[j];h.isDefault||(d=d.concat(r(h.startNode,
h.endNode)))}return d}},firstChild:{get:function(){var d=this.childNodes;return d.length&&d[0]||null}},innerHTML:{get:function(){for(var d="",j=this.childNodes,h=j.length,a=0;a<h;a++)var b=j[a],d=d+(b.outerHTML||b.textContent);return d},set:function(d){for(var d=q(d),a=0;a<g;a++){for(var h=f[a],b=r(h.startNode,h.endNode),c=0;c<b.length;c++){var e=b[c];e.parentNode.removeChild(e)}b=d;if(c=h.selector){for(var c=b.querySelectorAll(c),e=c.length,i=[],n=0;n<e;n++){var o=c[n];o.parentNode===b&&i.push(o)}b=
i}else b=[].slice.call(b.childNodes)||[];for(c=0;c<b.length;c++)h.container.insertBefore(b[c],h.endNode);b.length?t(h):s(h)}}},lastChild:{get:function(){for(var d=g-1;-1<d;d--)if(!f[d].isDefault)return d=this.childNodes,d[d.length-1];return null}},outerHTML:{get:function(){var d=this.tagName.toLowerCase(),a="<"+d,b=this.attributes;if(b)for(var c=b.length,f=0;f<c;f++)var g=b[f],a=a+(" "+g.nodeName+'="'+g.nodeValue+'"');a=a+">"+this.innerHTML;return a+("</"+d+">")}},textContent:{get:function(){for(var d=
"",a=this.childNodes,b=this.childNodes.length,c=0;c<b;c++)d+=a[c].textContent;return d},set:function(d){var a;this.innerHTML="";for(var b=0;b<g;b++){var c=f[b];if(!c.selector){a=c;break}}a&&(d?(t(a),a.container.insertBefore(document.createTextNode(d),a.endNode)):s(a))}},appendChild:{value:function(d){if(d instanceof y)return[].slice.call(d.childNodes).forEach(function(a){this.appendChild(a)}.bind(this)),this;for(var a=0;a<g;a++){var b=f[a],c=b.selector;if(!c||d instanceof window.HTMLElement&&z.call(d,
c)){t(b);b.endNode.parentNode.insertBefore(d,b.endNode);break}}return this}},insertAdjacentHTML:{value:function(d,b){"afterbegin"===d?this.insertBefore(q(b),this.childNodes[0]):"beforeend"===d?this.appendChild(q(b)):a.insertAdjacentHTML(d,b);return this}},insertBefore:{value:function(a,b){if(!b)return this.appendChild(a);if(a instanceof y){var c=a.childNodes;if(c)for(var e=c.length,i=0;i<e;i++)this.insertBefore(c[i],b);return this}c=!1;e=0;a:for(;e<g;e++)for(var i=f[e],k=r(i.startNode,i.endNode),
m=k.length,n=0;n<m;n++){var o=k[n];o===b&&(c=!0);if(c){var l=i.selector;if(!l||z.call(a,l)){o.parentNode.insertBefore(a,o);break a}}}if(!c)throw Error("DOMException 8: The node before which the new node is to be inserted is not a child of this node.");return a}},removeChild:{value:function(a){for(var b=!1,c=0;c<g;c++){var e=f[c];if(e.container===a.parentNode){e.container.removeChild(a);b=!0;break}e.startNode.nextSibling===e.endNode&&s(e)}if(!b)throw Error("DOMException 8: The node in which you are trying to remove is not a child of this node.");
return a}},replaceChild:{value:function(a,b){for(var c=0;c<g;c++){var e=f[c];if(e.container===b.parentNode){e.container.replaceChild(a,b);break}}return this}}};var e={},c;for(c in a)c in b?Object.defineProperty(e,c,b[c]):Object.defineProperty(e,c,B(a,c));return e};window.skateTemplateHtml=k;"function"===typeof l&&l(function(){return k});"object"===typeof i&&(i.exports=k);return i.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-header-create-header', location = 'src/js/aui/internal/header/create-header.js' */
("undefined"===typeof window?global:window).__fb1ea8007a584168c1a1610db14baf17=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function k(a){this.element=a;this.$element=(0,f.default)(a);this.index=(0,f.default)("aui-header, .aui-header").index(a);this.$secondaryNav=this.$element.find(".aui-header-secondary .aui-nav").first();this.menuItems=[];this.totalWidth=0;this.rightMostNavItemIndex=this.$moreMenu=void 0;this.$applicationLogo=this.$element.find("#logo");this.primaryButtonsWidth=
this.moreMenuWidth=0;var b=(0,f.default)(this.$element[0].querySelector(".aui-header-primary"));this.$headerFind=function(a){return b.find(a)}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var f=d(__bd7207540b95ff683caa1d3c0bfcc3d7),n=d(__b4f5303c3f6b97d2fd503b5013ff8de7),o=d(__797d10010c51da30b099c976f973e278),p=d(__780f92e84f7b06d16e986a531e56e288),j=d(__7acfe7fd38bbf8b5bf76cc953770b033),l=d(__2b1734744f1decec6fe4109762d4ff9c),m=(0,f.default)(window);k.prototype={init:function(){var a=
this;this.element.setAttribute("data-aui-responsive","true");this.$headerFind(".aui-button").parent().each(function(){a.primaryButtonsWidth+=(0,f.default)(this).outerWidth(!0)});this.$headerFind(".aui-nav > li > a:not(.aui-button)").each(function(){var b=(0,f.default)(this).parent(),g=b.outerWidth(!0);a.totalWidth+=g;a.menuItems.push({$element:b,outerWidth:g})});this.rightMostNavItemIndex=this.menuItems.length-1;m.on("resize",this._resizeHandler=(0,o.default)(function(){a.constructResponsiveDropdown()},
100));var b=this.$applicationLogo.find("img");0!==b.length&&(b.attr("data-aui-responsive-header-index",this.index),b.on("load",function(){a.constructResponsiveDropdown()}));this.constructResponsiveDropdown();this.$headerFind(".aui-nav").css("width","auto")},destroy:function(){m.off("resize",this._resizeHandler)},calculateAvailableWidth:function(){var a=this.$secondaryNav.is(":visible")?this.$secondaryNav.offset().left:this.$element.outerWidth(),b=this.$applicationLogo.offset().left+this.$applicationLogo.outerWidth(!0)+
this.primaryButtonsWidth;return a-b},showResponsiveDropdown:function(){void 0===this.$moreMenu&&(this.$moreMenu=this.createResponsiveDropdownTrigger());this.$moreMenu.css("display","")},hideResponsiveDropdown:function(){void 0!==this.$moreMenu&&this.$moreMenu.css("display","none")},constructResponsiveDropdown:function(){if(this.menuItems.length){var a;a=this.calculateAvailableWidth(this.$element,this.primaryButtonsWidth);if(a>this.totalWidth)this.showAll();else{this.showResponsiveDropdown();a-=this.moreMenuWidth;
for(var b=-1;0<=a-this.menuItems[b+1].outerWidth;)a-=this.menuItems[b+1].outerWidth,b++;b<this.rightMostNavItemIndex?this.moveToResponsiveDropdown(this.rightMostNavItemIndex-b):this.rightMostNavItemIndex<b&&this.moveOutOfResponsiveDropdown(b-this.rightMostNavItemIndex)}}},createResponsiveDropdownTrigger:function(){var a=document.createElement("li"),b=document.createElement("aui-dropdown-menu");b.id="aui-responsive-header-dropdown-"+this.index;j.default.init(b);var c=document.createElement("aui-section");
c.id="aui-responsive-header-dropdown-list-"+this.index;j.default.init(c);l.default.wrap(b).appendChild(c);c=document.createElement("a");c.setAttribute("class","aui-dropdown2-trigger");c.setAttribute("href","#");c.id=b.id+"-trigger";c.setAttribute("aria-controls",b.id);c.innerHTML=p.default.getText("aui.words.more");a.appendChild(c);a.appendChild(b);0===this.primaryButtonsWidth?this.$headerFind(".aui-nav").append(a):this.$headerFind(".aui-nav > li > .aui-button:first").parent().before(a);this.moreMenuWidth=
(0,f.default)(a).outerWidth(!0);return(0,f.default)(a)},moveOutOfResponsiveDropdown:function(a){if(!(0>=a)){for(var b=(0,f.default)("#aui-responsive-header-dropdown-"+this.index),c=this.rightMostNavItemIndex+a,g=this.rightMostNavItemIndex+1;g<=c;g++){var i=this.menuItems[g].$element,e=i.children("a");e.attr("aria-controls")&&(e=(0,f.default)(document.getElementById(e.attr("aria-controls"))),e.removeClass("aui-dropdown2-sub-menu"),i.append(e));b.find("aui-item-link:first").remove();i.insertBefore(this.$moreMenu)}this.rightMostNavItemIndex+=
a}},moveToResponsiveDropdown:function(a){if(!(0>=a)){for(var b=l.default.wrap(this.$moreMenu[0].querySelector("aui-section")),c=this.rightMostNavItemIndex-a+1,g=this.rightMostNavItemIndex;g>=c;g--){var i=this.menuItems[g].$element,e=i.children("a");j.default.init(e);var d=document.createElement("aui-item-link");d.setAttribute("href",e.attr("href"));if(e.attr("aria-controls")){var h=(0,f.default)(document.getElementById(e.attr("aria-controls")));d.setAttribute("for",e.attr("aria-controls"));h.addClass("aui-dropdown2-sub-menu");
h.appendTo("body")}j.default.init(d);l.default.wrap(d).textContent=e.text();i.detach();b.insertBefore(d,b.firstChild);this.element.dispatchEvent(new n.default("aui-responsive-menu-item-created",{bubbles:!0,detail:{originalItem:i[0],newItem:d}}))}this.rightMostNavItemIndex-=a}},showAll:function(){this.moveOutOfResponsiveDropdown(this.menuItems.length-1-this.rightMostNavItemIndex);this.hideResponsiveDropdown()}};h.default=function(a){var b=a._header;b instanceof k||(b=new k(a),b.init(),a._header=b);
return b};return h=h["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-header', location = 'src/js/aui/header.js' */
("undefined"===typeof window?global:window).__96c527b2dea71f00bd040ef0cbcf4d70=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function f(){(0,g.default)(".aui-header").each(function(){(0,h.default)(this)})}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=e(__bd7207540b95ff683caa1d3c0bfcc3d7),h=e(__fb1ea8007a584168c1a1610db14baf17),b;var a=__c88c0dc6258c37804917fb6a0e4092fa;if(a&&a.__esModule)b=a;else{var c={};if(null!=a)for(b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(c[b]=a[b]);c.default=a;b=c}a=e(__9a668cbde1e182d8e721c23580356df2);(0,g.default)(f);c={};c.setup=b.fn(f,"responsiveheader.setup",{removeInVersion:"8.0.0",sinceVersion:"5.8.0",extraInfo:"No need to manually initialise anymore as this is now a web component."});(0,a.default)("responsiveheader",c);d.default=c;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-focus-manager', location = 'src/js/aui/focus-manager.js' */
("undefined"===typeof window?global:window).__36a458098fb180bab5c72993768eb373=function(){function c(){this._focusTrapStack=[];(0,d.default)(document).on("focusout",{focusTrapStack:this._focusTrapStack},j)}function j(a){var e=a.data.focusTrapStack;if(a.relatedTarget&&0!==e.length){var e=e[e.length-1],g=a.target,a=a.relatedTarget,b=e.find(":aui-tabbable"),c=(0,d.default)(b.first()),b=(0,d.default)(b.last());0===e.has(a).length&&a&&(c.is(g)?b.focus():b.is(g)&&c.focus())}}var f={};"use strict";Object.defineProperty(f,
"__esModule",{value:!0});var b=__bd7207540b95ff683caa1d3c0bfcc3d7,d=b&&b.__esModule?b:{"default":b},b=(b=__9a668cbde1e182d8e721c23580356df2)&&b.__esModule?b:{"default":b},h=function(a){return"visible"===d.default.css(a,"visibility")},i=function(a,e){var b=a.nodeName.toLowerCase();if("aui-select"===b)return!0;if("area"===b){var b=a.parentNode,c=b.name,f=(0,d.default)("img[usemap=#"+c+"]").get();return!a.href||!c||"map"!==b.nodeName.toLowerCase()?!1:f&&h(f)}c=/input|select|textarea|button|object/.test(b);
f=a.href||e;return(c?!a.disabled:"a"===b?f:e)&&h(a)};d.default.extend(d.default.expr[":"],{"aui-focusable":function(a){return i(a,!isNaN(d.default.attr(a,"tabindex")))},"aui-tabbable":function(a){var b=d.default.attr(a,"tabindex"),c=isNaN(b);return(c||0<=b)&&i(a,!c)}});c.defaultFocusSelector=":aui-tabbable";c.prototype.enter=function(a){a.data("_aui-focus-restore",(0,d.default)(document.activeElement));if("false"!==a.attr("data-aui-focus")){var b=a.attr("data-aui-focus-selector")||c.defaultFocusSelector;
(a.is(b)?a:a.find(b)).first().focus()}a.is(".aui-dialog2")&&this._focusTrapStack.push(a)};c.prototype.exit=function(a){a.is(".aui-dialog2")&&this._focusTrapStack.pop();var b=document.activeElement;if(a[0]===b||a.has(b).length)(0,d.default)(b).blur();if((b=a.data("_aui-focus-restore"))&&b.length)a.removeData("_aui-focus-restore"),b.focus()};c.global=new c;(0,b.default)("FocusManager",c);f.default=c;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-key-code', location = 'src/js/aui/key-code.js' */
("undefined"===typeof window?global:window).__3f6f6650e96d80fefaaf71feed8f822b=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__9a668cbde1e182d8e721c23580356df2,a=a&&a.__esModule?a:{"default":a},c={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,LEFT_SQUARE_BRACKET:91,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};(0,a.default)("keyCode",c);b.default=c;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-layer', location = 'src/js/aui/layer.js' */
("undefined"===typeof window?global:window).__bbe882dbb07e18e72992d5f992bba14c=function(){function i(a){return a&&a.__esModule?a:{"default":a}}function p(a,b,c){var e=f.default.Event(j+b),b=f.default.Event(k+b),d=new r.default(x+c,{bubbles:!0,cancelable:!0}),c=new r.default(y+c,{bubbles:!0,cancelable:!0});a.trigger(e);a.trigger(b,[a]);a[0].dispatchEvent(d);a[0].dispatchEvent(c);return!e.isDefaultPrevented()&&!b.isDefaultPrevented()&&!d.defaultPrevented&&!c.defaultPrevented}function s(a){this.$el=
(0,f.default)(a||'<div class="aui-layer" aria-hidden="true"></div>');this.$el.addClass("aui-layer")}function t(a){return(0,f.default)('[aria-controls="'+a.attr("id")+'"]')}function u(a,b){for(var c=a.length;c--;)if(b(a[c]))return c;return-1}function g(a,b){return u(a,function(a){return a[0]===b[0]})}function l(a){return u(a,function(a){return e(a).isBlanketed()})}function n(a,b){var c=l(a);b!==c&&(-1<c?(0,q.dim)(!1,a[c].css("z-index")-20):(0,q.undim)())}function h(a,b,c){if(!(0>b))for(var d=a.length-
1;d>=b;d--){var f=e(a[d]);if(c||!f.isPersistent())f._hideLayer(!0),a.splice(d,1)}}function d(){this._stack=[]}function v(a){if(!a.length)return!1;a=document.getElementById(a.attr("aria-controls"));return-1<d.global.indexOf(a)}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var f=i(__bd7207540b95ff683caa1d3c0bfcc3d7),q=__7f21a71921a14c7b5b83c94ec80f4db5,w=i(__36a458098fb180bab5c72993768eb373),z=i(__9a668cbde1e182d8e721c23580356df2),A=i(__3f6f6650e96d80fefaaf71feed8f822b),B=i(__f6397c80406fe105a9ead0b34dba268d),
r=i(__b4f5303c3f6b97d2fd503b5013ff8de7),j="_aui-internal-layer-",k="_aui-internal-layer-global-",x="aui-layer-",y="aui-",m=(0,f.default)(document);s.prototype={below:function(){return d.global.item(d.global.indexOf(this.$el)-1)},above:function(){return d.global.item(d.global.indexOf(this.$el)+1)},changeSize:function(a,b){this.$el.css("width",a);this.$el.css("height","content"===b?"":b);return this},on:function(a,b){this.$el.on(j+a,b);return this},off:function(a,b){this.$el.off(j+a,b);return this},
show:function(){if(this.isVisible())return this.$el.attr("aria-hidden","false"),this;if(!p(this.$el,"beforeShow","show"))return this;"none"===this.$el.css("display")&&this.$el.css("display","");d.global.push(this.$el);return this},hide:function(){if(!this.isVisible())return this.$el.attr("aria-hidden","true"),this;if(!p(this.$el,"beforeHide","hide"))return this;var a=this,b=this.$el.get(0),c=function(){a.isVisible()||(this.style.display="none")},e=function(a){"opacity"===a.propertyName&&(c.call(b),
b.removeEventListener("transitionend",e))},f=window.getComputedStyle(b).transitionProperty;f&&-1<f.indexOf("opacity")?b.addEventListener("transitionend",e):c.call(b);d.global.popUntil(this.$el);return this},isVisible:function(){return"false"===this.$el.attr("aria-hidden")},remove:function(){this.hide();this.$el.remove();this.$el=null},isBlanketed:function(){return"true"===this.$el.attr("data-aui-blanketed")},isPersistent:function(){var a=this.$el.attr("modal")||this.$el.attr("data-aui-modal"),b=this.$el[0].hasAttribute("persistent");
return"true"===a||b},_hideLayer:function(a){(this.isPersistent()||this.isBlanketed())&&w.default.global.exit(this.$el);a&&p(this.$el,"beforeHide","hide");this.$el.attr("aria-hidden","true");this.$el.css("z-index",this.$el.data("_aui-layer-cached-z-index")||"");this.$el.data("_aui-layer-cached-z-index","");this.$el.trigger(j+"hide");this.$el.trigger(k+"hide",[this.$el])},_showLayer:function(a){this.$el.parent().is("body")||this.$el.appendTo(document.body);this.$el.data("_aui-layer-cached-z-index",
this.$el.css("z-index"));this.$el.css("z-index",a);this.$el.attr("aria-hidden","false");(this.isPersistent()||this.isBlanketed())&&w.default.global.enter(this.$el);this.$el.trigger(j+"show");this.$el.trigger(k+"show",[this.$el])}};var e=(0,B.default)("layer",s);e.on=function(a,b,c){m.on(k+a,b,c);return this};e.off=function(a,b,c){m.off(k+a,b,c);return this};d.prototype={push:function(a){a=a instanceof f.default?a:(0,f.default)(a);if(0<=g(this._stack,a))throw Error("The given element is already an active layer.");
this.popLayersBeside(a);var b=e(a),c;c=this._stack;c.length?(c=parseInt(c[c.length-1].css("z-index"),10),c=(isNaN(c)?0:c)+100):c=0;c=Math.max(3E3,c);b._showLayer(c);b.isBlanketed()&&(0,q.dim)(!1,c-20);this._stack.push(a);return this},popLayersBeside:function(a){a=a instanceof f.default?a:(0,f.default)(a);0<t(a).length?(a=t(a),a=0<a.length?a.closest(".aui-layer"):void 0,a?(a=this.indexOf(a),h(this._stack,++a,!1)):h(this._stack,0,!1)):(a=l(this._stack),h(this._stack,++a,!1))},indexOf:function(a){return g(this._stack,
(0,f.default)(a))},item:function(a){return this._stack[a]},hideAll:function(){this._stack.reverse().forEach(function(a){a=e(a);!a.isBlanketed()&&!a.isPersistent()&&a.hide()});return this},getNextLowerNonPersistentOrBlanketedLayer:function(a){a=a instanceof f.default?a:(0,f.default)(a);a=g(this._stack,a);if(0>a)return null;var b;for(a--;0<=a;){b=this._stack[a];var c=e(b);if(!c.isPersistent()||c.isBlanketed())return b;a--}return null},getNextHigherNonPeristentAndNonBlanketedLayer:function(a){a=a instanceof
f.default?a:(0,f.default)(a);a=g(this._stack,a);if(0>a)return null;var b;for(a++;a<this._stack.length;){b=this._stack[a];var c=e(b);if(!c.isPersistent()&&!c.isBlanketed())return b;a++}return null},popUntil:function(a){var a=a instanceof f.default?a:(0,f.default)(a),b=g(this._stack,a);if(-1===b)return null;var c=l(this._stack);h(this._stack,b+1,e(a).isBlanketed());e(a)._hideLayer();this._stack.splice(b,1);n(this._stack,c);return a},getTopLayer:function(){return!this._stack.length?null:this._stack[this._stack.length-
1]},popTopIfNonPersistent:function(){var a=this.getTopLayer(),b=e(a);return!a||b.isPersistent()?null:this.popUntil(a)},popUntilTopBlanketed:function(){var a=l(this._stack);if(0>a)return null;var b=this._stack[a];if(e(b).isPersistent())return(a=this.getNextHigherNonPeristentAndNonBlanketedLayer(b))?(b=g(this._stack,a),h(this._stack,b,!0),a):null;h(this._stack,a,!0);n(this._stack,a);return b},popUntilTopPersistent:function(){var a=d.global.getTopLayer();if(a){var b=l(this._stack),c=e(a);c.isPersistent()?
c.isBlanketed()||(a=d.global.getNextLowerNonPersistentOrBlanketedLayer(a),c=e(a),a&&!c.isPersistent()&&(a=g(this._stack,a),h(this._stack,a,!0),n(this._stack,b))):(a=g(this._stack,a),h(this._stack,a,!0),n(this._stack,b))}}};m.on("keydown",function(a){a.keyCode===A.default.ESCAPE&&(d.global.popUntilTopPersistent(),a.preventDefault())});m.on("click",".aui-blanket",function(a){d.global.popUntilTopBlanketed()&&a.preventDefault()});m.on("click",function(a){var b=(0,f.default)(a.target);b.closest(".aui-blanket").length||
(a=b.closest("[aria-controls]"),b=b.closest(".aui-layer"),!b.length&&!v(a)?d.global.hideAll():!v(a)&&b.length&&(a=d.global.getNextHigherNonPeristentAndNonBlanketedLayer(b))&&e(a).hide())});d.global=new d;e.Manager=d;(0,z.default)("layer",e);o.default=e;return o=o["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-layer-manager', location = 'src/js/aui/layer-manager.js' */
("undefined"===typeof window?global:window).__d16d3e068aca500bb6ad86bf160d14ed=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var b=__9a668cbde1e182d8e721c23580356df2,b=b&&b.__esModule?b:{"default":b},a=__bbe882dbb07e18e72992d5f992bba14c,a=a&&a.__esModule?a:{"default":a};(0,b.default)("LayerManager",a.default.Manager);c.default=a.default.Manager;return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-alignment', location = 'src/js/aui/internal/alignment.js' */
("undefined"===typeof window?global:window).__df78b4690da2c4aae9e9dc85c77219d0=function(){function j(a,h){var b,c,e;b=a.getAttribute(k)||a.getAttribute("data-aui-"+k)||window;"string"===typeof b&&(b=document.querySelector(b));e=b;b=(a.getAttribute(l)||a.getAttribute("data-aui-"+l)||m).split(" ");c=n(b,2);b=c[0];c=c[1];if(!c||"auto"===c){var d=e;c="left";if(!d||d===window||d===document)d=document.documentElement;d&&(d.nodeType&&d.nodeType===Node.ELEMENT_NODE)&&(d=d.getBoundingClientRect(),h.getBoundingClientRect().left>
d.right/2&&(c="right"))}var d=o[b+" "+c]||o[m],i=a.hasAttribute(p)||a.hasAttribute("data-aui-"+p);e=new q.default({enabled:!1,element:a,target:h,attachment:d.el,targetAttachment:d.target,classPrefix:r,constraints:[{to:e===window?"window":e,attachment:!0===i?"none":"together"}]});b=s+b;c=t+c;-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className+=" "+b);-1===(" "+a.className+" ").indexOf(" "+c+" ")&&(a.className+=" "+c);this._auiTether=e}var f={};"use strict";Object.defineProperty(f,"__esModule",
{value:!0});var n;n=function(a,h){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var b=[],c=!0,e=!1,d=void 0;try{for(var i=a[Symbol.iterator](),f;!(c=(f=i.next()).done)&&!(b.push(f.value),h&&b.length===h);c=!0);}catch(g){e=!0,d=g}finally{try{if(!c&&i["return"])i["return"]()}finally{if(e)throw d;}}return b}throw new TypeError("Invalid attempt to destructure non-iterable instance");};var g=__74afe8b96acdee164fa987a4fdd7afc1,q=g&&g.__esModule?g:{"default":g},l="alignment",p="alignment-static",
k="alignment-container",r="aui-alignment",s="aui-alignment-side-",t="aui-alignment-snap-",m="right middle",o={"top left":{el:"bottom left",target:"top left"},"top center":{el:"bottom center",target:"top center"},"top right":{el:"bottom right",target:"top right"},"right top":{el:"top left",target:"top right"},"right middle":{el:"middle left",target:"middle right"},"right bottom":{el:"bottom left",target:"bottom right"},"bottom left":{el:"top left",target:"bottom left"},"bottom center":{el:"top center",
target:"bottom center"},"bottom right":{el:"top right",target:"bottom right"},"left top":{el:"top right",target:"top left"},"left middle":{el:"middle right",target:"middle left"},"left bottom":{el:"bottom right",target:"bottom left"},"submenu left":{el:"top left",target:"top right"},"submenu right":{el:"top right",target:"top left"}};j.prototype={destroy:function(){this._auiTether.destroy();return this},disable:function(){this._auiTether.disable();return this},enable:function(){this._auiTether.enable();
return this}};f.default=j;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-browser', location = 'src/js/aui/internal/browser.js' */
("undefined"===typeof window?global:window).__02837eb0ab28736e09825f2207c8fe9b=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.needsLayeringShim=function(){return f&&(g||h||i)};a.supportsCalc=function(){if("undefined"===typeof c){var a=document.createElement("div");a.style.cssText="height: -webkit-calc(20px + 0); height: calc(20px);";c=0<a.style.cssText.length}return c};a.supportsRequestAnimationFrame=function(){return!!window.requestAnimationFrame};a.supportsCssTransition=
function(){if("undefined"===typeof d){var a=(document.body||document.documentElement).style;d="string"===typeof a.transition||"string"===typeof a.WebkitTransition}return d};a.supportsVoiceOver=function(){return j};a.supportsDateField=function(){if("undefined"===typeof e){var a=document.createElement("input");a.setAttribute("type","date");e="date"===a.type}return e};a.supportsNewMouseEvent=function(){try{new MouseEvent("click")}catch(a){return!1}return!0};var b=navigator.userAgent.toLowerCase(),f=
/msie/.test(b),g=/windows nt 5.1/.test(b),h=/windows nt 6.0/.test(b),i=/windows nt 6.1/.test(b),j=/mac os x/.test(b),c,d,e;return a}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-state', location = 'src/js/aui/internal/state.js' */
("undefined"===typeof window?global:window).__60d0fde69902306f271d8ee27e7ed8ae=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(b){return{set:function(a,c){void 0===b._state&&(b._state={});b._state[a]=c},get:function(a){if(b._state)return b._state[a]}}};return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dropdown2', location = 'src/js/aui/dropdown2.js' */
("undefined"===typeof window?global:window).__6a0fbb87ac5bb4a2fd7bf918d701c4a4=function(){function w(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;return b}function i(a){return a&&a.__esModule?a:{"default":a}}function x(a){return(0,c.default)(a).is('.checked, .aui-dropdown2-checked, [aria-checked="true"]')}function m(a,b){var e=a._triggeringElement||document.querySelector('[aria-controls="'+a.id+'"]');e&&b(e)}function s(a,
b){var e=(0,c.default)(a);b?(e.attr("aria-expanded","true"),e.addClass("active aui-dropdown2-active")):(e.attr("aria-expanded","false"),e.removeClass("active aui-dropdown2-active"))}function y(a){(0,g.default)(a).set("loading-state",z);(0,g.default)(a).set("hasErrorBeenShown",a.isVisible());j.default.wrap(a).innerHTML='\n        <div class="aui-message aui-message-error aui-dropdown-error">\n            <p>'+"Error loading dropdown"+"</p>\n        </div>\n    "}function A(a){if(a.src&&
(0,g.default)(a).get("loading-state")!==B)(0,g.default)(a).set("loading-state",B),(0,g.default)(a).set("hasErrorBeenShown",!1),m(a,function(a){a.setAttribute("aria-busy","true")}),j.default.wrap(a).innerHTML='\n        <div class="aui-dropdown-loading">\n            <aui-spinner size="small"></aui-spinner> '+"Loading dropdown"+"\n        </div>\n    ",c.default.ajax(a.src).done(function(b,e,h){200===h.status?((0,g.default)(a).set("loading-state",G),j.default.wrap(a).innerHTML=
b.map(function(a){var b=a.items.map(function(a){function b(e){return a[e]?e+' ="true"':""}var e="aui-item-"+a.type;return"\n                <"+e+" "+(a["for"]?'for="'+a["for"]+'"':"")+" "+(a.href?'href="'+a.href+'"':"")+" "+b("interactive")+"\n                    "+b("checked")+" "+b("disabled")+" "+b("hidden")+">\n                    "+a.content+"\n                </"+e+">"}).join("");return"\n            <aui-section "+(a.label?'label="'+a.label+'"':"")+">\n                "+b+"\n            </aui-section>"}).join("\n"),
d.default.init(a)):y(a)}).fail(function(){y(a)}).always(function(){m(a,function(a){a.setAttribute("aria-busy","false")})})}function C(a,b){return(0,c.default)(a).find('> ul > li, > .aui-dropdown2-section > ul > li, > div[role] > .aui-dropdown2-section > div[role="group"] > ul[role] > li[role], aui-item-link, aui-item-checkbox, aui-item-radio').filter(b).children('a, button, [role="checkbox"], [role="menuitemcheckbox"], [role="radio"], [role="menuitemradio"]')}function q(a){return C(a,function(){return-1===
this.className.indexOf("hidden")&&!this.hasAttribute("hidden")})}function D(a){var b=(0,c.default)(a);b.addClass("aui-dropdown2");(0,t.supportsVoiceOver)()&&b.find('> div[role="application"]').attr("role","presentation");a.hasAttribute("data-container")&&(b.attr("data-aui-alignment-container",b.attr("data-container")),b.removeAttr("data-container"));(0,k.default)(a);a.addEventListener("aui-layer-show",function(){(0,c.default)(a).trigger("aui-dropdown2-show");var b=(0,c.default)(a),h=b.find(".hidden").addClass("aui-dropdown2-hidden"),
l=b.find(".disabled").addClass("aui-dropdown2-disabled"),d=b.find(".interactive").addClass("aui-dropdown2-interactive");a._syncClasses=function(){h.removeClass("aui-dropdown2-hidden");l.removeClass("aui-dropdown2-disabled");d.removeClass("aui-dropdown2-interactive")};C(this,function(){return true}).each(function(){var a=(0,c.default)(this);a.attr("tabindex","-1");(a.hasClass("aui-dropdown2-disabled")||a.parent().hasClass("aui-dropdown2-hidden"))&&a.attr("aria-disabled",true)});m(a,function(b){s(b,
true);b=b.getAttribute("data-dropdown2-hide-location");b=document.getElementById(b)||a.parentNode;a._returnTo=b})});a.addEventListener("aui-layer-hide",function(){(0,c.default)(a).trigger("aui-dropdown2-hide");if(a._syncClasses){a._syncClasses();delete a._syncClasses}if(a._auiAlignment){a._auiAlignment.disable();a._auiAlignment.destroy()}a._returnTo&&a.parentNode&&a.parentNode!==a._returnTo&&a._returnTo.appendChild(a);(0,c.default)(a).removeClass("aui-dropdown2-in-buttons");q(a).removeClass("active aui-dropdown2-active");
m(a,function(a){var b=n===true;n=false;if(b){a.focus();s(a,a.hasSubmenu&&a.hasSubmenu())}else s(a,false)});delete a.isSubmenu;a._triggeringElement=null});b=(0,c.default)(a);b.on("keydown",function(b){if(b.keyCode===f.default.DOWN){a.focusNext();b.preventDefault()}else if(b.keyCode===f.default.UP){a.focusPrevious();b.preventDefault()}else if(b.keyCode===f.default.LEFT){if(a.isSubmenu){n=true;a.hide(b);b.preventDefault()}}else if(b.keyCode===f.default.ESCAPE)n=true;else if(b.keyCode===f.default.TAB){n=
true;a.hide(b)}});b.on("click keydown",'a, button, [role="menuitem"], [role="menuitemcheckbox"], [role="checkbox"], [role="menuitemradio"], [role="radio"]',function(b){var h=b.currentTarget,h=(0,c.default)(h),l=b.keyCode,d=l===f.default.ENTER,l=l===f.default.SPACE;if((!d||!h.is("a[href], button"))&&(b.type==="click"||d||l)){h=(0,c.default)(b.currentTarget);if(h.attr("aria-disabled")==="true")b.preventDefault();else if((!b.currentTarget.hasSubmenu||!b.currentTarget.hasSubmenu())&&!h.is(".aui-dropdown2-interactive")){h=
a;do{d=(0,k.default)(h);h=(0,k.default)(h).below();d.$el.is(".aui-dropdown2")&&d.hide(b)}while(h)}}});b.on("mouseenter",'a, button, [role="menuitem"], [role="menuitemcheckbox"], [role="checkbox"], [role="menuitemradio"], [role="radio"]',function(b){var c=b.currentTarget,c=c.hasSubmenu&&c.hasSubmenu();if(!b.isDefaultPrevented()&&!c)(b=(0,k.default)(a).above())&&(0,k.default)(b).hide()});a.hide();(0,c.default)(a).delegate(".aui-dropdown2-checkbox:not(.disabled):not(.aui-dropdown2-disabled)","click keydown",
function(a){if((a.type==="click"||a.keyCode===f.default.ENTER||a.keyCode===f.default.SPACE)&&!a.isDefaultPrevented()){this.isInteractive()&&a.preventDefault();this.isEnabled()&&(this.isChecked()?this.uncheck():this.check())}});(0,c.default)(a).delegate(".aui-dropdown2-radio:not(.checked):not(.aui-dropdown2-checked):not(.disabled):not(.aui-dropdown2-disabled)","click keydown",function(a){if((a.type==="click"||a.keyCode===f.default.ENTER||a.keyCode===f.default.SPACE)&&!a.isDefaultPrevented()){this.isInteractive()&&
a.preventDefault();a=(0,c.default)(this);if(this.isEnabled()&&this.isChecked()===false){a.closest("ul,[role=group]").find(".aui-dropdown2-checked").not(this).each(function(){this.uncheck()});this.check()}}})}"use strict";__780f92e84f7b06d16e986a531e56e288;__05bca48700965a7a8a29288c57bd100b;var c=i(__bd7207540b95ff683caa1d3c0bfcc3d7),j=i(__2b1734744f1decec6fe4109762d4ff9c),H=w(__c88c0dc6258c37804917fb6a0e4092fa),I=w(__2f5c294b01e66b15309518e39bcb949d),o=__797d10010c51da30b099c976f973e278,t=__02837eb0ab28736e09825f2207c8fe9b,
J=i(__df78b4690da2c4aae9e9dc85c77219d0),E=i(__b4f5303c3f6b97d2fd503b5013ff8de7),f=i(__3f6f6650e96d80fefaaf71feed8f822b),k=i(__bbe882dbb07e18e72992d5f992bba14c),g=i(__60d0fde69902306f271d8ee27e7ed8ae),d=i(__7acfe7fd38bbf8b5bf76cc953770b033),B="loading",z="error",G="success";(0,d.default)("aui-dropdown2-trigger",{type:d.default.type.CLASSNAME,created:function(a){function b(b){b.preventDefault();if(a.isEnabled()){var d=document.getElementById(e),f=(0,c.default)(a);f.parent().hasClass("aui-buttons")&&
d.classList.add("aui-dropdown2-in-buttons");f.parents().hasClass("aui-header")&&d.classList.add("aui-dropdown2-in-header");d.toggle(b);d.isSubmenu=a.hasSubmenu();return d}}var e=a.getAttribute("aria-controls");e||((e=a.getAttribute("aria-owns"))?(a.removeAttribute("aria-owns"),a.setAttribute("aria-controls",e)):I.error('Dropdown triggers need either a "aria-owns" or "aria-controls" attribute'));a.setAttribute("aria-haspopup",!0);a.setAttribute("aria-expanded",!1);"A"===a.nodeName&&!a.href&&a.setAttribute("href",
"#"+e);(0,c.default)(a).on("aui-button-invoke",b).on("click",b).on("keydown",function(c){var e=c.keyCode===f.default.ENTER||c.keyCode===f.default.SPACE,d=c.keyCode===f.default.RIGHT&&a.hasSubmenu(),g=(c.keyCode===f.default.UP||c.keyCode===f.default.DOWN)&&!a.hasSubmenu();if(e||d||g)(c=b(c))&&c.focusItem(0)}).on("mouseenter",function(b){b.preventDefault();if(a.isEnabled()){var c=document.getElementById(e),d=(0,g.default)(c).get("loading-state")==="unloaded",f=(0,g.default)(c).get("hasErrorBeenShown");
(d||f&&!c.isVisible())&&A(c);if(a.hasSubmenu()){c.show(b);c.isSubmenu=a.hasSubmenu()}return c}})},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")},hasSubmenu:function(){return-1!==(this.className||"").split(/\s+/).indexOf("aui-dropdown2-sub-trigger")}}});(0,c.default)(document).on("mousedown",".aui-dropdown2-trigger",function(){this.hasAttribute("resolved")||
(d.default.init(this),H.getMessageLogger("Dropdown2 lazy initialisation",{removeInVersion:"8.0.0",alternativeName:"initialisation on DOM insertion",sinceVersion:"5.8.0",extraInfo:"Dropdown2 triggers should have all necessary attributes on DOM insertion",deprecationType:"JS"})())});(0,d.default)("aui-dropdown2-sub-trigger",{type:d.default.type.CLASSNAME,created:function(a){a.className+=" aui-dropdown2-trigger";d.default.init(a)}});(0,c.default)(document).on("mouseenter",".aui-dropdown2-trigger-group a, .aui-dropdown2-trigger-group button",
function(a){var b=(0,c.default)(a.currentTarget);if(!b.is(".aui-dropdown2-active")&&!b.closest(".aui-dropdown2").length){var e=b.closest(".aui-dropdown2-trigger-group"),d=e.find(".aui-dropdown2-active");d.length&&b.is(".aui-dropdown2-trigger")&&(d.blur(),b.trigger("aui-button-invoke"),a.preventDefault());a=e.find(":focus");a.length&&b.is(".aui-dropdown2-trigger")&&a.blur()}});var n=!1;(0,c.default)(window).on("resize",(0,o.debounceImmediate)(function(){(0,c.default)(".aui-dropdown2").each(function(a,
b){d.default.init(b);b.isVisible()&&b.hide()})},1E3));var o={toggle:function(a){this.isVisible()?this.hide(a):this.show(a)},show:function(a){a&&(a.currentTarget&&a.currentTarget.classList.contains("aui-dropdown2-trigger"))&&(this._triggeringElement=a.currentTarget);(0,k.default)(this).show();var b=this;m(b,function(a){var d=a&&a.hasSubmenu&&a.hasSubmenu(),f=b.getAttribute("data-aui-alignment")==="submenu auto";if(!d&&f){var g=(0,c.default)(b),i=g.data("previous-data-aui-alignment");i?b.setAttribute("data-aui-alignment",
i):b.removeAttribute("data-aui-alignment");g.removeData("previous-data-aui-alignment");g.data("had-data-aui-alignment-static")||b.removeAttribute("data-aui-alignment-static");g.removeData("had-data-aui-alignment-static")}g=b.hasAttribute("data-aui-alignment");if(d&&!f){d=(0,c.default)(b);b.hasAttribute("data-aui-alignment")&&d.data("previous-data-aui-alignment",b.getAttribute("data-aui-alignment"));d.data("had-data-aui-alignment-static",b.hasAttribute("data-aui-alignment-static"));b.setAttribute("data-aui-alignment",
"submenu auto");b.setAttribute("data-aui-alignment-static",true)}else if(!g){b.setAttribute("data-aui-alignment","bottom auto");b.setAttribute("data-aui-alignment-static",true)}b._auiAlignment&&b._auiAlignment.destroy();b._auiAlignment=new J.default(b,a);b._auiAlignment.enable()});return this},hide:function(){(0,k.default)(this).hide();return this},focusNext:function(){var a=q(this),b=document.activeElement;a.last()[0]!==b&&(b=a.toArray().indexOf(b),this.focusItem(a.get(b+1)))},focusPrevious:function(){var a=
q(this),b=document.activeElement;a.first()[0]!==b&&(b=a.toArray().indexOf(b),this.focusItem(a.get(b-1)))},focusItem:function(a){var b=q(this);"number"===typeof a&&(a=b.get(a));a=(0,c.default)(a);a.focus();b.removeClass("active aui-dropdown2-active");a.addClass("active aui-dropdown2-active")},isVisible:function(){return(0,k.default)(this).isVisible()}},p={created:function(a){a=a.children[0];a.setAttribute("aria-disabled","true");a.className+=" aui-dropdown2-disabled"},removed:function(a){a=a.children[0];
a.setAttribute("aria-disabled","false");(0,c.default)(a).removeClass("aui-dropdown2-disabled")}},u={created:function(a){a.children[0].className+=" aui-dropdown2-interactive"},removed:function(a){a=a.children[0];(0,c.default)(a).removeClass("aui-dropdown2-interactive")}},F={created:function(a){var b=a.children[0];(0,c.default)(b).addClass("checked aui-dropdown2-checked");b.setAttribute("aria-checked",!0);a.dispatchEvent(new E.default("change",{bubbles:!0}))},removed:function(a){var b=a.children[0];
(0,c.default)(b).removeClass("checked aui-dropdown2-checked");b.setAttribute("aria-checked",!1);a.dispatchEvent(new E.default("change",{bubbles:!0}))}},v={created:function(a){p.created(a)},removed:function(a){p.removed(a)}},r=function(a){return{fallback:function(b,c){b.children[0].setAttribute(a,c.newValue)},removed:function(b){b.children[0].removeAttribute(a)}}};(0,d.default)("aui-item-link",{template:(0,j.default)('<a role="menuitem" tabindex="-1"><content></content></a>'),attributes:{disabled:p,
interactive:u,hidden:v,href:r("href"),"item-id":r("id"),"for":{created:function(a){var b=a.children[0];b.setAttribute("aria-controls",a.getAttribute("for"));(0,c.default)(b).addClass("aui-dropdown2-sub-trigger")},updated:function(a){a.children[0].setAttribute("aria-controls",a.getAttribute("for"))},removed:function(a){a=a.children[0];a.removeAttribute("aria-controls");(0,c.default)(a).removeClass("aui-dropdown2-sub-trigger")}}}});(0,d.default)("aui-item-checkbox",{template:(0,j.default)('<span role="checkbox" class="aui-dropdown2-checkbox" tabindex="-1"><content></content></span>'),
attributes:{"item-id":r("id"),disabled:p,interactive:u,checked:F,hidden:v}});(0,d.default)("aui-item-radio",{template:(0,j.default)('<span role="radio" class="aui-dropdown2-radio" tabindex="-1"><content></content></span>'),attributes:{"item-id":r("id"),disabled:p,interactive:u,checked:F,hidden:v}});(0,d.default)("aui-section",{template:(0,j.default)('\n        <strong aria-role="presentation" class="aui-dropdown2-heading"></strong>\n        <div role="group">\n            <content></content>\n        </div>\n    '),
attributes:{label:function(a,b){var c=a.children[1];a.children[0].textContent=b.newValue;c.setAttribute("aria-label",b.newValue)}},created:function(a){a.className+=" aui-dropdown2-section";a.setAttribute("role","presentation")}});(0,d.default)("aui-dropdown-menu",{template:(0,j.default)('\n        <div role="application">\n            <content></content>\n        </div>\n    '),created:function(a){a.setAttribute("role","menu");a.className="aui-dropdown2 aui-style-default aui-layer";(0,g.default)(a).set("loading-state",
"unloaded");d.default.init(a)},attributes:{src:{}},prototype:o,events:{"aui-layer-show":function(a){var b="unloaded"===(0,g.default)(a).get("loading-state"),c=(0,g.default)(a).get("hasErrorBeenShown");(b||c)&&A(a);if((0,g.default)(a).get("loading-state")===z)(0,g.default)(a).set("hasErrorBeenShown",!0)}}});(0,d.default)("aui-dropdown2",{type:d.default.type.CLASSNAME,created:D,prototype:o});(0,d.default)("data-aui-dropdown2",{type:d.default.type.ATTRIBUTE,created:D,prototype:o});(0,d.default)("aui-dropdown2-checkbox",
{type:d.default.type.CLASSNAME,created:function(a){var b=x(a);b&&(0,c.default)(a).addClass("checked aui-dropdown2-checked");a.setAttribute("aria-checked",b);a.setAttribute("tabindex","0");(0,t.supportsVoiceOver)()&&a.setAttribute("role","checkbox")},prototype:{isEnabled:function(){return!(null!==this.getAttribute("aria-disabled")&&"true"===this.getAttribute("aria-disabled"))},isChecked:function(){return null!==this.getAttribute("aria-checked")&&"true"===this.getAttribute("aria-checked")},isInteractive:function(){return(0,
c.default)(this).hasClass("aui-dropdown2-interactive")},uncheck:function(){"aui-item-checkbox"===this.parentNode.tagName.toLowerCase()&&this.parentNode.removeAttribute("checked");this.setAttribute("aria-checked","false");(0,c.default)(this).removeClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-uncheck")},check:function(){"aui-item-checkbox"===this.parentNode.tagName.toLowerCase()&&this.parentNode.setAttribute("checked","");this.setAttribute("aria-checked","true");
(0,c.default)(this).addClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-check")}}});(0,d.default)("aui-dropdown2-radio",{type:d.default.type.CLASSNAME,created:function(a){var b=x(a);b&&(0,c.default)(a).addClass("checked aui-dropdown2-checked");a.setAttribute("aria-checked",b);a.setAttribute("tabindex","0");(0,t.supportsVoiceOver)()&&a.setAttribute("role","radio")},prototype:{isEnabled:function(){return!(null!==this.getAttribute("aria-disabled")&&"true"===this.getAttribute("aria-disabled"))},
isChecked:function(){return null!==this.getAttribute("aria-checked")&&"true"===this.getAttribute("aria-checked")},isInteractive:function(){return(0,c.default)(this).hasClass("aui-dropdown2-interactive")},uncheck:function(){"aui-item-radio"===this.parentNode.tagName.toLowerCase()&&this.parentNode.removeAttribute("checked");this.setAttribute("aria-checked","false");(0,c.default)(this).removeClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-uncheck")},check:function(){"aui-item-radio"===
this.parentNode.tagName.toLowerCase()&&this.parentNode.setAttribute("checked","");this.setAttribute("aria-checked","true");(0,c.default)(this).addClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-check")}}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-fancy-file-input-2.0.3-dist-fancy-file-input', location = 'node_modules/fancy-file-input/dist/fancy-file-input.js' */
("undefined"===typeof window?global:window).__22a4d9f2966b7fbb6d0e3d6f80b96c9c=function(){var e={exports:{}},l=e.exports,m={module:e,exports:l,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7},d;d=function(b,a,j){var d=("undefined"===typeof window?global:window).define,c,f,j=[j,a,b].filter(function(a){return"function"===typeof a})[0],a=[a,b,[]].filter(Array.isArray)[0];c=j.apply(null,a.map(function(a){return m[a]}));f=typeof c;"function"===typeof d&&d("string"===
typeof b?b:"__22a4d9f2966b7fbb6d0e3d6f80b96c9c",a,j);"string"===f?c=String(c):"number"===f?c=Number(c):"boolean"===f&&(c=Boolean(c));void 0!==c&&(l=e.exports=c)};d.amd=!0;var g=this,i=function(b){function a(k,h){var c=b(k).data("FancyFileInput");if(c)return c;h=b.extend({},a.defaults,h);this.el=k;this.$el=b(k);this.$label=this.createLabel(h.buttonText);this._addLabelText();this.$clearButton=b("<button>",{text:this.$label.attr("data-ffi-clearButtonText")||h.clearButtonText,"class":"ffi-clear",type:"button",
tabindex:"-1"});this.multipleFileTextPattern=this.$label.attr("data-ffi-multipleFileTextPattern")||h.multipleFileTextPattern;this._eventNamespace=".ffi";this.CLASSES={disabled:"is-disabled",focused:"is-focused",active:"is-active",valid:"is-valid",invalid:"is-invalid"};this[this.isDisabled()?"disable":"enable"]();this.isFocused=!1}var d=/^.*[\\\/]/,e=/\{0\}/gi,c,f=3,g=document.createElement("div"),i=g.getElementsByTagName("i");do g.innerHTML="<\!--[if gt IE "+ ++f+"]><i></i><![endif]--\>";while(i[0]);
c=4<f?f:document.documentMode;a.defaults={buttonText:"Browse\u2026",clearButtonText:"Clear",multipleFileTextPattern:"{0} files"};a.prototype._addLabelText=function(){var a=b('label[for="'+this.el.id+'"]');a.length&&this.$el.attr("aria-label",a.text())};a.prototype.createLabel=function(a){var c=this.$el.parent(".ffi[data-ffi-button-text]");c.length||(c=this.$el.wrap(b("<label>",{"class":"ffi","data-ffi-button-text":a})).parent());return c};a.prototype.isDisabled=function(){return this.$el.is(":disabled")};
a.prototype.formatMultipleFileText=function(a){return this.multipleFileTextPattern.replace(e,a)};a.prototype.bindEvents=function(){this.$el.on("invalid"+this._eventNamespace,b.proxy(this.checkValidity,this)).on("change"+this._eventNamespace,b.proxy(this.change,this)).on("keydown"+this._eventNamespace,b.proxy(this.keydown,this)).on("mousedown"+this._eventNamespace,b.proxy(this.mousedown,this)).on("mouseup"+this._eventNamespace,b.proxy(this.mouseup,this)).on("focus"+this._eventNamespace,b.proxy(this.focus,
this)).on("blur"+this._eventNamespace,b.proxy(this.blur,this));this.$clearButton.on("click"+this._eventNamespace,b.proxy(this.clear,this))};a.prototype.unbindEvents=function(){this.$el.off(this._eventNamespace);this.$clearButton.off(this._eventNamespace)};a.prototype.fireEvent=function(a){this.$el.trigger(a+this._eventNamespace)};a.prototype.enable=function(){this.bindEvents();this.$el.prop("disabled",!1);this.$label.removeClass(this.CLASSES.disabled)};a.prototype.disable=function(){this.unbindEvents();
this.$el.prop("disabled",!0);this.$label.addClass(this.CLASSES.disabled)};a.prototype.clear=function(){this.$el.wrap("<form>").closest("form").get(0).reset();this.$el.unwrap();this.el.value="";this.change();return!1};a.prototype.focus=function(){var a=this;this.$label.addClass(this.CLASSES.focused);c&&!this.isFocused&&(this.isFocused=!0,setTimeout(function(){a.$el.blur();a.$el.focus()},0))};a.prototype.blur=function(){if(!c||!this.isFocused)this.$label.removeClass(this.CLASSES.focused),this.isFocused=
!1};a.prototype.mousedown=function(){this.$label.addClass(this.CLASSES.active)};a.prototype.mouseup=function(){this.$label.removeClass(this.CLASSES.active)};a.prototype.keydown=function(a){var b=a.which;if(8===b||46===b)this.clear(),a.preventDefault();if(c&&9===b){var d=this;this.isFocused=!1;this.$el.prop("disabled",!0);setTimeout(function(){d.$el.prop("disabled",!1).blur()},0)}};a.prototype.checkValidity=function(){if(this.el.required){var a=this.$el.is(":invalid");this.$label.toggleClass(this.CLASSES.invalid,
a).toggleClass(this.CLASSES.valid,!a)}};a.prototype.change=function(){var a,b="";this.checkValidity();a=this.el.multiple&&1<this.el.files.length?this.formatMultipleFileText(this.el.files.length):this.el.value;a.length?(b=a.replace(d,""),this.$clearButton.appendTo(this.$label)):this.$clearButton.detach();this.$el.focus();this.setFieldText(b);this.fireEvent("value-changed")};a.prototype.setFieldText=function(a){a.length?(this.$label.attr("data-ffi-value",a),this.fireEvent("value-added")):(this.$label.removeAttr("data-ffi-value"),
this.fireEvent("value-cleared"))};b.fn.fancyFileInput=function(c){return this.each(function(){var d=new a(this,c);b(this).data("FancyFileInput",d)})};return a};"function"===typeof d&&d.amd?d(["jquery"],function(b){return g.FancyFileInput=i(b)}):"object"===typeof e&&e.exports?e.exports=i(__bd7207540b95ff683caa1d3c0bfcc3d7):g.FancyFileInput=i(g.jQuery);return e.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-fancy-file-input', location = 'src/js/aui/fancy-file-input.js' */
("undefined"===typeof window?global:window).__4573fe1598bcafe466e0889a20eacc79=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});var b=__22a4d9f2966b7fbb6d0e3d6f80b96c9c;a.default=(b&&b.__esModule?b:{"default":b}).default;return a=a["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:hotkeys', location = 'src/js/jquery/jquery.hotkeys.js' */
("undefined"===typeof window?global:window).__9cbbcefe7921e79cef26a868d04e53e6=function(){"use strict";var a=jQuery,c=function(a){this.num=0;this.timer=0<a?a:!1},k=function(h){if(a.isPlainObject(h.data)||a.isArray(h.data)||"string"===typeof h.data){var i=h.handler,g={timer:700,combo:[]},b=h.data;"string"===typeof b?g.combo=[b]:a.isArray(b)?g.combo=b:a.extend(g,b);g.combo=a.map(g.combo,function(a){return a.toLowerCase()});h.index=new c(g.timer);h.handler=function(d){if(!(this!==d.target&&(/textarea|select|input/i.test(d.target.nodeName)||
"true"===a(d.target).prop("contenteditable")))){var e="keypress"!==d.type?a.hotkeys.specialKeys[d.which]:null,b=String.fromCharCode(d.which).toLowerCase(),f="",c={};d.altKey&&"alt"!==e&&(f+="alt+");d.ctrlKey&&"ctrl"!==e&&(f+="ctrl+");d.metaKey&&(!d.ctrlKey&&"meta"!==e)&&(f+="meta+");d.shiftKey&&"shift"!==e&&(f+="shift+");d.metaKey&&"["===b&&(b=null);e&&(c[f+e]=!0);b&&(c[f+b]=!0);/shift+/.test(f)&&(c[f.replace("shift+","")+a.hotkeys.shiftNums[e||b]]=!0);e=h.index;b=g.combo;if(j(b[e.val()],c)){if(e.val()===
b.length-1)return e.reset(),i.apply(this,arguments);e.inc()}else e.reset(),j(b[0],c)&&e.inc()}}}},j=function(a,c){for(var g=a.split(" "),b=0,d=g.length;b<d;b++)if(c[g[b]])return!0;return!1};a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",
103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta",219:"[",221:"]"},keypressKeys:["<",">","?"],shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(a.hotkeys.keypressKeys,function(c,i){a.hotkeys.shiftNums[i]=i});c.prototype.val=
function(){return this.num};c.prototype.inc=function(){this.timer&&(clearTimeout(this.timeout),this.timeout=setTimeout(a.proxy(c.prototype.reset,this),this.timer));this.num++};c.prototype.reset=function(){this.timer&&clearTimeout(this.timeout);this.num=0};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:k}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-event', location = 'src/js/aui/event.js' */
("undefined"===typeof window?global:window).__c3d461933183f6cefe0176c2c75df7c9=function(){function g(a,b,c){try{return"function"===typeof c?(0,f.default)(window).bind(a,b,c):(0,f.default)(window).bind(a,b)}catch(e){d.log("error while binding: "+e.message)}}function h(a,b){try{return(0,f.default)(window).unbind(a,b)}catch(c){d.log("error while unbinding: "+c.message)}}function i(a,b){try{return(0,f.default)(window).trigger(a,b)}catch(c){d.log("error while triggering: "+c.message)}}var c={};"use strict";
Object.defineProperty(c,"__esModule",{value:!0});c.trigger=c.unbind=c.bind=void 0;var a=__bd7207540b95ff683caa1d3c0bfcc3d7,f=a&&a.__esModule?a:{"default":a},d;if((a=__2f5c294b01e66b15309518e39bcb949d)&&a.__esModule)d=a;else{var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b]);e.default=a;d=e}b=(b=__9a668cbde1e182d8e721c23580356df2)&&b.__esModule?b:{"default":b};(0,b.default)("bind",g);(0,b.default)("trigger",i);(0,b.default)("unbind",h);c.bind=g;c.unbind=h;c.trigger=
i;return c}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dialog', location = 'src/js/aui/dialog.js' */
("undefined"===typeof window?global:window).__aa116fc0f3815f1a600215af3b7b5390=function(){function s(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}function q(a){return a&&a.__esModule?a:{"default":a}}function o(a,b,c,g){if("object"!==("undefined"===typeof a?"undefined":x(a)))a={width:a,height:b,id:c},a=d.default.extend({},a,g);var a=d.default.extend({},{width:800,height:600,closeOnOutsideClick:!1,keypressListener:function(a){a.keyCode===
y.default.ESCAPE&&h.is(":visible")&&f.hide()}},a),h=(0,d.default)("<div></div>").addClass("aui-popup");a.id&&h.attr("id",a.id);var j=3E3;(0,d.default)(".aui-dialog").each(function(){var a=(0,d.default)(this);j=a.css("z-index")>j?a.css("z-index"):j});var z=function i(b,c){a.width=b=b||a.width;a.height=c=c||a.height;h.css({marginTop:-Math.round(c/2)+"px",marginLeft:-Math.round(b/2)+"px",width:b,height:c,"z-index":parseInt(j,10)+2});return i}(a.width,a.height);(0,d.default)("body").append(h);h.hide();
(0,A.enable)(h);var e=(0,d.default)(".aui-blanket"),p=function(a,b){var c=(0,d.default)(a,b);return c.length?(c.focus(),!0):!1},f={changeSize:function(b,c){(b&&b!=a.width||c&&c!=a.height)&&z(b,c);this.show()},show:function(){var b=function(){(0,d.default)(document).off("keydown",a.keypressListener).on("keydown",a.keypressListener);(0,t.dim)();e=(0,d.default)(".aui-blanket");0!==e.length&&a.closeOnOutsideClick&&e.click(function(){h.is(":visible")&&f.hide()});h.show();o.current=this;var b=h;if(0===
(0,d.default)(".dialog-page-body",b).find(":focus").length)if(a.focusSelector)p(a.focusSelector,b);else if(!p(":input:visible:enabled:first",(0,d.default)(".dialog-page-body",b)))if(!p(":input:visible:enabled:first",(0,d.default)(".dialog-button-panel",b)))p(":input:visible:enabled:first",(0,d.default)(".dialog-page-menu",b));(0,d.default)(document).trigger("showLayer",["popup",this])};b.call(this);this.show=b},hide:function(){(0,d.default)(document).unbind("keydown",a.keypressListener);e.unbind();
this.element.hide();if(0===(0,d.default)(".aui-dialog:visible").length)(0,t.undim)();var b=document.activeElement;this.element.has(b).length&&b.blur();(0,d.default)(document).trigger("hideLayer",["popup",this]);o.current=null;this.enable()},element:h,remove:function(){h.remove();this.element=null},disable:function(){this.disabled||(this.popupBlanket=(0,d.default)("<div class='dialog-blanket'> </div>").css({height:h.height(),width:h.width()}),h.append(this.popupBlanket),this.disabled=!0)},enable:function(){this.disabled&&
(this.disabled=!1,this.popupBlanket.remove(),this.popupBlanket=null)}};return f}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.popup=k.Dialog=void 0;var x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=q(__bd7207540b95ff683caa1d3c0bfcc3d7),y=q(__3f6f6650e96d80fefaaf71feed8f822b),B=s(__2f5c294b01e66b15309518e39bcb949d),
u=s(__c88c0dc6258c37804917fb6a0e4092fa),r=__c3d461933183f6cefe0176c2c75df7c9,t=__7f21a71921a14c7b5b83c94ec80f4db5,A=__373dfbf532dc7dad0a2fbd134ab1e791,v=q(__9a668cbde1e182d8e721c23580356df2),m,n=function(a,b,c,g){a.buttonpanel||a.addButtonPanel();this.page=a;this.onclick=c;this._onclick=function(b){return!0===c.call(this,a.dialog,a,b)};this.item=(0,d.default)("<button></button>").html(b).addClass("button-panel-button");g&&this.item.addClass(g);"function"===typeof c&&this.item.click(this._onclick);
a.buttonpanel.append(this.item);this.id=a.button.length;a.button[this.id]=this},C=function(a,b,c,g,h){a.buttonpanel||a.addButtonPanel();h||(h="#");this.page=a;this.onclick=c;this._onclick=function(b){return!0===c.call(this,a.dialog,a,b)};this.item=(0,d.default)("<a></a>").html(b).attr("href",h).addClass("button-panel-link");g&&this.item.addClass(g);"function"===typeof c&&this.item.click(this._onclick);a.buttonpanel.append(this.item);this.id=a.button.length;a.button[this.id]=this};m=function(a,b){var c=
"left"==a?-1:1;return function(a){var d=this.page[b];if(this.id!=(1==c?d.length-1:0)){c*=a||1;d[this.id+c].item[0>c?"before":"after"](this.item);d.splice(this.id,1);d.splice(this.id+c,0,this);for(var a=0,j=d.length;a<j;a++)"panel"==b&&this.page.curtab==d[a].id&&(this.page.curtab=a),d[a].id=a}return this}};var w=function(a){return function(){this.page[a].splice(this.id,1);for(var b=0,c=this.page[a].length;b<c;b++)this.page[a][b].id=b;this.item.remove()}},e=function(a,b,c){var g={};+a||(g=Object(a),
a=g.width,b=g.height,c=g.id);this.height=b||480;this.width=a||640;this.id=c;g=d.default.extend({},g,{width:this.width,height:this.height,id:this.id});this.popup=o(g);this.popup.element.addClass("aui-dialog");this.page=[];this.curpage=0;new f(this)};n.prototype.moveUp=n.prototype.moveLeft=m("left","button");n.prototype.moveDown=n.prototype.moveRight=m("right","button");n.prototype.remove=w("button");n.prototype.html=function(a){return this.item.html(a)};n.prototype.onclick=function(a){var b=this;if("undefined"===
typeof a)return this.onclick;this.item.unbind("click",this._onclick);this._onclick=function(c){return!0===a.call(this,b.page.dialog,b.page,c)};"function"===typeof a&&this.item.click(this._onclick)};var l=function(a,b,c,g,e){c instanceof d.default||(c=(0,d.default)(c));this.dialog=a.dialog;this.page=a;this.id=a.panel.length;this.button=(0,d.default)("<button></button>").html(b).addClass("item-button");e&&(this.button[0].id=e);this.item=(0,d.default)("<li></li>").append(this.button).addClass("page-menu-item");
this.body=(0,d.default)("<div></div>").append(c).addClass("dialog-panel-body").css("height",a.dialog.height+"px");this.padding=20;g&&this.body.addClass(g);var b=a.panel.length,j=this;a.menu.append(this.item);a.body.append(this.body);a.panel[b]=this;c=function(){var b;if(a.curtab+1){b=a.panel[a.curtab];b.body.hide();b.item.removeClass("selected");typeof b.onblur==="function"&&b.onblur()}a.curtab=j.id;j.body.show();j.item.addClass("selected");typeof j.onselect==="function"&&j.onselect();typeof a.ontabchange===
"function"&&a.ontabchange(j,b)};this.button.click?this.button.click(c):(B.log("atlassian-dialog:Panel:constructor - this.button.click false"),this.button.onclick=c);c();0==b?a.menu.css("display","none"):a.menu.show()};l.prototype.select=function(){this.button.click()};l.prototype.moveUp=l.prototype.moveLeft=m("left","panel");l.prototype.moveDown=l.prototype.moveRight=m("right","panel");l.prototype.remove=w("panel");l.prototype.html=function(a){return a?(this.body.html(a),this):this.body.html()};l.prototype.setPadding=
function(a){isNaN(+a)||(this.body.css("padding",+a),this.padding=+a,this.page.recalcSize());return this};var f=function(a,b){this.dialog=a;this.id=a.page.length;this.element=(0,d.default)("<div></div>").addClass("dialog-components");this.body=(0,d.default)("<div></div>").addClass("dialog-page-body");this.menu=(0,d.default)("<ul></ul>").addClass("dialog-page-menu").css("height",a.height+"px");this.body.append(this.menu);this.curtab;this.panel=[];this.button=[];b&&this.body.addClass(b);a.popup.element.append(this.element.append(this.menu).append(this.body));
a.page[a.page.length]=this};f.prototype.recalcSize=function(){for(var a=this.header?62:0,b=this.buttonpanel?52:0,c=this.panel.length;c--;){var d=this.dialog.height-a-b;this.panel[c].body.css("height",d);this.menu.css("height",d)}};f.prototype.addButtonPanel=function(){this.buttonpanel=(0,d.default)("<div></div>").addClass("dialog-button-panel");this.element.append(this.buttonpanel)};f.prototype.addPanel=function(a,b,c,d){new l(this,a,b,c,d);this.recalcSize();return this};f.prototype.addHeader=function(a,
b){this.header&&this.header.remove();this.header=(0,d.default)("<h2></h2>").text(a||"").addClass("dialog-title");b&&this.header.addClass(b);this.element.prepend(this.header);this.recalcSize();return this};f.prototype.addButton=function(a,b,c){new n(this,a,b,c);this.recalcSize();return this};f.prototype.addLink=function(a,b,c,d){new C(this,a,b,c,d);this.recalcSize();return this};f.prototype.gotoPanel=function(a){this.panel[a.id||a].select()};f.prototype.getCurrentPanel=function(){return this.panel[this.curtab]};
f.prototype.hide=function(){this.element.hide()};f.prototype.show=function(){this.element.show()};f.prototype.remove=function(){this.element.remove()};e.prototype.addHeader=function(a,b){this.page[this.curpage].addHeader(a,b);return this};e.prototype.addButton=function(a,b,c){this.page[this.curpage].addButton(a,b,c);return this};e.prototype.addLink=function(a,b,c,d){this.page[this.curpage].addLink(a,b,c,d);return this};e.prototype.addSubmit=function(a,b){this.page[this.curpage].addButton(a,b,"button-panel-submit-button");
return this};e.prototype.addCancel=function(a,b){this.page[this.curpage].addLink(a,b,"button-panel-cancel-link");return this};e.prototype.addButtonPanel=function(){this.page[this.curpage].addButtonPanel();return this};e.prototype.addPanel=function(a,b,c,d){this.page[this.curpage].addPanel(a,b,c,d);return this};e.prototype.addPage=function(a){new f(this,a);this.page[this.curpage].hide();this.curpage=this.page.length-1;return this};e.prototype.nextPage=function(){this.page[this.curpage++].hide();this.curpage>=
this.page.length&&(this.curpage=0);this.page[this.curpage].show();return this};e.prototype.prevPage=function(){this.page[this.curpage--].hide();0>this.curpage&&(this.curpage=this.page.length-1);this.page[this.curpage].show();return this};e.prototype.gotoPage=function(a){this.page[this.curpage].hide();this.curpage=a;0>this.curpage?this.curpage=this.page.length-1:this.curpage>=this.page.length&&(this.curpage=0);this.page[this.curpage].show();return this};e.prototype.getPanel=function(a,b){var c=null==
b?this.curpage:a;null==b&&(b=a);return this.page[c].panel[b]};e.prototype.getPage=function(a){return this.page[a]};e.prototype.getCurrentPanel=function(){return this.page[this.curpage].getCurrentPanel()};e.prototype.gotoPanel=function(a,b){null!=b&&this.gotoPage(a.id||a);this.page[this.curpage].gotoPanel("undefined"===typeof b?a:b)};e.prototype.show=function(){this.popup.show();(0,r.trigger)("show.dialog",{dialog:this});return this};e.prototype.hide=function(){this.popup.hide();(0,r.trigger)("hide.dialog",
{dialog:this});return this};e.prototype.remove=function(){this.popup.hide();this.popup.remove();(0,r.trigger)("remove.dialog",{dialog:this})};e.prototype.disable=function(){this.popup.disable();return this};e.prototype.enable=function(){this.popup.enable();return this};e.prototype.get=function(a){var b=[],c=this;(a+"").replace(RegExp('(?:^|,)\\s*(?:(page|panel|button|header)(?:#([^"][^ ]*|"[^"]*")|:(\\d+))?|#([^"][^ ]*|"[^"]*"))(?:\\s+(?:(page|panel|button|header)(?:#([^"][^ ]*|"[^"]*")|:(\\d+))?|#([^"][^ ]*|"[^"]*")))?\\s*(?=,|$)',
"ig"),function(a,d,e,g,h,f,i,l,k){d=d&&d.toLowerCase();a=[];"page"==d&&c.page[g]?(a.push(c.page[g]),d=(d=f)&&d.toLowerCase(),e=i,g=l,h=k):a=c.page;e=e&&(e+"").replace(/"/g,"");i&&(i+"").replace(/"/g,"");h=h&&(h+"").replace(/"/g,"");k&&(k+"").replace(/"/g,"");if(d||h)for(f=a.length;f--;){if(h||"panel"==d&&(e||!e&&null==g))for(i=a[f].panel.length;i--;)(a[f].panel[i].button.html()==h||a[f].panel[i].button.html()==e||"panel"==d&&!e&&null==g)&&b.push(a[f].panel[i]);if(h||"button"==d&&(e||!e&&null==g))for(i=
a[f].button.length;i--;)(a[f].button[i].item.html()==h||a[f].button[i].item.html()==e||"button"==d&&!e&&null==g)&&b.push(a[f].button[i]);a[f][d]&&a[f][d][g]&&b.push(a[f][d][g]);"header"==d&&a[f].header&&b.push(a[f].header)}else b=b.concat(a)});for(var d={length:b.length},a=b.length;a--;){d[a]=b[a];for(var e in b[a])e in d||function(a){d[a]=function(){for(var b=this.length;b--;)"function"===typeof this[b][a]&&this[b][a].apply(this[b],arguments)}}(e)}return d};e.prototype.updateHeight=function(){for(var a=
0,b=(0,d.default)(window).height()-62-52-100,c=0;this.getPanel(c);c++)this.getPanel(c).body.css({height:"auto",display:"block"}).outerHeight()>a&&(a=Math.min(b,this.getPanel(c).body.outerHeight())),c!==this.page[this.curpage].curtab&&this.getPanel(c).body.css({display:"none"});for(c=0;this.getPanel(c);c++)this.getPanel(c).body.css({height:a||this.height});this.page[0].menu.height(a);this.height=a+62+52+1;this.popup.changeSize(void 0,this.height)};e.prototype.isMaximised=function(){return this.popup.element.outerHeight()>=
(0,d.default)(window).height()-100};e.prototype.getCurPanel=function(){return this.getPanel(this.page[this.curpage].curtab)};e.prototype.getCurPanelButton=function(){return this.getCurPanel().button};k.Dialog=m=u.construct(e,"Dialog constructor",{alternativeName:"Dialog2"});k.popup=o=u.construct(o,"Dialog popup constructor",{alternatveName:"Dialog2"});(0,v.default)("Dialog",m);(0,v.default)("popup",o);k.Dialog=m;k.popup=o;return k}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-css.escape-1.5.0-css-escape', location = 'node_modules/css.escape/css.escape.js' */
("undefined"===typeof window?global:window).__312b790bc580bc1fc32e6982982466f9=function(){var f={exports:{}},i=f.exports,k={module:f,exports:i},c;c=function(d,g,e){var c=("undefined"===typeof window?global:window).define,b,a,e=[e,g,d].filter(function(a){return"function"===typeof a})[0],g=[g,d,[]].filter(Array.isArray)[0];b=e.apply(null,g.map(function(a){return k[a]}));a=typeof b;"function"===typeof c&&c("string"===typeof d?d:"__312b790bc580bc1fc32e6982982466f9",g,e);"string"===a?b=String(b):"number"===
a?b=Number(b):"boolean"===a&&(b=Boolean(b));void 0!==b&&(i=f.exports=b)};c.amd=!0;var h="undefined"!=typeof global?global:this,j=function(d){if(d.CSS&&d.CSS.escape)return d.CSS.escape;var c=function(e){for(var e=String(e),d=e.length,b=-1,a,c="",f=e.charCodeAt(0);++b<d;)a=e.charCodeAt(b),c=0==a?c+"\ufffd":1<=a&&31>=a||127==a||0==b&&48<=a&&57>=a||1==b&&48<=a&&57>=a&&45==f?c+("\\"+a.toString(16)+" "):0==b&&1==d&&45==a?c+("\\"+e.charAt(b)):128<=a||45==a||95==a||48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=
a?c+e.charAt(b):c+("\\"+e.charAt(b));return c};d.CSS||(d.CSS={});return d.CSS.escape=c};"object"==typeof i?f.exports=j(h):"function"==typeof c&&c.amd?c([],j.bind(h,h)):j(h);return f.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-inline-dialog', location = 'src/js/aui/inline-dialog.js' */
("undefined"===typeof window?global:window).__5546c99acc57dc40d4439021a21250a8=function(){function B(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d]);c.default=b;return c}function u(b){return b&&b.__esModule?b:{"default":b}}function w(b,c,l,a){a=a||[];a.hasOwnProperty("onTop")&&(E(),a.onTop&&void 0===a.gravity&&(a.gravity="s"));if("undefined"===typeof c&&(c=String(Math.random()).replace(".",""),(0,d.default)("#inline-dialog-"+
c+", #arrow-"+c+", #inline-dialog-shim-"+c).length))throw"GENERATED_IDENTIFIER_NOT_UNIQUE";var g=(0,F.default)(c),e=d.default.extend(!1,w.opts,a);"w"===e.gravity&&(e.offsetX=void 0===a.offsetX?10:a.offsetX,e.offsetY=void 0===a.offsetY?0:a.offsetY);var i,j,h,k=!1,o=!1,q=!1,m,t,f=(0,d.default)('<div id="inline-dialog-'+c+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+c+'" class="aui-inline-dialog-arrow arrow aui-css-arrow"></div></div>'),n=(0,d.default)("#arrow-"+
g,f),p=f.find(".contents");e.displayShadow||p.addClass("aui-inline-dialog-no-shadow");e.autoWidth?p.addClass("aui-inline-dialog-auto-width"):p.width(e.width);p.on({mouseenter:function(){clearTimeout(j);f.unbind("mouseenter")},mouseleave:function(){r()}});var s=function(){i||(i={popup:f,hide:function(){r(0)},id:c,show:function(){x()},persistent:e.persistent?true:false,reset:function(){var a=(0,d.default)(window).height(),a=Math.round(a*0.75);f.children(".aui-inline-dialog-contents").css("max-height",
a);a=e.calculatePositions(f,t,m,e);if(a.hasOwnProperty("displayAbove")){G();a.gravity=a.displayAbove?"s":"n"}f.css(a.popupCss);n.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");a.gravity==="s"&&!n.hasClass("aui-bottom-arrow")?n.addClass("aui-bottom-arrow"):a.gravity==="w"?n.addClass("aui-left-arrow"):a.gravity==="e"&&n.addClass("aui-right-arrow");n.css(a.arrowCss);f.fadeIn(e.fadeTime,function(){});if((0,H.needsLayeringShim)()){a=(0,d.default)("#inline-dialog-shim-"+g);a.length||(0,
d.default)(f).prepend((0,d.default)('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+c+'" frameBorder="0" src="javascript:false;"></iframe>'));a.css({width:p.outerWidth(),height:p.outerHeight()})}}});return i},x=function(){f.is(":visible")||(h=setTimeout(function(){if(q&&o){e.addActiveClass&&(0,d.default)(b).addClass("active");k=true;if(!e.persistent){if(!v){(0,d.default)("body").bind("click."+A,function(a){(0,d.default)(a.target).closest("#inline-dialog-"+g+" .contents").length===0&&
r(0)});v=true}(0,d.default)(document).on("keydown",B)}w.current=s();(0,d.default)(document).trigger("showLayer",["inlineDialog",s()]);s().reset()}},e.showDelay))},r=function(a){if(!(typeof a==="undefined"&&e.persistent)&&typeof f.get(0)._datePickerPopup==="undefined"){o=false;if(k&&e.preHideCallback.call(f[0].popup)){a=a==null?e.hideDelay:a;clearTimeout(j);clearTimeout(h);a!=null&&(j=setTimeout(function(){v&&(0,d.default)("body").unbind("click."+A);v=false;(0,d.default)(document).off("keydown",B);
e.addActiveClass&&(0,d.default)(b).removeClass("active");f.fadeOut(e.fadeTime,function(){e.hideCallback.call(f[0].popup)});o=k=false;(0,d.default)(document).trigger("hideLayer",["inlineDialog",s()]);w.current=null;if(!e.cacheContent)u=q=false},a))}}},z=function(a,b){var g=(0,d.default)(b);e.upfrontCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){x()}});f.each(function(){typeof this.popup!=="undefined"&&this.popup.hide()});e.closeOthers&&(0,d.default)(".aui-inline-dialog").each(function(){!this.popup.persistent&&
this.popup.hide()});t={target:g};m=a?{x:a.pageX,y:a.pageY}:{x:g.offset().left,y:g.offset().top};k||clearTimeout(h);o=true;g=function(){u=false;q=true;e.initCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){x()}});x()};if(!u){u=true;d.default.isFunction(l)?l(p,b,g):d.default.get(l,function(a,b,d){p.html(e.responseHandler(a,b,d));q=true;e.initCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){x()}});x()})}clearTimeout(j);k||x();return false};f[0].popup=s();var u=!1,y=
!1,C=function(){if(!y){(0,d.default)(e.container).append(f);y=true}},a=(0,d.default)(b);if(e.onHover)if(e.useLiveEvents)if(a.selector)(0,d.default)(document).on("mouseenter",a.selector,function(a){C();z(a,this)}).on("mouseleave",a.selector,function(){r()});else D.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.");else a.on({mouseenter:function(a){C();z(a,this)},mouseleave:function(){r()}});else if(!e.noBind)if(e.useLiveEvents)if(a.selector)(0,
d.default)(document).on("click",a.selector,function(a){C();k&&e.closeOnTriggerClick?f.hide():z(a,this);return false}).on("mouseleave",a.selector,function(){r()});else D.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.");else a.on("click",function(a){C();k&&e.closeOnTriggerClick?f.hide():z(a,this);return false}).on("mouseleave",function(){r()});var v=!1,A=c+".inline-dialog-check",B=function(a){a.keyCode===I.default.ESCAPE&&r(0)};f.show=
function(a,c){a&&a.stopPropagation();C();e.noBind&&(!b||!b.length)?z(a,c===void 0?a.target:c):z(a,b)};f.hide=function(){r(0)};f.refresh=function(){k&&s().reset()};f.getOptions=function(){return e};return f}function y(b){var b=(0,d.default)(b),c=d.default.extend({left:0,top:0},b.offset());return{left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()}}function J(b,c,l,a){var g,e,i,j,h,k,o,q,m=d.default.isFunction(a.offsetX)?a.offsetX(b,c,l,a):a.offsetX,t=d.default.isFunction(a.offsetY)?a.offsetY(b,
c,l,a):a.offsetY;d.default.isFunction(a.arrowOffsetX)&&a.arrowOffsetX(b,c,l,a);l=d.default.isFunction(a.arrowOffsetY)?a.arrowOffsetY(b,c,l,a):a.arrowOffsetY;h="body"!==a.container.toLowerCase();i=(0,d.default)(a.container);a=h?(0,d.default)(a.container).parent():(0,d.default)(window);j=h?i.offset():{left:0,top:0};h&&a.offset();g=c.target;h=g.offset();e=g[0].getBBox&&g[0].getBBox();c=a.scrollTop();q=a.scrollLeft();a.width();a=a.height();o=i.width();i.height();i=h.top-j.top;j=h.left-j.left;h=e?e.width:
g.outerWidth();k=e?e.height:g.outerHeight();g=b.width();e=b.height();var f=10,n=b.find(".arrow").outerHeight(),p=i-c,s=j-q,b=Math.floor(k/2);q=Math.floor(e/2);k=Math.floor(n/2);o=!(o-s-h-m-f>=g)&&s-m-f>=g?"e":"w";s=p+b-k;n=a-s-n;f=Math.min(f,s-5);f=Math.min(f,n-5);n=p+b;p=Math.max(n-f,0);n=Math.max(a-n-f,0);q-t>p?(m={top:c+f,left:"w"===o?j+h+m:j-g-m},t={top:i+b-(m.top+k)}):q+t>n?(m={top:c+a-e-f,left:"w"===o?j+h+m:j-g-m},t={top:i+b-(m.top+k)}):(m={top:i+b-q+t,left:"w"===o?j+h+m:j-g-m},t={top:q-k+l});
return{gravity:o,popupCss:m,arrowCss:t}}function K(b,c,l,a){var g=d.default.isFunction(a.offsetX)?a.offsetX(b,c,l,a):a.offsetX,e=d.default.isFunction(a.offsetY)?a.offsetY(b,c,l,a):a.offsetY,i=d.default.isFunction(a.arrowOffsetX)?a.arrowOffsetX(b,c,l,a):a.arrowOffsetX,j=y(window),h=y(c.target),c=y(b),b=y(b.find(".aui-inline-dialog-arrow")),k=h.left+h.width/2,o=(window.pageYOffset||document.documentElement.scrollTop)+j.height;c.top=h.top+h.height+~~e;c.left=h.left+~~g;g=j.width-(c.left+c.width+10);
b.left=k-c.left+~~i;b.top=-(b.height/2);i=h.top>c.height;if(i=!(c.top+c.height<o)&&i||i&&"s"===a.gravity)c.top=h.top-c.height-b.height/2,b.top=c.height;a.isRelativeToMouse?0>g?(c.right=10,c.left="auto",b.left=l.x-(j.width-c.width)):(c.left=l.x-20,b.left=l.x-c.left):0>g?(c.right=10,c.left="auto",l=j.width-c.right-c.width,b.right="auto",b.left=k-l-b.width/2):c.width<=h.width/2&&(b.left=c.width/2,c.left=k-c.width/2);return{gravity:i?"s":"n",displayAbove:i,popupCss:{left:c.left,top:c.top,right:c.right},
arrowCss:{left:b.left,top:b.top,right:b.right}}}var v={};Object.defineProperty(v,"__esModule",{value:!0});var d=u(__bd7207540b95ff683caa1d3c0bfcc3d7),H=__02837eb0ab28736e09825f2207c8fe9b,A=B(__c88c0dc6258c37804917fb6a0e4092fa),D=B(__2f5c294b01e66b15309518e39bcb949d),L=u(__9a668cbde1e182d8e721c23580356df2),I=u(__3f6f6650e96d80fefaaf71feed8f822b),F=u(__312b790bc580bc1fc32e6982982466f9);w.opts={onTop:!1,responseHandler:function(b){return b},closeOthers:!0,isRelativeToMouse:!1,addActiveClass:!0,onHover:!1,
useLiveEvents:!1,noBind:!1,fadeTime:100,persistent:!1,hideDelay:1E4,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:!0,displayShadow:!0,autoWidth:!1,gravity:"n",closeOnTriggerClick:!1,preHideCallback:function(){return!0},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(b,c,d,a){a=a||{};return("w"===a.gravity?J:K)(b,c,d,a)}};var w=A.construct(w,"Inline dialog constructor",{alternativeName:"inline dialog 2"}),
G=A.getMessageLogger("displayAbove","[remove version]",{alternativeName:"gravity",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2197."}),E=A.getMessageLogger("onTop","[remove version]",{alternativeName:"gravity",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2197."});(0,L.default)("InlineDialog",w);v.default=w;return v=v["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-template', location = 'src/js/aui/template.js' */
("undefined"===typeof window?global:window).__c4f1078a82b494cc09b37e0114acf4c9=function(){function i(b){return b&&b.__esModule?b:{"default":b}}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var g=i(__bd7207540b95ff683caa1d3c0bfcc3d7),m=i(__75c0ba5c1d5da818c39f0ae31d9f5724),n=i(__9a668cbde1e182d8e721c23580356df2),o=g.default,k=/\{([^\}]+)\}/g,p=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,l=function(b,a,d,f){var c=d;a.replace(p,function(b,a,d,e,g){a=a||e;c&&(a+
":html"in c?(c=c[a+":html"],f=!0):a in c&&(c=c[a]),g&&"function"===typeof c&&(c=c()))});if(null==c||c===d)c=b;c=String(c);return c=f?e.parseHtml(c):e.escape(c)},q=function(b){this.template=this.template.replace(k,function(a,d){return l(a,d,b,!0)});return this},r=function(b){this.template=this.template.replace(k,function(a,d){return l(a,d,b)});return this},s=function(){return this.template},e=function(b){function a(){return a.template}a.template=String(b);a.toString=a.valueOf=s;a.fill=r;a.fillHtml=
q;return a},h={},j=[];e.load=function(b){b=String(b);if(!h.hasOwnProperty(b)){1E3<=j.length&&delete h[j.shift()];j.push(b);var a=b,d,e=b;d=o("script").filter(function(){return this.getAttribute("title")===e});h[a]=d[0].text}return this(h[b])};e.escape=m.default;e.parseHtml=function(b){var a=document.createElement("div");a.innerHTML=b;b=a.querySelectorAll("script");Array.prototype.forEach.call(b,function(a){a.parentElement.removeChild(a)});return a.innerHTML};g=e;(0,n.default)("template",g);f.default=
g;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-messages', location = 'src/js/aui/messages.js' */
("undefined"===typeof window?global:window).__fe3af5ad0f8430f8b84d8607ffb6b96f=function(){function n(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b]);e.default=a;return e}function i(a){return a&&a.__esModule?a:{"default":a}}function f(a){d[a]=function(e,b){b||(b=e,e="#aui-message-bar");b.closeable=null!==b.closeable&&!1!==b.closeable;b.shadowed=null!==b.shadowed&&!1!==b.shadowed;var h=(b.title||"").toString().trim()?this.template:
this.templateAlt,c=b,h=(0,g.default)((0,q.default)(h).fill({type:a,closeable:c.closeable?"closeable":"",shadowed:c.shadowed?"shadowed":"",fadeout:c.fadeout?"fadeout":"",title:c.title||"","body:html":c.body||""}).toString());c.id&&(/[#\'\"\.\s]/g.test(c.id)?r.warn("Messages error: ID rejected, must not include spaces, hashes, dots or quotes."):h.attr("id",c.id));c=e;"prepend"===b.insert?h.prependTo(c):h.appendTo(c);b.closeable&&l(h);b.fadeout&&m(h,b.delay,b.duration);return h}}function l(a){(0,g.default)(a||
"div.aui-message.closeable").each(function(){var a=(0,g.default)(this),b=a.find(".aui-icon.icon-close"),b=0<b.length?b.first():(0,g.default)('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');a.addClass("closeable");a.append(b);a.unbind("click.aui-message").unbind("keydown.aui-message");a.on("click.aui-message",".aui-icon.icon-close",function(a){(0,g.default)(a.target).closest(".aui-message").closeMessage()}).on("keydown.aui-message",".aui-icon.icon-close",function(a){if(a.which===
o.default.ENTER||a.which===o.default.SPACE)(0,g.default)(a.target).closest(".aui-message").closeMessage(),a.preventDefault()})})}function m(a,e,b){e="undefined"!==typeof e?e:s;b="undefined"!==typeof b?b:t;(0,g.default)(a||"div.aui-message.fadeout").each(function(){function a(){c.stop(!0,!1).delay(e).fadeOut(b,function(){c.closeMessage()})}var c=(0,g.default)(this),d=!1,f=!1;c.focusin(function(){d=!0;c.stop(!0,!1).fadeTo(p,1)}).focusout(function(){d=!1;!d&&!f&&a()}).hover(function(){f=!0;c.stop(!0,
!1).fadeTo(p,1)},function(){f=!1;!d&&!f&&a()});a()})}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});var g=i(__bd7207540b95ff683caa1d3c0bfcc3d7),j=n(__c88c0dc6258c37804917fb6a0e4092fa),r=n(__2f5c294b01e66b15309518e39bcb949d),u=i(__9a668cbde1e182d8e721c23580356df2),o=i(__3f6f6650e96d80fefaaf71feed8f822b),v=i(__7acfe7fd38bbf8b5bf76cc953770b033),q=i(__c4f1078a82b494cc09b37e0114acf4c9),t=500,s=5E3,p=100,d={setup:function(){l();m()},makeCloseable:l,makeFadeout:m,template:'<div class="aui-message aui-message-{type} {closeable} {shadowed} {fadeout}"><p class="title"><strong>{title}</strong></p>{body}<\!-- .aui-message --\></div>',
templateAlt:'<div class="aui-message aui-message-{type} {closeable} {shadowed} {fadeout}">{body}<\!-- .aui-message --\></div>',createMessage:f};g.default.fn.closeMessage=function(){var a=(0,g.default)(this);a.hasClass("aui-message")&&a.hasClass("closeable")&&(a.stop(!0),a.trigger("messageClose",[this]),a.remove(),(0,g.default)(document).trigger("aui-message-close",[this]))};f("generic");f("error");f("warning");f("info");f("success");f("hint");(0,v.default)("aui-message",{created:function(a){var e=
a.innerHTML,b=a.getAttribute("type")||"info";a.innerHTML="";d[b](a,{body:e,closeable:a.getAttribute("closeable"),delay:a.getAttribute("delay"),duration:a.getAttribute("duration"),fadeout:a.getAttribute("fadeout"),title:a.getAttribute("title")})}});(0,g.default)(function(){d.setup()});j.prop(d,"makeCloseable",{extraInfo:'Use the "closeable" option in the constructor instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html'});j.prop(d,"createMessage",{extraInfo:"Use the provided convenience methods instead e.g. messages.info(). Docs: https://docs.atlassian.com/aui/latest/docs/messages.html"});
j.prop(d,"makeFadeout",{extraInfo:'Use the "fadeout" option in the constructor instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html'});j.prop(d,"generic",{extraInfo:"use the messages.info() method instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html"});j.prop(d,"hint",{extraInfo:"use the messages.info() method instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html"});(0,u.default)("messages",d);k.default=d;return k=k["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-tabs', location = 'src/js/aui/tabs.js' */
("undefined"===typeof window?global:window).__456d95c70c9c70591d123f9806734140=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function u(a){a=(0,e.default)(a);if(!a.hasClass("aui-tabs-responsive-trigger")){var b=(0,e.default)(a.attr("href").match(A)[0]);b.addClass("active-pane").attr("aria-hidden","false").siblings(".tabs-pane").removeClass("active-pane").attr("aria-hidden","true");var c=a.parents(".aui-tabs").find(".aui-tabs-responsive-trigger-item a").attr("aria-controls"),c=(0,
e.default)(document).find("#"+c);c.find("li a").attr("aria-checked",!1).removeClass("checked aui-dropdown2-checked");c.find("li").removeClass("active-tab");a.parent("li.menu-item").addClass("active-tab").siblings(".menu-item").removeClass("active-tab");a.hasClass("aui-tabs-responsive-item")&&(c=b.parent(".aui-tabs").find("li.menu-item:not(.aui-tabs-responsive-trigger-item)"),c.removeClass("active-tab"),c.find("a").removeClass("checked").removeAttr("aria-checked"));a.hasClass("aui-tabs-responsive-item")&&
b.parent(".aui-tabs").find("li.menu-item.aui-tabs-responsive-trigger-item").addClass("active-tab");a.closest(".tabs-menu").find("a").attr("aria-selected","false");a.attr("aria-selected","true");a.trigger("tabSelect",{tab:a,pane:b})}}function v(a){return void 0!==a.attr("data-aui-persist")&&"false"!==a.attr("data-aui-persist")}function w(a){var b=a.attr("id"),a=a.attr("data-aui-persist");return B+(b?b:"")+(a&&"true"!==a?"-"+a:"")}function x(a){m.change((0,e.default)(a.target).closest("a"));a&&a.preventDefault()}
function y(a){a.forEach(function(a,c){var d=(0,e.default)(a),g=d.find(".tabs-menu").first(),f=g.find("li:not(.aui-tabs-responsive-trigger-item)"),h=g.find(".aui-tabs-responsive-trigger").parent(),o=h.find("a"),k=o.attr("aria-controls"),k=(0,e.default)(document).find("#"+k).attr("aria-checked",!1),i=0<k.length,j=l.totalTabsWidth(f,k)>d.outerWidth();!i&&j&&(h=l.createResponsiveDropdownTrigger(g,c),k=l.createResponsiveDropdown(d,c));o.attr("aria-controls","aui-tabs-responsive-dropdown-"+c);o.attr("id",
"aui-tabs-responsive-trigger-"+c);o.attr("href","aui-tabs-responsive-trigger-"+c);k.attr("id","aui-tabs-responsive-dropdown-"+c);j&&(f=l.moveVisibleTabs(f.toArray(),d,h),f=l.totalVisibleTabWidth(f),d=d.outerWidth()-f-h.outerWidth(!0),0<d&&(f=k.find("li"),l.moveInvisibleTabs(f.toArray(),d,h)),k.on("click","a",x),g.is(":visible")&&g.hide().show());i&&!j&&(k.find("li").each(function(){l.moveTabOutOfDropdown((0,e.default)(this),h)}),l.removeResponsiveDropdown(k,h))})}function z(a){var b=(0,e.default)(a);
a.setAttribute("role","application");if(!b.data("aui-tab-events-bound")){var c=b.children("ul.tabs-menu");c.attr("role","tablist");c.children("li").attr("role","presentation");c.find("> .menu-item a").each(function(){var a=(0,e.default)(this),b=a.attr("href");(0,C.default)(a);a.attr("role","tab");(0,e.default)(b).attr("aria-labelledby",a.attr("id"));a.parent().hasClass("active-tab")?a.attr("aria-selected","true"):a.attr("aria-selected","false")});c.on("click","a",x);b.data("aui-tab-events-bound",
!0);[].slice.call(a.querySelectorAll(".tabs-pane")).forEach(D)}}function D(a){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",(0,e.default)(a).hasClass("active-pane")?"false":"true")}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});__2b1734744f1decec6fe4109762d4ff9c;var q;var i=__2f5c294b01e66b15309518e39bcb949d;if(i&&i.__esModule)q=i;else{var t={};if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);t.default=i;q=t}var E=j(__797d10010c51da30b099c976f973e278),
e=j(__bd7207540b95ff683caa1d3c0bfcc3d7),C=j(__720511231eacfd9a564b2acaf400d3c5);n=j(__9a668cbde1e182d8e721c23580356df2);var F=j(__ee776d9150ae4c2ceb7a2b4f89a0f3e4),r=j(__7acfe7fd38bbf8b5bf76cc953770b033),s=window.skateTemplateHtml,A=/#.*/,B="_internal-aui-tabs-",l={totalTabsWidth:function(a,b){var c=this.totalVisibleTabWidth(a),d=0;b.find("li").each(function(a,b){d+=parseInt(b.getAttribute("data-aui-tab-width"))});return c+d},totalVisibleTabWidth:function(a){var b=0;a.each(function(a,d){b+=(0,e.default)(d).outerWidth()});
return b},removeResponsiveDropdown:function(a,b){a.remove();b.remove()},createResponsiveDropdownTrigger:function(a,b){a.append('<li class="menu-item aui-tabs-responsive-trigger-item"><a class="aui-dropdown2-trigger aui-tabs-responsive-trigger aui-dropdown2-trigger-arrowless" id="aui-tabs-responsive-trigger-'+b+'" aria-haspopup="true" aria-controls="aui-tabs-responsive-dropdown-'+b+'" href="aui-tabs-responsive-dropdown-'+b+'">...</a></li>');return a.find(".aui-tabs-responsive-trigger-item")},createResponsiveDropdown:function(a,
b){a.append('<div class="aui-dropdown2 aui-style-default aui-tabs-responsive-dropdown" id="aui-tabs-responsive-dropdown-'+b+'"><ul></ul></div>');return a.find("#aui-tabs-responsive-dropdown-"+b)},findNewVisibleTabs:function(a,b,c){for(var d=0,g=0;d+c<=b&&g<a.length;g++)var f=(0,e.default)(a[g]).outerWidth(!0),d=d+f;return a.slice(0,g-1)},moveVisibleTabs:function(a,b,c){for(var d=c.find("a").attr("aria-controls"),d=(0,e.default)("#"+d),b=this.findNewVisibleTabs(a,b.outerWidth(),c.parent().outerWidth(!0)),
g=b.length-1,f=a.length-1;f>=g;f--){var h=(0,e.default)(a[f]);this.moveTabToResponsiveDropdown(h,d,c)}return(0,e.default)(b)},moveTabToResponsiveDropdown:function(a,b,c){var d=a.find("a");a.attr("data-aui-tab-width",a.outerWidth(!0));d.addClass("aui-dropdown2-radio aui-tabs-responsive-item");a.hasClass("active-tab")&&(d.addClass("aui-dropdown2-checked"),c.addClass("active-tab"));b.find("ul").prepend(a)},moveInvisibleTabs:function(a,b,c){for(var d=0;0<b&&d<a.length;d++){var g=(0,e.default)(a[d]),f=
parseInt(g.attr("data-aui-tab-width"),10);f<b&&this.moveTabOutOfDropdown(g,c);b-=f}},moveTabOutOfDropdown:function(a,b){a.find("a").hasClass("aui-dropdown2-checked")&&(a.addClass("active-tab"),b.removeClass("active-tab"));a.children("a").removeClass("aui-dropdown2-radio aui-tabs-responsive-item aui-dropdown2-checked");b.before(a)}},m={setup:function(){var a=(0,E.default)(y,200),b=(0,e.default)('.aui-tabs.horizontal-tabs[data-aui-responsive]:not([data-aui-responsive="false"]), aui-tabs[responsive]:not([responsive="false"])').toArray();
y(b);(0,e.default)(window).resize(function(){a(b)});var c=(0,e.default)(".aui-tabs:not(.aui-tabs-disabled)");c.each(function(){z(this)});for(var d=0,g=c.length;d<g;d++){var f=c.eq(d),h=c.get(d);if(v(f)&&window.localStorage)if(f.attr("id")){if(f=window.localStorage.getItem(w(f)))(h=h.querySelector('a[href$="'+f+'"]'))&&u(h)}else q.warn("A tab group must specify an id attribute if it specifies data-aui-persist.")}(0,e.default)(".aui-tabs.vertical-tabs").find("a").each(function(){var a=(0,e.default)(this);
a.attr("title")||(0,F.default)(a)&&a.attr("title",a.text())})},change:function(a){var a=(0,e.default)(a),b=a.closest(".aui-tabs");u(a);v(b)&&window.localStorage&&(b=a.closest(".aui-tabs"),b.attr("id")?(a=a.attr("href"))&&window.localStorage.setItem(w(b),a):q.warn("A tab group must specify an id attribute if it specifies data-aui-persist."))}};(0,e.default)(m.setup);(0,r.default)("aui-tabs",{created:function(a){(0,e.default)(a).addClass("aui-tabs horizontal-tabs");r.default.init(a);z(a)},template:s('<ul class="tabs-menu">',
'<content select="li[is=aui-tabs-tab]"></content>',"</ul>",'<content select="aui-tabs-pane"></content>'),prototype:{select:function(a){a=(0,e.default)(this.querySelectorAll("aui-tabs-pane")).index(a);-1<a&&m.change(this.querySelectorAll("li[is=aui-tabs-tab]")[a].children[0]);return this}}});var G=(0,r.default)("aui-tabs-tab",{"extends":"li",created:function(a){(0,e.default)(a).addClass("menu-item")},template:s('<a href="#">',"<strong>","<content></content>","</strong>","</a>")});(0,r.default)("aui-tabs-pane",
{attached:function(a){var b=(0,e.default)((0,e.default)(a).closest("aui-tabs").get(0)),c=(0,e.default)(a),b=b.find("aui-tabs-pane").index(c),d=new G,g=(0,e.default)(d);c.addClass("tabs-pane");d.firstChild.setAttribute("href","#"+a.id);s.wrap(d).textContent=c.attr("title");0===b&&c.addClass("active-pane");c.hasClass("active-pane")&&g.addClass("active-tab");c.siblings("ul").append(d)},template:s("<content></content>")});(0,n.default)("tabs",m);p.default=m;return p=p["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.core.js' */
(function(b){function h(a,c){var d=a.nodeName.toLowerCase();if("area"===d){var d=a.parentNode,e=d.name;if(!a.href||!e||"map"!==d.nodeName.toLowerCase())return!1;d=b("img[usemap=#"+e+"]")[0];return!!d&&i(d)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||c:c)&&i(a)}function i(a){return!b(a).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.24",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(a,c){return"number"===typeof a?this.each(function(){var d=
this;setTimeout(function(){b(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(void 0!==a)return this.css("zIndex",a);if(this.length)for(var a=b(this[0]),c;a.length&&a[0]!==document;){c=a.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c)return c;a=a.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),"1.7"===b.fn.jquery.substring(0,3)&&b.each(["Width","Height"],function(a,c){function d(a,c,d,f){b.each(e,function(){c-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;d&&(c-=parseFloat(b.curCSS(a,"border"+this+"Width",!0))||0);f&&(c-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g=
{innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+c]=function(a){return void 0===a?g["inner"+c].call(this):this.each(function(){b(this).css(f,d(this,a)+"px")})};b.fn["outer"+c]=function(a,e){return"number"!==typeof a?g["outer"+c].call(this,a):this.each(function(){b(this).css(f,d(this,a,!0,e)+"px")})}}),b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(c){return!!b.data(c,a)}}):
function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return h(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var c=b.attr(a,"tabindex"),d=isNaN(c);return(d||0<=c)&&h(a,!d)}}),b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));c.offsetHeight;b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===c.offsetHeight;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.curCSS||(b.curCSS=
b.css),b.extend(b.ui,{plugin:{add:function(a,c,d){var a=b.ui[a].prototype,e;for(e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([c,d[e]])}},call:function(a,c,b){if((c=a.plugins[c])&&a.element[0].parentNode)for(var e=0;e<c.length;e++)a.options[c[e][0]]&&c[e][1].apply(a.element,b)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,c){if(b(a).css("overflow")==="hidden")return false;var d=c&&c==="left"?"scrollLeft":
"scrollTop",e=false;if(a[d]>0)return true;a[d]=1;e=a[d]>0;a[d]=0;return e},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,c,d,e,f,g){return b.ui.isOverAxis(a,d,f)&&b.ui.isOverAxis(c,e,g)}}))})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.widget.js' */
(function(c){if(c.cleanData){var h=c.cleanData;c.cleanData=function(a){for(var b=0,d;null!=(d=a[b]);b++)try{c(d).triggerHandler("remove")}catch(e){}h(a)}}else{var i=c.fn.remove;c.fn.remove=function(a,b){return this.each(function(){b||(!a||c.filter(a,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(a){}});return i.call(c(this),a,b)})}}c.widget=function(a,b,d){var e=a.split(".")[0],f,a=a.split(".")[1];f=e+"-"+a;d||(d=b,b=c.Widget);c.expr[":"][f]=function(b){return!!c.data(b,
a)};c[e]=c[e]||{};c[e][a]=function(a,b){arguments.length&&this._createWidget(a,b)};b=new b;b.options=c.extend(!0,{},b.options);c[e][a].prototype=c.extend(!0,b,{namespace:e,widgetName:a,widgetEventPrefix:c[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);c.widget.bridge(a,c[e][a])};c.widget.bridge=function(a,b){c.fn[a]=function(d){var e="string"===typeof d,f=Array.prototype.slice.call(arguments,1),g=this,d=!e&&f.length?c.extend.apply(null,[!0,d].concat(f)):d;if(e&&"_"===d.charAt(0))return g;
e?this.each(function(){var b=c.data(this,a),e=b&&c.isFunction(b[d])?b[d].apply(b,f):b;if(e!==b&&void 0!==e)return g=e,!1}):this.each(function(){var e=c.data(this,a);e?e.option(d||{})._init():c.data(this,a,new b(d,this))});return g}};c.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){c.data(b,this.widgetName,this);this.element=c(b);this.options=c.extend(!0,{},this.options,this._getCreateOptions(),
a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(a,b){var d=a;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof a){if(void 0===b)return this.options[a];d={};d[a]=b}this._setOptions(d);return this},_setOptions:function(a){var b=this;c.each(a,function(a,c){b._setOption(a,c)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,d){var e,f=this.options[a],d=d||{},b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(e in a)e in b||(b[e]=a[e]);this.element.trigger(b,d);return!(c.isFunction(f)&&!1===f.call(this.element[0],b,d)||b.isDefaultPrevented())}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.mouse.js' */
(function(b){var d=!1;b(document).mouseup(function(){d=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(c){if(!0===b.data(c.target,a.widgetName+".preventClickEvent"))return b.removeData(c.target,a.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(!d){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,e=1==a.which,f="string"==typeof this.options.cancel&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=!1!==this._mouseStart(a),!this._mouseStarted))return a.preventDefault(),!0;!0===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);a.preventDefault();return d=!0}},_mouseMove:function(a){if(this._mouseMoved&&(b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button||!a.which))return this._mouseUp(a);if(a.which||a.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a));return!this._mouseStarted},
_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},
_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.draggable.js' */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||d(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);if(!this.handle)return!1;c.iframeFix&&d(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
d.ui.ddmanager&&(d.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);
this.originalPageX=a.pageX;this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this._mouseDrag(a,!0);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,c){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var b=this._uiHash();if(!1===this._trigger("drag",a,b))return this._mouseUp({}),!1;this.position=b.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var c=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(c=d.ui.ddmanager.drop(this,a));this.dropped&&(c=this.dropped,this.dropped=
!1);for(var b=this.element[0],f=!1;b&&(b=b.parentNode);)b==document&&(f=!0);if(!f&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var e=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",a)!==false&&e._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},
_mouseUp:function(a){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a);return d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var c=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;d(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(c=!0)});
return c},_createHelper:function(a){var c=this.options,a=d.isFunction(c.helper)?d(c.helper.apply(this.element[0],[a])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||
0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0]))&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:d(window).scrollLeft())+d("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:d(window).scrollTop())+(d("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=d(a.containment),c=a[0];if(c){a.offset();var b="hidden"!=d(c).css("overflow");this.containment=[(parseInt(d(c).css("borderLeftWidth"),10)||0)+(parseInt(d(c).css("paddingLeft"),
10)||0),(parseInt(d(c).css("borderTopWidth"),10)||0)+(parseInt(d(c).css("paddingTop"),10)||0),(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(d(c).css("borderLeftWidth"),10)||0)-(parseInt(d(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(d(c).css("borderTopWidth"),10)||0)-(parseInt(d(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,c){c||(c=this.position);var b="absolute"==a?1:-1,f="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:f.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:f.scrollLeft())*b)}},_generatePosition:function(a){var c=this.options,b="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
f=/(html|body)/i.test(b[0].tagName),e=a.pageX,h=a.pageY;if(this.originalPosition){var g;this.containment&&(this.relative_container?(g=this.relative_container.offset(),g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]):g=this.containment,a.pageX-this.offset.click.left<g[0]&&(e=g[0]+this.offset.click.left),a.pageY-this.offset.click.top<g[1]&&(h=g[1]+this.offset.click.top),a.pageX-this.offset.click.left>g[2]&&(e=g[2]+this.offset.click.left),
a.pageY-this.offset.click.top>g[3]&&(h=g[3]+this.offset.click.top));c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=g?!(h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3])?h:!(h-this.offset.click.top<g[1])?h-c.grid[1]:h+c.grid[1]:h,e=c.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,e=g?!(e-this.offset.click.left<g[0]||e-this.offset.click.left>g[2])?e:!(e-this.offset.click.left<
g[0])?e-c.grid[0]:e+c.grid[0]:e)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:b.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:b.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,c,b){b=b||this._uiHash();d.ui.plugin.call(this,a,[c,b]);"drag"==a&&(this.positionAbs=this._convertPositionTo("absolute"));return d.Widget.prototype._trigger.call(this,a,c,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.24"});
d.ui.plugin.add("draggable","connectToSortable",{start:function(a,c){var b=d(this).data("draggable"),f=b.options,e=d.extend({},c,{item:b.element});b.sortables=[];d(f.connectToSortable).each(function(){var c=d.data(this,"sortable");c&&!c.options.disabled&&(b.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",a,e))})},stop:function(a,c){var b=d(this).data("draggable"),f=d.extend({},c,{item:b.element});d.each(b.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,b.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,"original"==b.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,f))})},drag:function(a,c){var b=d(this).data("draggable"),f=this;d.each(b.sortables,function(){this.instance.positionAbs=
b.positionAbs;this.instance.helperProportions=b.helperProportions;this.instance.offset.click=b.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",a),b.dropped=this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),b._trigger("fromSortable",a),b.dropped=!1)})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),c=d(this).data("draggable").options;
a.css("cursor")&&(c._cursor=a.css("cursor"));a.css("cursor",c.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,c){var b=d(c.helper),f=d(this).data("draggable").options;b.css("opacity")&&(f._opacity=b.css("opacity"));b.css("opacity",f.opacity)},stop:function(a,c){var b=d(this).data("draggable").options;b._opacity&&d(c.helper).css("opacity",b._opacity)}});d.ui.plugin.add("draggable",
"scroll",{start:function(){var a=d(this).data("draggable");a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(a){var c=d(this).data("draggable"),b=c.options,f=!1;if(c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName){if(!b.axis||"x"!=b.axis)c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-c.overflowOffset.top<
b.scrollSensitivity&&(c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop-b.scrollSpeed);if(!b.axis||"y"!=b.axis)c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity?c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-c.overflowOffset.left<b.scrollSensitivity&&(c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft-b.scrollSpeed)}else{if(!b.axis||"x"!=b.axis)a.pageY-d(document).scrollTop()<b.scrollSensitivity?f=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity&&(f=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed));if(!b.axis||"y"!=b.axis)a.pageX-d(document).scrollLeft()<b.scrollSensitivity?f=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(f=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed))}!1!==f&&(d.ui.ddmanager&&!b.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(c,
a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("draggable"),c=a.options;a.snapElements=[];d(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var b=d(this),c=b.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(a,c){for(var b=d(this).data("draggable"),f=b.options,e=f.snapTolerance,h=c.offset.left,g=h+b.helperProportions.width,n=c.offset.top,
o=n+b.helperProportions.height,i=b.snapElements.length-1;0<=i;i--){var j=b.snapElements[i].left,l=j+b.snapElements[i].width,k=b.snapElements[i].top,m=k+b.snapElements[i].height;if(j-e<h&&h<l+e&&k-e<n&&n<m+e||j-e<h&&h<l+e&&k-e<o&&o<m+e||j-e<g&&g<l+e&&k-e<n&&n<m+e||j-e<g&&g<l+e&&k-e<o&&o<m+e){if("inner"!=f.snapMode){var p=Math.abs(k-o)<=e,q=Math.abs(m-n)<=e,r=Math.abs(j-g)<=e,s=Math.abs(l-h)<=e;p&&(c.position.top=b._convertPositionTo("relative",{top:k-b.helperProportions.height,left:0}).top-b.margins.top);
q&&(c.position.top=b._convertPositionTo("relative",{top:m,left:0}).top-b.margins.top);r&&(c.position.left=b._convertPositionTo("relative",{top:0,left:j-b.helperProportions.width}).left-b.margins.left);s&&(c.position.left=b._convertPositionTo("relative",{top:0,left:l}).left-b.margins.left)}var t=p||q||r||s;if("outer"!=f.snapMode&&(p=Math.abs(k-n)<=e,q=Math.abs(m-o)<=e,r=Math.abs(j-h)<=e,s=Math.abs(l-g)<=e,p&&(c.position.top=b._convertPositionTo("relative",{top:k,left:0}).top-b.margins.top),q&&(c.position.top=
b._convertPositionTo("relative",{top:m-b.helperProportions.height,left:0}).top-b.margins.top),r&&(c.position.left=b._convertPositionTo("relative",{top:0,left:j}).left-b.margins.left),s))c.position.left=b._convertPositionTo("relative",{top:0,left:l-b.helperProportions.width}).left-b.margins.left;!b.snapElements[i].snapping&&(p||q||r||s||t)&&b.options.snap.snap&&b.options.snap.snap.call(b.element,a,d.extend(b._uiHash(),{snapItem:b.snapElements[i].item}));b.snapElements[i].snapping=p||q||r||s||t}else b.snapElements[i].snapping&&
b.options.snap.release&&b.options.snap.release.call(b.element,a,d.extend(b._uiHash(),{snapItem:b.snapElements[i].item})),b.snapElements[i].snapping=!1}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options,a=d.makeArray(d(a.stack)).sort(function(a,c){return(parseInt(d(a).css("zIndex"),10)||0)-(parseInt(d(c).css("zIndex"),10)||0)});if(a.length){var c=parseInt(a[0].style.zIndex)||0;d(a).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+a.length}}});
d.ui.plugin.add("draggable","zIndex",{start:function(a,c){var b=d(c.helper),f=d(this).data("draggable").options;b.css("zIndex")&&(f._zIndex=b.css("zIndex"));b.css("zIndex",f.zIndex)},stop:function(a,c){var b=d(this).data("draggable").options;b._zIndex&&d(c.helper).css("zIndex",b._zIndex)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.sortable.js' */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){d.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,
b){"disabled"===a?(this.options[a]=b,this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){var c=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(a);var e=null,f=this;d(a.target).parents().each(function(){if(d.data(this,c.widgetName+"-item")==f)return e=d(this),!1});d.data(a.target,c.widgetName+"-item")==f&&(e=d(a.target));if(!e)return!1;if(this.options.handle&&
!b){var g=!1;d(this.options.handle,e).find("*").andSelf().each(function(){this==a.target&&(g=!0)});if(!g)return!1}this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,b,c){b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();b.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",b.cursor));b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!=
document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",a,this._uiHash(this));d.ui.ddmanager&&(d.ui.ddmanager.current=this);d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return!0},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var b=this.options,c=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-this.overflowOffset.top<
b.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed):(a.pageY-d(document).scrollTop()<b.scrollSensitivity?c=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity&&(c=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed)),a.pageX-d(document).scrollLeft()<b.scrollSensitivity?c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)));!1!==c&&(d.ui.ddmanager&&!b.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=
this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;0<=b;b--){var c=this.items[b],e=c.item[0],f=this._intersectsWithPointer(c);if(f&&c.instance===this.currentContainer&&e!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?
!d.ui.contains(this.element[0],e):1)){this.direction=1==f?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=
this,e=c.placeholder.offset();c.reverting=!0;d(this.helper).animate({left:e.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&(this.helper&&
this.helper[0].parentNode)&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||{};d(b).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?
b[1]:b[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,f=d+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,j=i+a.height,k=this.offset.click.top,l=this.offset.click.left;return"pointer"==this.options.tolerance||
this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?d+k>i&&d+k<j&&b+l>g&&b+l<h:g<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<d+this.helperProportions.height/2&&f-this.helperProportions.height/2<j},_intersectsWithPointer:function(a){var b="x"===this.options.axis||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),a="y"===this.options.axis||
d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),b=b&&a,a=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return!b?!1:this.floating?c&&"right"==c||"down"==a?2:1:a&&("down"==a?2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();
return this.floating&&e?"right"==e&&a||"left"==e&&!a:c&&("down"==c&&b||"up"==c&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:
a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();if(e&&a)for(a=e.length-1;0<=a;a--)for(var f=d(e[a]),g=f.length-1;0<=g;g--){var h=d.data(f[g],this.widgetName);h&&(h!=this&&!h.options.disabled)&&c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):
d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;0<=a;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?
this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;0<=f;f--)for(var g=d(e[f]),h=g.length-1;0<=h;h--){var i=d.data(g[h],this.widgetName);i&&(i!=this&&!i.options.disabled)&&(c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]),this.containers.push(i))}for(f=c.length-1;0<=f;f--){a=c[f][1];e=c[f][0];h=0;for(g=
e.length;h<g;h++)i=d(e[h]),i.data(this.widgetName+"-item",a),b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var b=this.items.length-1;0<=b;b--){var c=this.items[b];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;a||(c.width=e.outerWidth(),c.height=
e.outerHeight());e=e.offset();c.left=e.left;c.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;0<=b;b--)e=this.containers[b].element.offset(),this.containers[b].containerCache.left=e.left,this.containers[b].containerCache.top=e.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();
return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var a=d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];e||(a.style.visibility="hidden");return a},update:function(a,d){if(!e||c.forcePlaceholderSize)d.height()||d.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||
0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=null,c=null,e=this.containers.length-1;0<=e;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!b||
!d.ui.contains(this.containers[e].element[0],b.element[0]))b=this.containers[e],c=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",a,this._uiHash(this)),this.containers[e].containerCache.over=0);if(b)if(1===this.containers.length)this.containers[c]._trigger("over",a,this._uiHash(this)),this.containers[c].containerCache.over=1;else if(this.currentContainer!=this.containers[c]){for(var b=1E4,e=null,f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-
1;0<=g;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.containers[c].floating?this.items[g].item.offset().left:this.items[g].item.offset().top;Math.abs(h-f)<b&&(b=Math.abs(h-f),e=this.items[g],this.direction=0<h-f?"down":"up")}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[c],e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[c].element,!0),this._trigger("change",a,this._uiHash()),this.containers[c]._trigger("change",a,
this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",a,this._uiHash(this)),this.containers[c].containerCache.over=1}},_createHelper:function(a){var b=this.options,a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"==b.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||d("parent"!=b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]==this.currentItem[0]&&
(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==a[0].style.width||b.forceHelperSize)&&a.width(this.currentItem.width());(""==a[0].style.height||b.forceHelperSize)&&a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&
(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))&&
(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),
10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=
this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d("document"==a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(d("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=
d(a.containment)[0],a=d(a.containment).offset(),c="hidden"!=d(b).css("overflow");this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-
this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"==a?1:-1,e="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+
this.offset.relative.top*c+this.offset.parent.top*c-(d.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*c),left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-(d.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*c)}},_generatePosition:function(a){var b=this.options,c="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);"relative"==this.cssPosition&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=a.pageX,g=a.pageY;if(this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),
a.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),b.grid))g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1],g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g,f=this.originalPageX+Math.round((f-
this.originalPageX)/b.grid[0])*b.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f;return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+
(d.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==f.counter&&f.refreshPositions(!d)},0)},_clear:function(a,b){this.reverting=!1;var c=[];!this._noFinalSort&&
this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||
this.domPosition.parent!=this.currentItem.parent()[0])&&!b&&c.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&!b&&(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;0<=e;e--)b||c.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",
a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});d.extend(d.ui.sortable,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-jquery-jquery-hotkeys', location = 'src/js/jquery/jquery.hotkeys.js' */
("undefined"===typeof window?global:window).__9cbbcefe7921e79cef26a868d04e53e6=function(){"use strict";var a=jQuery,c=function(a){this.num=0;this.timer=0<a?a:!1},k=function(h){if(a.isPlainObject(h.data)||a.isArray(h.data)||"string"===typeof h.data){var i=h.handler,g={timer:700,combo:[]},b=h.data;"string"===typeof b?g.combo=[b]:a.isArray(b)?g.combo=b:a.extend(g,b);g.combo=a.map(g.combo,function(a){return a.toLowerCase()});h.index=new c(g.timer);h.handler=function(d){if(!(this!==d.target&&(/textarea|select|input/i.test(d.target.nodeName)||
"true"===a(d.target).prop("contenteditable")))){var e="keypress"!==d.type?a.hotkeys.specialKeys[d.which]:null,b=String.fromCharCode(d.which).toLowerCase(),f="",c={};d.altKey&&"alt"!==e&&(f+="alt+");d.ctrlKey&&"ctrl"!==e&&(f+="ctrl+");d.metaKey&&(!d.ctrlKey&&"meta"!==e)&&(f+="meta+");d.shiftKey&&"shift"!==e&&(f+="shift+");d.metaKey&&"["===b&&(b=null);e&&(c[f+e]=!0);b&&(c[f+b]=!0);/shift+/.test(f)&&(c[f.replace("shift+","")+a.hotkeys.shiftNums[e||b]]=!0);e=h.index;b=g.combo;if(j(b[e.val()],c)){if(e.val()===
b.length-1)return e.reset(),i.apply(this,arguments);e.inc()}else e.reset(),j(b[0],c)&&e.inc()}}}},j=function(a,c){for(var g=a.split(" "),b=0,d=g.length;b<d;b++)if(c[g[b]])return!0;return!1};a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",
103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta",219:"[",221:"]"},keypressKeys:["<",">","?"],shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(a.hotkeys.keypressKeys,function(c,i){a.hotkeys.shiftNums[i]=i});c.prototype.val=
function(){return this.num};c.prototype.inc=function(){this.timer&&(clearTimeout(this.timeout),this.timeout=setTimeout(a.proxy(c.prototype.reset,this),this.timer));this.num++};c.prototype.reset=function(){this.timer&&clearTimeout(this.timeout);this.num=0};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:k}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-jquery-jquery-moveto', location = 'src/js/jquery/jquery.moveto.js' */
("undefined"===typeof window?global:window).__c97e1197b9a36f8a538d0a5bc4856def=function(){"use strict";jQuery.fn.moveTo=function(a){var a=jQuery.extend({transition:!1,scrollOffset:35},a),c=this,b=c.offset().top;if((jQuery(window).scrollTop()+jQuery(window).height()-this.outerHeight()<b||jQuery(window).scrollTop()+a.scrollOffset>b)&&jQuery(window).height()>a.scrollOffset){b=jQuery(window).scrollTop()+a.scrollOffset>b?b-(jQuery(window).height()-this.outerHeight())+a.scrollOffset:b-a.scrollOffset;if(!jQuery.fn.moveTo.animating&&
a.transition)return jQuery(document).trigger("moveToStarted",this),jQuery.fn.moveTo.animating=!0,jQuery("html,body").animate({scrollTop:b},1E3,function(){jQuery(document).trigger("moveToFinished",c);delete jQuery.fn.moveTo.animating}),this;a=jQuery("html, body");a.is(":animated")&&(a.stop(),delete jQuery.fn.moveTo.animating);jQuery(document).trigger("moveToStarted");jQuery(window).scrollTop(b);setTimeout(function(){jQuery(document).trigger("moveToFinished",c)},100);return this}jQuery(document).trigger("moveToFinished",
this);return this};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-when-i-type', location = 'src/js/aui/when-i-type.js' */
("undefined"===typeof window?global:window).__dd5c235fc113ca31324f52b77811a4b6=function(){function o(c){return c&&c.__esModule?c:{"default":c}}function m(c){function i(a){!u.popup.current&&h&&h.fire(a)}function e(a){a.preventDefault()}function g(a){(a&&a.split?f.default.trim(a).split(" "):[a]).forEach(function(d){if(!(d instanceof Array)){for(var d=d.toString(),b=[],l="";d.length;){var a=d.match(/^(ctrl|meta|shift|alt)\+/i),c=d.match(v);a?(l+=a[0],d=d.substring(a[0].length)):(c?(b.push(l+c[0]),d=
d.substring(c[0].length)):(b.push(l+d[0]),d=d.substring(1)),l="")}d=b}a:{for(b=d.length;b--;)if(1<d[b].length&&"space"!==d[b]){b=!0;break a}b=!1}b=b?"keydown":"keypress";k.push(d);(0,f.default)(document).bind(b,d,i);(0,f.default)(document).bind(b+" keyup",d,e)})}function j(a,d,b){b?d+=" ("+AJS.format("Type \u0027\u0027{0}\u0027\u0027",a.shift()):(d=d.replace(/\)$/,""),d+=AJS.format("OR \u0027\u0027{0}\u0027\u0027",a.shift()));a.forEach(function(b){d=d+(" "+AJS.format("then \u0027\u0027{0}\u0027\u0027",
b))});return d+=")"}var k=[],h=f.default.Callbacks();g(c);return m.makeShortcut({executor:h,bindKeys:g,addShortcutsToTitle:function(a){for(var a=(0,f.default)(a),d=a.attr("title")||"",b=k.slice(),l=a.data("boundKeyCombos")||[],c=a.data("kbShortcutAppended")||"",e=!c,d=e?d:d.substring(0,d.length-c.length);b.length;){var i=b.shift();l.some(function(b){return w.default.isEqual(i,b)})||(c=j(i.slice(),c,e),e=!1)}s&&(c=c.replace(/Meta/ig,"\u2318").replace(/Shift/ig,"\u21e7"));a.attr("title",d+c);a.data("kbShortcutAppended",
c);a.data("boundKeyCombos",l.concat(k))},removeShortcutsFromTitle:function(a){var a=(0,f.default)(a),d=a.data("kbShortcutAppended");if(d){var b=a.attr("title");a.attr("title",b.replace(d,""));a.removeData("kbShortcutAppended");a.removeData("boundKeyCombos")}},keypressHandler:i,defaultPreventionHandler:e})}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});var f=o(__bd7207540b95ff683caa1d3c0bfcc3d7);__9cbbcefe7921e79cef26a868d04e53e6;__c97e1197b9a36f8a538d0a5bc4856def;var q;var g=
__2f5c294b01e66b15309518e39bcb949d;if(g&&g.__esModule)q=g;else{var r={};if(null!=g)for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(r[n]=g[n]);r.default=g;q=r}var u=__aa116fc0f3815f1a600215af3b7b5390;n=o(__9a668cbde1e182d8e721c23580356df2);var x=__02837eb0ab28736e09825f2207c8fe9b,y=o(__3f6f6650e96d80fefaaf71feed8f822b),w=o(__b8debe7dbacd8c0f9a68380b427aca10),s=-1!==navigator.platform.indexOf("Mac"),z=-1!==navigator.userAgent.indexOf("Safari"),v=/^(backspace|tab|r(ight|eturn)|s(hift|pace|croll)|c(trl|apslock)|alt|pa(use|ge(up|down))|e(sc|nd)|home|left|up|d(el|own)|insert|f\d\d?|numlock|meta)/i,
t=function(c){var f=c[0];f&&"MouseEvent"in window?(c=void 0,(0,x.supportsNewMouseEvent)()?c=new MouseEvent("click",{bubbles:!0,cancelable:!0}):(c=document.createEvent("MouseEvent"),c.initEvent("click",!0,!0)),f.dispatchEvent(c)):c.trigger("click")};m.makeShortcut=function(c){function i(b){return function(d,a){var a=a||{},c=a.focusedClass||"focused",i=a.hasOwnProperty("wrapAround")?a.wrapAround:!0,g=a.hasOwnProperty("escToCancel")?a.escToCancel:!0;e.add(function(){var a=(0,f.default)(d),e=a.filter("."+
c),h=0===e.length?void 0:{transition:!0};if(g)(0,f.default)(document).one("keydown",function(b){b.keyCode===y.default.ESCAPE&&e&&e.removeClass(c)});e.length&&e.removeClass(c);if((e=b(e,a,i))&&0<e.length)e.addClass(c),e.moveTo(h),e.is("a")?e.focus():e.find("a:first").focus()});return this}}var e=c.executor,g=c.bindKeys,j=c.addShortcutsToTitle,k=c.removeShortcutsFromTitle,h=c.keypressHandler,a=c.defaultPreventionHandler,d=[];return{moveToNextItem:i(function(b,a,d){var c;if(d&&0===b.length)return a.eq(0);
c=f.default.inArray(b.get(0),a);return c<a.length-1?a.eq(c+1):d?a.eq(0):b}),moveToPrevItem:i(function(b,a,d){var c;if(d&&0===b.length)return a.filter(":last");c=f.default.inArray(b.get(0),a);return 0<c?a.eq(c-1):d?a.filter(":last"):b}),click:function(b){d.push(b);j(b);e.add(function(){var a=(0,f.default)(b);t(a)});return this},goTo:function(b){e.add(function(){window.location.href=b});return this},followLink:function(b){d.push(b);j(b);e.add(function(){var a=(0,f.default)(b)[0];a&&{a:!0,link:!0}[a.nodeName.toLowerCase()]&&
(window.location.href=a.href)});return this},execute:function(b){var a=this;e.add(function(){b.apply(a,arguments)});return this},evaluate:function(b){b.call(this)},moveToAndClick:function(b){d.push(b);j(b);e.add(function(){var a=(0,f.default)(b);0<a.length&&(t(a),a.moveTo())});return this},moveToAndFocus:function(a){d.push(a);j(a);e.add(function(d){var c=(0,f.default)(a);0<c.length&&(c.focus(),c.moveTo&&c.moveTo(),c.is(":input")&&d.preventDefault())});return this},or:function(a){g(a);return this},
unbind:function(){(0,f.default)(document).unbind("keydown keypress",h).unbind("keydown keypress keyup",a);for(var b=0,c=d.length;b<c;b++)k(d[b]);d=[]}}};m.fromJSON=function(c,g){var e=[];c&&f.default.each(c,function(c,j){var k=j.op,h=j.param,a=void 0;if("execute"===k||"evaluate"===k)a=[new Function(h)];else if(/^\[[^\]\[]*,[^\]\[]*\]$/.test(h)){try{a=JSON.parse(h)}catch(d){q.error("When using a parameter array, array must be in strict JSON format: "+h)}f.default.isArray(a)||q.error("Badly formatted shortcut parameter. String or JSON Array of parameters required: "+
h)}else a=[h];f.default.each(j.keys,function(){var b=this;g&&s&&(b=f.default.map(b,function(a){return a.replace(/ctrl/i,"meta")}));b=m(b);b[k].apply(b,a);e.push(b)})});return e};(0,f.default)(document).bind("iframeAppended",function(c,g){(0,f.default)(g).load(function(){(0,f.default)(g).contents().bind("keyup keydown keypress",function(c){z&&"keypress"===c.type||(0,f.default)(c.target).is(":input")||f.default.event.trigger(c,arguments,document,!0)})})});(0,n.default)("whenIType",m);p.default=m;return p=
p["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-cookie', location = 'src/js/aui/cookie.js' */
("undefined"===typeof window?global:window).__a05104f0c9031fbd185c4b3e45f00b0d=function(){function l(a){a=RegExp("\\b"+a.replace(i,"\\$&")+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)");return(a=document.cookie.match(a))&&a[1].replace(o,"")}function j(a,f,c){var d=l(k),b=RegExp("(\\s|\\|)*\\b"+a.replace(i,"\\$&")+"=[^|]*[|]*"),d=(d||"").replace(b,"|");""!==f&&(a=a+"="+f,4020>d.length+a.length&&(d+="|"+a));d=d.replace(p,"|");a=k;c=c||365;f="";d='"'+d.replace(q,'\\"')+'"';c&&(f=new Date,f.setTime(+f+864E5*c),f=
"; expires="+f.toGMTString());document.cookie=a+"="+d+f+";path=/"}function m(a,b){var c;c=(c=l(k))||"";var d=RegExp(a.replace(i,"\\$&")+"=([^|]+)");c=(c=c.match(d))&&c[1];return null!=c?c:b}function n(a){j(a,"")}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.save=g.read=g.erase=void 0;var b;b=__c88c0dc6258c37804917fb6a0e4092fa;if(!b||!b.__esModule){var e={};if(null!=b)for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(e[h]=b[h]);e.default=b;b=e}var e=(e=__9a668cbde1e182d8e721c23580356df2)&&
e.__esModule?e:{"default":e},k="AJS.conglomerate.cookie",o=/(\\|^"|"$)/g,p=/\|\|+/g,q=/"/g,i=/[.*+?|^$()[\]{\\]/g;h={erase:n,read:m,save:j};(0,e.default)("cookie",h);(0,e.default)("Cookie",h);b.prop(AJS,"Cookie",{alternativeName:"cookie",sinceVersion:"5.8.0"});g.erase=n;g.read=m;g.save=j;return g}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.os.js' */
("undefined"===typeof window?global:window).__ca20c4650d99e267521ed54b29527012=function(){"use strict";jQuery.os={};var a=navigator.platform.toLowerCase();jQuery.os.windows=-1!=a.indexOf("win");jQuery.os.mac=-1!=a.indexOf("mac");jQuery.os.linux=-1!=a.indexOf("linux");return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js-vendor/jquery/plugins/jquery.form.js' */
(function(b){function m(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}b.fn.ajaxSubmit=function(a){function f(){function d(){var a=j.attr("target"),k=j.attr("action");c.setAttribute("target",f);"POST"!=c.getAttribute("method")&&c.setAttribute("method","POST");c.getAttribute("action")!=e.url&&c.setAttribute("action",e.url);e.skipEncodingOverride||
j.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&setTimeout(function(){s=!0;g()},e.timeout);var l=[];try{if(e.extraData)for(var m in e.extraData)l.push(b('<input type="hidden" name="'+m+'" value="'+e.extraData[m]+'" />').appendTo(c)[0]);i.appendTo("body");h.attachEvent?h.attachEvent("onload",g):h.addEventListener("load",g,!1);c.submit()}finally{c.setAttribute("action",k),a?c.setAttribute("target",a):j.removeAttr("target"),b(l).remove()}}function g(){if(!k.aborted){var a=
h.contentWindow?h.contentWindow.document:h.contentDocument?h.contentDocument:h.document;if(a&&a.location.href!=e.iframeSrc){h.detachEvent?h.detachEvent("onload",g):h.removeEventListener("load",g,!1);var d=!0;try{if(s)throw"timeout";var c="xml"==e.dataType||a.XMLDocument||b.isXMLDoc(a);m("isXml="+c);if(!c&&(window.opera&&(null==a.body||""==a.body.innerHTML))&&--w){m("requeing onLoad callback, DOM not available");setTimeout(g,250);return}k.responseText=a.body?a.body.innerHTML:a.documentElement?a.documentElement.innerHTML:
null;k.responseXML=a.XMLDocument?a.XMLDocument:a;k.getResponseHeader=function(a){return{"content-type":e.dataType}[a]};var f=/(json|script)/.test(e.dataType);if(f||e.textarea){var j=a.getElementsByTagName("textarea")[0];if(j)k.responseText=j.value;else if(f){var o=a.getElementsByTagName("pre")[0],q=a.getElementsByTagName("body")[0];o?k.responseText=o.textContent:q&&(k.responseText=q.innerHTML)}}else"xml"==e.dataType&&(!k.responseXML&&null!=k.responseText)&&(k.responseXML=x(k.responseText));var a=
k,p=e.dataType,c=e,t=a.getResponseHeader("content-type")||"",u="xml"===p||!p&&0<=t.indexOf("xml"),n=u?a.responseXML:a.responseText;u&&"parsererror"===n.documentElement.nodeName&&b.error&&b.error("parsererror");c&&c.dataFilter&&(n=c.dataFilter(n,p));"string"===typeof n&&("json"===p||!p&&0<=t.indexOf("json")?n=y(n):("script"===p||!p&&0<=t.indexOf("javascript"))&&b.globalEval(n));v=n}catch(r){m("error caught:",r),d=!1,k.error=r,e.error&&e.error.call(e.context,k,"error",r),l&&b.event.trigger("ajaxError",
[k,e,r])}k.aborted&&(m("upload aborted"),d=!1);d&&(e.success&&e.success.call(e.context,v,"success",k),l&&b.event.trigger("ajaxSuccess",[k,e]));l&&b.event.trigger("ajaxComplete",[k,e]);l&&!--b.active&&b.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,k,d?"success":"error");setTimeout(function(){i.removeData("form-plugin-onload");i.remove();k.responseXML=null},100)}}}var c=j[0];if(b(":input[name=submit],:input[id=submit]",c).length)alert('Error: Form elements must not have name or id of "submit".');
else{var e=b.extend(!0,{},b.ajaxSettings,a);e.context=e.context||e;var f="jqFormIO"+(new Date).getTime(),i=b('<iframe id="'+f+'" name="'+f+'" src="'+e.iframeSrc+'" />'),h=i[0];i.css({position:"absolute",top:"-1000px",left:"-1000px"});var k={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){m("aborting upload...");this.aborted=1;i.attr("src",e.iframeSrc);k.error="aborted";
e.error&&e.error.call(e.context,k,"error","aborted");l&&b.event.trigger("ajaxError",[k,e,"aborted"]);e.complete&&e.complete.call(e.context,k,"error")}},l=e.global;l&&!b.active++&&b.event.trigger("ajaxStart");l&&b.event.trigger("ajaxSend",[k,e]);if(e.beforeSend&&!1===e.beforeSend.call(e.context,k,e))e.global&&b.active--;else if(!k.aborted){var s=0,o=c.clk;if(o){var q=o.name;q&&!o.disabled&&(e.extraData=e.extraData||{},e.extraData[q]=o.value,"image"==o.type&&(e.extraData[q+".x"]=c.clk_x,e.extraData[q+
".y"]=c.clk_y))}e.forceSync?d():setTimeout(d,10);var v,w=50,x=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},y=b.parseJSON||function(a){return window.eval("("+a+")")}}}}if(!this.length)return m("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var c=
this.attr("action");(c="string"===typeof c?b.trim(c):"")&&(c=(c.match(/^([^#]+)/)||[])[1]);c=c||window.location.href||"";a=b.extend(!0,{url:c,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);c={};this.trigger("form-pre-serialize",[this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return m("ajaxSubmit: submit aborted via beforeSerialize callback"),
this;var d,g,i=this.formToArray(a.semantic);if(a.data)for(d in a.extraData=a.data,a.data)if(a.data[d]instanceof Array)for(var h in a.data[d])i.push({name:d,value:a.data[d][h]});else g=a.data[d],g=b.isFunction(g)?g():g,i.push({name:d,value:g});if(a.beforeSubmit&&!1===a.beforeSubmit(i,this,a))return m("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[i,this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;d=b.param(i);
"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+d,a.data=null):a.data=d;var j=this,l=[];a.resetForm&&l.push(function(){j.resetForm()});a.clearForm&&l.push(function(){j.clearForm()});if(!a.dataType&&a.target){var s=a.success||function(){};l.push(function(d){var c=a.replaceTarget?"replaceWith":"html";b(a.target)[c](d).each(s,arguments)})}else a.success&&l.push(a.success);a.success=function(b,d,c){for(var e=a.context||a,g=0,f=l.length;g<f;g++)l[g].apply(e,[b,d,c||j,j])};d=0<b("input:file",
this).length;h="multipart/form-data"==j.attr("enctype")||"multipart/form-data"==j.attr("encoding");!1!==a.iframe&&(d||a.iframe||h)?a.closeKeepAlive?b.get(a.closeKeepAlive,f):f():b.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){if(0===this.length){var f=this.selector,c=this.context;if(!b.isReady&&f)return m("DOM not ready, queuing ajaxForm"),b(function(){b(f,c).ajaxForm(a)}),this;m("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));
return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.isDefaultPrevented()||(d.preventDefault(),b(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var c=a.target,f=b(c);if(!f.is(":submit,input:image")){c=f.closest(":submit");if(0==c.length)return;c=c[0]}var h=this;h.clk=c;"image"==c.type&&(void 0!=a.offsetX?(h.clk_x=a.offsetX,h.clk_y=a.offsetY):"function"==typeof b.fn.offset?(f=f.offset(),h.clk_x=a.pageX-f.left,h.clk_y=a.pageY-f.top):(h.clk_x=a.pageX-c.offsetLeft,
h.clk_y=a.pageY-c.offsetTop));setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a){var f=[];if(0===this.length)return f;var c=this[0],d=a?c.getElementsByTagName("*"):c.elements;if(!d)return f;var g,i,h,j,l,m;g=0;for(l=d.length;g<l;g++)if(i=d[g],h=i.name)if(a&&c.clk&&"image"==i.type)!i.disabled&&c.clk==i&&(f.push({name:h,value:b(i).val()}),f.push({name:h+".x",value:c.clk_x},
{name:h+".y",value:c.clk_y}));else if((j=b.fieldValue(i,!0))&&j.constructor==Array){i=0;for(m=j.length;i<m;i++)f.push({name:h,value:j[i]})}else null!==j&&"undefined"!=typeof j&&f.push({name:h,value:j});if(!a&&c.clk&&(a=b(c.clk),d=a[0],(h=d.name)&&!d.disabled&&"image"==d.type))f.push({name:h,value:a.val()}),f.push({name:h+".x",value:c.clk_x},{name:h+".y",value:c.clk_y});return f};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var f=[];this.each(function(){var c=
this.name;if(c){var d=b.fieldValue(this,a);if(d&&d.constructor==Array)for(var g=0,i=d.length;g<i;g++)f.push({name:c,value:d[g]});else null!==d&&"undefined"!=typeof d&&f.push({name:this.name,value:d})}});return b.param(f)};b.fn.fieldValue=function(a){for(var f=[],c=0,d=this.length;c<d;c++){var g=b.fieldValue(this[c],a);null===g||("undefined"==typeof g||g.constructor==Array&&!g.length)||(g.constructor==Array?b.merge(f,g):f.push(g))}return f};b.fieldValue=function(a,f){var c=a.name,d=a.type,g=a.tagName.toLowerCase();
void 0===f&&(f=!0);if(f&&(!c||a.disabled||"reset"==d||"button"==d||("checkbox"==d||"radio"==d)&&!a.checked||("submit"==d||"image"==d)&&a.form&&a.form.clk!=a||"select"==g&&-1==a.selectedIndex))return null;if("select"==g){var i=a.selectedIndex;if(0>i)return null;for(var c=[],g=a.options,h=(d="select-one"==d)?i+1:g.length,i=d?i:0;i<h;i++){var j=g[i];if(j.selected){var l=j.value;l||(l=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(d)return l;c.push(l)}}return c}return b(a).val()};
b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==b?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==b&&(this.selectedIndex=-1)})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};
b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var f=this.type;"checkbox"==f||"radio"==f?this.checked=a:"option"==this.tagName.toLowerCase()&&(f=b(this).parent("select"),a&&(f[0]&&"select-one"==f[0].type)&&f.find("option").selected(!1),this.selected=a)})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.is-dirty.js' */
jQuery.fn.isDirty=function(){var b,d=[];window.onbeforeunload=function(){var a=window.onbeforeunload;!1!==b&&jQuery.each(d,function(){if(this.initVal!==$(this).val())return b=!0,!1});if(b)return window.onbeforeunload=null,window.setTimeout(function(){jQuery(document).bind("mousemove",function(){window.onbeforeunload=a;jQuery(document).unbind("mousemove",arguments.callee)})},1E3),b=void 0,AJS.params.dirtyMessage||""};return function(a){function c(b){var a=jQuery(this);jQuery.fn.isDirty.fieldInFocus=
a;-1===jQuery.inArray(this,d)&&(this.initVal=a.val(),d.push(this),a.die(b.type,c))}if(0!==this.length)return jQuery(":not(:input)").live("click",function(){delete jQuery.fn.isDirty.fieldInFocus}),jQuery(":input[type != hidden]",this.selector).bind("keydown",c).bind("keypress",c).bind("click",c),jQuery(a.ignoreUnloadFromElems).live("mousedown",function(){b=!1}),this.each(function(){var a=this.onsubmit;this.onsubmit=function(){b=!1;if(a)return a.apply(this,arguments)};$(this).submit(function(){b=!1})}),
this}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.progressbar.js' */
(function(a){a.fn.progressBar=function(e,h){var f=a.extend({height:"1em",showPercentage:!0},h),b=this.attr("id")+"-incomplete-bar",c=this.attr("id")+"-complete-bar",g=this.attr("id")+"-percent-complete-text";if(0==a("#"+b).length){var d=a(document.createElement("div"));d.attr("id",b);d.css({width:"90%",border:"solid 1px #ccc","float":"left","margin-right":"0.5em"});d.addClass("progress-background-color");b=a(document.createElement("div"));b.attr("id",c);b.addClass("progress-fill-color");b.css({height:f.height,
width:e+"%"});c=a(document.createElement("span"));c.attr("id",g);c.addClass("percent-complete-text");c.html(e+"%");d.append(b);this.append(d);f.showPercentage&&this.append(c)}else a("#"+c).css("width",e+"%"),a("#"+g).html(e+"%")}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.selection.js' */
(function(e){document.selection?(e.fn.selection=function(d){var a=this[0];this.focus();if(!a)return!1;if(null==d)return document.selection.createRange().text;var c=a.scrollTop,b=document.selection.createRange();b.text=d;b.select();a.focus();a.scrollTop=c},e.fn.selectionRange=function(d,a){var c=this[0];this.focus();var b=document.selection.createRange();if(null==d){var e=this.val(),g=e.length,f=b.duplicate();f.moveToElementText(c);f.setEndPoint("StartToEnd",b);c=g-f.text.replace(/\u000D/g,"").length;
f.setEndPoint("StartToStart",b);b=g-f.text.replace(/\u000D/g,"").length;c!=b&&"\n"==e.charAt(c+1)&&(c+=1);return{end:c,start:b,text:e.substring(b,c),textBefore:e.substring(0,b),textAfter:e.substring(c)}}b.moveToElementText(c);b.collapse(!0);b.moveStart("character",d);b.moveEnd("character",a-d);b.select()}):(e.fn.selection=function(d){var a=this[0];if(!a)return!1;if(null==d)return a.setSelectionRange?a.value.substring(a.selectionStart,a.selectionEnd):!1;var c=a.scrollTop;if(a.setSelectionRange){var b=
a.selectionStart;a.value=a.value.substring(0,b)+d+a.value.substring(a.selectionEnd);a.selectionStart=b;a.selectionEnd=b+d.length}a.focus();a.scrollTop=c},e.fn.selectionRange=function(d,a){if(null==d){var c={start:this[0].selectionStart,end:this[0].selectionEnd},b=this.val();c.text=b.substring(c.start,c.end);c.textBefore=b.substring(0,c.start);c.textAfter=b.substring(c.end);return c}this[0].selectionStart=d;this[0].selectionEnd=a});e.fn.wrapSelection=function(d,a){this.selection(d+this.selection()+
(a||""))}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'src/js/jquery/jquery.throbber.js' */
jQuery.fn.throbber=function(d){var e=[],g={isLatentThreshold:100,minThrobberDisplay:200,loadingClass:"loading"};d(document).ajaxComplete(function(a,b){d(e).each(function(a){b===this.get(0)&&(this.hideThrobber(),e.splice(a,1))})});return function(a){var b,f,c=function(a,b){c.t=setTimeout(function(){clearTimeout(c.t);c.t=void 0;a()},b)},a=d.extend(g,a||{});if(!a.target)return this;f=jQuery(a.target);e.push(d.extend(this,{showThrobber:function(){c(function(){b||(f.addClass(a.loadingClass),c(function(){b&&
b()},a.minThrobberDisplay))},a.isLatentThreshold)},hideThrobber:function(){b=function(){f.removeClass(a.loadingClass);a.end&&a.end()};c.t||b()}}));this.showThrobber();return this}}(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-spin', location = 'src/js/aui/spin.js' */
("undefined"===typeof window?global:window).__6fa2292fd3bc72aee8a14c7b4326719a=function(){"use strict";var f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=__bd7207540b95ff683caa1d3c0bfcc3d7,c=b&&b.__esModule?b:{"default":b};__05bca48700965a7a8a29288c57bd100b;var g=(b=__7acfe7fd38bbf8b5bf76cc953770b033)&&b.__esModule?b:{"default":b},b=__c88c0dc6258c37804917fb6a0e4092fa;
c.default.fn.spin=(0,b.fn)(function(a,b){var d={size:"small"};if("object"===("undefined"===typeof b?"undefined":f(b)))d=c.default.extend(d,b);if("object"===("undefined"===typeof a?"undefined":f(a)))d=c.default.extend(d,a);"string"===typeof a&&(d.size=a);return"boolean"===typeof a&&!1===a?this.spinStop():this.each(function(){if(this&&this.nodeType){var a=(0,c.default)(this),b=a.data();if(b){var e=(0,c.default)("<aui-spinner filled></aui-spinner>");e.attr("size",d.size);e.css("color",d.color);a.spinStop();
a.append(e);g.default.init(this);b.spinner=e}}})},"jQuery.fn.spin",{sinceVersion:"7.9.4",removeInVersion:"9",alternativeName:"<aui-spinner>"});c.default.fn.spinStop=(0,b.fn)(function(){return this.each(function(){if(this&&this.nodeType){var a=(0,c.default)(this).data();a&&a.spinner&&(a.spinner.remove(),delete a.spinner)}})},"jQuery.fn.spinStop",{sinceVersion:"7.9.4",removeInVersion:"9",alternativeName:"<aui-spinner>"});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-amd-global.js' */
define("applinks/lib/lodash",function(){if(!window._){throw"lodash not found"}return window._});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/lib-version.js' */
define("applinks/lib/version",["applinks/lib/lodash"],function(c){function d(f,g){if(c.isUndefined(f)){return 0}else{if(typeof f!=="number"||isNaN(f)){throw new Error(g+": expected a number, was: <"+f+">")}else{return Math.floor(f)}}}function a(f,g){if(!f||!(f instanceof e)){throw new Error(g+": expected a Version object, was: <"+f+">")}return f}function b(f,g){return f>g?1:f==g?0:-1}function e(g,h,f){this.major=d(g,"major");this.minor=d(h,"minor");this.bugfix=d(f,"bugfix")}e.parse=function(g,h){h=h||"versionString";if(!g){throw new Error(h+": expected a non-empty string")}var f=g.split(".");if(f.length!==3){throw new Error(h+": expected <major>.<minor>.<bugfix> string, was: <"+g+">")}return new e(parseInt(f[0]),parseInt(f[1]),parseInt(f[2]))};e.comparator=function(g,f){return a(g,"versionOne").compareTo(a(f,"versionTwo"))};e.prototype.compareTo=function(h){a(h,"that");var f=b(this.major,h.major);if(f!=0){return f}var g=b(this.minor,h.minor);if(g!=0){return g}return b(this.bugfix,h.bugfix)};e.prototype.greaterThan=function(f){return this.compareTo(f)>0};e.prototype.greaterThanOrEqual=function(f){return this.compareTo(f)>=0};e.prototype.lessThan=function(f){return this.compareTo(f)<0};e.prototype.lessThanOrEqual=function(f){return this.compareTo(f)<=0};e.prototype.equals=function(f){return this.compareTo(f)==0};e.prototype.toMinor=function(){return new e(this.major,this.minor)};e.prototype.toMajor=function(){return new e(this.major)};e.prototype.toString=function(){return this.major+"."+this.minor+"."+this.bugfix};return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-version-details.js' */
define("applinks/lib/aui-version-details",["applinks/lib/version"],function(g){var d=new g(5,8,15);var f=new g(5,9,13);var e=new g(5,8);var c=new g(5,9);function a(h){if(h.lessThan(d)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+d+" or "+f+" for Applinks to work")}if(h.greaterThanOrEqual(c)&&h.lessThan(f)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+f+" for Applinks to work")}}function b(h){var i=g.parse(h.version,"AUI version");a(i);h.versionDetails=i;h.versionDetails.is58=i.toMinor().equals(e);h.versionDetails.is59=i.toMinor().equals(c);return h}return{addVersionDetails:b}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define("applinks/lib/console",function(){return window.console});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define("applinks/lib/jquery",function(){return window.jQuery});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define("applinks/lib/aui",["applinks/lib/window","applinks/lib/aui-version-details"],function(b,c){var a=b.AJS;if(!a){throw new Error("window.AJS not defined, cannot load AUI")}return c.addVersionDetails(a)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
define("applinks/lib/wrm",function(){return window.WRM});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define("applinks/lib/skate",function(){return window.skate});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
define("applinks/lib/window",function(){return window});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/spi-amd.js' */
define("applinks/lib/spi",function(){return{get:function(){return AppLinks.SPI}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/applinks-creation-amd.js' */
define("applinks/lib/creation",function(){return{get:function(){return AppLinks.Creation}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/docs.js' */
define("applinks/common/docs",["applinks/lib/jquery","applinks/lib/aui","applinks/common/help-paths"],function(c,b,a){return{createDocLink:function(d,f,e){if(!e){e=""}else{e=" "+e}return c("<a/>",{"class":"ual-help-link help-link"+e,href:this.getDocHref(d,f),target:"_blank","data-help-link-key":d,text:"Help",title:"Help"})},getDocHref:function(e,f){var d=a.getFullPath(e);if(f){d+="#"+a.getPath(f)}return d}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/help-paths.js' */
define("applinks/common/help-paths",["applinks/lib/console","applinks/lib/wrm","applinks/lib/lodash","applinks/common/modules","applinks/common/preconditions"],function(b,a,g,e,d){var f=g.memoize(function(){var j=a.data.claim(e.dataFqn(e.COMMON_EXPORTED,"applinks-help-paths"));if(!j.entries){b.warn("Help paths not found, all help links are likely to be broken.")}return j.entries||{}});var i=function(j,m){d.nonEmptyString(j,"key");var l=f()[j]||j;if(m){d.nonEmptyString(m,"sectionKey");var k=l.replace(/\+/g,"");l+="#"+k+"-"+m}return l};function c(j,k){return j.indexOf(k,j.length-k.length)!==-1}function h(j,k){return c(j,k)?j:j+k}return{getPath:i,getFullPath:function(j,l){var k=this.baseUrl();return h(k,"/")+this.getPath(j,l)},baseUrl:g.partial(i,"applinks.docs.root")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/events.js' */
define("applinks/common/events",["applinks/lib/jquery","applinks/lib/lodash","applinks/lib/window","applinks/common/preconditions"],function(e,b,d,f){var c="applinks.event.";function a(g){return c+f.nonEmptyString(g,"eventId")}return{PREREADY:a("preready"),READY:a("ready"),APPLINKS_LOADED:a("loaded"),APPLINKS_UPDATED:a("updated"),NEW_APPLINK_CREATED:a("created"),ORPHANED_UPGRADE:a("orphaned.upgrade"),V3_ONBOARDING_FINISHED:a("v3-onboarding-finished"),Legacy:{MESSAGE_BOX_DISPLAYED:a("message-box-displayed")},applinksEvent:a,on:function(h,i,g){var j=g?b.bind(i,g):i;e(d.document).on(h,j)},off:function(g,h){e(d.document).off(g,h)},trigger:function(g,h){e(d.document).trigger(g,h)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/i18n.js' */
define("applinks/common/i18n",["applinks/lib/lodash","applinks/lib/jquery","applinks/lib/wrm","applinks/common/modules","applinks/common/preconditions","applinks/common/products"],function(e,g,c,f,h,b){var a=e.memoize(function(){var i=c.data.claim(f.dataFqn(f.COMMON_EXPORTED,"entity-types"));return h.hasValue(i,"entity-types","Entity Types data not found")});var d=e.memoize(function(){var i=c.data.claim(f.dataFqn(f.COMMON_EXPORTED,"authentication-types"));return h.hasValue(i,"authentication-types","Authentication Types data not found")});return{getApplicationTypeName:function(i){return b.getTypeName(i)},getEntityTypeName:function(i){return a().singular[i]||i},getPluralizedEntityTypeName:function(i){return a().plural[i]||i},getAuthenticationTypeName:function(i){return d()[i]||i}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/modules.js' */
define("applinks/common/modules",function(){return{PLUGIN_KEY:"com.atlassian.applinks.applinks-plugin",COMMON_EXPORTED:"applinks-common-exported",COMMON:"applinks-common",fqn:function(a){return this.PLUGIN_KEY+":"+a},dataFqn:function(a,b){return this.fqn(a)+"."+b}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/preconditions.js' */
define("applinks/common/preconditions",["applinks/lib/lodash"],function(c){function f(i,j,h){return d(c.isString(i)&&!c.isEmpty(i),h,b(j,": expected a non-empty string, was: <"+i+">"),i)}function g(i,j,h){return d(c.isFunction(i),h,b(j,": expected a function, was: "+i),i)}function a(i,j,h){return d(c.isArray(i),h,b(j,": expected an array, was: "+i),i)}function e(i,j,h){return d(i,h,b(j,": expected a value"),i)}function d(l,i,h,k){var j=i?i:h;if(!l){throw new Error(j)}return k||l}function b(i,h){return(i||"[unspecified]")+h}return{checkArgument:c.partial(d,c,c,"",c),nonEmptyString:f,isArray:a,isFunction:g,hasValue:e}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/products.js' */
define("applinks/common/products",["applinks/lib/lodash","applinks/lib/wrm","applinks/common/modules","applinks/common/preconditions"],function(c,b,d,f){var a=c.memoize(function(){var g=b.data.claim(d.dataFqn(d.COMMON_EXPORTED,"applinks-types"));return f.hasValue(g,"types","Application Types data not found")});function e(g){return a()[g]||g}return{BAMBOO:"bamboo",BITBUCKET:"stash",CONFLUENCE:"confluence",FECRU:"fecru",JIRA:"jira",REFAPP:"refapp",STASH:"stash",getTypeName:e}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/rest-service.js' */
(function(a,c,b){AppLinks=AJS.$.extend(window.AppLinks||{},{Event:{NAMESPACE:"applinks"},I18n:a,Docs:c});AppLinks.Event=AJS.$.extend(window.AppLinks.Event,b);if(AJS.AppLinksInitialisationBinder){AppLinks.initialisationBinder=AJS.AppLinksInitialisationBinder}else{AppLinks.initialisationBinder=function(d){AJS.toInit(d)}}AppLinks.initialisationBinder(function(){var d=AJS.$;AppLinks=d.extend(window.AppLinks||{},{failure:function(g){if(g.status==401){window.location.reload()}else{var e=AppLinks.parseError(g);var f=d(".page-error");if(f.length>0){f.html(e).fadeIn("slow")}else{alert("REST request failed: "+e)}}},jsonRequest:function(f,g,h,i,e){if(h){h=JSON.stringify(h)}d(".page-error").fadeOut("fast");if(!e){e=AppLinks.failure}return jQuery.ajax({url:f,type:g,data:h,dataType:"json",contentType:"application/json; charset=utf-8",cache:false,success:i,error:e,jsonp:false})},xmlRequest:function(f,g,h,i,e){if(h){h=JSON.stringify(h)}d(".page-error").fadeOut("fast");if(!e){e=AppLinks.failure}return jQuery.ajax({url:f,type:g,data:h,dataType:"xml",contentType:"application/xml; charset=utf-8",cache:false,success:i,error:e})},parseError:function(h){var f;try{f=JSON.parse(h.responseText)}catch(g){if(h.statusText){return f=h.statusText}else{return h}}if(f.message){if(d.isArray(f.message)){return f.message.join(" ")}return f.message}else{return h.statusText}},put:function(f,g,h,e){return AppLinks.jsonRequest(f,"PUT",g,h,e)},post:function(f,g,h,e){return AppLinks.jsonRequest(f,"POST",g,h,e)},update:function(f,g,e){AppLinks.put(AppLinks.self_link(f),f,g,e)},get:function(f,g,e){return AppLinks.jsonRequest(f,"GET",null,g,e)},getXml:function(f,g,e){return AppLinks.xmlRequest(f,"GET",null,g,e)},self_link:function(g){for(var e=0,h=g.link.length;e<h;e++){var f=g.link[e];if(f.rel=="self"){return f.href}}throw"No self-link found"},del:function(h,g,f){var e;if(typeof(h)=="string"){e=h}else{e=AppLinks.self_link(h)}return AppLinks.jsonRequest(e,"DELETE",null,g,f)},SPI:d.extend({},{API_VERSION:"1.0",REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks/",BASE_URL:AJS.contextPath()+"/rest/applinks/1.0",OAUTH_REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks-oauth/",OAUTH_BASE_URL:AJS.contextPath()+"/rest/applinks-oauth/1.0",setApiVersion:function(e){AppLinks.SPI.API_VERSION=e;AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL+AppLinks.SPI.API_VERSION)},setBaseUrl:function(e){AppLinks.SPI.BASE_URL=e},setOAuthBaseUrl:function(e){AppLinks.SPI.OAUTH_BASE_URL=e},getRemoteRestBaseUrl:function(e){return e+"/rest/applinks/"+AppLinks.SPI.API_VERSION},getRemotePluginServletBaseUrl:function(e){return e+"/plugins/servlet"},getAllLinks:function(g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink";return AppLinks.get(e,g,f)},getAllLinksWithAuthInfo:function(g,f){var e=AppLinks.SPI.BASE_URL+"/listApplicationlinks";return AppLinks.get(e,g,f)},getApplicationLinkState:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/listApplicationlinkstates/id/"+h;return AppLinks.get(e,g,f)},getLinksOfType:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/type/"+g;return AppLinks.get(e,h,f)},tryToFetchManifest:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/manifest.json?url="+encodeURIComponent(g);return AppLinks.get(e,h,f)},getManifestFor:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/manifest/"+h+".json";return AppLinks.get(e,g,f)},getLocalManifest:function(g,f){var e=AppLinks.SPI.BASE_URL+"/manifest.json";return AppLinks.get(e,g,f)},getRemoteManifest:function(g,h,f){var e=AppLinks.SPI.getRemoteRestBaseUrl(g)+"/manifest.json";return AppLinks.get(e,h,f)},getRemoteOAuthConsumerInfo:function(g,h,f){var e=AppLinks.SPI.getRemotePluginServletBaseUrl(g)+"/oauth/consumer-info";return AppLinks.getXml(e,h,f)},getApplinkStatus:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/status/"+h;return AppLinks.get(e,g,f)},createStaticUrlAppLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createStaticUrlAppLink?typeId="+h;return AppLinks.post(e,null,g,f)},createLink:function(l,j,n,f,k,m,h,o,g){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var i={applicationLink:l,username:j,password:n,createTwoWayLink:f,customRpcURL:k,rpcUrl:m,configFormValues:h};return AppLinks.post(e,i,o,g)},createLinkWithOrphanedTrust:function(l,j,o,f,k,m,h,n,p,g){var e=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var i={applicationLink:l,username:j,password:o,createTwoWayLink:f,customRpcURL:k,rpcUrl:m,configFormValues:h,orphanedTrust:n};return AppLinks.post(e,i,p,g)},verifyTwoWayLinkDetails:function(e,k,l,h,j,g){var f=AppLinks.SPI.BASE_URL+"/applicationlinkForm/details";var i={username:l,password:h,remoteUrl:e,rpcUrl:k};return AppLinks.post(f,i,j,g)},getApplicationLinkInfo:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/applicationlinkInfo/id/"+g;return AppLinks.get(e,h,f)},deleteLink:function(i,e,h,g){var f=AppLinks.SPI.BASE_URL+"/applicationlink/"+i.id;if(e){f+="?reciprocate=true"}return AppLinks.del(f,h,g)},makePrimary:function(g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/primary/"+g.id;return AppLinks.post(e,null,f)},relocate:function(j,h,e,i,g){var f=AppLinks.SPI.BASE_URL+"/relocateApplicationlink/"+j.id+"?newUrl="+encodeURIComponent(h)+"&nowarning="+(e?"true":"false");return AppLinks.post(f,null,i,g)},legacyUpgrade:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/upgrade/legacy/"+h.id;return AppLinks.post(e,null,g,f)},ualUpgrade:function(i,e,h,g){var f=AppLinks.SPI.BASE_URL+"/upgrade/ual/"+i.id;return AppLinks.post(f,e,h,g)},getEntityTypesForApplicationType:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/type/entity/"+h;return AppLinks.get(e,g,f)},getLocalEntitiesWithLinksToApplication:function(e,h,g){var f=AppLinks.SPI.BASE_URL+"/entitylink/localEntitiesWithLinksTo/"+e+".json";return AppLinks.get(f,h,g)},getEntityLinksForApplication:function(e,h,g){var f=AppLinks.SPI.BASE_URL+"/entities/"+e+".json";AppLinks.get(f,h,g)},getEntityLinksForApplicationUsingAnonymousAccess:function(e,h,g){var f=AppLinks.SPI.BASE_URL+"/entities/anonymous/"+e+".json";return AppLinks.get(f,h,g)},createNonUalEntityLink:function(n,i,f,h,l,g,m,k){var e=AppLinks.SPI.BASE_URL+"/entitylink/"+n+"/"+i+"?reciprocate=false";var j={applicationId:f,typeId:h,key:l,name:g,isPrimary:false};return AppLinks.put(e,j,m,k)},createEntityLink:function(j,i,f,e,k,h){var g=AppLinks.SPI.BASE_URL+"/entitylink/"+j+"/"+i+"?reciprocate=";g+=(e?"true":"false");return AppLinks.put(g,f,k,h)},getConfiguredEntityLinks:function(h,g,i,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/primaryLinks/"+h+"/"+g+".json";return AppLinks.get(e,i,f)},deleteEntityLink:function(j,i,f,e,k,h){var g=AppLinks.SPI.BASE_URL+"/entitylink/"+j+"/"+i+"?typeId="+f.typeId+"&key="+f.key+"&applicationId="+f.applicationId+"&reciprocate="+e;return AppLinks.del(g,k,h)},makePrimaryEntityLink:function(i,h,e,j,g){var f=AppLinks.SPI.BASE_URL+"/entitylink/primary/"+i+"/"+h+"?typeId="+e.typeId+"&key="+e.key+"&applicationId="+e.applicationId;return AppLinks.post(f,null,j,g)},canDeleteAppLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/permission/reciprocate-application-delete/"+h;return AppLinks.get(e,g,f)},canDeleteEntityLink:function(i,h,e,j,g){var f=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-delete/"+e.applicationId+"/"+i+"/"+h+"/"+e.typeId+"/"+e.key;return AppLinks.get(f,j,g)},canCreateReciprocateEntityLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-create/"+h;return AppLinks.get(e,g,f)},processPermissionCode:function(f){var e={noPermission:function(){},missing:function(){},credentialsRequired:function(g){},authenticationFailed:function(g){},noAuthentication:function(g){},noAuthenticationConfigured:function(){},noConnection:function(){},allowed:function(){},unrecognisedCode:function(g){},updateView:function(i,h,g){}};if(!f){f={}}f=d.extend(e,f);return function(h){var g=h.code;if(g=="NO_PERMISSION"){f.noPermission()}else{if(g=="MISSING"){f.missing()}else{if(g=="CREDENTIALS_REQUIRED"){f.credentialsRequired(h.url)}else{if(g=="AUTHENTICATION_FAILED"){f.authenticationFailed(h.url)}else{if(g=="NO_AUTHENTICATION"){f.noAuthentication(h.url)}else{if(g=="NO_AUTHENTICATION_CONFIGURED"){f.noAuthenticationConfigured()}else{if(g=="NO_CONNECTION"){f.noConnection()}else{if(g=="ALLOWED"){f.allowed()}else{f.unrecognisedCode(h.code)}}}}}}}}}},addAuthenticationTrigger:function(g,e,f){if(!f){f={}}if(typeof f.onSuccess=="undefined"){f.onSuccess=function(){location.reload()}}if(typeof f.onFailure=="undefined"){f.onFailure=function(){return true}}d(g).unbind("click");d(g).click(function(){if(f.before){f.before()}AppLinks.authenticateRemoteCredentials(e,f.onSuccess,f.onFailure)})},deleteOrphanedTrust:function(i,g,h,f){var e=AppLinks.SPI.BASE_URL+"/orphaned-trust/"+g+"/"+i;return AppLinks.del(e,h,f)},getOrphanedTrust:function(g,f){var e=AppLinks.SPI.BASE_URL+"/orphaned-trust/";return AppLinks.get(e,g,f)},showCreateEntityLinkSuggestion:function(){return true},getApplicationLink:function(h,g,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/"+h;return AppLinks.get(e,g,f)},createApplicationLink:function(h,f,k,l,e,m,i){var g=AppLinks.SPI.BASE_URL+"/applicationlink";var j={id:h,name:f,rpcUrl:k,displayUrl:l,typeId:e};return AppLinks.put(g,j,m,i)},createConsumer:function(g,p,f,o,k,n,i,r,j,m,q,h){var e=AppLinks.SPI.OAUTH_BASE_URL+"/applicationlink/"+g+"/authentication/consumer";var l={key:p,name:f,description:o,sharedSecret:k,publicKey:n,outgoing:m,twoLOAllowed:i,executingTwoLOUser:r,twoLOImpersonationAllowed:j};return AppLinks.put(e,l,q,h)},createConsumerAutoConfigure:function(l,k,h,e,j,g){var f=AppLinks.SPI.OAUTH_BASE_URL+"/applicationlink/"+l+"/authentication/consumer?autoConfigure=true";var i={twoLOAllowed:k,executingTwoLOUser:h,twoLOImpersonationAllowed:e};return AppLinks.put(f,i,j,g)},registerProvider:function(k,j,g,i,f){var e=AppLinks.SPI.BASE_URL+"/applicationlink/"+k+"/authentication/provider";var h={config:g,provider:j};return AppLinks.put(e,h,i,f)},enableFeature:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/features/"+g;return AppLinks.put(e,{},h,f)},disableFeature:function(g,h,f){var e=AppLinks.SPI.BASE_URL+"/features/"+g;return AppLinks.del(e,h,f)}},(window.AppLinks&&window.AppLinks.SPI)||{})});AppLinks.UI={showInfoBox:function(e){d(".aui-message.success").remove();AppLinks.UI.createMessage("success",e,"page-info")},hideInfoBox:function(){d(".aui-message.success").remove()},showErrorBox:function(e){AppLinks.UI.createMessage("error",e,"page-error")},hideErrorBox:function(){d(".aui-message.error").remove()},showWarningBox:function(f){if(d.isArray(f)&&f.length>0){var e=d("<ul></ul>");d(f).each(function(h){e.append(d("<li/>",{text:f[h]}))});var g=d('<div class="page-warning"></div>').append(e);AppLinks.UI.createMessage("warning",g.html(),"page-warning")}else{AppLinks.UI.createMessage("warning",f,"page-warning")}},hideWarningBox:function(){d(".aui-message.warning").remove()},shortenString:function(f,e){if(f.length>e){f=f.substring(0,e)+"..."}return f},createMessage:function(f,g,e){var h=d('<div class="'+e+'">');h.html(g);AJS.messages[f](".applinks-message-bar",{title:"",body:h.wrap("<div></div>").parent().html(),closeable:true});d(document).trigger(AppLinks.Event.Legacy.MESSAGE_BOX_DISPLAYED)},displayValidationErrorMessages:function(e,g,f){if(d.isArray(f)){d(f).each(function(k,j){var l=d('<div class="error applinks-error">');l.text(j);d(g).find("."+e).append(l)})}else{if(typeof f!="undefined"){var h=d('<div class="error applinks-error">');h.text(f.toString());d(g).find("."+e).append(h)}}},displayValidationError:function(e,f,g){return function(l){if(l.status==401){window.location.reload();return}d(".applinks-error").remove();d(".loading").remove();var j=l.responseText;var k=d.parseJSON(j);var i=k.message;if(typeof k.fields=="undefined"){AppLinks.UI.displayValidationErrorMessages(e,f,i)}else{var h=k.fields;d(h).each(function(m){var n=d('<div class="error applinks-error" id="'+h[m]+'-error">');n.text(i[m]);if(d(f).find("."+h[m]).length>0){n.insertAfter(d(f).find("."+h[m]))}else{n.insertAfter(d(f).find("."+e).append(n))}})}d(f).find("."+e).addClass("fully-populated-errors");if(g){g()}}},addProtocolToURL:function(e){var h=d.trim(e);var g=h.toLowerCase();var f=false;if(g.length>=7){if(g.substring(0,7).indexOf("http")!=-1){f=true}}if(!f){h="http://"+h}return h},prettyJoin:function(f,i,h){if(!h){h="and"}var e=f.length;var g="";d.each(f,function(j,k){if(j==(e-1)&&e>1){g+=" "+h+"  "+i(k)}else{g+=i(k);if(j+2<e){g+=", "}}});return g},showLoadingIcon:function(e){d('<span class="loading">&nbsp;</span>').insertAfter(e)},hideLoadingIcon:function(e){d(e).next(".loading").remove()},findUrl:function(h){var g=undefined;var i=h.toLowerCase();var f=i.indexOf("http:");if(f==-1){f=i.indexOf("https:")}if(f>-1){var e=i.indexOf(" ",f);if(e==-1){e=i.length}g=h.substring(f,e)}return g},findApplicationType:function(e){e=e.toLowerCase();if(e.indexOf("jira")!=-1){return"jira"}else{if(e.indexOf("fisheye")!=-1){return"fecru"}else{if(e.indexOf("confluence")!=-1){return"confluence"}else{if(e.indexOf("refapp")!=-1){return"refapp"}else{return undefined}}}}},escapeSelector:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},sanitiseHTML:function(e){var f={"<":"&lt;",'"':"&quot;","&":"&amp;"};return e.replace(/[<"&]/g,function(g){return f[g]})},refreshOrphanedTrust:function(){var e=function(f){d("tr.orphaned-trust-row").each(function(){var l=d(this);var m=l.attr("data-id");var j=l.attr("data-type");var h=false;for(var g=0;g<f.orphanedTrust.length;g++){var k=f.orphanedTrust[g];if(m==k.id&&j==k.type){h=true;break}}if(!h){l.remove();if(f.orphanedTrust.length==0){d(".orphaned-trust-warning").hide()}}})};AppLinks.SPI.getOrphanedTrust(e)},removeCssClass:function(e,f){d(e).removeClass(function(h,j){var i=j.split(" ");var g="";d.each(i,function(k,l){if(l.indexOf(f)!=-1){g=l}});return g})}};(function(){var e=d({});d.each(["bind","unbind","trigger"],function(f,g){AppLinks.UI[g]=function(){return e[g].apply(e,arguments)}})})();d(document).trigger(AppLinks.Event.PREREADY);d(document).trigger(AppLinks.Event.READY)})})(require("applinks/common/i18n"),require("applinks/common/docs"),require("applinks/common/events"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/autocomplete.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){AppLinks.autoComplete={cacheManager:function(c){var a={},b=[],c=c||30;return{get:function(d){return a[d]},put:function(d,e){a[d]=e;b.push(d);if(b.length>c){delete a[b.shift()]}},clear:function(){a={};b=[]}}}};(function(d){var c=function(f){AJS.log("InputDrivenDropDown: truncating text");var h=f.$.closest(".aui-dropdown").width(),g=20;d("a span:not(.icon)",f.$).each(function(){var j=d(this),i=AJS("var","&#8230;"),l=i.width(),k=false;j.wrapInner(d("<em>"));d("em",j).each(function(){var m=d(this);m.show();if(this.offsetLeft+this.offsetWidth>h){var t=this.childNodes,s=false;for(var o=t.length-1;o>=0;o--){var p=t[o],n=1,r=(p.nodeType==3)?"nodeValue":"innerHTML",q=p[r];do{if(n<=q.length){p[r]=q.substr(0,q.length-n++)}else{break}}while(this.offsetLeft+this.offsetWidth+l>h-g);if(n<=q.length){s=true;break}}if(s){k=true}else{m.hide()}}});if(k){j.append(i);this.elpss=i}})};var b=function(f,l){if(!l.length||!l[0]){return}AJS.log("InputDrivenDropDown: highlighting tokens");for(var h=0,j=l.length;h<j;h++){var g=l[h];l[h]=g?g.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g,"\\$"):""}var k=new RegExp("("+l.join("|")+")","gi");d("li a:not(.dropdown-prevent-highlight) span",f.$).each(function(){var m=d(this),i=m.html().replace(k,"<strong>$1</strong>");m.html(i)})};var e=function(j,g){var i=j.options,h=j.dd;if(h){h.hide();h.$.remove()}i.ajsDropDownOptions=i.ajsDropDownOptions||{};if(i.ajsDropDownOptions&&!i.ajsDropDownOptions.alignment){i.ajsDropDownOptions.alignment="left"}i.ajsDropDownOptions.selectionHandler=i.ajsDropDownOptions.selectionHandler||function(l,k){if(l.type!="click"){l.preventDefault();d("a",k).click();document.location=d("a",k).attr("href")}};i.ajsDropDownOptions.displayHandler=function(k){return AJS.escapeHtml(k.name)};var f=j.dd=new AJS.dropDown(g.matrix,i.ajsDropDownOptions)[0];if(i.ajsDropDownOptions&&i.ajsDropDownOptions.className){f.$.addClass(i.ajsDropDownOptions.className)}if(i.dropdownPlacement){i.dropdownPlacement(f.$)}else{AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");d("body").append(f.$)}b(f,g.queryTokens||[g.query]);c(f);if(i.dropdownPostprocess){i.dropdownPostprocess(f.$)}f.show(j._effect);if(typeof i.onShow=="function"){i.onShow.call(f,f.$)}return f};function a(g,f){this._effect="appear";this._timer=null;this.id=g;this.options=f;this.inactive=false;this.busy=false;this.cacheManager=AppLinks.autoComplete.cacheManager()}a.prototype.clearCache=function(){this.cacheManager.clear()};a.prototype.change=function(h,g){var f=this;if(h!=f._value||g){f._value=h;f.busy=false;clearTimeout(f._timer);if(g||(/\S{0,}/).test(h)){var i=f.cacheManager.get(h);if(i){e(f,i)}else{f.busy=true;f._timer=setTimeout(function(){f.options.getDataAndRunCallback.call(f,h,f.show)},200)}}else{f.dd&&f.dd.hide()}}};a.prototype.dropDownLength=function(){return this.dd.links?this.dd.links.length:0};a.prototype.dropDownItem=function(f){return this.dropDownLength()>f?this.dd.links[f]:null};a.prototype.hide=function(){this.dd&&this.dd.hide()};a.prototype.remove=function(){var f=this.dd;if(f){this.hide();f.$.remove()}this.inactive=true;this.options.onDeath&&this.options.onDeath()};a.prototype.show=function(g,i,h){if(this.inactive){AJS.log("Quick search abandoned before server response received, ignoring. "+this);return}var f={matrix:g,query:i,queryTokens:h};this.cacheManager.put(i,f);e(this,f);this.busy=false};AppLinks.inputDrivenDropdown=function(f){return new a("inputdriven-dropdown",f)}})(jQuery)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/fecru-compatibility.js' */
if(jQuery!=undefined&&AJS!=undefined){jQuery=AJS.$};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-wizard', location = 'applinks/internal/non-amd/wizard.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){(function(d){d.fn.wizard=function(v){var u={width:500,height:350,onshow:function(w,x){return true},aftershow:function(){return true},oncancel:function(){return true},onsubmit:function(){return true},aftersubmit:function(){return true},onnext:function(){return true},onprevious:function(){return true},cancelLabel:"Cancel",submitLabel:"Create",nextLabel:"Next",previousLabel:"Previous",id:""};if(!v){v={}}v=d.extend(u,v);var t=this;this.each(function(){var D=d(this);var w=new AJS.Dialog(v.width,v.height,v.id);var L=q(w,v.onshow,v.aftershow);var K=c(w,v.oncancel);var z=h(w,v.onsubmit,v.aftersubmit);var M=a(w,v.onprevious);var I=m(w,v.onnext);var G=k(w);var B=o(w);var C=g(w);var H=l(w);var J=s(w);var E=n(w);if(v.showButtonId){d("#"+v.showButtonId).click(L)}var y=f(D);for(var A=0;A<y.length;A++){var F=y[A];j(w,F);if(F.className){w.addHeader(F.title,F.className+"-header")}else{w.addHeader(F.title)}if(A!=0&&d(F.div).attr("previous")!="false"){w.addButton(v.previousLabel,M,"applinks-previous-button")}if(A<y.length-1&&d(F.div).attr("submit")!="true"&&d(F.div).attr("next")!="false"){w.addButton(v.nextLabel,I,"applinks-next-button")}if(d(F.div).attr("submit")=="true"){w.addButton(v.submitLabel,z,"wizard-submit")}if(!w.getPage(A).buttonpanel){w.addButton("",null);d(w.getPage(A).buttonpanel).empty();var x=d('<button class="aui-button aui-button-link button-panel-button applinks-cancel-link">'+v.cancelLabel+"</button>");w.getPage(A).buttonpanel.append(x);x.click(K)}else{var x=d('<button class="aui-button aui-button-link button-panel-link button-panel-cancel-link applinks-cancel-link">'+v.cancelLabel+"</button>");d(w.getPage(A).buttonpanel).append(x);x.click(K)}if(A<y.length-1){w.addPage()}}t={dialog:w,nextPage:I,prevPage:M,submit:z,cancel:K,show:L,disableNextBtn:G,enableNextBtn:B,disableSubmitBtn:C,enableSubmitBtn:H,disablePreviousBtn:J,enablePreviousBtn:E};w.gotoPage(0);w.gotoPanel(0)});return t};function s(t){return function(){b(r(t,"applinks-previous-button"))}}function n(t){return function(){i(r(t,"applinks-previous-button"))}}function k(t){return function(){b(r(t,"applinks-next-button"))}}function o(t){return function(){i(r(t,"applinks-next-button"))}}function g(t){return function(v){var u=r(t,"wizard-submit");b(u);if(typeof(v)=="undefined"||v){d('<span class="loading">&nbsp;</span>').insertBefore(u)}else{u.parent().find(".loading").remove()}}}function l(t){return function(){var u=r(t,"wizard-submit");i(u);u.parent().find(".loading").remove()}}function r(u,t){return d(u.getPage(u.curpage).buttonpanel).find("."+t)}function p(t){d(t.popup.element).find("form").each(function(){this.reset()})}function i(t){t.attr("disabled",false)}function b(t){t.attr("disabled",true)}function q(t,u,v){return function(w){if(u(t,w)!==false){t.gotoPage(0);t.gotoPanel(0);d(document).unbind("keydown.ual.dialog");d(document).bind("keydown.ual.dialog",e(t));t.show();v()}}}function c(t,u){return function(){if(u(t)!==false){t.hide();p(t)}}}function a(t,u){return function(){if(u(t)!==false){t.prevPage()}}}function m(t,u){return function(){if(u(t)!==false){t.nextPage()}}}function e(t){return function(u){if(u.keyCode===27){p(t);d(document).unbind("keydown.ual.dialog")}}}function h(u,v,t){return function(){if(v(u)!==false){t(u);p(u)}}}function j(v,w){var u=d("> div[panel]",w.div);if(u.length>0){u.each(function(y,z){var x=v.addPanel(z.title,null,z.className,"menu-"+z.id);x.getCurrentPanel().body.append(u[y])})}else{var t=v.addPanel(w.title);t.getCurrentPanel().body.append(w.div)}}function f(v){var u=d(" > div",v);var t=[];u.each(function(x){var w=d(this);t[x]={title:w.attr("title")||null,className:w.attr("class"),div:w}});return t}})(jQuery)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-wizard', location = 'applinks/internal/non-amd/applinkwizard.js' */
(function(a){AppLinks.Wizard={getWizard:function(){return a("#create-application-link-container").data("wizard")},initAuthenticationUI:function(d){var h=a(d);var f=h.find(".create-reciprocal-link");var c=h.find(".ual-arrow");var l=h.find(".two-way-link-details");var j=h.find(".reciprocal-link-description");var b=h.find(".no-reciprocal-link-description");f.click(function(){if(f.is(":checked")){c.removeClass("no-background");l.show();j.show();b.hide()}else{c.addClass("no-background");l.hide();j.hide();b.show()}});var i=h.find(".same-user-radio-btn");var k=h.find(".different-user-radio-btn");var e=h.find(".different-userbase-image");var g=h.find(".same-userbase-image");i.click(function(){e.addClass("different-userbase-image-grey");g.removeClass("same-userbase-image-grey")});k.click(function(){g.addClass("same-userbase-image-grey");e.removeClass("different-userbase-image-grey")})},initNonUALUI:function(e){var c=a(e);var b=c.find(".application-types");for(var d=0;d<nonAppLinksApplicationTypes.length;d++){a('<option value="'+nonAppLinksApplicationTypes[d].typeId+'">'+nonAppLinksApplicationTypes[d].label+"</option>").appendTo(b)}},fetchManifest:function(e,h,d,b){var i=h.find("#application-url");if(i.val()==""){var c=h.find("#application-types");if(c.val()==""){a('<div class="error applinks-error">'+"URL cannot be empty."+"</div>").insertAfter(i);return false}var g=function(j){e.enableSubmitBtn();e.enablePreviousBtn();e.cancel();AppLinks.UI.listApplicationLinks(j.applicationLink.id,"new",j)};AppLinks.SPI.createStaticUrlAppLink(c.val(),g,null);return true}var f=AppLinks.UI.addProtocolToURL(i.val());AppLinks.UI.showLoadingIcon(i);var g=function(l){var k=l;e.enableNextBtn();h.find(".loading").remove();h.find(".reciprocal-rpc-url").val(a("#baseUrl").val());if(typeof l.typeId!="undefined"){AppLinks.Wizard.handleUALManifest(k,h);e.dialog.gotoPage(2);h.find(".reciprocal-link-username").focus();if(d){d(k)}}else{if(l.code=="applinks.warning.redirected.host"&&!i.data("hasWarnedAboutRedirection")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("hasWarnedAboutRedirection","true");var m=function(){a(i).removeData("hasWarnedAboutRedirection");a(i).unbind("change",m)};i.bind("change",m)}else{if(l.code=="applinks.warning.unknown.host"&&!i.data("forceWhenHostIsOffline")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("forceWhenHostIsOffline","true");var j=function(){a(i).removeData("forceWhenHostIsOffline");a(i).unbind("change",j)};i.bind("change",j)}else{if(k.code=="applinks.warning.unknown.host"||k.code=="applinks.warning.redirected.host"){delete k.warning;delete k.code}AppLinks.Wizard.handleNonUALManifest(k,f,h);e.dialog.gotoPage(1);h.find(".application-name").focus();if(b){b(k)}}}}};e.disableNextBtn();AppLinks.SPI.tryToFetchManifest(f,g,AppLinks.UI.displayValidationError("manifest-validation-errors",h,function(){e.enableNextBtn()}));return f},handleUALManifest:function(f,e){var c=a(e);c.find(".remote-app-image").removeClass(function(j,l){var k=l.split(" ");var i="";a.each(k,function(m,n){if(n.indexOf("application-type-image-")!=-1){i=n}});return i});c.find(".remote-app-image").addClass("application-type-image-"+f.typeId);c.find(".link-to-app-type").html(AJS.format("Link to {0}",AppLinks.I18n.getApplicationTypeName(f.typeId)));c.find(".remote-app-name").text(AppLinks.UI.shortenString(f.name,20));c.find(".create-reciprocal-link").attr("checked",true);c.find("#reciprocal-link-back-to-server").html(AJS.format("Also create a link from \u0027\u0027{0}\u0027\u0027 back to this server.",AJS.escapeHtml(f.name)));var d=["administrator",AJS.escapeHtml(f.name),'<a target="_blank" href="'+AppLinks.Docs.getDocHref("applinks.docs.adding.application.link")+'">',"</a>"];if(f.applinksVersion!=undefined){var h=f.applinksVersion.split(".");var b=parseInt(h[0]);var g=parseInt(h[1]);if((f.typeId=="jira"||f.typeId=="confluence")&&(b==3&&g<10)){d[0]="system administrator"}}c.find(".reciprocal-link-description").html(AJS.format("To do this, you must provide {0} credentials for \u0027\u0027{1}\u0027\u0027. These credentials are only used to authenticate you against \u0027\u0027{1}\u0027\u0027 and will not be stored on this server. {2}Read More.{3}",d));c.find(".no-reciprocal-link-description").hide();c.find(".no-reciprocal-link-description").html(AJS.format("Tick this box to create a link from \u0027\u0027{0}\u0027\u0027 back to this server, otherwise clicking on next will create the Application Link to \u0027\u0027{0}\u0027\u0027 without any pre-configured authentication.",AJS.escapeHtml(f.name)));c.find(".reciprocal-link-username").val("");c.find(".reciprocal-link-password").val("");c.find(".ual-arrow").removeClass("no-background");c.find(".two-way-link-details").show();c.find(".reciprocal-link-description").show();c.find(".no-reciprocal-link-description").hide()},handleNonUALManifest:function(d,e,c){var b=a(c);b.find(".application-name").val("");b.find(".application-types option:first-child").attr("selected","selected");b.find(".non-ual-application-url").text(e);if(d.warning){b.find(".create-non-ual-warning").show();b.find(".create-non-ual-warning").html(d.warning)}else{b.find(".create-non-ual-warning").hide()}},checkReciprocalLinkFormThreeStepMode:function(c,d,g,j,f){var h=a(c);if(h.find(".create-reciprocal-link").is(":checked")){var k=a.trim(h.find(".reciprocal-rpc-url").val());if(k==""){a("<div class='error applinks-error'>"+"URL cannot be empty."+"</div>").insertAfter(h.find(".reciprocal-rpc-url"));if(f){f()}return}var e=h.find(".reciprocal-link-username");var b=h.find(".reciprocal-link-password");if(e.val()==""){a('<div class="error applinks-error">'+"Username cannot be empty"+"</div>").insertAfter(e);if(f){f()}return false}var i=function(l){h.find(".same-user-description").find("input").attr("checked",true);h.find(".trust-radio-btn").attr("checked",true);h.find(".same-user-radio-btn").click();g(l)};k=AppLinks.UI.addProtocolToURL(k);AppLinks.SPI.verifyTwoWayLinkDetails(j,k,e.val(),b.val(),i,AppLinks.UI.displayValidationError("two-way-link-errors",c,f));return false}else{d();return false}},checkReciprocalLinkFormTwoStepMode:function(f,h,b,i){var c=a(f);var g=a.trim(c.find(".reciprocal-rpc-url").val());if(g==""){a("<div class='error applinks-error'>"+"URL cannot be empty."+"</div>").insertAfter(c.find(".reciprocal-rpc-url"));if(i){i()}return}var d=c.find(".reciprocal-link-username");var e=c.find(".reciprocal-link-password");if(d.val()==""){a('<div class="error applinks-error">'+"Username cannot be empty"+"</div>").insertAfter(d);if(i){i()}return false}g=AppLinks.UI.addProtocolToURL(g);AppLinks.SPI.verifyTwoWayLinkDetails(h,g,d.val(),e.val(),b,AppLinks.UI.displayValidationError("two-way-link-errors",f,i));return false}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-oauth-dance', location = 'applinks/internal/feature/oauth/oauth-callback.js' */
define("applinks/feature/oauth-callback",["applinks/lib/window","applinks/lib/lodash","applinks/common/preconditions"],function(c,a,d){function b(e){d.nonEmptyString(e,"url");this._url=e}b.prototype.source=function(e){d.hasValue(e,"source");this._source=e;return this};b.prototype.onSuccess=function(e){d.isFunction(e,"onSuccess");this._onSuccess=e;return this};b.prototype.onFailure=function(e){d.isFunction(e,"onFailure");this._onFailure=e;return this};b.prototype.success=function(){this.oauthWindow.close();if(this._onSuccess){this._onSuccess(this._source)}delete c.oauthCallback};b.prototype.failure=function(){this.oauthWindow.close();if(this._onFailure){this._onFailure(this._source)}delete c.oauthCallback};b.prototype.open=function(){c.oauthCallback=this;this.oauthWindow=c.open(this._url,"com_atlassian_applinks_authentication")};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-oauth-dance', location = 'applinks/internal/feature/oauth/oauth-dance.js' */
define("applinks/feature/oauth-dance",["applinks/lib/console","applinks/lib/jquery","applinks/lib/lodash","applinks/lib/window","applinks/common/events","applinks/common/preconditions","applinks/feature/oauth-callback"],function(a,f,c,e,b,h,d){function g(j,i){this._scope=j||e.document;this._selector=i}g.prototype.onSuccess=function(i){h.isFunction(i,"onSuccess");this._onSuccess=i;return this};g.prototype.onFailure=function(i){h.isFunction(i,"onFailure");this._onFailure=i;return this};g.prototype.defaultSuccess=function(){return this.onSuccess(function(){e.location.reload()})};g.prototype.defaultFailure=function(){return this.onFailure(function(){return true})};g.prototype.initialize=function(){var i=this;if(this._selector){f(this._scope).on("click",this._selector,function(j){j.preventDefault();i._open(f(this))})}else{f(this._scope).on("click",function(j){j.preventDefault();i._open(f(this))})}};g.prototype.start=function(){var j=f(this._scope);var i=this._selector?j.find(this._selector):j;this._open(i)};g.prototype._open=function(i){if(i.length!==1){a.warn("Could not trigger OAuth dance, the source is not a single HTML element: "+i);return}var j=i.attr("data-authorisation-uri");if(j){this._onSuccess||this.defaultSuccess();this._onFailure||this.defaultFailure();new d(j).source(i).onSuccess(this._onSuccess).onFailure(this._onFailure).open()}else{a.warn("Could not trigger OAuth dance, data-authorisation-uri missing for: "+i)}};return g});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-oauth-ui', location = 'js/oauth-dialog.js' */
(function(c,a,b){AppLinks.authenticateRemoteCredentials=function(d,f,e){c(".applinks-error").remove();new b(d).onSuccess(f).onFailure(e).open()}})(require("applinks/lib/jquery"),require("applinks/common/events"),require("applinks/feature/oauth-callback"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-ui', location = 'js/confirm-dialog.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){AppLinks=AJS.$.extend(window.AppLinks||{},{confirmDialog:function(f,e,c,d){if(!d){d=function(){}}var b=new AJS.Dialog({width:450,height:180,id:"confirm-dialog",onCancel:d});b.addHeader(f);b.addPanel(f);b.getCurrentPanel().html(e);var a=function(g){b.remove();g.call(b)};b.addButton(AJS.params.statusDialogAddButtonLabel||"Confirm",function(){a(c)},"confirm");b.addButton(AJS.params.statusDialogCancelButtonLabel||"Cancel",function(){a(d)},"cancel");b.show();b.popup.element.addClass("aui-dialog-content-ready")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-ui', location = 'js/delete-link-dialog.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){var c=AJS.$,d,a,h,b,g=function(){c(".delete-applink-loading").hide();e.enableSubmitBtn()},i={showButtonId:"delete-application-link",cancelLabel:"Cancel",oncancel:function(){var j=e.dialog.popup.element;j.find("h2").empty()},submitLabel:"Confirm",width:420,height:330,id:"delete-application-link-dialog",aftershow:function(){f.find(".applinks-error").remove();var k=e.dialog.popup.element;var j=c("<a/>",{"class":"ual-help-link dialog-help-link help-link",href:AppLinks.Docs.getDocHref(d.helpKey,null),target:"_blank",title:"Help","data-help-link-key":d.helpKey}).append(c("<span/>",{"class":"aui-icon aui-icon-small aui-iconfont-help",text:"Help"}));k.find("h2").append(c("<span>").text(d.title)).append(j);var m=d.confirmMessage;c("#delete-applink-text").html(m);if(a==false){var l=function(p){var q=p.applinksVersion&&true;if(q){var r=function(s){a=true;h=true;b=s;g()};var n=function(s){a=false;h=false;g()};var o=function(){a=true;h=false;g()};AppLinks.checkPermission(d.doPermissionCheck,o,r,n,AppLinks.UI.displayValidationError("delete-applink-error",f))}else{g()}};c(".delete-applink-loading").show();e.disableSubmitBtn(false);AppLinks.SPI.getManifestFor(d.applicationId,l,AppLinks.UI.displayValidationError("delete-applink-error",f))}},onnext:function(j){c(".delete-reciprocal-applink-form").hide();c(".no-reciprocal-applink-form").hide();c(".authenticate-applink-form").hide();var k=function(){c(".authenticate-applink-form").hide();c(".delete-reciprocal-applink-form").show();c("#delete-reciprocal-applink-text").text(d.reciprocalLinkMessage);c(".yes-delete-reciprocal-link").text(d.deleteYesMessage);c(".no-delete-reciprocal-link").text(d.deleteNoMessage);c("#yes-delete-reciprocal-link").attr("checked",true);c(".delete-reciprocal-applink-form").show()};if(h){c(".authenticate-applink-form").show();c(".authenticate-message").text(d.authenticationMessage);AppLinks.SPI.addAuthenticationTrigger("#authenticate-link",b,{before:function(){j.hide()},onSuccess:function(){j.show();var m=function(){k()};var l=function(n){c(".authenticate-applink-form").hide();c(".no-reciprocal-applink-form").show();if(!n){c(".no-link-message").text(d.noReciprocalLinkMessage)}else{c(".no-link-message").text(d.failedToDetectReciprocalLinkMessage+" "+n)}};AppLinks.checkPermission(d.doPermissionCheck,m,h,l,AppLinks.UI.displayValidationError("delete-reciprocal-applink-error",f))},onFailure:function(){j.show();c(".authenticate-applink-form").hide();c(".no-reciprocal-applink-form").show();c(".no-link-message").text(d.authenticationFailedMessage)}})}else{k()}},onsubmit:function(k){var n=function(){e.enableSubmitBtn();if(d.callback()){k.hide()}};if(e.dialog.curpage==1){var m=false;var o=c("#yes-delete-reciprocal-link");var l=o.is(":visible");var j=o.is(":checked");if(l&&j){m=true}e.disableSubmitBtn();d.doDelete(m,n,AppLinks.UI.displayValidationError("delete-applink-error",f,function(){e.enableSubmitBtn()}))}else{if(a){e.nextPage()}else{e.disableSubmitBtn();d.doDelete(false,n,AppLinks.UI.displayValidationError("delete-applink-error",f,function(){e.enableSubmitBtn()}))}}return false}};var e=c("#delete-link-dialog").wizard(i);var f=c(e.dialog.popup.element);AppLinks.showDeleteLinkDialog=function(j){a=false;h=false;d=j;e.show()};AppLinks.bindDeleteLink=function(k){var j=k.data.application;k.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.SPI.getApplicationLinkInfo(j.id,function(l){var s=c("<div>");s.append(c("<div>").text(AJS.format("Confirm that you want to delete the Application Link to \u0027\u0027{0}\u0027\u0027 ({1}).",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId))));if(l.configuredAuthProviders.length>0){var n=AppLinks.UI.prettyJoin(l.configuredAuthProviders,function(t){return AppLinks.I18n.getAuthenticationTypeName(t)});s.append(c("<div>").text(AJS.format("The authentication information stored for {0} will be deleted.",n)));if(l.numConfiguredEntities>0){var r;if(l.numConfiguredEntities>1){r="applinks.dialog.delete.entity.links.plural"}else{r="applinks.dialog.delete.entity.links.singular"}var o=AppLinks.UI.prettyJoin(l.hostEntityTypes,function(t){if(l.numConfiguredEntities>1){return AppLinks.I18n.getPluralizedEntityTypeName(t)}else{return AppLinks.I18n.getEntityTypeName(t)}});var p=AppLinks.UI.prettyJoin(l.remoteEntityTypes,function(t){return AppLinks.I18n.getPluralizedEntityTypeName(t)});var m=AJS.I18n.getText(r,l.numConfiguredEntities,o,p,j.name);s.append(c("<div>").text(m))}}var q={title:AJS.format("Delete Link to \u0027\u0027{0}\u0027\u0027",j.name),applicationId:j.id,confirmMessage:s,reciprocalLinkMessage:AJS.format("{0} ({1}) has a link to this Application. Do you want to delete this link as well?",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),noReciprocalLinkMessage:AJS.format("{0} ({1}) doesn\u0027\u0027t have a link to this application. Click confirm to delete only the link from this application to {0} ({1}).",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),deleteYesMessage:AJS.format("Yes, delete the link from {0} ({1}) to this application.",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),deleteNoMessage:AJS.format("No, do not delete the link from {0} ({1}) to this application.",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),authenticationMessage:AJS.format("We can check if {0} ({1}) has a link to this application and delete this link as well. To do this you must authenticate. Click confirm to delete only the local link to {0} ({1}).",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),noConnectionMessage:"There was a problem when contacting the remote application.",authenticationFailedMessage:AJS.format("Unable to check if {0} ({1}) has a link to this application, because the authorization failed. Click confirm to delete only the local Application Link to {0} ({1})",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),failedToDetectReciprocalLinkMessage:AJS.format("A problem occurred when trying to check if a link from {0} ({1}) to this application exists.",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),helpKey:"applinks.docs.delete.application.link",doPermissionCheck:function(u,t){AppLinks.SPI.canDeleteAppLink(j.id,u,t)},doDelete:function(t,v,u){AppLinks.SPI.deleteLink(j,t,v,u)},callback:function(){AppLinks.UI.listApplicationLinks(j.name,"delete");return true}};AppLinks.showDeleteLinkDialog(q)})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-ui', location = 'js/permission-check-util.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){(function(a){AppLinks=AJS.$.extend(window.AppLinks||{},{checkPermission:function(d,c,f,b,g){var e={noPermission:function(){b("You don\u0027t have sufficient permissions to perform this operation.")},missing:b,noAuthenticationConfigured:b,noAuthentication:b,authenticationFailed:b,credentialsRequired:f,noConnection:function(){b("There was a problem when contacting the remote application.")},allowed:c,unrecognisedCode:function(h){b(AJS.format("An error has occurred, unexpected permission check response: {0}",h))}};d(AppLinks.SPI.processPermissionCode(e),g)}})})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-ui-utils', location = 'js/new/applinks-util.js' */
define("applinks/js/util",["applinks/lib/aui","applinks/lib/jquery","applinks/lib/window"],function(a,c,b){b.AppLinks=b.AppLinks||{};b.AppLinks.Util={isPreIE9:function(){return c.browser.msie&&c.browser.version<=8},manifestToApplication:function(d){return{url:d.url,rpcUrl:d.url,name:d.name,product:d.typeId?AppLinks.I18n.getApplicationTypeName(d.typeId):undefined,logoUrl:d.iconUri?d.iconUri:d.iconUrl,typeId:d.typeId,id:d.id,applinksVersion:d.applinksVersion,publicSignUp:d.publicSignup,inboundAuthenticationTypes:d.inboundAuthenticationTypes,outboundAuthenticationTypes:d.outboundAuthenticationTypes}},applicationSupportsIncomingThreeLeggedOAuth:function(d){return this.applicationSupportsIncomingAuth(d,"com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider")},applicationSupportsIncomingTwoLeggedOAuth:function(d){return this.applicationSupportsIncomingAuth(d,"com.atlassian.applinks.api.auth.types.TwoLeggedOAuthAuthenticationProvider")},applicationSupportsIncomingTwoLeggedOAuthWithImpersonation:function(d){return this.applicationSupportsIncomingAuth(d,"com.atlassian.applinks.api.auth.types.TwoLeggedOAuthWithImpersonationAuthenticationProvider")},applicationSupportsOutgoingThreeLeggedOAuth:function(d){return this.applicationSupportsOutgoingAuth(d,"com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider")},applicationSupportsOutgoingTwoLeggedOAuth:function(d){return this.applicationSupportsOutgoingAuth(d,"com.atlassian.applinks.api.auth.types.TwoLeggedOAuthAuthenticationProvider")},applicationSupportsOutgoingTwoLeggedOAuthWithImpersonation:function(d){return this.applicationSupportsOutgoingAuth(d,"com.atlassian.applinks.api.auth.types.TwoLeggedOAuthWithImpersonationAuthenticationProvider")},applicationSupportsIncomingAuth:function(d,e){return this.applicationSupportsAuth(d.inboundAuthenticationTypes,e)},applicationSupportsOutgoingAuth:function(d,e){return this.applicationSupportsAuth(d.outboundAuthenticationTypes,e)},applicationSupportsAuth:function(d,e){return a.$.inArray(e,d)>=0?true:false},waitUntilDone:function(h){var f=h(),g=f.wait,d=f.done;var e=new a.$.Deferred();g();setTimeout(function(){e.resolve()},2000);return function(){e.done(d)}},getFieldValueFromQueryString:function(k,j){var g=b.location.search.indexOf(j);if(g<0){return null}var i;var f=k.slice(g).indexOf("&");if(f>0){i=k.slice(g+j.length+"=".length,g+f)}else{i=k.slice(g+j.length+"=".length)}var d=decodeURIComponent(i);try{return JSON.parse(d)}catch(h){console.log("Unable to JSON parse: ["+d+"], using as is");return d}},getParameterValue:function(f,d){if(typeof(Storage)!=="undefined"){var e=b.sessionStorage.getItem(f);if(typeof e!=="undefined"&&e!=null){if(d===true){b.sessionStorage.removeItem(f)}return JSON.parse(e)}}return this.getFieldValueFromQueryString(b.location.search,f)},putParameter:function(f,e,d){if(typeof(Storage)!=="undefined"){b.sessionStorage.setItem(f,JSON.stringify(e))}else{d[f]=e}},isSysAdmin:function(){return a.$("#ual.list-links").data("sysadminFlag")},enableButton:function(d){d.prop("disabled",false);if(d.siblings(".aui-icon-wait").length!=0){d.siblings(".aui-icon-wait").remove()}},disableButton:function(d,e,g){var f='<span class="aui-icon aui-icon-wait aui-icon-wait-padding"></span>';if(e&&d.siblings(".aui-icon-wait").length==0){if(g){d.after(f)}else{d.before(f)}}d.prop("disabled",true)},setButtonEnabledState:function(e,d,f){if(d){this.enableButton(e)}else{this.disableButton(e,f,true)}},isVersion4OrHigher:function(f){var g=f.match("([0-9].[0-9].[0-9])(.*[0-9A-Za-z-]*)");if(g==null){console.log("Received version is in an unrecognized format "+f);return false}var e=g[1];var d=g[2];var h=e.split(".");if(parseFloat(h[0])<4){return false}if(parseFloat(h[0])>4){return true}if(parseFloat(h[1])>0){return true}if(parseFloat(h[2])>0){return true}if(d==null||d===""||d===".SNAPSHOT"){return true}return false}};return b.AppLinks.Util});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dialog2', location = 'src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__9d1f3fc8db7cce1507b836363b13471d=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__bd7207540b95ff683caa1d3c0bfcc3d7),j=f(__65f46acd493e225a8705ab04389e284d),k=f(__9a668cbde1e182d8e721c23580356df2),
b=f(__bbe882dbb07e18e72992d5f992bba14c),l=f(__f6397c80406fe105a9ead0b34dba268d),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/browser.js' */
define("applinks/common/browser",["applinks/lib/window"],function(b){var a={isMicrosoft:function(){var c=b.navigator.userAgent;return c.indexOf("MSIE")>0||!!c.match(/Trident\/7\./)||c.indexOf("Edge/")>0}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/context.js' */
define("applinks/common/context",["applinks/lib/console","applinks/lib/window","applinks/lib/wrm","applinks/common/modules"],function(b,e,a,d){var c=a.data.claim(d.dataFqn("applinks-common","applinks-context"));return{currentUser:function(){return c.currentUser},hostApplication:function(){return c.hostApplication},validateCurrentUser:function(){if(!this.currentUser()){b.log("No user context, reloading the page to trigger redirect to the login screen");e.location.reload()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/dialog-focus.js' */
define("applinks/common/dialog-focus",["applinks/lib/lodash","applinks/common/preconditions"],function(a,b){return{defaultFocus:function(c){b.hasValue(c,"$el");a.defer(function(){c.find(".applinks-default-focus").first().focus()})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/dialog-helper.js' */
define("applinks/common/dialog-helper",["applinks/lib/aui","applinks/lib/jquery","applinks/lib/lodash","applinks/common/dialog-focus"],function(h,d,i,e){var b=false;var a="body";function c(){return b}function g(){return a}function f(){if(i.isUndefined(h.dialog2)||i.isUndefined(h.dialog2.on)){return}h.dialog2.on("show",function(){e.defaultFocus(d("section.aui-dialog2"));b=true});h.dialog2.on("hide",function(){b=false})}i.defer(f);return{isAnyDialogOpen:c,getContainer:g}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/features.js' */
define("applinks/common/features",["applinks/lib/wrm","applinks/lib/lodash","applinks/common/modules","applinks/common/context","applinks/common/rest"],function(a,l,h,f,d){var g,e;function i(){if(l.isUndefined(g)){g=a.data.claim(h.dataFqn("applinks-common","applinks-features"))}return g}function c(){if(l.isUndefined(e)){e=a.data.claim(h.dataFqn("applinks-common","applinks-discovered-features"))}return e}function b(m){return(l.includes?l.includes:l.contains)(c(),m.toLowerCase())}function j(m){l.extend(i(),m)}function k(m){m.forEach(function(n){if(!b(n)){c().push(n.toLowerCase())}})}return{BITBUCKET_REBRAND:"BITBUCKET_REBRAND",V3_UI_OPT_IN:"V3_UI_OPT_IN",V3_UI:"V3_UI",getEnabledFeatures:function(){return i()},isEnabled:function(m){return this.getEnabledFeatures()[m]},disable:function(m){f.validateCurrentUser();return d.V3.features(m).del().done(function(){i()[m]=false})},enable:function(m){f.validateCurrentUser();return d.V3.features(m).put().done(function(n){j(n)})},getDiscoveredFeatures:function(){return c()},isDiscovered:b,discover:function(m){f.validateCurrentUser();d.V3.featureDiscovery(m).put().fail(function(n){throw"Feature discovery request failed: "+n.status+": "+n.responseText}).done(function(n){k(n)})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/initializer.js' */
define("applinks/common/initializer",["applinks/lib/jquery","applinks/lib/lodash"],function(b,a){function c(d){if(d&&a.isFunction(d.init)){d.init()}if(d&&a.isFunction(d.initialize)){d.initialize()}}return{init:function(){a.each(arguments,function(d){c(d)})},initOnDomReady:function(){a.each(arguments,function(d){b(document).ready(function(){c(d)})})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/response-status.js' */
define("applinks/common/response-status",["applinks/lib/lodash"],function(a){function e(f){this.familyCode=f}e.prototype.matches=function(f){return Math.floor(d(f)/100)==this.familyCode};var c={INFORMATIONAL:new e(1),SUCCESSFUL:new e(2),REDIRECTION:new e(3),CLIENT_ERROR:new e(4),SERVER_ERROR:new e(5),forCode:function(f){return a.find(c.all(),function(g){return g.matches(f)})},all:function(){return[c.INFORMATIONAL,c.SUCCESSFUL,c.REDIRECTION,c.CLIENT_ERROR,c.SERVER_ERROR]}};function b(f){this.code=f;this.family=c.forCode(f)}b.prototype.matches=function(f){return d(f)==this.code};function d(f){if(f&&f.status&&a.isNumber(f.status)){return f.status}else{if(a.isNumber(f)){return f}else{return 0}}}return{OK:new b(200),CREATED:new b(201),NO_CONTENT:new b(204),BAD_REQUEST:new b(400),UNAUTHORIZED:new b(401),FORBIDDEN:new b(403),NOT_FOUND:new b(404),CONFLICT:new b(409),SERVER_ERROR:new b(500),Family:c}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest-response-handlers.js' */
define("applinks/common/response-handlers",["applinks/lib/aui","applinks/lib/console","applinks/lib/window","applinks/lib/jquery","applinks/lib/lodash","applinks/common/preconditions","applinks/common/dialog-helper","applinks/common/response-status"],function(n,h,k,i,o,j,l,b){var g="applinks-error-dialog";var e=g+"-close-button";function d(){return o.isArray(arguments[0])?arguments[0]:o.toArray(arguments)}function a(q){if(!q.responseText){return null}try{return JSON.parse(q.responseText)}catch(p){h.warn("Unable to parse REST error response text - not a JSON response.");return null}}function m(s){if(l.isAnyDialogOpen()){h.debug("Not showing REST error dialog - another modal dialog already open");return}var p=a(s);var t=p&&p.errors&&p.errors.length>0?p.errors:null;var r=applinks.common.resterror.dialogContents({id:g,errors:t});i(l.getContainer()).append(r);var q=n.dialog2("#"+g);i("#"+e).click(function(u){u.preventDefault();q.hide();q.remove()});q.show()}function f(){var p=d.apply(this,arguments);return function(r,s,q){if(!o.some(p,function(t){return t.matches(q)})){h.error("Unexpected response status: "+q.status+": "+q.responseText)}}}function c(){var p=d.apply(this,arguments);return function(r,s,q){if(!o.some(p,function(t){return t.matches(r)})){h.error("Unexpected response status: "+r.status+": "+r.responseText);if(b.UNAUTHORIZED.matches(r)){k.location.reload()}else{m(r)}}}}return{done:f,fail:c}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest-request.js' */
define("applinks/common/rest-request",["applinks/lib/console","applinks/lib/window","applinks/lib/jquery","applinks/lib/lodash","applinks/common/preconditions","applinks/common/response-status","applinks/common/response-handlers"],function(d,h,e,j,g,a,f){var i={dataType:"json",contentType:"application/json"};function b(l,m){if(j.isEmpty(m)){return l}var n=l.indexOf("?")>-1?"&":"?";return l+n+e.param(m)}function c(m){if(!m){return[]}else{if(j.isArray(m)){return m}else{var l=[];j.each(m,function(o,n){l.push({name:n,value:o})});return l}}}function k(l,m){g.nonEmptyString(l,"url");g.checkArgument(l.indexOf("#")==-1,'url: "#" fragments not supported');this._url=l;this._queryParams=c(m);this._expectedStatus=[a.Family.SUCCESSFUL]}k.GET="GET";k.PUT="PUT";k.POST="POST";k.DELETE="DELETE";k.prototype.get=function(){return this._execute(this._requestSettings(k.GET))};k.prototype.del=function(){return this._execute(this._requestSettings(k.DELETE))};k.prototype.put=function(m){var l=this._requestSettings(k.PUT);if(m){l.data=m}return this._execute(l)};k.prototype.post=function(m){var l=this._requestSettings(k.POST);if(m){l.data=m}return this._execute(l)};k.prototype.getUrl=function(){return b(this._url,this._queryParams)};k.prototype.queryParam=function(l,m){this._queryParams.push({name:l,value:m});return this};k.prototype.queryParams=function(l){this._queryParams=this._queryParams.concat(c(l));return this};k.prototype.authorisationCallback=function(l){this.queryParam("authorisationCallback",l);return this};k.prototype.expectStatus=function(){this._expectedStatus=j.isArray(arguments[0])?arguments[0]:j.toArray(arguments);return this};k.prototype._requestSettings=function(l){var m=this;return j.defaults({url:b(m._url,m._queryParams),type:l},i)};k.prototype._execute=function(l){return e.ajax(l).done(f.done(this._expectedStatus)).fail(f.fail(this._expectedStatus))};return k});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest.js' */
define("applinks/common/rest",["applinks/lib/aui","applinks/common/preconditions","applinks/common/rest-request","applinks/common/rest-oauth"],function(j,g,k,f){var b="data";function c(l){g.hasValue(l,"version");this._version=l}c.prototype.baseUrl=function(){return j.contextPath()+"/rest/applinks/"+this._version};c.prototype.withPath=function(l){return this.baseUrl()+"/"+l};function i(){this.module=new c("1.0")}i.prototype.applink=function(l){g.hasValue(l,"applinkId");return new k(this.module.withPath("applicationlink/"+l))};function h(){this.module=new c("2.0")}function d(){this.module=new c("3.0")}d.prototype.applink=function(n,l){g.hasValue(n,"applinkId");var m=new k(this.module.withPath("applinks/"+n));return a(m,l)};d.prototype.applinks=function(l){var m=new k(this.module.withPath("applinks"));return a(m,l)};d.prototype.featureDiscovery=function(l){g.hasValue(l,"featureKey");return new k(this.module.withPath("feature-discovery/"+l))};d.prototype.features=function(l){g.hasValue(l,"featureName");return new k(this.module.withPath("features/"+l))};d.prototype.status=function(l){g.hasValue(l,"applinkId");return new k(this.module.withPath("status/"+l))};d.prototype.oAuthStatus=function(l){g.hasValue(l,"applinkId");return new k(this.module.withPath("status/"+l+"/oauth"))};d.prototype.migration=function(l){g.hasValue(l,"applinkId");return new k(this.module.withPath("migration/"+l))};function a(m,l){if(l){g.isArray(l,"dataKeys");_.each(l,function(n){m=m.queryParam(b,n)})}return m}var e=new d();e.ApplinkData={APPLICATION_VERSION:"applicationVersion",ATLASSIAN:"atlassian",CAPABILITIES:"capabilities",CONFIG_URL:"configUrl",ICON_URI:"iconUri",EDITABLE:"editable",V3_EDITABLE:"v3Editable",WEB_ITEMS:"webItems"};return{V1:new i(),V2:new h(),V3:e,OAuth:f}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest-oauth.js' */
define("applinks/common/rest-oauth",["applinks/lib/aui","applinks/common/rest-request","applinks/common/preconditions"],function(c,a,e){function b(f){e.hasValue(f,"version");this.baseUrl=c.contextPath()+"/rest/applinks-oauth/"+f+"/"}b.prototype._withPath=function(f){return this.baseUrl+f};function d(){this.module=new b("1.0")}d.prototype.consumerToken=function(f){e.hasValue(f,"applinkId");return new a(this.module._withPath("consumer-token/"+f))};return{V1:new d()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/urls.js' */
define("applinks/common/urls",["applinks/lib/aui","applinks/lib/lodash","applinks/common/products"],function(b,c,d){var f="/plugins/servlet/applinks";var e=c.memoize(function(){return b.contextPath()+f});var a={generateUrl:function(h,g){var i=h;if(c.isUndefined(g)){return i}else{c.each(g,function(k,j){if(i.indexOf("?")<0){i=i+"?"}else{i=i+"&"}i=i+j+"="+encodeURIComponent(JSON.stringify(k))});return i}}};a.Local={admin:function(h){var g=e()+"/listApplicationLinks";return a.generateUrl(g,h)},edit:function(i,h){var g=e()+"/edit/"+i;return a.generateUrl(g,h)}};a.Remote={admin:function(h,k,j){var i=k===d.CONFLUENCE?"/admin/listapplicationlinks.action":f+"/listApplicationLinks";var g=h+i;return a.generateUrl(g,j)}};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common', location = 'applinks/internal/common/rest-error.soy' */
// This file was automatically generated from rest-error.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.common.resterror.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.common == 'undefined') { applinks.common = {}; }
if (typeof applinks.common.resterror == 'undefined') { applinks.common.resterror = {}; }


applinks.common.resterror.dialogContents = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-layer aui-dialog2 aui-dialog2-small aui-dialog2-warning" aria-hidden="true" data-aui-modal="true" data-aui-remove-on-hide="true" data-aui-focus-selector="' + soy.$$escapeHtml(opt_data.id) + '-close-button"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Something went wrong") + '</h2><!-- Close icon --><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a></header><!-- Main dialog content --><div class="aui-dialog2-content">' + ((opt_data.errors != null && opt_data.errors.length > 0) ? '\u2028' + applinks.common.resterror.detailedMessage(opt_data) + '\u2028' : applinks.common.resterror.genericMessage(null) + '\u2028') + '</div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="' + soy.$$escapeHtml(opt_data.id) + '-close-button" class="aui-button aui-button-link">' + soy.$$escapeHtml("Close") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  applinks.common.resterror.dialogContents.soyTemplateName = 'applinks.common.resterror.dialogContents';
}


applinks.common.resterror.detailedMessage = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml("When contacting the server we received the following error:") + '</p>';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList33 = opt_data.errors;
    var errorListLen33 = errorList33.length;
    for (var errorIndex33 = 0; errorIndex33 < errorListLen33; errorIndex33++) {
      var errorData33 = errorList33[errorIndex33];
      output += '<li>' + soy.$$escapeHtml(errorData33.summary) + '</li>';
    }
    output += '</ul>';
  } else {
    output += '<p>' + soy.$$escapeHtml(opt_data.errors[0].summary) + '</p>';
  }
  output += '<p>' + soy.$$escapeHtml("You can try to refresh the page. If the error persists the application logs might provide additional information or you can reach out to your admin.") + '</p>';
  return output;
};
if (goog.DEBUG) {
  applinks.common.resterror.detailedMessage.soyTemplateName = 'applinks.common.resterror.detailedMessage';
}


applinks.common.resterror.genericMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("The server returned a bad response.") + '</p><p>' + soy.$$escapeHtml("You can try to refresh the page. If the error persists the application logs might provide additional information or you can reach out to your admin.") + '</p>';
};
if (goog.DEBUG) {
  applinks.common.resterror.genericMessage.soyTemplateName = 'applinks.common.resterror.genericMessage';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-ui-creation', location = 'js/new/applinks-creation.js' */
(function(c,a,b){AppLinks.Creation={CREATION_REMOTE_URL:"applinkStartingUrl",CREATION_REMOTE_TYPE:"applinkStartingType",ORIGINAL_APPLINK_ID_KEY:"applinkOriginalCreatedId",CREATION_STATUS_KEY:"applinkCreationStatus",CREATION_STATUS_LOG_KEY:"applinkCreationStatusLog",CREATION_STATUS_REASON_KEY:"applinkCreationStatusReason",CREATION_SHAREDUSERBASE_KEY:"sharedUserbase",CREATION_RESULT_INFO_KEY:"applinkCreationResultInfo",CREATION_RESULT_WARN_KEY:"applinkCreationResultWarn",CREATION_RESULT_ERROR_KEY:"applinkCreationResultError",CREATION_IGNORE_REDIRECTS:"applinkIgnoreRedirects",CREATION_CONFIGURE_INCOMING_USER_AUTH:"applinkConfigInUserAuth",CREATION_CONFIGURE_INCOMING_SERVER_AUTH:"applinkConfigInServerAuth",CREATION_CONFIGURE_INCOMING_PRE_AUTH:"applinkConfigInPreAuth",CREATION_CONFIGURE_OUTGOING_USER_AUTH:"applinkConfigOutUserAuth",CREATION_CONFIGURE_OUTGOING_SERVER_AUTH:"applinkConfigOutServerAuth",CREATION_CONFIGURE_OUTGOING_PRE_AUTH:"applinkConfigOutPreAuth",CREATION_EVENT_NEW_APPLINK_TYPE:"applinkCreatedEventNewType",CREATION_EVENT_NEW_APPLINK_ID:"applinkCreatedEventNewId",STATUS_CREATION_SUCCESS:"completed.creation",STATUS_CREATION_FAILURE:"failed.creation",STATUS_CREATION_INPROGRESS:"inprogress.creation",STATUS_LOCAL_SUCCESS:"completed.creation.local",STATUS_RECIPROCAL_SUCCESS:"completed.creation.reciprocal",STATUS_RECIPROCAL_INPROGRESS:"inprogress.creation.reciprocal",STATUS_LOCAL_FAILURE:"failed.creation.local",STATUS_RECIPROCAL_FAILURE:"failed.creation.reciprocal",STATUS_REGISTERPROVIDER_2LOI_FAILURE:"failed.registerprovider.2loi",userDefinedUrlField:{},createAppLinkButton:{},globalCreationState:null,generateUrl:function(e,d){return a.generateUrl(e,d)},generateApplinksAdminUrl:function(e,f,d){return a.Remote.admin(e,f,d)},generateApplinksCreationRedirectionUrl:function(f,d){if(d.getIncompatibleApplinksVersion()){return AppLinks.Creation.generateApplinksAdminUrl(d.getRemoteApplicationUrl(),d.getRemoteApplicationType())}else{var e={};if(d.getStatusLog().length>0){e[AppLinks.Creation.CREATION_STATUS_LOG_KEY]=JSON.stringify(d.getStatusLog())}if(d.getOriginalCreatedApplicationLinkId()!==null){e[AppLinks.Creation.ORIGINAL_APPLINK_ID_KEY]=d.getOriginalCreatedApplicationLinkId()}if(d.getInitiatorRedirect()!==null){e[AppLinks.ExternalInitiation.INITIATOR_REDIRECT_KEY]=d.getInitiatorRedirect()}e[AppLinks.Creation.CREATION_SHAREDUSERBASE_KEY]=d.getSharedUserbase();e[AppLinks.Creation.CREATION_CONFIGURE_INCOMING_USER_AUTH]=d.getConfigureIncomingUserAuthentication();e[AppLinks.Creation.CREATION_CONFIGURE_INCOMING_SERVER_AUTH]=d.getConfigureIncomingServerAuthentication();e[AppLinks.Creation.CREATION_CONFIGURE_INCOMING_PRE_AUTH]=d.getConfigureIncomingPreAuthentication();e[AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_USER_AUTH]=d.getConfigureOutgoingUserAuthentication();e[AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_SERVER_AUTH]=d.getConfigureOutgoingServerAuthentication();e[AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_PRE_AUTH]=d.getConfigureOutgoingPreAuthentication();if(d.isCreatingReciprocal()==true){return AppLinks.Creation.generateApplinksAdminUrl(d.getRemoteApplicationUrl(),d.getRemoteApplicationType(),e)}if(d.getLocalApplication()!==null){e[AppLinks.Creation.CREATION_REMOTE_URL]=d.getLocalApplication().url;e[AppLinks.Creation.CREATION_REMOTE_TYPE]=d.getLocalApplication().typeId}if(f!=true){e[AppLinks.Creation.CREATION_IGNORE_REDIRECTS]=true}return AppLinks.Creation.generateApplinksAdminUrl(d.getRemoteApplicationUrl(),d.getRemoteApplicationType(),e)}},redirectUserWithDialog:function(e,d){return{wait:function(){AppLinks.Creation.Dialogs.showRedirectPauseDialog(false,d.getRemoteApplicationName())},done:function(){var f=AppLinks.Creation.generateApplinksCreationRedirectionUrl(e,d);window.location=f}}},getSubmittedRemoteUrl:function(){return b.getParameterValue(AppLinks.Creation.CREATION_REMOTE_URL)},getSubmittedStatusLog:function(){var d=JSON.parse(b.getParameterValue(AppLinks.Creation.CREATION_STATUS_LOG_KEY));if(d==null){return[]}return d},getSubmittedSharedUserbase:function(){var d=b.getParameterValue(AppLinks.Creation.CREATION_SHAREDUSERBASE_KEY);return d==null?false:d},getSubmittedOriginalCreatedId:function(){return b.getParameterValue(AppLinks.Creation.ORIGINAL_APPLINK_ID_KEY)},getAndDisplayOutstandingMessages:function(){AppLinks.Creation.displayOutstandingMessages(AppLinks.Creation.CREATION_RESULT_INFO_KEY,AppLinks.Creation.getOutstandingMessages(AppLinks.Creation.CREATION_RESULT_INFO_KEY));AppLinks.Creation.displayOutstandingMessages(AppLinks.Creation.CREATION_RESULT_WARN_KEY,AppLinks.Creation.getOutstandingMessages(AppLinks.Creation.CREATION_RESULT_WARN_KEY));AppLinks.Creation.displayOutstandingMessages(AppLinks.Creation.CREATION_RESULT_ERROR_KEY,AppLinks.Creation.getOutstandingMessages(AppLinks.Creation.CREATION_RESULT_ERROR_KEY))},displayOutstandingMessages:function(d,e){AJS.$.each(e,function(f,g){if(d===AppLinks.Creation.CREATION_RESULT_INFO_KEY){AppLinks.UI.showInfoBox(AppLinks.UI.sanitiseHTML(g))}if(d===AppLinks.Creation.CREATION_RESULT_WARN_KEY){AppLinks.UI.showWarningBox(AppLinks.UI.sanitiseHTML(g))}if(d===AppLinks.Creation.CREATION_RESULT_ERROR_KEY){AppLinks.UI.showErrorBox(AppLinks.UI.sanitiseHTML(g))}})},getOutstandingMessages:function(f){var d=b.getParameterValue(f,true);if(AJS.$.isArray(d)){return d}try{var g=JSON.parse(d);if(g!=null){return g}}catch(h){console.log("Message format invalid:",d)}return[]},initCreationState:function(){AppLinks.Creation.globalCreationState=new CreationState()},getCreationState:function(){if(AppLinks.Creation.globalCreationState==null){AppLinks.Creation.globalCreationState=new CreationState()}return AppLinks.Creation.globalCreationState},aboutToRedirect:function(){if(window.location.search===""){return false}var d=AppLinks.Creation.getCreationState();if(d.doInitiatorRedirect()){return true}else{if(!d.isCreatingReciprocal()&&d.creationHasCompleted()){return true}else{if(d.creationInProgress()){return true}else{return false}}}},fireEventIfApplinkCreated:function(){var f=b.getParameterValue(AppLinks.Creation.CREATION_EVENT_NEW_APPLINK_TYPE,true);var g=b.getParameterValue(AppLinks.Creation.CREATION_EVENT_NEW_APPLINK_ID,true);if(f&&g){var d=AppLinks.I18n.getApplicationTypeName(f);var e=c("body");e.attr("data-created-applink-id",g);e.attr("data-created-applink-type",f);e.attr("data-created-applink-type-name",d);c(document).trigger(AppLinks.Event.NEW_APPLINK_CREATED,{id:g,type:f,typeName:d})}}}})(AJS.$,require("applinks/common/urls"),require("applinks/js/util"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-ui-creation', location = 'js/new/applinks-creation-dialogs.js' */
(function(b,a){AppLinks.Creation.Dialogs={setSubmitStatus:function(){var c=false;if(AppLinks.Creation.userDefinedUrlField.val()!==null&&AppLinks.Creation.userDefinedUrlField.val()!==""&&!AppLinks.Creation.getCreationState().creationInProgress()){c=true}a.setButtonEnabledState(AppLinks.Creation.createAppLinkButton,c,AppLinks.Creation.getCreationState().creationInProgress())},resetProcess:function(){AppLinks.Creation.Dialogs.setSubmitStatus();AppLinks.Creation.userDefinedUrlField.focus()},handleRestErrors:function(d){if(d.status==401){window.location.reload()}else{var c=AJS.escapeHtml(AppLinks.parseError(d));AppLinks.UI.showErrorBox(c)}},handleConfigureIncomingNonUalLinkErrors:function(c){if(c.status==401){window.location.reload()}else{b(".configureIncomingNonUalLinkDialogError").text(AppLinks.parseError(c)).show();b(".aui-icon-wait").remove()}},handleCreateNonUalLinkErrors:function(c){if(c.status==401){window.location.reload()}else{var d=b(".createNonUalLinkDialogError");d.text(AppLinks.parseError(c));d.show()}},handleFetchManifestRestSuccess:function(d,c){if(AJS.$.isEmptyObject(d)){d.code="applinks.warning.host.does-not-support-manifest";return d}if(typeof d.code!=="undefined"){return d}if(typeof d.applinksVersion=="undefined"||!a.isVersion4OrHigher(d.applinksVersion)){d.code="applinks.warning.incompatible.applinks.version";return d}return d},handleFetchManifestRestFailure:function(d,c){if(d.status==401){window.location.reload()}if(d.status==400){d.warning="Please enter a valid URL.";d.code="applinks.error.rpcurl";return d}if(d.status==404||d.status==0){d.warning="No response was received from the URL you entered - it may not be valid. Please fix the URL below, if needed, and click Continue.";d.code="applinks.warning.unknown.host";return d}if(d.status==409){d.warning=AppLinks.parseError(d);d.code="applinks.warning.host.duplicated";return d}return d},handleRestSuccess:function(c){},bindDialogBehaviors:function(){b("body").on("change","#applinks-dialog input:checkbox",function(c){AJS.trigger("checkbox-change.applinks",c.target.id)}).on("submit",function(d){var c=b(d.target).closest("#create-applink-dialog");if(c.length){d.preventDefault();c.find(".aui-button-primary").click()}}).on("keydown",function(d){if(d.keyCode!==13){return}var c=b("#create-applink-dialog");if(c.length&&c.is(":visible")){d.preventDefault();c.find(".aui-button-primary").click()}}).on("keydown",function(d){if(d.keyCode!==27){return}var c=b("#create-applink-dialog");if(c.length&&c.is(":visible")){c.find(".applinks-cancel").click()}});AJS.bind("checkbox-change.applinks",function(c,d){b("#applinks-dialog").find("."+d).toggleClass("hidden");b("#applinks-dialog").find("."+d+"Control").prop("disabled",function(e,f){return !f})});AJS.bind("remove.dialog",function(){AppLinks.Creation.Dialogs.resetProcess()})},showConfigureIncomingNonUalLinkDialog:function(c,d){var e=AppLinks.Creation.Dialogs.buildConfigureIncomingNonUalLinkDialog(c).addButton("Continue",function(g){b(".configureIncomingNonUalLinkDialogError").hide();if(AppLinks.Creation.Dialogs.incomingNonUalFieldsAreInvalid()==false){var j=b("#consumerName").val(),h=b("#consumerKey").val(),i=b("#publicKey").val(),f=AppLinks.Creation.Process.configureIncomingNonUalLink(j,h,i,c);a.disableButton(g.popup.element.find(".aui-button"),true);f.done(function(){console.log("non-ual incoming link created");g.remove();d.resolve()}).fail(function(){a.enableButton(g.popup.element.find(".aui-button"))})}},"aui-button aui-button-primary").addLink("Cancel",function(f){console.log("non-ual incoming link cancel");c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_SUCCESS);d.resolve();f.remove()},"applinks-cancel");b(".configureIncomingNonUalLinkDialogError").hide();b("#applinks-configure-incoming-nonual-form .error").hide();e.show();e.updateHeight();return e},buildConfigureIncomingNonUalLinkDialog:function(c){var e=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),d="Link applications";e.addHeader(d).addPanel("Test",applinks.templates.getConfigureIncomingNonUalLinkDialog({fromApp:c.getRemoteApplication(),toApp:c.getLocalApplication()}));return e},showCreateNonUalLinkDialog:function(e,c){var d=AppLinks.Creation.Dialogs.buildCreateNonUalLinkDialog(c,e).addButton("Continue",function(o){b(".createNonUalLinkDialogError").hide();if(AppLinks.Creation.Dialogs.outgoingNonUalFieldsAreValid()){var g=b("#application-name-new").val(),f=b("#application-types-new").find("option:selected").val(),m=AppLinks.UI.addProtocolToURL(b("#non-ual-application-url").val()),n=b("#accessTokenUrl").val(),p=b("#requestTokenUrl").val(),q=b("#consumerKey").val(),j=b("#authorizeUrl").val(),k=b("#sharedSecret").val(),l=b("#serviceProvider").val(),i=b("#createIncoming").is(":checked");a.disableButton(o.popup.element.find(".aui-button"),true);var h=AppLinks.Creation.Process.createOutgoingNonUalLink(g,f,m,n,p,q,j,k,l,i,c);h.progress(function(){o.remove()});h.done(function(){a.waitUntilDone(function(){return AppLinks.Creation.Process.successNoRedirect(c)})()});h.fail(function(){a.enableButton(o.popup.element.find(".aui-button"))})}},"aui-button aui-button-primary");if(!c.doInitiatorRedirect()){d.addLink("Cancel",function(f){console.log("non-ual link cancel");AppLinks.Creation.initCreationState();f.remove()},"applinks-cancel")}b(".createNonUalLinkDialogError").hide();b("#applinks-create-nonual-form .error").hide();d.show();d.updateHeight();return d},buildCreateNonUalLinkDialog:function(c,f){var e=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),d="Link applications";e.addHeader(d).addPanel("Test",applinks.templates.getCreateNonUalLinkDialog({fromApp:c.getRemoteApplication(),toApp:c.getLocalApplication(),typeOptions:f}));return e},getCreationCompleteFunction:function(c){if(c.getCreateUnconfiguredLink()){if(c.getIncompatibleApplinksVersion()){return function(){c.updateStatusLog(AppLinks.Creation.STATUS_LOCAL_SUCCESS);return AppLinks.Creation.Process.successNoRedirect(c)}}else{return function(){c.updateStatusLog(AppLinks.Creation.STATUS_LOCAL_SUCCESS);return AppLinks.Creation.Process.successManualRedirect(c)}}}if(!c.getRespectRedirects()){return function(){return AppLinks.Creation.Process.successNoRedirect(c)}}if(c.isCreatingReciprocal()){return function(){return AppLinks.Creation.Process.successRedirectToReturn(c)}}return function(){return AppLinks.Creation.Process.successRedirectToCreateReciprocal(c)}},beginApplicationLinkCreation:function(c,d){var e=AppLinks.Creation.Dialogs.getCreationCompleteFunction(c);a.disableButton(d.popup.element.find(".aui-button"),true);var f;if(!AppLinks.Creation.Process.twoStageCreation){f=AppLinks.Creation.Process.createUalLinkAndConfigureIncomingAndOutgoing(c)}else{if(c.isCreatingReciprocal()){f=AppLinks.Creation.Process.createUalLinkAndConfigureIncomingAndOutgoing(c)}else{if(c.getCreateUnconfiguredLink()){f=AppLinks.Creation.Process.createUrlLink(c)}else{f=AppLinks.Creation.Process.createUalLinkAndConfigureIncoming(c)}}}f.progress(function(){d.remove()});f.done(function(){a.waitUntilDone(e)()});f.fail(function(){})},showConfirmUrlsDialog:function(c){var d=AppLinks.Creation.Dialogs.buildConfirmUrlsDialog(c).addButton("Continue",function(f){var e=b("#application-url-rpc").val();f.remove();if(e!=c.getCorrectedUrl()){c.setUserDefinedUrl(e);c.setCorrectedUrl(e);AppLinks.Creation.Process.fetchManifests(false,c)}else{c.getRemoteApplication().rpcUrl=c.getCorrectedUrl();AppLinks.Creation.Dialogs.showCreateApplinkDialog(c)}},"aui-button aui-button-primary").addLink("Cancel",function(e){AppLinks.Creation.initCreationState();e.remove()},"applinks-cancel");d.show();d.updateHeight();return d},buildConfirmUrlsDialog:function(c){var e=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),d="Confirm URLs";e.addHeader(d).addPanel(d,applinks.templates.getConfirmUrlsDialog({displayUrl:c.getRemoteApplication().url,rpcUrl:c.getCorrectedUrl()}));return e},showCreateApplinkDialog:function(c){var d=AppLinks.Creation.Dialogs.buildCreateApplinkDialog(c).addButton("Continue",function(f){var e=b("#isAdmin").is(":checked");c.setCreateUnconfiguredLink(!e&&!c.isCreatingReciprocal());AppLinks.Creation.Dialogs.beginApplicationLinkCreation(c,f)},"aui-button aui-button-primary");if(!c.doInitiatorRedirect()){d.addLink("Cancel",function(e){console.log("ual link cancel");AppLinks.Creation.initCreationState();if(c.isCreatingReciprocal()){c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_FAILURE,"reciprocalCreationSkipped");AppLinks.Creation.Process.showFinalStatus(c)}e.remove()},"applinks-cancel")}d.show();d.updateHeight();return d},buildCreateApplinkDialog:function(c){var e=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),d="Link applications";console.log("Start creation process");e.addHeader(d).addPanel("Test",applinks.templates.getCreateUalLinkDialog({reciprocal:c.isCreatingReciprocal(),fromApp:c.getRemoteApplication(),toApp:c.getLocalApplication(),isSysAdmin:a.isSysAdmin(),sharedUserbase:c.getSharedUserbase(),isUsingCors:c.getUseCors(),impersonationIsSupported:(a.applicationSupportsIncomingTwoLeggedOAuthWithImpersonation(c.getLocalApplication())&&a.applicationSupportsIncomingTwoLeggedOAuthWithImpersonation(c.getRemoteApplication()))}));AppLinks.ExternalInitiation.setDialogInitiatorDefaults(c);if(c.getIncompatibleApplinksVersion()){b("#isAdmin").prop("checked",false);b("#isAdmin").hide();b('label[for="isAdmin"]').hide();b(".isAdmin").hide()}return e},showManuallyCreateReciprocalLinkDialog:function(e,g,f,h,c){var d=AppLinks.Creation.Dialogs.buildManuallyCreateReciprocalLinkDialog(e,AppLinks.Creation.generateApplinksCreationRedirectionUrl(h,c)).addLink("Close",function(i){c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_FAILURE,"reciprocalCreationSkipped");console.log("non-ual link close");i.remove();AppLinks.Creation.Process.showFinalStatus(c)},"applinks-cancel");d.show();d.updateHeight();return d},buildManuallyCreateReciprocalLinkDialog:function(c,f){var e=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),d="Create reciprocal link";e.addHeader(d).addPanel("Test",applinks.templates.getManualRedirectDialog({redirectApp:c,redirectUrl:f}));return e},showReciprocalDuplicateDialog:function(d,h,c){var g=h;var f=AJS.format("Click Continue to be redirected back to {0}.",d);if(!c.doInitiatorRedirect()){f=f+" "+"Click Close to remain here."}c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_FAILURE,"reciprocalDuplicateLinkExists");var e=AppLinks.Creation.Dialogs.buildUnableToCreateReciprocalLinkDialog(g,f).addButton("Continue",function(i){console.log("Duplicate AppLink. redirect back");a.waitUntilDone(function(){return AppLinks.Creation.redirectUserWithDialog(false,c)})();i.remove()},"aui-button aui-button-primary");if(!c.doInitiatorRedirect()){e.addLink("Close",function(i){console.log("Duplicate Applink. cancelled redirect");i.remove();AppLinks.Creation.Process.showFinalStatus(c)},"applinks-cancel")}e.show();e.updateHeight();return e},showConfigureUrlDialog:function(g,f,c,d){var e=AppLinks.Creation.Dialogs.buildConfigureUrlDialog(g,d,c).addButton("Continue",function(k){var i=b("#application-url-corrected");var h=b('#use-application-url input[type="checkbox"]:checked');if(h.length>0){c.setCorrectedUrl(c.getUserDefinedUrl());f=true}else{if(i.val()!=c.getCorrectedUrl()){var j=i.val();c.setCorrectedUrl(j);forceWhenHostIsOffline=false;f=false}}k.remove();AppLinks.Creation.Process.fetchManifests(f,c)},"aui-button aui-button-primary").addLink("Cancel",function(h){AppLinks.Creation.initCreationState();h.remove()},"applinks-cancel");e.show();e.updateHeight();b("#application-url-corrected").focus();return e},buildConfigureUrlDialog:function(e,d,c){var g=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),f="Configure Application URL";g.addHeader(f).addPanel("configure-url",applinks.templates.getConfigureUrlDialog({originalUrl:c.getUserDefinedUrl(),correctedUrl:c.getCorrectedUrl(),urlErrorMessage:e,showSelectOptions:d}));return g},showIncompatibleApplinksVersionDialog:function(c){var d=AppLinks.Creation.Dialogs.buildIncompatibleApplinksVersionDialog(c).addButton("Continue",function(e){console.log("Incompatible AppLink Versions. Continue to create local link end");c.setIncompatibleApplinksVersion(true);c.setCreateUnconfiguredLink(true);AppLinks.Creation.Dialogs.beginApplicationLinkCreation(c,e)},"aui-button aui-button-primary");if(!c.doInitiatorRedirect()){d.addLink("Close",function(e){console.log("Incompatible AppLink Versions. cancelled creation");AppLinks.Creation.initCreationState();e.remove()},"applinks-cancel")}d.show();d.updateHeight();return d},buildIncompatibleApplinksVersionDialog:function(c){var g=AJS.format("The remote application, \u0027\u0027{0}\u0027\u0027, is running an older version of the Application Links plugin. It will not be possible to create the remote end of the link from this application. However both ends of the link can be created using the older process in \u0027\u0027{0}\u0027\u0027.",c.getRemoteApplicationName());var d=AJS.format("Click here to transfer to \u0027\u0027{0}\u0027\u0027 to create the link.",AppLinks.UI.sanitiseHTML(c.getRemoteApplicationName()));var i='<a href="'+AppLinks.Creation.generateApplinksAdminUrl(c.getRemoteApplicationUrl(),c.getRemoteApplicationType())+'">'+d+"</a>";var h=i+" "+"Alternatively click Continue to create the local end of the link only.";var f=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),e="Create reciprocal link.";f.addHeader(e).addPanel("applinks-dialog-panel",applinks.templates.getInformationDialog({warningHtml:AppLinks.UI.sanitiseHTML(g),informationHtml:h}));return f},showIncompatibleApplinksVersionCompletionDialog:function(c){var d=AppLinks.Creation.Dialogs.buildIncompatibleApplinksVersionCompletionDialog(c).addButton("Continue",function(e){console.log("Incompatible AppLink Versions. redirect to other app");a.waitUntilDone(function(){return AppLinks.Creation.redirectUserWithDialog(false,c)})();e.remove()},"aui-button aui-button-primary").addLink("Close",function(e){console.log("Incompatible AppLink Versions. cancelled redirect");c.updateStatusLog(AppLinks.Creation.STATUS_LOCAL_FAILURE,"reciprocalIncompatibleVersion");AppLinks.Creation.Process.showFinalStatus(c);e.remove()},"applinks-cancel");d.show();d.updateHeight();return d},buildIncompatibleApplinksVersionCompletionDialog:function(c){var f=AJS.format("Click Continue to redirect to \u0027\u0027{0}\u0027\u0027 where you can create the reciprocal link. Click Close to remain here.",c.getRemoteApplicationName());var e=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),d="Create reciprocal link.";e.addHeader(d).addPanel("applinks-dialog-panel",applinks.templates.getInformationDialog({warning:null,informationHtml:AppLinks.UI.sanitiseHTML(f)}));return e},showProcessingPauseDialog:function(c){var d=AppLinks.Creation.Dialogs.buildProcessingPauseDialog(c);d.show();d.updateHeight();return d},buildProcessingPauseDialog:function(c){var e="Completing the configuration of the link.",d="Processing...";return AppLinks.Creation.Dialogs.buildPauseDialog(d,e)},showRedirectPauseDialog:function(c,e){var d=AppLinks.Creation.Dialogs.buildRedirectPauseDialog(c,e);d.show();d.updateHeight();return d},buildRedirectPauseDialog:function(c,e){var f,d="Redirecting...";if(c==true){f=AJS.format("You are now being redirected to {0} to create the reciprocal link.",e)}else{f=AJS.format("You are now being redirected to {0}.",e)}return AppLinks.Creation.Dialogs.buildPauseDialog(d,f)},showReciprocalManifestUnobtainableDialog:function(c){var f=AJS.format("It has not been possible to retrieve the required information from {0}. Therefore the link cannot be created.",c.getCorrectedUrl());var e=AJS.format("Click Continue to be redirected back to {0}.",c.getCorrectedUrl());if(!c.doInitiatorRedirect()){e=e+" "+"Click Close to remain here."}var d=AppLinks.Creation.Dialogs.buildUnableToCreateReciprocalLinkDialog(f,e).addButton("Continue",function(g){console.log("Remote manifest unobtainable. redirect back");a.waitUntilDone(function(){c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_FAILURE,"reciprocalUnableToReadManifest");return AppLinks.Creation.redirectUserWithDialog(false,c)})();g.remove()},"aui-button aui-button-primary");if(!c.doInitiatorRedirect()){d.addLink("Close",function(g){console.log("Remote manifest unobtainable. cancelled redirect");if(c.isCreatingReciprocal()){c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_FAILURE,"reciprocalUnableToReadManifest");AppLinks.Creation.Process.showFinalStatus(c)}g.remove()},"applinks-cancel")}d.show();d.updateHeight();return d},buildUnableToCreateReciprocalLinkDialog:function(f,e){var d=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),c="Unable to create reciprocal link.";d.addHeader(c).addPanel("applinks-dialog-panel",applinks.templates.getInformationDialog({warningHtml:AppLinks.UI.sanitiseHTML(f),informationHtml:AppLinks.UI.sanitiseHTML(e)}));return d},showApplinkCreationWorkflowNotAvailableDialog:function(f,c){var e="The Application Link creation process is unavailable, possibly because you do not have the required administrator rights on this instance.";if(c.doInitiatorRedirect()){f=f.replace("or Close to remain here","")}var d=AppLinks.Creation.Dialogs.buildApplicationLinkWorkflowUnavailableDialog(e,f).addButton("Continue",function(g){console.log("Workflow unavailable. redirect back");a.waitUntilDone(function(){c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_FAILURE,"reciprocalWorkflowUnavailable");return AppLinks.Creation.redirectUserWithDialog(false,c)})();g.remove()},"aui-button aui-button-primary");if(!c.doInitiatorRedirect()){d.addLink("Close",function(g){console.log("Workflow unavailable. cancelled redirect");g.remove()},"applinks-cancel")}d.show();d.updateHeight();return d},buildApplicationLinkWorkflowUnavailableDialog:function(f,e){var d=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),c="Link creation unavailable";d.addHeader(c).addPanel("applinks-dialog-panel",applinks.templates.getInformationDialog({warningHtml:AppLinks.UI.sanitiseHTML(f),informationHtml:AppLinks.UI.sanitiseHTML(e)}));return d},showLocalDuplicateDialog:function(e,c){var d=AppLinks.Creation.Dialogs.buildCreateLinkErrorDialog(e);if(c.doInitiatorRedirect()){d.addButton("Continue",function(f){c.updateStatusLog(AppLinks.Creation.STATUS_LOCAL_FAILURE,"localDuplicateLinkExists");AppLinks.ExternalInitiation.redirectToInitiatorRedirect(c);f.remove()},"aui-button aui-button-primary")}else{d.addLink("Close",function(f){console.log("Duplicate Applink. cancelled");AppLinks.Creation.initCreationState();f.remove()},"applinks-cancel")}d.show();d.updateHeight();return d},buildCreateLinkErrorDialog:function(e){var d=new AJS.Dialog({width:500,height:500,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop}),c="Unable to create link.";d.addHeader(c).addPanel("applinks-dialog-panel",applinks.templates.getInformationDialog({warningHtml:AppLinks.UI.sanitiseHTML(e),informationHtml:null}));return d},buildPauseDialog:function(d,e){var c=new AJS.Dialog({width:400,height:200,id:"create-applink-dialog",closeOnOutsideClick:false,keypressListener:b.noop});c.addHeader(d).addPanel("Test",applinks.templates.getPauseDialog({message:AppLinks.UI.sanitiseHTML(e)}));return c},setAuthenticationFieldsAsRequired:function(){b("#applinks-nonual-oath-configuration").children().find("label").append("<span class='aui-icon icon-required'></span>")},authenticationFieldsAreInValid:function(){if(b("#accessTokenUrl").val()==""&&b("#requestTokenUrl").val()==""&&b("#consumerKey").val()==""&&b("#authorizeUrl").val()==""&&b("#sharedSecret").val()==""&&b("#serviceProvider").val()==""){return false}return !AppLinks.Creation.Dialogs.validateFields(["#serviceProvider","#consumerKey","#sharedSecret","#requestTokenUrl","#accessTokenUrl","#authorizeUrl"])},incomingNonUalFieldsAreInvalid:function(){var c=!AppLinks.Creation.Dialogs.validateFields(["#consumerKey","#consumerName","#publicKey"]);return c},outgoingNonUalFieldsAreValid:function(){if(AppLinks.Creation.Dialogs.applicationLinkFieldsAreInValid()){return false}else{if(AppLinks.Creation.Dialogs.authenticationFieldsAreInValid()){AppLinks.Creation.Dialogs.setAuthenticationFieldsAsRequired();return false}}return true},applicationLinkFieldsAreInValid:function(){var c=!AppLinks.Creation.Dialogs.validateFields(["#application-name-new"]);return c},validateField:function(d,c){if(b(d).val()==""){if(c){b(d).focus()}b(d).siblings(".error").show();return false}b(d).siblings(".error").hide();return true},validateFields:function(e){var g=true;var c=true;for(var d=0,f=e.length;d<f;d++){g=AppLinks.Creation.Dialogs.validateField(e[d],c);c=g&&c}return g}}})(AJS.$,require("applinks/js/util"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-ui-creation', location = 'js/new/applinks-creation-process.js' */
(function(b,a){AppLinks.Creation.Process={twoStageCreation:true,debug:false,createNonUalTypes:function(){var e=[];for(var c=0;c<nonAppLinksApplicationTypes.length;c++){var d;if(nonAppLinksApplicationTypes[c].typeId==="generic"){d={text:nonAppLinksApplicationTypes[c].label,value:nonAppLinksApplicationTypes[c].typeId,selected:true}}else{d={text:nonAppLinksApplicationTypes[c].label,value:nonAppLinksApplicationTypes[c].typeId}}e.push(d)}return e},createApplicationLink:function(c){var e=AppLinks.Creation.Process.createNonUalTypes();if(typeof c.getRemoteApplication().typeId!=="undefined"){if(c.getRemoteApplication().url!==c.getCorrectedUrl()){AppLinks.Creation.Dialogs.showConfirmUrlsDialog(c)}else{AppLinks.Creation.Dialogs.showCreateApplinkDialog(c)}}else{var d={url:c.getCorrectedUrl(),name:null,product:null,logoUrl:null,typeId:"generic"};c.setRemoteApplication(d);AppLinks.Creation.Dialogs.showCreateNonUalLinkDialog(e,c)}},processManifests:function(d,f,c,g){var e=AppLinks.Creation.Process.fetchManifestErrorHandler(d,f,c);if(!e){c.setLocalApplication(a.manifestToApplication(g));c.setRemoteApplication(a.manifestToApplication(d));c.setConfigureIncomingUserAuthentication(a.applicationSupportsIncomingThreeLeggedOAuth(g)&&a.applicationSupportsOutgoingThreeLeggedOAuth(d));c.setConfigureIncomingServerAuthentication(a.applicationSupportsIncomingTwoLeggedOAuth(g)&&a.applicationSupportsOutgoingTwoLeggedOAuth(d));c.setConfigureIncomingPreAuthentication(a.applicationSupportsIncomingTwoLeggedOAuthWithImpersonation(g)&&a.applicationSupportsOutgoingTwoLeggedOAuthWithImpersonation(d));c.setConfigureOutgoingUserAuthentication(a.applicationSupportsOutgoingThreeLeggedOAuth(g)&&a.applicationSupportsIncomingThreeLeggedOAuth(d));c.setConfigureOutgoingServerAuthentication(a.applicationSupportsOutgoingTwoLeggedOAuth(g)&&a.applicationSupportsIncomingTwoLeggedOAuth(d));c.setConfigureOutgoingPreAuthentication(a.applicationSupportsOutgoingTwoLeggedOAuthWithImpersonation(g)&&a.applicationSupportsIncomingTwoLeggedOAuthWithImpersonation(d));AppLinks.Creation.Process.createApplicationLink(c)}},fetchManifests:function(f,c){var d;if(c.getUseCors()){d=AppLinks.SPI.getRemoteManifest(c.getCorrectedUrl(),function(h){AppLinks.Creation.Dialogs.handleFetchManifestRestSuccess(h,c)},function(h){AppLinks.Creation.Dialogs.handleFetchManifestRestFailure(h,c)})}else{d=AppLinks.SPI.tryToFetchManifest(c.getCorrectedUrl(),function(h){AppLinks.Creation.Dialogs.handleFetchManifestRestSuccess(h,c)},function(h){AppLinks.Creation.Dialogs.handleFetchManifestRestFailure(h,c)})}var g=AppLinks.SPI.getLocalManifest(function(h){AppLinks.Creation.Dialogs.handleFetchManifestRestSuccess(h,c)},function(h){AppLinks.Creation.Dialogs.handleFetchManifestRestFailure(h,c)});var e=b.when(d,g);e.done(function(i,k){var j=k[0];var h=i[0];AppLinks.Creation.Process.processManifests(h,f,c,j)});e.fail(function(i){var h=i;AppLinks.SPI.getLocalManifest(null,function(j){AppLinks.Creation.Dialogs.handleUrlErrors(j,c)}).done(function(j){AppLinks.Creation.Process.processManifests(h,f,c,j)})});return e},fetchManifestErrorHandler:function(f,e,c){var d=function(){g=false;AppLinks.UI.hideErrorBox()},g;AppLinks.Creation.userDefinedUrlField.on("change",d);var h=function(j){if(e){d();return false}if(typeof j.code==="undefined"){return false}if(j.code=="applinks.warning.redirected.host"){c.incrementRedirectCount();if(j.params&&j.params.redirectedUrl){if(j.params.redirectedUrl.indexOf("rest/applinks/")>0){var i=j.params.redirectedUrl.substring(0,j.params.redirectedUrl.indexOf("rest/applinks/"));c.setCorrectedUrl(i)}else{var i=j.params.redirectedUrl;c.setCorrectedUrl(i)}}var k;if(c.getRedirectCount()==1){k=AJS.format("The supplied Application URL has redirected once. Please check the redirected URL field to ensure this is a URL that you trust.",c.getRedirectCount())}else{k=AJS.format("The supplied Application URL has redirected {0} times. Please check the redirected URL field to ensure this is a URL that you trust.",c.getRedirectCount())}AppLinks.Creation.Dialogs.showConfigureUrlDialog(k,e,c,true)}if(j.code=="applinks.warning.unknown.host"){if(c.isCreatingReciprocal()){AppLinks.Creation.Dialogs.showReciprocalManifestUnobtainableDialog(c)}else{AppLinks.Creation.Dialogs.showConfigureUrlDialog(j.warning,true,c,false)}}if(j.code=="applinks.warning.incompatible.applinks.version"){c.setRemoteApplication(a.manifestToApplication(j));AppLinks.Creation.Dialogs.showIncompatibleApplinksVersionDialog(c)}if(j.code=="applinks.warning.host.does-not-support-manifest"){if(c.getUseCors()){if(c.isCreatingReciprocal()){console.log("Unable to retrieve remote Manifest using CORS");AppLinks.Creation.Dialogs.showReciprocalManifestUnobtainableDialog(c)}}else{console.log("Unable to retrieve remote Manifest. Try again using CORS");c.setUseCors(true);AppLinks.Creation.Process.fetchManifests(false,c)}}if(j.code=="applinks.warning.host.duplicated"){if(c.isCreatingReciprocal()==true){AppLinks.Creation.Dialogs.showReciprocalDuplicateDialog(c.getCorrectedUrl(),j.warning,c)}else{AppLinks.Creation.Dialogs.showLocalDuplicateDialog(j.warning,c)}}if(j.code=="applinks.error.rpcurl"){AppLinks.Creation.Dialogs.showConfigureUrlDialog(j.warning,true,c,false)}return true};return h(f)},createConsumer:function(c,d){if(c.getUseCors()){return AppLinks.Creation.Process.createConsumerConfiguredFromRemoteConsumerInfo(c,d)}else{return AppLinks.Creation.Process.createConsumerAutoConfigured(c,d)}},createConsumerAutoConfigured:function(c,d){var g=true,f=null,e=c.getSharedUserbase();AppLinks.SPI.createConsumerAutoConfigure(c.getCreatedApplicationLinkId(),g,f,e,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(h){console.log(h,"Consumer successfully created and autoconfigured.");d.notify();d.resolve()}).fail(function(h){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"autoConfigureConsumerFailed");console.log(h,"Consumer creation and autoconfigure failed.");d.reject()})},createConsumerConfiguredFromRemoteConsumerInfo:function(c,d){var g=true,f=null,e=c.getSharedUserbase();AppLinks.SPI.getRemoteOAuthConsumerInfo(c.getCorrectedUrl(),AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(h){console.log(h,"Retrieving remote Consumer Info succeeded.");var k=b(h).find("name").text(),i=b(h).find("key").text(),j=b(h).find("publicKey").text();AppLinks.SPI.createConsumer(c.getCreatedApplicationLinkId(),i,k,null,null,j,g,f,e,false,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleConfigureIncomingNonUalLinkErrors).done(function(l){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_SUCCESS);console.log(l,"Consumer successfully created.")}).fail(function(l){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"createConsumerFailed");console.log(l,"Consumer creation failed.")});d.notify();d.resolve()}).fail(function(h){console.log(h,"Retrieving remote Consumer Info failed.");d.reject()})},register2LOiProvider:function(e,c,d){var f=c.getCreatedApplicationLinkId()==null?c.getOriginalCreatedApplicationLinkId():c.getCreatedApplicationLinkId();AppLinks.SPI.registerProvider(f,"com.atlassian.applinks.api.auth.types.TwoLeggedOAuthWithImpersonationAuthenticationProvider",e,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(g){console.log(g,"2LOi Provider registered.");d.notify();d.resolve()}).fail(function(){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"register2LOiProviderFailed");console.log("OAuth 2LOi AuthenticationProvider registration failed.");d.reject()})},register2LOProvider:function(c,d){var e={};var f=c.getCreatedApplicationLinkId()==null?c.getOriginalCreatedApplicationLinkId():c.getCreatedApplicationLinkId();AppLinks.SPI.registerProvider(f,"com.atlassian.applinks.api.auth.types.TwoLeggedOAuthAuthenticationProvider",e,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(g){console.log(g,"2LO Provider registered.");if(c.getConfigureOutgoingPreAuthentication()){if(c.getSharedUserbase()==true&&a.isSysAdmin()){c.updateStatusLog(AppLinks.Creation.STATUS_REGISTERPROVIDER_2LOI_FAILURE,"register2LOiProviderNotSysAdminFailed");AppLinks.Creation.Process.register2LOiProvider(e,c,d)}else{d.notify();d.resolve()}}else{console.log("Skipped registering outgoing 2LOi as one host does not support it.");d.notify();d.resolve()}}).fail(function(g){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"register2LOProviderFailed");console.log(g,"OAuth 2LO AuthenticationProvider registration failed.");d.reject()})},register3LOProvider:function(c,d){var e={};AppLinks.SPI.registerProvider(c.getCreatedApplicationLinkId(),"com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider",e,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(){if(c.getConfigureOutgoingServerAuthentication()){AppLinks.Creation.Process.register2LOProvider(c,d)}else{console.log("Skipped registering outgoing 2LO as one host does not support it.");d.notify();d.resolve()}}).fail(function(){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"register3LOProviderFailed");console.log("OAuth AuthenticationProvider registration failed.");d.reject()})},retrieveApplicationLink:function(e,c,d,f){var g=e["resources-created"][0].href;AppLinks.get(g,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(h){console.log(h,"Application link read.");c.setCreatedApplicationLinkId(h.id);if(!c.isCreatingReciprocal()){c.setOriginalCreatedApplicationLinkId(h.id)}if(typeof f!="undefined"){f(c,d)}}).fail(function(){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"retrieveApplicationLinkFailed");console.log("Application link read failed.");d.reject()})},createUalLinkAndConfigureIncoming:function(c){var d=new b.Deferred();if(!c.isCreatingReciprocal()){c.setSharedUserbase(b("#userbase").is(":checked"))}AppLinks.SPI.createApplicationLink(c.getRemoteApplication().id,c.getRemoteApplication().name,c.getRemoteApplication().rpcUrl,c.getRemoteApplication().url,c.getRemoteApplication().typeId,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(e){if(c.getConfigureIncomingAuthentication()){AppLinks.Creation.Process.retrieveApplicationLink(e,c,d,AppLinks.Creation.Process.createConsumer)}else{console.log(e,"Skipping Consumer creation as local instance does not support 3LO.");d.notify();d.resolve()}}).fail(function(){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"createApplicationLinkFailed");console.log("Application link creation failed.");d.reject()});return d.promise()},createUrlLink:function(c){var d=new b.Deferred();AppLinks.SPI.createApplicationLink(c.getRemoteApplication().id,c.getRemoteApplication().name,c.getRemoteApplication().rpcUrl,c.getRemoteApplication().url,c.getRemoteApplication().typeId,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(e){console.log("Application link created.");AppLinks.Creation.Process.retrieveApplicationLink(e,c,d,function(){d.notify();d.resolve()})}).fail(function(){console.log("Application link creation failed.");d.reject()});return d.promise()},retrieveUalLinkAndConfigureOutgoing:function(c){var d=new b.Deferred();var e={};if(c.getConfigureOutgoingUserAuthentication()){AppLinks.SPI.registerProvider(c.getOriginalCreatedApplicationLinkId(),"com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider",e,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(f){if(c.getConfigureOutgoingServerAuthentication()){AppLinks.Creation.Process.register2LOProvider(c,d)}else{console.log("Skipped registering outgoing 2LO as one host does not support it.");d.notify();d.resolve()}}).fail(function(f){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"register3LOProviderFailed");console.log(f,"OAuth AuthenticationProvider registration failed.");d.reject()})}else{console.log("Skipped registering outgoing 3LO as one host does not support it.");d.notify();d.resolve()}return d.promise()},createUalLinkAndConfigureIncomingAndOutgoing:function(c){var d=new b.Deferred();if(!c.isCreatingReciprocal()){c.setSharedUserbase(b("#userbase").is(":checked"))}AppLinks.SPI.createApplicationLink(c.getRemoteApplication().id,c.getRemoteApplication().name,c.getRemoteApplication().rpcUrl,c.getRemoteApplication().url,c.getRemoteApplication().typeId,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleRestErrors).done(function(e){AppLinks.Creation.Process.retrieveApplicationLink(e,c,d,function(f,g){var h=false;if(f.getConfigureOutgoingUserAuthentication()){AppLinks.Creation.Process.register3LOProvider(f,g)}else{console.log(e,"Skipped configuring outgoing User Authentication.");h=true}if(f.getConfigureIncomingAuthentication()){AppLinks.Creation.Process.createConsumer(f,g)}else{console.log(e,"Skipped configuring incoming Authentication.");h=true}if(h){console.log(e,"Link retrieved successfully.");g.notify();g.resolve()}})}).fail(function(){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"createApplicationLinkFailed");console.log("Application link creation failed.");d.reject()});return d.promise()},configureIncomingNonUalLink:function(f,d,e,c){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_INPROGRESS);return AppLinks.SPI.createConsumer(c.getCreatedApplicationLinkId(),d,f,null,null,e,false,null,null,false,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleConfigureIncomingNonUalLinkErrors).done(function(g){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_SUCCESS);console.log(g,"Consumer successfully created.")}).fail(function(g){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"createConsumerFailed");console.log(g,"Consumer creation failed.")})},createOutgoingNonUalLink:function(d,c,k,m,n,p,g,h,i,e,f){var r=new b.Deferred(),j;function o(t){AppLinks.get(t["resources-created"][0].href,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleCreateNonUalLinkErrors).done(function(u){f.setCreatedApplicationLinkId(u.id);if(!f.isCreatingReciprocal()){f.setOriginalCreatedApplicationLinkId(u.id)}if(m==""&&n==""&&p==""&&g==""&&h==""&&i==""){f.updateStatusLog(AppLinks.Creation.STATUS_CREATION_SUCCESS);if(e!=true){r.notify();r.resolve()}else{l()}}else{s()}}).fail(function(){f.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"retrieveApplicationLinkFailed");console.log("Unable to read ApplicationLink.");r.reject()})}function s(){var t={"serviceProvider.accessTokenUrl":m,"serviceProvider.requestTokenUrl":n,"consumerKey.outbound":p,"serviceProvider.authorizeUrl":g};AppLinks.SPI.registerProvider(f.getCreatedApplicationLinkId(),"com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider",t,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleCreateNonUalLinkErrors).done(q).fail(function(){f.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"register3LOProviderFailed");console.log("AuthenticationProvider registration failed.");r.reject()})}function q(t){console.log(t,"AuthenticationProvider successfully registered.");AppLinks.SPI.createConsumer(f.getCreatedApplicationLinkId(),p,i,null,h,null,true,null,null,true,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleCreateNonUalLinkErrors).done(l).fail(function(u){f.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"createConsumerFailed");console.log(u,"Consumer creation failed.");r.reject()})}function l(){r.notify();console.log("Consumer successfully created.");if(!e){f.updateStatusLog(AppLinks.Creation.STATUS_CREATION_SUCCESS);r.resolve();return}var t=AppLinks.Creation.Dialogs.showConfigureIncomingNonUalLinkDialog(f,r)}AppLinks.SPI.createApplicationLink(null,d,k,k,c,AppLinks.Creation.Dialogs.handleRestSuccess,AppLinks.Creation.Dialogs.handleCreateNonUalLinkErrors).done(o).fail(function(){f.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"createApplicationLinkFailed");console.log("Application link creation failed.");r.reject()});return r.promise()},successRedirectToCreateReciprocal:function(c){c.updateStatusLog(AppLinks.Creation.STATUS_LOCAL_SUCCESS);c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_INPROGRESS);return{wait:function(){AppLinks.Creation.Dialogs.showRedirectPauseDialog(true,c.getRemoteApplication().name)},done:function(){var d=AppLinks.Creation.generateApplinksCreationRedirectionUrl(true,c);window.location=d}}},successIncompatibleApplinksVersion:function(c){c.updateStatusLog(AppLinks.Creation.STATUS_LOCAL_SUCCESS);return{wait:function(){},done:function(){if(c.doInitiatorRedirect()){AppLinks.Creation.Process.showFinalStatus(c)}else{AppLinks.Creation.Dialogs.showIncompatibleApplinksVersionCompletionDialog(c)}}}},successManualRedirect:function(c){c.updateStatusLog(AppLinks.Creation.STATUS_LOCAL_SUCCESS);return{wait:function(){},done:function(){AppLinks.Creation.Dialogs.showManuallyCreateReciprocalLinkDialog(c.getRemoteApplication().name,c.getRemoteApplication().url,c.getLocalApplication().url,false,c)}}},successRedirectToReturn:function(c){c.updateStatusLog(AppLinks.Creation.STATUS_RECIPROCAL_SUCCESS);return{wait:function(){AppLinks.Creation.Dialogs.showRedirectPauseDialog(false,c.getRemoteApplication().name)},done:function(){var d=AppLinks.Creation.generateApplinksCreationRedirectionUrl(false,c);window.location=d}}},successNoRedirect:function(c){return{wait:function(){AppLinks.Creation.Dialogs.showProcessingPauseDialog(c)},done:function(){AppLinks.Creation.Process.showFinalStatus(c)}}},showFinalStatus:function(c){var e,d;var f;if(c.isCreatingReciprocal()){f=c.getCreatedApplicationLinkId()}else{f=c.getOriginalCreatedApplicationLinkId()}if(f===null){AppLinks.Creation.Process.doFinalDisplay(d,e,c);return}AppLinks.SPI.getApplicationLink(f).done(function(g){if(c.localCreationSucceeded()&&c.reciprocalCreationSucceeded()){d=AppLinks.Creation.CREATION_RESULT_INFO_KEY;e=AJS.format("Application Link \u0027\u0027{0}\u0027\u0027 created successfully.",g.name)}else{if(c.localCreationSucceeded()&&!c.getRespectRedirects()){d=AppLinks.Creation.CREATION_RESULT_WARN_KEY;e=AJS.format("Application Link \u0027\u0027{0}\u0027\u0027 was created successfully locally but creating the reciprocal link was not attempted. Please review the configuration using the Edit option.",g.name);c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE)}else{if(c.localCreationSucceeded()&&!c.reciprocalCreationSucceeded()){d=AppLinks.Creation.CREATION_RESULT_WARN_KEY;e=AJS.format("Application Link \u0027\u0027{0}\u0027\u0027 was created successfully locally but the reciprocal link was not created. Please review the configuration using the Edit option.",g.name);if(c.doInitiatorRedirect()){c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE,"reciprocalCreationNotAttempted")}else{c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE)}}else{if(!c.localCreationSucceeded()&&c.reciprocalCreationSucceeded()){d=AppLinks.Creation.CREATION_RESULT_WARN_KEY;e=AJS.format("Application Link \u0027\u0027{0}\u0027\u0027 was \u0027\u0027not\u0027\u0027 created locally but strangely the reciprocal link was created. Please review the configuration on the target server.",g.name);c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE)}else{if(c.creationHasCompletedSuccessfully()){d=AppLinks.Creation.CREATION_RESULT_INFO_KEY;e=AJS.format("Application Link \u0027\u0027{0}\u0027\u0027 created successfully.",g.name)}else{d=AppLinks.Creation.CREATION_RESULT_WARN_KEY;e=AJS.format("It has not been possible to determine the state of the link \u0027\u0027{0}\u0027\u0027.",g.name);c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE)}}}}}AppLinks.Creation.Process.doFinalDisplay(d,e,c,g)}).fail(function(g){d=AppLinks.Creation.CREATION_RESULT_WARN_KEY;e=AJS.format("It has not been possible to find the link \u0027\u0027{0}\u0027\u0027.",f);c.updateStatusLog(AppLinks.Creation.STATUS_CREATION_FAILURE);AppLinks.Creation.Process.doFinalDisplay(d,e,c)})},doFinalDisplay:function(d,g,c,h){var f=[];f.push(g);if(c.isCreatingReciprocal()&&c.getRespectRedirects()&&c.creationInProgress()){AppLinks.Creation.displayOutstandingMessages(d,f);AppLinks.Creation.Dialogs.resetProcess()}else{if(c.doInitiatorRedirect()){AppLinks.Creation.displayOutstandingMessages(d,f);AppLinks.ExternalInitiation.processInitiatorRedirect(c)}else{if(window.location.search===null){AppLinks.Creation.displayOutstandingMessages(d,f);AppLinks.UI.listApplicationLinks();AppLinks.Creation.Dialogs.resetProcess()}else{var e={};a.putParameter(d,f,e);if(h&&c.localCreationSucceeded()){a.putParameter(AppLinks.Creation.CREATION_EVENT_NEW_APPLINK_ID,h.id,e);a.putParameter(AppLinks.Creation.CREATION_EVENT_NEW_APPLINK_TYPE,h.typeId,e)}window.location=AppLinks.Creation.generateUrl(window.location.pathname,e)}}}AppLinks.Creation.initCreationState()}}})(AJS.$,require("applinks/js/util"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-ui-creation', location = 'js/new/applinks-creation-state.js' */
(function(b){function a(){var e=AppLinks.Creation.CREATION_REMOTE_URL,c=AppLinks.Creation.CREATION_IGNORE_REDIRECTS,i=(window.location.search.indexOf(e)+1),h=(window.location.search.indexOf(c)+1),d=!!h;var g=!d;var f=!!i;this.sharedUserbase=AppLinks.Creation.getSubmittedSharedUserbase();this.creatingReciprocal=f;this.remoteType=b.getParameterValue(AppLinks.Creation.CREATION_REMOTE_TYPE);this.remoteUrl=b.getParameterValue(AppLinks.Creation.CREATION_REMOTE_URL);this.statusLog=AppLinks.Creation.getSubmittedStatusLog();this.createdApplicationLinkId=null;this.originalCreatedApplicationLinkId=AppLinks.Creation.getSubmittedOriginalCreatedId();this.userDefinedUrl=null;this.correctedUrl=null;this.initiatorRedirect="",this.initiatorRedirectName="";this.initiatorTargetUrl="";this.initiatorSharedUserbase=false;this.initiatorIsRemoteAdmin=true;this.redirectCount=0;this.respectRedirects=g;this.localApplication=null;this.remoteApplication=null;this.useCors=false;this.incompatibleApplinksVersion=false;this.createUnconfiguredLink=false;this.configureOutgoingUserAuthentication=b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_USER_AUTH)==null?true:b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_USER_AUTH);this.configureOutgoingServerAuthentication=b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_SERVER_AUTH)==null?true:b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_SERVER_AUTH);this.configureOutgoingPreAuthentication=b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_PRE_AUTH)==null?false:b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_OUTGOING_PRE_AUTH);this.configureIncomingUserAuthentication=b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_INCOMING_USER_AUTH)==null?true:b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_INCOMING_USER_AUTH);this.configureIncomingServerAuthentication=b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_INCOMING_SERVER_AUTH)==null?true:b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_INCOMING_SERVER_AUTH);this.configureIncomingPreAuthentication=b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_INCOMING_PRE_AUTH)==null?false:b.getParameterValue(AppLinks.Creation.CREATION_CONFIGURE_INCOMING_PRE_AUTH)}a.prototype.getSharedUserbase=function(){return this.sharedUserbase};a.prototype.setSharedUserbase=function(c){this.sharedUserbase=c};a.prototype.isCreatingReciprocal=function(){return this.creatingReciprocal};a.prototype.getStatusLog=function(){if(typeof this.statusLog=="undefined"){this.statusLog=[]}return this.statusLog};a.prototype.getOriginalCreatedApplicationLinkId=function(){return this.originalCreatedApplicationLinkId};a.prototype.setOriginalCreatedApplicationLinkId=function(c){this.originalCreatedApplicationLinkId=c};a.prototype.getCreatedApplicationLinkId=function(){return this.createdApplicationLinkId};a.prototype.setCreatedApplicationLinkId=function(c){this.createdApplicationLinkId=c};a.prototype.getInitiatorRedirect=function(){return this.initiatorRedirect};a.prototype.setInitiatorRedirect=function(c){this.initiatorRedirect=c};a.prototype.getInitiatorRedirectName=function(){return this.initiatorRedirectName};a.prototype.setInitiatorRedirectName=function(c){this.initiatorRedirectName=c};a.prototype.getInitiatorTargetUrl=function(){return this.initiatorTargetUrl};a.prototype.setInitiatorTargetUrl=function(c){this.initiatorTargetUrl=c};a.prototype.getInitiatorSharedUserbase=function(){return this.initiatorSharedUserbase};a.prototype.setInitiatorSharedUserbase=function(c){this.initiatorSharedUserbase=c};a.prototype.getInitiatorIsRemoteAdmin=function(){return this.initiatorIsRemoteAdmin};a.prototype.setInitiatorIsRemoteAdmin=function(c){this.initiatorIsRemoteAdmin=c};a.prototype.doInitiatorRedirect=function(){return this.getInitiatorRedirect()!==null&&this.getInitiatorRedirect()!==""&&!this.isCreatingReciprocal()};a.prototype.getRedirectCount=function(){return this.redirectCount};a.prototype.incrementRedirectCount=function(){this.redirectCount++};a.prototype.getRespectRedirects=function(){return this.respectRedirects};a.prototype.getUserDefinedUrl=function(){return this.userDefinedUrl};a.prototype.setUserDefinedUrl=function(c){this.userDefinedUrl=c};a.prototype.getCorrectedUrl=function(){return this.correctedUrl};a.prototype.getRemoteApplicationUrl=function(){return this.getRemoteApplication()!==null?this.getRemoteApplication().url:this.correctedUrl};a.prototype.getRemoteApplicationType=function(){return this.getRemoteApplication()!==null?this.getRemoteApplication().typeId:this.remoteType};a.prototype.getRemoteApplicationName=function(){return this.getRemoteApplication()!==null?this.getRemoteApplication().name!==null?this.getRemoteApplication().name:this.getRemoteApplication().url:this.correctedUrl};a.prototype.setCorrectedUrl=function(c){this.correctedUrl=c};a.prototype.updateStatusLog=function(c,d){this.getStatusLog().push({status:c,detail:d})};a.prototype.getCurrentStatus=function(){if(this.getStatusLog().length>0){return this.getStatusLog()[this.getStatusLog().length-1].status}else{return null}};a.prototype.getCurrentStatusDetail=function(){if(this.getStatusLog().length>0){return this.getStatusLog()[this.getStatusLog().length-1].detail}else{return null}};a.prototype.getFirstFailureStatus=function(){var c=new RegExp(AppLinks.Creation.STATUS_CREATION_FAILURE,"i");return this.getStatus(c)};a.prototype.getFirstFailureStatusStatus=function(){return this.getFirstFailureStatus().status};a.prototype.getFirstFailureStatusDetail=function(){return this.getFirstFailureStatus().detail};a.prototype.getStatus=function(d){for(var c=0;c<this.getStatusLog().length;c++){if(d.test(this.getStatusLog()[c].status)){return this.getStatusLog()[c]}}return null};a.prototype.reciprocalCreationCompleted=function(){return this.reciprocalCreationSucceeded()||this.reciprocalCreationFailed()};a.prototype.reciprocalCreationSucceeded=function(){var c=new RegExp(AppLinks.Creation.STATUS_RECIPROCAL_SUCCESS,"i");return this.getStatus(c)!=null};a.prototype.reciprocalCreationFailed=function(){var c=new RegExp(AppLinks.Creation.STATUS_RECIPROCAL_FAILURE,"i");return this.getStatus(c)!=null};a.prototype.localCreationSucceeded=function(){var c=new RegExp(AppLinks.Creation.STATUS_LOCAL_SUCCESS,"i");return this.getStatus(c)!=null};a.prototype.localCreationFailed=function(){var c=new RegExp(AppLinks.Creation.STATUS_LOCAL_FAILURE,"i");return this.getStatus(c)!=null};a.prototype.localCreationIsComplete=function(){var d=new RegExp(AppLinks.Creation.STATUS_LOCAL_SUCCESS,"i");var c=new RegExp(AppLinks.Creation.STATUS_LOCAL_FAILURE,"i");return this.getStatus(d)!=null||this.getStatus(c)!=null};a.prototype.creationHasCompletedSuccessfully=function(){var c=this.getCurrentStatus();var d=new RegExp(AppLinks.Creation.STATUS_CREATION_SUCCESS,"i");return c!==null&&d.test(c)};a.prototype.creationHasCompleted=function(){var c=this.getCurrentStatus();var f=new RegExp(AppLinks.Creation.STATUS_CREATION_SUCCESS,"i");var d=new RegExp(AppLinks.Creation.STATUS_CREATION_FAILURE,"i");var e=new RegExp(AppLinks.Creation.STATUS_CREATION_INPROGRESS,"i");return c!==null&&(f.test(c)||d.test(c))&&!e.test(c)};a.prototype.creationInProgress=function(){return this.getStatusLog().length>0&&!this.creationHasCompleted()};a.prototype.getLocalApplication=function(){return this.localApplication};a.prototype.setLocalApplication=function(c){this.localApplication=c};a.prototype.getRemoteApplication=function(){return this.remoteApplication};a.prototype.setRemoteApplication=function(c){this.remoteApplication=c};a.prototype.getIncompatibleApplinksVersion=function(){return this.incompatibleApplinksVersion};a.prototype.setIncompatibleApplinksVersion=function(c){this.incompatibleApplinksVersion=c};a.prototype.setUseCors=function(c){this.useCors=c};a.prototype.getUseCors=function(){return this.useCors};a.prototype.getCreateUnconfiguredLink=function(){return this.createUnconfiguredLink};a.prototype.setCreateUnconfiguredLink=function(c){this.createUnconfiguredLink=c};a.prototype.getConfigureIncomingUserAuthentication=function(){return this.configureIncomingUserAuthentication};a.prototype.setConfigureIncomingUserAuthentication=function(c){this.configureIncomingUserAuthentication=c};a.prototype.getConfigureIncomingServerAuthentication=function(){return this.configureIncomingServerAuthentication};a.prototype.setConfigureIncomingServerAuthentication=function(c){this.configureIncomingServerAuthentication=c};a.prototype.getConfigureIncomingPreAuthentication=function(){return this.configureIncomingPreAuthentication};a.prototype.setConfigureIncomingPreAuthentication=function(c){this.configureIncomingPreAuthentication=c};a.prototype.getConfigureOutgoingUserAuthentication=function(){return this.configureOutgoingUserAuthentication};a.prototype.setConfigureOutgoingUserAuthentication=function(c){this.configureOutgoingUserAuthentication=c};a.prototype.getConfigureOutgoingServerAuthentication=function(){return this.configureOutgoingServerAuthentication};a.prototype.setConfigureOutgoingServerAuthentication=function(c){this.configureOutgoingServerAuthentication=c};a.prototype.getConfigureOutgoingPreAuthentication=function(){return this.configureOutgoingPreAuthentication};a.prototype.setConfigureOutgoingPreAuthentication=function(c){this.configureOutgoingPreAuthentication=c};a.prototype.getConfigureIncomingAuthentication=function(){return(this.getConfigureIncomingUserAuthentication()||this.getConfigureIncomingServerAuthentication()||this.getConfigureIncomingPreAuthentication())};window.CreationState=a}(require("applinks/js/util")));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-ui-creation', location = 'js/new/applinks-externalinitiation.js' */
(function(b,a){AppLinks.ExternalInitiation={INITIATOR_REDIRECT_KEY:"initiatorRedirect",INITIATOR_REDIRECTNAME_KEY:"initiatorRedirectName",INITIATOR_TARGETURL_KEY:"initiatorTargetUrl",INITIATOR_SHAREDUSERBASE_KEY:"initiatorSharedUserbase",INITIATOR_ISREMOTEADMIN_KEY:"initiatorIsRemoteAdmin",APPLINKS_CREATION_STATUS_KEY:"applinksCreationStatus",APPLINKS_CREATION_STATUS_REASON_KEY:"applinksCreationStatusReason",APPLINKS_CREATION_ID_KEY:"applinksCreatedId",APPLINKS_CREATION_STATUS_SUCCESS:"created",APPLINKS_CREATION_STATUS_FAIL:"failed",getRedirectParam:function(){return a.getParameterValue(AppLinks.ExternalInitiation.INITIATOR_REDIRECT_KEY)},getRedirectNameParam:function(){return a.getParameterValue(AppLinks.ExternalInitiation.INITIATOR_REDIRECTNAME_KEY)},getTargetUrlParam:function(){return a.getParameterValue(AppLinks.ExternalInitiation.INITIATOR_TARGETURL_KEY)},getSharedUserbaseParam:function(){return a.getParameterValue(AppLinks.ExternalInitiation.INITIATOR_SHAREDUSERBASE_KEY)},getIsRemoteAdminParam:function(){return a.getParameterValue(AppLinks.ExternalInitiation.INITIATOR_ISREMOTEADMIN_KEY)},init:function(c){c.setInitiatorRedirect(AppLinks.ExternalInitiation.getRedirectParam());c.setInitiatorRedirectName(AppLinks.ExternalInitiation.getRedirectNameParam());c.setInitiatorTargetUrl(AppLinks.ExternalInitiation.getTargetUrlParam());c.setInitiatorSharedUserbase(AppLinks.ExternalInitiation.getSharedUserbaseParam());c.setInitiatorIsRemoteAdmin(AppLinks.ExternalInitiation.getIsRemoteAdminParam());if(c.getInitiatorTargetUrl()!==null&&c.getInitiatorTargetUrl()!==""){AppLinks.Creation.userDefinedUrlField.val(c.getInitiatorTargetUrl())}},redirectToInitiatorRedirect:function(c){a.waitUntilDone(function(){return{wait:function(){var d=c.getInitiatorRedirectName()!==null?c.getInitiatorRedirectName():c.getInitiatorRedirect();AppLinks.Creation.Dialogs.showRedirectPauseDialog(false,d)},done:function(){window.location=AppLinks.ExternalInitiation.generateInitiatorRedirectionUrl(c)}}})()},showRedirectToRedirect:function(c){return{wait:function(){var d=c.getInitiatorRedirectName()!==null?c.getInitiatorRedirectName():c.getInitiatorRedirect();AppLinks.Creation.Dialogs.showRedirectPauseDialog(false,d)},done:function(){window.location=AppLinks.ExternalInitiation.generateInitiatorRedirectionUrl(c)}}},setDialogInitiatorDefaults:function(c){if(!c.doInitiatorRedirect()){return}if(c.getInitiatorSharedUserbase()!==null){b("#userbase").prop("checked",c.getInitiatorSharedUserbase()=="true")}if(c.getInitiatorIsRemoteAdmin()!==null){b("#isAdmin").prop("checked",c.getInitiatorIsRemoteAdmin()=="true")}},generateInitiatorRedirectionUrl:function(c){var d={};if(c.creationHasCompletedSuccessfully()){d[AppLinks.ExternalInitiation.APPLINKS_CREATION_STATUS_KEY]=AppLinks.ExternalInitiation.APPLINKS_CREATION_STATUS_SUCCESS;d[AppLinks.ExternalInitiation.APPLINKS_CREATION_ID_KEY]=c.getOriginalCreatedApplicationLinkId()}else{d[AppLinks.ExternalInitiation.APPLINKS_CREATION_STATUS_KEY]=AppLinks.ExternalInitiation.APPLINKS_CREATION_STATUS_FAIL;d[AppLinks.ExternalInitiation.APPLINKS_CREATION_STATUS_REASON_KEY]=c.getFirstFailureStatusDetail();if(c.getOriginalCreatedApplicationLinkId()!==null){d[AppLinks.ExternalInitiation.APPLINKS_CREATION_ID_KEY]=c.getOriginalCreatedApplicationLinkId()}}return AppLinks.Creation.generateUrl(AppLinks.UI.addProtocolToURL(c.getInitiatorRedirect()),d)},processInitiatorRedirect:function(c){if(c.doInitiatorRedirect()&&c.creationHasCompleted()){AppLinks.ExternalInitiation.redirectToInitiatorRedirect(c)}}}})(AJS.$,require("applinks/js/util"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-ui', location = 'js/new/ui.js' */
(function(d,c,b,e,a){function f(){a.get().userDefinedUrlField=d("#applinks-url-entered");a.get().createAppLinkButton=d("#applinks-create-button");a.get().Dialogs.bindDialogBehaviors();a.get().userDefinedUrlField.on("input",function(){a.get().Dialogs.setSubmitStatus()});a.get().Dialogs.resetProcess();if(a.get().getCreationState().isCreatingReciprocal()){var g=a.get().getSubmittedRemoteUrl();a.get().getCreationState().setCorrectedUrl(g);if(!a.get().userDefinedUrlField.length){AJS.log("Something is wrong. New workflow resources provided but UI elements not found.");a.get().Dialogs.showApplinkCreationWorkflowNotAvailableDialog(AJS.format("Click Continue to be redirected back to \u0027\u0027{0}\u0027\u0027 or Cancel to remain here.",a.get().getCreationState().getCorrectedUrl()),a.get().globalCreationState);return}a.get().Process.fetchManifests(false,a.get().getCreationState())}else{d("#createApplicationLink").submit(function(k){k&&k.preventDefault();if(a.get().createAppLinkButton.prop("disabled")&&a.get().getCreationState().getInitiatorTargetUrl()==null){return}AppLinks.UI.hideErrorBox();AppLinks.UI.hideInfoBox();if(!a.get().userDefinedUrlField.length){AJS.log("Something is wrong. New workflow resources provided but UI elements not found.");a.get().Dialogs.showApplinkCreationWorkflowNotAvailableDialog(null,a.get().getCreationState());return}function i(){var m=JSON.parse(a.get().userDefinedUrlField.val());if(!m.consumerKey){m.consumerKey=m.name}if(!m.consumerName){m.consumerName=m.name}var l=null;e.get().createApplicationLink(null,m.name,m.url,m.url,"generic",function(){},a.get().Dialogs.handleRestErrors).success(_.bind(function(o){l=o["resources-created"][0]["href"];var n=l.split("/");var p=n[n.length-1];e.get().createConsumer(p,m.consumerKey,m.consumerName,null,null,m.publicKey,false,null,null,false,function(){b.location.reload()},_.bind(function(q){AppLinks.SPI.deleteLink(p,false,function(){},function(){});a.get().Dialogs.handleRestErrors(q)}),this)}),this)}if(a.get().userDefinedUrlField.val()[0]==="{"){i.call(this);return}a.get().initCreationState();a.get().getCreationState().updateStatusLog(a.get().STATUS_CREATION_INPROGRESS);AppLinks.ExternalInitiation.init(a.get().getCreationState());var j=AppLinks.UI.addProtocolToURL(a.get().userDefinedUrlField.val());a.get().getCreationState().setUserDefinedUrl(j);a.get().getCreationState().setCorrectedUrl(a.get().getCreationState().getUserDefinedUrl());a.get().Dialogs.resetProcess();a.get().Process.fetchManifests(false,a.get().getCreationState())});if(a.get().getCreationState().reciprocalCreationCompleted()){if(a.get().Process.twoStageCreation){var h=a.get().Process.retrieveUalLinkAndConfigureOutgoing(a.get().getCreationState());h.progress(function(){});h.done(function(){c.waitUntilDone(function(){return a.get().Process.successNoRedirect(a.get().getCreationState())})()});h.fail(function(){})}else{a.get().Process.showFinalStatus(a.get().getCreationState())}}}}d(function(){e.get().setApiVersion("3.0");a.get().getAndDisplayOutstandingMessages();f();AppLinks.ExternalInitiation.init(a.get().globalCreationState);if(a.get().globalCreationState.initiatorTargetUrl!==null){d("#createApplicationLink").submit()}a.get().fireEventIfApplinkCreated()})})(AJS.$,require("applinks/js/util"),require("applinks/lib/window"),require("applinks/lib/spi"),require("applinks/lib/creation"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-table', location = 'js/new/warnings.js' */
(function(a){AppLinks.Warnings={upgradeApplinkWarning:function(c,b){var d=applinks.templates.list.getUpgradeWarning({name:c.name,id:c.id});AppLinks.UI.showWarningBox(d);a(".upgrade-"+c.id).click(b,function(g){var h;g.preventDefault();AppLinks.UI.hideInfoBox();if(g.data==="UPGRADED_TO_UAL"){h={application:c,description:AJS.format("The remote application \u0027\u0027{0}\u0027\u0027 appears to have been upgraded. This wizard lets you apply these changes to the application link to ensure your project links keep working properly.",c.name),manifest:{name:c.name,typeId:c.typeId},successCallback:function(e){AppLinks.UI.listApplicationLinks(e.applicationLink.name,"upgrade",e)}};AppLinks.showUpgradeLinkToUALDialog(h)}else{var f=AppLinks.UI.prettyJoin(localEntityTypeIdStrings,function(e){return AppLinks.I18n.getEntityTypeName(e)},"and");h={application:c,description:AJS.format("The remote application \u0027\u0027{0}\u0027\u0027 may have been relocated. To ensure our {1} links remain working properly, we can update the Application Link.",c.name,f),helpKey:"applinks.docs.upgrade.application.link",submit:function(i,e){AppLinks.SPI.legacyUpgrade(c,i,e)},callback:function(e){c.applicationId=e;AppLinks.UI.listApplicationLinks(c.name,"upgrade")}};AppLinks.showUpgradeLinkDialog(h)}})},relocateApplinkWarning:function(c){var b;AppLinks.UI.showWarningBox(applinks.templates.list.getRelocateWarning({name:c.name,id:c.id,rpcUrl:c.rpcUrl}));b=a(".relocate-"+c.id);b.click(function(f){f.preventDefault();AppLinks.UI.hideInfoBox();var d={description:AJS.format("Relocate Application Link \u0027\u0027{0}\u0027\u0027 to a different URL.",c.name),application:c,helpKey:"applinks.docs.relocate.application.link",doRelocate:function(g,h,e){AppLinks.SPI.relocate(c,g,false,h,e)},doForceRelocate:function(g,h,e){AppLinks.SPI.relocate(c,g,true,h,e)},callback:function(){AppLinks.UI.listApplicationLinks(c.name,"relocate")}};AppLinks.showRelocateLinkDialog(d)})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-new-table', location = 'js/new/list-applinks-table.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){var b=AJS.$;var a={"i18n-update":function(c){return AJS.format("Updated Application Link \u0027\u0027{0}\u0027\u0027 successfully.",c)},"i18n-relocate":function(c){return AJS.format("applinks.link.relocate.success",c)},"i18n-upgrade":function(c){return AJS.format("Upgraded Application Link \u0027\u0027{0}\u0027\u0027 successfully.",c)},"i18n-delete":function(c){return AJS.format("Deleted Application Link \u0027\u0027{0}\u0027\u0027 successfully.",c)},"i18n-primary":function(c){return AJS.format("New primary link \u0027\u0027{0}\u0027\u0027 success.",c)}};b.each(["update","relocate","upgrade","delete","primary"],function(c,d){AppLinks.UI.bind(d,function(e,f){AppLinks.UI.showInfoBox(b("<span>").text(a["i18n-"+d](f)))})});b.extend(AppLinks.UI||{},{listApplicationLinks:function(d,f,e){if(AppLinks.Creation.aboutToRedirect()){return}var c=b("#applicationsList");c.removeClass("fully-loaded");b(".no-links").hide();b(".links-loading").show();b(".relocate-warning").closest(".aui-message.warning").remove();b(".upgrade-warning").closest(".aui-message.warning").remove();b("#application-links-table").hide();c.empty();AppLinks.SPI.getAllLinksWithAuthInfo(function(i){var h=b("#applicationsList"),l=i.list,m=function(A,B){var z={typeLabel:AppLinks.I18n.getApplicationTypeName(A.typeId)};var F;if(B){F=b(AJS.template.load("al-system-row").fill(b.extend(z,A)).fillHtml({applicationId:A.id}).fillHtml({iconTag:A.iconUrl?AJS.template.load("al-row-application-icon").fill({iconUrl:A.iconUrl}).toString():""}).toString())}else{F=b(AJS.template.load("al-row").fill(b.extend(z,A)).fillHtml({applicationId:A.id}).fillHtml({iconTag:A.iconUrl?AJS.template.load("al-row-application-icon").fill({iconUrl:A.iconUrl}).toString():""}).toString());F.find(".app-delete-link").click({application:A},AppLinks.bindDeleteLink);F.find(".app-edit-link").click({application:A},AppLinks.bindEditAppLink);if(!A.isPrimary){F.find(".app-toggleprimary-action").show();F.find(".app-toggleprimary-link").click(function(x){x.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.SPI.makePrimary(A,function(){AppLinks.UI.listApplicationLinks(A.id,"primary")})})}else{F.find(".app-toggleprimary-action").hide()}if(b("#ual.list-links").data("sysadminFlag")){AppLinks.SPI.getApplicationLinkState(A.id,function(x){if(x.appLinkState==="OFFLINE"){AppLinks.Warnings.relocateApplinkWarning(A)}else{if(x.appLinkState!=="OK"){AppLinks.Warnings.upgradeApplinkWarning(A,x.appLinkState)}}},function(G){var x=AppLinks.parseError(G);AppLinks.UI.showErrorBox(x)})}}var E=function(x,G){return(typeof G==="undefined"||G===null||G==="")?"":(x+"='"+G+"'")};var w=F.find("ul.app-actions");for(var y=0;y<A.webItems.length;y++){var v=A.webItems[y];if(v.iconUrl){v.icon=AJS.template.load("al-row-op-webitem-icon").fill(v).toString()}else{v.icon=""}v.id=E("id",v.id);v.tooltip=E("tooltip",v.tooltip);v.styleClass=E("styleClass",v.styleClass);v.accessKey=E("accessKey",v.accessKey);w.append(AJS.template.load("al-row-op-webitem").fill(v).toString())}for(var D=0;D<A.webPanels.length;D++){var C=A.webPanels[D];w.append(b("<li>| "+C.html+"</li>"))}return F};var o;b(".links-loading").hide();if(l.length==0){b("#application-links-table").hide();b(".no-links").show();b("#add-first-application-link").click(function(v){v.preventDefault();b("#add-application-link").click()})}else{b("#application-links-table").show();b(".no-links").hide()}var k=false,s;for(var q=0,g=l.length;q<g;q++){var p=l[q],n=p.application;n.hasIncoming=p.hasIncomingAuthenticationProviders;n.hasOutgoing=p.hasOutgoingAuthenticationProviders;n.webItems=p.webItems;n.webPanels=p.webPanels;if(!k&&s&&s==n.typeId){k=true}s=n.typeId;if(d&&n.id==d){o=p}h.append(m(n,p.isSystem))}if(k){b(".primary-column").show()}else{b(".primary-column").hide()}if(d){AppLinks.UI.trigger(f,d,f,e);if(f=="new"){var u;if(!o||!o.configuredOutboundAuthenticators||o.configuredOutboundAuthenticators.length==0){u=AJS.format("Created a link to \u0027\u0027{0}\u0027\u0027 without outgoing authentication.",AppLinks.UI.sanitiseHTML(o.application.name))}else{if(o.configuredOutboundAuthenticators&&o.configuredOutboundAuthenticators.length==1){u=AJS.format("Created a two-way link to \u0027\u0027{0}\u0027\u0027 using {1}.",AppLinks.UI.sanitiseHTML(o.application.name),AppLinks.I18n.getAuthenticationTypeName(o.configuredOutboundAuthenticators[0]))}else{u=AJS.format("Created a link to \u0027\u0027{0}\u0027\u0027 with {1} configured authentication types.",AppLinks.UI.sanitiseHTML(o.application.name),o.configuredOutboundAuthenticators.length)}}if(!e.autoConfigurationSuccessful){u+=" "+"There was a problem with the auto configuration with one or more authentication providers. Please check the server log for more information."}AppLinks.UI.showInfoBox(u);if(o.configuredOutboundAuthenticators.length==0){b(".page-info").append(" "+AJS.format("{0}Configure authentication{1}.","<a href='#' id='edit-new-link'>","</a>"))}if(AppLinks.SPI.showCreateEntityLinkSuggestion()){var t=AppLinks.UI.prettyJoin(localEntityTypeIdStrings,function(v){return AppLinks.I18n.getEntityTypeName(v)},"or");var r=AppLinks.UI.prettyJoin(o.entityTypeIdStrings,function(v){return AppLinks.I18n.getEntityTypeName(v)},"or");var j=AJS.format("After that you should link a {0} to a {1}. You can do this from the {0} admin page.",t,r);b(".page-info").append("<br>"+j)}b("#edit-new-link").click(function(v){v.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.editAppLink(o.application,"undefined",false,function(w){AppLinks.UI.listApplicationLinks(w.id,"update");return true},function(){AppLinks.UI.listApplicationLinks();return true})})}else{if(f=="upgrade"){if(e&&e.message&&b.isArray(e.message)&&e.message.length>0){AppLinks.UI.showWarningBox(e.message)}}}}h.addClass("fully-loaded")},function(h){b(".links-loading").hide();var g=AppLinks.parseError(h);AppLinks.UI.showErrorBox(g)});AppLinks.UI.refreshOrphanedTrust()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-trigger', location = 'src/js/aui/trigger.js' */
("undefined"===typeof window?global:window).__27e78313b4347da1dfc07c0aa71513d5=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(a.isEnabled()){var c=document.getElementById(a.getAttribute("aria-controls"));c&&c.message&&c.message(b)}}"use strict";var g=e(__bd7207540b95ff683caa1d3c0bfcc3d7),h=e(__65f46acd493e225a8705ab04389e284d),f=e(__7acfe7fd38bbf8b5bf76cc953770b033);(0,f.default)("data-aui-trigger",{type:f.default.type.ATTRIBUTE,events:{click:function(a,b){var c=
b.target,c=(0,g.default)(c).closest("a[href]",a);c.length&&c[0]!==a||(d(a,b),b.preventDefault())},mouseenter:function(a,b){d(a,b)},mouseleave:function(a,b){d(a,b)},focus:function(a,b){d(a,b)},blur:function(a,b){d(a,b)}},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")}}});(0,h.default)("aui/trigger");return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-trigger', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-attributes', location = 'src/js/aui/internal/attributes.js' */
("undefined"===typeof window?global:window).__4512e4b5489c59d7921508536665c00f=function(){function d(a){return null!==a}function e(a,b,c){c?a.setAttribute(b,""):a.removeAttribute(b)}function f(a,b){var c=function(a){return a.toLowerCase()===b.toLowerCase()},d=null===b,e=!d&&!a.values.filter(c).length;return d?a.hasOwnProperty("missingDefault")?a.missingDefault:null:e?a.hasOwnProperty("invalidDefault")?a.invalidDefault:a.hasOwnProperty("missingDefault")?a.missingDefault:null:a.values.length?a.values.filter(c)[0]:
null}function g(a,b,c){a.setAttribute(b.attribute,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.computeBooleanValue=d;b.setBooleanAttribute=e;b.computeEnumValue=f;b.setEnumAttribute=g;b.default={computeBooleanValue:d,setBooleanAttribute:e,computeEnumValue:f,setEnumAttribute:g};return b}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-enforcer', location = 'src/js/aui/internal/enforcer.js' */
("undefined"===typeof window?global:window).__c220881a6424c0b144a85afc642e17bb=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;var a=__2f5c294b01e66b15309518e39bcb949d;if(a&&a.__esModule)d=a;else{var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;d=b}c.default=function(a){function c(b){return e(function(){return a.hasAttribute(b)},b+" wasn't defined")}function b(d){if(!c(d,a))return!1;var f=a.getAttribute(d);
return e(function(){return document.getElementById(f)},'an element with id set to "'+f+'" was not found')}function e(b,c){return!b()?(a?d.error(c,a):d.error(c),!1):!0}return{attributeExists:c,refersTo:b,satisfiesRules:e,ariaControls:function(){return b("aria-controls")},ariaOwns:function(){return b("aria-owns")}}};return c=c["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-inline-dialog2', location = 'src/js/aui/inline-dialog2.js' */
("undefined"===typeof window?global:window).__718e51878b026db6649db1cbe5fb27d1=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function l(a,b){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&b(d)}function n(a){a=a.target;(0,e.default)(a).set("mouse-inside",!0);a.message({type:"mouseenter"})}function o(a){a=a.target;(0,e.default)(a).set("mouse-inside",!1);a.message({type:"mouseleave"})}function m(a){(0,e.default)(a).set("mouse-inside",void 0);a.removeEventListener("mouseenter",
n);a.removeEventListener("mouseleave",o);"hover"===a.respondsTo&&((0,e.default)(a).set("mouse-inside",!1),a.addEventListener("mouseenter",n),a.addEventListener("mouseleave",o))}function j(a){var b=!a.hasAttribute("aria-hidden"),d=a.hasAttribute("open");if(b||a.open!==d)d?((0,e.default)(a).set("is-processing-show",!0),(0,f.default)(a).show(),(0,f.default)(a).isVisible()?l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.enable();b.setAttribute("aria-expanded","true")}):
a.open=!1,(0,e.default)(a).set("is-processing-show",!1)):((0,f.default)(a).hide(),(0,f.default)(a).isVisible()?a.open=!0:l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.disable();b.setAttribute("aria-expanded","false")}))}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});var q=c(__bd7207540b95ff683caa1d3c0bfcc3d7),p=c(__df78b4690da2c4aae9e9dc85c77219d0),r=c(__65f46acd493e225a8705ab04389e284d),g=c(__4512e4b5489c59d7921508536665c00f),s=c(__c220881a6424c0b144a85afc642e17bb),
t=c(__9a668cbde1e182d8e721c23580356df2),f=c(__bbe882dbb07e18e72992d5f992bba14c),h=c(__7acfe7fd38bbf8b5bf76cc953770b033),e=c(__60d0fde69902306f271d8ee27e7ed8ae),u={click:function(a){if(a.open){if(!(0,f.default)(a).isPersistent())a.open=!1}else a.open=!0},mouseenter:function(a){a.open||(a.open=!0);a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout()},mouseleave:function(a){if(!(0,f.default)(a).isPersistent()&&a.open){a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout();var b=setTimeout(function(){if(!(0,
e.default)(a).get("mouse-inside"))a.open=!1},1E3);a._clearMouseleaveTimeout=function(){clearTimeout(b);a._clearMouseleaveTimeout=null}}},focus:function(a){a.open||(a.open=!0)},blur:function(a){if(!(0,f.default)(a).isPersistent()&&a.open)a.open=!1}},i={attribute:"responds-to",values:["toggle","hover"],missingDefault:"toggle",invalidDefault:"toggle"},h=(0,h.default)("aui-inline-dialog",{prototype:{get open(){return(0,f.default)(this).isVisible()},set open(a){g.default.setBooleanAttribute(this,"open",
a);j(this)},get persistent(){return this.hasAttribute("persistent")},set persistent(a){g.default.setBooleanAttribute(this,"persistent",a)},get respondsTo(){return g.default.computeEnumValue(i,this.getAttribute(i.attribute))},set respondsTo(a){var b=this.respondsTo;g.default.setEnumAttribute(this,i,a);b!==this.respondsTo&&m(this)},message:function(a){var b={toggle:["click"],hover:["mouseenter","mouseleave","focus","blur"]}[this.respondsTo];if(b&&-1<b.indexOf(a.type))u[a.type](this,a);return this}},
created:function(a){(0,e.default)(a).set("is-processing-show",!1);l(a,function(b){b.setAttribute("aria-expanded",a.open);b.setAttribute("aria-haspopup","true")})},attributes:{"aria-hidden":function(a,b){if("true"===b.newValue){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&d.setAttribute("aria-expanded","false")}g.default.setBooleanAttribute(a,"open","false"===b.newValue)},open:function(a){document.body.contains(a)&&j(a)},"responds-to":function(a,b){var d=g.default.computeEnumValue(i,
b.oldValue),c=g.default.computeEnumValue(i,b.newValue);d!==c&&m(a)}},attached:function(a){(0,s.default)(a).attributeExists("id");a.hasAttribute("open")?(0,e.default)(a).get("is-processing-show")||j(a):j(a);m(a)},detached:function(a){a._auiAlignment&&a._auiAlignment.destroy()},template:function(a){var b=(0,q.default)('<div class="aui-inline-dialog-contents"></div>').append(a.childNodes);(0,q.default)(a).addClass("aui-layer").html(b)}});(0,r.default)("aui/inline-dialog2",h);(0,t.default)("InlineDialog2",
h);k.default=h;return k=k["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-inline-dialog2', location = 'src/soy/inline-dialog2.soy' */
// This file was automatically generated from inline-dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.inlineDialog2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.inlineDialog2 == 'undefined') { aui.inlineDialog2 = {}; }


aui.inlineDialog2.inlineDialog2 = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.alignment) ? ' alignment="' + soy.$$escapeHtml(opt_data.alignment) + '"' : '') + ((opt_data.open) ? ' open' : '') + ((opt_data.persistent) ? ' persistent' : '') + ((opt_data.respondsTo) ? ' responds-to="' + soy.$$escapeHtml(opt_data.respondsTo) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  aui.inlineDialog2.inlineDialog2.soyTemplateName = 'aui.inlineDialog2.inlineDialog2';
}


aui.inlineDialog2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {showIcon: opt_data.showIcon ? opt_data.showIcon : false}));
};
if (goog.DEBUG) {
  aui.inlineDialog2.trigger.soyTemplateName = 'aui.inlineDialog2.trigger';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-components', location = 'applinks/internal/component/inline-dialog/inline-dialog.js' */
define("applinks/component/inline-dialog",["applinks/lib/lodash","applinks/lib/jquery","applinks/lib/aui","applinks/lib/skate","applinks/common/dialog-focus"],function(c,f,b,a,e){function g(){return b.versionDetails.is58}function d(k,i,h){this.id=k;var j=applinks.inlineDialog.popup(c.extend({id:k,contents:i,auiVersion:b.versionDetails},h));this.$popup=f(j);this.popup=this.$popup[0];f("body").append(this.$popup);if(g()){a.init(this.popup)}this.onShow(c.partial(e.defaultFocus,this.$popup))}d.prototype.hide=function(){if(g()){this.popup.hide()}else{this.popup.removeAttribute("open")}};d.prototype.show=function(){if(g()){this.popup.show()}else{this.popup.setAttribute("open","")}};d.prototype.isVisible=function(){if(g()){return this.popup.isVisible()}else{return this.popup.hasAttribute("open")}};d.prototype.realign=function(){if(g()){this.popup.show()}return this};d.prototype.on=function(){this.$popup.on.apply(this.$popup,arguments);return this};d.prototype.onShow=function(h){if(g()){this.$popup.on("aui-layer-show",h)}else{this.$popup.on("aui-show",h)}return this};d.prototype.onHide=function(h){if(g()){this.$popup.on("aui-layer-hide",h)}else{this.$popup.on("aui-hide",h)}return this};d.prototype.html=function(){return this.popup};d.prototype.contents=function(){return this.$popup};return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-components', location = 'applinks/internal/component/inline-dialog/inline-dialog.soy' */
// This file was automatically generated from inline-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.inlineDialog.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.inlineDialog == 'undefined') { applinks.inlineDialog = {}; }


applinks.inlineDialog.popup58 = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog2 id="' + soy.$$escapeHtml(opt_data.id) + '" alignment="' + soy.$$escapeHtml(opt_data.alignment) + '" responds-to="toggle" persistent="' + ((opt_data.persistent) ? 'true' : 'false') + '" ' + ((opt_data.open) ? 'open' : '') + '><div class="' + soy.$$escapeHtml(opt_data.classes) + '">' + soy.$$filterNoAutoescape(opt_data.contents) + '</div></aui-inline-dialog2>';
};
if (goog.DEBUG) {
  applinks.inlineDialog.popup58.soyTemplateName = 'applinks.inlineDialog.popup58';
}


applinks.inlineDialog.popup59 = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.id) + '" alignment="' + soy.$$escapeHtml(opt_data.alignment) + '" ' + ((opt_data.open) ? 'open' : '') + ' ' + ((opt_data.persistent) ? 'persistent' : '') + '><div class="' + soy.$$escapeHtml(opt_data.classes) + '">' + soy.$$filterNoAutoescape(opt_data.contents) + '</div></aui-inline-dialog>';
};
if (goog.DEBUG) {
  applinks.inlineDialog.popup59.soyTemplateName = 'applinks.inlineDialog.popup59';
}


applinks.inlineDialog.popup = function(opt_data, opt_ignored) {
  return '' + ((opt_data.auiVersion.is58) ? applinks.inlineDialog.popup58(opt_data) : applinks.inlineDialog.popup59(opt_data));
};
if (goog.DEBUG) {
  applinks.inlineDialog.popup.soyTemplateName = 'applinks.inlineDialog.popup';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-components', location = 'applinks/internal/component/feature-discovery/feature-discovery.js' */
define("applinks/component/feature-discovery",["applinks/lib/jquery","applinks/lib/lodash","applinks/common/features","applinks/component/inline-dialog"],function(d,b,e,c){function a(h,g,f){this.featureId=h;this.contents=g;this.anchor=f;this.popupId="feature-discovery-"+this.featureId;if(!e.isDiscovered(h)){this.init();e.discover(h)}}a.prototype.init=function(){d(this.anchor).attr("aria-controls",this.popupId);this.dialog=new c(this.popupId,this.contents,{alignment:"bottom center",open:true,persistent:true});this.dialog.realign()};a.prototype.dismiss=function(){if(this._isDisplayed()){this.dialog.hide()}};a.prototype.on=function(){if(this._isDisplayed()){var f=this.dialog.$popup;f.on.apply(f,arguments)}};a.prototype.dismissTrigger=function(f){this.on("click",f,b.bind(this.dismiss,this));return this};a.prototype.refresh=function(f){if(this._isDisplayed()){if(f){this.anchor=f;this.dialog.$popup.remove();this.init()}else{this.dialog.realign()}}return this};a.prototype._isDisplayed=function(){return this.dialog&&this.dialog.isVisible()};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-components', location = 'applinks/internal/component/feature-discovery/feature-discovery.soy' */
// This file was automatically generated from feature-discovery.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.component.feature.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.component == 'undefined') { applinks.component = {}; }
if (typeof applinks.component.feature == 'undefined') { applinks.component.feature = {}; }


applinks.component.feature.featureDiscoveryPopup = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog2 id="feature-discovery-' + soy.$$escapeHtml(opt_data.featureId) + '" data-feature-id="' + soy.$$escapeHtml(opt_data.featureId) + '" class="aui-help ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '" alignment="bottom left" persistent="true"' + ((opt_data.extraAttributes) ? soy.$$filterNoAutoescape(opt_data.extraAttributes) : '') + ' open>' + soy.$$filterNoAutoescape(opt_data.contents) + '</aui-inline-dialog2>';
};
if (goog.DEBUG) {
  applinks.component.feature.featureDiscoveryPopup.soyTemplateName = 'applinks.component.feature.featureDiscoveryPopup';
}


applinks.component.feature.featureDiscoveryPopup57 = function(opt_data, opt_ignored) {
  return '' + applinks.component.feature.featureDiscoveryPopup({featureId: opt_data.featureId, contents: '<div class="aui-inline-dialog-contents">' + soy.$$filterNoAutoescape(opt_data.contents) + '</div>', extraAttributes: 'data-aui-alignment="bottom left" data-aui-persistent="true"', extraClasses: 'aui-layer aui-inline-dialog'});
};
if (goog.DEBUG) {
  applinks.component.feature.featureDiscoveryPopup57.soyTemplateName = 'applinks.component.feature.featureDiscoveryPopup57';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-v2-shim', location = 'applinks/internal/feature/creation/applinks-creation-shim.js' */
define("applinks/feature/creation",function(){var a=window.AppLinks.Creation;a.isInProgress=function(){var b=a.getSubmittedStatusLog();return b&&b.length};return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-v2-shim', location = 'applinks/internal/shim/applinks-shim.js' */
define("applinks/shim/applinks",["applinks/lib/window","applinks/common/preconditions"],function(a,c){var b=a.AppLinks;c.hasValue(b,"applinks");return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-v3', location = 'applinks/internal/feature/v3/v3-ui.js' */
define("applinks/feature/v3/ui",["applinks/lib/aui","applinks/lib/jquery"],function(a,b){return{isOn:function(){return b("#ual.applinks-admin-v3").length>0},isFinishedOnboarding:function(){if(b("body").attr("data-v3-onboarding-dialog-finished")){var c=b("#v3-ui-feature-discovery-dialog");if(c.length===0||c.is(":hidden")){return true}}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-bitbucket-rebrand', location = 'applinks/internal/feature/bitbucket-rebrand/bitbucket-rebrand.js' */
define("applinks/feature/bitbucket-rebrand",["applinks/lib/jquery","applinks/lib/lodash","applinks/common/context","applinks/common/events","applinks/common/features","applinks/common/products","applinks/component/feature-discovery","applinks/feature/creation","applinks/feature/v3/ui"],function(e,j,c,a,i,f,b,d,g){var h="#bb-rebrand-dismiss";return{FEATURE_KEY:i.BITBUCKET_REBRAND,_featureDiscovery:undefined,_featureDiscoveryApplinkId:undefined,initOldUi:function(){if(this._isInitialized()){return}var k=e("#application-links-table").find("tr.ual-row").filter(function(l,m){return e(m).find("td.application-type").text().indexOf("Bitbucket")>-1});if(k.length){this._discoverBitbucketRebrand(k.find(".application-icon").get(0),k.first().attr("application-id"))}},initNewUi:function(){if(this._isInitialized()){return}var k=e("#agent-table").find("tr").filter(function(l,m){return e(m).find(".applinks-type").text().indexOf("Bitbucket")>-1});if(k.length){this._discoverBitbucketRebrand(k.find(".applinks-type").get(0),k.first().attr("id"))}},init:function(){if(!this._isBitbucket()&&this._isRebrandEnabled()&&!this._isRebrandDiscovered()){a.on(a.APPLINKS_LOADED,j.bind(function(){if(this._isInitialized()){return}if(g.isOn()){if(g.isFinishedOnboarding()){this.initNewUi()}else{a.on(a.V3_ONBOARDING_FINISHED,j.bind(function(){this.initNewUi()},this))}}else{this.initOldUi()}},this))}},_isBitbucket:function(){return f.BITBUCKET===c.hostApplication().type},_isRebrandEnabled:function(){return i.isEnabled(this.FEATURE_KEY)},_isRebrandDiscovered:function(){return i.isDiscovered(this.FEATURE_KEY)},_isInitialized:function(){return !!this._featureDiscovery},_discoverBitbucketRebrand:function(k,l){if(this._isCreationInProgress()){i.discover(this.FEATURE_KEY)}else{this._featureDiscoveryApplinkId=l;this._featureDiscovery=new b(this.FEATURE_KEY,applinks.feature.bitbucket.rebrand.featureDiscovery(),k);this._featureDiscovery.dismissTrigger(h);this._bindEvents();this._fixFocus()}},_isCreationInProgress:function(){var k=d.getSubmittedStatusLog();return k&&k.length},_bindEvents:function(){if(this._isInitialized()){a.on(a.Legacy.MESSAGE_BOX_DISPLAYED,j.bind(function(){if(this._featureDiscovery){this._featureDiscovery.refresh()}},this));a.on(a.APPLINKS_UPDATED,j.bind(function(){var k;if(this._featureDiscovery&&this._featureDiscoveryApplinkId){if(g.isOn()){k=e("#"+this._featureDiscoveryApplinkId+" .applinks-type")[0]}else{k=e("[application-id="+this._featureDiscoveryApplinkId+"] .application-icon")[0]}this._featureDiscovery.refresh(k);this._featureDiscovery.dismissTrigger(h);this._fixFocus()}},this))}},_fixFocus:function(){if(this._featureDiscovery){this._featureDiscovery.dialog.contents().find(h).focus()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-bitbucket-rebrand', location = 'applinks/internal/feature/bitbucket-rebrand/bitbucket-rebrand.soy' */
// This file was automatically generated from bitbucket-rebrand.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.feature.bitbucket.rebrand.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.feature == 'undefined') { applinks.feature = {}; }
if (typeof applinks.feature.bitbucket == 'undefined') { applinks.feature.bitbucket = {}; }
if (typeof applinks.feature.bitbucket.rebrand == 'undefined') { applinks.feature.bitbucket.rebrand = {}; }


applinks.feature.bitbucket.rebrand.featureDiscovery = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml("Stash is now called Bitbucket Server") + '</h3><p>' + soy.$$filterNoAutoescape("Same great product, with a new name.\x3cbr\x3eYou can read more about the change in our \x3ca id\x3d\x22bb-rebrand-link\x22 href\x3d\x22http://go.atlassian.com/bitbucket-server-4.0\x22 target\x3d\x22_blank\x22\x3eofficial announcement\x3c/a\x3e.") + '</p><p><button id="bb-rebrand-dismiss" class="aui-button aui-button-primary">' + soy.$$escapeHtml("OK, got it") + '</button></p>';
};
if (goog.DEBUG) {
  applinks.feature.bitbucket.rebrand.featureDiscovery.soyTemplateName = 'applinks.feature.bitbucket.rebrand.featureDiscovery';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-help-link', location = 'applinks/internal/feature/help-link/help-link-analytics.js' */
define("applinks/feature/help-link/analytics",["applinks/lib/aui","applinks/lib/jquery"],function(a,b){return{init:function(){b("body").on("click",".help-link",function(){a.trigger("analyticsEvent",{name:"applinks.view.documentation",data:{linkKey:b(this).attr("data-help-link-key")}})})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/relocate-application-link.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){(function(d){var b=d("#relocate-link-dialog");var a;var c;var e;var f={nextLabel:"Relocate",submitLabel:"Relocate",api:true,width:500,height:250,onshow:function(g){var h=g.popup.element;h.find("h2").text("Relocate").append(AppLinks.Docs.createDocLink(a.helpKey,null,"dialog-help-link"));d("#relocate-text").text(a.description);d("#relocate-error").text("");d("#relocate-url").val(a.application.rpcUrl);AppLinks.UI.hideLoadingIcon(d("#relocate-url"));AppLinks.UI.hideLoadingIcon(d("#confirm-relocate-text"));return true},onnext:function(g){d("#relocate-error").text("");e=AppLinks.UI.addProtocolToURL(d("#relocate-url").val());AppLinks.UI.showLoadingIcon(d("#relocate-url"));a.doRelocate(e,f.closeWizard,function(h){AppLinks.UI.hideLoadingIcon(d("#relocate-url"));if(h.status==409){d("#confirm-relocate-text").text(AJS.format("The application at URL \u0027\u0027{0}\u0027\u0027 is not responding. Please confirm that you want to use this URL.",e));g.popup.element.find("h2").text("Confirm Relocation").append(AppLinks.Docs.createDocLink(a.helpKey,null,"dialog-help-link"));c.dialog.gotoPage(1)}else{d("#relocate-error").text(AppLinks.parseError(h))}});return false},onprevious:function(g){var h=g.popup.element;h.find("h2").text("Relocate").append(AppLinks.Docs.createDocLink(a.helpKey,null,"dialog-help-link"))},closeWizard:function(){c.cancel();a.callback()},onsubmit:function(){AppLinks.UI.showLoadingIcon(d("#confirm-relocate-text"));a.doForceRelocate(e,f.closeWizard,function(g){AppLinks.UI.hideLoadingIcon(d("#confirm-relocate-text"));d("#confirm-relocate-error").text(AppLinks.parseError(g))});return false}};c=b.wizard(f);AppLinks.showRelocateLinkDialog=function(g){a=g;c.show()}})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/upgrade-legacy-application-link.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){(function(d){var b=d("#upgrade-legacy-link-dialog");var a;var c;var f={api:true,submitLabel:"Upgrade",onshow:function(g){var h=g.popup.element;h.find("h2").text("Upgrade").append(AppLinks.Docs.createDocLink(a.helpKey,null,"dialog-help-link"));d("#legacy-upgrade-text").text(a.description);d(".legacy-upgrade-error").text("");AppLinks.UI.hideLoadingIcon("#legacy-upgrade-text");d(g.popup.element).find(".wizard-submit").attr("disabled",false);return true},onsubmit:function(g){d(".legacy-upgrade-error").text("");d(g.popup.element).find(".wizard-submit").attr("disabled",true);AppLinks.UI.showLoadingIcon("#legacy-upgrade-text");a.submit(function(h){c.cancel();a.callback(h.applicationLink.id)},function(h){AppLinks.UI.displayValidationError("legacy-upgrade-error",e)(h);d(g.popup.element).find(".wizard-submit").attr("disabled",false)});return false}};c=b.wizard(f);var e=d(c.dialog.popup.element);AppLinks.showUpgradeLinkDialog=function(g){a=g;c.show()}})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/upgrade-ual-application-link.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){(function(c){var e;var k;var l={width:510,height:660,id:"upgrade-application-link-dialog",onnext:function(){h.find(".applinks-error").remove();var o=d.dialog.curpage;if(o==0){AppLinks.Wizard.handleUALManifest(e.manifest,h);d.dialog.gotoPage(1);b.focus();return false}else{if(o==1){var m=function(){var p=function(r){d.cancel();e.successCallback(r)};var q={createTwoWayLink:false,reciprocateEntityLinks:false,configFormValues:{trustEachOther:false,shareUserbase:false}};AppLinks.SPI.ualUpgrade(e.application,q,p,AppLinks.UI.displayValidationError("create-validation-errors",h))};var n=function(){d.dialog.gotoPage(2)};AppLinks.Wizard.checkReciprocalLinkFormThreeStepMode(h,m,n,k);return false}}return true},onprevious:function(){return true},onsubmit:function(){var m=function(o){d.cancel();e.successCallback(o)};var n={rpcUrl:i.val(),username:b.val(),password:f.val(),createTwoWayLink:true,reciprocateEntityLinks:a.is(":checked"),configFormValues:{trustEachOther:!!(h.find(".trust-each-other-description").find("input").is(":checked")),shareUserbase:!!(h.find(".same-user-description").find("input").is(":checked"))}};AppLinks.SPI.ualUpgrade(e.application,n,m,AppLinks.UI.displayValidationError("create-validation-errors",h));return false},onshow:function(){h.find(".applinks-error").remove();AppLinks.UI.hideInfoBox();i.val(c("#baseUrl").val());c(".ual-upgrade-text").text(e.description);k=e.application.rpcUrl;var n=function(p){if(AJS.$.isArray(p.entity)&&p.entity.length>0){var o=new Array();AJS.$.each(p.entity,function(s,r){if(AJS.$.inArray(r.typeId,o)==-1){o.push(r.typeId)}});var q=AppLinks.UI.prettyJoin(o,function(r){return AppLinks.I18n.getEntityTypeName(r)});j.text(AJS.format("For each existing {0} link, create an incoming link from the remote application.",q));a.attr("checked",true).closest("div").removeClass("hidden")}};var m=function(o){j.text(AJS.format("For each existing {0} link, create an incoming link from the remote application.","project"));a.attr("checked",true).closest("div").removeClass("hidden")};a.closest("div").addClass("hidden");AppLinks.SPI.getLocalEntitiesWithLinksToApplication(e.application.id,n,m);return true},aftershow:function(){}};var d=c("#upgrade-application-link-container").wizard(l);var h=c(d.dialog.popup.element);var g=h.find(".local-app-name");var i=h.find(".reciprocal-rpc-url");var b=h.find(".reciprocal-link-username");var f=h.find(".reciprocal-link-password");var a=h.find(".reciprocate-entity-links");var j=h.find(".reciprocate-entity-links-description");g.html(AppLinks.UI.shortenString(applicationName,20));AppLinks.Wizard.initNonUALUI(h);AppLinks.Wizard.initAuthenticationUI(h);AppLinks.showUpgradeLinkToUALDialog=function(m){e=m;d.show()};f.keydown(function(m){if(m.keyCode=="13"){d.nextPage()}})})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/list-application-links.js' */
function _initRequiredAmdModules(a){if(!a.isOn()){var b=require("applinks/common/initializer");b.init(require("applinks/feature/bitbucket-rebrand"));b.initOnDomReady(require("applinks/feature/help-link/analytics"))}}AJS.$(document).bind(AppLinks.Event.PREREADY,function(){(function(b,c,a){_initRequiredAmdModules(c);AJS.$.extend(AppLinks.UI||{},{listApplicationLinks:function(e,g,f,d){if(d&&c.isOn()){return}b("#applicationsList").removeClass("fully-loaded");b(".no-links").hide();b(".links-loading").show();b(".relocate-warning").closest(".aui-message.warning").remove();b(".upgrade-warning").closest(".aui-message.warning").remove();b("#application-links-table").hide();b("#applicationsList").empty();AppLinks.SPI.getAllLinksWithAuthInfo(function(m){var s=b("#applicationsList"),z=m.list,h=function(H,K,D,I){var G={typeLabel:AppLinks.I18n.getApplicationTypeName(H.typeId)};var M;if(I){M=b(AJS.template.load("al-system-row").fill(b.extend(G,H)).fillHtml({configuredIncomingAuth:K}).fillHtml({applicationId:H.id}).fillHtml({configuredAuth:D}).fillHtml({iconTag:H.iconUrl?AJS.template.load("al-row-application-icon").fill({iconUrl:H.iconUrl}).toString():""}).toString())}else{M=b(AJS.template.load("al-row").fill(b.extend(G,H)).fillHtml({configuredIncomingAuth:K}).fillHtml({applicationId:H.id}).fillHtml({configuredAuth:D}).fillHtml({iconTag:H.iconUrl?AJS.template.load("al-row-application-icon").fill({iconUrl:H.iconUrl}).toString():""}).toString());M.find(".app-delete-link").click(function(N){N.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.SPI.getApplicationLinkInfo(H.id,function(O){var V=b("<div>");V.append(b("<div>").text(AJS.format("Confirm that you want to delete the Application Link to \u0027\u0027{0}\u0027\u0027 ({1}).",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId))));if(O.configuredAuthProviders.length>0){var Q=AppLinks.UI.prettyJoin(O.configuredAuthProviders,function(W){return AppLinks.I18n.getAuthenticationTypeName(W)});V.append(b("<div>").text(AJS.format("The authentication information stored for {0} will be deleted.",Q)));if(O.numConfiguredEntities>0){var U;if(O.numConfiguredEntities>1){U="applinks.dialog.delete.entity.links.plural"}else{U="applinks.dialog.delete.entity.links.singular"}var R=AppLinks.UI.prettyJoin(O.hostEntityTypes,function(W){if(O.numConfiguredEntities>1){return AppLinks.I18n.getPluralizedEntityTypeName(W)}else{return AppLinks.I18n.getEntityTypeName(W)}});var S=AppLinks.UI.prettyJoin(O.remoteEntityTypes,function(W){return AppLinks.I18n.getPluralizedEntityTypeName(W)});var P=AJS.I18n.getText(U,O.numConfiguredEntities,R,S,H.name);V.append(b("<div>").text(P))}}var T={title:AJS.format("Delete Link to \u0027\u0027{0}\u0027\u0027",H.name),applicationId:H.id,confirmMessage:V,reciprocalLinkMessage:AJS.format("{0} ({1}) has a link to this Application. Do you want to delete this link as well?",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId)),noReciprocalLinkMessage:AJS.format("{0} ({1}) doesn\u0027\u0027t have a link to this application. Click confirm to delete only the link from this application to {0} ({1}).",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId)),deleteYesMessage:AJS.format("Yes, delete the link from {0} ({1}) to this application.",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId)),deleteNoMessage:AJS.format("No, do not delete the link from {0} ({1}) to this application.",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId)),authenticationMessage:AJS.format("We can check if {0} ({1}) has a link to this application and delete this link as well. To do this you must authenticate. Click confirm to delete only the local link to {0} ({1}).",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId)),noConnectionMessage:"There was a problem when contacting the remote application.",authenticationFailedMessage:AJS.format("Unable to check if {0} ({1}) has a link to this application, because the authorization failed. Click confirm to delete only the local Application Link to {0} ({1})",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId)),failedToDetectReciprocalLinkMessage:AJS.format("A problem occurred when trying to check if a link from {0} ({1}) to this application exists.",H.name,AppLinks.I18n.getApplicationTypeName(H.typeId)),helpKey:"applinks.docs.delete.application.link",doPermissionCheck:function(X,W){AppLinks.SPI.canDeleteAppLink(H.id,X,W)},doDelete:function(W,Y,X){AppLinks.SPI.deleteLink(H,W,Y,X)},callback:function(){AppLinks.UI.listApplicationLinks(H.name,"delete");return true}};AppLinks.showDeleteLinkDialog(T)})});b.each(M.find(".configure-auth-type"),function(O,N){var Q=b(N).attr("data-auth-type");var P=b(N).attr("data-auth-direction");var R=P=="incoming";b(N).click(function(S){S.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.editAppLink(H,Q,R,function(T){AppLinks.UI.listApplicationLinks(T.id,"update");return true},function(){AppLinks.UI.listApplicationLinks();return true})})});M.find(".app-edit-link").click(function(N){N.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.editAppLink(H,"undefined",false,function(O){AppLinks.UI.listApplicationLinks(O.id,"update");return true},function(){AppLinks.UI.listApplicationLinks();return true})});if(!H.isPrimary){M.find(".app-toggleprimary-action").show();M.find(".app-toggleprimary-link").click(function(N){N.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.SPI.makePrimary(H,function(){AppLinks.UI.listApplicationLinks(H.id,"primary")})})}else{M.find(".app-toggleprimary-action").hide()}if(b("#ual.list-links").data("sysadminFlag")){AppLinks.SPI.getApplicationLinkState(H.id,function(O){if(O.appLinkState=="OFFLINE"&&!c.isOn()){var N=b("<div>");N.text(AJS.format("Application \u0027\u0027{0}\u0027\u0027 seems to be offline.",H.name)+" ");b(N).append("<a class='relocate-"+H.id+" relocate-from-"+H.rpcUrl+" relocate-warning' href='#'>"+"Click here to Relocate."+"</a>");AppLinks.UI.showWarningBox(N);var N=b(".relocate-"+H.id);N.click(function(U){U.preventDefault();AppLinks.UI.hideInfoBox();var T={description:AJS.format("Relocate Application Link \u0027\u0027{0}\u0027\u0027 to a different URL.",H.name),application:H,helpKey:"applinks.docs.relocate.application.link",doRelocate:function(W,X,V){AppLinks.SPI.relocate(H,W,false,X,V)},doForceRelocate:function(W,X,V){AppLinks.SPI.relocate(H,W,true,X,V)},callback:function(){AppLinks.UI.listApplicationLinks(H.name,"relocate")}};AppLinks.showRelocateLinkDialog(T)})}else{if(O.appLinkState!=="OFFLINE"&&O.appLinkState!="OK"){var S=b("<div>");var P=AJS.format("Application \u0027\u0027{0}\u0027\u0027 has been upgraded.",H.name);var Q="Click here to Upgrade the Application Link configuration";S.text(P+" ");S.append("<a class='upgrade-"+H.id+" upgrade-warning' href='#'>"+Q+"</a>");AppLinks.UI.showWarningBox(S);var R=function(T){return function(V){V.preventDefault();AppLinks.UI.hideInfoBox();if(O.appLinkState=="UPGRADED_TO_UAL"){var W={application:H,description:AJS.format("The remote application \u0027\u0027{0}\u0027\u0027 appears to have been upgraded. This wizard lets you apply these changes to the application link to ensure your project links keep working properly.",H.name),manifest:{name:H.name,typeId:H.typeId},successCallback:function(X){AppLinks.UI.listApplicationLinks(X.applicationLink.name,"upgrade",X)}};AppLinks.showUpgradeLinkToUALDialog(W)}else{var U=AppLinks.UI.prettyJoin(localEntityTypeIdStrings,function(X){return AppLinks.I18n.getEntityTypeName(X)},"and");var W={application:H,description:AJS.format("The remote application \u0027\u0027{0}\u0027\u0027 may have been relocated. To ensure our {1} links remain working properly, we can update the Application Link.",H.name,U),helpKey:"applinks.docs.upgrade.application.link",submit:function(Y,X){AppLinks.SPI.legacyUpgrade(H,Y,X)},callback:function(X){H.applicationId=X;AppLinks.UI.listApplicationLinks(H.name,"upgrade")}};AppLinks.showUpgradeLinkDialog(W)}}};b(".upgrade-"+H.id).click(R(t))}}},function(O){var N=AppLinks.parseError(O);AppLinks.UI.showErrorBox(N)})}}var L=function(N,O){return(typeof O=="undefined"||O==null||O=="")?"":(N+"='"+O+"'")};var E=M.find("ul.app-actions");for(var F=0;F<H.webItems.length;F++){var x=H.webItems[F];if(x.iconUrl){x.icon=AJS.template.load("al-row-op-webitem-icon").fill(x).toString()}else{x.icon=""}x.id=L("id",x.id);x.tooltip=L("tooltip",x.tooltip);x.styleClass=L("styleClass",x.styleClass);x.accessKey=L("accessKey",x.accessKey);E.append(AJS.template.load("al-row-op-webitem").fill(x).toString())}for(F=0;F<H.webPanels.length;F++){var J=H.webPanels[F];E.append(b("<li>| "+J.html+"</li>"))}return M};var i;b(".links-loading").hide();if(z.length==0){b("#application-links-table").hide();b(".no-links").show();b("#add-first-application-link").click(function(x){x.preventDefault();b("#add-application-link").click()})}else{b("#application-links-table").show();b(".no-links").hide()}var j=false,A;for(var o=0,k=z.length;o<k;o++){var t=z[o],l=t.application;l.hasIncoming=t.hasIncomingAuthenticationProviders;l.hasOutgoing=t.hasOutgoingAuthenticationProviders;l.webItems=t.webItems;l.webPanels=t.webPanels;if(!j&&A&&A==l.typeId){j=true}A=l.typeId;if(e&&l.id==e){i=t}var C="Click to configure";var B="";var w=t.configuredInboundAuthenticators.length;b.each(t.configuredInboundAuthenticators,function(D,F){var x=F.substring(F.lastIndexOf(".")+1);var E;if(t.isSystem){E=AJS.template("<div>{name}");B+=E.fill({name:AppLinks.I18n.getAuthenticationTypeName(F)})}else{E=AJS.template('<div><a href="#" class="configure-auth-type" data-auth-type="{authType}" data-auth-direction="incoming" title="{linkTitle}">{name}</a>');B+=E.fill({authType:x,linkTitle:C+" "+AppLinks.I18n.getAuthenticationTypeName(F),name:AppLinks.I18n.getAuthenticationTypeName(F)})}});if(w==0){B="<div>"+"none"+"</div>"}var y="";var u=t.configuredOutboundAuthenticators.length;b.each(t.configuredOutboundAuthenticators,function(E,F){if(E==0&&(u>1)){y='<div class="primary-auth-type-wrapper"><span class="primary-auth-type" title="'+"applinks.primary.auth"+'">&nbsp;</span>'}else{if(u==1){y+="<div>"}else{y+='<div class="configured-auth-type">'}}var x=F.substring(F.lastIndexOf(".")+1);if(t.isSystem){var D=AJS.template("{name}");y+=D.fill({name:AppLinks.I18n.getAuthenticationTypeName(F)})}else{var D=AJS.template('<a href="#" class="configure-auth-type" data-auth-type="{authType}" data-auth-direction="outgoing" title="{linkTitle}">{name}</a>');y+=D.fill({authType:x,linkTitle:C+" "+AppLinks.I18n.getAuthenticationTypeName(F),name:AppLinks.I18n.getAuthenticationTypeName(F)})}y+="</div>"});if(u==0){y="<div>"+"none"+"</div>"}s.append(h(l,B,y,t.isSystem))}if(j){b(".primary-column").show()}else{b(".primary-column").hide()}if(e){if(g=="new"){var p;if(!i||!i.configuredOutboundAuthenticators||i.configuredOutboundAuthenticators.length==0){p=AJS.format("Created a link to \u0027\u0027{0}\u0027\u0027 without outgoing authentication.",AppLinks.UI.sanitiseHTML(i.application.name))}else{if(i.configuredOutboundAuthenticators&&i.configuredOutboundAuthenticators.length==1){p=AJS.format("Created a two-way link to \u0027\u0027{0}\u0027\u0027 using {1}.",AppLinks.UI.sanitiseHTML(i.application.name),AppLinks.I18n.getAuthenticationTypeName(i.configuredOutboundAuthenticators[0]))}else{p=AJS.format("Created a link to \u0027\u0027{0}\u0027\u0027 with {1} configured authentication types.",AppLinks.UI.sanitiseHTML(i.application.name),i.configuredOutboundAuthenticators.length)}}if(!f.autoConfigurationSuccessful){p+=" "+"There was a problem with the auto configuration with one or more authentication providers. Please check the server log for more information."}AppLinks.UI.showInfoBox(p);if(i.configuredOutboundAuthenticators.length==0){b(".page-info").append(" "+AJS.format("{0}Configure authentication{1}.","<a href='#' id='edit-new-link'>","</a>"))}if(AppLinks.SPI.showCreateEntityLinkSuggestion()){var n=AppLinks.UI.prettyJoin(localEntityTypeIdStrings,function(x){return AppLinks.I18n.getEntityTypeName(x)},"or");var q=AppLinks.UI.prettyJoin(i.entityTypeIdStrings,function(x){return AppLinks.I18n.getEntityTypeName(x)},"or");var v=AJS.format("After that you should link a {0} to a {1}. You can do this from the {0} admin page.",n,q);b(".page-info").append("<br>"+v)}b("#edit-new-link").click(function(x){x.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.editAppLink(i.application,"undefined",false,function(D){AppLinks.UI.listApplicationLinks(D.id,"update");return true},function(){AppLinks.UI.listApplicationLinks();return true})})}else{if(g=="update"){AppLinks.UI.showInfoBox(b("<span>").text(AJS.format("Updated Application Link \u0027\u0027{0}\u0027\u0027 successfully.",i.application.name)))}else{if(g=="upgrade"){AppLinks.UI.showInfoBox(b("<span>").text(AJS.format("Upgraded Application Link \u0027\u0027{0}\u0027\u0027 successfully.",e)));if(f&&f.message&&AJS.$.isArray(f.message)&&f.message.length>0){AppLinks.UI.showWarningBox(f.message)}}else{if(g=="delete"){AppLinks.UI.showInfoBox(AJS.format("Deleted Application Link \u0027\u0027{0}\u0027\u0027 successfully.",AppLinks.UI.sanitiseHTML(e)))}else{if(g=="primary"){var r=AppLinks.I18n.getApplicationTypeName(i.application.typeId);AppLinks.UI.showInfoBox(AJS.format("New primary link for application type {0} is \u0027\u0027{1}\u0027\u0027",r,AppLinks.UI.sanitiseHTML(i.application.name)))}}}}}}s.addClass("fully-loaded");if(d){b(document).trigger(AppLinks.Event.APPLINKS_LOADED)}else{b(document).trigger(AppLinks.Event.APPLINKS_UPDATED)}},function(i){b(".links-loading").hide();var h=AppLinks.parseError(i);AppLinks.UI.showErrorBox(h)});AppLinks.UI.refreshOrphanedTrust()}});if(!c.isOn()){a.on(a.ORPHANED_UPGRADE,function(d,e){AppLinks.UI.listApplicationLinks(e.applicationLink.id,"new",e)})}})(AJS.$,require("applinks/feature/v3/ui"),require("applinks/common/events"))});AJS.$(document).bind(AppLinks.Event.READY,function(){AppLinks.UI.listApplicationLinks(undefined,undefined,undefined,true)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/add-application-link.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){(function(f){var a={};var o;var n=function(){e.enableNextBtn();e.enablePreviousBtn();var s={id:a.id,typeId:a.typeId,name:a.name,rpcUrl:o,displayUrl:a.url,isPrimary:false},r={trustEachOther:false,shareUserbase:false},q=function(t){e.enableSubmitBtn();e.cancel();AppLinks.UI.listApplicationLinks(t.applicationLink.id,"new",t)};e.disableSubmitBtn();AppLinks.SPI.createLink(s,"","",false,false,"",r,q,AppLinks.UI.displayValidationError("create-validation-errors",k,function(){e.enableSubmitBtn()}))};var j=function(){var r=function(u){e.enableSubmitBtn();e.enablePreviousBtn();e.cancel();AppLinks.UI.listApplicationLinks(u.applicationLink.id,"new",u)};if(typeof a.typeId=="undefined"){var t={id:a.id,typeId:k.find(".application-types").val(),name:k.find(".application-name").val(),rpcUrl:o,displayUrl:o,isPrimary:false},q={trustEachOther:false,shareUserbase:false};e.disableSubmitBtn();e.disablePreviousBtn();AppLinks.SPI.createLink(t,"","",false,false,"",q,r,AppLinks.UI.displayValidationError("create-non-ual-errors",k,function(){e.enableSubmitBtn();e.enablePreviousBtn()}))}else{var q;if(!!k.find("#step3-allowed").length){q={trustEachOther:!!(k.find(".trust-each-other-description").find("input").is(":checked")),shareUserbase:!!(k.find(".same-user-description").find("input").is(":checked"))}}else{q={trustEachOther:true,shareUserbase:false}}t={id:a.id,typeId:a.typeId,name:a.name,rpcUrl:o,displayUrl:a.url,isPrimary:false};rpcUrl=m.val();e.disableSubmitBtn();e.disablePreviousBtn();var s=rpcUrl&&rpcUrl!==h;AppLinks.SPI.createLink(t,c.val(),g.val(),true,s,rpcUrl,q,r,AppLinks.UI.displayValidationError("create-validation-errors",k,function(){e.enableSubmitBtn();e.enablePreviousBtn()}))}};var p={showButtonId:"add-application-link",width:510,height:660,id:"add-application-link-dialog",onnext:function(){k.find(".applinks-error").remove();var s=e.dialog.curpage;if(s==0){var r=function(u){a=u};o=AppLinks.Wizard.fetchManifest(e,k,r,r);return false}else{if(s==2){var q=function(){e.enableNextBtn();e.enablePreviousBtn();e.dialog.gotoPage(3);if(a.publicSignup){k.find("#warning-without-public-signup").hide();k.find("#warning-with-public-signup").show()}else{k.find("#warning-without-public-signup").show();k.find("#warning-with-public-signup").hide()}};e.disableNextBtn();e.disablePreviousBtn();var t=function(){e.enableNextBtn();e.enablePreviousBtn()};AppLinks.Wizard.checkReciprocalLinkFormThreeStepMode(k,n,q,o,t);return false}else{if(s==3){j();return false}}}return true},onprevious:function(){if(e.dialog.curpage==2){e.dialog.gotoPage(0);return false}return true},onsubmit:function(){if(!!k.find("#step3-allowed").length||typeof a.typeId=="undefined"){j()}else{if(!k.find(".create-reciprocal-link").is(":checked")){n()}else{var q=function(){j()};AppLinks.Wizard.checkReciprocalLinkFormTwoStepMode(k,o,q,function(){})}}return false},onshow:function(){k.find(".applinks-error").remove();AppLinks.UI.hideInfoBox();d.val("");m.val(h);return true},aftershow:function(){d.focus()}},l=f("#create-application-link-container"),e=l.wizard(p),k=f(e.dialog.popup.element),i=k.find(".local-app-name"),d=k.find("#application-url"),m=k.find(".reciprocal-rpc-url"),c=k.find(".reciprocal-link-username"),g=k.find(".reciprocal-link-password"),h=f("#baseUrl").val();i.html(AppLinks.UI.shortenString(applicationName,20));l.data("wizard",e);AppLinks.Wizard.initNonUALUI(k);AppLinks.Wizard.initAuthenticationUI(k);AppLinks.showAddApplicationLinkWizard=function(q){e.show();if(q){d.val(q)}};d.keydown(function(q){if(q.keyCode=="13"){e.nextPage()}});g.keydown(function(q){if(q.keyCode=="13"){b()}});m.keydown(function(q){if(q.keyCode=="13"){b()}});function b(){if(!!k.find("#step3-allowed").length){e.nextPage()}else{e.submit()}}})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/edit-application-link.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){var e=AJS.$,j=e("#editAppLinkDialog"),b,f=e("#display-url"),l=e("#applicationName"),d=function(){e(".applinks-error","#editAppLinkDialog").remove();var o=f.val().trim();if(o==""){e('<div class="error applinks-error">'+"The URL should not be empty."+"</div>").insertAfter(f);return false}if(l.val()==""){e('<div class="error applinks-error">'+"The application name should not be empty."+"</div>").insertAfter(l);return false}var p=o.search(/[ \t\n\f\r\v]/);if(p>-1){e('<div class="error applinks-error">'+AJS.format("Invalid URL: Illegal whitespace at index {0}",p)+"</div>").insertAfter(f);return false}if(o.match(/^http/)&&!o.match(/^https?:\/\//)){e('<div class="error applinks-error">'+"Invalid URL: Missing double slash"+"</div>").insertAfter(f);return false}var n=e.extend(true,{},b);n.name=e("#applicationName").val();var m=AppLinks.UI.addProtocolToURL(e("#display-url").val());n.displayUrl=m;delete n.hasOutgoing;delete n.hasIncoming;delete n.webPanels;delete n.webItems;g.disableSubmitBtn();AppLinks.update(n,function(){b=n;g.enableSubmitBtn();g.dialog.popup.element.find("h2").text(n.name);g.dialog.popup.hide();a(b)},AppLinks.UI.displayValidationError("update-validation-errors",h,function(){g.enableSubmitBtn()}))},k=function(){e(".applinks-error").remove();var m=g.dialog.popup;m.element.find("h2").text("Configure"+" "+b.name);e("#applicationTypeValue").text(AppLinks.I18n.getApplicationTypeName(b.typeId));e("#rpc-url").text(b.rpcUrl);e("#applicationName").val(b.name);e("#display-url").val(b.displayUrl);if(b.isTwoWay){e("#hasApplinks").html("Yes")}else{e("#hasApplinks").html("No")}},i,a,c={showButtonId:"edit-application-link",cancelLabel:"Close",width:800,height:520,id:"edit-application-link-dialog",submitLabel:"Update",onshow:function(m){k();var n=AJS.contextPath();if(b.hasOutgoing===true){e("#outgoing-auth").attr("src",n+"/plugins/servlet/applinks/auth/conf/config-tabs?direction=OUTBOUND&applicationId="+b.id);e(e("#edit-application-link-dialog .item-button")[1]).show()}else{e(e("#edit-application-link-dialog .item-button")[1]).hide()}if(b.hasIncoming===true){e("#incoming-auth").attr("src",n+"/plugins/servlet/applinks/auth/conf/config-tabs?direction=INBOUND&applicationId="+b.id);e(e("#edit-application-link-dialog .item-button")[2]).show()}else{e(e("#edit-application-link-dialog .item-button")[2]).hide()}return true},onsubmit:function(m){h.find(".applinks-error").remove();d();return false},oncancel:function(){i();return true}},g=j.wizard(c);var h=e(g.dialog.popup.element);e("#edit-application-link-dialog .item-button").each(function(m){var o=""+parent.location,n=e("#edit-application-link-dialog .wizard-submit");if(o.indexOf("#")!=-1){o=o.substring(0,o.indexOf("#"))}if(m==1||m==2){e(this).click(function(){n.hide();var p=e(".active-pane",document.getElementById((m==1?"outgoing-auth":"incoming-auth")).contentWindow.document),r=p.children("iframe"),q=p.children(".loading.loading-tabs");q.show();r.attr("src",r.attr("src"))})}else{e(this).click(function(){n.show()})}});AppLinks.editAppLink=function(n,m,p,o,s){b=n;a=o||function(){AppLinks.UI.refreshOrphanedTrust();return true};i=s||function(){AppLinks.UI.refreshOrphanedTrust();return true};g.show();var q;var r;if(p){q=2;r="incoming-auth"}else{q=1;r="outgoing-auth"}if(m!="undefined"){e("#edit-application-link-dialog .item-button")[q].click();e("#outgoing-auth").load(function(){var v=document.getElementById(r).contentWindow.document;var t=e("."+m,v);t.parent().addClass("active-tab").siblings().removeClass("active-tab");var u=e(t.attr("href"),v);u.addClass("active-pane").siblings().removeClass("active-pane")})}else{e("#"+r).unbind("load")}};AppLinks.bindEditAppLink=function(n){var m=n.data.application;n.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.editAppLink(m,"undefined",false,function(o){AppLinks.UI.listApplicationLinks(o.id,"update");return true},function(){AppLinks.UI.listApplicationLinks();return true})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/orphaned-trust.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){(function(f){var e;var a;var c;var d=f("#orphaned-trust-certificates");var b={showButtonId:"show-orphaned-trust",cancelLabel:"Close",width:800,height:300,id:"orphaned-trust-certificates-dialog",onshow:function(i){var j=i.popup.element}};e=d.wizard(b);AppLinks.showOrphanedTrustCertificates=function(){e.show()};var g=f("#orphaned-trust-certificates-delete");var h={submitLabel:"Delete",cancelLabel:"Cancel",width:350,height:175,id:"#orphaned-trust-certificates-delete-dialog",onshow:function(i){var j=i.popup.element;f(j).find(".confirm-delete-text").text(f.trim(AJS.format("Are you sure you want to delete the trust relationship with \u0027\u0027{0}\u0027\u0027?",c.find("td.description").text())))},onsubmit:function(){var k=function(){c.remove();a.dialog.hide();if(f("tr.orphaned-trust-row").size()==0){f(".orphaned-trust-warning").hide()}else{e.show()}};var i=function(p,m,n){a.dialog.hide();var o=f.parseJSON(p.responseText).message;AppLinks.UI.showErrorBox("Failed to delete orphaned trust certificate"+": "+o)};var l=c.attr("data-id");var j=c.attr("data-type");AppLinks.SPI.deleteOrphanedTrust(l,j,k,i);return false},oncancel:function(){e.show()}};a=g.wizard(h);f(".orphaned-trust-create-link").click(function(){var k=f(this).parents("tr.orphaned-trust-row");var j=k.find("td.description").text();var l=k.attr("data-id");var i=k.attr("data-type");e.dialog.hide();AppLinks.showUpgradeToApplicationLinkWizard(l,i,AppLinks.UI.findApplicationType(l),AppLinks.UI.findUrl(j))});f(".orphaned-trust-delete").click(function(){c=AJS.$(this).parents("tr.orphaned-trust-row");e.dialog.hide();a.show()})})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'js/upgrade-orphaned-trust.js' */
(function(b,a){b(document).bind(AppLinks.Event.READY,function(){var o,i,e,g,l,c,p,f={cancelLabel:"Cancel",width:510,height:660,id:"upgrade-orphaned-trust-dialog",onshow:function(r){m.find(".applinks-error").remove();return true},onnext:function(){m.find(".applinks-error").remove();var t=q.dialog.curpage;if(t==0){var r=function(u){c=u;m.find(".reciprocal-link-description").text(AJS.format("To enable {0} in both directions between these applications, we require administrator credentials for the remote application. Uncheck the tickbox, if you only want {0} enabled for incoming requests.",i));m.find(".no-reciprocal-link-description").text(AJS.format("Tick this box to enable {0} in both directions between these applications, otherwise clicking on create will create the Application Link with allowing incoming {0} requests only.",i))};var s=function(u){m.find(".application-name").val(m.find(".non-ual-application-url").text());if(o=="OAUTH_SERVICE_PROVIDER"){m.find(".non-ual-description").text("This will enable outgoing authentication for this application using OAuth.")}else{m.find(".non-ual-description").text(AJS.format("This will allow incoming requests from this application using {0}.",i))}c=u;if(g){m.find(".application-types").val(g)}};p=AppLinks.Wizard.fetchManifest(q,m,r,s)}return false},onprevious:function(){q.dialog.gotoPage(1)},onsubmit:function(){var x=q.dialog.curpage;var z=function(A){q.enableSubmitBtn();q.enablePreviousBtn();q.cancel();a.trigger(a.ORPHANED_UPGRADE,A);AppLinks.UI.refreshOrphanedTrust()};if(x==1){var s={id:e,type:o},u={id:c.id,typeId:m.find(".application-types").val(),name:m.find(".application-name").val(),rpcUrl:m.find(".non-ual-application-url").text(),displayUrl:m.find(".non-ual-application-url").text(),isPrimary:false},t={trustEachOther:false,shareUserbase:false};q.disableSubmitBtn();q.disablePreviousBtn();AppLinks.SPI.createLinkWithOrphanedTrust(u,"","",false,false,"",t,s,z,AppLinks.UI.displayValidationError("create-non-ual-errors",m,function(){q.enableSubmitBtn();q.enablePreviousBtn()}))}else{if(x==2){var s={id:e,type:o};var t={trustEachOther:false,shareUserbase:false},u={id:c.id,typeId:c.typeId,name:c.name,rpcUrl:p,displayUrl:c.url,isPrimary:false},v=n.val();q.disableSubmitBtn();q.disablePreviousBtn();var r=m.find(".create-reciprocal-link").is(":checked");var y=function(){AppLinks.SPI.createLinkWithOrphanedTrust(u,d.val(),j.val(),r,true,v,t,s,z,AppLinks.UI.displayValidationError("two-way-link-errors",m,function(){q.enableSubmitBtn();q.enablePreviousBtn()}))};var w=function(){q.enableSubmitBtn();q.enablePreviousBtn()};AppLinks.Wizard.checkReciprocalLinkFormThreeStepMode(m,y,y,p,w)}}return false},aftershow:function(){h.focus()}};var q=b("#upgrade-orphaned-trust-container").wizard(f),m=b(q.dialog.popup.element),k=m.find(".local-app-name"),h=m.find("#application-url"),n=m.find(".reciprocal-rpc-url"),d=m.find(".reciprocal-link-username"),j=m.find(".reciprocal-link-password");k.html(AppLinks.UI.shortenString(applicationName,20));AppLinks.showUpgradeToApplicationLinkWizard=function(u,s,t,r){e=u;o=s;g=t;l=AppLinks.I18n.getApplicationTypeName(t);i;if(s==="TRUSTED_APPS"){i="Trusted Application"}else{if(s=="OAUTH"){i="OAuth"}}AppLinks.UI.removeCssClass(m.find("#remoteApp"),"application-type-image");if(t){m.find("#remoteApp").removeClass("app-image unknown-app-image");m.find("#remoteApp").addClass("app-image remote-app-image application-type-image-"+t)}else{m.find("#remoteApp").removeClass("app-image remote-app-image");m.find("#remoteApp").addClass("app-image unknown-app-image")}if(r&&t){m.find(".upgrade-info").text(AJS.format("Check that this URL for {0} is correct.",l));h.val(r)}else{if(r&&!t){m.find(".upgrade-info").text("Check that this URL is correct.");h.val(r)}else{if(!r&&t){m.find(".upgrade-info").text(AJS.format("Enter the URL for {0}.",l))}else{m.find(".upgrade-info").text(AJS.format("Enter the URL of the Application.",i))}}}q.show()};AppLinks.Wizard.initNonUALUI(m);AppLinks.Wizard.initAuthenticationUI(m);h.keydown(function(r){if(r.keyCode=="13"){q.nextPage()}});j.keydown(function(r){if(r.keyCode=="13"){q.submit()}});n.keydown(function(r){if(r.keyCode=="13"){q.submit()}})})})(require("applinks/lib/jquery"),require("applinks/common/events"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'com/atlassian/applinks/ui/admin/list-applinks-table.soy' */
// This file was automatically generated from list-applinks-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.templates.list.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.templates == 'undefined') { applinks.templates = {}; }
if (typeof applinks.templates.list == 'undefined') { applinks.templates.list = {}; }


applinks.templates.list.getUpgradeWarning = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(AJS.format("Application \x27\x27{0}\x27\x27 has been upgraded.",opt_data.name)) + ' <a class=\'upgrade-' + soy.$$escapeHtml(opt_data.id) + ' upgrade-warning\' href=\'#\'>' + soy.$$escapeHtml("Click here to Upgrade the Application Link configuration") + '</a></div>';
};
if (goog.DEBUG) {
  applinks.templates.list.getUpgradeWarning.soyTemplateName = 'applinks.templates.list.getUpgradeWarning';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:list-application-links', location = 'com/atlassian/applinks/ui/admin/applinks-dialog.soy' */
// This file was automatically generated from applinks-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.templates.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.templates == 'undefined') { applinks.templates = {}; }


applinks.templates.helpLink = function(opt_data, opt_ignored) {
  return '<a title="' + soy.$$escapeHtml("Help") + '" href="' + soy.$$escapeHtml(require('applinks/common/help-paths').getFullPath(opt_data.helpLinkKey,undefined)) + '" target="_blank" class="ual-help-link help-link" data-help-link-key="' + soy.$$escapeHtml(opt_data.helpLinkKey) + '"><span class="aui-icon aui-icon-small aui-iconfont-help">' + soy.$$escapeHtml("Help") + '</span></a>';
};
if (goog.DEBUG) {
  applinks.templates.helpLink.soyTemplateName = 'applinks.templates.helpLink';
}


applinks.templates.getConfirmUrlsDialog = function(opt_data, opt_ignored) {
  return '<div id="applinks-dialog"><p>' + soy.$$escapeHtml("The Application URL is different to the Display URL.") + '</p><p>' + soy.$$escapeHtml("Confirm that this is correct or change the Application URL below.") + '</p><p>' + soy.$$escapeHtml("The Application URL should only be different to the Display URL if your application cannot access the internet directly (e.g. behind a firewall or proxy).") + '</p>' + aui.form.form({action: '', id: 'applinks-confirm-urls-form', content: '' + aui.form.textField({id: 'application-url-rpc', labelContent: "Application URL", isRequired: true, value: opt_data.rpcUrl, descriptionText: "This is the URL used to connect to the remote application from this server."}) + aui.form.textField({id: 'application-url-display', labelContent: "Display URL", isRequired: true, isDisabled: true, value: opt_data.displayUrl, descriptionText: "The display URL is used when rendering links to the application in the user\x27s browser."})}) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getConfirmUrlsDialog.soyTemplateName = 'applinks.templates.getConfirmUrlsDialog';
}


applinks.templates.getCreateUalLinkDialog = function(opt_data, opt_ignored) {
  return '<div id="applinks-dialog"><p>' + soy.$$escapeHtml("You are creating a link from:") + '</p>' + applinks.templates.appDetails({displayUrl: opt_data.fromApp.url, rpcUrl: opt_data.fromApp.rpcUrl, name: opt_data.fromApp.name, product: opt_data.fromApp.product, logoUrl: opt_data.fromApp.logoUrl}) + '<p>' + soy.$$escapeHtml("To this application:") + '</p>' + applinks.templates.appDetails({displayUrl: opt_data.toApp.url, rpcUrl: opt_data.toApp.rpcUrl, name: opt_data.toApp.name, product: opt_data.toApp.product, logoUrl: opt_data.toApp.logoUrl}) + ((opt_data.reciprocal) ? aui.message.info({extraClasses: 'redirect', isCloseable: false, content: soy.$$escapeHtml("Click continue to create the link and be redirected back to") + ' <strong>' + soy.$$escapeHtml(opt_data.fromApp.name) + '</strong>'}) + ((! opt_data.isSysAdmin && opt_data.sharedUserbase) ? aui.message.error({extraClasses: 'sharedUserBaseWarning', isCloseable: false, content: '' + soy.$$escapeHtml("The reciprocal Application Link cannot be configured for a shared userbase. This can be configured later by a system administrator.")}) : '') + ((opt_data.isUsingCors) ? aui.message.warning({isCloseable: false, content: '' + soy.$$escapeHtml("There is a problem communicating directly between these two applications. This may affect the behaviour of some integration features.")}) : '') : aui.form.form({action: '', extraClasses: 'long-label', content: ((opt_data.isSysAdmin && opt_data.impersonationIsSupported) ? '<div class="checkbox"><input name="userbase" id="userbase" type="checkbox"><label for="userbase">' + soy.$$escapeHtml("The servers have the same set of users and usernames.") + '</label>' + applinks.templates.helpLink({helpLinkKey: 'applinks.docs.administration.guide'}) + '<div class="description">If unsure leave unchecked.</div></div>' : '') + '<div class="checkbox"><input name="isAdmin" id="isAdmin" checked type="checkbox"><label for="isAdmin">' + soy.$$escapeHtml("I am an administrator on both instances.") + '</label></div><div class="isAdmin"><!-- place holder --><br/><br/><br/><br/><br/></div>' + aui.message.info({extraClasses: 'isAdmin hidden notAdmin ', isCloseable: false, content: soy.$$escapeHtml("Indicating you are not an admin on both instances means only the local end of the link will be created now. An Admin on") + ' <strong>' + soy.$$escapeHtml(opt_data.fromApp.name) + '</strong> ' + soy.$$escapeHtml("can complete the link.")})}) + ((opt_data.isUsingCors) ? aui.message.warning({isCloseable: false, content: '' + soy.$$escapeHtml("There is a problem communicating directly between these two applications. This may affect the behaviour of some integration features.")}) : '')) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getCreateUalLinkDialog.soyTemplateName = 'applinks.templates.getCreateUalLinkDialog';
}


applinks.templates.getCreateNonUalLinkDialog = function(opt_data, opt_ignored) {
  return '<div id="applinks-dialog"><p>' + soy.$$escapeHtml("You are creating a link from:") + '</p>' + applinks.templates.appDetails({rpcUrl: opt_data.toApp.url, name: opt_data.toApp.name, product: opt_data.toApp.product, logoUrl: opt_data.toApp.logoUrl}) + '<p>' + soy.$$escapeHtml("To this application:") + '</p>' + aui.form.form({action: '', id: 'applinks-create-nonual-form', content: '' + applinks.templates.nonUalAppDetails({url: opt_data.fromApp.url}) + aui.message.error({extraClasses: 'createNonUalLinkDialogError', isCloseable: false}) + aui.form.textField({id: 'application-name-new', labelContent: "Application Name", isRequired: true, errorTexts: ["The application name should not be empty."]}) + aui.form.selectField({id: 'application-types-new', labelContent: "Application Type", options: opt_data.typeOptions, isRequired: true}) + '<div id="applinks-nonual-oath-configuration">' + aui.form.textField({id: 'serviceProvider', labelContent: "Service Provider Name", isRequired: false, errorTexts: ["Service provider name is required."]}) + aui.form.textField({id: 'consumerKey', labelContent: "Consumer key", isRequired: false, errorTexts: ["auth.oauth.config.serviceprovider.missing.consumer.key"]}) + aui.form.textField({id: 'sharedSecret', labelContent: "Shared secret", isRequired: false, errorTexts: ["Shared secret is required."]}) + aui.form.textField({id: 'requestTokenUrl', labelContent: "Request Token URL", isRequired: false, errorTexts: ["Request Token URL is required."]}) + aui.form.textField({id: 'accessTokenUrl', labelContent: "Access token URL", isRequired: false, errorTexts: ["Access Token URL is required."]}) + aui.form.textField({id: 'authorizeUrl', labelContent: "Authorize URL", isRequired: false, errorTexts: ["Authorize URL is required."]}) + '</div><div class="field-group"><input name="createIncoming" id="createIncoming" type="checkbox"><label for="createIncoming">' + soy.$$escapeHtml("Create incoming link") + '</label><input name="oauth-outgoing-enabled" id="oauth-outgoing-enabled" type="hidden" value="true"/></div>'}) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getCreateNonUalLinkDialog.soyTemplateName = 'applinks.templates.getCreateNonUalLinkDialog';
}


applinks.templates.getConfigureIncomingNonUalLinkDialog = function(opt_data, opt_ignored) {
  return '<div id="applinks-dialog"><p>' + soy.$$escapeHtml("You are creating a link from:") + '</p>' + applinks.templates.appDetails({rpcUrl: opt_data.toApp.url, name: opt_data.toApp.name, product: opt_data.toApp.product, logoUrl: opt_data.toApp.logoUrl}) + '<p>' + soy.$$escapeHtml("To this application:") + '</p>' + aui.form.form({action: '', id: 'applinks-configure-incoming-nonual-form', content: '' + applinks.templates.nonUalAppDetails({url: opt_data.fromApp.url, isRequired: true}) + aui.message.error({extraClasses: 'configureIncomingNonUalLinkDialogError', isCloseable: false}) + aui.form.textField({id: 'consumerKey', labelContent: "Consumer Key", isRequired: true, errorTexts: ["auth.oauth.config.serviceprovider.missing.consumer.key"]}) + aui.form.textField({id: 'consumerName', labelContent: "Consumer Name", isRequired: true, errorTexts: ["Consumer name is required."]}) + aui.form.textareaField({id: 'publicKey', labelContent: "Public Key", isRequired: true, errorTexts: ["A Public Key is required."]})}) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getConfigureIncomingNonUalLinkDialog.soyTemplateName = 'applinks.templates.getConfigureIncomingNonUalLinkDialog';
}


applinks.templates.getConfigureUrlDialog = function(opt_data, opt_ignored) {
  return '<div id="url-dialog">' + aui.message.warning({extraClasses: 'urlError', isCloseable: false, content: opt_data.urlErrorMessage}) + aui.form.form({action: '', id: 'applinks-configure-incoming-nonual-form', content: '' + aui.form.textField({id: 'application-url-userdefined', labelContent: "Entered URL", isRequired: false, isDisabled: true, value: opt_data.originalUrl}) + ((opt_data.showSelectOptions) ? aui.form.checkboxField({id: 'use-application-url', legendContent: '', fields: [{id: 'use-application-url-userdefined', labelText: "Use this URL", 'isChecked?': false}], descriptionText: "Checking this will skip any further validation and use this URL for the link."}) : '') + aui.form.textField({id: 'application-url-corrected', labelContent: "New URL", isRequired: true, value: opt_data.correctedUrl})}) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getConfigureUrlDialog.soyTemplateName = 'applinks.templates.getConfigureUrlDialog';
}


applinks.templates.getPauseDialog = function(opt_data, opt_ignored) {
  return '<div id="create-applink">' + aui.message.info({extraClasses: 'applinksPauseDialog', isCloseable: false, content: opt_data.message}) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getPauseDialog.soyTemplateName = 'applinks.templates.getPauseDialog';
}


applinks.templates.getManualRedirectDialog = function(opt_data, opt_ignored) {
  return '<div id="create-applink">' + aui.form.form({action: '', id: 'applinks-manual-redirect-form', content: aui.message.info({extraClasses: 'manualRedirectUrl', isCloseable: false, content: '<p>' + soy.$$escapeHtml("To create a reciprocal link please copy the following URL and pass to an Administrator on") + ' <strong>' + soy.$$escapeHtml(opt_data.redirectApp) + '</strong></p>'}) + '<p><input type="text" size="100%" class="text long-field" value="' + soy.$$escapeHtml(opt_data.redirectUrl) + '" readonly/></p>'}) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getManualRedirectDialog.soyTemplateName = 'applinks.templates.getManualRedirectDialog';
}


applinks.templates.appDetails = function(opt_data, opt_ignored) {
  return '<div class="appDetail"><div class="appDetailRow"><div class="avatar">' + ((opt_data.logoUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.logoUrl) + '" class="aui-icon-small" width=16px height=16px/>' : '') + '</div><div class="detail">' + ((opt_data.displayUrl) ? '<p><strong>' + soy.$$escapeHtml("Display URL") + ':</strong> ' + soy.$$escapeHtml(opt_data.displayUrl) + '</p>' : '') + ((opt_data.rpcUrl) ? '<p><strong>' + soy.$$escapeHtml("Application URL") + ':</strong> ' + soy.$$escapeHtml(opt_data.rpcUrl) + '</p>' : '') + '<p><strong>' + soy.$$escapeHtml("Name") + ':</strong> ' + soy.$$escapeHtml(opt_data.name) + '</p><p><strong>' + soy.$$escapeHtml("Application") + ':</strong> ' + soy.$$escapeHtml(opt_data.product) + '</p></div></div></div>';
};
if (goog.DEBUG) {
  applinks.templates.appDetails.soyTemplateName = 'applinks.templates.appDetails';
}


applinks.templates.nonUalAppDetails = function(opt_data, opt_ignored) {
  return '<div class="appDetail"><div class="appDetailRow"><div class="avatar"><span class="avatarSpace"></span></div><div class="detail"><p><strong>' + soy.$$escapeHtml("Application URL") + ':</strong> ' + soy.$$escapeHtml(opt_data.url) + '</p><input type="hidden" id="non-ual-application-url" value="' + soy.$$escapeHtml(opt_data.url) + '"/></div></div></div>';
};
if (goog.DEBUG) {
  applinks.templates.nonUalAppDetails.soyTemplateName = 'applinks.templates.nonUalAppDetails';
}


applinks.templates.getInformationDialog = function(opt_data, opt_ignored) {
  return '<div id="create-applink">' + aui.form.form({action: '', id: 'applinks-information-form', content: '' + ((opt_data.warningHtml != null) ? aui.message.warning({id: 'applinks-warning-message', isCloseable: false, content: '<p>' + soy.$$filterNoAutoescape(opt_data.warningHtml) + '</p>'}) : '') + ((opt_data.informationHtml != null) ? aui.message.info({id: 'applinks-information-message', isCloseable: false, content: '<p>' + soy.$$filterNoAutoescape(opt_data.informationHtml) + '</p>'}) : '')}) + '</div>';
};
if (goog.DEBUG) {
  applinks.templates.getInformationDialog.soyTemplateName = 'applinks.templates.getInformationDialog';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-migration', location = 'applinks/internal/feature/migration/applinks-feature-migration.js' */
define("applinks/feature/migration",["applinks/lib/jquery","applinks/lib/lodash","applinks/lib/aui","applinks/common/dialog-helper","applinks/common/preconditions","applinks/common/rest"],function(d,i,h,g,f,c){function e(l){d.ajax({url:h.contextPath()+"/plugins/servlet/applinks/auth/conf/trusted/autoconfig/"+l.id,type:"DELETE"}).always(function(){l.fetchStatus()})}function a(o){var l="removal-dialog-"+o.id;var n=applinks.migration.localRemovalDialogContent({id:l,displayUrl:o.getAdminUrl(),displayName:o.get("name")});d(g.getContainer()).append(n);var m=h.dialog2("#"+l);d("#"+l+" button").on("click",function(){m.hide();m.remove()});m.id=l;m.closeButtonId=l+"-close-button";m.okButtonId=l+"-ok-button";return m}function b(l){return i.some(l.capabilities,function(m){return m==="MIGRATION_API"})}function k(m,l){c.V3.migration(m.id).post().done(function(n){if(l(n)){e(m)}else{m.fetchStatus()}}).fail(function(){m.fetchStatus()})}function j(l){l.set({statusLoaded:false})}return{migrate:function(l){f.hasValue(l,"applink");j(l);k(l,function(m){return m.incoming.oauth&&m.incoming.trusted})},removeLocal:function(m){f.hasValue(m,"applink");var l=a(m);d("#"+l.okButtonId).on("click",function(){j(m);k(m,b)});l.show()}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-migration', location = 'applinks/internal/feature/migration/applinks-feature-migration-dialog.soy' */
// This file was automatically generated from applinks-feature-migration-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.migration.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.migration == 'undefined') { applinks.migration = {}; }


applinks.migration.localRemovalDialogContent = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-layer aui-dialog2 aui-dialog2-medium aui-dialog2-warning" aria-hidden="true" data-aui-modal="true" data-aui-remove-on-hide="true" data-aui-focus-selector="' + soy.$$escapeHtml(opt_data.id) + '-close-button"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Remove deprecated authentication locally") + '</h2></header><!-- Main dialog content --><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("You are about to remove Trusted Applications authentication from the local end of this application link.")) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Doing this will temporarily break the connection for all users until you also remove Trusted Applications authentication from the link in \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.displayName) === 'number' ? opt_data.displayName : soy.$$escapeHtml(opt_data.displayName)))) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("Are you sure you want to continue?")) + '</p></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button type="button" id="' + soy.$$escapeHtml(opt_data.id) + '-ok-button" class="aui-button">' + soy.$$escapeHtml("Confirm") + '</button><button type="button" id="' + soy.$$escapeHtml(opt_data.id) + '-close-button" class="aui-button aui-button-link applinks-default-focus">' + soy.$$escapeHtml("Close") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  applinks.migration.localRemovalDialogContent.soyTemplateName = 'applinks.migration.localRemovalDialogContent';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-status', location = 'applinks/internal/feature/applink-status/details/applink-status-details-deprecated.js' */
define("applinks/feature/status/details/deprecated",["applinks/feature/migration","applinks/feature/status/errors"],function(a,b){return{onLoad:function(d,c){d._dialog.$popup.find(".applinks-status-update").on("click",function(){d._dialog.hide();if(b.MANUAL_LEGACY_REMOVAL.matches(c.get("status"))){a.removeLocal(c)}else{a.migrate(c)}})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-status', location = 'applinks/internal/feature/applink-status/applink-status.js' */
define("applinks/feature/status",["applinks/lib/jquery","applinks/common/preconditions"],function(c,e){function a(f){return f}function d(f){e.hasValue(f,"options");e.hasValue(f.applink,"options.applink");e.hasValue(f.container,"options.container");var h=c(f.container),g=f.applink;if(!g.statusLoaded||!g.status){h.append(applinks.status.loading(b(f)))}else{if(g.status.working){h.append(applinks.status.working(b(f)))}else{h.append(applinks.status.error(b(f)))}}h.attr("data-status-loaded",g.statusLoaded)}function b(h){var f=h.clickable!==false;var g=h.applink.status&&a(h.applink.status);var i=h.extraClasses||"";return{status:g,clickable:f,extraClasses:i}}return{View:d,processStatus:a,AUTHENTICATE_LINK_SELECTOR:".status-remote-auth-required"}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-status', location = 'applinks/internal/feature/applink-status/applink-status-errors.js' */
define("applinks/feature/status/errors",["applinks/lib/lodash","applinks/common/preconditions"],function(b,g){function f(i,j,h,k){this.type=i;this.category=j;this.linkKey=h;this.sectionKey=k}f.prototype.equals=function(h){return a(h)&&this.type===h.type&&this.category===h.category};f.prototype.matches=function(h){if(e(h)){return this.equals(h.error)}else{if(a(h)){return this.equals(h)}else{return false}}};function e(h){return h&&h.error&&a(h.error)}function a(h){return h&&h.type&&h.category}function c(h){return h instanceof f}var d={CONNECTION_REFUSED:new f("CONNECTION_REFUSED","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.connectionrefused","connectionrefused"),UNKNOWN_HOST:new f("UNKNOWN_HOST","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.unknownhost","unknownhost"),SSL_UNTRUSTED:new f("SSL_UNTRUSTED","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.ssluntrusted","SSLnottrusted"),SSL_HOSTNAME_UNMATCHED:new f("SSL_HOSTNAME_UNMATCHED","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.sslunmatched","SSLnotmatching"),SSL_UNMATCHED:new f("SSL_UNMATCHED","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.sslunmatched","SSLnotmatching"),OAUTH_PROBLEM:new f("OAUTH_PROBLEM","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.oauthproblem","commonerrors"),OAUTH_TIMESTAMP_REFUSED:new f("OAUTH_TIMESTAMP_REFUSED","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.oauthtimestamprefused","OAuthtimestamp"),OAUTH_SIGNATURE_INVALID:new f("OAUTH_SIGNATURE_INVALID","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.oauthsignatureinvalid","OAuthinvalidsig"),UNEXPECTED_RESPONSE:new f("UNEXPECTED_RESPONSE","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.unexpectedresponse","unexpectedresponse"),UNEXPECTED_RESPONSE_STATUS:new f("UNEXPECTED_RESPONSE_STATUS","NETWORK_ERROR","applinks.docs.diagnostics.troubleshoot.unexpectedresponse","unexpectedresponse"),AUTH_LEVEL_MISMATCH:new f("AUTH_LEVEL_MISMATCH","CONFIG_ERROR","applinks.docs.diagnostics.troubleshoot.authlevelmismatch","OAuthmatch"),NO_REMOTE_APPLINK:new f("NO_REMOTE_APPLINK","CONFIG_ERROR"),LOCAL_AUTH_TOKEN_REQUIRED:new f("LOCAL_AUTH_TOKEN_REQUIRED","ACCESS_ERROR"),REMOTE_AUTH_TOKEN_REQUIRED:new f("REMOTE_AUTH_TOKEN_REQUIRED","ACCESS_ERROR"),INSUFFICIENT_REMOTE_PERMISSION:new f("INSUFFICIENT_REMOTE_PERMISSION","ACCESS_ERROR","applinks.docs.configuring.auth.oauth","accessdenied_oauth"),REMOTE_VERSION_INCOMPATIBLE:new f("REMOTE_VERSION_INCOMPATIBLE","INCOMPATIBLE"),NO_OUTGOING_AUTH:new f("NO_OUTGOING_AUTH","INCOMPATIBLE","applinks.docs.configuring.auth.oauth"),GENERIC_LINK:new f("GENERIC_LINK","NON_ATLASSIAN"),NON_ATLASSIAN:new f("NON_ATLASSIAN","NON_ATLASSIAN"),SYSTEM_LINK:new f("SYSTEM_LINK","SYSTEM"),AUTH_LEVEL_UNSUPPORTED:new f("AUTH_LEVEL_UNSUPPORTED","DEPRECATED","applinks.docs.diagnostics.troubleshoot.authlevelunsupported","OAuthunsupported"),LEGACY_UPDATE:new f("LEGACY_UPDATE","DEPRECATED","applinks.docs.diagnostics.troubleshoot.migration","autoUpdate"),LEGACY_REMOVAL:new f("LEGACY_REMOVAL","DEPRECATED","applinks.docs.diagnostics.troubleshoot.migration","autoRemove"),MANUAL_LEGACY_UPDATE:new f("MANUAL_LEGACY_UPDATE","DEPRECATED","applinks.docs.diagnostics.troubleshoot.migration","manualUpdate"),MANUAL_LEGACY_REMOVAL:new f("MANUAL_LEGACY_REMOVAL","DEPRECATED","applinks.docs.diagnostics.troubleshoot.migration","manualRemove"),MANUAL_LEGACY_REMOVAL_WITH_OLD_EDIT:new f("MANUAL_LEGACY_REMOVAL_WITH_OLD_EDIT","DEPRECATED","applinks.docs.diagnostics.troubleshoot.migration","manualOldEditRemove"),UNKNOWN:new f("UNKNOWN","UNKNOWN","applinks.docs.diagnostics.troubleshoot.unknownerror"),eachError:function(h){b.chain(d).values().filter(c).each(h)},find:function(h){if(a(h)){return d[h.type]}else{if(e(h)){return d[h.error.type]}else{return undefined}}},isAccessTokenError:function(h){return d.REMOTE_AUTH_TOKEN_REQUIRED.matches(h)||d.LOCAL_AUTH_TOKEN_REQUIRED.matches(h)},hasErrorCategory:function(i,h){g.hasValue(h,"targetCategory");var j=a(i)?i.category:(e(i)?i.error.category:undefined);return j===h}};return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-status', location = 'applinks/internal/feature/applink-status/details/applink-status-oauth-matcher.js' */
define("applinks/feature/status/oauth-matcher",["applinks/common/preconditions"],function(c){function b(d){c.hasValue(d);if(d.enabled&&d.twoLoEnabled&&d.twoLoImpersonationEnabled){return"oauthWithImpersonation"}if(d.enabled&&!d.twoLoImpersonationEnabled){return"oauth"}if(!d.enabled&&!d.twoLoEnabled&&!d.twoLoImpersonationEnabled){return"disabled"}return undefined}function a(d){var f=d.localAuthentication;var g=d.remoteAuthentication;c.hasValue(f);c.hasValue(g);var e={incoming:{local:b(f.incoming),remote:b(g.outgoing)},outgoing:{local:b(f.outgoing),remote:b(g.incoming)}};if(e.incoming.local===e.incoming.remote&&e.outgoing.local===e.outgoing.remote){return undefined}return e}return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-status', location = 'applinks/internal/feature/applink-status/details/applink-status-details.js' */
define("applinks/feature/status/details",["applinks/lib/aui","applinks/lib/console","applinks/lib/jquery","applinks/lib/lodash","applinks/common/events","applinks/component/inline-dialog","applinks/common/preconditions","applinks/common/rest","applinks/feature/status","applinks/feature/status/errors","applinks/feature/status/oauth-matcher","applinks/feature/oauth-dance","applinks/common/urls","applinks/feature/status/details/deprecated"],function(m,v,j,B,x,i,e,w,g,a,n,o,b,c){var u="dialog";var s="notification";function f(I,K){K=K||u;var D=I.get("status");var J={status:D,displayUrl:I.getAdminUrl(),editUrl:b.Local.edit(I.id)};var H={mode:K,isDialog:K===u};function F(M,L){return M(B.extend({},J,L||{}),null,H)}var G=null;if(a.CONNECTION_REFUSED.matches(D)){G=F(applinks.status.details.connection_refused)}else{if(a.UNKNOWN_HOST.matches(D)){G=F(applinks.status.details.unknown_host)}else{if(a.AUTH_LEVEL_MISMATCH.matches(D)){var E=n(D);e.hasValue(E,"mismatches","Unable to find mismatch description");G=F(applinks.status.details.auth_level_mismatch,{mismatches:E})}else{if(a.UNKNOWN.matches(D)){G=F(applinks.status.details.unknown_error)}else{if(a.AUTH_LEVEL_UNSUPPORTED.matches(D)){G=F(applinks.status.details.auth_level_unsupported);G=F(applinks.status.details.auth_level_unsupported)}else{if(a.SSL_UNTRUSTED.matches(D)){G=F(applinks.status.details.ssl_untrusted)}else{if(a.SSL_HOSTNAME_UNMATCHED.matches(D)){G=F(applinks.status.details.ssl_hostname_unmatched)}else{if(a.SSL_UNMATCHED.matches(D)){G=F(applinks.status.details.ssl_unmatched)}else{if(a.OAUTH_PROBLEM.matches(D)){G=F(applinks.status.details.oauth_problem)}else{if(a.OAUTH_TIMESTAMP_REFUSED.matches(D)){G=F(applinks.status.details.oauth_timestamp_refused)}else{if(a.OAUTH_SIGNATURE_INVALID.matches(D)){G=F(applinks.status.details.oauth_signature_invalid)}else{if(a.UNEXPECTED_RESPONSE.matches(D)||a.UNEXPECTED_RESPONSE_STATUS.matches(D)){G=F(applinks.status.details.unexpected_response,{renderDetails:a.UNEXPECTED_RESPONSE_STATUS.matches(D)})}else{if(a.SYSTEM_LINK.matches(D)){G=F(applinks.status.details.system_link)}else{if(a.GENERIC_LINK.matches(D)){G=F(applinks.status.details.generic_link)}else{if(a.REMOTE_VERSION_INCOMPATIBLE.matches(D)){G=F(applinks.status.details.remote_version_incompatible,{applinkType:I.getTypeName()})}else{if(a.NON_ATLASSIAN.matches(D)){G=F(applinks.status.details.non_atlassian)}else{if(a.NO_REMOTE_APPLINK.matches(D)){G=F(applinks.status.details.no_remote_applink)}else{if(a.NO_OUTGOING_AUTH.matches(D)){G=F(applinks.status.details.no_outgoing_auth)}else{if(a.INSUFFICIENT_REMOTE_PERMISSION.matches(D)){G=F(applinks.status.details.insufficient_remote_permission)}else{if(a.LEGACY_REMOVAL.matches(D)){G=F(applinks.status.details.legacy_removal)}else{if(a.LEGACY_UPDATE.matches(D)){G=F(applinks.status.details.legacy_update)}else{if(a.MANUAL_LEGACY_UPDATE.matches(D)){G=F(applinks.status.details.manual_legacy_update)}else{if(a.MANUAL_LEGACY_REMOVAL.matches(D)){G=F(applinks.status.details.manual_legacy_removal)}else{if(a.MANUAL_LEGACY_REMOVAL_WITH_OLD_EDIT.matches(D)){G=F(applinks.status.details.manual_legacy_removal_with_old_edit)}}}}}}}}}}}}}}}}}}}}}}}}return G&&p(D,K,G)}function p(D,F,E){if(F==s){return applinks.status.details.notificationContainer({status:D,contents:E})}else{return E}}function A(D){return"applinks-status-dialog-"+D}function C(D){return j("#"+A(D))}function d(G,F){var D=".status-insufficient-remote-permission";var E=G.find(D);E.click(function(){w.OAuth.V1.consumerToken(F.id).del().fail(function(H){v.warn(m.format("Could not remove consumer token for appLinkId {0}, {1}: {2}",F.id,H.status,H.responseText));y(E)}).done(function(){y(E)});return false})}function h(F,E){var D=F._status;if(D&&D.error&&"DEPRECATED"===D.error.category){return c.onLoad(F,E)}}function y(D){new o(D).start()}function r(D){m.trigger("analyticsEvent",{name:"applinks.status.dialog.opened",data:{applicationId:D.link.id,status:D.error.type.toLowerCase(),category:D.error.category.toLowerCase()}})}function q(D){C(D).remove()}function k(H){var E=this;this._status=H.get("status");if(this._status){this._status=g.processStatus(this._status);q(this._status.link.id);var G=f(H);if(G){var F=this._dialog=new i(A(this._status.link.id),G,{classes:"applinks-status-dialog",alignment:"bottom center"});h(this,H);var D=B.bind(function(){if(this.isVisible()){this.realign()}},F);F.onShow(function(){j(document).on(x.Legacy.MESSAGE_BOX_DISPLAYED,D);E.onDialogShow()}).onHide(function(){j(document).off(x.Legacy.MESSAGE_BOX_DISPLAYED,D)});F.on("click",".applinks-status-close, .applinks-v3-switchback",function(){F.hide()});d(F.contents(),H)}}}k.prototype.onDialogShow=function(){r(this._status)};function t(E){e.hasValue(E,"options");e.hasValue(E.applink,"options.applink");e.hasValue(E.container,"options.container");var D=this;this._status=E.applink.get("status");if(this._status){this._status=g.processStatus(this._status);var F=f(E.applink,s);if(F){if(E.refresh!==false){D.findNotification(E.container).remove()}j(E.container).append(F);d(D.findNotification(E.container),E.applink)}}}t.prototype.findNotification=function(D){return z(D,this._status.link.id)};function z(D,E){return j(D).find(".applink-status-notification").filter('[data-applink-id="'+E+'"]')}function l(F){e.hasValue(F,"options");e.hasValue(F.applink,"options.applink");e.hasValue(F.container,"options.container");var D=F.applink.get("status");if(D&&D.error){var E=a.find(g.processStatus(D));if(E){var G=applinks.status.details.helpLink({linkKey:E.linkKey,sectionKey:E.sectionKey,style:F.style||"link",textMode:F.textMode||"short",extraClasses:F.extraClasses});if(F.refresh!==false){F.container.find(".troubleshoot-link").remove()}j(F.container).append(G)}}}return{Dialog:k,Notification:t,HelpLink:l,removeDialog:q}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-status', location = 'applinks/internal/feature/applink-status/applink-status.soy' */
// This file was automatically generated from applink-status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.status.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.status == 'undefined') { applinks.status = {}; }


applinks.status.loading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="aui-icon aui-icon-wait status-lozenge ' + soy.$$escapeHtml(opt_data.extraClasses) + '">Loading...</span>';
};
if (goog.DEBUG) {
  applinks.status.loading.soyTemplateName = 'applinks.status.loading';
}


applinks.status.working = function(opt_data, opt_ignored) {
  return '' + applinks.status.statusLozengeNonClickable(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-success aui-lozenge-subtle', text: "Connected"}));
};
if (goog.DEBUG) {
  applinks.status.working.soyTemplateName = 'applinks.status.working';
}


applinks.status.error = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.status.error.category) {
    case 'ACCESS_ERROR':
      switch (opt_data.status.error.type) {
        case 'INSUFFICIENT_REMOTE_PERMISSION':
          output += applinks.status.statusLozenge(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-subtle aui-lozenge-moved', text: "Access denied", id: opt_data.status.link.id}));
          break;
        default:
          output += (opt_data.clickable) ? '<button type="button" class="aui-button aui-button-link status-remote-auth-required ' + soy.$$escapeHtml(opt_data.extraClasses) + '" data-authorisation-uri="' + soy.$$escapeHtml(opt_data.status.error.authorisationUri) + '">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'locked'}) + soy.$$escapeHtml("Authenticate to see status") + '</button>' : '';
      }
      break;
    case 'INCOMPATIBLE':
      output += applinks.status.statusLozenge(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-subtle', text: "Status unavailable", id: opt_data.status.link.id, clickable: opt_data.clickable}));
      break;
    case 'NON_ATLASSIAN':
      output += applinks.status.statusLozenge(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-subtle', text: "Non-Atlassian", id: opt_data.status.link.id, clickable: opt_data.clickable}));
      break;
    case 'SYSTEM':
      output += applinks.status.statusLozenge(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-subtle', text: "System", id: opt_data.status.link.id, clickable: opt_data.clickable}));
      break;
    case 'NETWORK_ERROR':
    case 'UNKNOWN':
      output += applinks.status.statusLozenge(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-error', text: "Network error", id: opt_data.status.link.id, clickable: opt_data.clickable}));
      break;
    case 'CONFIG_ERROR':
      output += applinks.status.statusLozenge(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-error', text: "Config error", id: opt_data.status.link.id, clickable: opt_data.clickable}));
      break;
    case 'DEPRECATED':
      output += applinks.status.statusLozenge(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-subtle aui-lozenge-current', text: "Deprecated", id: opt_data.status.link.id, clickable: opt_data.clickable}));
      break;
    case 'DISABLED':
      output += applinks.status.statusLozengeNonClickable(soy.$$augmentMap(opt_data, {class: 'aui-lozenge-subtle', text: "Disabled"}));
      break;
  }
  return output;
};
if (goog.DEBUG) {
  applinks.status.error.soyTemplateName = 'applinks.status.error';
}


applinks.status.statusLozenge = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.clickable) ? applinks.status.statusLozengeNonClickable(opt_data) : '<button type="button" data-aui-trigger class="aui-lozenge status-lozenge ' + soy.$$escapeHtml(opt_data['class']) + ' ' + soy.$$escapeHtml(opt_data.extraClasses) + '" aria-controls="applinks-status-dialog-' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.text) + '</button>');
};
if (goog.DEBUG) {
  applinks.status.statusLozenge.soyTemplateName = 'applinks.status.statusLozenge';
}


applinks.status.statusLozengeNonClickable = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge status-lozenge ' + soy.$$escapeHtml(opt_data['class']) + ' ' + soy.$$escapeHtml(opt_data.extraClasses) + '">' + soy.$$escapeHtml(opt_data.text) + '</spans>';
};
if (goog.DEBUG) {
  applinks.status.statusLozengeNonClickable.soyTemplateName = 'applinks.status.statusLozengeNonClickable';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-applink-status', location = 'applinks/internal/feature/applink-status/details/applink-status-details.soy' */
// This file was automatically generated from applink-status-details.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.status.details.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.status == 'undefined') { applinks.status = {}; }
if (typeof applinks.status.details == 'undefined') { applinks.status.details = {}; }


applinks.status.details.actions = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="' + ((opt_ijData.isDialog) ? 'applink-status-dialog-actions' : 'applink-status-notification-actions') + '">' + ((opt_ijData.isDialog) ? soy.$$filterNoAutoescape(opt_data.primaryActionButton) : '') + applinks.status.details.helpLink({linkKey: opt_data.helpLinkKey, sectionKey: opt_data.sectionKey, style: opt_ijData.isDialog ? 'link' : 'button', textMode: opt_ijData.isDialog ? 'full' : 'short', extraClasses: opt_ijData.isDialog ? 'applinks-status-close' : ''}, null, opt_ijData) + '</div>';
};
if (goog.DEBUG) {
  applinks.status.details.actions.soyTemplateName = 'applinks.status.details.actions';
}


applinks.status.details.closeAction = function(opt_data, opt_ignored, opt_ijData) {
  return '<button type="button" class="aui-button applinks-status-close applinks-default-focus">' + soy.$$escapeHtml("Close") + '</button>';
};
if (goog.DEBUG) {
  applinks.status.details.closeAction.soyTemplateName = 'applinks.status.details.closeAction';
}


applinks.status.details.updateAction = function(opt_data, opt_ignored, opt_ijData) {
  opt_data = opt_data || {};
  var output = '';
  var buttonText__soy26 = opt_data.updateActionText ? opt_data.updateActionText : "Update";
  output += '<button type="button" class="aui-button applinks-status-update applinks-default-focus">' + soy.$$escapeHtml(buttonText__soy26) + '</button>';
  return output;
};
if (goog.DEBUG) {
  applinks.status.details.updateAction.soyTemplateName = 'applinks.status.details.updateAction';
}


applinks.status.details.editAction = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  var buttonText__soy31 = opt_data.editActionText ? opt_data.editActionText : "Edit";
  output += '<a class="edit-url-button aui-button applinks-default-focus" href="' + soy.$$escapeHtml(opt_data.editUrl) + '">' + soy.$$escapeHtml(buttonText__soy31) + '</a>';
  return output;
};
if (goog.DEBUG) {
  applinks.status.details.editAction.soyTemplateName = 'applinks.status.details.editAction';
}


applinks.status.details.actionsWithCloseButton = function(opt_data, opt_ignored, opt_ijData) {
  opt_data = opt_data || {};
  return '' + applinks.status.details.actions({helpLinkKey: opt_data.helpLinkKey, sectionKey: opt_data.sectionKey, primaryActionButton: '' + applinks.status.details.closeAction(null, null, opt_ijData)}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.actionsWithCloseButton.soyTemplateName = 'applinks.status.details.actionsWithCloseButton';
}


applinks.status.details.actionsWithUpdateButton = function(opt_data, opt_ignored, opt_ijData) {
  opt_data = opt_data || {};
  return '' + applinks.status.details.actions({helpLinkKey: opt_data.helpLinkKey, sectionKey: opt_data.sectionKey, primaryActionButton: '' + applinks.status.details.updateAction(opt_data, null, opt_ijData)}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.actionsWithUpdateButton.soyTemplateName = 'applinks.status.details.actionsWithUpdateButton';
}


applinks.status.details.actionsWithEditButton = function(opt_data, opt_ignored, opt_ijData) {
  return '' + applinks.status.details.actions({helpLinkKey: opt_data.helpLinkKey, sectionKey: opt_data.sectionKey, primaryActionButton: '' + applinks.status.details.editAction(opt_data, null, opt_ijData)}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.actionsWithEditButton.soyTemplateName = 'applinks.status.details.actionsWithEditButton';
}


applinks.status.details.inlineHelpLinkStart = function(opt_data, opt_ignored, opt_ijData) {
  return '' + ((opt_data.sectionKey) ? '<a target="_blank" class="help-link" href="' + soy.$$escapeHtml(require('applinks/common/help-paths').getFullPath(opt_data.helpLinkKey,opt_data.sectionKey)) + '" data-help-link-key="' + soy.$$escapeHtml(opt_data.helpLinkKey) + '">' : '<a target="_blank" class="help-link" href="' + soy.$$escapeHtml(require('applinks/common/help-paths').getFullPath(opt_data.helpLinkKey,undefined)) + '" data-help-link-key="' + soy.$$escapeHtml(opt_data.helpLinkKey) + '">');
};
if (goog.DEBUG) {
  applinks.status.details.inlineHelpLinkStart.soyTemplateName = 'applinks.status.details.inlineHelpLinkStart';
}


applinks.status.details.errorDetails = function(opt_data, opt_ignored, opt_ijData) {
  return '' + ((opt_data.status.error.details) ? '<pre><code>' + soy.$$escapeHtml(opt_data.status.error.details) + '</code></pre>' : '');
};
if (goog.DEBUG) {
  applinks.status.details.errorDetails.soyTemplateName = 'applinks.status.details.errorDetails';
}


applinks.status.details.notificationContainer = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="applink-status-notification aui-message aui-message-error" data-applink-id="' + soy.$$escapeHtml(opt_data.status.link.id) + '">' + soy.$$filterNoAutoescape(opt_data.contents) + '</div>';
};
if (goog.DEBUG) {
  applinks.status.details.notificationContainer.soyTemplateName = 'applinks.status.details.notificationContainer';
}


applinks.status.details.detailsHeader = function(opt_data, opt_ignored, opt_ijData) {
  return '' + ((opt_ijData.isDialog) ? '<h2 class="applinks-status-dialog-title">' + soy.$$escapeHtml(opt_data.headerText) + '</h2>' : '<p class="title applink-status-notification-title"><strong>' + soy.$$escapeHtml(opt_data.headerText) + '</strong></p>');
};
if (goog.DEBUG) {
  applinks.status.details.detailsHeader.soyTemplateName = 'applinks.status.details.detailsHeader';
}


applinks.status.details.helpLink = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  if (opt_data.linkKey) {
    var helpUrl__soy98 = '' + ((opt_data.sectionKey) ? soy.$$escapeHtml(require('applinks/common/help-paths').getFullPath(opt_data.linkKey,opt_data.sectionKey)) : soy.$$escapeHtml(require('applinks/common/help-paths').getFullPath(opt_data.linkKey,undefined)));
    var troubleshootText__soy104 = '' + ((opt_data.textMode == 'full') ? soy.$$escapeHtml("Troubleshoot this problem") : soy.$$escapeHtml("Troubleshoot"));
    output += '<a title="' + soy.$$escapeHtml(troubleshootText__soy104) + '" href="' + soy.$$escapeHtml(helpUrl__soy98) + '" data-help-link-key="' + soy.$$escapeHtml(opt_data.linkKey) + '" target="_blank" class="aui-button ual-help-link help-link troubleshoot-link ' + soy.$$escapeHtml(opt_data.extraClasses) + ((! opt_data.style || opt_data.style == 'link') ? ' aui-button-link' : '') + '">' + soy.$$escapeHtml(troubleshootText__soy104) + '</a>';
  }
  return output;
};
if (goog.DEBUG) {
  applinks.status.details.helpLink.soyTemplateName = 'applinks.status.details.helpLink';
}


applinks.status.details.connection_refused = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("The remote application is not responding")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The connection to {0} was refused. \x3ca href\x3d\x22{1}\x22 target\x3d\x22_blank\x22\x3e{2}\x3c/a\x3e may be down or blocked by a firewall. Alternatively, the Application URL for the remote application may be incorrect or may have changed recently.",typeof (opt_data.status.link.rpcUrl) === 'number' ? opt_data.status.link.rpcUrl : soy.$$escapeHtml(opt_data.status.link.rpcUrl),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithEditButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.connectionrefused', sectionKey: 'connectionrefused', editUrl: opt_data.editUrl}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.connection_refused.soyTemplateName = 'applinks.status.details.connection_refused';
}


applinks.status.details.unknown_host = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Unable to reach the remote application")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We couldn\x27\x27t resolve the hostname at {0}. There may be a DNS configuration problem, or the Application URL for the remote application may be incorrect or may have changed recently.",typeof (opt_data.status.link.rpcUrl) === 'number' ? opt_data.status.link.rpcUrl : soy.$$escapeHtml(opt_data.status.link.rpcUrl)))) + '</p>' + applinks.status.details.actionsWithEditButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.unknownhost', sectionKey: 'unknownhost', editUrl: opt_data.editUrl}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.unknown_host.soyTemplateName = 'applinks.status.details.unknown_host';
}


applinks.status.details.oauth_problem = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("OAuth problem")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("There is an issue with the OAuth configuration of the connection to \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.errorDetails(opt_data, null, opt_ijData) + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.oauthproblem', sectionKey: 'commonerrors'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.oauth_problem.soyTemplateName = 'applinks.status.details.oauth_problem';
}


applinks.status.details.oauth_timestamp_refused = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("The system clocks are not synchronized")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("This server has a different system time from \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e, which prevents the applications from authenticating.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.oauthtimestamprefused', sectionKey: 'OAuthtimestamp'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.oauth_timestamp_refused.soyTemplateName = 'applinks.status.details.oauth_timestamp_refused';
}


applinks.status.details.oauth_signature_invalid = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Invalid OAuth signature")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We couldn\x27\x27t connect to \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e, possibly because that instance is behind a misconfigured proxy.",typeof (opt_data.status.link.displayUrl) === 'number' ? opt_data.status.link.displayUrl : soy.$$escapeHtml(opt_data.status.link.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.oauthsignatureinvalid', sectionKey: 'OAuthinvalidsig'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.oauth_signature_invalid.soyTemplateName = 'applinks.status.details.oauth_signature_invalid';
}


applinks.status.details.unexpected_response = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Unexpected response")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We received an unexpected response from \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e. If the remote application is behind a proxy, check that the application is operational. Troubleshoot this for other possible causes.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + ((opt_data.renderDetails) ? applinks.status.details.errorDetails(opt_data, null, opt_ijData) : '') + '<p>' + soy.$$escapeHtml("To see the full response content look at your application logs.") + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.unexpectedresponse', sectionKey: 'unexpectedresponse'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.unexpected_response.soyTemplateName = 'applinks.status.details.unexpected_response';
}


applinks.status.details.authLevelMismatchMessage = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  if (opt_data.direction.local != opt_data.direction.remote) {
    var impersonation__soy196 = "OAuth with impersonation";
    switch (opt_data.direction.local) {
      case 'disabled':
        output += (opt_data.direction.remote == 'oauth') ? '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The local {0} connection is disabled, however \x3ca href\x3d\x22{1}\x22 target\x3d\x22_blank\x22\x3e{2}\x3c/a\x3e uses {3}.",typeof (opt_data.directionText) === 'number' ? opt_data.directionText : soy.$$escapeHtml(opt_data.directionText),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.link.name) === 'number' ? opt_data.link.name : soy.$$escapeHtml(opt_data.link.name),typeof ('OAuth') === 'number' ? 'OAuth' : soy.$$escapeHtml('OAuth')))) + '</p>' : (opt_data.direction.remote == 'oauthWithImpersonation') ? '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The local {0} connection is disabled, however \x3ca href\x3d\x22{1}\x22 target\x3d\x22_blank\x22\x3e{2}\x3c/a\x3e uses {3}.",typeof (opt_data.directionText) === 'number' ? opt_data.directionText : soy.$$escapeHtml(opt_data.directionText),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.link.name) === 'number' ? opt_data.link.name : soy.$$escapeHtml(opt_data.link.name),typeof (impersonation__soy196) === 'number' ? impersonation__soy196 : soy.$$escapeHtml(impersonation__soy196)))) + '</p>' : '';
        break;
      case 'oauth':
        output += (opt_data.direction.remote == 'disabled') ? '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The local {0} connection uses {1}, however it\x27\x27s disabled on \x3ca href\x3d\x22{2}\x22 target\x3d\x22_blank\x22\x3e{3}\x3c/a\x3e.",typeof (opt_data.directionText) === 'number' ? opt_data.directionText : soy.$$escapeHtml(opt_data.directionText),typeof ('OAuth') === 'number' ? 'OAuth' : soy.$$escapeHtml('OAuth'),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.link.name) === 'number' ? opt_data.link.name : soy.$$escapeHtml(opt_data.link.name)))) + '</p>' : (opt_data.direction.remote == 'oauthWithImpersonation') ? '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The local {0} connection uses {1}, however \x3ca href\x3d\x22{2}\x22 target\x3d\x22_blank\x22\x3e{3}\x3c/a\x3e uses {4}.",typeof (opt_data.directionText) === 'number' ? opt_data.directionText : soy.$$escapeHtml(opt_data.directionText),typeof ('OAuth') === 'number' ? 'OAuth' : soy.$$escapeHtml('OAuth'),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.link.name) === 'number' ? opt_data.link.name : soy.$$escapeHtml(opt_data.link.name),typeof (impersonation__soy196) === 'number' ? impersonation__soy196 : soy.$$escapeHtml(impersonation__soy196)))) + '</p>' : '';
        break;
      case 'oauthWithImpersonation':
        output += (opt_data.direction.remote == 'disabled') ? '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The local {0} connection uses {1}, however it\x27\x27s disabled on \x3ca href\x3d\x22{2}\x22 target\x3d\x22_blank\x22\x3e{3}\x3c/a\x3e.",typeof (opt_data.directionText) === 'number' ? opt_data.directionText : soy.$$escapeHtml(opt_data.directionText),typeof (impersonation__soy196) === 'number' ? impersonation__soy196 : soy.$$escapeHtml(impersonation__soy196),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.link.name) === 'number' ? opt_data.link.name : soy.$$escapeHtml(opt_data.link.name)))) + '</p>' : (opt_data.direction.remote == 'oauth') ? '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The local {0} connection uses {1}, however \x3ca href\x3d\x22{2}\x22 target\x3d\x22_blank\x22\x3e{3}\x3c/a\x3e uses {4}.",typeof (opt_data.directionText) === 'number' ? opt_data.directionText : soy.$$escapeHtml(opt_data.directionText),typeof (impersonation__soy196) === 'number' ? impersonation__soy196 : soy.$$escapeHtml(impersonation__soy196),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.link.name) === 'number' ? opt_data.link.name : soy.$$escapeHtml(opt_data.link.name),typeof ('OAuth') === 'number' ? 'OAuth' : soy.$$escapeHtml('OAuth')))) + '</p>' : '';
        break;
    }
  }
  return output;
};
if (goog.DEBUG) {
  applinks.status.details.authLevelMismatchMessage.soyTemplateName = 'applinks.status.details.authLevelMismatchMessage';
}


applinks.status.details.auth_level_mismatch = function(opt_data, opt_ignored, opt_ijData) {
  return '' + applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("OAuth mismatch")}, null, opt_ijData) + applinks.status.details.authLevelMismatchMessage({link: opt_data.status.link, direction: opt_data.mismatches.incoming, directionText: "incoming", displayUrl: opt_data.displayUrl}, null, opt_ijData) + applinks.status.details.authLevelMismatchMessage({link: opt_data.status.link, direction: opt_data.mismatches.outgoing, directionText: "outgoing", displayUrl: opt_data.displayUrl}, null, opt_ijData) + '<p>' + soy.$$escapeHtml("You\x27ll need to edit each connection to make sure the authentication methods are the same.") + '</p>' + applinks.status.details.actionsWithEditButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.authlevelmismatch', sectionKey: 'OAuthmatch', editUrl: opt_data.editUrl}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.auth_level_mismatch.soyTemplateName = 'applinks.status.details.auth_level_mismatch';
}


applinks.status.details.unknown_error = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Network error")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We couldn\x27\x27t connect to {0} at {1}. This might have been caused by a network error or another configuration error.",typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name),typeof (opt_data.status.link.rpcUrl) === 'number' ? opt_data.status.link.rpcUrl : soy.$$escapeHtml(opt_data.status.link.rpcUrl)))) + '</p>' + applinks.status.details.errorDetails(opt_data, null, opt_ijData) + applinks.status.details.actionsWithEditButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.unknownerror', editUrl: opt_data.editUrl}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.unknown_error.soyTemplateName = 'applinks.status.details.unknown_error';
}


applinks.status.details.auth_level_unsupported = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  var oAuthHelpLinkStart__soy261 = '' + applinks.status.details.inlineHelpLinkStart({helpLinkKey: 'applinks.docs.configuring.auth.oauth', sectionKey: 'oauth'}, null, opt_ijData);
  var oAuthImpersonationHelpLinkStart__soy265 = '' + applinks.status.details.inlineHelpLinkStart({helpLinkKey: 'applinks.docs.configuring.auth.oauth', sectionKey: 'impersonation'}, null, opt_ijData);
  var helpLinkEnd__soy269 = '</a>';
  output += applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Unsupported OAuth level")}, null, opt_ijData) + '<p>' + soy.$$filterNoAutoescape(AJS.format("The current OAuth configuration prevents integrations from working. You need to update your configuration to {0}OAuth{1} or {2}OAuth with impersonation{3}.",oAuthHelpLinkStart__soy261,helpLinkEnd__soy269,oAuthImpersonationHelpLinkStart__soy265,helpLinkEnd__soy269)) + '</p>' + applinks.status.details.actionsWithEditButton({editActionText: "Update", editUrl: opt_data.editUrl, helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.authlevelunsupported', sectionKey: 'OAuthunsupported'}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  applinks.status.details.auth_level_unsupported.soyTemplateName = 'applinks.status.details.auth_level_unsupported';
}


applinks.status.details.ssl_untrusted = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("The remote certificate can\x27t be trusted")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e may be using a self-signed SSL certificate or a certificate that was issued by a certificate authority that isn\x27\x27t known locally.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.ssluntrusted', sectionKey: 'SSLnottrusted'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.ssl_untrusted.soyTemplateName = 'applinks.status.details.ssl_untrusted';
}


applinks.status.details.ssl_hostname_unmatched = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("The remote certificate doesn\x27t match the remote host name")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The SSL certificate used by \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e can\x27\x27t be trusted because the certificate\x27\x27s host name doesn\x27\x27t match the URL {2}.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name),typeof (opt_data.status.link.rpcUrl) === 'number' ? opt_data.status.link.rpcUrl : soy.$$escapeHtml(opt_data.status.link.rpcUrl)))) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.sslunmatched', sectionKey: 'SSLnotmatching'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.ssl_hostname_unmatched.soyTemplateName = 'applinks.status.details.ssl_hostname_unmatched';
}


applinks.status.details.ssl_unmatched = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Unable to verify remote certificate details")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The SSL certificate used by \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e can\x27\x27t be trusted because details inside the certificate can\x27\x27t be verified. Check that the remote certificate has the correct details.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.errorDetails(opt_data, null, opt_ijData) + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.sslunmatched', sectionKey: 'SSLnotmatching'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.ssl_unmatched.soyTemplateName = 'applinks.status.details.ssl_unmatched';
}


applinks.status.details.system_link = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Internal System Link")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("This is an internal link to a Cloud server, created automatically by the system. System internal links are read-only and cannot be edited.")) + '</p>' + applinks.status.details.actionsWithCloseButton(null, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.system_link.soyTemplateName = 'applinks.status.details.system_link';
}


applinks.status.details.generic_link = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Link to external third party")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("This is an application link to an external third party. We are unable to retrieve the status to third parties. If you are experiencing any problems with your connection ensure that your OAuth configuration is correct.")) + '</p>' + applinks.status.details.actionsWithCloseButton(null, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.generic_link.soyTemplateName = 'applinks.status.details.generic_link';
}


applinks.status.details.remote_version_incompatible = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Unable to retrieve status")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We\x27\x27re unable to determine the status of this link, because the version of {0} is a little too old. The link may actually be good. You can upgrade \x3ca href\x3d\x22{1}\x22 target\x3d\x22_blank\x22\x3e{0}\x3c/a\x3e to the latest version of {2} to get status and diagnostic capabilities.",typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name),typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.applinkType) === 'number' ? opt_data.applinkType : soy.$$escapeHtml(opt_data.applinkType)))) + '</p>' + applinks.status.details.actionsWithCloseButton(null, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.remote_version_incompatible.soyTemplateName = 'applinks.status.details.remote_version_incompatible';
}


applinks.status.details.non_atlassian = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Link to external third party")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("This is an application link to an external third party. We are unable to retrieve the status to third parties, so if you are experiencing any problems with your connection reach out to the third party directly.")) + '</p>' + applinks.status.details.actionsWithCloseButton(null, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.non_atlassian.soyTemplateName = 'applinks.status.details.non_atlassian';
}


applinks.status.details.no_remote_applink = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("No remote application link")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We can\x27\x27t connect with \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e  because a reciprocal application link is missing on that server. You\x27\x27ll need to delete and then re-create this application link.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithCloseButton(null, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.no_remote_applink.soyTemplateName = 'applinks.status.details.no_remote_applink';
}


applinks.status.details.no_outgoing_auth = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  var helpLinkStart__soy355 = '' + applinks.status.details.inlineHelpLinkStart({helpLinkKey: 'applinks.docs.configuring.auth.oauth'}, null, opt_ijData);
  var helpLinkEnd__soy358 = '</a>';
  output += applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("No outgoing authentication")}, null, opt_ijData) + '<p>' + soy.$$filterNoAutoescape(AJS.format("We can\x27\x27t display the status for this application link, because outgoing authentication is disabled. You can {0}enable outgoing authentication{1} to see the status.",helpLinkStart__soy355,helpLinkEnd__soy358)) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.configuring.auth.oauth'}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  applinks.status.details.no_outgoing_auth.soyTemplateName = 'applinks.status.details.no_outgoing_auth';
}


applinks.status.details.insufficient_remote_permission = function(opt_data, opt_ignored, opt_ijData) {
  var output = '' + applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Access denied")}, null, opt_ijData);
  if (opt_data.status.localAuthentication.outgoing.twoLoImpersonationEnabled) {
    output += '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We couldn\x27\x27t retrieve the status from the remote application because your user account doesn\x27\x27t have admin privileges on {0}.",typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("To see the status, ask for admin access for your account on \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.configuring.auth.oauth', sectionKey: 'accessdenied_oauthimpersonation'}, null, opt_ijData);
  } else {
    var startButton__soy384 = '<button type="button" class="aui-button aui-button-link inline-button status-insufficient-remote-permission" data-authorisation-uri="' + soy.$$escapeHtml(opt_data.status.error.authorisationUri) + '">';
    var endButton__soy388 = '</button>';
    output += '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("We couldn\x27\x27t retrieve the status from the remote application because you don\x27\x27t have admin privileges on {0}.",typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p><p>';
    var displayUrlEscaped__soy393 = '' + soy.$$escapeHtml(opt_data.displayUrl);
    var linkNameEscaped__soy395 = '' + soy.$$escapeHtml(opt_data.status.link.name);
    output += soy.$$filterNoAutoescape(AJS.format("To see the status, log out of \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e and then {2}authenticate{3} as an admin on {1}.",displayUrlEscaped__soy393,linkNameEscaped__soy395,startButton__soy384,endButton__soy388)) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.configuring.auth.oauth', sectionKey: 'accessdenied_oauth'}, null, opt_ijData);
  }
  return output;
};
if (goog.DEBUG) {
  applinks.status.details.insufficient_remote_permission.soyTemplateName = 'applinks.status.details.insufficient_remote_permission';
}


applinks.status.details.legacy_update = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Deprecated authentication type")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml("This application link uses either the Trusted Applications or Basic Access authentication type, both of which are deprecated.") + '</p><p>' + soy.$$escapeHtml("You should update this link to use OAuth authentication, the industry standard.") + '</p>' + applinks.status.details.actionsWithUpdateButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.migration', sectionKey: 'autoUpdate'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.legacy_update.soyTemplateName = 'applinks.status.details.legacy_update';
}


applinks.status.details.legacy_removal = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Deprecated authentication type")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml("As well as OAuth, this application link still uses either the Trusted Applications or Basic Access authentication type, both of which are deprecated.") + '</p><p>' + soy.$$escapeHtml("You should update this link to use OAuth authentication, the industry standard.") + '</p>' + applinks.status.details.actionsWithUpdateButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.migration', sectionKey: 'autoRemove'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.legacy_removal.soyTemplateName = 'applinks.status.details.legacy_removal';
}


applinks.status.details.manual_legacy_update = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Deprecated authentication type")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml("This application link uses either the Trusted Applications or Basic Access authentication type, both of which are deprecated.") + '</p><p>' + soy.$$escapeHtml("You should manually update this link to use OAuth authentication, the industry standard.") + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("You might be able to automatically update this link, if you obtain temporary sysadmin permissions on \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e and then refresh this page.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.migration', sectionKey: 'manualUpdate'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.manual_legacy_update.soyTemplateName = 'applinks.status.details.manual_legacy_update';
}


applinks.status.details.manual_legacy_removal = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Deprecated authentication type")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("This application link uses a deprecated authentication type.")) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("You should click \x3cb\x3eUpdate locally\x3c/b\x3e to move to OAuth authentication. Doing this will remove Trusted Applications authentication from this end of the link.")) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("You\x27\x27ll then need to manually remove Trusted Applications authentication from the \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e end of the link.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("You might be able to automatically update this link, if you obtain temporary sysadmin permissions on \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e and then refresh this page.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithUpdateButton({updateActionText: "Update locally", helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.migration', sectionKey: 'manualRemove'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.manual_legacy_removal.soyTemplateName = 'applinks.status.details.manual_legacy_removal';
}


applinks.status.details.manual_legacy_removal_with_old_edit = function(opt_data, opt_ignored, opt_ijData) {
  return applinks.status.details.detailsHeader({headerText: '' + soy.$$escapeHtml("Deprecated authentication type")}, null, opt_ijData) + '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("This application link uses a deprecated authentication type.")) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("You\x27\x27ll need to manually remove Trusted Applications authentication from the \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e end of the link.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("You might be able to automatically update this link, if you obtain temporary sysadmin permissions on \x3ca href\x3d{0} target\x3d\x22_blank\x22\x3e{1}\x3c/a\x3e and then refresh this page.",typeof (opt_data.displayUrl) === 'number' ? opt_data.displayUrl : soy.$$escapeHtml(opt_data.displayUrl),typeof (opt_data.status.link.name) === 'number' ? opt_data.status.link.name : soy.$$escapeHtml(opt_data.status.link.name)))) + '</p>' + applinks.status.details.actionsWithCloseButton({helpLinkKey: 'applinks.docs.diagnostics.troubleshoot.migration', sectionKey: 'manualOldEditRemove'}, null, opt_ijData);
};
if (goog.DEBUG) {
  applinks.status.details.manual_legacy_removal_with_old_edit.soyTemplateName = 'applinks.status.details.manual_legacy_removal_with_old_edit';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-jquery-tipsy', location = 'src/js-vendor/jquery/jquery.tipsy.js' */
("undefined"===typeof window?global:window).__a24ba4444f815d1bb1238bd3e691d1e5=function(){var b=jQuery,i=function(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},j=function(a,c){this.$element=b(a);this.options=c;this.enabled=!0;this.fixTitle()},k=0;j.prototype={show:function(){if(i(this.$element[0])){var a=this.getTitle();if(a&&this.enabled){var c=this.tip();c.find(".tipsy-inner")[this.options.html?"html":"text"](a);c[0].className="tipsy";c.remove().css({top:0,left:0,visibility:"hidden",
display:"block"}).appendTo(document.body);var d=this;this.options.hoverable&&c.hover(function(){d.hoverTooltip=!0},function(){"in"!=d.hoverState&&(d.hoverTooltip=!1,"manual"!=d.options.trigger&&d.$element.trigger("hover"==d.options.trigger?"mouseleave.tipsy":"blur.tipsy"))});this.options.className&&c.addClass("function"==typeof this.options.className?this.options.className.call(this.$element[0]):this.options.className);var a=b.extend({},this.$element.offset(),{width:this.$element[0].getBoundingClientRect().width,
height:this.$element[0].getBoundingClientRect().height}),e={},f=c[0].offsetWidth,h=c[0].offsetHeight,g="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0]):this.options.gravity;2===g.length&&(e.left="w"===g.charAt(1)?a.left+a.width/2-15:a.left+a.width/2-f+15);switch(g.charAt(0)){case "n":"undefined"===typeof e.left&&(e.left=a.left+a.width/2-f/2);e.top=a.top+a.height+this.options.offset;break;case "s":"undefined"===typeof e.left&&(e.left=a.left+a.width/2-f/2,c.css(e),
h=c[0].offsetHeight);e.top=a.top-h-this.options.offset;break;case "e":e.left=a.left-f-this.options.offset;e.top=a.top+a.height/2-h/2;break;case "w":e.left=a.left+a.width+this.options.offset,e.top=a.top+a.height/2-h/2}c.css(e).addClass("tipsy-"+g);c.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+g.charAt(0);this.options.fade?c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):c.css({visibility:"visible",opacity:this.options.opacity});
this.options.aria&&(a="tipsyuid"+k++,c.attr("id",a),this.$element.attr("aria-describedby",a))}}},destroy:function(){this.$element.removeData("tipsy");this.unbindHandlers();this.hide()},unbindHandlers:function(){this.options.live?b(this.$element.context).off(".tipsy"):this.$element.unbind(".tipsy")},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){b(this).remove()}):this.tip().remove();this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var a=
this.$element;if(a.attr("title")||"string"!=typeof a.attr("original-title"))a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,d=this.options;this.fixTitle();d=this.options;"string"==typeof d.title?a=b.attr("title"==d.title?"original-title":d.title):"function"==typeof d.title&&(a=d.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||d.fallback},tip:function(){this.$tip||(this.$tip=b('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>').attr("role",
"tooltip"),this.$tip.data("tipsy-pointee",this.$element[0]));return this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};b.fn.tipsy=function(a){function c(c){var d=b.data(c,"tipsy");d||(d=new j(c,b.fn.tipsy.elementOptions(c,a)),b.data(c,"tipsy",d));return d}function d(){var b=c(this);b.hoverState="in";0==a.delayIn?b.show():
(b.fixTitle(),setTimeout(function(){"in"==b.hoverState&&b.show()},a.delayIn))}function e(){var b=c(this);b.hoverState="out";0==a.delayOut?b.hide():setTimeout(function(){"out"==b.hoverState&&!b.hoverTooltip&&b.hide()},a.delayOut)}if(!0===a)return this.data("tipsy");if("string"==typeof a){var f=this.data("tipsy");if(f)f[a]();return this}a=b.extend({},b.fn.tipsy.defaults,a);a.hoverable&&(a.delayOut=a.delayOut||20);a.live||this.each(function(){c(this)});if("manual"!=a.trigger){var f="hover"==a.trigger?
"mouseenter.tipsy focus.tipsy":"focus.tipsy",h="hover"==a.trigger?"mouseleave.tipsy blur.tipsy":"blur.tipsy";if(a.live)b(this.context).on(f,this.selector,d).on(h,this.selector,e);else this.bind(f,d).bind(h,e)}return this};b.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:0.8,title:"title",trigger:"hover"};b.fn.tipsy.revalidate=function(){b(".tipsy").each(function(){var a=b.data(this,"tipsy-pointee");(!a||
!i(a))&&b(this).remove()})};b.fn.tipsy.elementOptions=function(a,c){return b.metadata?b.extend({},c,b(a).metadata()):c};b.fn.tipsy.autoNS=function(){return b(this).offset().top>b(document).scrollTop()+b(window).height()/2?"s":"n"};b.fn.tipsy.autoWE=function(){return b(this).offset().left>b(document).scrollLeft()+b(window).width()/2?"e":"w"};b.fn.tipsy.autoBounds=function(a,c){return function(){var d=c[0],e=1<c.length?c[1]:!1,f=b(document).scrollTop()+a,h=b(document).scrollLeft()+a,g=b(this);g.offset().top<
f&&(d="n");g.offset().left<h&&(e="w");b(window).width()+b(document).scrollLeft()-g.offset().left<a&&(e="e");b(window).height()+b(document).scrollTop()-g.offset().top<a&&(d="s");return d+(e?e:"")}};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-tipsy', location = 'src/js/aui/tipsy.js' */
("undefined"===typeof window?global:window).__91a8066d92a8341f0d81bc7b246889b6=function(){"use strict";__a24ba4444f815d1bb1238bd3e691d1e5;return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-tooltip', location = 'src/js/aui/tooltip.js' */
("undefined"===typeof window?global:window).__9736345f6947949dc28f91f6cd21cbe6=function(){function f(a,b,c){a.tipsy(c);"destroy"===c&&(b.live?(0,d.default)(a.context).off(".tipsy",a.selector):a.unbind(".tipsy"));return a}function g(a,b){a.tipsy(b);if(b&&b.hideOnClick&&("hover"===b.trigger||!b.trigger&&"hover"===a.tipsy.defaults.trigger)){var c=function(){(0,d.default)(this).tipsy("hide")};if(b.live)(0,d.default)(a.context).on("click.tipsy",a.selector,c);else a.bind("click.tipsy",c)}return a}"use strict";
var e=__bd7207540b95ff683caa1d3c0bfcc3d7,d=e&&e.__esModule?e:{"default":e};__a24ba4444f815d1bb1238bd3e691d1e5;d.default.fn.tooltip=function(a){var b=d.default.extend({},d.default.fn.tooltip.defaults,a);return b.live?("string"===typeof a?f(this,b,a):g(this,b),this):this.each(function(){var c=(0,d.default)(this);"string"===typeof a?f(c,b,a):g(c,b);return c})};d.default.fn.tooltip.defaults={opacity:1,offset:1,delayIn:500,hoverable:!0,hideOnClick:!0,aria:!0};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-backbone-backbone', location = 'src/js-vendor/backbone/backbone.js' */
("undefined"===typeof window?global:window).__ad983a4feaa36b28083059de7c56c7a4=function(){var o={exports:{}},m=o.exports,v={module:o,exports:m,underscore:__f97340202cf7ae2d8f4dc9fc2d3264af,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7,underscore:__f97340202cf7ae2d8f4dc9fc2d3264af,jquery:__bd7207540b95ff683caa1d3c0bfcc3d7},i;i=function(h,f,d){var i=("undefined"===typeof window?global:window).define,j,k,d=[d,f,h].filter(function(d){return"function"===typeof d})[0],f=[f,h,[]].filter(Array.isArray)[0];j=
d.apply(null,f.map(function(d){return v[d]}));k=typeof j;"function"===typeof i&&i("string"===typeof h?h:"__ad983a4feaa36b28083059de7c56c7a4",f,d);"string"===k?j=String(j):"number"===k?j=Number(j):"boolean"===k&&(j=Boolean(j));void 0!==j&&(m=o.exports=j)};i.amd=!0;var h=this,q=function(h,f,d,i){var h=this,j=h.Backbone,k=[],o=k.push,m=k.slice,q=k.splice;f.VERSION="1.0.0";f.$=i;f.noConflict=function(){h.Backbone=j;return this};f.emulateHTTP=!1;f.emulateJSON=!1;var l=f.Events={on:function(a,b,c){if(!s(this,
"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!s(this,"once",a,[b,c])||!b)return this;var e=this,g=d.once(function(){e.off(a,g);b.apply(this,arguments)});g._callback=b;return this.on(a,g,c)},off:function(a,b,c){var e,g,w,f,h,i,j,k;if(!this._events||!s(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;f=a?[a]:d.keys(this._events);h=0;for(i=f.length;h<
i;h++)if(a=f[h],w=this._events[a]){this._events[a]=e=[];if(b||c){j=0;for(k=w.length;j<k;j++)g=w[j],(b&&b!==g.callback&&b!==g.callback._callback||c&&c!==g.context)&&e.push(g)}e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=m.call(arguments,1);if(!s(this,"trigger",a,b))return this;var c=this._events[a],e=this._events.all;c&&x(c,b);e&&x(e,arguments);return this},stopListening:function(a,b,c){var e=this._listeners;if(!e)return this;var d=!b&&!c;"object"===
typeof b&&(c=this);a&&((e={})[a._listenerId]=a);for(var f in e)e[f].off(b,c,this),d&&delete this._listeners[f];return this}},r=/\s+/,s=function(a,b,c,e){if(!c)return!0;if("object"===typeof c){for(var d in c)a[b].apply(a,[d,c[d]].concat(e));return!1}if(r.test(c)){c=c.split(r);d=0;for(var f=c.length;d<f;d++)a[b].apply(a,[c[d]].concat(e));return!1}return!0},x=function(a,b){var c,e=-1,d=a.length,f=b[0],h=b[1],i=b[2];switch(b.length){case 0:for(;++e<d;)(c=a[e]).callback.call(c.ctx);break;case 1:for(;++e<
d;)(c=a[e]).callback.call(c.ctx,f);break;case 2:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,h);break;case 3:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,h,i);break;default:for(;++e<d;)(c=a[e]).callback.apply(c.ctx,b)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){l[b]=function(b,e,g){var f=this._listeners||(this._listeners={}),h=b._listenerId||(b._listenerId=d.uniqueId("l"));f[h]=b;"object"===typeof e&&(g=this);b[a](e,g,this);return this}});l.bind=l.on;l.unbind=l.off;d.extend(f,l);var p=
f.Model=function(a,b){var c,e=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};d.extend(this,d.pick(b,v));b.parse&&(e=this.parse(e,b)||{});if(c=d.result(this,"defaults"))e=d.defaults({},e,c);this.set(e,b);this.changed={};this.initialize.apply(this,arguments)},v=["url","urlRoot","collection"];d.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},sync:function(){return f.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var e,g,f,h,i,j,k;if(null==a)return this;"object"===typeof a?(g=a,c=b):(g={})[a]=b;c||(c={});if(!this._validate(g,c))return!1;f=c.unset;h=c.silent;a=[];i=this._changing;this._changing=!0;i||(this._previousAttributes=d.clone(this.attributes),this.changed={});k=this.attributes;j=this._previousAttributes;this.idAttribute in g&&(this.id=g[this.idAttribute]);
for(e in g)b=g[e],d.isEqual(k[e],b)||a.push(e),d.isEqual(j[e],b)?delete this.changed[e]:this.changed[e]=b,f?delete k[e]:k[e]=b;if(!h){a.length&&(this._pending=!0);b=0;for(e=a.length;b<e;b++)this.trigger("change:"+a[b],this,k[a[b]],c)}if(i)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=
void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,c=!1,e=this._changing?this._previousAttributes:this.attributes,g;for(g in a)if(!d.isEqual(e[g],b=a[g]))(c||(c={}))[g]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},
fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(e){if(!b.set(b.parse(e,a),a))return false;c&&c(b,e,a);b.trigger("sync",b,e,a)};t(this,a);return this.sync("read",this,a)},save:function(a,b,c){var e,g=this.attributes;null==a||"object"===typeof a?(e=a,c=b):(e={})[a]=b;if(e&&(!c||!c.wait)&&!this.set(e,c))return!1;c=d.extend({validate:!0},c);if(!this._validate(e,c))return!1;e&&c.wait&&(this.attributes=d.extend({},g,e));void 0===c.parse&&(c.parse=
!0);var f=this,h=c.success;c.success=function(a){f.attributes=g;var b=f.parse(a,c);c.wait&&(b=d.extend(e||{},b));if(d.isObject(b)&&!f.set(b,c))return false;h&&h(f,a,c);f.trigger("sync",f,a,c)};t(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=e);a=this.sync(a,this,c);e&&c.wait&&(this.attributes=g);return a},destroy:function(a){var a=a?d.clone(a):{},b=this,c=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&e();c&&
c(b,d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;t(this,a);var g=this.sync("delete",this,a);a.wait||e();return g},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||y();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},d.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=d.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,d.extend(b||{},{validationError:c}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){p.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.attributes);return d[a].apply(d,b)}});var u=f.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,d.extend({silent:!0},b))},A={add:!0,remove:!0,merge:!0},B={add:!0,merge:!1,remove:!1};d.extend(u.prototype,l,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return f.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.defaults(b||{},B))},remove:function(a,b){a=d.isArray(a)?
a.slice():[a];b||(b={});var c,e,g,f;c=0;for(e=a.length;c<e;c++)if(f=this.get(a[c]))delete this._byId[f.id],delete this._byId[f.cid],g=this.indexOf(f),this.models.splice(g,1),this.length--,b.silent||(b.index=g,f.trigger("remove",f,this,b)),this._removeReference(f);return this},set:function(a,b){b=d.defaults(b||{},A);b.parse&&(a=this.parse(a,b));d.isArray(a)||(a=a?[a]:[]);var c,e,g,f,h,i=b.at,j=this.comparator&&null==i&&!1!==b.sort,k=d.isString(this.comparator)?this.comparator:null,l=[],m=[],n={};c=
0;for(e=a.length;c<e;c++)if(g=this._prepareModel(a[c],b))(f=this.get(g))?(b.remove&&(n[f.cid]=!0),b.merge&&(f.set(g.attributes,b),j&&(!h&&f.hasChanged(k))&&(h=!0))):b.add&&(l.push(g),g.on("all",this._onModelEvent,this),this._byId[g.cid]=g,null!=g.id&&(this._byId[g.id]=g));if(b.remove){c=0;for(e=this.length;c<e;++c)n[(g=this.models[c]).cid]||m.push(g);m.length&&this.remove(m,b)}l.length&&(j&&(h=!0),this.length+=l.length,null!=i?q.apply(this.models,[i,0].concat(l)):o.apply(this.models,l));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(e=l.length;c<e;c++)(g=l[c]).trigger("add",g,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,e=this.models.length;c<e;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var e in a)if(a[e]!==b.get(e))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var e=d.isFunction(b)?b:function(a){return a.get(b)};return d.sortedIndex(this.models,a,e,c)},pluck:function(a){return d.invoke(this.models,"get",
a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(e){c[a.reset?"reset":"set"](e,a);b&&b(c,e,a);c.trigger("sync",c,e,a)};t(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,e=b.success;b.success=function(a,b,d){d.wait&&c.add(a,d);e&&e(a,b,d)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof p)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,e){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,e),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){u.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.models);return d[a].apply(d,b)}});
d.each(["groupBy","countBy","sortBy"],function(a){u.prototype[a]=function(b,c){var e=d.isFunction(b)?b:function(a){return a.get(b)};return d[a](this.models,e,c)}});var i=f.View=function(a){this.cid=d.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},C=/^(\S+)\s*(.*)$/,D="model collection el id attributes className tagName events".split(" ");d.extend(i.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof f.$?a:f.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];d.isFunction(c)||(c=this[a[b]]);if(c){var e=b.match(C),g=e[1],e=e[2],c=d.bind(c,this),g=g+(".delegateEvents"+this.cid);
if(""===e)this.$el.on(g,c);else this.$el.on(g,e,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=d.extend({},d.result(this,"options"),a));d.extend(this,d.pick(a,D));this.options=a},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var a=d.extend({},d.result(this,"attributes"));this.id&&(a.id=d.result(this,"id"));this.className&&(a["class"]=d.result(this,"className"));a=f.$("<"+
d.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});f.sync=function(a,b,c){var e=E[a];d.defaults(c||(c={}),{emulateHTTP:f.emulateHTTP,emulateJSON:f.emulateJSON});var g={type:e,dataType:"json"};c.url||(g.url=d.result(b,"url")||y());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))g.contentType="application/json",g.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(c.emulateHTTP&&("PUT"===
e||"DELETE"===e||"PATCH"===e)){g.type="POST";c.emulateJSON&&(g.data._method=e);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e);if(h)return h.apply(this,arguments)}}"GET"!==g.type&&!c.emulateJSON&&(g.processData=!1);if("PATCH"===g.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=f.ajax(d.extend(g,c));b.trigger("request",b,a,c);return a};var E=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};f.ajax=function(){return f.$.ajax.apply(f.$,arguments)};var k=f.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(k.prototype,l,{initialize:function(){},route:function(a,b,c){d.isRegExp(a)||(a=this._routeToRegExp(a));d.isFunction(b)&&(c=b,b="");c||(c=this[b]);var e=this;f.history.route(a,
function(d){d=e._extractParameters(a,d);c&&c.apply(e,d);e.trigger.apply(e,["route:"+b].concat(d));e.trigger("route",b,d);f.history.trigger("route",e,b,d)});return this},navigate:function(a,b){f.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,c){return c?a:"([^/]+)"}).replace(H,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return d.map(c,function(a){return a?decodeURIComponent(a):null})}});var n=f.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,J=/^\/+|\/+$/g,K=/msie [\w.]+/,L=/\/$/;n.started=!1;d.extend(n.prototype,l,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(L,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(z,"")},start:function(a){if(n.started)throw Error("Backbone.history has already been started");n.started=!0;this.options=d.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=K.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(J,"/");b&&this._wantsHashChange&&(this.iframe=f.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)f.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)f.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(z,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){f.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);n.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!n.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});f.history=new n;p.extend=u.extend=k.extend=i.extend=n.extend=function(a,b){var c=this,e;e=a&&d.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};d.extend(e,c,b);var f=function(){this.constructor=e};f.prototype=c.prototype;e.prototype=new f;a&&d.extend(e.prototype,a);e.__super__=c.prototype;return e};var y=function(){throw Error('A "url" property or function must be specified');},t=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return f};if("function"===typeof i&&i.amd)i(["underscore","jquery","exports"],function(i,f,d){h.Backbone=q(h,d,i,f)});else if("undefined"!==typeof m){i=__f97340202cf7ae2d8f4dc9fc2d3264af;
var r;try{r=__bd7207540b95ff683caa1d3c0bfcc3d7}catch(M){}q(h,m,i,r)}else h.Backbone=q(h,{},h._,h.jQuery||h.Zepto||h.ender||h.$);return o.exports}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-backbone', location = 'src/js/aui/backbone.js' */
("undefined"===typeof window?global:window).__fa226178965fdea8a278a23624815dae=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__ad983a4feaa36b28083059de7c56c7a4,a=a&&a.__esModule?a:{"default":a};window.Backbone||(window.Backbone=a.default);b.default=window.Backbone;return b=b["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib-backbone', location = 'applinks/internal/lib/backbone-amd.js' */
define("applinks/lib/backbone",function(){var a=window.Backbone;if(!a){throw"window.Backbone not defined, cannot load Backbone"}return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:model-applink', location = 'applinks/internal/model/applink.js' */
define("applinks/model/applink",["applinks/lib/lodash","applinks/lib/backbone","applinks/common/products","applinks/common/response-handlers","applinks/common/response-status","applinks/common/rest"],function(i,h,d,f,b,a){function e(k){return k&&k.expectedStatuses||[b.Family.SUCCESSFUL]}var g=a.V3.ApplinkData;var j=h.Model.extend({defaults:{statusLoaded:false},initialize:function(k,l){this.dataKeys=l&&l.dataKeys},url:function(){return a.V3.applink(this.id,this.dataKeys).getUrl()},destroy:function(k){var l=e(k);return h.Model.prototype.destroy.call(this,k).done(f.done(l)).fail(f.fail(l))},fetch:function(k){var l=e(k);return h.Model.prototype.fetch.call(this,k).done(f.done(l)).fail(f.fail(l))},save:function(k,l){var m=e(l);return h.Model.prototype.save.call(this,k,l).done(f.done(m)).fail(f.fail(m))},getAdminUrl:function(){return this.getData(g.CONFIG_URL)},getTypeName:function(){return d.getTypeName(this.get("type"))},getData:function(l){var k=this.get("data")||{};return l?k[l]:k},fetchStatus:function(){var k=this;k.set("statusLoaded",false);k.set("status",null);return a.V3.status(this.id).get().done(function(l){k.set("statusLoaded",true);k.set("status",l)})},makePrimary:function(l){var k=this.toServerJSON();k.primary=true;return this.save(k,i.extend({},l,{wait:true}))},toServerJSON:function(){var k=this.toJSON();delete k.status;delete k.statusLoaded;delete k.data;return k}});var c=h.Collection.extend({model:j,initialize:function(l,k){this.dataKeys=k&&k.dataKeys},url:function(){return a.V3.applinks(this.dataKeys).getUrl()},fetch:function(k){var l=e(k);return h.Collection.prototype.fetch.call(this,k).done(f.done(l)).fail(f.fail(l))}});return{Applink:j,Collection:c,DataKeys:g}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-v3-list', location = 'applinks/internal/feature/v3/list/feature-v3-list-views.js' */
define("applinks/feature/v3/list-views",["applinks/lib/lodash","applinks/lib/backbone","applinks/lib/aui","applinks/lib/jquery","applinks/lib/window","applinks/common/products","applinks/common/urls"],function(k,j,i,e,g,f,b){function h(){return g.location.search.indexOf("legacyEdit=true")>0}var d=k.memoize(h);var a=j.View.extend({template:applinks.feature.v3.list.templates,initialize:function(l){var m=l.model.toJSON();this.$el.html(this.template.row({applink:m,typeName:f.getTypeName(m.type),editUrl:b.Local.edit(m.id),includeLegacyEdit:d()}));this.setFirstLinkInDropdownAsActive()},render:function(){return this.$el.find("tr")},setFirstLinkInDropdownAsActive:function(){this.$el.find(".actions-dropdown-content").on({"aui-dropdown2-show":function(){e(this).find("a:first").addClass("active")},"aui-dropdown2-hide":function(){e(this).find("a").removeClass("active")}})}});var c=j.View.extend({template:applinks.feature.v3.list.templates,initialize:function(l){k.extend(this,l);this.$dialog=new i.Dialog({closeOnOutsideClick:true,height:"auto",width:620});this.$dialog.addHeader("Delete an application link");this.$dialog.addPanel(null,this.template.confirmationDialog());this.$dialog.addButton("Confirm",k.bind(this.onConfirm,this),"delete-confirm-button");this.$dialog.addLink("Cancel",k.bind(this.onCancel,this),"#")},onConfirm:function(l){this.trigger("confirm",this.id);this.onCancel(l)},onCancel:function(l){l.hide().remove()},show:function(){this.$dialog.show()}});return{Row:a,ConfirmDialog:c}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-v3-list', location = 'applinks/internal/feature/v3/list/feature-v3-list.js' */
define("applinks/feature/v3/list",["applinks/lib/lodash","applinks/lib/backbone","applinks/lib/jquery","applinks/lib/window","applinks/lib/aui","applinks/shim/applinks","applinks/common/events","applinks/common/rest","applinks/common/response-status","applinks/feature/status","applinks/feature/status/details","applinks/feature/oauth-dance","applinks/feature/v3/list-views","applinks/model/applink"],function(w,c,f,j,i,g,p,s,d,b,h,q,l,m){var e=false;var r="delete";var n="legacy-edit";var k="primary";var a="remote";var t=[r,n,k,a];var o=[m.DataKeys.APPLICATION_VERSION,m.DataKeys.ATLASSIAN,m.DataKeys.CONFIG_URL,m.DataKeys.ICON_URI,m.DataKeys.EDITABLE,m.DataKeys.V3_EDITABLE,m.DataKeys.WEB_ITEMS];function u(x){x.link=[{rel:"self",href:s.V1.applink(x.id).getUrl()}];x.typeId=x.type;x.hasIncoming=true;x.hasOutgoing=true;return x}function v(x){return f(x).parents("tr:first").attr("id")}return c.View.extend({template:applinks.feature.v3.list.templates,events:{"click .legacy-edit-button":"onLegacyEditClick"},initialize:function(x){w.extend(this,x);this.applinks=x.model||new m.Collection(null,{dataKeys:o});this.$el.html(this.template.table());this.registerEvents();this.fetchAllApplinks()},remove:function(){c.View.prototype.remove.call(this);this.unregisterEvents()},registerEvents:function(){this.listenTo(this.applinks,"remove destroy",this.onModelRemove).listenTo(this.applinks,"change:status",this.onStatusChange);f(document).on("click",".v3-applink-actions-dropdown li",w.bind(this.onActionsDropdownClick,this));new q(this.$el,b.AUTHENTICATE_LINK_SELECTOR).onSuccess(w.bind(this.onOAuthDanceSuccess,this)).initialize();p.on(p.ORPHANED_UPGRADE,this.fetchAllApplinks,this)},unregisterEvents:function(){f(document).off("click",".v3-applink-actions-dropdown li");p.off(p.ORPHANED_UPGRADE)},fetchAllApplinks:function(){this.getTable().removeClass("applinks-loaded");this.applinks.fetch({reset:true}).always(w.bind(this.filterAndSort,this),w.bind(this.onCollectionUpdate,this,true))},filterAndSort:function(){var x=this.applinks.chain().filter(function(y){return !y.get("system")||y.getData(m.DataKeys.ATLASSIAN)}).sortBy(function(y){return y.get("system")?1:0}).value();this.applinks.reset(x)},onStatusChange:function(y){var x=this.$el.find("#"+y.id+" td.status");x.empty();new b.View({applink:y.toJSON(),container:x});new h.Dialog(y);f(document).trigger(p.APPLINKS_UPDATED)},onModelRemove:function(x){h.removeDialog(x.id);if(this.applinks.isEmpty()){this.onCollectionUpdate()}else{var y=this.$el.find("tbody");this.removeTooltips(y);this.$el.find("#"+x.id).remove();f(document).trigger(p.APPLINKS_UPDATED);this.renderTooltips(y)}},onCollectionUpdate:function(x){this.populateTable();if(x){this.fetchStatus()}this.getTable().find(".in-progress .progress-spinner").spin();this.getTable().addClass("applinks-loaded");if(e){f(document).trigger(p.APPLINKS_UPDATED)}else{e=true;f(document).trigger(p.APPLINKS_LOADED)}},populateTable:function(){var A=document.createDocumentFragment(),z=this.getTable(),x=z.find("tbody"),y=this.getNoApplinksNotice();this.removeTooltips(x);this.applinks.each(function(B){A.appendChild(new l.Row({model:B}).render().get(0))});x.empty();if(A.childNodes.length>0){x.append(A);z.removeAttr("data-empty");z.removeAttr("hidden");y.attr("hidden","")}else{z.attr("data-empty","empty");z.attr("hidden","");y.removeAttr("hidden")}this.renderTooltips(x)},onOAuthDanceSuccess:function(y){var x=this.applinks.get(v(y));x&&x.fetchStatus()},onActionsDropdownClick:function(y){var x=f(y.target);var z=x.data("action");if(z&&(w.includes?w.includes:w.contains)(t,z)){y.preventDefault();var A=x.parents(".aui-dropdown2:first").data("id");switch(z){case r:this.confirmDelete(A);break;case n:this.legacyEdit(A);break;case k:this.makePrimary(A);break;case a:this.goToRemote(A);break}}},onLegacyEditClick:function(x){var y=v(x.target);this.legacyEdit(y)},confirmDelete:function(y){var x=new l.ConfirmDialog({id:y});x.on("confirm",this.deleteApplink,this);x.show()},deleteApplink:function(x){this.applinks.get(x).destroy({wait:true,expectedStatuses:[d.Family.SUCCESSFUL,d.NOT_FOUND]})},makePrimary:function(y){var x=this;this.applinks.get(y).makePrimary({success:w.bind(x.fetchAllApplinks,x)})},legacyEdit:function(z){g.UI.hideInfoBox();var x=u(this.applinks.get(z).toJSON());var y=w.bind(this.fetchAllApplinks,this);g.editAppLink(x,"undefined",false,y,y)},goToRemote:function(x){j.open(this.applinks.get(x).getAdminUrl())},fetchStatus:function(){this.applinks.each(function(x){x.fetchStatus()})},renderTooltips:function(x){f("body > .tipsy").remove();(x||this.$el).find("[data-title]").tooltip({className:"tipsy-left",title:"data-title",html:true});(x||this.$el).find("span.applinks-name").tooltip({className:"url-tipsy",gravity:"s",html:true,title:function(){return this.getAttribute("data-displayUrl")+"<br/>"+this.getAttribute("data-rpcUrl")}})},removeTooltips:function(x){(x||this.$el).find("[data-title]").attr("data-title","")},getTable:function(){return this.$el.find("#agent-table")},getNoApplinksNotice:function(){return this.$el.find("#v3-no-applinks-notice")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-v3-list', location = 'applinks/internal/feature/v3/list/feature-v3-list.soy' */
// This file was automatically generated from feature-v3-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.feature.v3.list.templates.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.feature == 'undefined') { applinks.feature = {}; }
if (typeof applinks.feature.v3 == 'undefined') { applinks.feature.v3 = {}; }
if (typeof applinks.feature.v3.list == 'undefined') { applinks.feature.v3.list = {}; }
if (typeof applinks.feature.v3.list.templates == 'undefined') { applinks.feature.v3.list.templates = {}; }


applinks.feature.v3.list.templates.table = function(opt_data, opt_ignored) {
  return '<div id="agent-table-dialog"></div><table id="agent-table" class="aui aui-table-interactive v3-applinks-list"  hidden=""><thead><tr><th class="application">' + soy.$$escapeHtml("Application") + '</th><th class="application-name"></th><th class="version">' + soy.$$escapeHtml("Version") + '</th><th class="status">' + soy.$$escapeHtml("Status") + '</th><th class="actions">' + soy.$$escapeHtml("Actions") + '</th></tr></thead><tbody>' + applinks.feature.v3.list.templates.rowStatic({content: "Loading application links...", showSpinner: true}) + '</tbody></table>' + applinks.feature.v3.list.templates.noApplinksNotice(null);
};
if (goog.DEBUG) {
  applinks.feature.v3.list.templates.table.soyTemplateName = 'applinks.feature.v3.list.templates.table';
}


applinks.feature.v3.list.templates.row = function(opt_data, opt_ignored) {
  return '<tr id="' + soy.$$escapeHtml(opt_data.applink.id) + '"><td class="application-icon">' + ((opt_data.applink.data.iconUri) ? '<img class="applinks-icon" src="' + soy.$$escapeHtml(opt_data.applink.data.iconUri) + '" alt="' + soy.$$escapeHtml(opt_data.applink.name) + '" width="20" height="20">' : '') + '</td><td class="id-badge trim"><div class="applinks-name-primary"><span data-rpcUrl="' + soy.$$escapeHtml("Application URL:") + ' ' + soy.$$escapeHtml(opt_data.applink.rpcUrl) + '" data-displayUrl="' + soy.$$escapeHtml("Display URL:") + ' ' + soy.$$escapeHtml(opt_data.applink.displayUrl) + '" class="applinks-name">' + ((opt_data.applink.name) ? soy.$$escapeHtml(opt_data.applink.name) : '') + '</span>' + ((opt_data.applink.primary) ? '<span class="aui-lozenge aui-lozenge-subtle primary-lozenge" data-title="' + soy.$$escapeHtml("Primary application link") + '">' + soy.$$escapeHtml("PRIMARY") + '</span>' : '') + '</div></td><td class="version"><div class="applinks-type-version"><span class="applinks-type">' + soy.$$escapeHtml(opt_data.typeName) + '</span>&nbsp;' + ((opt_data.applink.data.applicationVersion) ? '<span class="applinks-version">' + soy.$$escapeHtml(opt_data.applink.data.applicationVersion) + '</span>' : '') + '</div></td><td class="status"></td><td class="actions aui-compact-button-column">' + ((opt_data.applink.data.editable) ? (opt_data.applink.data.v3Editable) ? '<a class="edit aui-button icon-button aui-button-link" href=' + soy.$$escapeHtml(opt_data.editUrl) + '><span class="aui-icon aui-icon-small aui-iconfont-edit">' + soy.$$escapeHtml("Edit") + '</span></a>' : '<button class="edit legacy-edit-button aui-button icon-button aui-button-link"><span class="aui-icon aui-icon-small aui-iconfont-edit">' + soy.$$escapeHtml("Edit") + '</span></a>' : '') + applinks.feature.v3.list.templates.rowDropdown(opt_data) + '</td></tr>';
};
if (goog.DEBUG) {
  applinks.feature.v3.list.templates.row.soyTemplateName = 'applinks.feature.v3.list.templates.row';
}


applinks.feature.v3.list.templates.rowDropdown = function(opt_data, opt_ignored) {
  return '<button aria-owns="dropdown-button-' + soy.$$escapeHtml(opt_data.applink.id) + '" aria-haspopup="true" class="applinks-dropdown-button aui-button aui-button-compact aui-button-subtle aui-dropdown2-trigger aui-dropdown2-trigger-arrowless actions-menu"><span class="aui-icon aui-icon-small aui-iconfont-more"></span></button><div id="dropdown-button-' + soy.$$escapeHtml(opt_data.applink.id) + '" class="aui-dropdown2 aui-style-default actions-dropdown-content v3-applink-actions-dropdown" aria-hidden="true" data-dropdown2-alignment="right" data-id="' + soy.$$escapeHtml(opt_data.applink.id) + '">' + applinks.feature.v3.list.templates.pluggableLinks(opt_data) + '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">' + ((opt_data.applink.displayUrl) ? '<li><a href="#" data-action="remote">' + soy.$$escapeHtml("Go to remote") + '</a></li>' : '') + ((! opt_data.applink.primary) ? '<li><a href="#" data-action="primary">' + soy.$$escapeHtml("Make primary") + '</a></li>' : '') + '</ul></div>' + ((opt_data.applink.data.editable) ? '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">' + ((opt_data.includeLegacyEdit && opt_data.applink.data.v3Editable) ? '<li><a href="#" data-action="legacy-edit">' + soy.$$escapeHtml("Legacy Edit") + '</a></li>' : '') + '<li><a href="#" data-action="delete">' + soy.$$escapeHtml("Delete") + '</a></li></ul></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  applinks.feature.v3.list.templates.rowDropdown.soyTemplateName = 'applinks.feature.v3.list.templates.rowDropdown';
}


applinks.feature.v3.list.templates.rowStatic = function(opt_data, opt_ignored) {
  return '<tr class="static"><td class="actions" colspan="7">' + ((opt_data.showSpinner) ? '<span class="aui-icon aui-icon-wait"></span>' : '') + ' ' + soy.$$escapeHtml(opt_data.content) + '</td></tr>';
};
if (goog.DEBUG) {
  applinks.feature.v3.list.templates.rowStatic.soyTemplateName = 'applinks.feature.v3.list.templates.rowStatic';
}


applinks.feature.v3.list.templates.noApplinksNotice = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy115 = "" + '/download/resources/com.atlassian.applinks.applinks-plugin:feature-v3-list/images';
  output += '<div id="v3-no-applinks-notice" hidden=""><img class="applinks-icon" src="' + soy.$$escapeHtml(imgBaseUrl__soy115) + '/appslinks.svg" alt="" height="97" width="262"><h3>' + soy.$$escapeHtml("You haven\x27t linked any applications yet") + '</h3><p>' + soy.$$escapeHtml("To create an application link, enter the URL of the application you\x27re linking to and click Create new link. Once linked you\x27ll see the status of the connection.") + '</p></div>';
  return output;
};
if (goog.DEBUG) {
  applinks.feature.v3.list.templates.noApplinksNotice.soyTemplateName = 'applinks.feature.v3.list.templates.noApplinksNotice';
}


applinks.feature.v3.list.templates.confirmationDialog = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: "Warning", content: '<p>' + soy.$$escapeHtml("You are about to delete the selected application link. Deleting an application link will remove all per-user authentication tokens. If you re-add the application link to this server in the future, each of your users will be forced to authorize again. Are you sure you want to continue?") + '</p>'});
};
if (goog.DEBUG) {
  applinks.feature.v3.list.templates.confirmationDialog.soyTemplateName = 'applinks.feature.v3.list.templates.confirmationDialog';
}


applinks.feature.v3.list.templates.pluggableLinks = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.applink.data.webItems && opt_data.applink.data.webItems.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">';
    var webItemList134 = opt_data.applink.data.webItems;
    var webItemListLen134 = webItemList134.length;
    for (var webItemIndex134 = 0; webItemIndex134 < webItemListLen134; webItemIndex134++) {
      var webItemData134 = webItemList134[webItemIndex134];
      output += '<li><a href="' + soy.$$escapeHtml(webItemData134.url) + '" data-action="custom" ' + ((webItemData134.styleClass) ? 'class="' + soy.$$escapeHtml(webItemData134.styleClass) + '"' : '') + '>' + soy.$$escapeHtml(webItemData134.label) + '</a></li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  applinks.feature.v3.list.templates.pluggableLinks.soyTemplateName = 'applinks.feature.v3.list.templates.pluggableLinks';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-v3-onboarding', location = 'applinks/internal/feature/v3/v3-onboarding.soy' */
// This file was automatically generated from v3-onboarding.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace applinks.feature.onboarding.v3.
 */

if (typeof applinks == 'undefined') { var applinks = {}; }
if (typeof applinks.feature == 'undefined') { applinks.feature = {}; }
if (typeof applinks.feature.onboarding == 'undefined') { applinks.feature.onboarding = {}; }
if (typeof applinks.feature.onboarding.v3 == 'undefined') { applinks.feature.onboarding.v3 = {}; }


applinks.feature.onboarding.v3.learnMoreLink = function(opt_data, opt_ignored) {
  return '<a title="' + soy.$$escapeHtml("Learn more") + '" href="' + soy.$$escapeHtml(require('applinks/common/help-paths').getFullPath(opt_data.key,opt_data.anchor)) + '" target="_blank" class="help-link" data-help-link-key="' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml("Learn more") + '</a>';
};
if (goog.DEBUG) {
  applinks.feature.onboarding.v3.learnMoreLink.soyTemplateName = 'applinks.feature.onboarding.v3.learnMoreLink';
}


applinks.feature.onboarding.v3.onboardingDialog = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy13 = "" + '/download/resources/com.atlassian.applinks.applinks-plugin:feature-v3-onboarding/images';
  output += '<section role="dialog" id="v3-ui-feature-discovery-dialog" class="aui-layer aui-dialog2 aui-dialog2-xlarge" data-aui-focus-selector="#v3-onboarding-dialog-close-button" ><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("What\x27s new for application links") + '</h2></header><div class="aui-dialog2-content feature-discovery-dialog"><div class="aui-group feature-discovery-dialog" id="main-v3-ui-onboarding-panel"><div id="v3-onboarding-dialog-panel-1" class="aui-item v3-feature-discovery-panel" ><img class="v3-onboarding-image" class="simplified-diagnostics-image" src="' + soy.$$escapeHtml(imgBaseUrl__soy13) + '/error_illustration.svg" height="112"><h1>' + soy.$$escapeHtml("Built-in diagnostics") + '</h2><p/><div class="simplified-diagnostics-text">' + soy.$$escapeHtml("Get real-time integration status and focused diagnostics for when things stop working.") + '</div><br/>' + applinks.feature.onboarding.v3.learnMoreLink({key: 'applinks.docs.diagnostics', anchor: 'app_diagnostics'}) + '</div><div id="v3-onboarding-dialog-panel-2" class="aui-item v3-feature-discovery-panel"><img class="v3-onboarding-image" src="' + soy.$$escapeHtml(imgBaseUrl__soy13) + '/documentation_illustration.svg"  height="120"><h1>' + soy.$$escapeHtml("Better troubleshooting") + '</h2><p/><div>' + soy.$$escapeHtml("Find the information you need to quickly get your integrations working again.") + '</div><br/>' + applinks.feature.onboarding.v3.learnMoreLink({key: 'applinks.docs.troubleshoot.application.links'}) + '</div><div id="v3-onboarding-dialog-panel-3" class="aui-item v3-feature-discovery-panel"><img class="v3-onboarding-image" src="' + soy.$$escapeHtml(imgBaseUrl__soy13) + '/lock.svg" height="120"><h1>' + soy.$$escapeHtml("Simplified security") + '</h2><p/><div>' + soy.$$escapeHtml("New application links use industry-standard OAuth security, and old links are easily updated.") + '</div><br/>' + applinks.feature.onboarding.v3.learnMoreLink({key: 'applinks.docs.oauth.security'}) + '</div></div></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button id="v3-onboarding-dialog-close-button" class="aui-button aui-button-primary" autofocus>' + soy.$$escapeHtml("OK, got it") + '</button></div></footer></section>';
  return output;
};
if (goog.DEBUG) {
  applinks.feature.onboarding.v3.onboardingDialog.soyTemplateName = 'applinks.feature.onboarding.v3.onboardingDialog';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-v3-onboarding', location = 'applinks/internal/feature/v3/v3-onboarding.js' */
define("applinks/feature/v3/onboarding",["applinks/lib/aui","applinks/lib/jquery","applinks/lib/lodash","applinks/common/features","applinks/feature/creation","applinks/common/events","applinks/feature/v3/ui"],function(a,e,c,g,d,b,f){return{init:function(){e(document).ready(function(){if(!g.isDiscovered(g.V3_UI)&&!d.isInProgress()&&f.isOn()){e("body").append(applinks.feature.onboarding.v3.onboardingDialog());var h=a.dialog2("#v3-ui-feature-discovery-dialog");h.show();g.discover(g.V3_UI);e("#v3-onboarding-dialog-close-button").click(function(){h.hide();e(document).trigger(b.V3_ONBOARDING_FINISHED);e("body").attr("data-v3-onboarding-dialog-finished","finished")})}else{e(document).trigger(b.V3_ONBOARDING_FINISHED);e("body").attr("data-v3-onboarding-dialog-finished","finished")}e("body").attr("data-v3-onboarding-dialog-code-loaded","")})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-v3-feedback-collector', location = 'applinks/internal/feature/v3/v3-feedback-collector.js' */
define("applinks/feature/v3/feedback-collector",["applinks/lib/jquery","applinks/lib/window"],function(b,a){return{init:function(){var c=b("#applinks-feedback-button");b.ajax({url:"https://jira.atlassian.com/s/e0149ca37bab64d8016b53497b961ef3-T/en_UKdzil1d/65000/131/1.4.25/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=35047165",type:"get",cache:true,dataType:"script",success:d});function d(){a.ATL_JQ_PAGE_PROPS=b.extend(a.ATL_JQ_PAGE_PROPS,{"35047165":{triggerFunction:function(e){c.click(function(f){f.preventDefault();e()})}}});b("#applinks-feedback-button").show()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:page-v3', location = 'applinks/internal/page/v3/page-v3.js' */
define("applinks/page/v3",["applinks/lib/jquery","applinks/lib/backbone","applinks/common/events","applinks/common/i18n","applinks/common/initializer","applinks/feature/bitbucket-rebrand","applinks/feature/help-link/analytics","applinks/feature/v3/list","applinks/feature/v3/onboarding","applinks/feature/v3/feedback-collector"],function(e,i,k,c,a,b,g,j,d,h){var f=i.View.extend({initialize:function(){this.applinksList=new j({el:this.$el.find(".content")})}});return{init:function(){new f({el:e("#ual")});a.init(b,g,h,d)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/aui.soy' */
// This file was automatically generated from aui.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.renderExtraAttributes = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.extraAttributes) {
    if (Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]') {
      var attrList7 = soy.$$getMapKeys(opt_data.extraAttributes);
      var attrListLen7 = attrList7.length;
      for (var attrIndex7 = 0; attrIndex7 < attrListLen7; attrIndex7++) {
        var attrData7 = attrList7[attrIndex7];
        output += ' ' + soy.$$escapeHtml(attrData7) + '="' + soy.$$escapeHtml(opt_data.extraAttributes[attrData7]) + '"';
      }
    } else {
      output += ' ' + soy.$$filterNoAutoescape(opt_data.extraAttributes);
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.renderExtraAttributes.soyTemplateName = 'aui.renderExtraAttributes';
}


aui.renderExtraClasses = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.extraClasses) {
    if ((opt_data.extraClasses) instanceof Array) {
      var classList23 = opt_data.extraClasses;
      var classListLen23 = classList23.length;
      for (var classIndex23 = 0; classIndex23 < classListLen23; classIndex23++) {
        var classData23 = classList23[classIndex23];
        output += ' ' + soy.$$escapeHtml(classData23);
      }
    } else {
      output += ' ' + soy.$$escapeHtml(opt_data.extraClasses);
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.renderExtraClasses.soyTemplateName = 'aui.renderExtraClasses';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/badges.soy' */
// This file was automatically generated from badges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.badges.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.badges == 'undefined') { aui.badges = {}; }


aui.badges.badge = function(opt_data, opt_ignored) {
  return '<aui-badge' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</aui-badge>';
};
if (goog.DEBUG) {
  aui.badges.badge.soyTemplateName = 'aui.badges.badge';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/buttons.soy' */
// This file was automatically generated from buttons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.buttons.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.buttons == 'undefined') { aui.buttons = {}; }


aui.buttons.button = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.href || opt_data.href == '') {
    output += '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + aui.buttons.buttonAttributes(soy.$$augmentMap(opt_data, {tagName: 'a'})) + '>' + aui.buttons.buttonIcon(opt_data) + ((opt_data.hasLabel) ? '<span class="aui-button-label">' : '') + soy.$$escapeHtml(opt_data.text) + ((opt_data.hasLabel) ? '</span>' : '') + '</a>';
  } else if (opt_data.tagName == 'input') {
    output += '<input type="' + soy.$$escapeHtml(opt_data.inputType ? opt_data.inputType : 'button') + '" ' + aui.buttons.buttonAttributes(opt_data) + ' value="' + soy.$$escapeHtml(opt_data.text) + '" />';
  } else {
    var theTagName__soy29 = opt_data.tagName ? opt_data.tagName : 'button';
    output += '<' + soy.$$escapeHtml(theTagName__soy29) + aui.buttons.buttonAttributes(soy.$$augmentMap(opt_data, {tagName: theTagName__soy29})) + '>' + aui.buttons.buttonIcon(opt_data) + ((opt_data.hasLabel) ? '<span class="aui-button-label">' : '') + soy.$$escapeHtml(opt_data.text) + ((opt_data.hasLabel) ? '</span>' : '') + '</' + soy.$$escapeHtml(theTagName__soy29) + '>';
  }
  return output;
};
if (goog.DEBUG) {
  aui.buttons.button.soyTemplateName = 'aui.buttons.button';
}


aui.buttons.buttons = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-buttons' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.buttons.buttons.soyTemplateName = 'aui.buttons.buttons';
}


aui.buttons.buttonAttributes = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-button' + ((opt_data.splitButtonType == 'main') ? ' aui-button-split-main' : '') + ((opt_data.dropdown2Target) ? ' aui-dropdown2-trigger' + ((opt_data.splitButtonType == 'more') ? ' aui-button-split-more' : '') : '');
  switch (opt_data.type) {
    case 'primary':
      output += ' aui-button-primary';
      break;
    case 'link':
      output += ' aui-button-link';
      break;
    case 'subtle':
      output += ' aui-button-subtle';
      break;
    case 'text':
      output += ' aui-button-text';
      break;
  }
  output += aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.isPressed) ? ' aria-pressed="' + soy.$$escapeHtml(opt_data.isPressed) + '"' : '') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' + ((opt_data.isDisabled == true) ? (opt_data.tagName == 'button' || opt_data.tagName == 'input') ? ' disabled="disabled" ' : '' : '') : '') + ((opt_data.dropdown2Target) ? ' aria-owns="' + soy.$$escapeHtml(opt_data.dropdown2Target) + '" aria-haspopup="true"' : '') + ((opt_data.tagName == 'a') ? ' tabindex="0"' : '');
  return output;
};
if (goog.DEBUG) {
  aui.buttons.buttonAttributes.soyTemplateName = 'aui.buttons.buttonAttributes';
}


aui.buttons.buttonIcon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.iconType) ? '<span class="' + ((opt_data.iconType == 'aui') ? 'aui-icon' : '') + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) + ' ' : '') + '</span>' : '');
};
if (goog.DEBUG) {
  aui.buttons.buttonIcon.soyTemplateName = 'aui.buttons.buttonIcon';
}


aui.buttons.splitButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data.splitButtonMain, {splitButtonType: 'main'})) + aui.buttons.button(soy.$$augmentMap(opt_data.splitButtonMore, {splitButtonType: 'more'}));
};
if (goog.DEBUG) {
  aui.buttons.splitButton.soyTemplateName = 'aui.buttons.splitButton';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/dropdown.soy' */
// This file was automatically generated from dropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dropdown.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dropdown == 'undefined') { aui.dropdown = {}; }


aui.dropdown.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<a' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dd-trigger' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><span class="dropdown-text">' + ((opt_data.accessibilityText) ? soy.$$escapeHtml(opt_data.accessibilityText) : '') + '</span>' + ((! (opt_data.showIcon == false)) ? '<span class="icon icon-dropdown"></span>' : '') + '</a>';
};
if (goog.DEBUG) {
  aui.dropdown.trigger.soyTemplateName = 'aui.dropdown.trigger';
}


aui.dropdown.menu = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'ul') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown hidden' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'ul') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.menu.soyTemplateName = 'aui.dropdown.menu';
}


aui.dropdown.parent = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dd-parent' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.parent.soyTemplateName = 'aui.dropdown.parent';
}


aui.dropdown.item = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'li') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="dropdown-item' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a href="' + soy.$$escapeHtml(opt_data.url ? opt_data.url : '#') + '">' + soy.$$escapeHtml(opt_data.text) + '</a></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'li') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.item.soyTemplateName = 'aui.dropdown.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/dropdown2.soy' */
// This file was automatically generated from dropdown2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dropdown2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dropdown2 == 'undefined') { aui.dropdown2 = {}; }


aui.dropdown2.dropdown2 = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.trigger(soy.$$augmentMap(opt_data.trigger, {menu: opt_data.menu})) + aui.dropdown2.contents(opt_data.menu);
};
if (goog.DEBUG) {
  aui.dropdown2.dropdown2.soyTemplateName = 'aui.dropdown2.dropdown2';
}


aui.dropdown2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {extraClasses: 'aui-dropdown2-trigger' + aui.renderExtraClasses(opt_data)}));
};
if (goog.DEBUG) {
  aui.dropdown2.trigger.soyTemplateName = 'aui.dropdown2.trigger';
}


aui.dropdown2.contents = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2' + aui.renderExtraClasses(opt_data) + '" role="menu" aria-hidden="true"' + aui.renderExtraAttributes(opt_data) + '><div role="application">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div></div>';
};
if (goog.DEBUG) {
  aui.dropdown2.contents.soyTemplateName = 'aui.dropdown2.contents';
}


aui.dropdown2.section = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.label) ? '<strong role="presentation" class="aui-dropdown2-heading">' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.dropdown2.section.soyTemplateName = 'aui.dropdown2.section';
}


aui.dropdown2.itemGroup = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' role="presentation" class="aui-dropdown2-section' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.label) ? '<strong role="presentation" class="aui-dropdown2-heading">' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<div role="group"' + ((opt_data.label) ? ' aria-label="' + soy.$$escapeHtml(opt_data.label) + '"' : '') + '>' + aui.dropdown2.itemList(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  aui.dropdown2.itemGroup.soyTemplateName = 'aui.dropdown2.itemGroup';
}


aui.dropdown2.itemList = function(opt_data, opt_ignored) {
  var output = '<ul' + ((opt_data.isTruncated) ? ' class="aui-list-truncate"' : '') + ' role="presentation">';
  var itemList76 = opt_data.items;
  var itemListLen76 = itemList76.length;
  for (var itemIndex76 = 0; itemIndex76 < itemListLen76; itemIndex76++) {
    var itemData76 = itemList76[itemIndex76];
    output += '<li ' + ((itemData76.isHidden) ? 'class="aui-dropdown2-hidden" aria-hidden="true"' : '') + ' role="presentation">';
    switch (itemData76.itemType) {
      case 'checkbox':
        output += aui.dropdown2.menuCheckbox(itemData76);
        break;
      case 'radio':
        output += aui.dropdown2.menuRadio(itemData76);
        break;
      default:
        output += aui.dropdown2.menuLink(itemData76);
    }
    output += '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  aui.dropdown2.itemList.soyTemplateName = 'aui.dropdown2.itemList';
}


aui.dropdown2.menuLink = function(opt_data, opt_ignored) {
  return '<a role="menuitem" tabindex="-1" class="' + aui.renderExtraClasses(opt_data) + ((opt_data.submenuTarget) ? ' aui-dropdown2-sub-trigger' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + ((opt_data.submenuTarget) ? ' aria-controls="' + soy.$$escapeHtml(opt_data.submenuTarget) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuLink.soyTemplateName = 'aui.dropdown2.menuLink';
}


aui.dropdown2.menuCheckbox = function(opt_data, opt_ignored) {
  return '<span role="menuitemcheckbox" tabindex="-1" class="aui-dropdown2-checkbox' + ((opt_data.isInteractive) ? ' aui-dropdown2-interactive' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + ((opt_data.isChecked) ? ' aui-dropdown2-checked' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isChecked) ? ' aria-checked="' + soy.$$escapeHtml(opt_data.isChecked) + '"' : ' aria-checked="false"') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuCheckbox.soyTemplateName = 'aui.dropdown2.menuCheckbox';
}


aui.dropdown2.menuRadio = function(opt_data, opt_ignored) {
  return '<span role="menuitemradio" tabindex="-1" class="aui-dropdown2-radio' + ((opt_data.isInteractive) ? ' aui-dropdown2-interactive' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + ((opt_data.isChecked) ? ' aui-dropdown2-checked' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isChecked) ? ' aria-checked="' + soy.$$escapeHtml(opt_data.isChecked) + '"' : ' aria-checked="false"') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuRadio.soyTemplateName = 'aui.dropdown2.menuRadio';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/form.soy' */
// This file was automatically generated from form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.form.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.form == 'undefined') { aui.form = {}; }


aui.form.form = function(opt_data, opt_ignored) {
  return '<form' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui' + ((opt_data.isUnsectioned) ? ' unsectioned' : '') + ((opt_data.isLongLabels) ? ' long-label' : '') + ((opt_data.isTopLabels) ? ' top-label' : '') + aui.renderExtraClasses(opt_data) + '" action="' + soy.$$escapeHtml(opt_data.action) + '" method="' + soy.$$escapeHtml(opt_data.method ? opt_data.method : 'post') + '"' + ((opt_data.enctype) ? ' enctype="' + soy.$$escapeHtml(opt_data.enctype) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</form>';
};
if (goog.DEBUG) {
  aui.form.form.soyTemplateName = 'aui.form.form';
}


aui.form.formDescription = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.form.formDescription.soyTemplateName = 'aui.form.formDescription';
}


aui.form.fieldset = function(opt_data, opt_ignored) {
  var output = '';
  var hasClass__soy51 = opt_data.isInline || opt_data.isDateSelect || opt_data.isGroup || opt_data.extraClasses;
  output += '<fieldset' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((hasClass__soy51) ? ' class="' + soy.$$escapeHtml(opt_data.isInline ? 'inline' : opt_data.isDateSelect ? 'date-select' : opt_data.isGroup ? 'group' : '') + aui.renderExtraClasses(opt_data) + '"' : '') + aui.renderExtraAttributes(opt_data) + '><legend><span>' + soy.$$filterNoAutoescape(opt_data.legendContent) + '</span></legend>' + soy.$$filterNoAutoescape(opt_data.content) + '</fieldset>';
  return output;
};
if (goog.DEBUG) {
  aui.form.fieldset.soyTemplateName = 'aui.form.fieldset';
}


aui.form.fieldGroup = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldGroup.soyTemplateName = 'aui.form.fieldGroup';
}


aui.form.buttons = function(opt_data, opt_ignored) {
  return '<div class="buttons-container' + ((opt_data.alignment) ? ' ' + soy.$$escapeHtml(opt_data.alignment) : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><div class="buttons">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  aui.form.buttons.soyTemplateName = 'aui.form.buttons';
}


aui.form.label = function(opt_data, opt_ignored) {
  return '<label' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.forField) ? ' for="' + soy.$$escapeHtml(opt_data.forField) + '"' : '') + ((opt_data.extraClasses) ? ' class="' + aui.renderExtraClasses(opt_data) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label>';
};
if (goog.DEBUG) {
  aui.form.label.soyTemplateName = 'aui.form.label';
}


aui.form.input = function(opt_data, opt_ignored) {
  var output = '';
  var baseType__soy126 = '';
  switch (opt_data.type) {
    case 'password':
    case 'email':
    case 'url':
    case 'tel':
    case 'search':
      baseType__soy126 += 'text';
      break;
    case 'submit':
    case 'reset':
      baseType__soy126 += 'button';
      break;
    default:
      baseType__soy126 += soy.$$escapeHtml(opt_data.type);
  }
  output += '<input class="' + soy.$$escapeHtml(baseType__soy126) + aui.renderExtraClasses(opt_data) + ((opt_data.icon && baseType__soy126 == 'text') ? ' aui-field-has-icon' : '') + '" type="' + soy.$$escapeHtml(opt_data.type) + '" name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.value) ? ' value="' + soy.$$escapeHtml(opt_data.value) + '"' : '') + (((opt_data.type == 'checkbox' || opt_data.type == 'radio') && opt_data.isChecked) ? ' checked="checked"' : '') + ((baseType__soy126 == 'text' && opt_data.type != 'password' && opt_data.maxLength) ? ' maxlength="' + soy.$$escapeHtml(opt_data.maxLength) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.type != 'password' && opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.placeholderText) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholderText) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '/>' + ((opt_data.icon && baseType__soy126 == 'text') ? aui.icons.icon({icon: opt_data.icon, useIconFont: true, size: 'small'}) : '');
  return output;
};
if (goog.DEBUG) {
  aui.form.input.soyTemplateName = 'aui.form.input';
}


aui.form.renderValidationArguments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.validationArguments) {
    var argumentList203 = soy.$$getMapKeys(opt_data.validationArguments);
    var argumentListLen203 = argumentList203.length;
    for (var argumentIndex203 = 0; argumentIndex203 < argumentListLen203; argumentIndex203++) {
      var argumentData203 = argumentList203[argumentIndex203];
      output += (argumentData203 == 'required' || argumentData203 == 'pattern' || argumentData203 == 'min' || argumentData203 == 'max' || argumentData203 == 'minlength' || argumentData203 == 'maxlength') ? ' ' + soy.$$escapeHtml(argumentData203) + '="' + soy.$$escapeHtml(opt_data.validationArguments[argumentData203]) + '"' : ' ' + soy.$$escapeHtml('data-aui-validation-' + argumentData203) + '="' + soy.$$escapeHtml(opt_data.validationArguments[argumentData203]) + '"';
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.renderValidationArguments.soyTemplateName = 'aui.form.renderValidationArguments';
}


aui.form.renderTooltipArguments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.tooltipArguments) {
    var argumentList221 = soy.$$getMapKeys(opt_data.tooltipArguments);
    var argumentListLen221 = argumentList221.length;
    for (var argumentIndex221 = 0; argumentIndex221 < argumentListLen221; argumentIndex221++) {
      var argumentData221 = argumentList221[argumentIndex221];
      output += ' ' + soy.$$escapeHtml('data-aui-notification-' + argumentData221) + '="' + soy.$$escapeHtml(opt_data.tooltipArguments[argumentData221]) + '"';
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.renderTooltipArguments.soyTemplateName = 'aui.form.renderTooltipArguments';
}


aui.form.renderInfoMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.infoMessage) ? ' data-aui-notification-info="' + soy.$$escapeHtml(opt_data.infoMessage) + '"' : '');
};
if (goog.DEBUG) {
  aui.form.renderInfoMessage.soyTemplateName = 'aui.form.renderInfoMessage';
}


aui.form.renderFieldComponentAttribute = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.infoMessage) ? ' data-aui-notification-field' : '') + ((opt_data.validationArguments) ? ' data-aui-validation-field' : '');
};
if (goog.DEBUG) {
  aui.form.renderFieldComponentAttribute.soyTemplateName = 'aui.form.renderFieldComponentAttribute';
}


aui.form.submit = function(opt_data, opt_ignored) {
  return '' + aui.form.button(soy.$$augmentMap(opt_data, {tagName: 'input', inputType: 'submit'}));
};
if (goog.DEBUG) {
  aui.form.submit.soyTemplateName = 'aui.form.submit';
}


aui.form.button = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data, {extraClasses: opt_data.extraClasses, extraAttributes: '' + ((opt_data.name) ? 'name="' + soy.$$escapeHtml(opt_data.name) + '"' : '') + aui.renderExtraAttributes(opt_data)}));
};
if (goog.DEBUG) {
  aui.form.button.soyTemplateName = 'aui.form.button';
}


aui.form.linkButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data, {tagName: 'a', type: 'link', href: opt_data.href ? opt_data.href : opt_data.url, extraClasses: 'cancel' + aui.renderExtraClasses(opt_data), extraAttributes: '' + ((opt_data.name) ? 'name="' + soy.$$escapeHtml(opt_data.name) + '"' : '') + aui.renderExtraAttributes(opt_data)}));
};
if (goog.DEBUG) {
  aui.form.linkButton.soyTemplateName = 'aui.form.linkButton';
}


aui.form.textarea = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<textarea name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="textarea' + aui.renderExtraClasses(opt_data) + ' ' + ((opt_data.icon) ? 'aui-field-has-icon' : '') + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.rows) ? ' rows="' + soy.$$escapeHtml(opt_data.rows) + '"' : '') + ((opt_data.cols) ? ' cols="' + soy.$$escapeHtml(opt_data.cols) + '"' : '') + ((opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + ((opt_data.placeholderText) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholderText) + '"' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '>' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '</textarea>' + ((opt_data.icon) ? aui.icons.icon({icon: opt_data.icon, useIconFont: true, size: 'small'}) : '');
};
if (goog.DEBUG) {
  aui.form.textarea.soyTemplateName = 'aui.form.textarea';
}


aui.form.select = function(opt_data, opt_ignored) {
  var output = '<select' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'multi-select' : 'select') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + ((opt_data.isMultiple) ? ' multiple' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '>' + ((opt_data.defaultOption) ? aui.form.optionOrOptgroup(soy.$$augmentMap(opt_data.defaultOption, {defaultValue: opt_data.value})) : '');
  var optionList379 = opt_data.options;
  var optionListLen379 = optionList379.length;
  for (var optionIndex379 = 0; optionIndex379 < optionListLen379; optionIndex379++) {
    var optionData379 = optionList379[optionIndex379];
    output += aui.form.optionOrOptgroup(soy.$$augmentMap(optionData379, {defaultValue: opt_data.value}));
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  aui.form.select.soyTemplateName = 'aui.form.select';
}


aui.form.optionOrOptgroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.options) {
    output += '<optgroup label="' + soy.$$escapeHtml(opt_data.text) + '"' + ((opt_data.disabled) ? ' disabled' : '') + '>';
    var optionList394 = opt_data.options;
    var optionListLen394 = optionList394.length;
    for (var optionIndex394 = 0; optionIndex394 < optionListLen394; optionIndex394++) {
      var optionData394 = optionList394[optionIndex394];
      output += aui.form.optionOrOptgroup(soy.$$augmentMap(optionData394, {defaultValue: opt_data.defaultValue}));
    }
    output += '</optgroup>';
  } else {
    output += '<option value="' + soy.$$escapeHtml(opt_data.value) + '"' + ((opt_data.selected || opt_data.defaultValue == opt_data.value) ? ' selected' : '') + ((opt_data.disabled) ? ' disabled' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.optionOrOptgroup.soyTemplateName = 'aui.form.optionOrOptgroup';
}


aui.form.value = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-value' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</span>';
};
if (goog.DEBUG) {
  aui.form.value.soyTemplateName = 'aui.form.value';
}


aui.form.field = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var isCheckboxOrRadio__soy428 = opt_data.type == 'checkbox' || opt_data.type == 'radio';
  var fieldWidthClass__soy429 = opt_data.fieldWidth ? opt_data.fieldWidth + '-field ' : '';
  var fieldClasses__soy430 = fieldWidthClass__soy429 + (opt_data.extraFieldClasses ? opt_data.extraFieldClasses : '');
  output += '<div class="' + ((isCheckboxOrRadio__soy428) ? soy.$$escapeHtml(opt_data.type) : 'field-group') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.labelContent && ! isCheckboxOrRadio__soy428) ? aui.form.label({forField: opt_data.id, isRequired: opt_data.isRequired, content: opt_data.labelContent}) : '');
  switch (opt_data.type) {
    case 'textarea':
      output += aui.form.textarea({id: opt_data.id, name: opt_data.name, value: opt_data.value, rows: opt_data.rows, cols: opt_data.cols, autocomplete: opt_data.autocomplete, placeholderText: opt_data.placeholderText, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy430, icon: opt_data.icon, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
    case 'select':
      output += aui.form.select({id: opt_data.id, name: opt_data.name, value: opt_data.value, options: opt_data.options, isMultiple: opt_data.isMultiple, size: opt_data.size, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy430, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
    case 'value':
      output += aui.form.value({id: opt_data.id, content: '' + soy.$$escapeHtml(opt_data.value), extraClasses: fieldClasses__soy430});
      break;
    case 'text':
    case 'password':
    case 'email':
    case 'url':
    case 'tel':
    case 'search':
    case 'file':
    case 'radio':
    case 'checkbox':
    case 'button':
    case 'submit':
    case 'reset':
      output += aui.form.input({id: opt_data.id, name: opt_data.name, type: opt_data.type, value: opt_data.value, maxLength: opt_data.maxLength, size: opt_data.size, autocomplete: opt_data.autocomplete, placeholderText: opt_data.placeholderText, isChecked: opt_data.isChecked, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy430, icon: opt_data.icon, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
  }
  output += ((opt_data.labelContent && isCheckboxOrRadio__soy428) ? aui.form.label({forField: opt_data.id, isRequired: opt_data.isRequired, content: opt_data.labelContent}) : '') + ((opt_data.descriptionText || opt_data.descriptionContent) ? aui.form.fieldDescription({text: opt_data.descriptionText, content: opt_data.descriptionContent}) : '');
  if (opt_data.errorTexts) {
    var errorList516 = opt_data.errorTexts;
    var errorListLen516 = errorList516.length;
    for (var errorIndex516 = 0; errorIndex516 < errorListLen516; errorIndex516++) {
      var errorData516 = errorList516[errorIndex516];
      output += aui.form.fieldError({message: errorData516});
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  aui.form.field.soyTemplateName = 'aui.form.field';
}


aui.form.fieldError = function(opt_data, opt_ignored) {
  return '<div class="error' + aui.renderExtraClasses(opt_data) + '">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldError.soyTemplateName = 'aui.form.fieldError';
}


aui.form.fieldDescription = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="description' + aui.renderExtraClasses(opt_data) + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : (opt_data.message) ? soy.$$escapeHtml(opt_data.message) : soy.$$filterNoAutoescape(opt_data.content)) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldDescription.soyTemplateName = 'aui.form.fieldDescription';
}


aui.form.textField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'text'}));
};
if (goog.DEBUG) {
  aui.form.textField.soyTemplateName = 'aui.form.textField';
}


aui.form.textareaField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'textarea'}));
};
if (goog.DEBUG) {
  aui.form.textareaField.soyTemplateName = 'aui.form.textareaField';
}


aui.form.passwordField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'password'}));
};
if (goog.DEBUG) {
  aui.form.passwordField.soyTemplateName = 'aui.form.passwordField';
}


aui.form.fileField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'file'}));
};
if (goog.DEBUG) {
  aui.form.fileField.soyTemplateName = 'aui.form.fileField';
}


aui.form.selectField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'select'}));
};
if (goog.DEBUG) {
  aui.form.selectField.soyTemplateName = 'aui.form.selectField';
}


aui.form.checkboxField = function(opt_data, opt_ignored) {
  var param561 = '' + ((opt_data.isMatrix) ? '<div class="matrix">' : '');
  var fieldList565 = opt_data.fields;
  var fieldListLen565 = fieldList565.length;
  for (var fieldIndex565 = 0; fieldIndex565 < fieldListLen565; fieldIndex565++) {
    var fieldData565 = fieldList565[fieldIndex565];
    param561 += aui.form.field(soy.$$augmentMap(fieldData565, {type: 'checkbox', labelContent: '' + soy.$$escapeHtml(fieldData565.labelText), extraFieldClasses: opt_data.extraFieldClasses}));
  }
  param561 += ((opt_data.isMatrix) ? '</div>' : '') + ((opt_data.descriptionText || opt_data.descriptionContent || opt_data.errorTexts && opt_data.errorTexts.length) ? aui.form.field({descriptionText: opt_data.descriptionText, descriptionContent: opt_data.descriptionContent, errorTexts: opt_data.errorTexts, isDisabled: false}) : '');
  var output = '' + aui.form.fieldset({legendContent: opt_data.legendContent + (opt_data.isRequired ? '<span class="aui-icon icon-required"></span>' : ''), isGroup: true, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: param561});
  return output;
};
if (goog.DEBUG) {
  aui.form.checkboxField.soyTemplateName = 'aui.form.checkboxField';
}


aui.form.radioField = function(opt_data, opt_ignored) {
  var param589 = '' + ((opt_data.isMatrix) ? '<div class="matrix">' : '');
  var fieldList593 = opt_data.fields;
  var fieldListLen593 = fieldList593.length;
  for (var fieldIndex593 = 0; fieldIndex593 < fieldListLen593; fieldIndex593++) {
    var fieldData593 = fieldList593[fieldIndex593];
    param589 += aui.form.field(soy.$$augmentMap(fieldData593, {type: 'radio', name: opt_data.name ? opt_data.name : opt_data.id, labelContent: '' + soy.$$escapeHtml(fieldData593.labelText), extraFieldClasses: opt_data.extraFieldClasses}));
  }
  param589 += ((opt_data.isMatrix) ? '</div>' : '') + ((opt_data.descriptionText || opt_data.descriptionContent || opt_data.errorTexts && opt_data.errorTexts.length) ? aui.form.field({descriptionText: opt_data.descriptionText, descriptionContent: opt_data.descriptionContent, errorTexts: opt_data.errorTexts, isDisabled: false}) : '');
  var output = '' + aui.form.fieldset({legendContent: opt_data.legendContent + (opt_data.isRequired ? '<span class="aui-icon icon-required"></span>' : ''), isGroup: true, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: param589});
  return output;
};
if (goog.DEBUG) {
  aui.form.radioField.soyTemplateName = 'aui.form.radioField';
}


aui.form.valueField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'value'}));
};
if (goog.DEBUG) {
  aui.form.valueField.soyTemplateName = 'aui.form.valueField';
}


aui.form.emailField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'email'}));
};
if (goog.DEBUG) {
  aui.form.emailField.soyTemplateName = 'aui.form.emailField';
}


aui.form.urlField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'url'}));
};
if (goog.DEBUG) {
  aui.form.urlField.soyTemplateName = 'aui.form.urlField';
}


aui.form.telephoneField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'tel'}));
};
if (goog.DEBUG) {
  aui.form.telephoneField.soyTemplateName = 'aui.form.telephoneField';
}


aui.form.searchField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'search'}));
};
if (goog.DEBUG) {
  aui.form.searchField.soyTemplateName = 'aui.form.searchField';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/group.soy' */
// This file was automatically generated from group.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.group.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.group == 'undefined') { aui.group = {}; }


aui.group.group = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-group' + ((opt_data.isSplit) ? ' aui-group-split' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.group.group.soyTemplateName = 'aui.group.group';
}


aui.group.item = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-item' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.group.item.soyTemplateName = 'aui.group.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/labels.soy' */
// This file was automatically generated from labels.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.labels.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.labels == 'undefined') { aui.labels = {}; }


aui.labels.label = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url && opt_data.isCloseable == true) ? '<span' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-label aui-label-closeable aui-label-split' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a class="aui-label-split-main" href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a><span class="aui-label-split-close" >' + aui.labels.closeIcon(opt_data) + '</span></span>' : '<' + soy.$$escapeHtml(opt_data.url ? 'a' : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-label' + ((opt_data.isCloseable) ? ' aui-label-closeable' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.url) ? ' href="' + soy.$$escapeHtml(opt_data.url) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + ((opt_data.isCloseable) ? aui.labels.closeIcon(opt_data) : '') + '</' + soy.$$escapeHtml(opt_data.url ? 'a' : 'span') + '>');
};
if (goog.DEBUG) {
  aui.labels.label.soyTemplateName = 'aui.labels.label';
}


aui.labels.closeIcon = function(opt_data, opt_ignored) {
  return '<span tabindex="0" class="aui-icon aui-icon-close"' + ((opt_data.hasTitle != false) ? ' title="' + aui.labels.closeIconText(opt_data) + '"' : '') + '>' + aui.labels.closeIconText(opt_data) + '</span>';
};
if (goog.DEBUG) {
  aui.labels.closeIcon.soyTemplateName = 'aui.labels.closeIcon';
}


aui.labels.closeIconText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closeIconText) ? soy.$$escapeHtml(opt_data.closeIconText) : '(' + soy.$$escapeHtml("Remove") + ' ' + soy.$$escapeHtml(opt_data.text) + ')');
};
if (goog.DEBUG) {
  aui.labels.closeIconText.soyTemplateName = 'aui.labels.closeIconText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/message.soy' */
// This file was automatically generated from message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.message.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.message == 'undefined') { aui.message = {}; }


aui.message.info = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'info'}));
};
if (goog.DEBUG) {
  aui.message.info.soyTemplateName = 'aui.message.info';
}


aui.message.warning = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'warning'}));
};
if (goog.DEBUG) {
  aui.message.warning.soyTemplateName = 'aui.message.warning';
}


aui.message.error = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'error'}));
};
if (goog.DEBUG) {
  aui.message.error.soyTemplateName = 'aui.message.error';
}


aui.message.success = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'success'}));
};
if (goog.DEBUG) {
  aui.message.success.soyTemplateName = 'aui.message.success';
}


aui.message.hint = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'hint'}));
};
if (goog.DEBUG) {
  aui.message.hint.soyTemplateName = 'aui.message.hint';
}


aui.message.generic = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'generic'}));
};
if (goog.DEBUG) {
  aui.message.generic.soyTemplateName = 'aui.message.generic';
}


aui.message.message = function(opt_data, opt_ignored) {
  var output = '';
  var theTagName__soy21 = opt_data.tagName ? opt_data.tagName : 'div';
  var theType__soy22 = opt_data.type ? opt_data.type : 'generic';
  output += '<' + soy.$$escapeHtml(theTagName__soy21) + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-message aui-message-' + soy.$$escapeHtml(theType__soy22) + ' ' + soy.$$escapeHtml(theType__soy22) + ((opt_data.isCloseable) ? ' closeable' : '') + ((opt_data.isShadowed) ? ' shadowed' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.titleContent) ? '<p class="title"><strong>' + soy.$$filterNoAutoescape(opt_data.titleContent) + '</strong></p>' : '') + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.isCloseable) ? '<span class="aui-icon icon-close" role="button" tabindex="0"></span>' : '') + '</' + soy.$$escapeHtml(theTagName__soy21) + '>';
  return output;
};
if (goog.DEBUG) {
  aui.message.message.soyTemplateName = 'aui.message.message';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/page.soy' */
// This file was automatically generated from page.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.page.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.page == 'undefined') { aui.page = {}; }


aui.page.document = function(opt_data, opt_ignored, opt_ijData) {
  return '<!DOCTYPE html><html lang="' + soy.$$escapeHtml(opt_ijData.language ? opt_ijData.language : 'en') + '">' + aui.page.documentHTMLContent(opt_data, null, opt_ijData) + '</html>';
};
if (goog.DEBUG) {
  aui.page.document.soyTemplateName = 'aui.page.document';
}


aui.page.documentHTMLContent = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  var thePageSize__soy9 = opt_data.pageSize ? opt_data.pageSize : opt_data.focusedPageSize ? opt_data.focusedPageSize : 'xlarge';
  output += '<head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>' + soy.$$escapeHtml(opt_data.windowTitle) + '</title>' + ((opt_data.headContent) ? soy.$$filterNoAutoescape(opt_data.headContent) : '') + '</head><body' + ((opt_data.pageType) ? (opt_data.pageType == 'generic') ? (opt_data.extraClasses) ? ' class="' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : '' : (opt_data.pageType == 'focused') ? ' class="aui-page-focused aui-page-focused-' + soy.$$escapeHtml(thePageSize__soy9) + ' aui-page-size-' + soy.$$escapeHtml(thePageSize__soy9) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : (opt_data.pageType == 'notification') ? ' class="aui-page-notification aui-page-size-' + soy.$$escapeHtml(thePageSize__soy9) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : (opt_data.pageType == 'sidebar') ? ' class="aui-page-sidebar' + soy.$$escapeHtml(opt_data.sidebarState ? ' aui-sidebar-' + opt_data.sidebarState : '') + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : ' class="aui-page-' + soy.$$escapeHtml(opt_data.pageType) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : ' class="' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</body>';
  return output;
};
if (goog.DEBUG) {
  aui.page.documentHTMLContent.soyTemplateName = 'aui.page.documentHTMLContent';
}


aui.page.page = function(opt_data, opt_ignored, opt_ijData) {
  return '<div id="page"><header id="header" role="banner">' + soy.$$filterNoAutoescape(opt_data.headerContent) + '</header><!-- #header --><section id="content" role="main">' + soy.$$filterNoAutoescape(opt_data.contentContent) + '</section><!-- #content --><footer id="footer" role="contentinfo">' + soy.$$filterNoAutoescape(opt_data.footerContent) + '</footer><!-- #footer --></div><!-- #page -->';
};
if (goog.DEBUG) {
  aui.page.page.soyTemplateName = 'aui.page.page';
}


aui.page.header = function(opt_data, opt_ignored, opt_ijData) {
  return ((opt_data.bannerContent) ? '<div class="aui-banner aui-banner-error" role="banner">' + soy.$$filterNoAutoescape(opt_data.bannerContent) + '</div>' : '') + '<nav' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-header aui-dropdown2-trigger-group' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + aui.renderExtraAttributes(opt_data, null, opt_ijData) + ' role="navigation"><div class="aui-header-inner">' + ((opt_data.headerBeforeContent) ? '<div class="aui-header-before">' + soy.$$filterNoAutoescape(opt_data.headerBeforeContent) + '</div>' : '') + '<div class="aui-header-primary"><h1 id="logo" class="aui-header-logo' + ((opt_data.headerLogoImageUrl) ? ' aui-header-logo-custom' : (opt_data.logo) ? ' aui-header-logo-' + soy.$$escapeHtml(opt_data.logo) : '') + '"><a href="' + soy.$$escapeHtml(opt_data.headerLink ? opt_data.headerLink : '/') + '">' + ((opt_data.headerLogoImageUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.headerLogoImageUrl) + '" alt="' + soy.$$escapeHtml(opt_data.headerLogoText) + '" />' : '<span class="aui-header-logo-device">' + soy.$$escapeHtml(opt_data.headerLogoText ? opt_data.headerLogoText : '') + '</span>') + ((opt_data.headerText) ? '<span class="aui-header-logo-text">' + soy.$$escapeHtml(opt_data.headerText) + '</span>' : '') + '</a></h1>' + ((opt_data.primaryNavContent) ? soy.$$filterNoAutoescape(opt_data.primaryNavContent) : '') + '</div>' + ((opt_data.secondaryNavContent) ? '<div class="aui-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryNavContent) + '</div>' : '') + ((opt_data.headerAfterContent) ? '<div class="aui-header-after">' + soy.$$filterNoAutoescape(opt_data.headerAfterContent) + '</div>' : '') + '</div><!-- .aui-header-inner--></nav><!-- .aui-header -->';
};
if (goog.DEBUG) {
  aui.page.header.soyTemplateName = 'aui.page.header';
}


aui.page.pagePanel = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ' class="aui-page-panel' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '><div class="aui-page-panel-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-panel-inner --></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '><!-- .aui-page-panel -->';
};
if (goog.DEBUG) {
  aui.page.pagePanel.soyTemplateName = 'aui.page.pagePanel';
}


aui.page.pagePanelNav = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ' class="aui-page-panel-nav' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '><!-- .aui-page-panel-nav -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelNav.soyTemplateName = 'aui.page.pagePanelNav';
}


aui.page.pagePanelContent = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ' class="aui-page-panel-content' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '><!-- .aui-page-panel-content -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelContent.soyTemplateName = 'aui.page.pagePanelContent';
}


aui.page.pagePanelSidebar = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'aside') + ' class="aui-page-panel-sidebar' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'aside') + '><!-- .aui-page-panel-sidebar -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelSidebar.soyTemplateName = 'aui.page.pagePanelSidebar';
}


aui.page.pagePanelItem = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ' class="aui-page-panel-item' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '><!-- .aui-page-panel-item -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelItem.soyTemplateName = 'aui.page.pagePanelItem';
}


aui.page.pageHeader = function(opt_data, opt_ignored, opt_ijData) {
  return '<header class="aui-page-header' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '><div class="aui-page-header-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-inner --></header><!-- .aui-page-header -->';
};
if (goog.DEBUG) {
  aui.page.pageHeader.soyTemplateName = 'aui.page.pageHeader';
}


aui.page.pageHeaderImage = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-image' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-image -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderImage.soyTemplateName = 'aui.page.pageHeaderImage';
}


aui.page.pageHeaderMain = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-main' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-main -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderMain.soyTemplateName = 'aui.page.pageHeaderMain';
}


aui.page.pageHeaderActions = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-actions' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-actions -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderActions.soyTemplateName = 'aui.page.pageHeaderActions';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/panel.soy' */
// This file was automatically generated from panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.panel = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-panel' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.panel.soyTemplateName = 'aui.panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/table.soy' */
// This file was automatically generated from table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.table = function(opt_data, opt_ignored) {
  return '<table' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.columnsContent) ? soy.$$filterNoAutoescape(opt_data.columnsContent) : '') + ((opt_data.captionContent) ? '<caption>' + soy.$$filterNoAutoescape(opt_data.captionContent) + '</caption>' : '') + ((opt_data.theadContent) ? '<thead>' + soy.$$filterNoAutoescape(opt_data.theadContent) + '</thead>' : '') + ((opt_data.tfootContent) ? '<tfoot>' + soy.$$filterNoAutoescape(opt_data.tfootContent) + '</tfoot>' : '') + ((! opt_data.contentIncludesTbody) ? '<tbody>' : '') + soy.$$filterNoAutoescape(opt_data.content) + ((! opt_data.contentIncludesTbody) ? '</tbody>' : '') + '</table>';
};
if (goog.DEBUG) {
  aui.table.soyTemplateName = 'aui.table';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/tabs.soy' */
// This file was automatically generated from tabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.tabs = function(opt_data, opt_ignored) {
  var output = '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-tabs ' + soy.$$escapeHtml(opt_data.isVertical ? 'vertical-tabs' : 'horizontal-tabs') + ((opt_data.isDisabled) ? ' aui-tabs-disabled' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><ul class="tabs-menu">';
  var itemList19 = opt_data.menuItems;
  var itemListLen19 = itemList19.length;
  for (var itemIndex19 = 0; itemIndex19 < itemListLen19; itemIndex19++) {
    var itemData19 = itemList19[itemIndex19];
    output += aui.tabMenuItem(itemData19);
  }
  output += '</ul>' + soy.$$filterNoAutoescape(opt_data.paneContent) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
  return output;
};
if (goog.DEBUG) {
  aui.tabs.soyTemplateName = 'aui.tabs';
}


aui.tabMenuItem = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="menu-item' + ((opt_data.isActive) ? ' active-tab' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  aui.tabMenuItem.soyTemplateName = 'aui.tabMenuItem';
}


aui.tabPane = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="tabs-pane' + ((opt_data.isActive) ? ' active-pane' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.tabPane.soyTemplateName = 'aui.tabPane';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/toolbar.soy' */
// This file was automatically generated from toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.toolbar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.toolbar == 'undefined') { aui.toolbar = {}; }


aui.toolbar.toolbar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.toolbar.toolbar.soyTemplateName = 'aui.toolbar.toolbar';
}


aui.toolbar.split = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-split toolbar-split-' + soy.$$escapeHtml(opt_data.split) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.toolbar.split.soyTemplateName = 'aui.toolbar.split';
}


aui.toolbar.group = function(opt_data, opt_ignored) {
  return '<ul' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</ul>';
};
if (goog.DEBUG) {
  aui.toolbar.group.soyTemplateName = 'aui.toolbar.group';
}


aui.toolbar.item = function(opt_data, opt_ignored) {
  return '<li ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-item' + ((opt_data.isPrimary) ? ' primary' : '') + ((opt_data.isActive) ? ' active' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  aui.toolbar.item.soyTemplateName = 'aui.toolbar.item';
}


aui.toolbar.trigger = function(opt_data, opt_ignored) {
  return '<a' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-trigger' + aui.renderExtraClasses(opt_data) + '" href="' + soy.$$escapeHtml(opt_data.url ? opt_data.url : '#') + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</a>';
};
if (goog.DEBUG) {
  aui.toolbar.trigger.soyTemplateName = 'aui.toolbar.trigger';
}


aui.toolbar.button = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.toolbar.item({isActive: opt_data.isActive, isPrimary: opt_data.isPrimary, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.toolbar.trigger({url: opt_data.url, title: opt_data.title, content: '' + ((opt_data.iconClass) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>' : '') + ((opt_data.text) ? '<span class="trigger-text">' + soy.$$escapeHtml(opt_data.text) + '</span>' : '')})});
};
if (goog.DEBUG) {
  aui.toolbar.button.soyTemplateName = 'aui.toolbar.button';
}


aui.toolbar.link = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.item({id: opt_data.id, extraClasses: 'toolbar-item-link' + aui.renderExtraClasses(opt_data), extraAttributes: opt_data.extraAttributes, content: '' + aui.toolbar.trigger({url: opt_data.url, content: '' + soy.$$escapeHtml(opt_data.text)})});
};
if (goog.DEBUG) {
  aui.toolbar.link.soyTemplateName = 'aui.toolbar.link';
}


aui.toolbar.dropdownInternal = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.item({isPrimary: opt_data.isPrimary, id: opt_data.id, extraClasses: '' + soy.$$filterNoAutoescape(opt_data.itemClass) + aui.renderExtraClasses(opt_data), extraAttributes: opt_data.extraAttributes, content: '' + ((opt_data.splitButtonContent) ? soy.$$filterNoAutoescape(opt_data.splitButtonContent) : '') + aui.dropdown.parent({content: '' + aui.dropdown.trigger({extraClasses: 'toolbar-trigger', accessibilityText: opt_data.text}) + aui.dropdown.menu({content: opt_data.dropdownItemsContent})})});
};
if (goog.DEBUG) {
  aui.toolbar.dropdownInternal.soyTemplateName = 'aui.toolbar.dropdownInternal';
}


aui.toolbar.dropdown = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.dropdownInternal({isPrimary: opt_data.isPrimary, id: opt_data.id, itemClass: 'toolbar-dropdown', extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, text: opt_data.text, dropdownItemsContent: opt_data.dropdownItemsContent});
};
if (goog.DEBUG) {
  aui.toolbar.dropdown.soyTemplateName = 'aui.toolbar.dropdown';
}


aui.toolbar.splitButton = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.dropdownInternal({isPrimary: opt_data.isPrimary, id: opt_data.id, itemClass: 'toolbar-splitbutton', extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, dropdownItemsContent: opt_data.dropdownItemsContent, splitButtonContent: '' + aui.toolbar.trigger({url: opt_data.url, content: '' + soy.$$escapeHtml(opt_data.text)})});
};
if (goog.DEBUG) {
  aui.toolbar.splitButton.soyTemplateName = 'aui.toolbar.splitButton';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/toolbar2.soy' */
// This file was automatically generated from toolbar2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.toolbar2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.toolbar2 == 'undefined') { aui.toolbar2 = {}; }


aui.toolbar2.toolbar2 = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ' role="toolbar"><div class="aui-toolbar2-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  aui.toolbar2.toolbar2.soyTemplateName = 'aui.toolbar2.toolbar2';
}


aui.toolbar2.item = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2-' + soy.$$escapeHtml(opt_data.item) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.toolbar2.item.soyTemplateName = 'aui.toolbar2.item';
}


aui.toolbar2.group = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.toolbar2.group.soyTemplateName = 'aui.toolbar2.group';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/progress-tracker.soy' */
// This file was automatically generated from progress-tracker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.progressTracker.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.progressTracker == 'undefined') { aui.progressTracker = {}; }


aui.progressTracker.progressTracker = function(opt_data, opt_ignored) {
  var output = '<ol' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-progress-tracker' + ((opt_data.isInverted) ? ' aui-progress-tracker-inverted' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>';
  var param18 = '';
  var currentStepList19 = opt_data.steps;
  var currentStepListLen19 = currentStepList19.length;
  for (var currentStepIndex19 = 0; currentStepIndex19 < currentStepListLen19; currentStepIndex19++) {
    var currentStepData19 = currentStepList19[currentStepIndex19];
    if (currentStepData19['isCurrent']) {
      var stepList22 = opt_data.steps;
      var stepListLen22 = stepList22.length;
      for (var stepIndex22 = 0; stepIndex22 < stepListLen22; stepIndex22++) {
        var stepData22 = stepList22[stepIndex22];
        param18 += aui.progressTracker.step(soy.$$augmentMap(stepData22, {width: Math.round(100 / opt_data.steps.length * 10000) / 10000, href: stepIndex22 < currentStepIndex19 ? stepData22['href'] : null}));
      }
    }
  }
  output += aui.progressTracker.content({steps: opt_data.steps, content: param18});
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  aui.progressTracker.progressTracker.soyTemplateName = 'aui.progressTracker.progressTracker';
}


aui.progressTracker.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.content != '') {
    output += soy.$$filterNoAutoescape(opt_data.content);
  } else {
    var stepList36 = opt_data.steps;
    var stepListLen36 = stepList36.length;
    for (var stepIndex36 = 0; stepIndex36 < stepListLen36; stepIndex36++) {
      var stepData36 = stepList36[stepIndex36];
      output += aui.progressTracker.step(soy.$$augmentMap(stepData36, {isCurrent: stepIndex36 == 0, width: Math.round(100 / opt_data.steps.length * 10000) / 10000, href: null}));
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.progressTracker.content.soyTemplateName = 'aui.progressTracker.content';
}


aui.progressTracker.step = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-progress-tracker-step' + ((opt_data.isCurrent) ? ' aui-progress-tracker-step-current' : '') + aui.renderExtraClasses(opt_data) + '" style="width: ' + soy.$$escapeHtml(opt_data.width) + '%;"' + aui.renderExtraAttributes(opt_data) + '><' + soy.$$escapeHtml(opt_data.href ? 'a' : 'span') + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</' + soy.$$escapeHtml(opt_data.href ? 'a' : 'span') + '></li>';
};
if (goog.DEBUG) {
  aui.progressTracker.step.soyTemplateName = 'aui.progressTracker.step';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/expander.soy' */
// This file was automatically generated from expander.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.expander.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.expander == 'undefined') { aui.expander = {}; }


aui.expander.content = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-expander-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.initiallyExpanded) ? ' aria-expanded="' + soy.$$escapeHtml(opt_data.initiallyExpanded) + '"' : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.expander.content.soyTemplateName = 'aui.expander.content';
}


aui.expander.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tag ? opt_data.tag : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.replaceText) ? ' data-replace-text="' + soy.$$escapeHtml(opt_data.replaceText) + '"' : '') + ((opt_data.replaceSelector) ? ' data-replace-selector="' + soy.$$escapeHtml(opt_data.replaceSelector) + '"' : '') + ' class="aui-expander-trigger' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ' aria-controls="' + soy.$$escapeHtml(opt_data.contentId) + '"' + ((opt_data.collapsible) ? ' data-collapsible="' + soy.$$escapeHtml(opt_data.collapsible) + '"' : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tag ? opt_data.tag : 'div') + '>';
};
if (goog.DEBUG) {
  aui.expander.trigger.soyTemplateName = 'aui.expander.trigger';
}


aui.expander.revealText = function(opt_data, opt_ignored) {
  return '' + aui.expander.content({id: opt_data.contentId, content: '' + soy.$$escapeHtml(opt_data.contentContent) + aui.expander.trigger({id: opt_data.triggerId, contentId: opt_data.contentId, tag: 'a', content: '<span class=\'reveal-text-trigger-text\'>Show more</span>', replaceSelector: '.reveal-text-trigger-text', replaceText: 'Show less', extraAttributes: opt_data.triggerExtraAttributes, extraClasses: ((opt_data.triggerExtraClasses) ? soy.$$escapeHtml(opt_data.triggerExtraClasses) + '  ' : '') + ' aui-expander-reveal-text'}), extraAttributes: opt_data.contentExtraAttributes, extraClasses: opt_data.contentExtraClasses});
};
if (goog.DEBUG) {
  aui.expander.revealText.soyTemplateName = 'aui.expander.revealText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.avatar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.avatar == 'undefined') { aui.avatar = {}; }


aui.avatar.avatar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + soy.$$escapeHtml(opt_data.isProject ? ' aui-avatar-project' : '') + soy.$$escapeHtml(opt_data.badgeContent ? ' aui-avatar-badged' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.avatarImageUrl) + '"' + ((opt_data.accessibilityText) ? ' alt="' + soy.$$escapeHtml(opt_data.accessibilityText) + '"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.imageClasses) ? ' class="' + soy.$$escapeHtml(opt_data.imageClasses) + '"' : '') + ' /></span>' + ((opt_data.badgeContent) ? soy.$$filterNoAutoescape(opt_data.badgeContent) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.avatar.avatar.soyTemplateName = 'aui.avatar.avatar';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.icons.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.icons == 'undefined') { aui.icons = {}; }


aui.icons.icon = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-icon' + ((opt_data.useIconFont) ? ' aui-icon-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'small') : '') + ' aui' + soy.$$escapeHtml(opt_data.useIconFont ? '-iconfont' : '-icon') + soy.$$escapeHtml(opt_data.iconFontSet ? '-' + opt_data.iconFontSet : '') + '-' + soy.$$escapeHtml(opt_data.icon) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.accessibilityText) ? soy.$$escapeHtml(opt_data.accessibilityText) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.icons.icon.soyTemplateName = 'aui.icons.icon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/lozenges.soy' */
// This file was automatically generated from lozenges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.lozenges.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.lozenges == 'undefined') { aui.lozenges = {}; }


aui.lozenges.lozenge = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ' class="aui-lozenge' + soy.$$escapeHtml(opt_data.type ? ' aui-lozenge-' + opt_data.type : '') + soy.$$escapeHtml(opt_data.isSubtle ? ' aui-lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.maxLength) ? soy.$$truncate(soy.$$escapeHtml(opt_data.text), opt_data.maxLength, true) : soy.$$escapeHtml(opt_data.text)) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.lozenges.lozenge.soyTemplateName = 'aui.lozenges.lozenge';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/sidebar.soy' */
// This file was automatically generated from sidebar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.sidebar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.sidebar == 'undefined') { aui.sidebar = {}; }


aui.sidebar.sidebar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.state) ? ' aria-expanded="' + ((opt_data.state == 'collapsed') ? 'false' : 'true') + '"' : '') + ' class="aui-sidebar ' + ((opt_data.isAnimated) ? 'aui-is-animated' : '') + aui.renderExtraClasses(opt_data) + '" ' + ((opt_data.isResponsive == false) ? 'data-aui-responsive="false"' : '') + aui.renderExtraAttributes(opt_data) + '><div class="aui-sidebar-wrapper"><div class="aui-sidebar-body">' + soy.$$filterNoAutoescape(opt_data.headerContent) + soy.$$filterNoAutoescape(opt_data.content) + '</div><div class="aui-sidebar-footer">' + ((opt_data.footerContent) ? soy.$$filterNoAutoescape(opt_data.footerContent) : (opt_data.settingsButtonUrl && opt_data.settingsText) ? '<a href="' + soy.$$escapeHtml(opt_data.settingsButtonUrl) + '" class="aui-button aui-button-subtle aui-sidebar-settings-button' + ((opt_data.isSettingsButtonSelected) ? ' aui-sidebar-settings-selected' : '') + '" data-tooltip="' + soy.$$escapeHtml(opt_data.settingsTooltip ? opt_data.settingsTooltip : opt_data.settingsText) + '"><span class="aui-icon aui-icon-small aui-iconfont-configure"></span><span class="aui-button-label">' + soy.$$escapeHtml(opt_data.settingsText) + '</span></a>' : '') + '<a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="' + soy.$$escapeHtml("Expand sidebar ( [ )") + '" href="#"><span class="aui-icon aui-icon-small"></span></a></div>' + ((opt_data.isResizable) ? '<div class="aui-sidebar-handle"></div>' : '') + '</div></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.sidebar.sidebar.soyTemplateName = 'aui.sidebar.sidebar';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-plugins-jquery-select2', location = 'src/js-vendor/jquery/plugins/jquery.select2.js' */
("undefined"===typeof window?global:window).__20a7a9bbaf9ff38842d86ac547491891=function(){var y=jQuery;"undefined"==typeof y.fn.each2&&y.extend(y.fn,{each2:function(a){for(var b=y([0]),c=-1,d=this.length;++c<d&&(b.context=b[0]=this[c])&&!1!==a.call(b[0],c,b););return this}});var e=jQuery,w=function(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=O[g]||g;return b},k=function(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1},m=function(a,
b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1},B=function(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c},G=function(a){a.on("keydown",function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),
a.trigger("keyup-change"))})},H=function(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}},j=function(a){a.preventDefault();a.stopPropagation()},z=function(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))},
I=function(a,b,c,d){var g=w(a.toUpperCase()).indexOf(w(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))},J=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},K=function(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(l){window.clearTimeout(b);
b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,l.term,l.page,l.context):null,d="function"===typeof d?d.call(h,l.term,l.page,l.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=
a.results(b,l.page);l.callback(b)}});c=t.call(h,f)},d)}},L=function(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},n;if(c==="")a.callback(b());else{n=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){n(b,
i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){n(b,d.results)});a.callback(d)}}},M=function(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}},r=function(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");
},o=function(a){return e.isFunction(a)?a():a},N=function(a){var b=0;e.each(a,function(a,d){d.children?b+=N(d.children):b++});return b},P=function(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&
null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(m(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}},C=function(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c};if(void 0===window.Select2){var f,s,D,E,A,v,x={x:0,y:0},F;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=
a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A",
"\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C",
"\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E",
"\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H",
"\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K",
"\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N",
"\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O",
"\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R",
"\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U",
"\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W",
"\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a",
"\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};s=e(document);var Q=1;A=function(){return Q++};s.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});s=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);
this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+A());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.attr("style",a.element.attr("style"));this.container.css(o(a.containerCss));this.container.addClass(o(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",j);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(a.dropdownCssClass));
this.dropdown.data("select2",this);this.dropdown.on("click",j);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",j);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));
var h=this.results,l=H(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=k(a.target,h.get())&&l(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),j(a)):0>g&&b.get(0).scrollHeight-
b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});G(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});
e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");void 0===i&&(i=!1);this.readonly(i);if(!(i=F)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}F=i;this.autofocus=a.element.prop("autofocus");
a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},
optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:m(a.attr("locked"),"locked")||m(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var l,j,m,k,o,u,q,b=a.sortResults(b,c,d);l=0;for(j=b.length;l<j;l=l+1){m=b[l];o=m.disabled===true;k=!o&&t(m)!==void 0;u=m.children&&m.children.length>0;q=e("<li></li>");q.addClass("select2-results-dept-"+h);q.addClass("select2-result");q.addClass(k?"select2-result-selectable":"select2-result-unselectable");
o&&q.addClass("select2-disabled");u&&q.addClass("select2-result-with-children");q.addClass(g.opts.formatResultCssClass(m));k=e(document.createElement("div"));k.addClass("select2-result-label");o=a.formatResult(m,k,d,g.opts.escapeMarkup);o!==void 0&&k.html(o);q.append(k);if(u){u=e("<ul></ul>");u.addClass("select2-result-sub");f(m.children,u,h+1);q.append(u)}q.data("select2-data",m);c.append(q)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:false},d=a.term,e,f,p;p=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){p(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&
e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){p(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=K.call(a.element,a.ajax)}else if("data"in a)a.query=L(a.data);else if("tags"in a&&(a.query=M(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===
a.initSelection))a.initSelection=function(b,c){var d=[];e(B(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(m(this.id,b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(o(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});
c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",
val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},
enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),
d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),n=h.scrollLeft()+f,j=h.scrollTop()+i,c=b.top+c,p=b.left,j=c+g<=j,m=b.top-g>=this.body().scrollTop(),k=a.outerWidth(!1),r=p+k<=n,s;a.hasClass("select2-drop-above")?(g=!0,!m&&j&&(s=!0,g=!1)):(g=!1,!j&&m&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),n=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,p=b.left,k=a.outerWidth(!1),r=p+k<=
n,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),k=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:F.width),k>d?d=k:k=d,r=p+k<=n):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(n=this.body().offset(),c-=n.top,p-=n.left);r||(p=b.left+d-k);d={left:p,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=
c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,o(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;
this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),
a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+
" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");
this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return o(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),
0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var n=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&n&&m(f,n))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;n=this.getMaximumSelectionSize();
if(1<=n&&(f=this.data(),e.isArray(f)&&f.length>=n&&r(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(n)+"</li>");return}d.val().length<h.minimumInputLength?(r(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?r(h.formatInputTooLong,"formatInputTooLong")?
c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var l;j==this.queryCount&&(this.opened()?
(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(l=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==l&&null!==l&&void 0!==i.id(l)&&null!==i.id(l)&&0===e(f.results).filter(function(){return m(i.id(this),i.id(l))}).length&&f.results.unshift(l)),0===f.results.length&&r(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),
page:this.resultsPage,context:null}),!0===f.more&&r(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});
this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=
this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||
"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==a&&this.container.css("width",a)}});D=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.ENTER:this.selectHighlighted();j(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
j(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
j(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();j(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){j(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=m(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(N(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});E=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=B(b.val(),a.separator),f=[];a.query({matcher:function(b,c,d){(b=e.grep(g,function(b){return m(b,a.id(d))}).length)&&f.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<g.length;c++)for(var e=g[c],j=0;j<f.length;j++){var k=f[j];if(m(e,a.id(k))){b.push(k);f.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),l=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&l.length?g=l:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=l.length?l:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),j(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),j(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:this.selectHighlighted();j(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);j(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b),b.which===f.ENTER&&j(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",j).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),j(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=k(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=k(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
r(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return B(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,j="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],m=["val","data"],o={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new E:new D,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],j))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(o[d]&&(d=o[d]),f=c[d].apply(c,a.slice(1))),0<=k(a[0],i)||k(a[0],m)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=w(""+b).toUpperCase().indexOf(w(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:P,escapeMarkup:J,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:K,local:L,tags:M},util:{debounce:H,markMatch:I,escapeMarkup:J,stripDiacritics:w},"class":{"abstract":s,single:D,multi:E}}}return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-select2', location = 'src/js/aui/select2.js' */
("undefined"===typeof window?global:window).__0b1c96d06e662d84c9324a075c8f5c66=function(){"use strict";var b=__bd7207540b95ff683caa1d3c0bfcc3d7,d=b&&b.__esModule?b:{"default":b};__20a7a9bbaf9ff38842d86ac547491891;var e=d.default.fn.select2;d.default.fn.auiSelect2=function(b){var c;if(d.default.isPlainObject(b)){var a=d.default.extend({},b);c=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+c+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+
c+(a.dropdownCssClass?" "+a.dropdownCssClass:"");c=Array.prototype.slice.call(arguments,1);c.unshift(a)}else c=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];return e.apply(this,c)};return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-banner', location = 'src/js/aui/banner.js' */
("undefined"===typeof window?global:window).__9ddbad97e939bfc5a88a654192fe88be=function(){function b(a){return a&&a.__esModule?a:{"default":a}}function e(a){a=(0,c.default)((0,g.default)('<div class="aui-banner aui-banner-{type}" role="banner">{body}</div>').fill({type:"error","body:html":a.body||""}).toString());(0,c.default)("#"+f).find(".aui-banner").get().forEach(function(a){"true"===a.getAttribute("aria-hidden")&&(0,c.default)(a).remove()});var b=(0,c.default)("#"+f);if(!b.length)throw Error("You must implement the application header");
a.prependTo(b);(0,h.recomputeStyle)(a);a.attr("aria-hidden","false");return a[0]}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var c=b(__bd7207540b95ff683caa1d3c0bfcc3d7),h=__5751b8a604ec61b53b208676ae78d41d,i=b(__65f46acd493e225a8705ab04389e284d),j=b(__9a668cbde1e182d8e721c23580356df2),g=b(__c4f1078a82b494cc09b37e0114acf4c9),f="header";(0,i.default)("aui/banner",e);(0,j.default)("banner",e);d.default=e;return d=d["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:ajs', location = '/scripts/aui-overrides.js' */
//=============================================================================================
//=============================================================================================
//=============================================================================================
(function ($, Dialog, trigger) {
    Dialog.prototype.remove = function() {
        this.popup.hide();
        this.popup.remove();
        if ($.fx.off) {
            $('div.aui-blanket').remove();
        }
        trigger('remove.dialog', { dialog: this });
    };
})(AJS.$, AJS.Dialog, AJS.trigger);

//=============================================================================================
//=============================================================================================
//=============================================================================================

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-expiry', location = '/feature/expiry/expiry.js' */
define('feature/expiry-checkbox-tree', [
    'jquery',
    'underscore',
    'brace'
], function(
    $,
    _,
    Brace
) {

    'use strict';

    var ExpiryCheckboxTree = Brace.View.extend({
        $block: null,
        $triggers: [],
        initialize: function(options) {
            this.params = options.params || {};

            if (this.params.blockSelector) {
                this.$block = $(this.params.blockSelector);
            }

            var $parent = $(this.params.parentSelector),
                    $children = $(this.params.childrenSelector);

            this.$triggers = $children.add($parent);

            if ($parent.is(':checked')) {
                checkboxTree.cascadeToChildren($parent, $children, checkboxTree.DISABLE_CHILDREN_ON_PARENT_CHECKED);
            }

            $parent.on('change', _.bind(function() {
                checkboxTree.cascadeToChildren($parent, $children, checkboxTree.DISABLE_CHILDREN_ON_PARENT_CHECKED);
                this.changeBlockVisibility();
            }, this));

            $children.on('change', _.bind(this.changeBlockVisibility, this));

            this.changeBlockVisibility();
        },

        changeBlockVisibility: function() {
            if (!this.$block) {
                return;
            }

            var isBlockVisible = this.$triggers.is(':checked');
            this.$block.toggle(isBlockVisible);
        }
    });

    return ExpiryCheckboxTree;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-flag', location = 'src/js/aui/flag.js' */
("undefined"===typeof window?global:window).__6db1c5a3f4789789a8fb305e878b4d3a=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function g(a){var a=c.default.extend({},l,a),b,e=a,e=(0,m.default)('<div class="aui-flag"><div class="aui-message aui-message-{type} {type} {closeable} shadowed"><p class="title"><strong>{title}</strong></p>{body}<\!-- .aui-message --\></div></div>').fill({"body:html":e.body||"",closeable:"never"===e.close?"":"closeable",title:e.title||"",type:e.type}).toString();
b=(0,c.default)(e);b[0].close=function(){h(b)};"auto"===a.close?(j(b),b.find(".aui-message").addClass("aui-will-close"),setTimeout(function(){b[0].close()},n)):"manual"===a.close&&j(b);(0,c.default)("#"+i).find(".aui-flag").get().forEach(function(a){a.getAttribute("aria-hidden")==="true"&&(0,c.default)(a).remove()});a=(0,c.default)("#"+i);a.length||(a=(0,c.default)('<div id="'+i+'"></div>'),(0,c.default)("body").prepend(a));b.appendTo(a);(0,o.recomputeStyle)(b);return b.attr("aria-hidden","false")[0]}
function j(a){var b=(0,c.default)('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');b.click(function(){h(a)});b.keypress(function(b){if(b.which===k.default.ENTER||b.which===k.default.SPACE)h(a),b.preventDefault()});return a.find(".aui-message").append(b)[0]}function h(a){a=a.get(0);a.setAttribute("aria-hidden","true");a.dispatchEvent(new p.default("aui-flag-close",{bubbles:!0}));return a}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var c=d(__bd7207540b95ff683caa1d3c0bfcc3d7),
o=__5751b8a604ec61b53b208676ae78d41d,q=d(__65f46acd493e225a8705ab04389e284d),r=d(__9a668cbde1e182d8e721c23580356df2),k=d(__3f6f6650e96d80fefaaf71feed8f822b),m=d(__c4f1078a82b494cc09b37e0114acf4c9),p=d(__b4f5303c3f6b97d2fd503b5013ff8de7),n=5E3,i="aui-flag-container",l={body:"",close:"manual",title:"",type:"info"};(0,q.default)("aui/flag",g);(0,r.default)("flag",g);f.default=g;return f=f["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/util/shims/backbone.js' */
define('backbone', function() {
    return window.Backbone;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/bower/backbone.babysitter/backbone.babysitter.js' */
// Backbone.BabySitter
// -------------------
// v0.1.6
//
// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.babysitter

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  'use strict';

  var previousChildViewContainer = Backbone.ChildViewContainer;

  // BabySitter.ChildViewContainer
  // -----------------------------
  //
  // Provide a container to store, retrieve and
  // shut down child views.
  
  Backbone.ChildViewContainer = (function (Backbone, _) {
  
    // Container Constructor
    // ---------------------
  
    var Container = function(views){
      this._views = {};
      this._indexByModel = {};
      this._indexByCustom = {};
      this._updateLength();
  
      _.each(views, this.add, this);
    };
  
    // Container Methods
    // -----------------
  
    _.extend(Container.prototype, {
  
      // Add a view to this container. Stores the view
      // by `cid` and makes it searchable by the model
      // cid (and model itself). Optionally specify
      // a custom key to store an retrieve the view.
      add: function(view, customIndex){
        var viewCid = view.cid;
  
        // store the view
        this._views[viewCid] = view;
  
        // index it by model
        if (view.model){
          this._indexByModel[view.model.cid] = viewCid;
        }
  
        // index by custom
        if (customIndex){
          this._indexByCustom[customIndex] = viewCid;
        }
  
        this._updateLength();
        return this;
      },
  
      // Find a view by the model that was attached to
      // it. Uses the model's `cid` to find it.
      findByModel: function(model){
        return this.findByModelCid(model.cid);
      },
  
      // Find a view by the `cid` of the model that was attached to
      // it. Uses the model's `cid` to find the view `cid` and
      // retrieve the view using it.
      findByModelCid: function(modelCid){
        var viewCid = this._indexByModel[modelCid];
        return this.findByCid(viewCid);
      },
  
      // Find a view by a custom indexer.
      findByCustom: function(index){
        var viewCid = this._indexByCustom[index];
        return this.findByCid(viewCid);
      },
  
      // Find by index. This is not guaranteed to be a
      // stable index.
      findByIndex: function(index){
        return _.values(this._views)[index];
      },
  
      // retrieve a view by its `cid` directly
      findByCid: function(cid){
        return this._views[cid];
      },
  
      // Remove a view
      remove: function(view){
        var viewCid = view.cid;
  
        // delete model index
        if (view.model){
          delete this._indexByModel[view.model.cid];
        }
  
        // delete custom index
        _.any(this._indexByCustom, function(cid, key) {
          if (cid === viewCid) {
            delete this._indexByCustom[key];
            return true;
          }
        }, this);
  
        // remove the view from the container
        delete this._views[viewCid];
  
        // update the length
        this._updateLength();
        return this;
      },
  
      // Call a method on every view in the container,
      // passing parameters to the call method one at a
      // time, like `function.call`.
      call: function(method){
        this.apply(method, _.tail(arguments));
      },
  
      // Apply a method on every view in the container,
      // passing parameters to the call method one at a
      // time, like `function.apply`.
      apply: function(method, args){
        _.each(this._views, function(view){
          if (_.isFunction(view[method])){
            view[method].apply(view, args || []);
          }
        });
      },
  
      // Update the `.length` attribute on this container
      _updateLength: function(){
        this.length = _.size(this._views);
      }
    });
  
    // Borrowing this code from Backbone.Collection:
    // http://backbonejs.org/docs/backbone.html#section-106
    //
    // Mix in methods from Underscore, for iteration, and other
    // collection related features.
    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',
      'select', 'reject', 'every', 'all', 'some', 'any', 'include',
      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',
      'last', 'without', 'isEmpty', 'pluck', 'reduce'];
  
    _.each(methods, function(method) {
      Container.prototype[method] = function() {
        var views = _.values(this._views);
        var args = [views].concat(_.toArray(arguments));
        return _[method].apply(_, args);
      };
    });
  
    // return the public API
    return Container;
  })(Backbone, _);
  

  Backbone.ChildViewContainer.VERSION = '0.1.6';

  Backbone.ChildViewContainer.noConflict = function () {
    Backbone.ChildViewContainer = previousChildViewContainer;
    return this;
  };

  return Backbone.ChildViewContainer;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/bower/backbone.marionette/backbone.marionette.js' */
// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v2.4.1
//
// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore', 'backbone.wreqr', 'backbone.babysitter'], function(Backbone, _) {
      return (root.Marionette = root.Mn = factory(root, Backbone, _));
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    var Wreqr = require('backbone.wreqr');
    var BabySitter = require('backbone.babysitter');
    module.exports = factory(root, Backbone, _);
  } else {
    root.Marionette = root.Mn = factory(root, root.Backbone, root._);
  }

}(this, function(root, Backbone, _) {
  'use strict';

  var previousMarionette = root.Marionette;
  var previousMn = root.Mn;

  var Marionette = Backbone.Marionette = {};

  Marionette.VERSION = '2.4.1';

  Marionette.noConflict = function() {
    root.Marionette = previousMarionette;
    root.Mn = previousMn;
    return this;
  };

  // Get the Deferred creator for later use
  Marionette.Deferred = Backbone.$.Deferred;

  Marionette.FEATURES = {
  };
  
  Marionette.isEnabled = function(name) {
    return !!Marionette.FEATURES[name];
  };
  
  /* jshint unused: false *//* global console */
  
  // Helpers
  // -------
  
  // Marionette.extend
  // -----------------
  
  // Borrow the Backbone `extend` method so we can use it as needed
  Marionette.extend = Backbone.Model.extend;
  
  // Marionette.isNodeAttached
  // -------------------------
  
  // Determine if `el` is a child of the document
  Marionette.isNodeAttached = function(el) {
    return Backbone.$.contains(document.documentElement, el);
  };
  
  // Merge `keys` from `options` onto `this`
  Marionette.mergeOptions = function(options, keys) {
    if (!options) { return; }
    _.extend(this, _.pick(options, keys));
  };
  
  // Marionette.getOption
  // --------------------
  
  // Retrieve an object, function or other value from a target
  // object or its `options`, with `options` taking precedence.
  Marionette.getOption = function(target, optionName) {
    if (!target || !optionName) { return; }
    if (target.options && (target.options[optionName] !== undefined)) {
      return target.options[optionName];
    } else {
      return target[optionName];
    }
  };
  
  // Proxy `Marionette.getOption`
  Marionette.proxyGetOption = function(optionName) {
    return Marionette.getOption(this, optionName);
  };
  
  // Similar to `_.result`, this is a simple helper
  // If a function is provided we call it with context
  // otherwise just return the value. If the value is
  // undefined return a default value
  Marionette._getValue = function(value, context, params) {
    if (_.isFunction(value)) {
      value = params ? value.apply(context, params) : value.call(context);
    }
    return value;
  };
  
  // Marionette.normalizeMethods
  // ----------------------
  
  // Pass in a mapping of events => functions or function names
  // and return a mapping of events => functions
  Marionette.normalizeMethods = function(hash) {
    return _.reduce(hash, function(normalizedHash, method, name) {
      if (!_.isFunction(method)) {
        method = this[method];
      }
      if (method) {
        normalizedHash[name] = method;
      }
      return normalizedHash;
    }, {}, this);
  };
  
  // utility method for parsing @ui. syntax strings
  // into associated selector
  Marionette.normalizeUIString = function(uiString, ui) {
    return uiString.replace(/@ui\.[a-zA-Z_$0-9]*/g, function(r) {
      return ui[r.slice(4)];
    });
  };
  
  // allows for the use of the @ui. syntax within
  // a given key for triggers and events
  // swaps the @ui with the associated selector.
  // Returns a new, non-mutated, parsed events hash.
  Marionette.normalizeUIKeys = function(hash, ui) {
    return _.reduce(hash, function(memo, val, key) {
      var normalizedKey = Marionette.normalizeUIString(key, ui);
      memo[normalizedKey] = val;
      return memo;
    }, {});
  };
  
  // allows for the use of the @ui. syntax within
  // a given value for regions
  // swaps the @ui with the associated selector
  Marionette.normalizeUIValues = function(hash, ui, properties) {
    _.each(hash, function(val, key) {
      if (_.isString(val)) {
        hash[key] = Marionette.normalizeUIString(val, ui);
      } else if (_.isObject(val) && _.isArray(properties)) {
        _.extend(val, Marionette.normalizeUIValues(_.pick(val, properties), ui));
        /* Value is an object, and we got an array of embedded property names to normalize. */
        _.each(properties, function(property) {
          var propertyVal = val[property];
          if (_.isString(propertyVal)) {
            val[property] = Marionette.normalizeUIString(propertyVal, ui);
          }
        });
      }
    });
    return hash;
  };
  
  // Mix in methods from Underscore, for iteration, and other
  // collection related features.
  // Borrowing this code from Backbone.Collection:
  // http://backbonejs.org/docs/backbone.html#section-121
  Marionette.actAsCollection = function(object, listProperty) {
    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',
      'select', 'reject', 'every', 'all', 'some', 'any', 'include',
      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',
      'last', 'without', 'isEmpty', 'pluck'];
  
    _.each(methods, function(method) {
      object[method] = function() {
        var list = _.values(_.result(this, listProperty));
        var args = [list].concat(_.toArray(arguments));
        return _[method].apply(_, args);
      };
    });
  };
  
  var deprecate = Marionette.deprecate = function(message, test) {
    if (_.isObject(message)) {
      message = (
        message.prev + ' is going to be removed in the future. ' +
        'Please use ' + message.next + ' instead.' +
        (message.url ? ' See: ' + message.url : '')
      );
    }
  
    if ((test === undefined || !test) && !deprecate._cache[message]) {
      deprecate._warn('Deprecation warning: ' + message);
      deprecate._cache[message] = true;
    }
  };
  
  deprecate._warn = typeof console !== 'undefined' && (console.warn || console.log) || function() {};
  deprecate._cache = {};
  
  /* jshint maxstatements: 14, maxcomplexity: 7 */
  
  // Trigger Method
  // --------------
  
  Marionette._triggerMethod = (function() {
    // split the event name on the ":"
    var splitter = /(^|:)(\w)/gi;
  
    // take the event section ("section1:section2:section3")
    // and turn it in to uppercase name
    function getEventName(match, prefix, eventName) {
      return eventName.toUpperCase();
    }
  
    return function(context, event, args) {
      var noEventArg = arguments.length < 3;
      if (noEventArg) {
        args = event;
        event = args[0];
      }
  
      // get the method name from the event name
      var methodName = 'on' + event.replace(splitter, getEventName);
      var method = context[methodName];
      var result;
  
      // call the onMethodName if it exists
      if (_.isFunction(method)) {
        // pass all args, except the event name
        result = method.apply(context, noEventArg ? _.rest(args) : args);
      }
  
      // trigger the event, if a trigger method exists
      if (_.isFunction(context.trigger)) {
        if (noEventArg + args.length > 1) {
          context.trigger.apply(context, noEventArg ? args : [event].concat(_.drop(args, 0)));
        } else {
          context.trigger(event);
        }
      }
  
      return result;
    };
  })();
  
  // Trigger an event and/or a corresponding method name. Examples:
  //
  // `this.triggerMethod("foo")` will trigger the "foo" event and
  // call the "onFoo" method.
  //
  // `this.triggerMethod("foo:bar")` will trigger the "foo:bar" event and
  // call the "onFooBar" method.
  Marionette.triggerMethod = function(event) {
    return Marionette._triggerMethod(this, arguments);
  };
  
  // triggerMethodOn invokes triggerMethod on a specific context
  //
  // e.g. `Marionette.triggerMethodOn(view, 'show')`
  // will trigger a "show" event or invoke onShow the view.
  Marionette.triggerMethodOn = function(context) {
    var fnc = _.isFunction(context.triggerMethod) ?
                  context.triggerMethod :
                  Marionette.triggerMethod;
  
    return fnc.apply(context, _.rest(arguments));
  };
  
  // DOM Refresh
  // -----------
  
  // Monitor a view's state, and after it has been rendered and shown
  // in the DOM, trigger a "dom:refresh" event every time it is
  // re-rendered.
  
  Marionette.MonitorDOMRefresh = function(view) {
  
    // track when the view has been shown in the DOM,
    // using a Marionette.Region (or by other means of triggering "show")
    function handleShow() {
      view._isShown = true;
      triggerDOMRefresh();
    }
  
    // track when the view has been rendered
    function handleRender() {
      view._isRendered = true;
      triggerDOMRefresh();
    }
  
    // Trigger the "dom:refresh" event and corresponding "onDomRefresh" method
    function triggerDOMRefresh() {
      if (view._isShown && view._isRendered && Marionette.isNodeAttached(view.el)) {
        if (_.isFunction(view.triggerMethod)) {
          view.triggerMethod('dom:refresh');
        }
      }
    }
  
    view.on({
      show: handleShow,
      render: handleRender
    });
  };
  
  /* jshint maxparams: 5 */
  
  // Bind Entity Events & Unbind Entity Events
  // -----------------------------------------
  //
  // These methods are used to bind/unbind a backbone "entity" (e.g. collection/model)
  // to methods on a target object.
  //
  // The first parameter, `target`, must have the Backbone.Events module mixed in.
  //
  // The second parameter is the `entity` (Backbone.Model, Backbone.Collection or
  // any object that has Backbone.Events mixed in) to bind the events from.
  //
  // The third parameter is a hash of { "event:name": "eventHandler" }
  // configuration. Multiple handlers can be separated by a space. A
  // function can be supplied instead of a string handler name.
  
  (function(Marionette) {
    'use strict';
  
    // Bind the event to handlers specified as a string of
    // handler names on the target object
    function bindFromStrings(target, entity, evt, methods) {
      var methodNames = methods.split(/\s+/);
  
      _.each(methodNames, function(methodName) {
  
        var method = target[methodName];
        if (!method) {
          throw new Marionette.Error('Method "' + methodName +
            '" was configured as an event handler, but does not exist.');
        }
  
        target.listenTo(entity, evt, method);
      });
    }
  
    // Bind the event to a supplied callback function
    function bindToFunction(target, entity, evt, method) {
      target.listenTo(entity, evt, method);
    }
  
    // Bind the event to handlers specified as a string of
    // handler names on the target object
    function unbindFromStrings(target, entity, evt, methods) {
      var methodNames = methods.split(/\s+/);
  
      _.each(methodNames, function(methodName) {
        var method = target[methodName];
        target.stopListening(entity, evt, method);
      });
    }
  
    // Bind the event to a supplied callback function
    function unbindToFunction(target, entity, evt, method) {
      target.stopListening(entity, evt, method);
    }
  
    // generic looping function
    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {
      if (!entity || !bindings) { return; }
  
      // type-check bindings
      if (!_.isObject(bindings)) {
        throw new Marionette.Error({
          message: 'Bindings must be an object or function.',
          url: 'marionette.functions.html#marionettebindentityevents'
        });
      }
  
      // allow the bindings to be a function
      bindings = Marionette._getValue(bindings, target);
  
      // iterate the bindings and bind them
      _.each(bindings, function(methods, evt) {
  
        // allow for a function as the handler,
        // or a list of event names as a string
        if (_.isFunction(methods)) {
          functionCallback(target, entity, evt, methods);
        } else {
          stringCallback(target, entity, evt, methods);
        }
  
      });
    }
  
    // Export Public API
    Marionette.bindEntityEvents = function(target, entity, bindings) {
      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);
    };
  
    Marionette.unbindEntityEvents = function(target, entity, bindings) {
      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);
    };
  
    // Proxy `bindEntityEvents`
    Marionette.proxyBindEntityEvents = function(entity, bindings) {
      return Marionette.bindEntityEvents(this, entity, bindings);
    };
  
    // Proxy `unbindEntityEvents`
    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {
      return Marionette.unbindEntityEvents(this, entity, bindings);
    };
  })(Marionette);
  

  // Error
  // -----
  
  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];
  
  Marionette.Error = Marionette.extend.call(Error, {
    urlRoot: 'http://marionettejs.com/docs/v' + Marionette.VERSION + '/',
  
    constructor: function(message, options) {
      if (_.isObject(message)) {
        options = message;
        message = options.message;
      } else if (!options) {
        options = {};
      }
  
      var error = Error.call(this, message);
      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));
  
      this.captureStackTrace();
  
      if (options.url) {
        this.url = this.urlRoot + options.url;
      }
    },
  
    captureStackTrace: function() {
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, Marionette.Error);
      }
    },
  
    toString: function() {
      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');
    }
  });
  
  Marionette.Error.extend = Marionette.extend;
  
  // Callbacks
  // ---------
  
  // A simple way of managing a collection of callbacks
  // and executing them at a later point in time, using jQuery's
  // `Deferred` object.
  Marionette.Callbacks = function() {
    this._deferred = Marionette.Deferred();
    this._callbacks = [];
  };
  
  _.extend(Marionette.Callbacks.prototype, {
  
    // Add a callback to be executed. Callbacks added here are
    // guaranteed to execute, even if they are added after the
    // `run` method is called.
    add: function(callback, contextOverride) {
      var promise = _.result(this._deferred, 'promise');
  
      this._callbacks.push({cb: callback, ctx: contextOverride});
  
      promise.then(function(args) {
        if (contextOverride) { args.context = contextOverride; }
        callback.call(args.context, args.options);
      });
    },
  
    // Run all registered callbacks with the context specified.
    // Additional callbacks can be added after this has been run
    // and they will still be executed.
    run: function(options, context) {
      this._deferred.resolve({
        options: options,
        context: context
      });
    },
  
    // Resets the list of callbacks to be run, allowing the same list
    // to be run multiple times - whenever the `run` method is called.
    reset: function() {
      var callbacks = this._callbacks;
      this._deferred = Marionette.Deferred();
      this._callbacks = [];
  
      _.each(callbacks, function(cb) {
        this.add(cb.cb, cb.ctx);
      }, this);
    }
  });
  
  // Controller
  // ----------
  
  // A multi-purpose object to use as a controller for
  // modules and routers, and as a mediator for workflow
  // and coordination of other objects, views, and more.
  Marionette.Controller = function(options) {
    this.options = options || {};
  
    if (_.isFunction(this.initialize)) {
      this.initialize(this.options);
    }
  };
  
  Marionette.Controller.extend = Marionette.extend;
  
  // Controller Methods
  // --------------
  
  // Ensure it can trigger events with Backbone.Events
  _.extend(Marionette.Controller.prototype, Backbone.Events, {
    destroy: function() {
      Marionette._triggerMethod(this, 'before:destroy', arguments);
      Marionette._triggerMethod(this, 'destroy', arguments);
  
      this.stopListening();
      this.off();
      return this;
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod,
  
    // A handy way to merge options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption
  
  });
  
  // Object
  // ------
  
  // A Base Class that other Classes should descend from.
  // Object borrows many conventions and utilities from Backbone.
  Marionette.Object = function(options) {
    this.options = _.extend({}, _.result(this, 'options'), options);
  
    this.initialize.apply(this, arguments);
  };
  
  Marionette.Object.extend = Marionette.extend;
  
  // Object Methods
  // --------------
  
  // Ensure it can trigger events with Backbone.Events
  _.extend(Marionette.Object.prototype, Backbone.Events, {
  
    //this is a noop method intended to be overridden by classes that extend from this base
    initialize: function() {},
  
    destroy: function() {
      this.triggerMethod('before:destroy');
      this.triggerMethod('destroy');
      this.stopListening();
  
      return this;
    },
  
    // Import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod,
  
    // A handy way to merge options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    // Proxy `bindEntityEvents` to enable binding view's events from another entity.
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  /* jshint maxcomplexity: 16, maxstatements: 45, maxlen: 120 */
  
  // Region
  // ------
  
  // Manage the visual regions of your composite application. See
  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/
  
  Marionette.Region = Marionette.Object.extend({
    constructor: function(options) {
  
      // set options temporarily so that we can get `el`.
      // options will be overriden by Object.constructor
      this.options = options || {};
      this.el = this.getOption('el');
  
      // Handle when this.el is passed in as a $ wrapped element.
      this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;
  
      if (!this.el) {
        throw new Marionette.Error({
          name: 'NoElError',
          message: 'An "el" must be specified for a region.'
        });
      }
  
      this.$el = this.getEl(this.el);
      Marionette.Object.call(this, options);
    },
  
    // Displays a backbone view instance inside of the region.
    // Handles calling the `render` method for you. Reads content
    // directly from the `el` attribute. Also calls an optional
    // `onShow` and `onDestroy` method on your view, just after showing
    // or just before destroying the view, respectively.
    // The `preventDestroy` option can be used to prevent a view from
    // the old view being destroyed on show.
    // The `forceShow` option can be used to force a view to be
    // re-rendered if it's already shown in the region.
    show: function(view, options) {
      if (!this._ensureElement()) {
        return;
      }
  
      this._ensureViewIsIntact(view);
  
      var showOptions     = options || {};
      var isDifferentView = view !== this.currentView;
      var preventDestroy  = !!showOptions.preventDestroy;
      var forceShow       = !!showOptions.forceShow;
  
      // We are only changing the view if there is a current view to change to begin with
      var isChangingView = !!this.currentView;
  
      // Only destroy the current view if we don't want to `preventDestroy` and if
      // the view given in the first argument is different than `currentView`
      var _shouldDestroyView = isDifferentView && !preventDestroy;
  
      // Only show the view given in the first argument if it is different than
      // the current view or if we want to re-show the view. Note that if
      // `_shouldDestroyView` is true, then `_shouldShowView` is also necessarily true.
      var _shouldShowView = isDifferentView || forceShow;
  
      if (isChangingView) {
        this.triggerMethod('before:swapOut', this.currentView, this, options);
      }
  
      if (this.currentView) {
        delete this.currentView._parent;
      }
  
      if (_shouldDestroyView) {
        this.empty();
  
      // A `destroy` event is attached to the clean up manually removed views.
      // We need to detach this event when a new view is going to be shown as it
      // is no longer relevant.
      } else if (isChangingView && _shouldShowView) {
        this.currentView.off('destroy', this.empty, this);
      }
  
      if (_shouldShowView) {
  
        // We need to listen for if a view is destroyed
        // in a way other than through the region.
        // If this happens we need to remove the reference
        // to the currentView since once a view has been destroyed
        // we can not reuse it.
        view.once('destroy', this.empty, this);
        view.render();
  
        view._parent = this;
  
        if (isChangingView) {
          this.triggerMethod('before:swap', view, this, options);
        }
  
        this.triggerMethod('before:show', view, this, options);
        Marionette.triggerMethodOn(view, 'before:show', view, this, options);
  
        if (isChangingView) {
          this.triggerMethod('swapOut', this.currentView, this, options);
        }
  
        // An array of views that we're about to display
        var attachedRegion = Marionette.isNodeAttached(this.el);
  
        // The views that we're about to attach to the document
        // It's important that we prevent _getNestedViews from being executed unnecessarily
        // as it's a potentially-slow method
        var displayedViews = [];
  
        var triggerBeforeAttach = showOptions.triggerBeforeAttach || this.triggerBeforeAttach;
        var triggerAttach = showOptions.triggerAttach || this.triggerAttach;
  
        if (attachedRegion && triggerBeforeAttach) {
          displayedViews = this._displayedViews(view);
          this._triggerAttach(displayedViews, 'before:');
        }
  
        this.attachHtml(view);
        this.currentView = view;
  
        if (attachedRegion && triggerAttach) {
          displayedViews = this._displayedViews(view);
          this._triggerAttach(displayedViews);
        }
  
        if (isChangingView) {
          this.triggerMethod('swap', view, this, options);
        }
  
        this.triggerMethod('show', view, this, options);
        Marionette.triggerMethodOn(view, 'show', view, this, options);
  
        return this;
      }
  
      return this;
    },
  
    triggerBeforeAttach: true,
    triggerAttach: true,
  
    _triggerAttach: function(views, prefix) {
      var eventName = (prefix || '') + 'attach';
      _.each(views, function(view) {
        Marionette.triggerMethodOn(view, eventName, view, this);
      }, this);
    },
  
    _displayedViews: function(view) {
      return _.union([view], _.result(view, '_getNestedViews') || []);
    },
  
    _ensureElement: function() {
      if (!_.isObject(this.el)) {
        this.$el = this.getEl(this.el);
        this.el = this.$el[0];
      }
  
      if (!this.$el || this.$el.length === 0) {
        if (this.getOption('allowMissingEl')) {
          return false;
        } else {
          throw new Marionette.Error('An "el" ' + this.$el.selector + ' must exist in DOM');
        }
      }
      return true;
    },
  
    _ensureViewIsIntact: function(view) {
      if (!view) {
        throw new Marionette.Error({
          name: 'ViewNotValid',
          message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'
        });
      }
  
      if (view.isDestroyed) {
        throw new Marionette.Error({
          name: 'ViewDestroyedError',
          message: 'View (cid: "' + view.cid + '") has already been destroyed and cannot be used.'
        });
      }
    },
  
    // Override this method to change how the region finds the DOM
    // element that it manages. Return a jQuery selector object scoped
    // to a provided parent el or the document if none exists.
    getEl: function(el) {
      return Backbone.$(el, Marionette._getValue(this.options.parentEl, this));
    },
  
    // Override this method to change how the new view is
    // appended to the `$el` that the region is managing
    attachHtml: function(view) {
      this.$el.contents().detach();
  
      this.el.appendChild(view.el);
    },
  
    // Destroy the current view, if there is one. If there is no
    // current view, it does nothing and returns immediately.
    empty: function(options) {
      var view = this.currentView;
  
      var preventDestroy = Marionette._getValue(options, 'preventDestroy', this);
      // If there is no view in the region
      // we should not remove anything
      if (!view) { return; }
  
      view.off('destroy', this.empty, this);
      this.triggerMethod('before:empty', view);
      if (!preventDestroy) {
        this._destroyView();
      }
      this.triggerMethod('empty', view);
  
      // Remove region pointer to the currentView
      delete this.currentView;
  
      if (preventDestroy) {
        this.$el.contents().detach();
      }
  
      return this;
    },
  
    // call 'destroy' or 'remove', depending on which is found
    // on the view (if showing a raw Backbone view or a Marionette View)
    _destroyView: function() {
      var view = this.currentView;
  
      if (view.destroy && !view.isDestroyed) {
        view.destroy();
      } else if (view.remove) {
        view.remove();
  
        // appending isDestroyed to raw Backbone View allows regions
        // to throw a ViewDestroyedError for this view
        view.isDestroyed = true;
      }
    },
  
    // Attach an existing view to the region. This
    // will not call `render` or `onShow` for the new view,
    // and will not replace the current HTML for the `el`
    // of the region.
    attachView: function(view) {
      this.currentView = view;
      return this;
    },
  
    // Checks whether a view is currently present within
    // the region. Returns `true` if there is and `false` if
    // no view is present.
    hasView: function() {
      return !!this.currentView;
    },
  
    // Reset the region by destroying any existing view and
    // clearing out the cached `$el`. The next time a view
    // is shown via this region, the region will re-query the
    // DOM for the region's `el`.
    reset: function() {
      this.empty();
  
      if (this.$el) {
        this.el = this.$el.selector;
      }
  
      delete this.$el;
      return this;
    }
  
  },
  
  // Static Methods
  {
  
    // Build an instance of a region by passing in a configuration object
    // and a default region class to use if none is specified in the config.
    //
    // The config object should either be a string as a jQuery DOM selector,
    // a Region class directly, or an object literal that specifies a selector,
    // a custom regionClass, and any options to be supplied to the region:
    //
    // ```js
    // {
    //   selector: "#foo",
    //   regionClass: MyCustomRegion,
    //   allowMissingEl: false
    // }
    // ```
    //
    buildRegion: function(regionConfig, DefaultRegionClass) {
      if (_.isString(regionConfig)) {
        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);
      }
  
      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {
        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);
      }
  
      if (_.isFunction(regionConfig)) {
        return this._buildRegionFromRegionClass(regionConfig);
      }
  
      throw new Marionette.Error({
        message: 'Improper region configuration type.',
        url: 'marionette.region.html#region-configuration-types'
      });
    },
  
    // Build the region from a string selector like '#foo-region'
    _buildRegionFromSelector: function(selector, DefaultRegionClass) {
      return new DefaultRegionClass({el: selector});
    },
  
    // Build the region from a configuration object
    // ```js
    // { selector: '#foo', regionClass: FooRegion, allowMissingEl: false }
    // ```
    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {
      var RegionClass = regionConfig.regionClass || DefaultRegionClass;
      var options = _.omit(regionConfig, 'selector', 'regionClass');
  
      if (regionConfig.selector && !options.el) {
        options.el = regionConfig.selector;
      }
  
      return new RegionClass(options);
    },
  
    // Build the region directly from a given `RegionClass`
    _buildRegionFromRegionClass: function(RegionClass) {
      return new RegionClass();
    }
  });
  
  // Region Manager
  // --------------
  
  // Manage one or more related `Marionette.Region` objects.
  Marionette.RegionManager = Marionette.Controller.extend({
    constructor: function(options) {
      this._regions = {};
      this.length = 0;
  
      Marionette.Controller.call(this, options);
  
      this.addRegions(this.getOption('regions'));
    },
  
    // Add multiple regions using an object literal or a
    // function that returns an object literal, where
    // each key becomes the region name, and each value is
    // the region definition.
    addRegions: function(regionDefinitions, defaults) {
      regionDefinitions = Marionette._getValue(regionDefinitions, this, arguments);
  
      return _.reduce(regionDefinitions, function(regions, definition, name) {
        if (_.isString(definition)) {
          definition = {selector: definition};
        }
        if (definition.selector) {
          definition = _.defaults({}, definition, defaults);
        }
  
        regions[name] = this.addRegion(name, definition);
        return regions;
      }, {}, this);
    },
  
    // Add an individual region to the region manager,
    // and return the region instance
    addRegion: function(name, definition) {
      var region;
  
      if (definition instanceof Marionette.Region) {
        region = definition;
      } else {
        region = Marionette.Region.buildRegion(definition, Marionette.Region);
      }
  
      this.triggerMethod('before:add:region', name, region);
  
      region._parent = this;
      this._store(name, region);
  
      this.triggerMethod('add:region', name, region);
      return region;
    },
  
    // Get a region by name
    get: function(name) {
      return this._regions[name];
    },
  
    // Gets all the regions contained within
    // the `regionManager` instance.
    getRegions: function() {
      return _.clone(this._regions);
    },
  
    // Remove a region by name
    removeRegion: function(name) {
      var region = this._regions[name];
      this._remove(name, region);
  
      return region;
    },
  
    // Empty all regions in the region manager, and
    // remove them
    removeRegions: function() {
      var regions = this.getRegions();
      _.each(this._regions, function(region, name) {
        this._remove(name, region);
      }, this);
  
      return regions;
    },
  
    // Empty all regions in the region manager, but
    // leave them attached
    emptyRegions: function() {
      var regions = this.getRegions();
      _.invoke(regions, 'empty');
      return regions;
    },
  
    // Destroy all regions and shut down the region
    // manager entirely
    destroy: function() {
      this.removeRegions();
      return Marionette.Controller.prototype.destroy.apply(this, arguments);
    },
  
    // internal method to store regions
    _store: function(name, region) {
      if (!this._regions[name]) {
        this.length++;
      }
  
      this._regions[name] = region;
    },
  
    // internal method to remove a region
    _remove: function(name, region) {
      this.triggerMethod('before:remove:region', name, region);
      region.empty();
      region.stopListening();
  
      delete region._parent;
      delete this._regions[name];
      this.length--;
      this.triggerMethod('remove:region', name, region);
    }
  });
  
  Marionette.actAsCollection(Marionette.RegionManager.prototype, '_regions');
  

  // Template Cache
  // --------------
  
  // Manage templates stored in `<script>` blocks,
  // caching them for faster access.
  Marionette.TemplateCache = function(templateId) {
    this.templateId = templateId;
  };
  
  // TemplateCache object-level methods. Manage the template
  // caches from these method calls instead of creating
  // your own TemplateCache instances
  _.extend(Marionette.TemplateCache, {
    templateCaches: {},
  
    // Get the specified template by id. Either
    // retrieves the cached version, or loads it
    // from the DOM.
    get: function(templateId, options) {
      var cachedTemplate = this.templateCaches[templateId];
  
      if (!cachedTemplate) {
        cachedTemplate = new Marionette.TemplateCache(templateId);
        this.templateCaches[templateId] = cachedTemplate;
      }
  
      return cachedTemplate.load(options);
    },
  
    // Clear templates from the cache. If no arguments
    // are specified, clears all templates:
    // `clear()`
    //
    // If arguments are specified, clears each of the
    // specified templates from the cache:
    // `clear("#t1", "#t2", "...")`
    clear: function() {
      var i;
      var args = _.toArray(arguments);
      var length = args.length;
  
      if (length > 0) {
        for (i = 0; i < length; i++) {
          delete this.templateCaches[args[i]];
        }
      } else {
        this.templateCaches = {};
      }
    }
  });
  
  // TemplateCache instance methods, allowing each
  // template cache object to manage its own state
  // and know whether or not it has been loaded
  _.extend(Marionette.TemplateCache.prototype, {
  
    // Internal method to load the template
    load: function(options) {
      // Guard clause to prevent loading this template more than once
      if (this.compiledTemplate) {
        return this.compiledTemplate;
      }
  
      // Load the template and compile it
      var template = this.loadTemplate(this.templateId, options);
      this.compiledTemplate = this.compileTemplate(template, options);
  
      return this.compiledTemplate;
    },
  
    // Load a template from the DOM, by default. Override
    // this method to provide your own template retrieval
    // For asynchronous loading with AMD/RequireJS, consider
    // using a template-loader plugin as described here:
    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs
    loadTemplate: function(templateId, options) {
      var template = Backbone.$(templateId).html();
  
      if (!template || template.length === 0) {
        throw new Marionette.Error({
          name: 'NoTemplateError',
          message: 'Could not find template: "' + templateId + '"'
        });
      }
  
      return template;
    },
  
    // Pre-compile the template before caching it. Override
    // this method if you do not need to pre-compile a template
    // (JST / RequireJS for example) or if you want to change
    // the template engine used (Handebars, etc).
    compileTemplate: function(rawTemplate, options) {
      return _.template(rawTemplate, options);
    }
  });
  
  // Renderer
  // --------
  
  // Render a template with data by passing in the template
  // selector and the data to render.
  Marionette.Renderer = {
  
    // Render a template with data. The `template` parameter is
    // passed to the `TemplateCache` object to retrieve the
    // template function. Override this method to provide your own
    // custom rendering and template handling for all of Marionette.
    render: function(template, data) {
      if (!template) {
        throw new Marionette.Error({
          name: 'TemplateNotFoundError',
          message: 'Cannot render the template since its false, null or undefined.'
        });
      }
  
      var templateFunc = _.isFunction(template) ? template : Marionette.TemplateCache.get(template);
  
      return templateFunc(data);
    }
  };
  

  /* jshint maxlen: 114, nonew: false */
  // View
  // ----
  
  // The core view class that other Marionette views extend from.
  Marionette.View = Backbone.View.extend({
    isDestroyed: false,
  
    constructor: function(options) {
      _.bindAll(this, 'render');
  
      options = Marionette._getValue(options, this);
  
      // this exposes view options to the view initializer
      // this is a backfill since backbone removed the assignment
      // of this.options
      // at some point however this may be removed
      this.options = _.extend({}, _.result(this, 'options'), options);
  
      this._behaviors = Marionette.Behaviors(this);
  
      Backbone.View.call(this, this.options);
  
      Marionette.MonitorDOMRefresh(this);
    },
  
    // Get the template for this view
    // instance. You can set a `template` attribute in the view
    // definition or pass a `template: "whatever"` parameter in
    // to the constructor options.
    getTemplate: function() {
      return this.getOption('template');
    },
  
    // Serialize a model by returning its attributes. Clones
    // the attributes to allow modification.
    serializeModel: function(model) {
      return model.toJSON.apply(model, _.rest(arguments));
    },
  
    // Mix in template helper methods. Looks for a
    // `templateHelpers` attribute, which can either be an
    // object literal, or a function that returns an object
    // literal. All methods and attributes from this object
    // are copies to the object passed in.
    mixinTemplateHelpers: function(target) {
      target = target || {};
      var templateHelpers = this.getOption('templateHelpers');
      templateHelpers = Marionette._getValue(templateHelpers, this);
      return _.extend(target, templateHelpers);
    },
  
    // normalize the keys of passed hash with the views `ui` selectors.
    // `{"@ui.foo": "bar"}`
    normalizeUIKeys: function(hash) {
      var uiBindings = _.result(this, '_uiBindings');
      return Marionette.normalizeUIKeys(hash, uiBindings || _.result(this, 'ui'));
    },
  
    // normalize the values of passed hash with the views `ui` selectors.
    // `{foo: "@ui.bar"}`
    normalizeUIValues: function(hash, properties) {
      var ui = _.result(this, 'ui');
      var uiBindings = _.result(this, '_uiBindings');
      return Marionette.normalizeUIValues(hash, uiBindings || ui, properties);
    },
  
    // Configure `triggers` to forward DOM events to view
    // events. `triggers: {"click .foo": "do:foo"}`
    configureTriggers: function() {
      if (!this.triggers) { return; }
  
      // Allow `triggers` to be configured as a function
      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));
  
      // Configure the triggers, prevent default
      // action and stop propagation of DOM events
      return _.reduce(triggers, function(events, value, key) {
        events[key] = this._buildViewTrigger(value);
        return events;
      }, {}, this);
    },
  
    // Overriding Backbone.View's delegateEvents to handle
    // the `triggers`, `modelEvents`, and `collectionEvents` configuration
    delegateEvents: function(events) {
      this._delegateDOMEvents(events);
      this.bindEntityEvents(this.model, this.getOption('modelEvents'));
      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));
  
      _.each(this._behaviors, function(behavior) {
        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));
        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));
      }, this);
  
      return this;
    },
  
    // internal method to delegate DOM events and triggers
    _delegateDOMEvents: function(eventsArg) {
      var events = Marionette._getValue(eventsArg || this.events, this);
  
      // normalize ui keys
      events = this.normalizeUIKeys(events);
      if (_.isUndefined(eventsArg)) {this.events = events;}
  
      var combinedEvents = {};
  
      // look up if this view has behavior events
      var behaviorEvents = _.result(this, 'behaviorEvents') || {};
      var triggers = this.configureTriggers();
      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};
  
      // behavior events will be overriden by view events and or triggers
      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);
  
      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);
    },
  
    // Overriding Backbone.View's undelegateEvents to handle unbinding
    // the `triggers`, `modelEvents`, and `collectionEvents` config
    undelegateEvents: function() {
      Backbone.View.prototype.undelegateEvents.apply(this, arguments);
  
      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));
      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));
  
      _.each(this._behaviors, function(behavior) {
        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));
        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));
      }, this);
  
      return this;
    },
  
    // Internal helper method to verify whether the view hasn't been destroyed
    _ensureViewIsIntact: function() {
      if (this.isDestroyed) {
        throw new Marionette.Error({
          name: 'ViewDestroyedError',
          message: 'View (cid: "' + this.cid + '") has already been destroyed and cannot be used.'
        });
      }
    },
  
    // Default `destroy` implementation, for removing a view from the
    // DOM and unbinding it. Regions will call this method
    // for you. You can specify an `onDestroy` method in your view to
    // add custom code that is called after the view is destroyed.
    destroy: function() {
      if (this.isDestroyed) { return this; }
  
      var args = _.toArray(arguments);
  
      this.triggerMethod.apply(this, ['before:destroy'].concat(args));
  
      // mark as destroyed before doing the actual destroy, to
      // prevent infinite loops within "destroy" event handlers
      // that are trying to destroy other views
      this.isDestroyed = true;
      this.triggerMethod.apply(this, ['destroy'].concat(args));
  
      // unbind UI elements
      this.unbindUIElements();
  
      this.isRendered = false;
  
      // remove the view from the DOM
      this.remove();
  
      // Call destroy on each behavior after
      // destroying the view.
      // This unbinds event listeners
      // that behaviors have registered for.
      _.invoke(this._behaviors, 'destroy', args);
  
      return this;
    },
  
    bindUIElements: function() {
      this._bindUIElements();
      _.invoke(this._behaviors, this._bindUIElements);
    },
  
    // This method binds the elements specified in the "ui" hash inside the view's code with
    // the associated jQuery selectors.
    _bindUIElements: function() {
      if (!this.ui) { return; }
  
      // store the ui hash in _uiBindings so they can be reset later
      // and so re-rendering the view will be able to find the bindings
      if (!this._uiBindings) {
        this._uiBindings = this.ui;
      }
  
      // get the bindings result, as a function or otherwise
      var bindings = _.result(this, '_uiBindings');
  
      // empty the ui so we don't have anything to start with
      this.ui = {};
  
      // bind each of the selectors
      _.each(bindings, function(selector, key) {
        this.ui[key] = this.$(selector);
      }, this);
    },
  
    // This method unbinds the elements specified in the "ui" hash
    unbindUIElements: function() {
      this._unbindUIElements();
      _.invoke(this._behaviors, this._unbindUIElements);
    },
  
    _unbindUIElements: function() {
      if (!this.ui || !this._uiBindings) { return; }
  
      // delete all of the existing ui bindings
      _.each(this.ui, function($el, name) {
        delete this.ui[name];
      }, this);
  
      // reset the ui element to the original bindings configuration
      this.ui = this._uiBindings;
      delete this._uiBindings;
    },
  
    // Internal method to create an event handler for a given `triggerDef` like
    // 'click:foo'
    _buildViewTrigger: function(triggerDef) {
      var hasOptions = _.isObject(triggerDef);
  
      var options = _.defaults({}, (hasOptions ? triggerDef : {}), {
        preventDefault: true,
        stopPropagation: true
      });
  
      var eventName = hasOptions ? options.event : triggerDef;
  
      return function(e) {
        if (e) {
          if (e.preventDefault && options.preventDefault) {
            e.preventDefault();
          }
  
          if (e.stopPropagation && options.stopPropagation) {
            e.stopPropagation();
          }
        }
  
        var args = {
          view: this,
          model: this.model,
          collection: this.collection
        };
  
        this.triggerMethod(eventName, args);
      };
    },
  
    setElement: function() {
      var ret = Backbone.View.prototype.setElement.apply(this, arguments);
  
      // proxy behavior $el to the view's $el.
      // This is needed because a view's $el proxy
      // is not set until after setElement is called.
      _.invoke(this._behaviors, 'proxyViewProperties', this);
  
      return ret;
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: function() {
      var ret = Marionette._triggerMethod(this, arguments);
  
      this._triggerEventOnBehaviors(arguments);
      this._triggerEventOnParentLayout(arguments[0], _.rest(arguments));
  
      return ret;
    },
  
    _triggerEventOnBehaviors: function(args) {
      var triggerMethod = Marionette._triggerMethod;
      var behaviors = this._behaviors;
      // Use good ol' for as this is a very hot function
      for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {
        triggerMethod(behaviors[i], args);
      }
    },
  
    _triggerEventOnParentLayout: function(eventName, args) {
      var layoutView = this._parentLayoutView();
      if (!layoutView) {
        return;
      }
  
      // invoke triggerMethod on parent view
      var eventPrefix = Marionette.getOption(layoutView, 'childViewEventPrefix');
      var prefixedEventName = eventPrefix + ':' + eventName;
  
      Marionette._triggerMethod(layoutView, [prefixedEventName, this].concat(args));
  
      // call the parent view's childEvents handler
      var childEvents = Marionette.getOption(layoutView, 'childEvents');
      var normalizedChildEvents = layoutView.normalizeMethods(childEvents);
  
      if (!!normalizedChildEvents && _.isFunction(normalizedChildEvents[eventName])) {
        normalizedChildEvents[eventName].apply(layoutView, [this].concat(args));
      }
    },
  
    // This method returns any views that are immediate
    // children of this view
    _getImmediateChildren: function() {
      return [];
    },
  
    // Returns an array of every nested view within this view
    _getNestedViews: function() {
      var children = this._getImmediateChildren();
  
      if (!children.length) { return children; }
  
      return _.reduce(children, function(memo, view) {
        if (!view._getNestedViews) { return memo; }
        return memo.concat(view._getNestedViews());
      }, children);
    },
  
    // Internal utility for building an ancestor
    // view tree list.
    _getAncestors: function() {
      var ancestors = [];
      var parent  = this._parent;
  
      while (parent) {
        ancestors.push(parent);
        parent = parent._parent;
      }
  
      return ancestors;
    },
  
    // Returns the containing parent view.
    _parentLayoutView: function() {
      var ancestors = this._getAncestors();
      return _.find(ancestors, function(parent) {
        return parent instanceof Marionette.LayoutView;
      });
    },
  
    // Imports the "normalizeMethods" to transform hashes of
    // events=>function references/names to a hash of events=>function references
    normalizeMethods: Marionette.normalizeMethods,
  
    // A handy way to merge passed-in options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    // Proxy `bindEntityEvents` to enable binding view's events from another entity.
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  // Item View
  // ---------
  
  // A single item view implementation that contains code for rendering
  // with underscore.js templates, serializing the view's model or collection,
  // and calling several methods on extended views, such as `onRender`.
  Marionette.ItemView = Marionette.View.extend({
  
    // Setting up the inheritance chain which allows changes to
    // Marionette.View.prototype.constructor which allows overriding
    constructor: function() {
      Marionette.View.apply(this, arguments);
    },
  
    // Serialize the model or collection for the view. If a model is
    // found, the view's `serializeModel` is called. If a collection is found,
    // each model in the collection is serialized by calling
    // the view's `serializeCollection` and put into an `items` array in
    // the resulting data. If both are found, defaults to the model.
    // You can override the `serializeData` method in your own view definition,
    // to provide custom serialization for your view's data.
    serializeData: function() {
      if (!this.model && !this.collection) {
        return {};
      }
  
      var args = [this.model || this.collection];
      if (arguments.length) {
        args.push.apply(args, arguments);
      }
  
      if (this.model) {
        return this.serializeModel.apply(this, args);
      } else {
        return {
          items: this.serializeCollection.apply(this, args)
        };
      }
    },
  
    // Serialize a collection by serializing each of its models.
    serializeCollection: function(collection) {
      return collection.toJSON.apply(collection, _.rest(arguments));
    },
  
    // Render the view, defaulting to underscore.js templates.
    // You can override this in your view definition to provide
    // a very specific rendering for your view. In general, though,
    // you should override the `Marionette.Renderer` object to
    // change how Marionette renders views.
    render: function() {
      this._ensureViewIsIntact();
  
      this.triggerMethod('before:render', this);
  
      this._renderTemplate();
      this.isRendered = true;
      this.bindUIElements();
  
      this.triggerMethod('render', this);
  
      return this;
    },
  
    // Internal method to render the template with the serialized data
    // and template helpers via the `Marionette.Renderer` object.
    // Throws an `UndefinedTemplateError` error if the template is
    // any falsely value but literal `false`.
    _renderTemplate: function() {
      var template = this.getTemplate();
  
      // Allow template-less item views
      if (template === false) {
        return;
      }
  
      if (!template) {
        throw new Marionette.Error({
          name: 'UndefinedTemplateError',
          message: 'Cannot render the template since it is null or undefined.'
        });
      }
  
      // Add in entity data and template helpers
      var data = this.mixinTemplateHelpers(this.serializeData());
  
      // Render and add to el
      var html = Marionette.Renderer.render(template, data, this);
      this.attachElContent(html);
  
      return this;
    },
  
    // Attaches the content of a given view.
    // This method can be overridden to optimize rendering,
    // or to render in a non standard way.
    //
    // For example, using `innerHTML` instead of `$el.html`
    //
    // ```js
    // attachElContent: function(html) {
    //   this.el.innerHTML = html;
    //   return this;
    // }
    // ```
    attachElContent: function(html) {
      this.$el.html(html);
  
      return this;
    }
  });
  
  /* jshint maxstatements: 14 */
  
  // Collection View
  // ---------------
  
  // A view that iterates over a Backbone.Collection
  // and renders an individual child view for each model.
  Marionette.CollectionView = Marionette.View.extend({
  
    // used as the prefix for child view events
    // that are forwarded through the collectionview
    childViewEventPrefix: 'childview',
  
    // flag for maintaining the sorted order of the collection
    sort: true,
  
    // constructor
    // option to pass `{sort: false}` to prevent the `CollectionView` from
    // maintaining the sorted order of the collection.
    // This will fallback onto appending childView's to the end.
    //
    // option to pass `{comparator: compFunction()}` to allow the `CollectionView`
    // to use a custom sort order for the collection.
    constructor: function(options) {
  
      this.once('render', this._initialEvents);
      this._initChildViewStorage();
  
      Marionette.View.apply(this, arguments);
  
      this.on('show', this._onShowCalled);
  
      this.initRenderBuffer();
    },
  
    // Instead of inserting elements one by one into the page,
    // it's much more performant to insert elements into a document
    // fragment and then insert that document fragment into the page
    initRenderBuffer: function() {
      this._bufferedChildren = [];
    },
  
    startBuffering: function() {
      this.initRenderBuffer();
      this.isBuffering = true;
    },
  
    endBuffering: function() {
      this.isBuffering = false;
      this._triggerBeforeShowBufferedChildren();
  
      this.attachBuffer(this);
  
      this._triggerShowBufferedChildren();
      this.initRenderBuffer();
    },
  
    _triggerBeforeShowBufferedChildren: function() {
      if (this._isShown) {
        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'before:show'));
      }
    },
  
    _triggerShowBufferedChildren: function() {
      if (this._isShown) {
        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'show'));
  
        this._bufferedChildren = [];
      }
    },
  
    // Internal method for _.each loops to call `Marionette.triggerMethodOn` on
    // a child view
    _triggerMethodOnChild: function(event, childView) {
      Marionette.triggerMethodOn(childView, event);
    },
  
    // Configured the initial events that the collection view
    // binds to.
    _initialEvents: function() {
      if (this.collection) {
        this.listenTo(this.collection, 'add', this._onCollectionAdd);
        this.listenTo(this.collection, 'remove', this._onCollectionRemove);
        this.listenTo(this.collection, 'reset', this.render);
  
        if (this.getOption('sort')) {
          this.listenTo(this.collection, 'sort', this._sortViews);
        }
      }
    },
  
    // Handle a child added to the collection
    _onCollectionAdd: function(child, collection, opts) {
      var index;
      if (opts.at !== undefined) {
        index = opts.at;
      } else {
        index = _.indexOf(this._filteredSortedModels(), child);
      }
  
      if (this._shouldAddChild(child, index)) {
        this.destroyEmptyView();
        var ChildView = this.getChildView(child);
        this.addChild(child, ChildView, index);
      }
    },
  
    // get the child view by model it holds, and remove it
    _onCollectionRemove: function(model) {
      var view = this.children.findByModel(model);
      this.removeChildView(view);
      this.checkEmpty();
    },
  
    _onShowCalled: function() {
      this.children.each(_.partial(this._triggerMethodOnChild, 'show'));
    },
  
    // Render children views. Override this method to
    // provide your own implementation of a render function for
    // the collection view.
    render: function() {
      this._ensureViewIsIntact();
      this.triggerMethod('before:render', this);
      this._renderChildren();
      this.isRendered = true;
      this.triggerMethod('render', this);
      return this;
    },
  
    // Reorder DOM after sorting. When your element's rendering
    // do not use their index, you can pass reorderOnSort: true
    // to only reorder the DOM after a sort instead of rendering
    // all the collectionView
    reorder: function() {
      var children = this.children;
      var models = this._filteredSortedModels();
      var modelsChanged = _.find(models, function(model) {
        return !children.findByModel(model);
      });
  
      // If the models we're displaying have changed due to filtering
      // We need to add and/or remove child views
      // So render as normal
      if (modelsChanged) {
        this.render();
      } else {
        // get the DOM nodes in the same order as the models
        var els = _.map(models, function(model) {
          return children.findByModel(model).el;
        });
  
        // since append moves elements that are already in the DOM,
        // appending the elements will effectively reorder them
        this.triggerMethod('before:reorder');
        this._appendReorderedChildren(els);
        this.triggerMethod('reorder');
      }
    },
  
    // Render view after sorting. Override this method to
    // change how the view renders after a `sort` on the collection.
    // An example of this would be to only `renderChildren` in a `CompositeView`
    // rather than the full view.
    resortView: function() {
      if (Marionette.getOption(this, 'reorderOnSort')) {
        this.reorder();
      } else {
        this.render();
      }
    },
  
    // Internal method. This checks for any changes in the order of the collection.
    // If the index of any view doesn't match, it will render.
    _sortViews: function() {
      var models = this._filteredSortedModels();
  
      // check for any changes in sort order of views
      var orderChanged = _.find(models, function(item, index) {
        var view = this.children.findByModel(item);
        return !view || view._index !== index;
      }, this);
  
      if (orderChanged) {
        this.resortView();
      }
    },
  
    // Internal reference to what index a `emptyView` is.
    _emptyViewIndex: -1,
  
    // Internal method. Separated so that CompositeView can append to the childViewContainer
    // if necessary
    _appendReorderedChildren: function(children) {
      this.$el.append(children);
    },
  
    // Internal method. Separated so that CompositeView can have
    // more control over events being triggered, around the rendering
    // process
    _renderChildren: function() {
      this.destroyEmptyView();
      this.destroyChildren();
  
      if (this.isEmpty(this.collection)) {
        this.showEmptyView();
      } else {
        this.triggerMethod('before:render:collection', this);
        this.startBuffering();
        this.showCollection();
        this.endBuffering();
        this.triggerMethod('render:collection', this);
  
        // If we have shown children and none have passed the filter, show the empty view
        if (this.children.isEmpty()) {
          this.showEmptyView();
        }
      }
    },
  
    // Internal method to loop through collection and show each child view.
    showCollection: function() {
      var ChildView;
  
      var models = this._filteredSortedModels();
  
      _.each(models, function(child, index) {
        ChildView = this.getChildView(child);
        this.addChild(child, ChildView, index);
      }, this);
    },
  
    // Allow the collection to be sorted by a custom view comparator
    _filteredSortedModels: function() {
      var models;
      var viewComparator = this.getViewComparator();
  
      if (viewComparator) {
        if (_.isString(viewComparator) || viewComparator.length === 1) {
          models = this.collection.sortBy(viewComparator, this);
        } else {
          models = _.clone(this.collection.models).sort(_.bind(viewComparator, this));
        }
      } else {
        models = this.collection.models;
      }
  
      // Filter after sorting in case the filter uses the index
      if (this.getOption('filter')) {
        models = _.filter(models, function(model, index) {
          return this._shouldAddChild(model, index);
        }, this);
      }
  
      return models;
    },
  
    // Internal method to show an empty view in place of
    // a collection of child views, when the collection is empty
    showEmptyView: function() {
      var EmptyView = this.getEmptyView();
  
      if (EmptyView && !this._showingEmptyView) {
        this.triggerMethod('before:render:empty');
  
        this._showingEmptyView = true;
        var model = new Backbone.Model();
        this.addEmptyView(model, EmptyView);
  
        this.triggerMethod('render:empty');
      }
    },
  
    // Internal method to destroy an existing emptyView instance
    // if one exists. Called when a collection view has been
    // rendered empty, and then a child is added to the collection.
    destroyEmptyView: function() {
      if (this._showingEmptyView) {
        this.triggerMethod('before:remove:empty');
  
        this.destroyChildren();
        delete this._showingEmptyView;
  
        this.triggerMethod('remove:empty');
      }
    },
  
    // Retrieve the empty view class
    getEmptyView: function() {
      return this.getOption('emptyView');
    },
  
    // Render and show the emptyView. Similar to addChild method
    // but "add:child" events are not fired, and the event from
    // emptyView are not forwarded
    addEmptyView: function(child, EmptyView) {
  
      // get the emptyViewOptions, falling back to childViewOptions
      var emptyViewOptions = this.getOption('emptyViewOptions') ||
                            this.getOption('childViewOptions');
  
      if (_.isFunction(emptyViewOptions)) {
        emptyViewOptions = emptyViewOptions.call(this, child, this._emptyViewIndex);
      }
  
      // build the empty view
      var view = this.buildChildView(child, EmptyView, emptyViewOptions);
  
      view._parent = this;
  
      // Proxy emptyView events
      this.proxyChildEvents(view);
  
      // trigger the 'before:show' event on `view` if the collection view
      // has already been shown
      if (this._isShown) {
        Marionette.triggerMethodOn(view, 'before:show');
      }
  
      // Store the `emptyView` like a `childView` so we can properly
      // remove and/or close it later
      this.children.add(view);
  
      // Render it and show it
      this.renderChildView(view, this._emptyViewIndex);
  
      // call the 'show' method if the collection view
      // has already been shown
      if (this._isShown) {
        Marionette.triggerMethodOn(view, 'show');
      }
    },
  
    // Retrieve the `childView` class, either from `this.options.childView`
    // or from the `childView` in the object definition. The "options"
    // takes precedence.
    // This method receives the model that will be passed to the instance
    // created from this `childView`. Overriding methods may use the child
    // to determine what `childView` class to return.
    getChildView: function(child) {
      var childView = this.getOption('childView');
  
      if (!childView) {
        throw new Marionette.Error({
          name: 'NoChildViewError',
          message: 'A "childView" must be specified'
        });
      }
  
      return childView;
    },
  
    // Render the child's view and add it to the
    // HTML for the collection view at a given index.
    // This will also update the indices of later views in the collection
    // in order to keep the children in sync with the collection.
    addChild: function(child, ChildView, index) {
      var childViewOptions = this.getOption('childViewOptions');
      childViewOptions = Marionette._getValue(childViewOptions, this, [child, index]);
  
      var view = this.buildChildView(child, ChildView, childViewOptions);
  
      // increment indices of views after this one
      this._updateIndices(view, true, index);
  
      this._addChildView(view, index);
  
      view._parent = this;
  
      return view;
    },
  
    // Internal method. This decrements or increments the indices of views after the
    // added/removed view to keep in sync with the collection.
    _updateIndices: function(view, increment, index) {
      if (!this.getOption('sort')) {
        return;
      }
  
      if (increment) {
        // assign the index to the view
        view._index = index;
      }
  
      // update the indexes of views after this one
      this.children.each(function(laterView) {
        if (laterView._index >= view._index) {
          laterView._index += increment ? 1 : -1;
        }
      });
    },
  
    // Internal Method. Add the view to children and render it at
    // the given index.
    _addChildView: function(view, index) {
      // set up the child view event forwarding
      this.proxyChildEvents(view);
  
      this.triggerMethod('before:add:child', view);
  
      // trigger the 'before:show' event on `view` if the collection view
      // has already been shown
      if (this._isShown && !this.isBuffering) {
        Marionette.triggerMethodOn(view, 'before:show');
      }
  
      // Store the child view itself so we can properly
      // remove and/or destroy it later
      this.children.add(view);
      this.renderChildView(view, index);
  
      if (this._isShown && !this.isBuffering) {
        Marionette.triggerMethodOn(view, 'show');
      }
  
      this.triggerMethod('add:child', view);
    },
  
    // render the child view
    renderChildView: function(view, index) {
      view.render();
      this.attachHtml(this, view, index);
      return view;
    },
  
    // Build a `childView` for a model in the collection.
    buildChildView: function(child, ChildViewClass, childViewOptions) {
      var options = _.extend({model: child}, childViewOptions);
      return new ChildViewClass(options);
    },
  
    // Remove the child view and destroy it.
    // This function also updates the indices of
    // later views in the collection in order to keep
    // the children in sync with the collection.
    removeChildView: function(view) {
  
      if (view) {
        this.triggerMethod('before:remove:child', view);
  
        // call 'destroy' or 'remove', depending on which is found
        if (view.destroy) {
          view.destroy();
        } else if (view.remove) {
          view.remove();
        }
  
        delete view._parent;
        this.stopListening(view);
        this.children.remove(view);
        this.triggerMethod('remove:child', view);
  
        // decrement the index of views after this one
        this._updateIndices(view, false);
      }
  
      return view;
    },
  
    // check if the collection is empty
    isEmpty: function() {
      return !this.collection || this.collection.length === 0;
    },
  
    // If empty, show the empty view
    checkEmpty: function() {
      if (this.isEmpty(this.collection)) {
        this.showEmptyView();
      }
    },
  
    // You might need to override this if you've overridden attachHtml
    attachBuffer: function(collectionView) {
      collectionView.$el.append(this._createBuffer(collectionView));
    },
  
    // Create a fragment buffer from the currently buffered children
    _createBuffer: function(collectionView) {
      var elBuffer = document.createDocumentFragment();
      _.each(collectionView._bufferedChildren, function(b) {
        elBuffer.appendChild(b.el);
      });
      return elBuffer;
    },
  
    // Append the HTML to the collection's `el`.
    // Override this method to do something other
    // than `.append`.
    attachHtml: function(collectionView, childView, index) {
      if (collectionView.isBuffering) {
        // buffering happens on reset events and initial renders
        // in order to reduce the number of inserts into the
        // document, which are expensive.
        collectionView._bufferedChildren.splice(index, 0, childView);
      } else {
        // If we've already rendered the main collection, append
        // the new child into the correct order if we need to. Otherwise
        // append to the end.
        if (!collectionView._insertBefore(childView, index)) {
          collectionView._insertAfter(childView);
        }
      }
    },
  
    // Internal method. Check whether we need to insert the view into
    // the correct position.
    _insertBefore: function(childView, index) {
      var currentView;
      var findPosition = this.getOption('sort') && (index < this.children.length - 1);
      if (findPosition) {
        // Find the view after this one
        currentView = this.children.find(function(view) {
          return view._index === index + 1;
        });
      }
  
      if (currentView) {
        currentView.$el.before(childView.el);
        return true;
      }
  
      return false;
    },
  
    // Internal method. Append a view to the end of the $el
    _insertAfter: function(childView) {
      this.$el.append(childView.el);
    },
  
    // Internal method to set up the `children` object for
    // storing all of the child views
    _initChildViewStorage: function() {
      this.children = new Backbone.ChildViewContainer();
    },
  
    // Handle cleanup and other destroying needs for the collection of views
    destroy: function() {
      if (this.isDestroyed) { return this; }
  
      this.triggerMethod('before:destroy:collection');
      this.destroyChildren();
      this.triggerMethod('destroy:collection');
  
      return Marionette.View.prototype.destroy.apply(this, arguments);
    },
  
    // Destroy the child views that this collection view
    // is holding on to, if any
    destroyChildren: function() {
      var childViews = this.children.map(_.identity);
      this.children.each(this.removeChildView, this);
      this.checkEmpty();
      return childViews;
    },
  
    // Return true if the given child should be shown
    // Return false otherwise
    // The filter will be passed (child, index, collection)
    // Where
    //  'child' is the given model
    //  'index' is the index of that model in the collection
    //  'collection' is the collection referenced by this CollectionView
    _shouldAddChild: function(child, index) {
      var filter = this.getOption('filter');
      return !_.isFunction(filter) || filter.call(this, child, index, this.collection);
    },
  
    // Set up the child view event forwarding. Uses a "childview:"
    // prefix in front of all forwarded events.
    proxyChildEvents: function(view) {
      var prefix = this.getOption('childViewEventPrefix');
  
      // Forward all child view events through the parent,
      // prepending "childview:" to the event name
      this.listenTo(view, 'all', function() {
        var args = _.toArray(arguments);
        var rootEvent = args[0];
        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));
  
        args[0] = prefix + ':' + rootEvent;
        args.splice(1, 0, view);
  
        // call collectionView childEvent if defined
        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {
          childEvents[rootEvent].apply(this, args.slice(1));
        }
  
        this.triggerMethod.apply(this, args);
      });
    },
  
    _getImmediateChildren: function() {
      return _.values(this.children._views);
    },
  
    getViewComparator: function() {
      return this.getOption('viewComparator');
    }
  });
  
  /* jshint maxstatements: 17, maxlen: 117 */
  
  // Composite View
  // --------------
  
  // Used for rendering a branch-leaf, hierarchical structure.
  // Extends directly from CollectionView and also renders an
  // a child view as `modelView`, for the top leaf
  Marionette.CompositeView = Marionette.CollectionView.extend({
  
    // Setting up the inheritance chain which allows changes to
    // Marionette.CollectionView.prototype.constructor which allows overriding
    // option to pass '{sort: false}' to prevent the CompositeView from
    // maintaining the sorted order of the collection.
    // This will fallback onto appending childView's to the end.
    constructor: function() {
      Marionette.CollectionView.apply(this, arguments);
    },
  
    // Configured the initial events that the composite view
    // binds to. Override this method to prevent the initial
    // events, or to add your own initial events.
    _initialEvents: function() {
  
      // Bind only after composite view is rendered to avoid adding child views
      // to nonexistent childViewContainer
  
      if (this.collection) {
        this.listenTo(this.collection, 'add', this._onCollectionAdd);
        this.listenTo(this.collection, 'remove', this._onCollectionRemove);
        this.listenTo(this.collection, 'reset', this._renderChildren);
  
        if (this.getOption('sort')) {
          this.listenTo(this.collection, 'sort', this._sortViews);
        }
      }
    },
  
    // Retrieve the `childView` to be used when rendering each of
    // the items in the collection. The default is to return
    // `this.childView` or Marionette.CompositeView if no `childView`
    // has been defined
    getChildView: function(child) {
      var childView = this.getOption('childView') || this.constructor;
  
      return childView;
    },
  
    // Serialize the model for the view.
    // You can override the `serializeData` method in your own view
    // definition, to provide custom serialization for your view's data.
    serializeData: function() {
      var data = {};
  
      if (this.model) {
        data = _.partial(this.serializeModel, this.model).apply(this, arguments);
      }
  
      return data;
    },
  
    // Renders the model and the collection.
    render: function() {
      this._ensureViewIsIntact();
      this._isRendering = true;
      this.resetChildViewContainer();
  
      this.triggerMethod('before:render', this);
  
      this._renderTemplate();
      this._renderChildren();
  
      this._isRendering = false;
      this.isRendered = true;
      this.triggerMethod('render', this);
      return this;
    },
  
    _renderChildren: function() {
      if (this.isRendered || this._isRendering) {
        Marionette.CollectionView.prototype._renderChildren.call(this);
      }
    },
  
    // Render the root template that the children
    // views are appended to
    _renderTemplate: function() {
      var data = {};
      data = this.serializeData();
      data = this.mixinTemplateHelpers(data);
  
      this.triggerMethod('before:render:template');
  
      var template = this.getTemplate();
      var html = Marionette.Renderer.render(template, data, this);
      this.attachElContent(html);
  
      // the ui bindings is done here and not at the end of render since they
      // will not be available until after the model is rendered, but should be
      // available before the collection is rendered.
      this.bindUIElements();
      this.triggerMethod('render:template');
    },
  
    // Attaches the content of the root.
    // This method can be overridden to optimize rendering,
    // or to render in a non standard way.
    //
    // For example, using `innerHTML` instead of `$el.html`
    //
    // ```js
    // attachElContent: function(html) {
    //   this.el.innerHTML = html;
    //   return this;
    // }
    // ```
    attachElContent: function(html) {
      this.$el.html(html);
  
      return this;
    },
  
    // You might need to override this if you've overridden attachHtml
    attachBuffer: function(compositeView) {
      var $container = this.getChildViewContainer(compositeView);
      $container.append(this._createBuffer(compositeView));
    },
  
    // Internal method. Append a view to the end of the $el.
    // Overidden from CollectionView to ensure view is appended to
    // childViewContainer
    _insertAfter: function(childView) {
      var $container = this.getChildViewContainer(this, childView);
      $container.append(childView.el);
    },
  
    // Internal method. Append reordered childView'.
    // Overidden from CollectionView to ensure reordered views
    // are appended to childViewContainer
    _appendReorderedChildren: function(children) {
      var $container = this.getChildViewContainer(this);
      $container.append(children);
    },
  
    // Internal method to ensure an `$childViewContainer` exists, for the
    // `attachHtml` method to use.
    getChildViewContainer: function(containerView, childView) {
      if ('$childViewContainer' in containerView) {
        return containerView.$childViewContainer;
      }
  
      var container;
      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');
      if (childViewContainer) {
  
        var selector = Marionette._getValue(childViewContainer, containerView);
  
        if (selector.charAt(0) === '@' && containerView.ui) {
          container = containerView.ui[selector.substr(4)];
        } else {
          container = containerView.$(selector);
        }
  
        if (container.length <= 0) {
          throw new Marionette.Error({
            name: 'ChildViewContainerMissingError',
            message: 'The specified "childViewContainer" was not found: ' + containerView.childViewContainer
          });
        }
  
      } else {
        container = containerView.$el;
      }
  
      containerView.$childViewContainer = container;
      return container;
    },
  
    // Internal method to reset the `$childViewContainer` on render
    resetChildViewContainer: function() {
      if (this.$childViewContainer) {
        delete this.$childViewContainer;
      }
    }
  });
  
  // Layout View
  // -----------
  
  // Used for managing application layoutViews, nested layoutViews and
  // multiple regions within an application or sub-application.
  //
  // A specialized view class that renders an area of HTML and then
  // attaches `Region` instances to the specified `regions`.
  // Used for composite view management and sub-application areas.
  Marionette.LayoutView = Marionette.ItemView.extend({
    regionClass: Marionette.Region,
  
    options: {
      destroyImmediate: false
    },
  
    // used as the prefix for child view events
    // that are forwarded through the layoutview
    childViewEventPrefix: 'childview',
  
    // Ensure the regions are available when the `initialize` method
    // is called.
    constructor: function(options) {
      options = options || {};
  
      this._firstRender = true;
      this._initializeRegions(options);
  
      Marionette.ItemView.call(this, options);
    },
  
    // LayoutView's render will use the existing region objects the
    // first time it is called. Subsequent calls will destroy the
    // views that the regions are showing and then reset the `el`
    // for the regions to the newly rendered DOM elements.
    render: function() {
      this._ensureViewIsIntact();
  
      if (this._firstRender) {
        // if this is the first render, don't do anything to
        // reset the regions
        this._firstRender = false;
      } else {
        // If this is not the first render call, then we need to
        // re-initialize the `el` for each region
        this._reInitializeRegions();
      }
  
      return Marionette.ItemView.prototype.render.apply(this, arguments);
    },
  
    // Handle destroying regions, and then destroy the view itself.
    destroy: function() {
      if (this.isDestroyed) { return this; }
      // #2134: remove parent element before destroying the child views, so
      // removing the child views doesn't retrigger repaints
      if (this.getOption('destroyImmediate') === true) {
        this.$el.remove();
      }
      this.regionManager.destroy();
      return Marionette.ItemView.prototype.destroy.apply(this, arguments);
    },
  
    showChildView: function(regionName, view) {
      return this.getRegion(regionName).show(view);
    },
  
    getChildView: function(regionName) {
      return this.getRegion(regionName).currentView;
    },
  
    // Add a single region, by name, to the layoutView
    addRegion: function(name, definition) {
      var regions = {};
      regions[name] = definition;
      return this._buildRegions(regions)[name];
    },
  
    // Add multiple regions as a {name: definition, name2: def2} object literal
    addRegions: function(regions) {
      this.regions = _.extend({}, this.regions, regions);
      return this._buildRegions(regions);
    },
  
    // Remove a single region from the LayoutView, by name
    removeRegion: function(name) {
      delete this.regions[name];
      return this.regionManager.removeRegion(name);
    },
  
    // Provides alternative access to regions
    // Accepts the region name
    // getRegion('main')
    getRegion: function(region) {
      return this.regionManager.get(region);
    },
  
    // Get all regions
    getRegions: function() {
      return this.regionManager.getRegions();
    },
  
    // internal method to build regions
    _buildRegions: function(regions) {
      var defaults = {
        regionClass: this.getOption('regionClass'),
        parentEl: _.partial(_.result, this, 'el')
      };
  
      return this.regionManager.addRegions(regions, defaults);
    },
  
    // Internal method to initialize the regions that have been defined in a
    // `regions` attribute on this layoutView.
    _initializeRegions: function(options) {
      var regions;
      this._initRegionManager();
  
      regions = Marionette._getValue(this.regions, this, [options]) || {};
  
      // Enable users to define `regions` as instance options.
      var regionOptions = this.getOption.call(options, 'regions');
  
      // enable region options to be a function
      regionOptions = Marionette._getValue(regionOptions, this, [options]);
  
      _.extend(regions, regionOptions);
  
      // Normalize region selectors hash to allow
      // a user to use the @ui. syntax.
      regions = this.normalizeUIValues(regions, ['selector', 'el']);
  
      this.addRegions(regions);
    },
  
    // Internal method to re-initialize all of the regions by updating the `el` that
    // they point to
    _reInitializeRegions: function() {
      this.regionManager.invoke('reset');
    },
  
    // Enable easy overriding of the default `RegionManager`
    // for customized region interactions and business specific
    // view logic for better control over single regions.
    getRegionManager: function() {
      return new Marionette.RegionManager();
    },
  
    // Internal method to initialize the region manager
    // and all regions in it
    _initRegionManager: function() {
      this.regionManager = this.getRegionManager();
      this.regionManager._parent = this;
  
      this.listenTo(this.regionManager, 'before:add:region', function(name) {
        this.triggerMethod('before:add:region', name);
      });
  
      this.listenTo(this.regionManager, 'add:region', function(name, region) {
        this[name] = region;
        this.triggerMethod('add:region', name, region);
      });
  
      this.listenTo(this.regionManager, 'before:remove:region', function(name) {
        this.triggerMethod('before:remove:region', name);
      });
  
      this.listenTo(this.regionManager, 'remove:region', function(name, region) {
        delete this[name];
        this.triggerMethod('remove:region', name, region);
      });
    },
  
    _getImmediateChildren: function() {
      return _.chain(this.regionManager.getRegions())
        .pluck('currentView')
        .compact()
        .value();
    }
  });
  

  // Behavior
  // --------
  
  // A Behavior is an isolated set of DOM /
  // user interactions that can be mixed into any View.
  // Behaviors allow you to blackbox View specific interactions
  // into portable logical chunks, keeping your views simple and your code DRY.
  
  Marionette.Behavior = Marionette.Object.extend({
    constructor: function(options, view) {
      // Setup reference to the view.
      // this comes in handle when a behavior
      // wants to directly talk up the chain
      // to the view.
      this.view = view;
      this.defaults = _.result(this, 'defaults') || {};
      this.options  = _.extend({}, this.defaults, options);
      // Construct an internal UI hash using
      // the views UI hash and then the behaviors UI hash.
      // This allows the user to use UI hash elements
      // defined in the parent view as well as those
      // defined in the given behavior.
      this.ui = _.extend({}, _.result(view, 'ui'), _.result(this, 'ui'));
  
      Marionette.Object.apply(this, arguments);
    },
  
    // proxy behavior $ method to the view
    // this is useful for doing jquery DOM lookups
    // scoped to behaviors view.
    $: function() {
      return this.view.$.apply(this.view, arguments);
    },
  
    // Stops the behavior from listening to events.
    // Overrides Object#destroy to prevent additional events from being triggered.
    destroy: function() {
      this.stopListening();
  
      return this;
    },
  
    proxyViewProperties: function(view) {
      this.$el = view.$el;
      this.el = view.el;
    }
  });
  
  /* jshint maxlen: 143 */
  // Behaviors
  // ---------
  
  // Behaviors is a utility class that takes care of
  // gluing your behavior instances to their given View.
  // The most important part of this class is that you
  // **MUST** override the class level behaviorsLookup
  // method for things to work properly.
  
  Marionette.Behaviors = (function(Marionette, _) {
    // Borrow event splitter from Backbone
    var delegateEventSplitter = /^(\S+)\s*(.*)$/;
  
    function Behaviors(view, behaviors) {
  
      if (!_.isObject(view.behaviors)) {
        return {};
      }
  
      // Behaviors defined on a view can be a flat object literal
      // or it can be a function that returns an object.
      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));
  
      // Wraps several of the view's methods
      // calling the methods first on each behavior
      // and then eventually calling the method on the view.
      Behaviors.wrap(view, behaviors, _.keys(methods));
      return behaviors;
    }
  
    var methods = {
      behaviorTriggers: function(behaviorTriggers, behaviors) {
        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);
        return triggerBuilder.buildBehaviorTriggers();
      },
  
      behaviorEvents: function(behaviorEvents, behaviors) {
        var _behaviorsEvents = {};
  
        _.each(behaviors, function(b, i) {
          var _events = {};
          var behaviorEvents = _.clone(_.result(b, 'events')) || {};
  
          // Normalize behavior events hash to allow
          // a user to use the @ui. syntax.
          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, getBehaviorsUI(b));
  
          var j = 0;
          _.each(behaviorEvents, function(behaviour, key) {
            var match     = key.match(delegateEventSplitter);
  
            // Set event name to be namespaced using the view cid,
            // the behavior index, and the behavior event index
            // to generate a non colliding event namespace
            // http://api.jquery.com/event.namespace/
            var eventName = match[1] + '.' + [this.cid, i, j++, ' '].join('');
            var selector  = match[2];
  
            var eventKey  = eventName + selector;
            var handler   = _.isFunction(behaviour) ? behaviour : b[behaviour];
  
            _events[eventKey] = _.bind(handler, b);
          }, this);
  
          _behaviorsEvents = _.extend(_behaviorsEvents, _events);
        }, this);
  
        return _behaviorsEvents;
      }
    };
  
    _.extend(Behaviors, {
  
      // Placeholder method to be extended by the user.
      // The method should define the object that stores the behaviors.
      // i.e.
      //
      // ```js
      // Marionette.Behaviors.behaviorsLookup: function() {
      //   return App.Behaviors
      // }
      // ```
      behaviorsLookup: function() {
        throw new Marionette.Error({
          message: 'You must define where your behaviors are stored.',
          url: 'marionette.behaviors.html#behaviorslookup'
        });
      },
  
      // Takes care of getting the behavior class
      // given options and a key.
      // If a user passes in options.behaviorClass
      // default to using that. Otherwise delegate
      // the lookup to the users `behaviorsLookup` implementation.
      getBehaviorClass: function(options, key) {
        if (options.behaviorClass) {
          return options.behaviorClass;
        }
  
        // Get behavior class can be either a flat object or a method
        return Marionette._getValue(Behaviors.behaviorsLookup, this, [options, key])[key];
      },
  
      // Iterate over the behaviors object, for each behavior
      // instantiate it and get its grouped behaviors.
      parseBehaviors: function(view, behaviors) {
        return _.chain(behaviors).map(function(options, key) {
          var BehaviorClass = Behaviors.getBehaviorClass(options, key);
  
          var behavior = new BehaviorClass(options, view);
          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));
  
          return [behavior].concat(nestedBehaviors);
        }).flatten().value();
      },
  
      // Wrap view internal methods so that they delegate to behaviors. For example,
      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.
      // i.e.
      //
      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`
      wrap: function(view, behaviors, methodNames) {
        _.each(methodNames, function(methodName) {
          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);
        });
      }
    });
  
    // Class to build handlers for `triggers` on behaviors
    // for views
    function BehaviorTriggersBuilder(view, behaviors) {
      this._view      = view;
      this._behaviors = behaviors;
      this._triggers  = {};
    }
  
    _.extend(BehaviorTriggersBuilder.prototype, {
      // Main method to build the triggers hash with event keys and handlers
      buildBehaviorTriggers: function() {
        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);
        return this._triggers;
      },
  
      // Internal method to build all trigger handlers for a given behavior
      _buildTriggerHandlersForBehavior: function(behavior, i) {
        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};
  
        triggersHash = Marionette.normalizeUIKeys(triggersHash, getBehaviorsUI(behavior));
  
        _.each(triggersHash, _.bind(this._setHandlerForBehavior, this, behavior, i));
      },
  
      // Internal method to create and assign the trigger handler for a given
      // behavior
      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {
        // Unique identifier for the `this._triggers` hash
        var triggerKey = trigger.replace(/^\S+/, function(triggerName) {
          return triggerName + '.' + 'behaviortriggers' + i;
        });
  
        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);
      }
    });
  
    function getBehaviorsUI(behavior) {
      return behavior._uiBindings || behavior.ui;
    }
  
    return Behaviors;
  
  })(Marionette, _);
  

  // App Router
  // ----------
  
  // Reduce the boilerplate code of handling route events
  // and then calling a single method on another object.
  // Have your routers configured to call the method on
  // your object, directly.
  //
  // Configure an AppRouter with `appRoutes`.
  //
  // App routers can only take one `controller` object.
  // It is recommended that you divide your controller
  // objects in to smaller pieces of related functionality
  // and have multiple routers / controllers, instead of
  // just one giant router and controller.
  //
  // You can also add standard routes to an AppRouter.
  
  Marionette.AppRouter = Backbone.Router.extend({
  
    constructor: function(options) {
      this.options = options || {};
  
      Backbone.Router.apply(this, arguments);
  
      var appRoutes = this.getOption('appRoutes');
      var controller = this._getController();
      this.processAppRoutes(controller, appRoutes);
      this.on('route', this._processOnRoute, this);
    },
  
    // Similar to route method on a Backbone Router but
    // method is called on the controller
    appRoute: function(route, methodName) {
      var controller = this._getController();
      this._addAppRoute(controller, route, methodName);
    },
  
    // process the route event and trigger the onRoute
    // method call, if it exists
    _processOnRoute: function(routeName, routeArgs) {
      // make sure an onRoute before trying to call it
      if (_.isFunction(this.onRoute)) {
        // find the path that matches the current route
        var routePath = _.invert(this.getOption('appRoutes'))[routeName];
        this.onRoute(routeName, routePath, routeArgs);
      }
    },
  
    // Internal method to process the `appRoutes` for the
    // router, and turn them in to routes that trigger the
    // specified method on the specified `controller`.
    processAppRoutes: function(controller, appRoutes) {
      if (!appRoutes) { return; }
  
      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes
  
      _.each(routeNames, function(route) {
        this._addAppRoute(controller, route, appRoutes[route]);
      }, this);
    },
  
    _getController: function() {
      return this.getOption('controller');
    },
  
    _addAppRoute: function(controller, route, methodName) {
      var method = controller[methodName];
  
      if (!method) {
        throw new Marionette.Error('Method "' + methodName + '" was not found on the controller');
      }
  
      this.route(route, methodName, _.bind(method, controller));
    },
  
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    triggerMethod: Marionette.triggerMethod,
  
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  // Application
  // -----------
  
  // Contain and manage the composite application as a whole.
  // Stores and starts up `Region` objects, includes an
  // event aggregator as `app.vent`
  Marionette.Application = Marionette.Object.extend({
    constructor: function(options) {
      this._initializeRegions(options);
      this._initCallbacks = new Marionette.Callbacks();
      this.submodules = {};
      _.extend(this, options);
      this._initChannel();
      Marionette.Object.call(this, options);
    },
  
    // Command execution, facilitated by Backbone.Wreqr.Commands
    execute: function() {
      this.commands.execute.apply(this.commands, arguments);
    },
  
    // Request/response, facilitated by Backbone.Wreqr.RequestResponse
    request: function() {
      return this.reqres.request.apply(this.reqres, arguments);
    },
  
    // Add an initializer that is either run at when the `start`
    // method is called, or run immediately if added after `start`
    // has already been called.
    addInitializer: function(initializer) {
      this._initCallbacks.add(initializer);
    },
  
    // kick off all of the application's processes.
    // initializes all of the regions that have been added
    // to the app, and runs all of the initializer functions
    start: function(options) {
      this.triggerMethod('before:start', options);
      this._initCallbacks.run(options, this);
      this.triggerMethod('start', options);
    },
  
    // Add regions to your app.
    // Accepts a hash of named strings or Region objects
    // addRegions({something: "#someRegion"})
    // addRegions({something: Region.extend({el: "#someRegion"}) });
    addRegions: function(regions) {
      return this._regionManager.addRegions(regions);
    },
  
    // Empty all regions in the app, without removing them
    emptyRegions: function() {
      return this._regionManager.emptyRegions();
    },
  
    // Removes a region from your app, by name
    // Accepts the regions name
    // removeRegion('myRegion')
    removeRegion: function(region) {
      return this._regionManager.removeRegion(region);
    },
  
    // Provides alternative access to regions
    // Accepts the region name
    // getRegion('main')
    getRegion: function(region) {
      return this._regionManager.get(region);
    },
  
    // Get all the regions from the region manager
    getRegions: function() {
      return this._regionManager.getRegions();
    },
  
    // Create a module, attached to the application
    module: function(moduleNames, moduleDefinition) {
  
      // Overwrite the module class if the user specifies one
      var ModuleClass = Marionette.Module.getClass(moduleDefinition);
  
      var args = _.toArray(arguments);
      args.unshift(this);
  
      // see the Marionette.Module object for more information
      return ModuleClass.create.apply(ModuleClass, args);
    },
  
    // Enable easy overriding of the default `RegionManager`
    // for customized region interactions and business-specific
    // view logic for better control over single regions.
    getRegionManager: function() {
      return new Marionette.RegionManager();
    },
  
    // Internal method to initialize the regions that have been defined in a
    // `regions` attribute on the application instance
    _initializeRegions: function(options) {
      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};
  
      this._initRegionManager();
  
      // Enable users to define `regions` in instance options.
      var optionRegions = Marionette.getOption(options, 'regions');
  
      // Enable region options to be a function
      if (_.isFunction(optionRegions)) {
        optionRegions = optionRegions.call(this, options);
      }
  
      // Overwrite current regions with those passed in options
      _.extend(regions, optionRegions);
  
      this.addRegions(regions);
  
      return this;
    },
  
    // Internal method to set up the region manager
    _initRegionManager: function() {
      this._regionManager = this.getRegionManager();
      this._regionManager._parent = this;
  
      this.listenTo(this._regionManager, 'before:add:region', function() {
        Marionette._triggerMethod(this, 'before:add:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'add:region', function(name, region) {
        this[name] = region;
        Marionette._triggerMethod(this, 'add:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'before:remove:region', function() {
        Marionette._triggerMethod(this, 'before:remove:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'remove:region', function(name) {
        delete this[name];
        Marionette._triggerMethod(this, 'remove:region', arguments);
      });
    },
  
    // Internal method to setup the Wreqr.radio channel
    _initChannel: function() {
      this.channelName = _.result(this, 'channelName') || 'global';
      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);
      this.vent = _.result(this, 'vent') || this.channel.vent;
      this.commands = _.result(this, 'commands') || this.channel.commands;
      this.reqres = _.result(this, 'reqres') || this.channel.reqres;
    }
  });
  
  /* jshint maxparams: 9 */
  
  // Module
  // ------
  
  // A simple module system, used to create privacy and encapsulation in
  // Marionette applications
  Marionette.Module = function(moduleName, app, options) {
    this.moduleName = moduleName;
    this.options = _.extend({}, this.options, options);
    // Allow for a user to overide the initialize
    // for a given module instance.
    this.initialize = options.initialize || this.initialize;
  
    // Set up an internal store for sub-modules.
    this.submodules = {};
  
    this._setupInitializersAndFinalizers();
  
    // Set an internal reference to the app
    // within a module.
    this.app = app;
  
    if (_.isFunction(this.initialize)) {
      this.initialize(moduleName, app, this.options);
    }
  };
  
  Marionette.Module.extend = Marionette.extend;
  
  // Extend the Module prototype with events / listenTo, so that the module
  // can be used as an event aggregator or pub/sub.
  _.extend(Marionette.Module.prototype, Backbone.Events, {
  
    // By default modules start with their parents.
    startWithParent: true,
  
    // Initialize is an empty function by default. Override it with your own
    // initialization logic when extending Marionette.Module.
    initialize: function() {},
  
    // Initializer for a specific module. Initializers are run when the
    // module's `start` method is called.
    addInitializer: function(callback) {
      this._initializerCallbacks.add(callback);
    },
  
    // Finalizers are run when a module is stopped. They are used to teardown
    // and finalize any variables, references, events and other code that the
    // module had set up.
    addFinalizer: function(callback) {
      this._finalizerCallbacks.add(callback);
    },
  
    // Start the module, and run all of its initializers
    start: function(options) {
      // Prevent re-starting a module that is already started
      if (this._isInitialized) { return; }
  
      // start the sub-modules (depth-first hierarchy)
      _.each(this.submodules, function(mod) {
        // check to see if we should start the sub-module with this parent
        if (mod.startWithParent) {
          mod.start(options);
        }
      });
  
      // run the callbacks to "start" the current module
      this.triggerMethod('before:start', options);
  
      this._initializerCallbacks.run(options, this);
      this._isInitialized = true;
  
      this.triggerMethod('start', options);
    },
  
    // Stop this module by running its finalizers and then stop all of
    // the sub-modules for this module
    stop: function() {
      // if we are not initialized, don't bother finalizing
      if (!this._isInitialized) { return; }
      this._isInitialized = false;
  
      this.triggerMethod('before:stop');
  
      // stop the sub-modules; depth-first, to make sure the
      // sub-modules are stopped / finalized before parents
      _.invoke(this.submodules, 'stop');
  
      // run the finalizers
      this._finalizerCallbacks.run(undefined, this);
  
      // reset the initializers and finalizers
      this._initializerCallbacks.reset();
      this._finalizerCallbacks.reset();
  
      this.triggerMethod('stop');
    },
  
    // Configure the module with a definition function and any custom args
    // that are to be passed in to the definition function
    addDefinition: function(moduleDefinition, customArgs) {
      this._runModuleDefinition(moduleDefinition, customArgs);
    },
  
    // Internal method: run the module definition function with the correct
    // arguments
    _runModuleDefinition: function(definition, customArgs) {
      // If there is no definition short circut the method.
      if (!definition) { return; }
  
      // build the correct list of arguments for the module definition
      var args = _.flatten([
        this,
        this.app,
        Backbone,
        Marionette,
        Backbone.$, _,
        customArgs
      ]);
  
      definition.apply(this, args);
    },
  
    // Internal method: set up new copies of initializers and finalizers.
    // Calling this method will wipe out all existing initializers and
    // finalizers.
    _setupInitializersAndFinalizers: function() {
      this._initializerCallbacks = new Marionette.Callbacks();
      this._finalizerCallbacks = new Marionette.Callbacks();
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod
  });
  
  // Class methods to create modules
  _.extend(Marionette.Module, {
  
    // Create a module, hanging off the app parameter as the parent object.
    create: function(app, moduleNames, moduleDefinition) {
      var module = app;
  
      // get the custom args passed in after the module definition and
      // get rid of the module name and definition function
      var customArgs = _.drop(arguments, 3);
  
      // Split the module names and get the number of submodules.
      // i.e. an example module name of `Doge.Wow.Amaze` would
      // then have the potential for 3 module definitions.
      moduleNames = moduleNames.split('.');
      var length = moduleNames.length;
  
      // store the module definition for the last module in the chain
      var moduleDefinitions = [];
      moduleDefinitions[length - 1] = moduleDefinition;
  
      // Loop through all the parts of the module definition
      _.each(moduleNames, function(moduleName, i) {
        var parentModule = module;
        module = this._getModule(parentModule, moduleName, app, moduleDefinition);
        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);
      }, this);
  
      // Return the last module in the definition chain
      return module;
    },
  
    _getModule: function(parentModule, moduleName, app, def, args) {
      var options = _.extend({}, def);
      var ModuleClass = this.getClass(def);
  
      // Get an existing module of this name if we have one
      var module = parentModule[moduleName];
  
      if (!module) {
        // Create a new module if we don't have one
        module = new ModuleClass(moduleName, app, options);
        parentModule[moduleName] = module;
        // store the module on the parent
        parentModule.submodules[moduleName] = module;
      }
  
      return module;
    },
  
    // ## Module Classes
    //
    // Module classes can be used as an alternative to the define pattern.
    // The extend function of a Module is identical to the extend functions
    // on other Backbone and Marionette classes.
    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.
    getClass: function(moduleDefinition) {
      var ModuleClass = Marionette.Module;
  
      if (!moduleDefinition) {
        return ModuleClass;
      }
  
      // If all of the module's functionality is defined inside its class,
      // then the class can be passed in directly. `MyApp.module("Foo", FooModule)`.
      if (moduleDefinition.prototype instanceof ModuleClass) {
        return moduleDefinition;
      }
  
      return moduleDefinition.moduleClass || ModuleClass;
    },
  
    // Add the module definition and add a startWithParent initializer function.
    // This is complicated because module definitions are heavily overloaded
    // and support an anonymous function, module class, or options object
    _addModuleDefinition: function(parentModule, module, def, args) {
      var fn = this._getDefine(def);
      var startWithParent = this._getStartWithParent(def, module);
  
      if (fn) {
        module.addDefinition(fn, args);
      }
  
      this._addStartWithParent(parentModule, module, startWithParent);
    },
  
    _getStartWithParent: function(def, module) {
      var swp;
  
      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {
        swp = module.constructor.prototype.startWithParent;
        return _.isUndefined(swp) ? true : swp;
      }
  
      if (_.isObject(def)) {
        swp = def.startWithParent;
        return _.isUndefined(swp) ? true : swp;
      }
  
      return true;
    },
  
    _getDefine: function(def) {
      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {
        return def;
      }
  
      if (_.isObject(def)) {
        return def.define;
      }
  
      return null;
    },
  
    _addStartWithParent: function(parentModule, module, startWithParent) {
      module.startWithParent = module.startWithParent && startWithParent;
  
      if (!module.startWithParent || !!module.startWithParentIsConfigured) {
        return;
      }
  
      module.startWithParentIsConfigured = true;
  
      parentModule.addInitializer(function(options) {
        if (module.startWithParent) {
          module.start(options);
        }
      });
    }
  });
  

  return Marionette;
}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-marionette', location = '/util/shims/marionette.js' */
(function(window) {
    'use strict';

    _.extend(Marionette.Renderer, {

        render: function(template, data, context) {
            if (!template) {
                throw new window.Marionette.Error({
                    name: 'TemplateNotFoundError',
                    message: 'Cannot render the template since its false, null or undefined.'
                });
            }

            var templateFunc = _.isFunction(template) ?
                template : window.Marionette.TemplateCache.get(template);

            return templateFunc.call(context, data);
        }

    });

    define('marionette', function () {
        return window.Marionette;
    });

})(window || this);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.droppable.js' */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(a){return a.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){"accept"==a&&(this.accept=d.isFunction(b)?b:function(a){return a.is(b)});d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
a,this.ui(b))},_out:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(b))},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var a=d.data(this,
"droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope==c.options.scope&&a.accept.call(a.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(a,{offset:a.element.offset()}),a.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],c.currentItem||c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(c)),this.element):
!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.24"});d.ui.intersect=function(a,b,c){if(!b.offset)return!1;var f=(a.positionAbs||a.position.absolute).left,g=f+a.helperProportions.width,e=(a.positionAbs||a.position.absolute).top,h=e+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;switch(c){case "fit":return i<=f&&g<=k&&j<=e&&h<=l;
case "intersect":return i<f+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<e+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(e>=j&&e<=l||h>=j&&h<=l||e<j&&h>l)&&(f>=i&&f<=k||g>=i&&g<=k||f<i&&g>k);default:return!1}};
d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],f=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),e=0;a:for(;e<c.length;e++)if(!(c[e].options.disabled||a&&!c[e].accept.call(c[e].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[e].element[0]){c[e].proportions.height=0;continue a}c[e].visible="none"!=c[e].element.css("display");c[e].visible&&("mousedown"==
f&&c[e]._activate.call(c[e],b),c[e].offset=c[e].element.offset(),c[e].proportions={width:c[e].element[0].offsetWidth,height:c[e].element[0].offsetHeight})}},drop:function(a,b){var c=!1;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options&&(!this.options.disabled&&(this.visible&&d.ui.intersect(a,this,this.options.tolerance))&&(c=this._drop.call(this,b)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)))this.isout=1,this.isover=
0,this._deactivate.call(this,b)});return c},dragStart:function(a,b){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var c=d.ui.intersect(a,this,this.options.tolerance);if(c=!c&&1==this.isover?"isout":c&&0==
this.isover?"isover":null){var f;if(this.options.greedy){var g=this.options.scope,e=this.element.parents(":data(droppable)").filter(function(){return d.data(this,"droppable").options.scope===g});e.length&&(f=d.data(e[0],"droppable"),f.greedyChild="isover"==c?1:0)}f&&"isover"==c&&(f.isover=0,f.isout=1,f._out.call(f,b));this[c]=1;this["isout"==c?"isover":"isout"]=0;this["isover"==c?"_over":"_out"].call(this,b);f&&"isout"==c&&(f.isout=0,f.isover=1,f._over.call(f,b))}}})},dragStop:function(a,b){a.element.parents(":not(body,html)").unbind("scroll.droppable");
a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.resizable.js' */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");this.handles=
{};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle ui-resizable-'+f+'"></div>');g.css({zIndex:a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(a){var a=a||this.element,b;for(b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=e(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var c=
e(this.handles[b],this.element),d=0,d=/sw|ne|nw|se|n|s/.test(b)?c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(c,d);this._proportionallyResize()}e(this.handles[b])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(!a.disabled){e(this).removeClass("ui-resizable-autohide");b._handles.show()}},function(){if(!a.disabled&&!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}}));this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(a){e(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=!1,c;for(c in this.handles)e(this.handles[c])[0]==b.target&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),
d=this.element;this.resizing=!0;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};(d.is(".ui-draggable")||/absolute/.test(d.css("position")))&&d.css({position:"absolute",top:c.top,left:c.left});this._renderProxy();var c=j(this.helper.css("left")),f=j(this.helper.css("top"));a.containment&&(c+=e(a.containment).scrollLeft()||0,f+=e(a.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:
{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",
"auto"==a?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return!1;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var a=this.options;if(this._helper){var c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),c=d&&e.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,d=d?0:this.sizeDiff.width,d={width:this.helper.width()-d,height:this.helper.height()-c},c=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;a.animate||this.element.css(e.extend(d,{top:f,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var a=
this.options,c,d,e,a={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:Infinity,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:Infinity};if(this._aspectRatio||b)if(b=a.minHeight*this.aspectRatio,d=a.minWidth/this.aspectRatio,c=a.maxHeight*this.aspectRatio,e=a.maxWidth/this.aspectRatio,b>a.minWidth&&(a.minWidth=b),d>a.minHeight&&(a.minHeight=d),c<a.maxWidth&&(a.maxWidth=c),e<a.maxHeight)a.maxHeight=e;this._vBoundaries=a},_updateCache:function(b){this.offset=
this.helper.offset();i(b.left)&&(this.position.left=b.left);i(b.top)&&(this.position.top=b.top);i(b.height)&&(this.size.height=b.height);i(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;i(b.height)?b.width=b.height*this.aspectRatio:i(b.width)&&(b.height=b.width/this.aspectRatio);"sw"==d&&(b.left=a.left+(c.width-b.width),b.top=null);"nw"==d&&(b.top=a.top+(c.height-b.height),b.left=a.left+(c.width-b.width));return b},_respectSize:function(b){var a=
this._vBoundaries,c=this.axis,d=i(b.width)&&a.maxWidth&&a.maxWidth<b.width,e=i(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=i(b.width)&&a.minWidth&&a.minWidth>b.width,h=i(b.height)&&a.minHeight&&a.minHeight>b.height;g&&(b.width=a.minWidth);h&&(b.height=a.minHeight);d&&(b.width=a.maxWidth);e&&(b.height=a.maxHeight);var k=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,m=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);g&&m&&(b.left=k-a.minWidth);d&&m&&(b.left=k-a.maxWidth);
h&&c&&(b.top=l-a.minHeight);e&&c&&(b.top=l-a.maxHeight);(a=!b.width&&!b.height)&&!b.left&&b.top?b.top=null:a&&(!b.top&&b.left)&&(b.left=null);return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),
c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}if(!e.browser.msie||!e(b).is(":hidden")&&!e(b).parents(":hidden").length)c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');
var a=e.browser.msie&&7>e.browser.version,c=a?1:0,a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-
a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,
c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);"resize"!=b&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,{version:"1.8.24"});e.ui.plugin.add("resizable","alsoResize",
{start:function(){var b=e(this).data("resizable").options,a=function(a){e(a).each(function(){var a=e(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof b.alsoResize&&!b.alsoResize.parentNode?b.alsoResize.length?(b.alsoResize=b.alsoResize[0],a(b.alsoResize)):e.each(b.alsoResize,function(b){a(b)}):a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable"),d=c.options,
f=c.originalSize,g=c.originalPosition,h={height:c.size.height-f.height||0,width:c.size.width-f.width||0,top:c.position.top-g.top||0,left:c.position.left-g.left||0},i=function(b,c){e(b).each(function(){var b=e(this),d=e(this).data("resizable-alsoresize"),f={},g=c&&c.length?c:b.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(g,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&0<=c&&(f[b]=c||null)});b.css(f)})};"object"==typeof d.alsoResize&&!d.alsoResize.nodeType?
e.each(d.alsoResize,function(a,b){i(a,b)}):i(d.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height,f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g},g=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||
null,h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:c.width,height:c.height});a._updateCache(c);a._propagate("resize",b)}})}});e.ui.plugin.add("resizable",
"containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c)if(b.containerElement=e(a),/document/.test(c)||c==document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var d=e(a),f=[];e(["Top","Right","Left","Bottom"]).each(function(a,
b){f[a]=j(d.css("padding"+b))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};var c=b.containerOffset,g=b.containerSize.height,h=b.containerSize.width,h=e.ui.hasScroll(a,"left")?a.scrollWidth:h,g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,f=a.position,b=a._aspectRatio||b.shiftKey,
g={top:0,left:0},h=a.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(g=d);if(f.left<(a._helper?d.left:0))a.size.width+=a._helper?a.position.left-d.left:a.position.left-g.left,b&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=c.helper?d.left:0;if(f.top<(a._helper?d.top:0))a.size.height+=a._helper?a.position.top-d.top:a.position.top,b&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?d.top:0;a.offset.left=a.parentData.left+a.position.left;a.offset.top=
a.parentData.top+a.position.top;c=Math.abs(a.offset.left-g.left+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));f&&g&&(c-=a.parentData.left);c+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-c,b&&(a.size.height=a.size.width/a.aspectRatio));d+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-d,
b&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,g=g.outerHeight()-b.sizeDiff.height;b._helper&&(!a.animate&&/relative/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&(!a.animate&&/static/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});
e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof a.ghost?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=
e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid="number"==typeof a.grid?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1),a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);/^(se|s|e)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):
/^(ne)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a):(/^(sw)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a),b.position.left=f.left-h)}});var j=function(b){return parseInt(b,10)||0},i=function(b){return!isNaN(parseInt(b,10))}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.selectable.js' */
(function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var f;this.refresh=function(){f=e(b.options.filter,b.element[0]);f.addClass("ui-selectee");f.each(function(){var b=e(this),c=b.offset();e.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,
selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var f=
this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=e(d.filter,this.element[0]);this._trigger("start",b);e(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=e.data(this,"selectable-item");c.startselected=!0;!b.metaKey&&!b.ctrlKey&&(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),
c.unselecting=!0,f._trigger("unselecting",b,{unselecting:c.element}))});e(b.target).parents().andSelf().each(function(){var c=e.data(this,"selectable-item");if(c){var d=!b.metaKey&&!b.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");c.unselecting=!d;c.selecting=d;(c.selected=d)?f._trigger("selecting",b,{selecting:c.element}):f._trigger("unselecting",b,{unselecting:c.element});return!1}})}},_mouseDrag:function(b){var f=
this;this.dragged=!0;if(!this.options.disabled){var d=this.options,c=this.opos[0],g=this.opos[1],i=b.pageX,j=b.pageY;if(c>i)var h=i,i=c,c=h;g>j&&(h=j,j=g,g=h);this.helper.css({left:c,top:g,width:i-c,height:j-g});this.selectees.each(function(){var a=e.data(this,"selectable-item");if(a&&a.element!=f.element[0]){var h=false;d.tolerance=="touch"?h=!(a.left>i||a.right<c||a.top>j||a.bottom<g):d.tolerance=="fit"&&(h=a.left>c&&a.right<i&&a.top>g&&a.bottom<j);if(h){if(a.selected){a.$element.removeClass("ui-selected");
a.selected=false}if(a.unselecting){a.$element.removeClass("ui-unselecting");a.unselecting=false}if(!a.selecting){a.$element.addClass("ui-selecting");a.selecting=true;f._trigger("selecting",b,{selecting:a.element})}}else{if(a.selecting)if((b.metaKey||b.ctrlKey)&&a.startselected){a.$element.removeClass("ui-selecting");a.selecting=false;a.$element.addClass("ui-selected");a.selected=true}else{a.$element.removeClass("ui-selecting");a.selecting=false;if(a.startselected){a.$element.addClass("ui-unselecting");
a.unselecting=true}f._trigger("unselecting",b,{unselecting:a.element})}if(a.selected&&!b.metaKey&&!b.ctrlKey&&!a.startselected){a.$element.removeClass("ui-selected");a.selected=false;a.$element.addClass("ui-unselecting");a.unselecting=true;f._trigger("unselecting",b,{unselecting:a.element})}}}});return!1}},_mouseStop:function(b){var f=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=
!1;d.startselected=!1;f._trigger("unselected",b,{unselected:d.element})});e(".ui-selecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;f._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return!1}});e.extend(e.ui.selectable,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-config-read-only', location = '/feature/config-read-only/config-read-only.js' */
define("feature/config-read-only",["jquery","marionette"],function(e,t){"use strict";return t.ItemView.extend({initialize:function(){this.$el.addClass("configReadOnly"),this.disableNodes(),window.MutationObserver&&(this.mutationObserver=new MutationObserver(this.disableNodes.bind(this)),this.mutationObserver.observe(this.el,{childList:!0,subtree:!0}))},disableNodes:function(){this.iterateThroughNodesWith(".aui-button, input, button, select, textarea",function(e){if(e.setAttribute("tabindex","-1"),e.setAttribute("aria-disabled","true"),e.readOnly=!0,!e.value)if("SELECT"===e.tagName){var t=document.createElement("option");t.value="Empty",t.text="Empty",t.selected="selected",e.add(t)}else e.classList.add("emptyInputField"),e.value="Empty"}),this.iterateThroughNodesWith('.aui-button, select, input[type="checkbox"], input[type="radio"]',function(e){e.disabled=!0}),this.iterateThroughNodesWith("a.aui-button",function(e){e.setAttribute("disabled","true"),e.removeAttribute("href"),e.classList.remove("toolbar-trigger"),e.addEventListener("click",function(e){e.stopPropagation()},!0)}),this.iterateThroughNodesWith(".ui-sortable",function(t){e(t).sortable("disable")}),this.iterateThroughNodesWith(".ui-droppable",function(t){e(t).droppable("disable")})},iterateThroughNodesWith:function(e,t){for(var i=this.el.querySelectorAll(e),n=0;n<i.length;n+=1)this.canDisableNode(i[n])&&t(i[n])},canDisableNode:function(e){var t=e.className,i=this.constructor.DO_NOT_DISABLE_CLASS_NAME;return!((" "+t+" ").indexOf(" "+i+" ")!==-1)}},{HIDE_CLASS_NAME:"hideInConfigReadOnlyMode",DISABLE_CLASS_NAME:"disableInConfigReadOnlyMode",DO_NOT_DISABLE_CLASS_NAME:"doNotDisableInConfigReadOnlyMode",makeReadOnly:function(e){return new this({el:e})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog2', location = '/widget/dialog2/dialog2.js' */
define("widget/dialog2",["jquery","marionette"],function(t,i){"use strict";var o=[{onClick:function(t){return t.hide()},text:"Close",type:"link"}];return i.ItemView.extend({initialize:function(t){var i=this;this.validateOptions(t);var e=t.id,n=t.size,r=void 0===n?"medium":n,a=t.buttons,d=void 0===a?o:a,s=t.warning,l=void 0!==s&&s,u=t.modal,f=void 0!==u&&u,h=t.removeOnHide,c=void 0!==h&&h,g=t.extraClasses,w=void 0===g?"":g,v=t.extraAttributes,x=void 0===v?"":v,C=t.titleText,b=t.titleContent,m=t.content,A=t.footerHintText,E=t.footerHintContent,y=t.footerActionContent,T=void 0===y?" ":y;this.dialog=AJS.dialog2(aui.dialog.dialog2({id:e,size:r,modal:f,removeOnHide:c,extraClasses:"widget-dialog2 "+w+" "+(l?"aui-dialog2-warning":""),extraAttributes:x,titleText:C,titleContent:b,content:m,footerHintText:A,footerHintContent:E,footerActionContent:T})),this.addButtons(d),this.dialog.on("show",function(){return i.triggerMethod("dialog:show")}),this.dialog.on("hide",function(){return i.triggerMethod("dialog:hide")})},validateOptions:function(t){var i=t.content,o=t.titleText,e=t.titleContent,n=t.buttons;if(!i)throw new Error("Content is required");if(!o&&!e)throw new Error("Either titleText or titleContent is required");if(n){if(!Array.isArray(n))throw new Error("Buttons should be an Array");n.forEach(function(t){if("function"!=typeof t.onClick)throw new Error("onClick handler for a button has to be a function");if(!t.text)throw new Error("Text of a button is required")})}},onDestroy:function(){try{this.dialog.remove()}catch(t){}},show:function(){this.dialog.show()},hide:function(){this.dialog.hide(),t.fx.off&&t("div.aui-blanket").remove()},addButtons:function(t){t.forEach(this.addButton,this)},addButton:function(i){var o=this,e=this.dialog.$el,n=e.find(".aui-dialog2-footer-actions"),r=i.extraClasses,a=i.text,d=i.type,s=i.onClick;t(aui.buttons.button({extraClasses:r,text:a,type:d})).on("click",function(){return s(o)}).appendTo(n)}},{SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge",show:function(t){var i=new this(t);return i.show(),i}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-page-visibility-manager', location = '/widget/page-visibility-manager/page-visibility-manager.js' */
define("widget/page-visibility-manager",["jquery"],function(i){"use strict";var t=i(document),e=i(window),n=void 0,d=void 0,s=function(i){t.attr("atlHidden",i)},a=function(){s(document[n])};if(void 0!==document.hidden)d="visibilitychange",n="visibilityState";else if(void 0!==document.mozHidden)d="mozvisibilitychange",n="mozVisibilityState";else if(void 0!==document.msHidden)d="msvisibilitychange",n="msVisibilityState";else if(void 0!==document.webkitHidden)d="webkitvisibilitychange",n="webkitVisibilityState";else if(d="atlvisibilitychange",n="atlVisibilityState",document.createEvent){var c=document.createEvent("Event");c.initEvent(d,!1,!1),e.focus(function(){s("visible"),document.dispatchEvent(c)}),e.blur(function(){s("hidden"),document.dispatchEvent(c)})}return"atlvisibilitychange"!==d?(a(),t.on(d,a)):s(document.hasFocus?document.hasFocus()?"visible":"hidden":"visible"),{isPageVisible:function(){return"visible"===t.attr("atlHidden")},attachVisibilityChangeHandler:function(i){t.on(d,i)},setUp:function(i,t){var e=this,n=t||function(){},d=i||function(){},s=this.attachVisibilityChangeHandler,a=function(i){e.isPageVisible()?d(i):n(i)};a(!0),s(function(){a(!1)})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-simple-select2', location = '/widget/simple-select2/simple-select2.js' */
define("widget/simple-select2",["jquery"],function(e){"use strict";return function(t){var s=e(t);return s.removeClass("widget-simple-select2--multiple"),s.auiSelect2({dropdownCssClass:"widget-simple-select2__dropdown",formatResult:bamboo.widget.simpleSelect2.result}),s}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-simple-select2', location = '/widget/simple-select2/simple-select2.soy' */
// This file was automatically generated from simple-select2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.simpleSelect2.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.simpleSelect2 == 'undefined') { bamboo.widget.simpleSelect2 = {}; }


bamboo.widget.simpleSelect2.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.text);
};
if (goog.DEBUG) {
  bamboo.widget.simpleSelect2.result.soyTemplateName = 'bamboo.widget.simpleSelect2.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-datepicker', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
("undefined"===typeof window?global:window).__0aea4f4257d4af7c80e8cb23a2b3d6a1=function(){(function(d){function B(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass=
"ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};d.extend(this._defaults,this.regional[""]);this.dpDiv=C(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function C(a){return a.bind("mouseout",
function(a){a=d(a.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");a.length&&a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!d.datepicker._isDisabledDatepicker(D.inline?a.parent()[0]:D.input[0])&&b.length)b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b.addClass("ui-state-hover"),b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover"),b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")})}function z(a,b){d.extend(a,b);for(var c in b)if(null==b[c]||void 0==b[c])a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.24"}});var x=(new Date).getTime(),D;d.extend(B.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){z(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null,e;for(e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==e;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var j=this._newInst(d(a),f);j.settings=d.extend({},b||{},c||{});"input"==e?this._connectDatepicker(a,j):f&&this._inlineDatepicker(a,j)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:C(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");("focus"==
c||"both"==c)&&a.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0])d.datepicker._hideDatepicker();
else{d.datepicker._datepickerShowing&&d.datepicker._lastInput!=a[0]&&d.datepicker._hideDatepicker();d.datepicker._showDatepicker(a[0])}return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),
b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a));z(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);
this._pos=f?f.length?f:[f.pageX,f.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);
d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=d.map(this._disabledInputs,
function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled",
"disabled");this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==
b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};"string"==typeof b&&(f={},f[b]=c);if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,!0),j=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");z(e.settings,f);null!==j&&(void 0!==f.dateFormat&&void 0===f.minDate)&&(e.settings.minDate=this._formatDate(e,j));null!==g&&(void 0!==f.dateFormat&&void 0===f.maxDate)&&(e.settings.maxDate=this._formatDate(e,g));this._attachments(d(a),
e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=
d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),
!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,
a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){var b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat")),c=String.fromCharCode(void 0==
a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||-1<b.indexOf(c)}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a)))d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a)}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&
(a=d("input",a.parentNode)[0]);if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&(d.datepicker._curInst.dpDiv.stop(!0,!0),b&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0]));var c=d.datepicker._get(b,"beforeShow"),c=c?c.apply(a,[a,b]):{};if(!1!==c){z(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);d.datepicker._inDialog&&
(a.value="");d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;d(a).parents().each(function(){e=e|d(this).css("position")=="fixed";return!e});e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){var c=d.datepicker._get(b,"showAnim"),f=d.datepicker._get(b,"duration"),h=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
!0;if(d.effects&&d.effects[c])b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h);else b.dpDiv[c||"show"](c?f:null,h);(!c||!f)&&h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);D=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),
height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&(d.datepicker._datepickerShowing&&
a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement)&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=
a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,j=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+(c?0:d(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:d(document).scrollTop());b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+j?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,
b.top+f>i&&i>f?Math.abs(f+j):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){var a=this._get(b,"showAnim"),c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b)};if(d.effects&&d.effects[a])b.dpDiv.hide(a,
d.datepicker._get(b,"showOptions"),c,e);else b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,e);a||e();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){var a=d(a.target),b=d.datepicker._getInst(a[0]);(a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||a.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=b)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var a=d(a),e=this._getInst(a[0]);
this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var a=d(a),b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},
_selectMonthYear:function(a,b,c){var a=d(a),e=this._getInst(a[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);!d(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(f[0])&&(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,
f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){var c=d(a),c=this._getInst(c[0]),b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=
null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(null==
a||null==b)throw"Invalid arguments";b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,j=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,i=c=-1,p=-1,r=-1,k=!1,m=function(b){(b=y+1<a.length&&
a.charAt(y+1)==b)&&y++;return b},l=function(a){var c=m(a),a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(u).match(a);if(!a)throw"Missing number at position "+u;u+=a[0].length;return parseInt(a[0],10)},n=function(a,c,e){var a=d.map(m(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;d.each(a,function(a,c){var d=c[1];if(b.substr(u,d.length).toLowerCase()==d.toLowerCase())return f=c[0],u+=d.length,!1});if(-1!=f)return f+
1;throw"Unknown name at position "+u;},s=function(){if(b.charAt(u)!=a.charAt(y))throw"Unexpected literal at position "+u;u++},u=0,y=0;y<a.length;y++)if(k)"'"==a.charAt(y)&&!m("'")?k=!1:s();else switch(a.charAt(y)){case "d":p=l("d");break;case "D":n("D",f,h);break;case "o":r=l("o");break;case "m":i=l("m");break;case "M":i=n("M",j,g);break;case "y":c=l("y");break;case "@":var v=new Date(l("@")),c=v.getFullYear(),i=v.getMonth()+1,p=v.getDate();break;case "!":v=new Date((l("!")-this._ticksTo1970)/1E4);
c=v.getFullYear();i=v.getMonth()+1;p=v.getDate();break;case "'":m("'")?s():k=!0;break;default:s()}if(u<b.length)throw"Extra/unparsed characters found in date: "+b.substring(u);-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<r){i=1;p=r;do{e=this._getDaysInMonth(c,i-1);if(p<=e)break;i++;p-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,i-1,p));if(v.getFullYear()!=c||v.getMonth()+1!=i||v.getDate()!=p)throw"Invalid date";return v},
ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,
c=(c?c.monthNames:null)||this._defaults.monthNames,j=function(b){(b=r+1<a.length&&a.charAt(r+1)==b)&&r++;return b},g=function(a,b,c){b=""+b;if(j(a))for(;b.length<c;)b="0"+b;return b},i="",p=!1;if(b)for(var r=0;r<a.length;r++)if(p)"'"==a.charAt(r)&&!j("'")?p=!1:i+=a.charAt(r);else switch(a.charAt(r)){case "d":i+=g("d",b.getDate(),2);break;case "D":var k;k=b.getDay();var m=d,l=f;k=j("D")?l[k]:m[k];i+=k;break;case "o":i+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":i+=g("m",b.getMonth()+1,2);break;case "M":k=b.getMonth();m=h;l=c;k=j("M")?l[k]:m[k];i+=k;break;case "y":i+=j("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":i+=b.getTime();break;case "!":i+=1E4*b.getTime()+this._ticksTo1970;break;case "'":j("'")?i+="'":p=!0;break;default:i+=a.charAt(r)}return i},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=f+1<a.length&&a.charAt(f+1)==b)&&f++;return b},
f=0;f<a.length;f++)if(c)"'"==a.charAt(f)&&!d("'")?c=!1:b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var j=
this._getFormatConfig(a);try{f=this.parseDate(c,d,j)||h}catch(g){this.log(g),d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){if(null==b||""===b)b=c;else{var e;if("string"==
typeof b)a:{try{e=d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),b,d.datepicker._getFormatConfig(a));break a}catch(f){}var h=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,a=h.getFullYear();e=h.getMonth();for(var h=h.getDate(),j=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=j.exec(b);g;){switch(g[2]||"d"){case "d":case "D":h+=parseInt(g[1],10);break;case "w":case "W":h+=7*parseInt(g[1],10);break;case "m":case "M":e+=parseInt(g[1],10);h=Math.min(h,d.datepicker._getDaysInMonth(a,
e));break;case "y":case "Y":a+=parseInt(g[1],10),h=Math.min(h,d.datepicker._getDaysInMonth(a,e))}g=j.exec(b)}e=new Date(a,e,h)}else"number"==typeof b?isNaN(b)?b=c:(a=new Date,a.setDate(a.getDate()+b),b=a):b=new Date(b.getTime()),e=b;b=e}if(b=b&&"Invalid Date"==b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,
b,c){var d=!b,f=a.selectedMonth,h=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(f!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){d(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+x].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+x].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+
x].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),
f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),j=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),p=1!=j[0]||1!=j[1],r=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),g=a.drawMonth-g,l=a.drawYear;0>g&&(g+=12,l--);if(m)for(var n=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-j[0]*j[1]+1,m.getDate())),
n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(l,g,1))>n;)g--,0>g&&(g=11,l--);a.drawMonth=g;a.drawYear=l;var n=this._get(a,"prevText"),n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(l,g-i,1)),this._getFormatConfig(a)),n=this._canAdjustMonth(a,-1,l,g)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+
n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>",s=this._get(a,"nextText"),s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(l,g+i,1)),this._getFormatConfig(a)),f=this._canAdjustMonth(a,1,l,g)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+s+"</span></a>",i=this._get(a,"currentText"),s=this._get(a,"gotoCurrent")&&a.currentDay?r:b,i=!h?i:this.formatDate(i,s,this._getFormatConfig(a)),h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>":"",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
i+"</button>":"")+(c?"":h)+"</div>":"",h=parseInt(this._get(a,"firstDay"),10),h=isNaN(h)?0:h,i=this._get(a,"showWeek"),s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var u=this._get(a,"dayNamesMin"),y=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),x=this._get(a,"beforeShowDay"),z=this._get(a,"showOtherMonths"),D=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var B=this._getDefaultDate(a),E="",F=0;F<j[0];F++){var I="";this.maxRows=4;for(var G=0;G<j[1];G++){var C=
this._daylightSavingAdjust(new Date(l,g,a.selectedDay)),t=" ui-corner-all",q="";if(p){q+='<div class="ui-datepicker-group';if(1<j[1])switch(G){case 0:q+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case j[1]-1:q+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:q+=" ui-datepicker-group-middle",t=""}q+='">'}for(var q=q+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&0==F?c?f:n:"")+(/all|right/.test(t)&&
0==F?c?n:f:"")+this._generateMonthYearHeader(a,g,l,k,m,0<F||0<G,y,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),w=i?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",t=0;7>t;t++)var o=(t+h)%7,w=w+("<th"+(5<=(t+h+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+s[o]+'">'+u[o]+"</span></th>");q+=w+"</tr></thead><tbody>";w=this._getDaysInMonth(l,g);l==a.selectedYear&&g==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,w));t=(this._getFirstDayOfMonth(l,
g)-h+7)%7;w=Math.ceil((t+w)/7);this.maxRows=w=p?this.maxRows>w?this.maxRows:w:w;for(var o=this._daylightSavingAdjust(new Date(l,g,1-t)),L=0;L<w;L++){for(var q=q+"<tr>",J=!i?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(o)+"</td>",t=0;7>t;t++){var H=x?x.apply(a.input?a.input[0]:null,[o]):[!0,""],A=o.getMonth()!=g,K=A&&!D||!H[0]||k&&o<k||m&&o>m,J=J+('<td class="'+(5<=(t+h+6)%7?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(o.getTime()==C.getTime()&&g==a.selectedMonth&&
a._keyEvent||B.getTime()==o.getTime()&&B.getTime()==C.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!z?"":" "+H[1]+(o.getTime()==r.getTime()?" "+this._currentClass:"")+(o.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!A||z)&&H[2]?' title="'+H[2]+'"':"")+(K?"":' data-handler="selectDay" data-event="click" data-month="'+o.getMonth()+'" data-year="'+o.getFullYear()+'"')+">"+(A&&!z?"&#xa0;":K?'<span class="ui-state-default">'+o.getDate()+"</span>":
'<a class="ui-state-default'+(o.getTime()==b.getTime()?" ui-state-highlight":"")+(o.getTime()==r.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+'" href="#">'+o.getDate()+"</a>")+"</td>");o.setDate(o.getDate()+1);o=this._daylightSavingAdjust(o)}q+=J+"</tr>"}g++;11<g&&(g=0,l++);q+="</tbody></table>"+(p?"</div>"+(0<j[0]&&G==j[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");I+=q}E+=I}E+=e+(d.browser.msie&&7>parseInt(d.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=!1;return E},_generateMonthYearHeader:function(a,b,c,d,f,h,j,g){var i=this._get(a,"changeMonth"),p=this._get(a,"changeYear"),r=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',m="";if(h||!i)m+='<span class="ui-datepicker-month">'+j[b]+"</span>";else{for(var j=d&&d.getFullYear()==c,l=f&&f.getFullYear()==c,m=m+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',n=0;12>n;n++)if((!j||n>=d.getMonth())&&(!l||n<=f.getMonth()))m+='<option value="'+
n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";m+="</select>"}r||(k+=m+(h||!i||!p?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",h||!p)k+='<span class="ui-datepicker-year">'+c+"</span>";else{var g=this._get(a,"yearRange").split(":"),s=(new Date).getFullYear(),j=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?s+parseInt(a,10):parseInt(a,10);return isNaN(a)?s:a},b=j(g[0]),g=Math.max(b,j(g[1]||"")),b=d?Math.max(b,d.getFullYear()):b,g=f?Math.min(g,f.getFullYear()):
g;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}k+=this._get(a,"yearSuffix");r&&(k+=(h||!i||!p?"&#xa0;":"")+m);return k+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),f=a.drawMonth+("M"==c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"==c?b:0),d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),
d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new B;d.datepicker.initialized=!1;d.datepicker.uuid=
(new Date).getTime();d.datepicker.version="1.8.24";window["DP_jQuery_"+x]=d})(jQuery);return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-position', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.position.js' */
(function(c){c.ui=c.ui||{};var k=/left|center|right/,l=/top|center|bottom/,n=c.fn.position,o=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return n.apply(this,arguments);var b=c.extend({},b),a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),f=b.offset?b.offset.split(" "):[0,0],h,j,e;9===d.nodeType?(h=a.width(),j=a.height(),e={top:0,left:0}):d.setTimeout?(h=a.width(),j=a.height(),e={top:a.scrollTop(),left:a.scrollLeft()}):d.preventDefault?(b.at="left top",h=j=0,e={top:b.of.pageY,left:b.of.pageX}):
(h=a.outerWidth(),j=a.outerHeight(),e=a.offset());c.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=k.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=k.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b[this]=a});1===g.length&&(g[1]=g[0]);f[0]=parseInt(f[0],10)||0;1===f.length&&(f[1]=f[0]);f[1]=parseInt(f[1],10)||0;"right"===b.at[0]?e.left+=h:"center"===b.at[0]&&(e.left+=h/2);"bottom"===b.at[1]?e.top+=j:"center"===b.at[1]&&
(e.top+=j/2);e.left+=f[0];e.top+=f[1];return this.each(function(){var a=c(this),d=a.outerWidth(),m=a.outerHeight(),k=parseInt(c.curCSS(this,"marginLeft",true))||0,l=parseInt(c.curCSS(this,"marginTop",true))||0,n=d+k+(parseInt(c.curCSS(this,"marginRight",true))||0),o=m+l+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},e),p;if(b.my[0]==="right")i.left=i.left-d;else if(b.my[0]==="center")i.left=i.left-d/2;if(b.my[1]==="bottom")i.top=i.top-m;else if(b.my[1]==="center")i.top=i.top-m/2;
p={left:i.left-k,top:i.top-l};c.each(["left","top"],function(a,e){if(c.ui.position[g[a]])c.ui.position[g[a]][e](i,{targetWidth:h,targetHeight:j,elemWidth:d,elemHeight:m,collisionPosition:p,collisionWidth:n,collisionHeight:o,offset:f,my:b.my,at:b.at})});c.fn.bgiframe&&a.bgiframe();a.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=0<d?b.left-d:Math.max(b.left-a.collisionPosition.left,
b.left)},top:function(b,a){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=0<d?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if("center"!==a.at[0]){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft(),g="left"===a.my[0]?-a.elemWidth:"right"===a.my[0]?a.elemWidth:0,f="left"===a.at[0]?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=0>a.collisionPosition.left?g+f+h:0<d?g+f+h:0}},top:function(b,
a){if("center"!==a.at[1]){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop(),g="top"===a.my[1]?-a.elemHeight:"bottom"===a.my[1]?a.elemHeight:0,f="top"===a.at[1]?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=0>a.collisionPosition.top?g+f+h:0<d?g+f+h:0}}}};c.offset.setOffset||(c.offset.setOffset=function(b,a){/static/.test(c.curCSS(b,"position"))&&(b.style.position="relative");var d=c(b),g=d.offset(),f=parseInt(c.curCSS(b,"top",!0),10)||0,h=parseInt(c.curCSS(b,
"left",!0),10)||0,g={top:a.top-g.top+f,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)},c.fn.offset=function(b){var a=this[0];return!a||!a.ownerDocument?null:b?c.isFunction(b)?this.each(function(a){c(this).offset(b.call(this,a,c(this).offset()))}):this.each(function(){c.offset.setOffset(this,b)}):o.call(this)});c.curCSS||(c.curCSS=c.css)})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.accordion.js' */
(function(d){d.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var a=this,b=a.options;a.running=0;a.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");
a.headers=a.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){b.disabled||d(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){b.disabled||d(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){b.disabled||d(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){b.disabled||d(this).removeClass("ui-state-focus")});a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(b.navigation){var c=a.element.find("a").filter(b.navigationFilter).eq(0);if(c.length){var f=c.closest(".ui-accordion-header");a.active=f.length?f:c.closest(".ui-accordion-content").prev()}}a.active=a._findActive(a.active||b.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");a.active.next().addClass("ui-accordion-content-active");a._createIcons();a.resize();a.element.attr("role","tablist");a.headers.attr("role","tab").bind("keydown.accordion",
function(b){return a._keydown(b)}).next().attr("role","tabpanel");a.headers.not(a.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();a.active.length?a.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0);d.browser.safari||a.headers.find("a").attr("tabIndex",-1);b.event&&a.headers.bind(b.event.split(" ").join(".accordion ")+".accordion",function(b){a._clickHandler.call(a,b,this);b.preventDefault()})},_createIcons:function(){var a=
this.options;a.icons&&(d("<span></span>").addClass("ui-icon "+a.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var a=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");(a.autoHeight||a.fillHeight)&&b.css("height","");return d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"active"==a&&this.activate(b);"icons"==a&&(this._destroyIcons(),
b&&this._createIcons());if("disabled"==a)this.headers.add(this.headers.next())[b?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(a){if(!this.options.disabled&&!a.altKey&&!a.ctrlKey){var b=d.ui.keyCode,c=this.headers.length,f=this.headers.index(a.target),g=!1;switch(a.keyCode){case b.RIGHT:case b.DOWN:g=this.headers[(f+1)%c];break;case b.LEFT:case b.UP:g=this.headers[(f-1+c)%c];break;case b.SPACE:case b.ENTER:this._clickHandler({target:a.target},a.target),a.preventDefault()}return g?
(d(a.target).attr("tabIndex",-1),d(g).attr("tabIndex",0),g.focus(),!1):!0}},resize:function(){var a=this.options,b;if(a.fillSpace){if(d.browser.msie){var c=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height();d.browser.msie&&this.element.parent().css("overflow",c);this.headers.each(function(){b-=d(this).outerHeight(!0)});this.headers.next().each(function(){d(this).height(Math.max(0,b-d(this).innerHeight()+d(this).height()))}).css("overflow",
"auto")}else a.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,d(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;a=this._findActive(a)[0];this._clickHandler({target:a},a);return this},_findActive:function(a){return a?"number"===typeof a?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):!1===a?d([]):this.headers.filter(":eq(0)")},_clickHandler:function(a,b){var c=this.options;if(!c.disabled)if(a.target){var f=d(a.currentTarget||
b),g=f[0]===this.active[0];c.active=c.collapsible&&g?!1:this.headers.index(f);if(!(this.running||!c.collapsible&&g)){var i=this.active,e=f.next(),h=this.active.next(),k={options:c,newHeader:g&&c.collapsible?d([]):f,oldHeader:this.active,newContent:g&&c.collapsible?d([]):e,oldContent:h},j=this.headers.index(this.active[0])>this.headers.index(f[0]);this.active=g?d([]):f;this._toggle(e,h,k,g,j);i.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);
g||(f.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(c.icons.header).addClass(c.icons.headerSelected),f.next().addClass("ui-accordion-content-active"))}}else if(c.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);this.active.next().addClass("ui-accordion-content-active");var h=this.active.next(),
k={options:c,newHeader:d([]),oldHeader:c.active,newContent:d([]),oldContent:h},e=this.active=d([]);this._toggle(e,h,k)}},_toggle:function(a,b,c,f,g){var i=this,e=i.options;i.toShow=a;i.toHide=b;i.data=c;var h=function(){if(i)return i._completed.apply(i,arguments)};i._trigger("changestart",null,i.data);i.running=0===b.size()?a.size():b.size();if(e.animated){c={};c=e.collapsible&&f?{toShow:d([]),toHide:b,complete:h,down:g,autoHeight:e.autoHeight||e.fillSpace}:{toShow:a,toHide:b,complete:h,down:g,autoHeight:e.autoHeight||
e.fillSpace};e.proxied||(e.proxied=e.animated);e.proxiedDuration||(e.proxiedDuration=e.duration);e.animated=d.isFunction(e.proxied)?e.proxied(c):e.proxied;e.duration=d.isFunction(e.proxiedDuration)?e.proxiedDuration(c):e.proxiedDuration;var f=d.ui.accordion.animations,k=e.duration,j=e.animated;j&&(!f[j]&&!d.easing[j])&&(j="slide");f[j]||(f[j]=function(a){this.slide(a,{easing:j,duration:k||700})});f[j](c)}else e.collapsible&&f?a.toggle():(b.hide(),a.show()),h(!0);b.prev().attr({"aria-expanded":"false",
"aria-selected":"false",tabIndex:-1}).blur();a.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}});d.extend(d.ui.accordion,{version:"1.8.24",
animations:{slide:function(a,b){a=d.extend({easing:"swing",duration:300},a,b);if(a.toHide.size())if(a.toShow.size()){var c=a.toShow.css("overflow"),f=0,g={},i={},e,h=a.toShow;e=h[0].style.width;h.width(h.parent().width()-parseFloat(h.css("paddingLeft"))-parseFloat(h.css("paddingRight"))-(parseFloat(h.css("borderLeftWidth"))||0)-(parseFloat(h.css("borderRightWidth"))||0));d.each(["height","paddingTop","paddingBottom"],function(b,c){i[c]="hide";var e=(""+d.css(a.toShow[0],c)).match(/^([\d+-.]+)(.*)$/);
g[c]={value:e[1],unit:e[2]||"px"}});a.toShow.css({height:0,overflow:"hidden"}).show();a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(i,{step:function(b,c){"height"==c.prop&&(f=0===c.end-c.start?0:(c.now-c.start)/(c.end-c.start));a.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:a.duration,easing:a.easing,complete:function(){a.autoHeight||a.toShow.css("height","");a.toShow.css({width:e,overflow:c});a.complete()}})}else a.toHide.animate({height:"hide",
paddingTop:"hide",paddingBottom:"hide"},a);else a.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},a)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1E3:200})}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.autocomplete.js' */
(function(d){var c=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,c;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(b){if(!a.options.disabled&&
!a.element.propAttr("readOnly")){c=!1;var f=d.ui.keyCode;switch(b.keyCode){case f.PAGE_UP:a._move("previousPage",b);break;case f.PAGE_DOWN:a._move("nextPage",b);break;case f.UP:a._keyEvent("previous",b);break;case f.DOWN:a._keyEvent("next",b);break;case f.ENTER:case f.NUMPAD_ENTER:a.menu.active&&(c=!0,b.preventDefault());case f.TAB:if(!a.menu.active)break;a.menu.select(b);break;case f.ESCAPE:a.element.val(a.term);a.close(b);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=
a.element.val()&&(a.selectedItem=null,a.search(null,b))},a.options.delay)}}}).bind("keypress.autocomplete",function(a){c&&(c=!1,a.preventDefault())}).bind("focus.autocomplete",function(){a.options.disabled||(a.selectedItem=null,a.previous=a.element.val())}).bind("blur.autocomplete",function(b){a.options.disabled||(clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b);a._change(b)},150))});this._initSource();this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||
"body",b)[0]).mousedown(function(b){var c=a.menu.element[0];d(b.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(b){b.target!==a.element[0]&&(b.target!==c&&!d.ui.contains(c,b.target))&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,d){var c=d.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:c})&&/^key/.test(b.originalEvent.type)&&a.element.val(c.value)},selected:function(c,d){var e=d.item.data("item.autocomplete"),
h=a.previous;a.element[0]!==b.activeElement&&(a.element.focus(),a.previous=h,setTimeout(function(){a.previous=h;a.selectedItem=e},1));!1!==a._trigger("select",c,{item:e})&&a.element.val(e.value);a.term=a.element.val();a.close(c);a.selectedItem=e},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe();a.beforeunloadHandler=function(){a.element.removeAttr("autocomplete")};
d(window).bind("beforeunload",a.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d(window).unbind("beforeunload",this.beforeunloadHandler);d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(d(b||
"body",this.element[0].ownerDocument)[0]);"disabled"===a&&(b&&this.xhr)&&this.xhr.abort()},_initSource:function(){var a=this,b,c;d.isArray(this.options.source)?(b=this.options.source,this.source=function(a,c){c(d.ui.autocomplete.filter(b,a.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(b,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):this.source=this.options.source},search:function(a,
b){a=null!=a?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&
a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:d.map(a,function(a){return"string"===typeof a?{label:a,value:a}:d.extend({label:a.label||
a.value,value:a.value||a.label},a)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,b){var c=
this;d.each(b,function(b,d){c._renderItem(a,d)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,
b),b.preventDefault()}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var c=RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(a){return c.test(a.label||a.value||a)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var c=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){d(a.target).closest(".ui-menu-item a").length&&(a.preventDefault(),c.select(a))});this.refresh()},refresh:function(){var c=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(a){c.activate(a,d(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(c,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,d=this.element.scrollTop(),g=this.element.height();0>b?this.element.scrollTop(d+b):b>=g&&this.element.scrollTop(d+b-g+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",c,{item:a})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(c,a,b){this.active?(c=this.active[c+"All"](".ui-menu-item").eq(0),c.length?this.activate(b,
c):this.activate(b,this.element.children(a))):this.activate(b,this.element.children(a))},nextPage:function(c){if(this.hasScroll())if(!this.active||this.last())this.activate(c,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:last"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(c){if(this.hasScroll())if(!this.active||this.first())this.activate(c,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a+b-d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:first"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[d.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.button.js' */
(function(b){var g,h,i,e,k=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},j=function(a){var c=a.name,d=a.form,f=b([]);c&&(f=d?b(d).find("[name='"+c+"']"):b("[name='"+c+"']",a.ownerDocument).filter(function(){return!this.form}));return f};b.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",k);"boolean"!==typeof this.options.disabled?
this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,d="checkbox"===this.type||"radio"===this.type,f="ui-state-hover"+(!d?" ui-state-active":"");null===c.label&&(c.label=this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!c.disabled){b(this).addClass("ui-state-hover");
this===g&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||b(this).removeClass(f)}).bind("click.button",function(a){if(c.disabled){a.preventDefault();a.stopImmediatePropagation()}});this.element.bind("focus.button",function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){a.buttonElement.removeClass("ui-state-focus")});d&&(this.element.bind("change.button",function(){e||a.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(!c.disabled){e=
false;h=a.pageX;i=a.pageY}}).bind("mouseup.button",function(a){if(!c.disabled&&(h!==a.pageX||i!==a.pageY))e=true}));"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");var d=
a.element[0];j(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;b(this).addClass("ui-state-active");g=this;b(document).one("mouseup",function(){g=null})}).bind("mouseup.button",function(){if(c.disabled)return false;b(this).removeClass("ui-state-active")}).bind("keydown.button",function(a){if(c.disabled)return false;(a.keyCode==b.ui.keyCode.SPACE||
a.keyCode==b.ui.keyCode.ENTER)&&b(this).addClass("ui-state-active")}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if("checkbox"===this.type||
"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b);this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b)));this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=
this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||
this.buttonElement.removeAttr("title");b.Widget.prototype.destroy.call(this)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments);"disabled"===a?c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?j(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=b("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),d=this.options.icons,f=d.primary&&d.secondary,e=[];d.primary||d.secondary?(this.options.text&&e.push("ui-button-text-icon"+(f?"s":d.primary?"-primary":"-secondary")),d.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||
(e.push(f?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||a.attr("title",c))):e.push("ui-button-text-only");a.addClass(e.join(" "))}}});b.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,c){"disabled"===a&&this.buttons.button("option",a,c);b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a="rtl"===
this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
b.Widget.prototype.destroy.call(this)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.dialog.js' */
(function(c){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},j={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};c.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;0>b&&c(this).css("top",a.top-b)}},resizable:!0,
show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=c.ui.dialog.getTitleId(a.element),e=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){if(b.closeOnEscape&&
!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}}).attr({role:"dialog","aria-labelledby":d}).mousedown(function(c){a.moveToTop(false,c)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(e),g=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){g.addClass("ui-state-hover")},function(){g.removeClass("ui-state-hover")}).focus(function(){g.addClass("ui-state-focus")}).blur(function(){g.removeClass("ui-state-focus")}).click(function(c){a.close(c);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(g);d=c("<span></span>").addClass("ui-dialog-title").attr("id",d).prependTo(f);this._title(d);c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose)&&
(b.beforeClose=b.beforeclose);f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=!1;c.fn.bgiframe&&e.bgiframe()},_title:function(a){this.options.title||a.html("&#160;");a.text(this.options.title)},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(!1!==b._trigger("beforeClose",a))return b.overlay&&b.overlay.destroy(),b.uiDialog.unbind("keypress.ui-dialog"),b._isOpen=!1,b.options.hide?b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)}):(b.uiDialog.hide(),b._trigger("close",a)),c.ui.dialog.overlay.resize(),b.options.modal&&(d=0,c(".ui-dialog").each(function(){if(this!==
b.uiDialog[0]){e=c(this).css("z-index");isNaN(e)||(d=Math.max(d,e))}}),c.ui.dialog.maxZ=d),b},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this.options;if(d.modal&&!a||!d.stack&&!d.modal)return this._trigger("focus",b);d.zIndex>c.ui.dialog.maxZ&&(c.ui.dialog.maxZ=d.zIndex);this.overlay&&(c.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ));d={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};c.ui.dialog.maxZ+=
1;this.uiDialog.css("z-index",c.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",b);return this},open:function(){if(!this._isOpen){var a=this.options,b=this.uiDialog;this.overlay=a.modal?new c.ui.dialog.overlay(this):null;this._size();this._position(a.position);b.show(a.show);this.moveToTop(!0);a.modal&&b.bind("keydown.ui-dialog",function(a){if(a.keyCode===c.ui.keyCode.TAB){var b=c(":tabbable",this),f=b.filter(":first"),b=b.filter(":last");if(a.target===b[0]&&!a.shiftKey)return f.focus(1),
!1;if(a.target===f[0]&&a.shiftKey)return b.focus(1),!1}});c(this.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(a){var b=this,d=!1,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();"object"===typeof a&&
null!==a&&c.each(a,function(){return!(d=!0)});d&&(c.each(a,function(a,d){var d=c.isFunction(d)?{click:d,text:a}:d,e=c('<button type="button"></button>').click(function(){d.click.apply(b.element[0],arguments)}).appendTo(f);c.each(d,function(a,b){if("click"!==a)if(a in e)e[a](b);else e.attr(a,b)});c.fn.button&&e.button()}),e.appendTo(b.uiDialog))},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var b=this,d=b.options,e=c(document),f;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(e,h){f="auto"===d.height?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",e,a(h))},drag:function(c,d){b._trigger("drag",c,a(d))},stop:function(g,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(f);b._trigger("dragStop",g,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(a){return{originalPosition:a.originalPosition,
originalSize:a.originalSize,position:a.position,size:a.size}}var a=void 0===a?this.options.resizable:a,d=this,e=d.options,f=d.uiDialog.css("position"),a="string"===typeof a?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(a,e){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",a,b(e))},resize:function(a,c){d._trigger("resize",
a,b(c))},stop:function(a,f){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",a,b(f));c.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)b=a.split?a.split(" "):
[a[0],a[1]],1===b.length&&(b[1]=b[0]),c.each(["left","top"],function(a,c){+b[a]===b[a]&&(d[a]=b[a],b[a]=c)}),a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")};a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=!1;c.each(a,function(a,c){b._setOption(a,c);a in
i&&(e=!0);a in j&&(d[a]=c)});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":this._createButtons(b);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":d.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?d.addClass("ui-dialog-disabled"):
d.removeClass("ui-dialog-disabled");break;case "draggable":var e=d.is(":data(draggable)");e&&!b&&d.draggable("destroy");!e&&b&&this._makeDraggable();break;case "position":this._position(b);break;case "resizable":(e=d.is(":data(resizable)"))&&!b&&d.resizable("destroy");e&&"string"===typeof b&&d.resizable("option","handles",b);!e&&!1!==b&&this._makeResizable(b);break;case "title":this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}c.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var a=
this.options,b,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});a.minWidth>a.width&&(a.width=a.minWidth);b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);"auto"===a.height?c.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),a=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(a,d))):this.element.height(Math.max(a.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){0===this.instances.length&&
(setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(a){if(c(a.target).zIndex()<c.ui.dialog.overlay.maxZ)return!1})},1),c(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&(!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===c.ui.keyCode.ESCAPE)&&(a.close(b),b.preventDefault())}),c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize));var b=(this.oldInstances.pop()||c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);-1!=b&&this.oldInstances.push(this.instances.splice(b,1)[0]);0===this.instances.length&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;return c.browser.msie&&7>c.browser.version?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),
b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<b?c(window).height()+"px":a+"px"):c(document).height()+"px"},width:function(){var a,b;return c.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<b?c(window).width()+"px":a+"px"):c(document).width()+"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,
height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.progressbar.js' */
(function(b){b.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();b.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(void 0===a)return this._value();this._setOption("value",a);return this},_setOption:function(a,c){"value"===a&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));b.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}});b.extend(b.ui.progressbar,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.slider.js' */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=b.values&&b.values.length||1,e=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(b.range){if(!0===b.range&&(b.values||(b.values=[this._valueMin(),this._valueMin()]),b.values.length&&2!==b.values.length))b.values=[b.values[0],b.values[0]];this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))}for(var g=c.length;g<f;g+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=c.add(d(e.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){b.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){b.disabled?d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(a){d(this).data("index.ui-slider-handle",
a)});this.handles.keydown(function(b){var c=d(this).data("index.ui-slider-handle"),e,f,g;if(!a.options.disabled){switch(b.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(b.preventDefault(),!a._keySliding&&(a._keySliding=!0,d(this).addClass("ui-state-active"),e=a._start(b,c),!1===e))return}g=a.options.step;e=a.options.values&&a.options.values.length?
f=a.values(c):f=a.value();switch(b.keyCode){case d.ui.keyCode.HOME:f=a._valueMin();break;case d.ui.keyCode.END:f=a._valueMax();break;case d.ui.keyCode.PAGE_UP:f=a._trimAlignValue(e+(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:f=a._trimAlignValue(e-(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(e===a._valueMax())return;f=a._trimAlignValue(e+g);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(e===a._valueMin())return;f=a._trimAlignValue(e-
g)}a._slide(b,c,f)}}).keyup(function(b){var c=d(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(b,c),a._change(b,c),d(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},
_mouseCapture:function(a){var b=this.options,c,f,e,g,h;if(b.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:a.pageX,y:a.pageY});f=this._valueMax()-this._valueMin()+1;g=this;this.handles.each(function(b){var a=Math.abs(c-g.values(b));f>a&&(f=a,e=d(this),h=b)});!0===b.range&&this.values(1)===b.min&&(h+=1,e=d(this.handles[h]));if(!1===this._start(a,h))return!1;this._mouseSliding=
!0;g._handleIndex=h;e.addClass("ui-state-active").focus();b=e.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-b.left-e.width()/2,top:a.pageY-b.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,h,c);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,
y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;"horizontal"===this.orientation?(b=this.elementSize.width,a=a.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+b*a;return this._trimAlignValue(b)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());return this._trigger("start",
a,c)},_slide:function(a,b,c){var d;if(this.options.values&&this.options.values.length){d=this.values(b?0:1);if(2===this.options.values.length&&!0===this.options.range&&(0===b&&c>d||1===b&&c<d))c=d;c!==this.values(b)&&(d=this.values(),d[b]=c,a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:d}),this.values(b?0:1),!1!==a&&this.values(b,c,!0))}else c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:c}),!1!==a&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],
value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,
0);else return this._value()},values:function(a,b){var c,f,e;if(1<arguments.length)this.options.values[a]=this._trimAlignValue(b),this._refreshValue(),this._change(null,a);else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(e=0;e<c.length;e+=1)c[e]=this._trimAlignValue(f[e]),this._change(null,e);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):this.value();else return this._values()},_setOption:function(a,b){var c,
f=0;d.isArray(this.options.values)&&(f=this.options.values.length);d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":b?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=
this._trimAlignValue(b[c]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%b,a=a-c;2*Math.abs(c)>=b&&(a+=0<c?b:-b);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=this.options.range,b=this.options,c=this,f=!this._animateOff?b.animate:!1,e,g=
{},h,k,i,j;if(this.options.values&&this.options.values.length)this.handles.each(function(a){e=100*((c.values(a)-c._valueMin())/(c._valueMax()-c._valueMin()));g["horizontal"===c.orientation?"left":"bottom"]=e+"%";d(this).stop(1,1)[f?"animate":"css"](g,b.animate);if(!0===c.options.range)if("horizontal"===c.orientation){if(0===a)c.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({width:e-h+"%"},{queue:!1,duration:b.animate})}else{if(0===a)c.range.stop(1,
1)[f?"animate":"css"]({bottom:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({height:e-h+"%"},{queue:!1,duration:b.animate})}h=e});else{k=this.value();i=this._valueMin();j=this._valueMax();e=j!==i?100*((k-i)/(j-i)):0;g["horizontal"===c.orientation?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](g,b.animate);if("min"===a&&"horizontal"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},b.animate);if("max"===a&&"horizontal"===this.orientation)this.range[f?
"animate":"css"]({width:100-e+"%"},{queue:!1,duration:b.animate});if("min"===a&&"vertical"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},b.animate);if("max"===a&&"vertical"===this.orientation)this.range[f?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:b.animate})}}});d.extend(d.ui.slider,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.tabs.js' */
(function(d){var n=0,o=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,d){"selected"==a?this.options.collapsible&&d==this.options.selected||this.select(d):
(this.options[a]=d,this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++n},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++o);return d.cookie.apply(null,[a].concat(d.makeArray(arguments)))},_ui:function(a,d){return{tab:a,panel:d,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=
d(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(a){function e(b,a){b.css("display","");!d.support.opacity&&a.opacity&&b[0].style.removeAttribute("filter")}var b=this,c=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(a,e){var h=d(e).attr("href"),f=h.split("#")[0],k;if(f&&(f===location.toString().split("#")[0]||
(k=d("base")[0])&&f===k.href))h=e.hash,e.href=h;g.test(h)?b.panels=b.panels.add(b.element.find(b._sanitizeSelector(h))):h&&"#"!==h?(d.data(e,"href.tabs",h),d.data(e,"load.tabs",h.replace(/#.*$/,"")),h=b._tabId(e),e.href="#"+h,f=b.element.find("#"+h),f.length||(f=d(c.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(b.panels[a-1]||b.list),f.data("destroy.tabs",!0)),b.panels=b.panels.add(f)):c.disabled.push(a)});a?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===c.selected?(location.hash&&this.anchors.each(function(b,a){if(a.hash==location.hash)return c.selected=b,!1}),"number"!==typeof c.selected&&c.cookie&&(c.selected=parseInt(b._cookie(),10)),"number"!==typeof c.selected&&this.lis.filter(".ui-tabs-selected").length&&(c.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"))),c.selected=c.selected||(this.lis.length?0:-1)):null===c.selected&&(c.selected=-1),c.selected=0<=c.selected&&this.anchors[c.selected]||0>c.selected?c.selected:0,c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(a){return b.lis.index(a)}))).sort(),-1!=d.inArray(c.selected,c.disabled)&&c.disabled.splice(d.inArray(c.selected,c.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),
0<=c.selected&&this.anchors.length&&(b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active"),b.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[c.selected],b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash))[0]))}),this.load(c.selected)),d(window).bind("unload",function(){b.lis.add(b.anchors).unbind(".tabs");b.lis=b.anchors=b.panels=null})):c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);for(var a=0,f;f=this.lis[a];a++)d(f)[-1!=d.inArray(a,c.disabled)&&!d(f).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");!1===c.cache&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if("mouseover"!==c.event){var k=function(b,a){a.is(":not(.ui-state-disabled)")&&a.addClass("ui-state-"+b)};this.lis.bind("mouseover.tabs",
function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){d(this).removeClass("ui-state-hover")});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){d(this).closest("li").removeClass("ui-state-focus")})}var j,i;c.fx&&(d.isArray(c.fx)?(j=c.fx[0],i=c.fx[1]):j=i=c.fx);var l=i?function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.hide().removeClass("ui-tabs-hide").animate(i,i.duration||"normal",
function(){e(c,i);b._trigger("show",null,b._ui(a,c[0]))})}:function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.removeClass("ui-tabs-hide");b._trigger("show",null,b._ui(a,c[0]))},m=j?function(a,c){c.animate(j,j.duration||"normal",function(){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");e(c,j);b.element.dequeue("tabs")})}:function(a,c){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");b.element.dequeue("tabs")};
this.anchors.bind(c.event+".tabs",function(){var a=this,e=d(a).closest("li"),f=b.panels.filter(":not(.ui-tabs-hide)"),g=b.element.find(b._sanitizeSelector(a.hash));if(e.hasClass("ui-tabs-selected")&&!c.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||b.panels.filter(":animated").length||b._trigger("select",null,b._ui(this,g[0]))===false){this.blur();return false}c.selected=b.anchors.index(this);b.abort();if(c.collapsible){if(e.hasClass("ui-tabs-selected")){c.selected=
-1;c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){m(a,f)}).dequeue("tabs");this.blur();return false}if(!f.length){c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this));this.blur();return false}}c.cookie&&b._cookie(c.selected,c.cookie);if(g.length){f.length&&b.element.queue("tabs",function(){m(a,f)});b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(a){"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},destroy:function(){var a=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var a=
d.data(this,"href.tabs");a&&(this.href=a);var b=d(this).unbind(".tabs");d.each(["href","load","cache"],function(a,d){b.removeData(d+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});a.cookie&&this._cookie(null,a.cookie);return this},add:function(a,
e,b){void 0===b&&(b=this.anchors.length);var c=this,g=this.options,e=d(g.tabTemplate.replace(/#\{href\}/g,a).replace(/#\{label\}/g,e)),a=!a.indexOf("#")?a.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var f=c.element.find("#"+a);f.length||(f=d(g.panelTemplate).attr("id",a).data("destroy.tabs",!0));f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");b>=this.lis.length?(e.appendTo(this.list),f.appendTo(this.list[0].parentNode)):
(e.insertBefore(this.lis[b]),f.insertBefore(this.panels[b]));g.disabled=d.map(g.disabled,function(a){return a>=b?++a:a});this._tabify();1==this.anchors.length&&(g.selected=0,e.addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))}),this.load(0));this._trigger("add",null,this._ui(this.anchors[b],this.panels[b]));return this},remove:function(a){var a=this._getIndex(a),e=this.options,b=this.lis.eq(a).remove(),
c=this.panels.eq(a).remove();b.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(a+(a+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(b){return b!=a}),function(b){return b>=a?--b:b});this._tabify();this._trigger("remove",null,this._ui(b.find("a")[0],c[0]));return this},enable:function(a){var a=this._getIndex(a),e=this.options;if(-1!=d.inArray(a,e.disabled))return this.lis.eq(a).removeClass("ui-state-disabled"),e.disabled=d.grep(e.disabled,function(b){return b!=
a}),this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a])),this},disable:function(a){var a=this._getIndex(a),d=this.options;a!=d.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),d.disabled.push(a),d.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])));return this},select:function(a){a=this._getIndex(a);if(-1==a)if(this.options.collapsible&&-1!=this.options.selected)a=this.options.selected;else return this;this.anchors.eq(a).trigger(this.options.event+
".tabs");return this},load:function(a){var a=this._getIndex(a),e=this,b=this.options,c=this.anchors.eq(a)[0],g=d.data(c,"load.tabs");this.abort();if(!g||0!==this.element.queue("tabs").length&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(a).addClass("ui-state-processing");if(b.spinner){var f=d("span",c);f.data("label.tabs",f.html()).html(b.spinner)}this.xhr=d.ajax(d.extend({},b.ajaxOptions,{url:g,success:function(f,g){e.element.find(e._sanitizeSelector(c.hash)).html(f);e._cleanup();
b.cache&&d.data(c,"cache.tabs",!0);e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.success(f,g)}catch(i){}},error:function(d,f){e._cleanup();e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.error(d,f,a,c)}catch(g){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(!1,!0);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));this.xhr&&(this.xhr.abort(),delete this.xhr);this._cleanup();
return this},url:function(a,d){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.24"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(a,d){var b=this,c=this.options,g=b._rotate||(b._rotate=function(d){clearTimeout(b.rotation);b.rotation=setTimeout(function(){var a=c.selected;b.select(++a<b.anchors.length?a:0)},a);d&&d.stopPropagation()}),f=b._unrotate||(b._unrotate=!d?function(a){a.clientX&&
b.rotate(null)}:function(){g()});a?(this.element.bind("tabsshow",g),this.anchors.bind(c.event+".tabs",f),g()):(clearTimeout(b.rotation),this.element.unbind("tabsshow",g),this.anchors.unbind(c.event+".tabs",f),delete this._rotate,delete this._unrotate);return this}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.core.js' */
jQuery.effects||function(d){function l(a){var b;return a&&a.constructor==Array&&3==a.length?a:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3])]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],
16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?m.transparent:m[d.trim(a).toLowerCase()]}function n(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var f=a.length;f--;)c=a[f],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"===
typeof a[c]&&(b[c]=a[c]);return b}function o(a){var b,c;for(b in a)c=a[b],(null==c||d.isFunction(c)||b in q||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(c)))&&delete a[b];return a}function r(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function i(a,b,c,e){"object"==typeof a&&(e=b,c=null,b=a,a=b.effect);d.isFunction(b)&&(e=b,c=null,b={});if("number"==typeof b||d.fx.speeds[b])e=c,c=b,b={};d.isFunction(c)&&(e=c,c=null);b=b||{};c=c||b.duration;c=d.fx.off?0:"number"==typeof c?
c:c in d.fx.speeds?d.fx.speeds[c]:d.fx.speeds._default;e=e||b.complete;return[a,b,c,e]}function j(a){return!a||("number"===typeof a||d.fx.speeds[a])||"string"===typeof a&&!d.effects[a]?!0:!1}d.effects={};d.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(a,b){d.fx.step[b]=function(a){if(!a.colorInit){var e;e=a.elem;var f=b,g;do{g=(d.curCSS||d.css)(e,f);if(g!=""&&g!="transparent"||d.nodeName(e,"body"))break;
f="backgroundColor"}while(e=e.parentNode);e=l(g);a.start=e;a.end=l(a.end);a.colorInit=true}a.elem.style[b]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var m={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},p=["add","remove","toggle"],q={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};d.effects.animateClass=function(a,b,c,e){d.isFunction(c)&&(e=c,c=null);return this.queue(function(){var f=
d(this),g=f.attr("style")||" ",h=o(n.call(this)),i,j=f.attr("class")||"";d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});i=o(n.call(this));f.attr("class",j);f.animate(r(h,i),{queue:false,duration:b,easing:c,complete:function(){d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});if(typeof f.attr("style")=="object"){f.attr("style").cssText="";f.attr("style").cssText=g}else f.attr("style",g);e&&e.apply(this,arguments);d.dequeue(this)}})})};d.fn.extend({_addClass:d.fn.addClass,addClass:function(a,
b,c,e){return b?d.effects.animateClass.apply(this,[{add:a},b,c,e]):this._addClass(a)},_removeClass:d.fn.removeClass,removeClass:function(a,b,c,e){return b?d.effects.animateClass.apply(this,[{remove:a},b,c,e]):this._removeClass(a)},_toggleClass:d.fn.toggleClass,toggleClass:function(a,b,c,e,f){return"boolean"==typeof b||void 0===b?c?d.effects.animateClass.apply(this,[b?{add:a}:{remove:a},c,e,f]):this._toggleClass(a,b):d.effects.animateClass.apply(this,[{toggle:a},b,c,e])},switchClass:function(a,b,c,
e,f){return d.effects.animateClass.apply(this,[{add:b,remove:a},c,e,f])}});d.extend(d.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=
1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=d("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}a.wrap(c);
(a[0]===e||d.contains(a[0],e))&&d(e).focus();c=a.parent();"static"==a.css("position")?(c.css({position:"relative"}),a.css({position:"relative"})):(d.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),d.each(["top","left","bottom","right"],function(c,d){b[d]=a.css(d);isNaN(parseInt(b[d],10))&&(b[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(b).show()},removeWrapper:function(a){var b,c=document.activeElement;return a.parent().is(".ui-effects-wrapper")?
(b=a.parent().replaceWith(a),(a[0]===c||d.contains(a[0],c))&&d(c).focus(),b):a},setTransition:function(a,b,c,e){e=e||{};d.each(b,function(b,d){var h=a.cssUnit(d);0<h[0]&&(e[d]=h[0]*c+h[1])});return e}});d.fn.extend({effect:function(a,b,c,e){var f=i.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},f=g.options.mode,h=d.effects[a];return d.fx.off||!h?f?this[f](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):h.call(this,g)},_show:d.fn.show,show:function(a){if(j(a))return this._show.apply(this,
arguments);var b=i.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:d.fn.hide,hide:function(a){if(j(a))return this._hide.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:d.fn.toggle,toggle:function(a){if(j(a)||"boolean"===typeof a||d.isFunction(a))return this.__toggle.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="toggle";return this.effect.apply(this,b)},cssUnit:function(a){var b=this.css(a),
c=[];d.each(["em","px","%","pt"],function(a,d){0<b.indexOf(d)&&(c=[parseFloat(b),d])});return c}});var k={};d.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){k[b]=function(b){return Math.pow(b,a+2)}});d.extend(k,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,
--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});d.each(k,function(a,b){d.easing["easeIn"+a]=b;d.easing["easeOut"+a]=function(a){return 1-b(1-a)};d.easing["easeInOut"+a]=function(a){return 0.5>a?b(2*a)/2:b(-2*a+2)/-2+1}})}(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.blind.js' */
(function(b){b.effects.blind=function(c){return this.queue(function(){var a=b(this),g=["position","top","bottom","left","right"],f=b.effects.setMode(a,c.options.mode||"hide"),d=c.options.direction||"vertical";b.effects.save(a,g);a.show();var e=b.effects.createWrapper(a).css({overflow:"hidden"}),h="vertical"==d?"height":"width",d="vertical"==d?e.height():e.width();"show"==f&&e.css(h,0);var i={};i[h]="show"==f?d:0;e.animate(i,c.duration,c.options.easing,function(){"hide"==f&&a.hide();b.effects.restore(a,
g);b.effects.removeWrapper(a);c.callback&&c.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.bounce.js' */
(function(e){e.effects.bounce=function(b){return this.queue(function(){var a=e(this),l=["position","top","bottom","left","right"],h=e.effects.setMode(a,b.options.mode||"effect"),d=b.options.direction||"up",c=b.options.distance||20,m=b.options.times||5,i=b.duration||250;/show|hide/.test(h)&&l.push("opacity");e.effects.save(a,l);a.show();e.effects.createWrapper(a);var f="up"==d||"down"==d?"top":"left",d="up"==d||"left"==d?"pos":"neg",c=b.options.distance||("top"==f?a.outerHeight(!0)/3:a.outerWidth(!0)/
3);"show"==h&&a.css("opacity",0).css(f,"pos"==d?-c:c);"hide"==h&&(c/=2*m);"hide"!=h&&m--;if("show"==h){var g={opacity:1};g[f]=("pos"==d?"+=":"-=")+c;a.animate(g,i/2,b.options.easing);c/=2;m--}for(g=0;g<m;g++){var j={},k={};j[f]=("pos"==d?"-=":"+=")+c;k[f]=("pos"==d?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing);c="hide"==h?2*c:c/2}"hide"==h?(g={opacity:0},g[f]=("pos"==d?"-=":"+=")+c,a.animate(g,i/2,b.options.easing,function(){a.hide();e.effects.restore(a,l);e.effects.removeWrapper(a);
b.callback&&b.callback.apply(this,arguments)})):(j={},k={},j[f]=("pos"==d?"-=":"+=")+c,k[f]=("pos"==d?"+=":"-=")+c,a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing,function(){e.effects.restore(a,l);e.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)}));a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.clip.js' */
(function(b){b.effects.clip=function(e){return this.queue(function(){var a=b(this),h="position top bottom left right height width".split(" "),f=b.effects.setMode(a,e.options.mode||"hide"),c=e.options.direction||"vertical";b.effects.save(a,h);a.show();var d=b.effects.createWrapper(a).css({overflow:"hidden"}),d="IMG"==a[0].tagName?d:a,i="vertical"==c?"height":"width",j="vertical"==c?"top":"left",c="vertical"==c?d.height():d.width();"show"==f&&(d.css(i,0),d.css(j,c/2));var g={};g[i]="show"==f?c:0;g[j]=
"show"==f?0:c/2;d.animate(g,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){f=="hide"&&a.hide();b.effects.restore(a,h);b.effects.removeWrapper(a);e.callback&&e.callback.apply(a[0],arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.drop.js' */
(function(c){c.effects.drop=function(d){return this.queue(function(){var a=c(this),h="position top bottom left right opacity".split(" "),e=c.effects.setMode(a,d.options.mode||"hide"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a);var f="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",g=d.options.distance||("top"==f?a.outerHeight(!0)/2:a.outerWidth(!0)/2);"show"==e&&a.css("opacity",0).css(f,"pos"==b?-g:g);var i={opacity:"show"==e?1:0};i[f]=("show"==
e?"pos"==b?"+=":"-=":"pos"==b?"-=":"+=")+g;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.explode.js' */
(function(j){j.effects.explode=function(a){return this.queue(function(){var c=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,d=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode="toggle"==a.options.mode?j(this).is(":visible")?"hide":"show":a.options.mode;var b=j(this).show().css("visibility","hidden"),e=b.offset();e.top-=parseInt(b.css("marginTop"),10)||0;e.left-=parseInt(b.css("marginLeft"),10)||0;for(var h=b.outerWidth(!0),i=b.outerHeight(!0),f=0;f<c;f++)for(var g=
0;g<d;g++)b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*(h/d),top:-f*(i/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:i/c,left:e.left+g*(h/d)+("show"==a.options.mode?(g-Math.floor(d/2))*(h/d):0),top:e.top+f*(i/c)+("show"==a.options.mode?(f-Math.floor(c/2))*(i/c):0),opacity:"show"==a.options.mode?0:1}).animate({left:e.left+g*(h/d)+("show"==a.options.mode?0:(g-Math.floor(d/2))*(h/d)),top:e.top+
f*(i/c)+("show"==a.options.mode?0:(f-Math.floor(c/2))*(i/c)),opacity:"show"==a.options.mode?1:0},a.duration||500);setTimeout(function(){"show"==a.options.mode?b.css({visibility:"visible"}):b.css({visibility:"visible"}).hide();a.callback&&a.callback.apply(b[0]);b.dequeue();j("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.fade.js' */
(function(b){b.effects.fade=function(a){return this.queue(function(){var c=b(this),d=b.effects.setMode(c,a.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.fold.js' */
(function(c){c.effects.fold=function(a){return this.queue(function(){var b=c(this),j=["position","top","bottom","left","right"],d=c.effects.setMode(b,a.options.mode||"hide"),g=a.options.size||15,h=!!a.options.horizFirst,k=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,j);b.show();var e=c.effects.createWrapper(b).css({overflow:"hidden"}),f="show"==d!=h,l=f?["width","height"]:["height","width"],f=f?[e.width(),e.height()]:[e.height(),e.width()],i=/([0-9]+)%/.exec(g);i&&(g=parseInt(i[1],
10)/100*f["hide"==d?0:1]);"show"==d&&e.css(h?{height:0,width:g}:{height:g,width:0});h={};i={};h[l[0]]="show"==d?f[0]:g;i[l[1]]="show"==d?f[1]:0;e.animate(h,k,a.options.easing).animate(i,k,a.options.easing,function(){"hide"==d&&b.hide();c.effects.restore(b,j);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.highlight.js' */
(function(b){b.effects.highlight=function(c){return this.queue(function(){var a=b(this),e=["backgroundImage","backgroundColor","opacity"],d=b.effects.setMode(a,c.options.mode||"show"),f={backgroundColor:a.css("backgroundColor")};"hide"==d&&(f.opacity=0);b.effects.save(a,e);a.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(f,{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){d=="hide"&&a.hide();b.effects.restore(a,e);d=="show"&&!b.support.opacity&&
this.style.removeAttribute("filter");c.callback&&c.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.pulsate.js' */
(function(e){e.effects.pulsate=function(a){return this.queue(function(){var b=e(this),d=e.effects.setMode(b,a.options.mode||"show"),g=2*(a.options.times||5)-1,h=a.duration?a.duration/2:e.fx.speeds._default/2,f=b.is(":visible"),c=0;f||(b.css("opacity",0).show(),c=1);("hide"==d&&f||"show"==d&&!f)&&g--;for(d=0;d<g;d++)b.animate({opacity:c},h,a.options.easing),c=(c+1)%2;b.animate({opacity:c},h,a.options.easing,function(){c==0&&b.hide();a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.scale.js' */
(function(c){c.effects.puff=function(b){return this.queue(function(){var a=c(this),d=c.effects.setMode(a,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,i=e/100,g={height:a.height(),width:a.width()};c.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*i,width:g.width*i}});a.effect("scale",b.options,b.duration,b.callback);a.dequeue()})};c.effects.scale=function(b){return this.queue(function(){var a=c(this),d=c.extend(!0,{},b.options),e=c.effects.setMode(a,
b.options.mode||"effect"),i=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",f=b.options.origin;"effect"!=e&&(d.origin=f||["middle","center"],d.restore=!0);f={height:a.height(),width:a.width()};a.from=b.options.from||("show"==e?{height:0,width:0}:f);a.to={height:f.height*("horizontal"!=g?i/100:1),width:f.width*("vertical"!=g?i/100:1)};if(b.options.fade&&("show"==e&&(a.from.opacity=0,a.to.opacity=1),"hide"==e))a.from.opacity=1,a.to.opacity=
0;d.from=a.from;d.to=a.to;d.mode=e;a.effect("size",d,b.duration,b.callback);a.dequeue()})};c.effects.size=function(b){return this.queue(function(){var a=c(this),d="position top bottom left right width height overflow opacity".split(" "),e="position top bottom left right overflow opacity".split(" "),i=["width","height","overflow"],g=["fontSize"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],j=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=c.effects.setMode(a,
b.options.mode||"effect"),q=b.options.restore||!1,n=b.options.scale||"both",k=b.options.origin,h={height:a.height(),width:a.width()};a.from=b.options.from||h;a.to=b.options.to||h;k&&(k=c.effects.getBaseline(k,h),a.from.top=(h.height-a.from.height)*k.y,a.from.left=(h.width-a.from.width)*k.x,a.to.top=(h.height-a.to.height)*k.y,a.to.left=(h.width-a.to.width)*k.x);var l=a.from.height/h.height,o=a.from.width/h.width,m=a.to.height/h.height,p=a.to.width/h.width;if("box"==n||"both"==n)if(l!=m&&(d=d.concat(f),
a.from=c.effects.setTransition(a,f,l,a.from),a.to=c.effects.setTransition(a,f,m,a.to)),o!=p)d=d.concat(j),a.from=c.effects.setTransition(a,j,o,a.from),a.to=c.effects.setTransition(a,j,p,a.to);if(("content"==n||"both"==n)&&l!=m)d=d.concat(g),a.from=c.effects.setTransition(a,g,l,a.from),a.to=c.effects.setTransition(a,g,m,a.to);c.effects.save(a,q?d:e);a.show();c.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);if("content"==n||"both"==n)f=f.concat(["marginTop","marginBottom"]).concat(g),
j=j.concat(["marginLeft","marginRight"]),i=d.concat(f).concat(j),a.find("*[width]").each(function(){var a=c(this);q&&c.effects.save(a,i);var d=a.height(),e=a.width();a.from={height:d*l,width:e*o};a.to={height:d*m,width:e*p};if(l!=m){a.from=c.effects.setTransition(a,f,l,a.from);a.to=c.effects.setTransition(a,f,m,a.to)}if(o!=p){a.from=c.effects.setTransition(a,j,o,a.from);a.to=c.effects.setTransition(a,j,p,a.to)}a.css(a.from);a.animate(a.to,b.duration,b.options.easing,function(){q&&c.effects.restore(a,
i)})});a.animate(a.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){a.to.opacity===0&&a.css("opacity",a.from.opacity);r=="hide"&&a.hide();c.effects.restore(a,q?d:e);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.shake.js' */
(function(d){d.effects.shake=function(a){return this.queue(function(){var b=d(this),j=["position","top","bottom","left","right"];d.effects.setMode(b,a.options.mode||"effect");var c=a.options.direction||"left",e=a.options.distance||20,l=a.options.times||3,f=a.duration||a.options.duration||140;d.effects.save(b,j);b.show();d.effects.createWrapper(b);var g="up"==c||"down"==c?"top":"left",h="up"==c||"left"==c?"pos":"neg",c={},i={},k={};c[g]=("pos"==h?"-=":"+=")+e;i[g]=("pos"==h?"+=":"-=")+2*e;k[g]=("pos"==
h?"-=":"+=")+2*e;b.animate(c,f,a.options.easing);for(e=1;e<l;e++)b.animate(i,f,a.options.easing).animate(k,f,a.options.easing);b.animate(i,f,a.options.easing).animate(c,f/2,a.options.easing,function(){d.effects.restore(b,j);d.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.slide.js' */
(function(c){c.effects.slide=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right"],f=c.effects.setMode(a,d.options.mode||"show"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a).css({overflow:"hidden"});var g="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",e=d.options.distance||("top"==g?a.outerHeight(!0):a.outerWidth(!0));"show"==f&&a.css(g,"pos"==b?isNaN(e)?"-"+e:-e:e);var i={};i[g]=("show"==f?"pos"==
b?"+=":"-=":"pos"==b?"-=":"+=")+e;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==f&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.transfer.js' */
(function(e){e.effects.transfer=function(a){return this.queue(function(){var b=e(this),c=e(a.options.to),d=c.offset(),c={top:d.top,left:d.left,height:c.innerHeight(),width:c.innerWidth()},d=b.offset(),f=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:d.top,left:d.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(c,a.duration,a.options.easing,function(){f.remove();a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'src/js-vendor/jquery/jquery.ui.menu.js' */
(function(d){d.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){d(b.target).closest(".ui-menu-item a").length&&(b.preventDefault(),a.select(b))});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(b){a.activate(b,d(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,e=this.element.attr("scrollTop"),d=this.element.height();0>c?this.element.attr("scrollTop",e+c):c>d&&this.element.attr("scrollTop",e+c-d+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(a,b,c){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(c,a):this.activate(c,this.element.children(b))):
this.activate(c,this.element.children(b))},nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(":first"));else{var b=this.active.offset().top,c=this.element.height(),e=this.element.children("li").filter(function(){var a=d(this).offset().top-b-c+d(this).height();return 10>a&&-10<a});e.length||(e=this.element.children(":last"));this.activate(a,e)}else this.activate(a,this.element.children(!this.active||this.last()?":first":":last"))},previousPage:function(a){if(this.hasScroll())if(!this.active||
this.first())this.activate(a,this.element.children(":last"));else{var b=this.active.offset().top,c=this.element.height();result=this.element.children("li").filter(function(){var a=d(this).offset().top-b+c-d(this).height();return 10>a&&-10<a});result.length||(result=this.element.children(":first"));this.activate(a,result)}else this.activate(a,this.element.children(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",
a,{item:this.active})}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:jQuery.cookie', location = '/bower/jquery.cookie/jquery.cookie.js' */
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD
		define(['jquery'], factory);
	} else if (typeof exports === 'object') {
		// CommonJS
		factory(require('jquery'));
	} else {
		// Browser globals
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function encode(s) {
		return config.raw ? s : encodeURIComponent(s);
	}

	function decode(s) {
		return config.raw ? s : decodeURIComponent(s);
	}

	function stringifyCookieValue(value) {
		return encode(config.json ? JSON.stringify(value) : String(value));
	}

	function parseCookieValue(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape...
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}

		try {
			// Replace server-side written pluses with spaces.
			// If we can't decode the cookie, ignore it, it's unusable.
			// If we can't parse the cookie, ignore it, it's unusable.
			s = decodeURIComponent(s.replace(pluses, ' '));
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	function read(s, converter) {
		var value = config.raw ? s : parseCookieValue(s);
		return $.isFunction(converter) ? converter(value) : value;
	}

	var config = $.cookie = function (key, value, options) {

		// Write

		if (value !== undefined && !$.isFunction(value)) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setTime(+t + days * 864e+5);
			}

			return (document.cookie = [
				encode(key), '=', stringifyCookieValue(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// Read

		var result = key ? undefined : {};

		// To prevent the for loop in the first place assign an empty array
		// in case there are no cookies at all. Also prevents odd result when
		// calling $.cookie().
		var cookies = document.cookie ? document.cookie.split('; ') : [];

		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = parts.join('=');

			if (key && key === name) {
				// If second argument (value) is a function it's a converter...
				result = read(cookie, value);
				break;
			}

			// Prevent storing a cookie that we couldn't decode.
			if (!key && (cookie = read(cookie)) !== undefined) {
				result[name] = cookie;
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) === undefined) {
			return false;
		}

		// Must not alter options, thus extending a fresh object...
		$.cookie(key, '', $.extend({}, options, { expires: -1 }));
		return !$.cookie(key);
	};

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:extraJQuery', location = '/scripts/jquery/tablesorter-2.0.3/jquery.tablesorter.min.js' */

(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'.',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}if(!p){p=detectParserForColumn(table,cells[i]);}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}list.push(p);}}if(table.config.debug){log(parsersDebug);}return list;};function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];}}return parsers[0];}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}return false;}function buildCache(table){if(table.config.debug){var cacheTime=new Date();}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}cols.push(i);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}return cache;};function getElementText(config,node){if(!node)return"";var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;}else{t=node.innerHTML;}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);}else{t=$(node).text();}}return t;}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}}if(table.config.appender){table.config.appender(table,rows);}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0;};$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);}table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}return $tableHeaders;};function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;}else{i=(v==(0||1))?v:0;}return i;}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}return false;}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}return cache;};function sortText(a,b){return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){var DECIMAL='\\'+config.decimal;var exp='/(^[+]?0('+DECIMAL+'0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)'+DECIMAL+'(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*'+DECIMAL+'0+$)/';return RegExp(exp).test($.trim(s));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}$("tr:visible",table.tBodies[0]).filter(':even').removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(':odd').removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/bower/backbone.wreqr/backbone.wreqr.js' */
// Backbone.Wreqr (Backbone.Marionette)
// ----------------------------------
// v1.3.2
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.wreqr


(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  "use strict";

  var previousWreqr = Backbone.Wreqr;

  var Wreqr = Backbone.Wreqr = {};

  Backbone.Wreqr.VERSION = '1.3.2';

  Backbone.Wreqr.noConflict = function () {
    Backbone.Wreqr = previousWreqr;
    return this;
  };

  // Handlers
  // --------
  // A registry of functions to call, given a name
  
  Wreqr.Handlers = (function(Backbone, _){
    "use strict";
    
    // Constructor
    // -----------
  
    var Handlers = function(options){
      this.options = options;
      this._wreqrHandlers = {};
      
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    Handlers.extend = Backbone.Model.extend;
  
    // Instance Members
    // ----------------
  
    _.extend(Handlers.prototype, Backbone.Events, {
  
      // Add multiple handlers using an object literal configuration
      setHandlers: function(handlers){
        _.each(handlers, function(handler, name){
          var context = null;
  
          if (_.isObject(handler) && !_.isFunction(handler)){
            context = handler.context;
            handler = handler.callback;
          }
  
          this.setHandler(name, handler, context);
        }, this);
      },
  
      // Add a handler for the given name, with an
      // optional context to run the handler within
      setHandler: function(name, handler, context){
        var config = {
          callback: handler,
          context: context
        };
  
        this._wreqrHandlers[name] = config;
  
        this.trigger("handler:add", name, handler, context);
      },
  
      // Determine whether or not a handler is registered
      hasHandler: function(name){
        return !! this._wreqrHandlers[name];
      },
  
      // Get the currently registered handler for
      // the specified name. Throws an exception if
      // no handler is found.
      getHandler: function(name){
        var config = this._wreqrHandlers[name];
  
        if (!config){
          return;
        }
  
        return function(){
          return config.callback.apply(config.context, arguments);
        };
      },
  
      // Remove a handler for the specified name
      removeHandler: function(name){
        delete this._wreqrHandlers[name];
      },
  
      // Remove all handlers from this registry
      removeAllHandlers: function(){
        this._wreqrHandlers = {};
      }
    });
  
    return Handlers;
  })(Backbone, _);
  
  // Wreqr.CommandStorage
  // --------------------
  //
  // Store and retrieve commands for execution.
  Wreqr.CommandStorage = (function(){
    "use strict";
  
    // Constructor function
    var CommandStorage = function(options){
      this.options = options;
      this._commands = {};
  
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    // Instance methods
    _.extend(CommandStorage.prototype, Backbone.Events, {
  
      // Get an object literal by command name, that contains
      // the `commandName` and the `instances` of all commands
      // represented as an array of arguments to process
      getCommands: function(commandName){
        var commands = this._commands[commandName];
  
        // we don't have it, so add it
        if (!commands){
  
          // build the configuration
          commands = {
            command: commandName, 
            instances: []
          };
  
          // store it
          this._commands[commandName] = commands;
        }
  
        return commands;
      },
  
      // Add a command by name, to the storage and store the
      // args for the command
      addCommand: function(commandName, args){
        var command = this.getCommands(commandName);
        command.instances.push(args);
      },
  
      // Clear all commands for the given `commandName`
      clearCommands: function(commandName){
        var command = this.getCommands(commandName);
        command.instances = [];
      }
    });
  
    return CommandStorage;
  })();
  
  // Wreqr.Commands
  // --------------
  //
  // A simple command pattern implementation. Register a command
  // handler and execute it.
  Wreqr.Commands = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      // default storage type
      storageType: Wreqr.CommandStorage,
  
      constructor: function(options){
        this.options = options || {};
  
        this._initializeStorage(this.options);
        this.on("handler:add", this._executeCommands, this);
  
        Wreqr.Handlers.prototype.constructor.apply(this, arguments);
      },
  
      // Execute a named command with the supplied args
      execute: function(name){
        name = arguments[0];
        var args = _.rest(arguments);
  
        if (this.hasHandler(name)){
          this.getHandler(name).apply(this, args);
        } else {
          this.storage.addCommand(name, args);
        }
  
      },
  
      // Internal method to handle bulk execution of stored commands
      _executeCommands: function(name, handler, context){
        var command = this.storage.getCommands(name);
  
        // loop through and execute all the stored command instances
        _.each(command.instances, function(args){
          handler.apply(context, args);
        });
  
        this.storage.clearCommands(name);
      },
  
      // Internal method to initialize storage either from the type's
      // `storageType` or the instance `options.storageType`.
      _initializeStorage: function(options){
        var storage;
  
        var StorageType = options.storageType || this.storageType;
        if (_.isFunction(StorageType)){
          storage = new StorageType();
        } else {
          storage = StorageType;
        }
  
        this.storage = storage;
      }
    });
  
  })(Wreqr, _);
  
  // Wreqr.RequestResponse
  // ---------------------
  //
  // A simple request/response implementation. Register a
  // request handler, and return a response from it
  Wreqr.RequestResponse = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      request: function(name){
        if (this.hasHandler(name)) {
          return this.getHandler(name).apply(this, _.rest(arguments));
        }
      }
    });
  
  })(Wreqr, _);
  
  // Event Aggregator
  // ----------------
  // A pub-sub object that can be used to decouple various parts
  // of an application through event-driven architecture.
  
  Wreqr.EventAggregator = (function(Backbone, _){
    "use strict";
    var EA = function(){};
  
    // Copy the `extend` function used by Backbone's classes
    EA.extend = Backbone.Model.extend;
  
    // Copy the basic Backbone.Events on to the event aggregator
    _.extend(EA.prototype, Backbone.Events);
  
    return EA;
  })(Backbone, _);
  
  // Wreqr.Channel
  // --------------
  //
  // An object that wraps the three messaging systems:
  // EventAggregator, RequestResponse, Commands
  Wreqr.Channel = (function(Wreqr){
    "use strict";
  
    var Channel = function(channelName) {
      this.vent        = new Backbone.Wreqr.EventAggregator();
      this.reqres      = new Backbone.Wreqr.RequestResponse();
      this.commands    = new Backbone.Wreqr.Commands();
      this.channelName = channelName;
    };
  
    _.extend(Channel.prototype, {
  
      // Remove all handlers from the messaging systems of this channel
      reset: function() {
        this.vent.off();
        this.vent.stopListening();
        this.reqres.removeAllHandlers();
        this.commands.removeAllHandlers();
        return this;
      },
  
      // Connect a hash of events; one for each messaging system
      connectEvents: function(hash, context) {
        this._connect('vent', hash, context);
        return this;
      },
  
      connectCommands: function(hash, context) {
        this._connect('commands', hash, context);
        return this;
      },
  
      connectRequests: function(hash, context) {
        this._connect('reqres', hash, context);
        return this;
      },
  
      // Attach the handlers to a given message system `type`
      _connect: function(type, hash, context) {
        if (!hash) {
          return;
        }
  
        context = context || this;
        var method = (type === 'vent') ? 'on' : 'setHandler';
  
        _.each(hash, function(fn, eventName) {
          this[type][method](eventName, _.bind(fn, context));
        }, this);
      }
    });
  
  
    return Channel;
  })(Wreqr);
  
  // Wreqr.Radio
  // --------------
  //
  // An object that lets you communicate with many channels.
  Wreqr.radio = (function(Wreqr, _){
    "use strict";
  
    var Radio = function() {
      this._channels = {};
      this.vent = {};
      this.commands = {};
      this.reqres = {};
      this._proxyMethods();
    };
  
    _.extend(Radio.prototype, {
  
      channel: function(channelName) {
        if (!channelName) {
          throw new Error('Channel must receive a name');
        }
  
        return this._getChannel( channelName );
      },
  
      _getChannel: function(channelName) {
        var channel = this._channels[channelName];
  
        if(!channel) {
          channel = new Wreqr.Channel(channelName);
          this._channels[channelName] = channel;
        }
  
        return channel;
      },
  
      _proxyMethods: function() {
        _.each(['vent', 'commands', 'reqres'], function(system) {
          _.each( messageSystems[system], function(method) {
            this[system][method] = proxyMethod(this, system, method);
          }, this);
        }, this);
      }
    });
  
  
    var messageSystems = {
      vent: [
        'on',
        'off',
        'trigger',
        'once',
        'stopListening',
        'listenTo',
        'listenToOnce'
      ],
  
      commands: [
        'execute',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ],
  
      reqres: [
        'request',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ]
    };
  
    var proxyMethod = function(radio, system, method) {
      return function(channelName) {
        var messageSystem = radio._getChannel(channelName)[system];
  
        return messageSystem[method].apply(messageSystem, _.rest(arguments));
      };
    };
  
    return new Radio();
  
  })(Wreqr, _);
  

  return Backbone.Wreqr;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/bower/backbone-brace/backbone.brace.js' */
(function (root, factory) {
    // Global to export
    var rootExport = 'Brace';
    // Store a reference to any other copies of Brace include (if any)
    var previousBrace = root[rootExport];

    // noConflict will return this version of Brace and reset the global
    // Brace variable to the previously loaded version of Brace (or undefined
    // if there was no previous version loaded).
    /**
     * Returns the current copy of Brace and sets the global Brace object to the
     * previous version (or undefined if there was no previous version loaded).
     *
     * @returns Object A reference to this version of Brace.
     */
    var noConflict = function () {
        root[rootExport] = previousBrace;
        return this;
    };

    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['underscore', 'backbone'], factory);
    } else if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory(require('underscore'), require('backbone'));
    } else {
        // Browser globals
        var _brace = factory(root._, root.Backbone);
        _brace.noConflict = noConflict;
        root[rootExport] = _brace;
    }
}(this, function (_, Backbone) {

    var Brace = {};

    // ## Helper functions

    // Given an array, this function will return an object where each
    //     property name is an element of the original array. The value
    //     of each property will be null.
    // Given anything else, this function will return the object untouched.
    /**
     * This function is used to ensure a consistent shape for the namedAttributes property.
     * namedAttributes accepts two formats:
     * - An array like ['attr1', 'attr2'] if you don't care about the type of any attribute.
     * - An object like { attr1 : type1, attr2 : type2 } to specify an expected type.
     *
     * @param maybeArray {*} thing to transform into an object
     */
    function asObject(maybeArray) {
        if (_.isArray(maybeArray)) {
            return _.reduce(maybeArray, function(obj, prop) {
                obj[prop] =  null;
                return obj;
            }, {});
        }
        return maybeArray;
    }

    // Return a value of the specified type, generated from the value parameter.
    // If type conversion is necessary, this function will generate a new object using
    // `new type(value)`
    //
    // `value` Any value. null and undefined values will be untouched.
    //
    // `type` When given:
    //
    // * a falsy value: this function will do no type conversion.
    // * a string: this function will throw if `typeof value !== type`, and return value otherwise.
    // * an Array: this function will be recursively called for each element in value using
    //   type's first element as the type. E.g.,
    //         `ensureType([ Number ], [ 1 ])` will recursively call `ensureType(Number, 1)`
    //   It will return a new array consisting of the result of each recursive call.
    // * a Backbone.Collection constructor: this function may be recursively called for each element in
    //     value using type.model as the type. E.g.,
    //         `ensureType({ model : Number, __proto__ : Backbone.Collection.prototype }, [ 1 ])` will
    //         recursively call `ensureType(Number, 1)`
    //     It will return a Backbone.Collection via new type({array of recursive results})
    // * a function: This will check value instanceof type, and if false, will return `new type(value)`
    //     Otherwise it will return value directly
    /**
     * @param value {*}
     * @param type {Array|function(new:*, *)|string|false|null|undefined}
     */
    function ensureType(type, value) {
        /*jshint newcap: false */
        if (!type || value == null) {
            return value;
        }

        if (type === String && _.isString(value)) {
            return value;
        }
        if (type === Number && _.isNumber(value)) {
            return value;
        }
        if (type === Boolean && _.isBoolean(value)) {
            return value;
        }

        if (typeof type === 'string' || type instanceof String) {
            if (typeof value !== ""+type) {
                throw "The typeof " + value + " is " + typeof value + " but expected it to be " + type;
            }
            return value;
        }

        if (_.isArray(type) || type === Array) {
            if (!isArrayLike(value)) {
                throw "Array type expected, but nonnull, non-Array value provided.";
            }
            return type === Array || !type[0] ?
                value :
                _.map(value, _.bind(ensureType, null, type[0]));
        }

        if (typeof type !== 'function') {
            throw "Invalid expected type " + type +
            '. Should be falsy, String, Array, Backbone.Collection constructor, or function.';
        }

        if (value instanceof type) {
            return value;
        }

        if (isCollectionConstructor(type)) {
            return new type(ensureType([ type.model ], value));
        }

        return new type(value);
    }

    // Returns true if obj is extend()'ed from Backbone.Collection (or from another collection)
    /**
     * @param obj {*} object to check
     * @param rootConstructor {?function(new:Backbone.Collection)} optional constructor that inherits from
     *        Backbone.Collection. Will check that obj is extend()'ed from this instead of Backbone.Collection.
     */
    function isCollectionConstructor(obj, rootConstructor) {
        return  obj && (
            // obj *distantly* extends Backbone.Collection (most likely case)
            obj.__super__ instanceof (rootConstructor || Backbone.Collection) ||

            // obj *directly* extends Backbone.Collection (e.g., Brace.Collection)
            // !(fn.prototype instanceof fn), so the above check doesn't catch this case.
            obj.__super__ === (rootConstructor || Backbone.Collection).prototype ||

            // obj *is* Backbone.Collection
            obj === (rootConstructor || Backbone.Collection)
        );
    }

    // array-like is currently defined by "has a length property, and is not a string or
    // function or Backbone.Collection."
    // Backbone.Collections are excluded because you can't do collection[0] to access models.
    function isArrayLike(value) {
        return _.has(value,'length') && !(
            value instanceof String ||
            _.has({'string':1, 'function':1}, typeof value) ||
            value instanceof Backbone.Collection
        );
    }

    // With namedAttributes, we want to allow both the mixin, and the extender to define types.
    // We want to take the stricter of the two types where possible.
    // Where the types conflict, throw an error.
    function nonConflictedTypes(obj, refObj) {
        var newObj = {};
        _.each(obj, function(val, key) {
            if (!refObj[key] || assumes(val, refObj[key])) {
                newObj[key] = val;
            } else if (!val || assumes(refObj[key], val)) {
                return;
            } else {
                throw key + " has conflicted type descriptors.";
            }
        });
        return newObj;
    }

    // One type *assumes* another when the conditions for meeting its
    // type-check are a super set of the assumed type's conditions.
    // E.g., `[ 'string' ]` assumes `Array` because you can't have an array of strings without an array.
    function assumes(assumer, assumed) {
        if (!assumed || assumed === assumer) {
            return true;
        }
        // if it's a string, only the previous strict equality check would have sufficed.
        if (!assumer || typeof assumer === 'string') {
            return false;
        }
        if (assumer instanceof Array) {
            return assumed === Array ||
                (assumed instanceof Array && assumes(assumer[0], assumed[0]));
        }
        if (typeof assumed !== 'function') {
            return false;
        }
        if (isCollectionConstructor(assumed)) {
            return isCollectionConstructor(assumer, assumed);
        }
        return assumer.prototype instanceof assumed;
    }

    /**
     * @param {Object?} object
     * @return {Object} plain object
     */
    function nestedToJSON(object) {
        if (_.isObject(object)) {
            return _.reduce(object, function(memo, value, key) {
                if (value && _.isFunction(value.toJSON)) {
                    memo[key] = value.toJSON();
                } else if (_.isArray(value)) {
                    memo[key] = _.map(value, function(el) {
                        if (el && _.isFunction(el.toJSON)) {
                            return el.toJSON();
                        } else {
                            return el;
                        }
                    });
                }
                return memo;
            }, object);
        } else {
            return object;
        }
    }

    function createToJSON(previousToJSON) {
        return function toJSON() {
            var json = previousToJSON.call(this);
            return nestedToJSON(json);
        };
    }

    // ## Brace.Mixins ##
    // Mixin utilities
    Brace.Mixins = {
        // Creates a camelCased method name
        createMethodName: function(prefix, suffix) {
            return prefix + suffix.charAt(0).toUpperCase() + suffix.substr(1);
        },

        // Applies a mixin to the given constructor's prototype.
        applyMixin: function(ctor, mixin) {
            _.forEach(_.keys(mixin), function(key) {
                var proto = ctor.prototype;

                // `initialize` is not mixed in - we compose the mixin's initialize with the existing initialize method (if it exists).
                if ("initialize" === key) {
                    var oldInitialize = proto.initialize;
                    proto.initialize = function() {
                        if (oldInitialize) {
                            oldInitialize.apply(this, arguments);
                        }
                        mixin.initialize.apply(this, arguments);
                    };
                    return;
                }
                // `validate` is not mixed in - we compose the mixin's validate with the existing validate method (if it exists).
                if ("validate" === key) {
                    var oldValidate = proto.validate;
                    proto.validate = function() {
                        if (oldValidate) {
                            var errors = oldValidate.apply(this, arguments);
                            if (errors) {
                                return errors;
                            }
                        }
                        return mixin.validate.apply(this, arguments);
                    };
                    return;
                }
                // `defaults` are not mixed in - we compose the mixin's defaults with existing defaults if they exist
                if ("defaults" === key) {
                    var defaults = proto.defaults || (proto.defaults = {});
                    var mixinDefaults = mixin[key];
                    for (var id in mixinDefaults) {
                        if (defaults.hasOwnProperty(id)) {
                            throw "Mixin error: class already has default '" + id + "' defined";
                        }
                        defaults[id] = mixinDefaults[id];
                    }
                    return;
                }
                // `namedAttributes` are added to the mixin, and we mixin in getters and setters for each attribute.
                if ("namedAttributes" === key) {
                    var protoAttrs = asObject(proto.namedAttributes) || {};
                    var mixinAttrs = asObject(mixin[key]);
                    proto.namedAttributes = _.extend(protoAttrs, nonConflictedTypes(mixinAttrs, protoAttrs));
                    return;
                }

                // `namedEvents` are added to the mixin, and we mix in on and trigger methods for each event.
                if ("namedEvents" === key) {
                    // `events` must be an array
                    if (!_.isArray(mixin[key])) {
                        throw "Expects events member on mixin to be an array";
                    }
                    if (!proto.namedEvents) {
                        proto.namedEvents = [];
                    }
                    proto.namedEvents = _.uniq(proto.namedEvents.concat(mixin[key]));
                    return;
                }
                // Name collisions with other mixins or or the object we're mixing into result in violent and forceful disapproval.
                if (proto.hasOwnProperty(key)) {
                    throw "Mixin error: class already has property '" + key + "' defined";
                }
                proto[key] = mixin[key];
            }, this);
        }
    };

    // ## Brace.AttributesMixinCreator ##
    Brace.AttributesMixinCreator = {

        // Creates a mixin of getter and setter methods for each item in the given attribute list.
        // A getter and setter for `id` is always generated.
        create: function(attributes, idAttribute) {
            var methods = {};

            if (!attributes) {
                attributes = {};
            }

            if (!_.has(attributes, "id")) {
                attributes.id = null;
            }

            _.each(attributes, function (expectedType, attrName) {
                // TODO: has, escape, unset
                var setter = Brace.Mixins.createMethodName("set", attrName);
                methods[setter] = function (val,options) {
                    return this.set(attrName, val, options);
                };
                var getter = Brace.Mixins.createMethodName("get", attrName);
                methods[getter] = function () {
                    return this.get(attrName);
                };
            });

            // If an idAttribute is specified
            //
            //    * the ID is going to be of the same type as that attribute
            //    * alias the ID's getter/setter to that attribute's getter/setter
            //    * Don't alias if the idAttribute is set to 'id'
            if (typeof idAttribute === 'string' && typeof attributes[idAttribute] !== 'undefined' && idAttribute !== 'id') {
                attributes.id = attributes[idAttribute];
                var idGetter = Brace.Mixins.createMethodName("get", idAttribute);
                var idSetter = Brace.Mixins.createMethodName("set", idAttribute);
                methods.getId = function() { return this[idGetter](); };
                methods.setId = function(val, options) { return this[idSetter](val, options); };
            }

            return methods;
        },
        /**
         * See JSDoc for this function in the backbone.brace file.
         *
         * Expose the ensureType function for people with custom constructors that don't call
         * .set() to initialize attributes. Hopefully this is rarely used, as I would
         * consider not calling .set() to be a code smell.
         *
         * @param type
         * @param value
         */
        ensureType : ensureType
    };

    // ## Brace.EventsMixinCreator ##
    Brace.EventsMixinCreator = {

        // Creates a mixin of on and trigger methods for each item in the given list of events.
        create: function(events) {
            var eventMethods = {};
            var createEvent = function(eventName) {
                // TODO: off
                var binder = Brace.Mixins.createMethodName("on", eventName);
                eventMethods[binder] = function() {
                    return this.on.apply(this, [eventName].concat(_.toArray(arguments)));
                };
                var trigger = Brace.Mixins.createMethodName("trigger", eventName);
                eventMethods[trigger] = function() {
                    return this.trigger.apply(this, [eventName].concat(_.toArray(arguments)));
                };
            };
            _.each(events, _.bind(createEvent,this));

            return eventMethods;
        }
    };

     // Generates an `extend` method that overrides Backbone's default `extend`. The new extend calls Backbone's `extend`, then:
     //
     //   * Adds all mixins specified in the `mixins` array
     //   * Adds a `Brace.EventsMixinCreator` to mix in on and trigger methods for events specified in the `namedEvents` array
     //   * Adds a `Brace.AttributesMixinCreator` to mix in get and set methods for attributes specified in the `attributes` array
    function generateMixinExtend(oldExtend) {
        return function newExtend(protoProps, classProps) {
            var child;
            var cleanProtoProps = _.extend({}, protoProps);
            // Remove `mixins` - we don't want to see them on the created prototype. Note that we do want to see `namedAttributes` and `namedEvents` for debugging
            var mixins;
            if (protoProps && protoProps.mixins) {
                mixins = protoProps.mixins;
                delete cleanProtoProps.mixins;
            }
            child = oldExtend.call(this, cleanProtoProps, classProps);

            if (this.prototype.namedEvents) {
                Brace.Mixins.applyMixin(child, { namedEvents : this.prototype.namedEvents });
            }
            if (this.prototype.namedAttributes) {
                Brace.Mixins.applyMixin(child, { namedAttributes : this.prototype.namedAttributes });
            }

            if (mixins) {
                _.each(protoProps.mixins, function(mixin) {
                    Brace.Mixins.applyMixin(child, mixin);
                });
            }
            if (child.prototype.namedEvents) {
                Brace.Mixins.applyMixin(child, Brace.EventsMixinCreator.create(child.prototype.namedEvents));
            }
            if (child.prototype.namedAttributes) {
                child.prototype.namedAttributes = asObject(child.prototype.namedAttributes);
                Brace.Mixins.applyMixin(child, Brace.AttributesMixinCreator.create(child.prototype.namedAttributes, child.prototype.idAttribute));
            }

            if (child.prototype.toJSON) {
                child.prototype.toJSON = createToJSON(child.prototype.toJSON);
            }

            child.extend = newExtend;
            return child;
        };
    }

    // Overrides Backbone's `get` and `set` methods to validate that the attribute being get / set is a namedAttribute.
    function overrideSetGet(ctor, childCtor) {
        var proto = ctor.prototype;
        var childProto = childCtor.prototype;

        var oldSet = proto.set;
        childProto.set = function(key, value, options) {
            // TODO: has, escape, unset
            var attrs,
                attributes = this.namedAttributes;

            if (!attributes || key == null) {
                return oldSet.apply(this, arguments);
            }

            if (_.isObject(key)) {
                attrs = _.clone(key);
                options = value;
            } else {
                attrs = {};
                attrs[key] = value;
            }

            for (var attr in attrs) {
                if (!_.has(attrs, attr)) {
                    continue;
                }
                if (!_.has(attributes, attr)) {
                    throw "Attribute '" + attr + "' does not exist";
                }
                attrs[attr] = ensureType(attributes[attr], attrs[attr]);
            }

            return oldSet.call(this, attrs, options);
        };

        var oldGet = proto.get;
        childProto.get = function(attr) {
            if (this.namedAttributes && !_.has(this.namedAttributes, attr)) {
                throw "Attribute '" + attr + "' does not exist";
            }
            return oldGet.apply(this, arguments);
        };
    }

    // Overrides Backbone's `parse` method to parse only namedAttributes
    function overrideParse(ctor, childCtor) {
        var proto = ctor.prototype;
        var childProto = childCtor.prototype;

        var oldParse = proto.parse;
        childProto.parse = function(response, options) {
            return _.pick(oldParse(response, options), _.keys(this.namedAttributes));
        };
    }

    // Applies extensions to the given constructor function. Sets `extend` to a method generated by `generateMixinExtend`
    function applyExtensions(ctor) {
        var child = ctor.extend();
        var oldExtend = ctor.extend;
        child.extend = generateMixinExtend(oldExtend);
        return child;
    }


    // Applies extensions to the given constructor function. Sets `extend` to a method generated by `generateMixinExtend`
    function applyModelExtensions(ctor) {
        var child = applyExtensions(ctor);
        overrideSetGet(ctor, child);
        overrideParse(ctor, child);
        return child;
    }

    // Extend base Backbone classes
    Brace.Model = applyModelExtensions(Backbone.Model);
    Brace.Collection = applyExtensions(Backbone.Collection);
    Brace.View = applyExtensions(Backbone.View);
    Brace.Router = applyExtensions(Backbone.Router);
    var Evented = function() {
        this.initialize.apply(this, arguments);
    };
    _.extend(Evented.prototype, Backbone.Events, {
        initialize: function() {}
    });
    Evented.extend = Backbone.Model.extend;
    Brace.Evented = applyExtensions(Evented);

    return Brace;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/bower/backbone-computedfields/backbone.computedfields.js' */
// Backbone.ComputedFields, v0.0.9
// Copyright (c)2014 alexander.beletsky@gmail.com
// Distributed under MIT license
// https://github.com/alexanderbeletsky/backbone-computedfields

Backbone.ComputedFields = (function(Backbone, _){

    var ComputedFields = function (model) {
        this.model = model;
        this._computedFields = [];

        this.initialize();
    };

    _.extend(ComputedFields.prototype, {
        initialize: function () {
            _.bindAll(
                this,
                '_bindModelEvents',
                '_computeFieldValue',
                '_dependentFields',
                '_isModelInitialized',
                '_lookUpComputedFields',
                '_thenComputedChanges',
                '_thenDependentChanges',
                '_toJSON',
                '_wrapJSON',
                'initialize'
            );

            this._lookUpComputedFields();
            this._bindModelEvents();
            this._wrapJSON();
        },

        _lookUpComputedFields: function () {
            for (var obj in this.model.computed) {
                var field = this.model.computed[obj];

                if (field && (field.set || field.get)) {
                    this._computedFields.push({name: obj, field: field});
                }
            }
        },

        _bindModelEvents: function () {
            _.each(this._computedFields, function (computedField) {
                var fieldName = computedField.name;
                var field = computedField.field;

                var updateComputed = _.bind(function () {
                    var value = this._computeFieldValue(field);
                    this.model.set(fieldName, value, { skipChangeEvent: true });
                }, this);

                var updateDependent = _.bind(function (model, value, options) {
                    if (options && options.skipChangeEvent) {
                        return;
                    }

                    if (field.set) {
                        var fields = this._dependentFields(field.depends);
                        value = value || this.model.get(fieldName);

                        field.set.call(this.model, value, fields);
                        this.model.set(fields, options);
                    }
                }, this);

                this._thenDependentChanges(field.depends, updateComputed);
                this._thenComputedChanges(fieldName, updateDependent);

                if (this._isModelInitialized()) {
                    updateComputed();
                }
            }, this);
        },

        _isModelInitialized: function () {
            return !_.isEmpty(this.model.attributes);
        },

        _thenDependentChanges: function (depends, callback) {
            _.each(depends, function (name) {
                if (typeof (name) === 'string') {
                    this.model.on('change:' + name, callback);
                }

                if (typeof (name) === 'function') {
                    name.call(this.model, callback);
                }
            }, this);
        },

        _thenComputedChanges: function (fieldName, callback) {
            this.model.on('change:' + fieldName, callback);
        },

        _wrapJSON: function () {
            this.model.toJSON = _.wrap(this.model.toJSON, this._toJSON);
        },

        _toJSON: function (toJSON) {
            var args = Array.prototype.slice.call(arguments, 1),
                attributes = toJSON.apply(this.model, args),
                strip = !!(args[0] || {}).computedFields;

            var stripped = strip ? {} : _.reduce(this._computedFields, function (memo, computed) {
                if (computed.field.toJSON === false) {
                    memo.push(computed.name);
                }
                return memo;
            },[]);

            return _.omit(attributes, stripped);
        },

        _computeFieldValue: function (computedField) {
            if (computedField && computedField.get) {
                var fields = this._dependentFields(computedField.depends);
                return computedField.get.call(this.model, fields);
            }
        },

        _dependentFields: function (depends) {
            return _.reduce(depends, function (memo, field) {
                memo[field] = this.model.get(field);
                return memo;
            }, {}, this);
        }

    });

    return ComputedFields;

})(Backbone, _);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/util/shims/backbone.js' */
define('backbone', function() {
    return window.Backbone;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-backbone', location = '/util/shims/brace.js' */
define('brace', function() {
    return window.Brace;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-namespace', location = '/util/namespace.js' */
/**
 * Get/set the value at a compound namespace,
 * gracefully adding values where missing.
 *
 * @param {string} namespace
 * @param {Object} [context=window]
 * @param {Object} [value={}]
 * @deprecated
 */
AJS.namespace = function (namespace, context, value) {
    var names = namespace.split(".");
    context = context || window;
    for (var i = 0, n = names.length - 1; i < n; i++) {
        var x = context[names[i]];
        context = (x != null) ? x : context[names[i]] = {};
    }
    context[names[i]] = value || context[names[i]] || {};
    return context[names[i]];
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:skate-0.12.6', location = 'libs/skate/0.12.6/skate-0.12.6.js' */
'use strict';(function e(a,h,g){function b(c,k){if(!h[c]){if(!a[c]){var l="function"==typeof require&&require;if(!k&&l)return l(c,!0);if(f)return f(c,!0);k=Error("Cannot find module '"+c+"'");throw k.code="MODULE_NOT_FOUND",k;}k=h[c]={exports:{}};a[c][0].call(k.exports,function(f){var k=a[c][1][f];return b(k?k:f)},k,k.exports,e,a,h,g)}return h[c].exports}for(var f="function"==typeof require&&require,l=0;l<g.length;l++)b(g[l]);return b})({1:[function(a,h,g){Object.defineProperty(g,"__esModule",{value:!0});
"use strict";g.ATTR_IGNORE="data-skate-ignore";g.types={ANY:"act",ATTR:"a",CLASS:"c",NOATTR:"ct",NOCLASS:"at",NOTAG:"ac",TAG:"t"}},{}],2:[function(a,h,g){h.exports={get:function(a,b){if(a.__SKATE_DATA)return a.__SKATE_DATA[b]},set:function(a,b,f){a.__SKATE_DATA||(a.__SKATE_DATA={});a.__SKATE_DATA[b]=f;return a}}},{}],3:[function(a,h,g){function r(a){for(var f=a.length,b=0;b<f;b++){var d=a[b],k=d.addedNodes;d=d.removedNodes;k&&k.length&&!v(k[0].parentNode)&&l(k);d&&d.length&&c(d)}}g=function(a){return a&&
a.__esModule?a["default"]:a};var b=g(a("./globals")),f=a("./lifecycle"),l=f.initElements,c=f.removeElements,k=g(a("./mutation-observer")),v=a("./utils").getClosestIgnoredElement;h.exports={register:function(a){a&&(k.fixIe(),this.unregister());b.observer||(a=new k(r),a.observe(document,{childList:!0,subtree:!0}),b.observer=a);return this},unregister:function(){b.observer&&(b.observer.disconnect(),b.observer=void 0);return this}}},{"./globals":4,"./lifecycle":5,"./mutation-observer":6,"./utils":9}],
4:[function(a,h,g){window.__skate||(window.__skate={observer:void 0,registry:{}});h.exports=window.__skate},{}],5:[function(a,h,g){function r(a,d,c){if(q.get(a,d.id+":lifecycle:"+c))return!0;q.set(a,d.id+":lifecycle:"+c,!0);return!1}function b(a,d){function m(c,m,f,k){if(d.attributes&&d.attributes[m]&&"function"===typeof d.attributes[m][c])var b=d.attributes[m][c];else d.attributes&&"function"===typeof d.attributes[m]?b=d.attributes[m]:"function"===typeof d.attributes&&(b=d.attributes);b&&b(a,{type:c,
name:m,newValue:f,oldValue:k})}var c,f=a.attributes,k=[],b=f.length;(new u(function(a){a.forEach(function(a){var d,c=a.attributeName,b=f[c];b&&null===a.oldValue?d="created":b&&null!==a.oldValue?d="updated":b||(d="removed");m(d,c,b?b.value||b.nodeValue:void 0,a.oldValue)})})).observe(a,{attributes:!0,attributeOldValue:!0});for(c=0;c<b;c++)k.push(f[c]);for(c=0;c<b;c++){var t=k[c];m("created",t.nodeName,t.value||t.nodeValue)}}function f(a,d){function c(d,c){return function(m){if(!c)return d(a,m,a);for(var b=
m.target;b&&b!==document&&b!==a.parentNode;){if(x.call(b,c))return d(a,m,b);b=b.parentNode}}}"object"===typeof d.events&&p(d.events,function(d,m){var b=m.split(" ");m=b.shift();b=b.join(" ");var f=!!b&&("blur"===m||"focus"===m);a.addEventListener(m,c(d,b),f)})}function l(a,c){r(a,c,"created")||(d(a,c.prototype,!0),c.template&&c.template(a),f(a,c),b(a,c),c.created&&c.created(a))}function c(a){for(var d=a.length,b=0;b<d;b++){var m=a[b];if(1===m.nodeType&&!m.attributes[v]){for(var f=n.getForElement(m),
k=f.length,g=0;g<k;g++){var h=m,p=f[g];l(h,p);r(h,p,"attached")||(h.removeAttribute(p.unresolvedAttribute),h.setAttribute(p.resolvedAttribute,""),p.attached&&p.attached(h))}m=m.childNodes;m.length&&c(m)}}}function k(a){for(var c=a.length,d=0;d<c;d++){var b=a[d];if(1===b.nodeType){k(b.childNodes);for(var m=n.getForElement(b),f=m.length,g=0;g<f;g++){var l=b,p=m[g];p.detached&&p.detached(l);q.set(l,p.id+":lifecycle:attached",!1)}}}}h=function(a){return a&&a.__esModule?a["default"]:a};Object.defineProperty(g,
"__esModule",{value:!0});"use strict";var v=a("./constants").ATTR_IGNORE,q=h(a("./data")),u=h(a("./mutation-observer")),n=h(a("./registry"));a=a("./utils");var d=a.inherit,p=a.objEach;a=window.HTMLElement.prototype;var x=a.matches||a.msMatchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector;g.triggerCreated=l;g.initElements=c;g.removeElements=k},{"./constants":1,"./data":2,"./mutation-observer":6,"./registry":7,"./utils":9}],6:[function(a,h,g){function r(a,c){return{addedNodes:null,
attributeName:null,attributeNamespace:null,nextSibling:null,oldValue:null,previousSibling:null,removedNodes:null,target:a,type:c||"childList"}}function b(a,c){if(a=a.childNodes)for(var d=a.length,m=0;m<d;m++){var f=a[m];c(f);b(f,c)}}function f(a){if(q&&!u)return new q(a);this.callback=a;this.elements=[]}a=a("./utils");var l=a.debounce,c=a.objEach,k=window.HTMLElement.prototype,v=window.HTMLElement.prototype.contains,q=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver,
u=!1,n=-1<window.navigator.userAgent.indexOf("Trident");f.fixIe=function(){if(n&&!u){var a=Object.getOwnPropertyDescriptor(k,"innerHTML");Object.defineProperty(k,"innerHTML",{get:function(){return a.get.call(this)},set:function(c){b(this,function(a){var c=document.createEvent("MutationEvent");c.initMutationEvent("DOMNodeRemoved",!0,!1,null,null,null,null,null);a.dispatchEvent(c)});a.set.call(this,c)}});u=!0}};Object.defineProperty(f,"isFixingIe",{get:function(){return u}});f.prototype={observe:function(a,
c){function b(a){g.push(a);n()}var d=this,f,k,g=[],h=[],n=l(function(){for(var b=g.length,m=0;m<b;m++){var l=g[m],q=l.target;if(q){l=l.type;var n=q.parentNode;if(c.childList&&(c.subtree||n===a)){var p=u&&"DOMNodeRemoved"===l,t;if(t=f){t=f;var y=q;t=1!==t.nodeType?!1:t.contains?t.contains(y):v.call(t,y)}if(p||!t)k&&k.target===n||h.push(k=r(n)),"DOMNodeInserted"===l?(k.addedNodes||(k.addedNodes=[]),k.addedNodes.push(q)):(k.removedNodes||(k.removedNodes=[]),k.removedNodes.push(q)),f=q}}}d.callback(h);
g=[];h=[];k=f=void 0}),p={},q=[],z=l(function(){var a=q.length;d.callback(q);q.splice(0,a)}),w={target:a,options:c,insertHandler:b,removeHandler:b,attributeHandler:function(b){var d=b.target;if(c.attributes&&(c.subtree||d===a)){var f=b.attrName,m=b.prevValue;b=b.newValue;d=r(d,"attributes");d.attributeName=f;c.attributeOldValue&&(d.oldValue=p[f]||m||null);q.push(d);c.attributeOldValue&&(p[f]=b);z()}}};this.elements.push(w);c.childList&&(a.addEventListener("DOMNodeInserted",w.insertHandler),a.addEventListener("DOMNodeRemoved",
w.removeHandler));c.attributes&&a.addEventListener("DOMAttrModified",w.attributeHandler);return this},disconnect:function(){c(this.elements,function(a){a.target.removeEventListener("DOMNodeInserted",a.insertHandler);a.target.removeEventListener("DOMNodeRemoved",a.removeHandler);a.target.removeEventListener("DOMAttrModified",a.attributeHandler)});this.elements=[];return this}};h.exports=f},{"./utils":9}],7:[function(a,h,g){function r(a,f){return l(b.registry,a)&&-1<b.registry[a].type.indexOf(f)}var b=
function(a){return a&&a.__esModule?a["default"]:a}(a("./globals")),f=a("./constants.js").types,l=a("./utils").hasOwn;h.exports={clear:function(){b.registry={};return this},getForElement:function(a){var c=a.attributes,g=c.length,l=[],h=c.is,n=h&&(h.value||h.nodeValue);h=a.tagName.toLowerCase();var d=n||h;if(r(d,f.TAG)){d=b.registry[d];var p=d["extends"];n?h===p&&l.push(d):p||l.push(d)}for(n=0;n<g;n++)d=c[n].nodeName,r(d,f.ATTR)&&(d=b.registry[d],(p=d["extends"])&&h!==p||l.push(d));(c=a.classList)?
a=c:(a=a.attributes,a=a["class"]&&a["class"].nodeValue.split(/\s+/)||[]);c=a.length;for(g=0;g<c;g++)d=a[g],r(d,f.CLASS)&&(d=b.registry[d],(p=d["extends"])&&h!==p||l.push(d));return l},has:function(a){return l(b.registry,a)},set:function(a,f){if(this.has(a))throw Error('A definition of type "'+f.type+'" with the ID of "'+a+'" already exists.');b.registry[a]=f;return this},remove:function(a){this.has(a)&&delete b.registry[a];return this}}},{"./constants.js":1,"./globals":4,"./utils":9}],8:[function(a,
h,g){function r(a){function b(){var f=a["extends"];var d=a.id;f?(f=document.createElement(f),f.setAttribute("is",d)):f=document.createElement(d);a.prototype=b.prototype;c(f,a);return f}b.prototype=a.prototype;return b}function b(a,c){c=u(c||{},b.defaults);c.id=a;if(v.has(c.id))throw Error('A definition of type "'+c.type+'" with the ID of "'+a+'" already exists.');v.set(c.id,c);p();f.register(c.remove);if(-1<c.type.indexOf(n.TAG))return r(c)}g=function(a){return a&&a.__esModule?a["default"]:a};var f=
g(a("./document-observer")),l=a("./lifecycle"),c=l.triggerCreated,k=l.initElements,v=g(a("./registry")),q=a("./utils");l=q.debounce;var u=q.inherit;g=g(a("./version"));var n=a("./constants").types,d=!!document.attachEvent,p=l(function(){var a=function(){k(document.getElementsByTagName("html"))};var c=d?"complete"===document.readyState:"interactive"===document.readyState||"complete"===document.readyState;c?a():d?window.addEventListener("load",a):document.addEventListener("DOMContentLoaded",a)});b.init=
function(a){if(a)return"string"===typeof a&&(a=document.querySelectorAll(a)),k("undefined"===typeof a.length?[a]:a),a};b.types=n;b.version=g;b.defaults={attributes:void 0,events:void 0,"extends":"",id:"",prototype:{},resolvedAttribute:"resolved",template:void 0,type:n.ANY,unresolvedAttribute:"unresolved"};var x=window.skate;b.noConflict=function(){window.skate=x;return this};window.skate=b;h.exports=b},{"./constants":1,"./document-observer":3,"./lifecycle":5,"./registry":7,"./utils":9,"./version":10}],
9:[function(a,h,g){function r(a,b){return Object.prototype.hasOwnProperty.call(a,b)}g.hasOwn=r;g.debounce=function(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1;a()},1))}};g.getClosestIgnoredElement=function(a){for(;a&&a!==document&&!(a instanceof DocumentFragment);){if(a.hasAttribute(b))return a;a=a.parentNode}};g.inherit=function(a,b,c){for(var f=Object.getOwnPropertyNames(b),g=f.length,h=0;h<g;h++){var l=f[h];if(c||void 0===a[l]){var n=Object.getOwnPropertyDescriptor(b,l);!n.get&&
!n.set&&n.writable&&n.enumerable&&n.configurable?a[l]=b[l]:Object.defineProperty(a,l,n)}}return a};g.objEach=function(a,b){for(var c in a)r(a,c)&&b(a[c],c)};Object.defineProperty(g,"__esModule",{value:!0});"use strict";var b=a("./constants").ATTR_IGNORE},{"./constants":1}],10:[function(a,h,g){h.exports="0.12.6"},{}]},{},[8]);(function(a){var h=a.skate.noConflict();define("atlassian/libs/skate-0.12.6",[],function(){return h})})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-require', location = '/util/require.js' */
(function (window) {

    'use strict';

    function fnFactory(fn) {
        return function () {
            return fn;
        };
    }

    var oldRequire = require;
    var logged = false;

    require = function (modules, cb) {
        if (typeof modules === 'string' && typeof cb === 'function') {
            if (!logged) {
                logged = true;
                /* [logging] */
                console.log('WARN: require() use with string an function has been deprecated in 2.11 and will throw an error in 3.0. Use an array of dependencies. (requiring ' + modules + ')');
                /* [logging] end */
            }
            modules = [ modules ];
        }

        //explicitly disallow use of Almond internal params.
        if (cb && typeof cb !== 'function') {
            throw new Error('Callback was not a function');
        }

        return oldRequire.call(window, modules, cb);
    };

    // predefined shims
    define('jquery', fnFactory(window.AJS ? window.AJS.$ : window.jQuery));
    define('underscore', fnFactory(window._));
    define('backbone', fnFactory(window.Backbone));
    define('brace', fnFactory(window.Brace));
    define('aui', fnFactory(window.AJS));
    define('ajs', ['aui'], function(AJS) { return AJS; });
    define('skate', ['atlassian/libs/skate-0.12.6'], function(skate) { return skate; });

})(window || this);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-mixins', location = '/bower/backbone.wreqr/backbone.wreqr.js' */
// Backbone.Wreqr (Backbone.Marionette)
// ----------------------------------
// v1.3.2
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.wreqr


(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  "use strict";

  var previousWreqr = Backbone.Wreqr;

  var Wreqr = Backbone.Wreqr = {};

  Backbone.Wreqr.VERSION = '1.3.2';

  Backbone.Wreqr.noConflict = function () {
    Backbone.Wreqr = previousWreqr;
    return this;
  };

  // Handlers
  // --------
  // A registry of functions to call, given a name
  
  Wreqr.Handlers = (function(Backbone, _){
    "use strict";
    
    // Constructor
    // -----------
  
    var Handlers = function(options){
      this.options = options;
      this._wreqrHandlers = {};
      
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    Handlers.extend = Backbone.Model.extend;
  
    // Instance Members
    // ----------------
  
    _.extend(Handlers.prototype, Backbone.Events, {
  
      // Add multiple handlers using an object literal configuration
      setHandlers: function(handlers){
        _.each(handlers, function(handler, name){
          var context = null;
  
          if (_.isObject(handler) && !_.isFunction(handler)){
            context = handler.context;
            handler = handler.callback;
          }
  
          this.setHandler(name, handler, context);
        }, this);
      },
  
      // Add a handler for the given name, with an
      // optional context to run the handler within
      setHandler: function(name, handler, context){
        var config = {
          callback: handler,
          context: context
        };
  
        this._wreqrHandlers[name] = config;
  
        this.trigger("handler:add", name, handler, context);
      },
  
      // Determine whether or not a handler is registered
      hasHandler: function(name){
        return !! this._wreqrHandlers[name];
      },
  
      // Get the currently registered handler for
      // the specified name. Throws an exception if
      // no handler is found.
      getHandler: function(name){
        var config = this._wreqrHandlers[name];
  
        if (!config){
          return;
        }
  
        return function(){
          return config.callback.apply(config.context, arguments);
        };
      },
  
      // Remove a handler for the specified name
      removeHandler: function(name){
        delete this._wreqrHandlers[name];
      },
  
      // Remove all handlers from this registry
      removeAllHandlers: function(){
        this._wreqrHandlers = {};
      }
    });
  
    return Handlers;
  })(Backbone, _);
  
  // Wreqr.CommandStorage
  // --------------------
  //
  // Store and retrieve commands for execution.
  Wreqr.CommandStorage = (function(){
    "use strict";
  
    // Constructor function
    var CommandStorage = function(options){
      this.options = options;
      this._commands = {};
  
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    // Instance methods
    _.extend(CommandStorage.prototype, Backbone.Events, {
  
      // Get an object literal by command name, that contains
      // the `commandName` and the `instances` of all commands
      // represented as an array of arguments to process
      getCommands: function(commandName){
        var commands = this._commands[commandName];
  
        // we don't have it, so add it
        if (!commands){
  
          // build the configuration
          commands = {
            command: commandName, 
            instances: []
          };
  
          // store it
          this._commands[commandName] = commands;
        }
  
        return commands;
      },
  
      // Add a command by name, to the storage and store the
      // args for the command
      addCommand: function(commandName, args){
        var command = this.getCommands(commandName);
        command.instances.push(args);
      },
  
      // Clear all commands for the given `commandName`
      clearCommands: function(commandName){
        var command = this.getCommands(commandName);
        command.instances = [];
      }
    });
  
    return CommandStorage;
  })();
  
  // Wreqr.Commands
  // --------------
  //
  // A simple command pattern implementation. Register a command
  // handler and execute it.
  Wreqr.Commands = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      // default storage type
      storageType: Wreqr.CommandStorage,
  
      constructor: function(options){
        this.options = options || {};
  
        this._initializeStorage(this.options);
        this.on("handler:add", this._executeCommands, this);
  
        Wreqr.Handlers.prototype.constructor.apply(this, arguments);
      },
  
      // Execute a named command with the supplied args
      execute: function(name){
        name = arguments[0];
        var args = _.rest(arguments);
  
        if (this.hasHandler(name)){
          this.getHandler(name).apply(this, args);
        } else {
          this.storage.addCommand(name, args);
        }
  
      },
  
      // Internal method to handle bulk execution of stored commands
      _executeCommands: function(name, handler, context){
        var command = this.storage.getCommands(name);
  
        // loop through and execute all the stored command instances
        _.each(command.instances, function(args){
          handler.apply(context, args);
        });
  
        this.storage.clearCommands(name);
      },
  
      // Internal method to initialize storage either from the type's
      // `storageType` or the instance `options.storageType`.
      _initializeStorage: function(options){
        var storage;
  
        var StorageType = options.storageType || this.storageType;
        if (_.isFunction(StorageType)){
          storage = new StorageType();
        } else {
          storage = StorageType;
        }
  
        this.storage = storage;
      }
    });
  
  })(Wreqr, _);
  
  // Wreqr.RequestResponse
  // ---------------------
  //
  // A simple request/response implementation. Register a
  // request handler, and return a response from it
  Wreqr.RequestResponse = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      request: function(name){
        if (this.hasHandler(name)) {
          return this.getHandler(name).apply(this, _.rest(arguments));
        }
      }
    });
  
  })(Wreqr, _);
  
  // Event Aggregator
  // ----------------
  // A pub-sub object that can be used to decouple various parts
  // of an application through event-driven architecture.
  
  Wreqr.EventAggregator = (function(Backbone, _){
    "use strict";
    var EA = function(){};
  
    // Copy the `extend` function used by Backbone's classes
    EA.extend = Backbone.Model.extend;
  
    // Copy the basic Backbone.Events on to the event aggregator
    _.extend(EA.prototype, Backbone.Events);
  
    return EA;
  })(Backbone, _);
  
  // Wreqr.Channel
  // --------------
  //
  // An object that wraps the three messaging systems:
  // EventAggregator, RequestResponse, Commands
  Wreqr.Channel = (function(Wreqr){
    "use strict";
  
    var Channel = function(channelName) {
      this.vent        = new Backbone.Wreqr.EventAggregator();
      this.reqres      = new Backbone.Wreqr.RequestResponse();
      this.commands    = new Backbone.Wreqr.Commands();
      this.channelName = channelName;
    };
  
    _.extend(Channel.prototype, {
  
      // Remove all handlers from the messaging systems of this channel
      reset: function() {
        this.vent.off();
        this.vent.stopListening();
        this.reqres.removeAllHandlers();
        this.commands.removeAllHandlers();
        return this;
      },
  
      // Connect a hash of events; one for each messaging system
      connectEvents: function(hash, context) {
        this._connect('vent', hash, context);
        return this;
      },
  
      connectCommands: function(hash, context) {
        this._connect('commands', hash, context);
        return this;
      },
  
      connectRequests: function(hash, context) {
        this._connect('reqres', hash, context);
        return this;
      },
  
      // Attach the handlers to a given message system `type`
      _connect: function(type, hash, context) {
        if (!hash) {
          return;
        }
  
        context = context || this;
        var method = (type === 'vent') ? 'on' : 'setHandler';
  
        _.each(hash, function(fn, eventName) {
          this[type][method](eventName, _.bind(fn, context));
        }, this);
      }
    });
  
  
    return Channel;
  })(Wreqr);
  
  // Wreqr.Radio
  // --------------
  //
  // An object that lets you communicate with many channels.
  Wreqr.radio = (function(Wreqr, _){
    "use strict";
  
    var Radio = function() {
      this._channels = {};
      this.vent = {};
      this.commands = {};
      this.reqres = {};
      this._proxyMethods();
    };
  
    _.extend(Radio.prototype, {
  
      channel: function(channelName) {
        if (!channelName) {
          throw new Error('Channel must receive a name');
        }
  
        return this._getChannel( channelName );
      },
  
      _getChannel: function(channelName) {
        var channel = this._channels[channelName];
  
        if(!channel) {
          channel = new Wreqr.Channel(channelName);
          this._channels[channelName] = channel;
        }
  
        return channel;
      },
  
      _proxyMethods: function() {
        _.each(['vent', 'commands', 'reqres'], function(system) {
          _.each( messageSystems[system], function(method) {
            this[system][method] = proxyMethod(this, system, method);
          }, this);
        }, this);
      }
    });
  
  
    var messageSystems = {
      vent: [
        'on',
        'off',
        'trigger',
        'once',
        'stopListening',
        'listenTo',
        'listenToOnce'
      ],
  
      commands: [
        'execute',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ],
  
      reqres: [
        'request',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ]
    };
  
    var proxyMethod = function(radio, system, method) {
      return function(channelName) {
        var messageSystem = radio._getChannel(channelName)[system];
  
        return messageSystem[method].apply(messageSystem, _.rest(arguments));
      };
    };
  
    return new Radio();
  
  })(Wreqr, _);
  

  return Backbone.Wreqr;

}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-mixins', location = '/util/mixins/events.js' */
define('util/events', [
    'underscore',
    'backbone',
    'exports'
], function(_, Backbone, exports) {

    'use strict';

    var EventBus = new Backbone.Wreqr.EventAggregator();
    var EventBusMixin = {

        onEvent: function(key, callback, object) {
            var handler = function(value, callback, object) {
                EventBus.on(value, _.bind(callback, object));
            };

            if (_.isArray(key)) {
                _.each(key, _.bind(function(value) {
                    handler(value, callback, object || this);
                }, this));
            }
            else {
                handler(key, callback, object || this);
            }
        },

        triggerEvent: function(key) {
            EventBus.trigger.apply(EventBus,
                [key, this].concat(
                    Array.prototype.slice.call(arguments, 1)
                )
            );
        },

        offEvent: function(events) {
            if (_.isArray(events)) {
                _.each(events, function(event) {
                    EventBus.off(event);
                });
            }
            else {
                EventBus.off(events);
            }
        },

        offEventNamespace: function(namespace) {
            if (namespace.length) {
                _.each(_.keys(EventBus._events), _.bind(function(event) {
                    if (event.indexOf(namespace + ':') === 0) {
                        this.offEvent(event);
                    }
                }, this));
            }
        },

        proxyEvents: function(key, events, object, bindMethod) {
            var scope = object || this, self = this;
            var proxyMethod = (bindMethod) ? scope[bindMethod] : scope.on;

            _.each(events, function(event) {
                proxyMethod.apply(scope, [event, function() {
                    self.triggerEvent(
                        [key, event].join(':'), scope
                    );
                }]);
            });
        }

    };

    exports.EventBus = EventBus;
    exports.EventBusMixin = EventBusMixin;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.EventBus', null, require('util/events').EventBus);
    AJS.namespace('Bamboo.EventBusMixin', null, require('util/events').EventBusMixin);
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:util-mixins', location = '/util/mixins/elements.js' */
define('util/elements', [
    'jquery',
    'underscore'
], function(
    $,
    _
) {

    'use strict';

    var Elements = {

        getElement: function(name) {
            var item = this.elements[name];

            if (_.isUndefined(item)) {
                throw '"' + name + '" not found in elements';
            }

            if (_.isString(item)) {
                this.elements[name] = {
                    selector: item,
                    query: this.$el.find(item)
                };

                item = this.elements[name];
            }

            return item.query;
        },

        clearElementsCache: function() {
            _.each(_.keys(this.elements), _.bind(function(key) {
                var item = this.elements[key];

                if (!_.isString(item)) {
                    this.elements[key] = item.selector;
                }
            }, this));
        },

        toggleContainer: function($selector, show) {
            if (!_.isUndefined(show)) {
                return $selector.toggle(!!show);
            }
            else {
                return $selector.hide();
            }
        }

    };

    return Elements;
});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.Util.Mixins.Elements', null, require('util/elements'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-help-dialog', location = '/widget/help/help-dialog.js' */
define('widget/help-dialog', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {

    'use strict';

    var HelpDialog = Brace.View.extend({

        mixins: [events.EventBusMixin],

        initialize: function() {
            AJS.InlineDialog(
                this.$el,
                this.$el.attr('id').replace(/[:\.]/g, "-"),
                _.bind(this.onDialogShow, this),
                {
                    hideDelay: null,
                    offsetX: -60,
                    arrowOffsetX: 0,
                    width: 420
                }
            );
        },

        onDialogShow: function(content, trigger, showPopup) {
            content.css({ padding: '20px' })
                .html((this.options.content || this.$el.find('span:first')).html());

            showPopup();
            return false;
        }
    });

    return HelpDialog;

});


/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.Widget.HelpDialog', null, require('widget/help-dialog'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-action-tip', location = '/widget/action-tip/action-tip.soy' */
// This file was automatically generated from action-tip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.actionTip.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.actionTip == 'undefined') { bamboo.widget.actionTip = {}; }


bamboo.widget.actionTip.dialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(opt_data.content) + '</p><button class="aui-button action-tip-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>';
};
if (goog.DEBUG) {
  bamboo.widget.actionTip.dialog.soyTemplateName = 'bamboo.widget.actionTip.dialog';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-action-tip', location = '/widget/action-tip/action-tip.js' */
define('widget/action-tip', [
    'jquery',
    'underscore',
    'backbone',
    'util/preferences'
], function(
    $,
    _,
    Backbone,
    preferencesManager
) {

    'use strict';

    var ActionTip = Backbone.View.extend({

        template: bamboo.widget.actionTip,

        preference: function(key) {
            return ['bamboo.user.actions', key].join('.');
        },

        defaults: {
            content: '',
            params: {
                onTop: false
            }
        },

        initialize: function(options) {
            this.settings = $.extend(this.defaults, options || {});

            if (!this.settings.label) {
                this.settings.label = $.trim(this.$el.text());
            }

            var params = $.extend({
                hideCallback: _.bind(this.onClose, this),
                container: 'body',
                noBind: true
            }, this.settings.params);

            this.dialog = AJS.InlineDialog(
                this.$el, this.$el.attr('id'),
                _.bind(this.onShow, this), params
            );

            this.registerEvents();
        },

        registerEvents: function() {
            this.$el.on('click', _.bind(this.onClick, this));

            $(document).on('keydown', _.bind(function(event) {
                if (event.keyCode === 27) this.hide();
            }, this.dialog));
        },

        onClick: function() {
            var value = false;

            if (this.settings.actionKey) {
                value = preferencesManager.getBoolean(
                    this.preference(this.settings.actionKey)
                );
            }

            if (!value) {
                this.dialog.show();
                return false;
            }

            this.dialog.remove();
        },

        onShow: function(dialog, trigger, show) {
            var content = this.template.dialog({
                label: this.settings.label,
                content: this.settings.content
            });

            dialog
                .html(content)
                .addClass('action-tip')
                .find('button').on('click', _.bind(function() {
                    this.onAction.call(this);
                    this.dialog.hide();
                }, this));

            show();
        },

        onClose: function() {
            if (this.clicked) {
                this.$el.click();
                this.dialog.remove();
            }
        },

        onAction: function() {
            if (this.settings.actionKey) {
                this.clicked = true;

                if (!this.settings.callback) {
                    preferencesManager.setValue(
                        this.preference(this.settings.actionKey)
                    );
                }
                else {
                    this.settings.callback.call(this);
                }
            }
        }

    });

    return ActionTip;
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:help-widget', location = '/widget/help/help.soy' */
// This file was automatically generated from help.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.help.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.help == 'undefined') { bamboo.widget.help = {}; }


bamboo.widget.help.panel = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + ' class="help-panel' + ((opt_data.type) ? ' help-panel-' + soy.$$escapeHtml(opt_data.type) : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.link) ? ' href="' + soy.$$escapeHtml(opt_data.link) + '"' : '') + aui.renderExtraAttributes(opt_data) + '><strong class="help-panel-title">' + soy.$$escapeHtml(opt_data.title) + '</strong><div class="help-panel-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + '>';
};
if (goog.DEBUG) {
  bamboo.widget.help.panel.soyTemplateName = 'bamboo.widget.help.panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:moment-js', location = '/bower/moment/moment.js' */
//! moment.js
//! version : 2.9.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

(function (undefined) {
    /************************************
        Constants
    ************************************/

    var moment,
        VERSION = '2.9.0',
        // the global-scope this is NOT the global object in Node.js
        globalScope = (typeof global !== 'undefined' && (typeof window === 'undefined' || window === global.window)) ? global : this,
        oldGlobalMoment,
        round = Math.round,
        hasOwnProperty = Object.prototype.hasOwnProperty,
        i,

        YEAR = 0,
        MONTH = 1,
        DATE = 2,
        HOUR = 3,
        MINUTE = 4,
        SECOND = 5,
        MILLISECOND = 6,

        // internal storage for locale config files
        locales = {},

        // extra moment internal properties (plugins register props here)
        momentProperties = [],

        // check for nodeJS
        hasModule = (typeof module !== 'undefined' && module && module.exports),

        // ASP.NET json date format regex
        aspNetJsonRegex = /^\/?Date\((\-?\d+)/i,
        aspNetTimeSpanJsonRegex = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,

        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
        isoDurationRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,

        // format tokens
        formattingTokens = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,
        localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,

        // parsing token regexes
        parseTokenOneOrTwoDigits = /\d\d?/, // 0 - 99
        parseTokenOneToThreeDigits = /\d{1,3}/, // 0 - 999
        parseTokenOneToFourDigits = /\d{1,4}/, // 0 - 9999
        parseTokenOneToSixDigits = /[+\-]?\d{1,6}/, // -999,999 - 999,999
        parseTokenDigits = /\d+/, // nonzero number of digits
        parseTokenWord = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, // any word (or two) characters or numbers including two/three word month in arabic.
        parseTokenTimezone = /Z|[\+\-]\d\d:?\d\d/gi, // +00:00 -00:00 +0000 -0000 or Z
        parseTokenT = /T/i, // T (ISO separator)
        parseTokenOffsetMs = /[\+\-]?\d+/, // 1234567890123
        parseTokenTimestampMs = /[\+\-]?\d+(\.\d{1,3})?/, // 123456789 123456789.123

        //strict parsing regexes
        parseTokenOneDigit = /\d/, // 0 - 9
        parseTokenTwoDigits = /\d\d/, // 00 - 99
        parseTokenThreeDigits = /\d{3}/, // 000 - 999
        parseTokenFourDigits = /\d{4}/, // 0000 - 9999
        parseTokenSixDigits = /[+-]?\d{6}/, // -999,999 - 999,999
        parseTokenSignedNumber = /[+-]?\d+/, // -inf - inf

        // iso 8601 regex
        // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)
        isoRegex = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,

        isoFormat = 'YYYY-MM-DDTHH:mm:ssZ',

        isoDates = [
            ['YYYYYY-MM-DD', /[+-]\d{6}-\d{2}-\d{2}/],
            ['YYYY-MM-DD', /\d{4}-\d{2}-\d{2}/],
            ['GGGG-[W]WW-E', /\d{4}-W\d{2}-\d/],
            ['GGGG-[W]WW', /\d{4}-W\d{2}/],
            ['YYYY-DDD', /\d{4}-\d{3}/]
        ],

        // iso time formats and regexes
        isoTimes = [
            ['HH:mm:ss.SSSS', /(T| )\d\d:\d\d:\d\d\.\d+/],
            ['HH:mm:ss', /(T| )\d\d:\d\d:\d\d/],
            ['HH:mm', /(T| )\d\d:\d\d/],
            ['HH', /(T| )\d\d/]
        ],

        // timezone chunker '+10:00' > ['10', '00'] or '-1530' > ['-', '15', '30']
        parseTimezoneChunker = /([\+\-]|\d\d)/gi,

        // getter and setter names
        proxyGettersAndSetters = 'Date|Hours|Minutes|Seconds|Milliseconds'.split('|'),
        unitMillisecondFactors = {
            'Milliseconds' : 1,
            'Seconds' : 1e3,
            'Minutes' : 6e4,
            'Hours' : 36e5,
            'Days' : 864e5,
            'Months' : 2592e6,
            'Years' : 31536e6
        },

        unitAliases = {
            ms : 'millisecond',
            s : 'second',
            m : 'minute',
            h : 'hour',
            d : 'day',
            D : 'date',
            w : 'week',
            W : 'isoWeek',
            M : 'month',
            Q : 'quarter',
            y : 'year',
            DDD : 'dayOfYear',
            e : 'weekday',
            E : 'isoWeekday',
            gg: 'weekYear',
            GG: 'isoWeekYear'
        },

        camelFunctions = {
            dayofyear : 'dayOfYear',
            isoweekday : 'isoWeekday',
            isoweek : 'isoWeek',
            weekyear : 'weekYear',
            isoweekyear : 'isoWeekYear'
        },

        // format function strings
        formatFunctions = {},

        // default relative time thresholds
        relativeTimeThresholds = {
            s: 45,  // seconds to minute
            m: 45,  // minutes to hour
            h: 22,  // hours to day
            d: 26,  // days to month
            M: 11   // months to year
        },

        // tokens to ordinalize and pad
        ordinalizeTokens = 'DDD w W M D d'.split(' '),
        paddedTokens = 'M D H h m s w W'.split(' '),

        formatTokenFunctions = {
            M    : function () {
                return this.month() + 1;
            },
            MMM  : function (format) {
                return this.localeData().monthsShort(this, format);
            },
            MMMM : function (format) {
                return this.localeData().months(this, format);
            },
            D    : function () {
                return this.date();
            },
            DDD  : function () {
                return this.dayOfYear();
            },
            d    : function () {
                return this.day();
            },
            dd   : function (format) {
                return this.localeData().weekdaysMin(this, format);
            },
            ddd  : function (format) {
                return this.localeData().weekdaysShort(this, format);
            },
            dddd : function (format) {
                return this.localeData().weekdays(this, format);
            },
            w    : function () {
                return this.week();
            },
            W    : function () {
                return this.isoWeek();
            },
            YY   : function () {
                return leftZeroFill(this.year() % 100, 2);
            },
            YYYY : function () {
                return leftZeroFill(this.year(), 4);
            },
            YYYYY : function () {
                return leftZeroFill(this.year(), 5);
            },
            YYYYYY : function () {
                var y = this.year(), sign = y >= 0 ? '+' : '-';
                return sign + leftZeroFill(Math.abs(y), 6);
            },
            gg   : function () {
                return leftZeroFill(this.weekYear() % 100, 2);
            },
            gggg : function () {
                return leftZeroFill(this.weekYear(), 4);
            },
            ggggg : function () {
                return leftZeroFill(this.weekYear(), 5);
            },
            GG   : function () {
                return leftZeroFill(this.isoWeekYear() % 100, 2);
            },
            GGGG : function () {
                return leftZeroFill(this.isoWeekYear(), 4);
            },
            GGGGG : function () {
                return leftZeroFill(this.isoWeekYear(), 5);
            },
            e : function () {
                return this.weekday();
            },
            E : function () {
                return this.isoWeekday();
            },
            a    : function () {
                return this.localeData().meridiem(this.hours(), this.minutes(), true);
            },
            A    : function () {
                return this.localeData().meridiem(this.hours(), this.minutes(), false);
            },
            H    : function () {
                return this.hours();
            },
            h    : function () {
                return this.hours() % 12 || 12;
            },
            m    : function () {
                return this.minutes();
            },
            s    : function () {
                return this.seconds();
            },
            S    : function () {
                return toInt(this.milliseconds() / 100);
            },
            SS   : function () {
                return leftZeroFill(toInt(this.milliseconds() / 10), 2);
            },
            SSS  : function () {
                return leftZeroFill(this.milliseconds(), 3);
            },
            SSSS : function () {
                return leftZeroFill(this.milliseconds(), 3);
            },
            Z    : function () {
                var a = this.utcOffset(),
                    b = '+';
                if (a < 0) {
                    a = -a;
                    b = '-';
                }
                return b + leftZeroFill(toInt(a / 60), 2) + ':' + leftZeroFill(toInt(a) % 60, 2);
            },
            ZZ   : function () {
                var a = this.utcOffset(),
                    b = '+';
                if (a < 0) {
                    a = -a;
                    b = '-';
                }
                return b + leftZeroFill(toInt(a / 60), 2) + leftZeroFill(toInt(a) % 60, 2);
            },
            z : function () {
                return this.zoneAbbr();
            },
            zz : function () {
                return this.zoneName();
            },
            x    : function () {
                return this.valueOf();
            },
            X    : function () {
                return this.unix();
            },
            Q : function () {
                return this.quarter();
            }
        },

        deprecations = {},

        lists = ['months', 'monthsShort', 'weekdays', 'weekdaysShort', 'weekdaysMin'],

        updateInProgress = false;

    // Pick the first defined of two or three arguments. dfl comes from
    // default.
    function dfl(a, b, c) {
        switch (arguments.length) {
            case 2: return a != null ? a : b;
            case 3: return a != null ? a : b != null ? b : c;
            default: throw new Error('Implement me');
        }
    }

    function hasOwnProp(a, b) {
        return hasOwnProperty.call(a, b);
    }

    function defaultParsingFlags() {
        // We need to deep clone this object, and es5 standard is not very
        // helpful.
        return {
            empty : false,
            unusedTokens : [],
            unusedInput : [],
            overflow : -2,
            charsLeftOver : 0,
            nullInput : false,
            invalidMonth : null,
            invalidFormat : false,
            userInvalidated : false,
            iso: false
        };
    }

    function printMsg(msg) {
        if (moment.suppressDeprecationWarnings === false &&
                typeof console !== 'undefined' && console.warn) {
            console.warn('Deprecation warning: ' + msg);
        }
    }

    function deprecate(msg, fn) {
        var firstTime = true;
        return extend(function () {
            if (firstTime) {
                printMsg(msg);
                firstTime = false;
            }
            return fn.apply(this, arguments);
        }, fn);
    }

    function deprecateSimple(name, msg) {
        if (!deprecations[name]) {
            printMsg(msg);
            deprecations[name] = true;
        }
    }

    function padToken(func, count) {
        return function (a) {
            return leftZeroFill(func.call(this, a), count);
        };
    }
    function ordinalizeToken(func, period) {
        return function (a) {
            return this.localeData().ordinal(func.call(this, a), period);
        };
    }

    function monthDiff(a, b) {
        // difference in months
        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
            // b is in (anchor - 1 month, anchor + 1 month)
            anchor = a.clone().add(wholeMonthDiff, 'months'),
            anchor2, adjust;

        if (b - anchor < 0) {
            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor - anchor2);
        } else {
            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor2 - anchor);
        }

        return -(wholeMonthDiff + adjust);
    }

    while (ordinalizeTokens.length) {
        i = ordinalizeTokens.pop();
        formatTokenFunctions[i + 'o'] = ordinalizeToken(formatTokenFunctions[i], i);
    }
    while (paddedTokens.length) {
        i = paddedTokens.pop();
        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], 2);
    }
    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, 3);


    function meridiemFixWrap(locale, hour, meridiem) {
        var isPm;

        if (meridiem == null) {
            // nothing to do
            return hour;
        }
        if (locale.meridiemHour != null) {
            return locale.meridiemHour(hour, meridiem);
        } else if (locale.isPM != null) {
            // Fallback
            isPm = locale.isPM(meridiem);
            if (isPm && hour < 12) {
                hour += 12;
            }
            if (!isPm && hour === 12) {
                hour = 0;
            }
            return hour;
        } else {
            // thie is not supposed to happen
            return hour;
        }
    }

    /************************************
        Constructors
    ************************************/

    function Locale() {
    }

    // Moment prototype object
    function Moment(config, skipOverflow) {
        if (skipOverflow !== false) {
            checkOverflow(config);
        }
        copyConfig(this, config);
        this._d = new Date(+config._d);
        // Prevent infinite loop in case updateOffset creates new moment
        // objects.
        if (updateInProgress === false) {
            updateInProgress = true;
            moment.updateOffset(this);
            updateInProgress = false;
        }
    }

    // Duration Constructor
    function Duration(duration) {
        var normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || 0,
            quarters = normalizedInput.quarter || 0,
            months = normalizedInput.month || 0,
            weeks = normalizedInput.week || 0,
            days = normalizedInput.day || 0,
            hours = normalizedInput.hour || 0,
            minutes = normalizedInput.minute || 0,
            seconds = normalizedInput.second || 0,
            milliseconds = normalizedInput.millisecond || 0;

        // representation for dateAddRemove
        this._milliseconds = +milliseconds +
            seconds * 1e3 + // 1000
            minutes * 6e4 + // 1000 * 60
            hours * 36e5; // 1000 * 60 * 60
        // Because of dateAddRemove treats 24 hours as different from a
        // day when working around DST, we need to store them separately
        this._days = +days +
            weeks * 7;
        // It is impossible translate months into days without knowing
        // which months you are are talking about, so we have to store
        // it separately.
        this._months = +months +
            quarters * 3 +
            years * 12;

        this._data = {};

        this._locale = moment.localeData();

        this._bubble();
    }

    /************************************
        Helpers
    ************************************/


    function extend(a, b) {
        for (var i in b) {
            if (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }

        if (hasOwnProp(b, 'toString')) {
            a.toString = b.toString;
        }

        if (hasOwnProp(b, 'valueOf')) {
            a.valueOf = b.valueOf;
        }

        return a;
    }

    function copyConfig(to, from) {
        var i, prop, val;

        if (typeof from._isAMomentObject !== 'undefined') {
            to._isAMomentObject = from._isAMomentObject;
        }
        if (typeof from._i !== 'undefined') {
            to._i = from._i;
        }
        if (typeof from._f !== 'undefined') {
            to._f = from._f;
        }
        if (typeof from._l !== 'undefined') {
            to._l = from._l;
        }
        if (typeof from._strict !== 'undefined') {
            to._strict = from._strict;
        }
        if (typeof from._tzm !== 'undefined') {
            to._tzm = from._tzm;
        }
        if (typeof from._isUTC !== 'undefined') {
            to._isUTC = from._isUTC;
        }
        if (typeof from._offset !== 'undefined') {
            to._offset = from._offset;
        }
        if (typeof from._pf !== 'undefined') {
            to._pf = from._pf;
        }
        if (typeof from._locale !== 'undefined') {
            to._locale = from._locale;
        }

        if (momentProperties.length > 0) {
            for (i in momentProperties) {
                prop = momentProperties[i];
                val = from[prop];
                if (typeof val !== 'undefined') {
                    to[prop] = val;
                }
            }
        }

        return to;
    }

    function absRound(number) {
        if (number < 0) {
            return Math.ceil(number);
        } else {
            return Math.floor(number);
        }
    }

    // left zero fill a number
    // see http://jsperf.com/left-zero-filling for performance comparison
    function leftZeroFill(number, targetLength, forceSign) {
        var output = '' + Math.abs(number),
            sign = number >= 0;

        while (output.length < targetLength) {
            output = '0' + output;
        }
        return (sign ? (forceSign ? '+' : '') : '-') + output;
    }

    function positiveMomentsDifference(base, other) {
        var res = {milliseconds: 0, months: 0};

        res.months = other.month() - base.month() +
            (other.year() - base.year()) * 12;
        if (base.clone().add(res.months, 'M').isAfter(other)) {
            --res.months;
        }

        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));

        return res;
    }

    function momentsDifference(base, other) {
        var res;
        other = makeAs(other, base);
        if (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } else {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }

        return res;
    }

    // TODO: remove 'name' arg after deprecation is removed
    function createAdder(direction, name) {
        return function (val, period) {
            var dur, tmp;
            //invert the arguments, but complain about it
            if (period !== null && !isNaN(+period)) {
                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');
                tmp = val; val = period; period = tmp;
            }

            val = typeof val === 'string' ? +val : val;
            dur = moment.duration(val, period);
            addOrSubtractDurationFromMoment(this, dur, direction);
            return this;
        };
    }

    function addOrSubtractDurationFromMoment(mom, duration, isAdding, updateOffset) {
        var milliseconds = duration._milliseconds,
            days = duration._days,
            months = duration._months;
        updateOffset = updateOffset == null ? true : updateOffset;

        if (milliseconds) {
            mom._d.setTime(+mom._d + milliseconds * isAdding);
        }
        if (days) {
            rawSetter(mom, 'Date', rawGetter(mom, 'Date') + days * isAdding);
        }
        if (months) {
            rawMonthSetter(mom, rawGetter(mom, 'Month') + months * isAdding);
        }
        if (updateOffset) {
            moment.updateOffset(mom, days || months);
        }
    }

    // check if is an array
    function isArray(input) {
        return Object.prototype.toString.call(input) === '[object Array]';
    }

    function isDate(input) {
        return Object.prototype.toString.call(input) === '[object Date]' ||
            input instanceof Date;
    }

    // compare two arrays, return the number of differences
    function compareArrays(array1, array2, dontConvert) {
        var len = Math.min(array1.length, array2.length),
            lengthDiff = Math.abs(array1.length - array2.length),
            diffs = 0,
            i;
        for (i = 0; i < len; i++) {
            if ((dontConvert && array1[i] !== array2[i]) ||
                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        return diffs + lengthDiff;
    }

    function normalizeUnits(units) {
        if (units) {
            var lowered = units.toLowerCase().replace(/(.)s$/, '$1');
            units = unitAliases[units] || camelFunctions[lowered] || lowered;
        }
        return units;
    }

    function normalizeObjectUnits(inputObject) {
        var normalizedInput = {},
            normalizedProp,
            prop;

        for (prop in inputObject) {
            if (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                if (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        return normalizedInput;
    }

    function makeList(field) {
        var count, setter;

        if (field.indexOf('week') === 0) {
            count = 7;
            setter = 'day';
        }
        else if (field.indexOf('month') === 0) {
            count = 12;
            setter = 'month';
        }
        else {
            return;
        }

        moment[field] = function (format, index) {
            var i, getter,
                method = moment._locale[field],
                results = [];

            if (typeof format === 'number') {
                index = format;
                format = undefined;
            }

            getter = function (i) {
                var m = moment().utc().set(setter, i);
                return method.call(moment._locale, m, format || '');
            };

            if (index != null) {
                return getter(index);
            }
            else {
                for (i = 0; i < count; i++) {
                    results.push(getter(i));
                }
                return results;
            }
        };
    }

    function toInt(argumentForCoercion) {
        var coercedNumber = +argumentForCoercion,
            value = 0;

        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
            if (coercedNumber >= 0) {
                value = Math.floor(coercedNumber);
            } else {
                value = Math.ceil(coercedNumber);
            }
        }

        return value;
    }

    function daysInMonth(year, month) {
        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
    }

    function weeksInYear(year, dow, doy) {
        return weekOfYear(moment([year, 11, 31 + dow - doy]), dow, doy).week;
    }

    function daysInYear(year) {
        return isLeapYear(year) ? 366 : 365;
    }

    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    }

    function checkOverflow(m) {
        var overflow;
        if (m._a && m._pf.overflow === -2) {
            overflow =
                m._a[MONTH] < 0 || m._a[MONTH] > 11 ? MONTH :
                m._a[DATE] < 1 || m._a[DATE] > daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :
                m._a[HOUR] < 0 || m._a[HOUR] > 24 ||
                    (m._a[HOUR] === 24 && (m._a[MINUTE] !== 0 ||
                                           m._a[SECOND] !== 0 ||
                                           m._a[MILLISECOND] !== 0)) ? HOUR :
                m._a[MINUTE] < 0 || m._a[MINUTE] > 59 ? MINUTE :
                m._a[SECOND] < 0 || m._a[SECOND] > 59 ? SECOND :
                m._a[MILLISECOND] < 0 || m._a[MILLISECOND] > 999 ? MILLISECOND :
                -1;

            if (m._pf._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
                overflow = DATE;
            }

            m._pf.overflow = overflow;
        }
    }

    function isValid(m) {
        if (m._isValid == null) {
            m._isValid = !isNaN(m._d.getTime()) &&
                m._pf.overflow < 0 &&
                !m._pf.empty &&
                !m._pf.invalidMonth &&
                !m._pf.nullInput &&
                !m._pf.invalidFormat &&
                !m._pf.userInvalidated;

            if (m._strict) {
                m._isValid = m._isValid &&
                    m._pf.charsLeftOver === 0 &&
                    m._pf.unusedTokens.length === 0 &&
                    m._pf.bigHour === undefined;
            }
        }
        return m._isValid;
    }

    function normalizeLocale(key) {
        return key ? key.toLowerCase().replace('_', '-') : key;
    }

    // pick the locale from the array
    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
    function chooseLocale(names) {
        var i = 0, j, next, locale, split;

        while (i < names.length) {
            split = normalizeLocale(names[i]).split('-');
            j = split.length;
            next = normalizeLocale(names[i + 1]);
            next = next ? next.split('-') : null;
            while (j > 0) {
                locale = loadLocale(split.slice(0, j).join('-'));
                if (locale) {
                    return locale;
                }
                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                    //the next array item is better than a shallower substring of this one
                    break;
                }
                j--;
            }
            i++;
        }
        return null;
    }

    function loadLocale(name) {
        var oldLocale = null;
        if (!locales[name] && hasModule) {
            try {
                oldLocale = moment.locale();
                require('./locale/' + name);
                // because defineLocale currently also sets the global locale, we want to undo that for lazy loaded locales
                moment.locale(oldLocale);
            } catch (e) { }
        }
        return locales[name];
    }

    // Return a moment from input, that is local/utc/utcOffset equivalent to
    // model.
    function makeAs(input, model) {
        var res, diff;
        if (model._isUTC) {
            res = model.clone();
            diff = (moment.isMoment(input) || isDate(input) ?
                    +input : +moment(input)) - (+res);
            // Use low-level api, because this fn is low-level api.
            res._d.setTime(+res._d + diff);
            moment.updateOffset(res, false);
            return res;
        } else {
            return moment(input).local();
        }
    }

    /************************************
        Locale
    ************************************/


    extend(Locale.prototype, {

        set : function (config) {
            var prop, i;
            for (i in config) {
                prop = config[i];
                if (typeof prop === 'function') {
                    this[i] = prop;
                } else {
                    this['_' + i] = prop;
                }
            }
            // Lenient ordinal parsing accepts just a number in addition to
            // number + (possibly) stuff coming from _ordinalParseLenient.
            this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + /\d{1,2}/.source);
        },

        _months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
        months : function (m) {
            return this._months[m.month()];
        },

        _monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
        monthsShort : function (m) {
            return this._monthsShort[m.month()];
        },

        monthsParse : function (monthName, format, strict) {
            var i, mom, regex;

            if (!this._monthsParse) {
                this._monthsParse = [];
                this._longMonthsParse = [];
                this._shortMonthsParse = [];
            }

            for (i = 0; i < 12; i++) {
                // make the regex if we don't have it already
                mom = moment.utc([2000, i]);
                if (strict && !this._longMonthsParse[i]) {
                    this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
                    this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
                }
                if (!strict && !this._monthsParse[i]) {
                    regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
                    this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
                }
                // test the regex
                if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
                    return i;
                } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
                    return i;
                } else if (!strict && this._monthsParse[i].test(monthName)) {
                    return i;
                }
            }
        },

        _weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
        weekdays : function (m) {
            return this._weekdays[m.day()];
        },

        _weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
        weekdaysShort : function (m) {
            return this._weekdaysShort[m.day()];
        },

        _weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
        weekdaysMin : function (m) {
            return this._weekdaysMin[m.day()];
        },

        weekdaysParse : function (weekdayName) {
            var i, mom, regex;

            if (!this._weekdaysParse) {
                this._weekdaysParse = [];
            }

            for (i = 0; i < 7; i++) {
                // make the regex if we don't have it already
                if (!this._weekdaysParse[i]) {
                    mom = moment([2000, 1]).day(i);
                    regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
                    this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
                }
                // test the regex
                if (this._weekdaysParse[i].test(weekdayName)) {
                    return i;
                }
            }
        },

        _longDateFormat : {
            LTS : 'h:mm:ss A',
            LT : 'h:mm A',
            L : 'MM/DD/YYYY',
            LL : 'MMMM D, YYYY',
            LLL : 'MMMM D, YYYY LT',
            LLLL : 'dddd, MMMM D, YYYY LT'
        },
        longDateFormat : function (key) {
            var output = this._longDateFormat[key];
            if (!output && this._longDateFormat[key.toUpperCase()]) {
                output = this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (val) {
                    return val.slice(1);
                });
                this._longDateFormat[key] = output;
            }
            return output;
        },

        isPM : function (input) {
            // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
            // Using charAt should be more compatible.
            return ((input + '').toLowerCase().charAt(0) === 'p');
        },

        _meridiemParse : /[ap]\.?m?\.?/i,
        meridiem : function (hours, minutes, isLower) {
            if (hours > 11) {
                return isLower ? 'pm' : 'PM';
            } else {
                return isLower ? 'am' : 'AM';
            }
        },


        _calendar : {
            sameDay : '[Today at] LT',
            nextDay : '[Tomorrow at] LT',
            nextWeek : 'dddd [at] LT',
            lastDay : '[Yesterday at] LT',
            lastWeek : '[Last] dddd [at] LT',
            sameElse : 'L'
        },
        calendar : function (key, mom, now) {
            var output = this._calendar[key];
            return typeof output === 'function' ? output.apply(mom, [now]) : output;
        },

        _relativeTime : {
            future : 'in %s',
            past : '%s ago',
            s : 'a few seconds',
            m : 'a minute',
            mm : '%d minutes',
            h : 'an hour',
            hh : '%d hours',
            d : 'a day',
            dd : '%d days',
            M : 'a month',
            MM : '%d months',
            y : 'a year',
            yy : '%d years'
        },

        relativeTime : function (number, withoutSuffix, string, isFuture) {
            var output = this._relativeTime[string];
            return (typeof output === 'function') ?
                output(number, withoutSuffix, string, isFuture) :
                output.replace(/%d/i, number);
        },

        pastFuture : function (diff, output) {
            var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
            return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);
        },

        ordinal : function (number) {
            return this._ordinal.replace('%d', number);
        },
        _ordinal : '%d',
        _ordinalParse : /\d{1,2}/,

        preparse : function (string) {
            return string;
        },

        postformat : function (string) {
            return string;
        },

        week : function (mom) {
            return weekOfYear(mom, this._week.dow, this._week.doy).week;
        },

        _week : {
            dow : 0, // Sunday is the first day of the week.
            doy : 6  // The week that contains Jan 1st is the first week of the year.
        },

        firstDayOfWeek : function () {
            return this._week.dow;
        },

        firstDayOfYear : function () {
            return this._week.doy;
        },

        _invalidDate: 'Invalid date',
        invalidDate: function () {
            return this._invalidDate;
        }
    });

    /************************************
        Formatting
    ************************************/


    function removeFormattingTokens(input) {
        if (input.match(/\[[\s\S]/)) {
            return input.replace(/^\[|\]$/g, '');
        }
        return input.replace(/\\/g, '');
    }

    function makeFormatFunction(format) {
        var array = format.match(formattingTokens), i, length;

        for (i = 0, length = array.length; i < length; i++) {
            if (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } else {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        return function (mom) {
            var output = '';
            for (i = 0; i < length; i++) {
                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];
            }
            return output;
        };
    }

    // format date using native date object
    function formatMoment(m, format) {
        if (!m.isValid()) {
            return m.localeData().invalidDate();
        }

        format = expandFormat(format, m.localeData());

        if (!formatFunctions[format]) {
            formatFunctions[format] = makeFormatFunction(format);
        }

        return formatFunctions[format](m);
    }

    function expandFormat(format, locale) {
        var i = 5;

        function replaceLongDateFormatTokens(input) {
            return locale.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = 0;
        while (i >= 0 && localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = 0;
            i -= 1;
        }

        return format;
    }


    /************************************
        Parsing
    ************************************/


    // get the regex to find the next token
    function getParseRegexForToken(token, config) {
        var a, strict = config._strict;
        switch (token) {
        case 'Q':
            return parseTokenOneDigit;
        case 'DDDD':
            return parseTokenThreeDigits;
        case 'YYYY':
        case 'GGGG':
        case 'gggg':
            return strict ? parseTokenFourDigits : parseTokenOneToFourDigits;
        case 'Y':
        case 'G':
        case 'g':
            return parseTokenSignedNumber;
        case 'YYYYYY':
        case 'YYYYY':
        case 'GGGGG':
        case 'ggggg':
            return strict ? parseTokenSixDigits : parseTokenOneToSixDigits;
        case 'S':
            if (strict) {
                return parseTokenOneDigit;
            }
            /* falls through */
        case 'SS':
            if (strict) {
                return parseTokenTwoDigits;
            }
            /* falls through */
        case 'SSS':
            if (strict) {
                return parseTokenThreeDigits;
            }
            /* falls through */
        case 'DDD':
            return parseTokenOneToThreeDigits;
        case 'MMM':
        case 'MMMM':
        case 'dd':
        case 'ddd':
        case 'dddd':
            return parseTokenWord;
        case 'a':
        case 'A':
            return config._locale._meridiemParse;
        case 'x':
            return parseTokenOffsetMs;
        case 'X':
            return parseTokenTimestampMs;
        case 'Z':
        case 'ZZ':
            return parseTokenTimezone;
        case 'T':
            return parseTokenT;
        case 'SSSS':
            return parseTokenDigits;
        case 'MM':
        case 'DD':
        case 'YY':
        case 'GG':
        case 'gg':
        case 'HH':
        case 'hh':
        case 'mm':
        case 'ss':
        case 'ww':
        case 'WW':
            return strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;
        case 'M':
        case 'D':
        case 'd':
        case 'H':
        case 'h':
        case 'm':
        case 's':
        case 'w':
        case 'W':
        case 'e':
        case 'E':
            return parseTokenOneOrTwoDigits;
        case 'Do':
            return strict ? config._locale._ordinalParse : config._locale._ordinalParseLenient;
        default :
            a = new RegExp(regexpEscape(unescapeFormat(token.replace('\\', '')), 'i'));
            return a;
        }
    }

    function utcOffsetFromString(string) {
        string = string || '';
        var possibleTzMatches = (string.match(parseTokenTimezone) || []),
            tzChunk = possibleTzMatches[possibleTzMatches.length - 1] || [],
            parts = (tzChunk + '').match(parseTimezoneChunker) || ['-', 0, 0],
            minutes = +(parts[1] * 60) + toInt(parts[2]);

        return parts[0] === '+' ? minutes : -minutes;
    }

    // function to convert string input to date
    function addTimeToArrayFromToken(token, input, config) {
        var a, datePartArray = config._a;

        switch (token) {
        // QUARTER
        case 'Q':
            if (input != null) {
                datePartArray[MONTH] = (toInt(input) - 1) * 3;
            }
            break;
        // MONTH
        case 'M' : // fall through to MM
        case 'MM' :
            if (input != null) {
                datePartArray[MONTH] = toInt(input) - 1;
            }
            break;
        case 'MMM' : // fall through to MMMM
        case 'MMMM' :
            a = config._locale.monthsParse(input, token, config._strict);
            // if we didn't find a month name, mark the date as invalid.
            if (a != null) {
                datePartArray[MONTH] = a;
            } else {
                config._pf.invalidMonth = input;
            }
            break;
        // DAY OF MONTH
        case 'D' : // fall through to DD
        case 'DD' :
            if (input != null) {
                datePartArray[DATE] = toInt(input);
            }
            break;
        case 'Do' :
            if (input != null) {
                datePartArray[DATE] = toInt(parseInt(
                            input.match(/\d{1,2}/)[0], 10));
            }
            break;
        // DAY OF YEAR
        case 'DDD' : // fall through to DDDD
        case 'DDDD' :
            if (input != null) {
                config._dayOfYear = toInt(input);
            }

            break;
        // YEAR
        case 'YY' :
            datePartArray[YEAR] = moment.parseTwoDigitYear(input);
            break;
        case 'YYYY' :
        case 'YYYYY' :
        case 'YYYYYY' :
            datePartArray[YEAR] = toInt(input);
            break;
        // AM / PM
        case 'a' : // fall through to A
        case 'A' :
            config._meridiem = input;
            // config._isPm = config._locale.isPM(input);
            break;
        // HOUR
        case 'h' : // fall through to hh
        case 'hh' :
            config._pf.bigHour = true;
            /* falls through */
        case 'H' : // fall through to HH
        case 'HH' :
            datePartArray[HOUR] = toInt(input);
            break;
        // MINUTE
        case 'm' : // fall through to mm
        case 'mm' :
            datePartArray[MINUTE] = toInt(input);
            break;
        // SECOND
        case 's' : // fall through to ss
        case 'ss' :
            datePartArray[SECOND] = toInt(input);
            break;
        // MILLISECOND
        case 'S' :
        case 'SS' :
        case 'SSS' :
        case 'SSSS' :
            datePartArray[MILLISECOND] = toInt(('0.' + input) * 1000);
            break;
        // UNIX OFFSET (MILLISECONDS)
        case 'x':
            config._d = new Date(toInt(input));
            break;
        // UNIX TIMESTAMP WITH MS
        case 'X':
            config._d = new Date(parseFloat(input) * 1000);
            break;
        // TIMEZONE
        case 'Z' : // fall through to ZZ
        case 'ZZ' :
            config._useUTC = true;
            config._tzm = utcOffsetFromString(input);
            break;
        // WEEKDAY - human
        case 'dd':
        case 'ddd':
        case 'dddd':
            a = config._locale.weekdaysParse(input);
            // if we didn't get a weekday name, mark the date as invalid
            if (a != null) {
                config._w = config._w || {};
                config._w['d'] = a;
            } else {
                config._pf.invalidWeekday = input;
            }
            break;
        // WEEK, WEEK DAY - numeric
        case 'w':
        case 'ww':
        case 'W':
        case 'WW':
        case 'd':
        case 'e':
        case 'E':
            token = token.substr(0, 1);
            /* falls through */
        case 'gggg':
        case 'GGGG':
        case 'GGGGG':
            token = token.substr(0, 2);
            if (input) {
                config._w = config._w || {};
                config._w[token] = toInt(input);
            }
            break;
        case 'gg':
        case 'GG':
            config._w = config._w || {};
            config._w[token] = moment.parseTwoDigitYear(input);
        }
    }

    function dayOfYearFromWeekInfo(config) {
        var w, weekYear, week, weekday, dow, doy, temp;

        w = config._w;
        if (w.GG != null || w.W != null || w.E != null) {
            dow = 1;
            doy = 4;

            // TODO: We need to take the current isoWeekYear, but that depends on
            // how we interpret now (local, utc, fixed offset). So create
            // a now version of current config (take local/utc/offset flags, and
            // create now).
            weekYear = dfl(w.GG, config._a[YEAR], weekOfYear(moment(), 1, 4).year);
            week = dfl(w.W, 1);
            weekday = dfl(w.E, 1);
        } else {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;

            weekYear = dfl(w.gg, config._a[YEAR], weekOfYear(moment(), dow, doy).year);
            week = dfl(w.w, 1);

            if (w.d != null) {
                // weekday -- low day numbers are considered next week
                weekday = w.d;
                if (weekday < dow) {
                    ++week;
                }
            } else if (w.e != null) {
                // local weekday -- counting starts from begining of week
                weekday = w.e + dow;
            } else {
                // default to begining of week
                weekday = dow;
            }
        }
        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);

        config._a[YEAR] = temp.year;
        config._dayOfYear = temp.dayOfYear;
    }

    // convert an array to a date.
    // the array should mirror the parameters below
    // note: all values past the year are optional and will default to the lowest possible value.
    // [year, month, day , hour, minute, second, millisecond]
    function dateFromConfig(config) {
        var i, date, input = [], currentDate, yearToUse;

        if (config._d) {
            return;
        }

        currentDate = currentDateArray(config);

        //compute day of the year from weeks and weekdays
        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
            dayOfYearFromWeekInfo(config);
        }

        //if the day of the year is set, figure out what it is
        if (config._dayOfYear) {
            yearToUse = dfl(config._a[YEAR], currentDate[YEAR]);

            if (config._dayOfYear > daysInYear(yearToUse)) {
                config._pf._overflowDayOfYear = true;
            }

            date = makeUTCDate(yearToUse, 0, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }

        // Default to current date.
        // * if no year, month, day of month are given, default to today
        // * if day of month is given, default month and year
        // * if month is given, default only year
        // * if year is given, don't default anything
        for (i = 0; i < 3 && config._a[i] == null; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }

        // Zero out whatever was not defaulted, including time
        for (; i < 7; i++) {
            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
        }

        // Check for 24:00:00.000
        if (config._a[HOUR] === 24 &&
                config._a[MINUTE] === 0 &&
                config._a[SECOND] === 0 &&
                config._a[MILLISECOND] === 0) {
            config._nextDay = true;
            config._a[HOUR] = 0;
        }

        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(null, input);
        // Apply timezone offset from input. The actual utcOffset can be changed
        // with parseZone.
        if (config._tzm != null) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
        }

        if (config._nextDay) {
            config._a[HOUR] = 24;
        }
    }

    function dateFromObject(config) {
        var normalizedInput;

        if (config._d) {
            return;
        }

        normalizedInput = normalizeObjectUnits(config._i);
        config._a = [
            normalizedInput.year,
            normalizedInput.month,
            normalizedInput.day || normalizedInput.date,
            normalizedInput.hour,
            normalizedInput.minute,
            normalizedInput.second,
            normalizedInput.millisecond
        ];

        dateFromConfig(config);
    }

    function currentDateArray(config) {
        var now = new Date();
        if (config._useUTC) {
            return [
                now.getUTCFullYear(),
                now.getUTCMonth(),
                now.getUTCDate()
            ];
        } else {
            return [now.getFullYear(), now.getMonth(), now.getDate()];
        }
    }

    // date from string and format string
    function makeDateFromStringAndFormat(config) {
        if (config._f === moment.ISO_8601) {
            parseISO(config);
            return;
        }

        config._a = [];
        config._pf.empty = true;

        // This array is used to make a Date, either with `new Date` or `Date.UTC`
        var string = '' + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = 0;

        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

        for (i = 0; i < tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
            if (parsedInput) {
                skipped = string.substr(0, string.indexOf(parsedInput));
                if (skipped.length > 0) {
                    config._pf.unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }
            // don't parse if it's not a known token
            if (formatTokenFunctions[token]) {
                if (parsedInput) {
                    config._pf.empty = false;
                }
                else {
                    config._pf.unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            }
            else if (config._strict && !parsedInput) {
                config._pf.unusedTokens.push(token);
            }
        }

        // add remaining unparsed input length to the string
        config._pf.charsLeftOver = stringLength - totalParsedInputLength;
        if (string.length > 0) {
            config._pf.unusedInput.push(string);
        }

        // clear _12h flag if hour is <= 12
        if (config._pf.bigHour === true && config._a[HOUR] <= 12) {
            config._pf.bigHour = undefined;
        }
        // handle meridiem
        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR],
                config._meridiem);
        dateFromConfig(config);
        checkOverflow(config);
    }

    function unescapeFormat(s) {
        return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
            return p1 || p2 || p3 || p4;
        });
    }

    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
    function regexpEscape(s) {
        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    // date from string and array of format strings
    function makeDateFromStringAndArray(config) {
        var tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        if (config._f.length === 0) {
            config._pf.invalidFormat = true;
            config._d = new Date(NaN);
            return;
        }

        for (i = 0; i < config._f.length; i++) {
            currentScore = 0;
            tempConfig = copyConfig({}, config);
            if (config._useUTC != null) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._pf = defaultParsingFlags();
            tempConfig._f = config._f[i];
            makeDateFromStringAndFormat(tempConfig);

            if (!isValid(tempConfig)) {
                continue;
            }

            // if there is any input that was not parsed add a penalty for that format
            currentScore += tempConfig._pf.charsLeftOver;

            //or tokens
            currentScore += tempConfig._pf.unusedTokens.length * 10;

            tempConfig._pf.score = currentScore;

            if (scoreToBeat == null || currentScore < scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }

    // date from iso format
    function parseISO(config) {
        var i, l,
            string = config._i,
            match = isoRegex.exec(string);

        if (match) {
            config._pf.iso = true;
            for (i = 0, l = isoDates.length; i < l; i++) {
                if (isoDates[i][1].exec(string)) {
                    // match[5] should be 'T' or undefined
                    config._f = isoDates[i][0] + (match[6] || ' ');
                    break;
                }
            }
            for (i = 0, l = isoTimes.length; i < l; i++) {
                if (isoTimes[i][1].exec(string)) {
                    config._f += isoTimes[i][0];
                    break;
                }
            }
            if (string.match(parseTokenTimezone)) {
                config._f += 'Z';
            }
            makeDateFromStringAndFormat(config);
        } else {
            config._isValid = false;
        }
    }

    // date from iso format or fallback
    function makeDateFromString(config) {
        parseISO(config);
        if (config._isValid === false) {
            delete config._isValid;
            moment.createFromInputFallback(config);
        }
    }

    function map(arr, fn) {
        var res = [], i;
        for (i = 0; i < arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        return res;
    }

    function makeDateFromInput(config) {
        var input = config._i, matched;
        if (input === undefined) {
            config._d = new Date();
        } else if (isDate(input)) {
            config._d = new Date(+input);
        } else if ((matched = aspNetJsonRegex.exec(input)) !== null) {
            config._d = new Date(+matched[1]);
        } else if (typeof input === 'string') {
            makeDateFromString(config);
        } else if (isArray(input)) {
            config._a = map(input.slice(0), function (obj) {
                return parseInt(obj, 10);
            });
            dateFromConfig(config);
        } else if (typeof(input) === 'object') {
            dateFromObject(config);
        } else if (typeof(input) === 'number') {
            // from milliseconds
            config._d = new Date(input);
        } else {
            moment.createFromInputFallback(config);
        }
    }

    function makeDate(y, m, d, h, M, s, ms) {
        //can't just apply() to create a date:
        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply
        var date = new Date(y, m, d, h, M, s, ms);

        //the date constructor doesn't accept years < 1970
        if (y < 1970) {
            date.setFullYear(y);
        }
        return date;
    }

    function makeUTCDate(y) {
        var date = new Date(Date.UTC.apply(null, arguments));
        if (y < 1970) {
            date.setUTCFullYear(y);
        }
        return date;
    }

    function parseWeekday(input, locale) {
        if (typeof input === 'string') {
            if (!isNaN(input)) {
                input = parseInt(input, 10);
            }
            else {
                input = locale.weekdaysParse(input);
                if (typeof input !== 'number') {
                    return null;
                }
            }
        }
        return input;
    }

    /************************************
        Relative Time
    ************************************/


    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
    }

    function relativeTime(posNegDuration, withoutSuffix, locale) {
        var duration = moment.duration(posNegDuration).abs(),
            seconds = round(duration.as('s')),
            minutes = round(duration.as('m')),
            hours = round(duration.as('h')),
            days = round(duration.as('d')),
            months = round(duration.as('M')),
            years = round(duration.as('y')),

            args = seconds < relativeTimeThresholds.s && ['s', seconds] ||
                minutes === 1 && ['m'] ||
                minutes < relativeTimeThresholds.m && ['mm', minutes] ||
                hours === 1 && ['h'] ||
                hours < relativeTimeThresholds.h && ['hh', hours] ||
                days === 1 && ['d'] ||
                days < relativeTimeThresholds.d && ['dd', days] ||
                months === 1 && ['M'] ||
                months < relativeTimeThresholds.M && ['MM', months] ||
                years === 1 && ['y'] || ['yy', years];

        args[2] = withoutSuffix;
        args[3] = +posNegDuration > 0;
        args[4] = locale;
        return substituteTimeAgo.apply({}, args);
    }


    /************************************
        Week of Year
    ************************************/


    // firstDayOfWeek       0 = sun, 6 = sat
    //                      the day of the week that starts the week
    //                      (usually sunday or monday)
    // firstDayOfWeekOfYear 0 = sun, 6 = sat
    //                      the first week is the week that contains the first
    //                      of this day of the week
    //                      (eg. ISO weeks use thursday (4))
    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {
        var end = firstDayOfWeekOfYear - firstDayOfWeek,
            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),
            adjustedMoment;


        if (daysToDayOfWeek > end) {
            daysToDayOfWeek -= 7;
        }

        if (daysToDayOfWeek < end - 7) {
            daysToDayOfWeek += 7;
        }

        adjustedMoment = moment(mom).add(daysToDayOfWeek, 'd');
        return {
            week: Math.ceil(adjustedMoment.dayOfYear() / 7),
            year: adjustedMoment.year()
        };
    }

    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {
        var d = makeUTCDate(year, 0, 1).getUTCDay(), daysToAdd, dayOfYear;

        d = d === 0 ? 7 : d;
        weekday = weekday != null ? weekday : firstDayOfWeek;
        daysToAdd = firstDayOfWeek - d + (d > firstDayOfWeekOfYear ? 7 : 0) - (d < firstDayOfWeek ? 7 : 0);
        dayOfYear = 7 * (week - 1) + (weekday - firstDayOfWeek) + daysToAdd + 1;

        return {
            year: dayOfYear > 0 ? year : year - 1,
            dayOfYear: dayOfYear > 0 ?  dayOfYear : daysInYear(year - 1) + dayOfYear
        };
    }

    /************************************
        Top Level Functions
    ************************************/

    function makeMoment(config) {
        var input = config._i,
            format = config._f,
            res;

        config._locale = config._locale || moment.localeData(config._l);

        if (input === null || (format === undefined && input === '')) {
            return moment.invalid({nullInput: true});
        }

        if (typeof input === 'string') {
            config._i = input = config._locale.preparse(input);
        }

        if (moment.isMoment(input)) {
            return new Moment(input, true);
        } else if (format) {
            if (isArray(format)) {
                makeDateFromStringAndArray(config);
            } else {
                makeDateFromStringAndFormat(config);
            }
        } else {
            makeDateFromInput(config);
        }

        res = new Moment(config);
        if (res._nextDay) {
            // Adding is smart enough around DST
            res.add(1, 'd');
            res._nextDay = undefined;
        }

        return res;
    }

    moment = function (input, format, locale, strict) {
        var c;

        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c = {};
        c._isAMomentObject = true;
        c._i = input;
        c._f = format;
        c._l = locale;
        c._strict = strict;
        c._isUTC = false;
        c._pf = defaultParsingFlags();

        return makeMoment(c);
    };

    moment.suppressDeprecationWarnings = false;

    moment.createFromInputFallback = deprecate(
        'moment construction falls back to js Date. This is ' +
        'discouraged and will be removed in upcoming major ' +
        'release. Please refer to ' +
        'https://github.com/moment/moment/issues/1407 for more info.',
        function (config) {
            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
        }
    );

    // Pick a moment m from moments so that m[fn](other) is true for all
    // other. This relies on the function fn to be transitive.
    //
    // moments should either be an array of moment objects or an array, whose
    // first element is an array of moment objects.
    function pickBy(fn, moments) {
        var res, i;
        if (moments.length === 1 && isArray(moments[0])) {
            moments = moments[0];
        }
        if (!moments.length) {
            return moment();
        }
        res = moments[0];
        for (i = 1; i < moments.length; ++i) {
            if (moments[i][fn](res)) {
                res = moments[i];
            }
        }
        return res;
    }

    moment.min = function () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isBefore', args);
    };

    moment.max = function () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isAfter', args);
    };

    // creating with utc
    moment.utc = function (input, format, locale, strict) {
        var c;

        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c = {};
        c._isAMomentObject = true;
        c._useUTC = true;
        c._isUTC = true;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;
        c._pf = defaultParsingFlags();

        return makeMoment(c).utc();
    };

    // creating with unix timestamp (in seconds)
    moment.unix = function (input) {
        return moment(input * 1000);
    };

    // duration
    moment.duration = function (input, key) {
        var duration = input,
            // matching against regexp is expensive, do it on demand
            match = null,
            sign,
            ret,
            parseIso,
            diffRes;

        if (moment.isDuration(input)) {
            duration = {
                ms: input._milliseconds,
                d: input._days,
                M: input._months
            };
        } else if (typeof input === 'number') {
            duration = {};
            if (key) {
                duration[key] = input;
            } else {
                duration.milliseconds = input;
            }
        } else if (!!(match = aspNetTimeSpanJsonRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y: 0,
                d: toInt(match[DATE]) * sign,
                h: toInt(match[HOUR]) * sign,
                m: toInt(match[MINUTE]) * sign,
                s: toInt(match[SECOND]) * sign,
                ms: toInt(match[MILLISECOND]) * sign
            };
        } else if (!!(match = isoDurationRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            parseIso = function (inp) {
                // We'd normally use ~~inp for this, but unfortunately it also
                // converts floats to ints.
                // inp may be undefined, so careful calling replace on it.
                var res = inp && parseFloat(inp.replace(',', '.'));
                // apply sign while we're at it
                return (isNaN(res) ? 0 : res) * sign;
            };
            duration = {
                y: parseIso(match[2]),
                M: parseIso(match[3]),
                d: parseIso(match[4]),
                h: parseIso(match[5]),
                m: parseIso(match[6]),
                s: parseIso(match[7]),
                w: parseIso(match[8])
            };
        } else if (duration == null) {// checks for null or undefined
            duration = {};
        } else if (typeof duration === 'object' &&
                ('from' in duration || 'to' in duration)) {
            diffRes = momentsDifference(moment(duration.from), moment(duration.to));

            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }

        ret = new Duration(duration);

        if (moment.isDuration(input) && hasOwnProp(input, '_locale')) {
            ret._locale = input._locale;
        }

        return ret;
    };

    // version number
    moment.version = VERSION;

    // default format
    moment.defaultFormat = isoFormat;

    // constant that refers to the ISO standard
    moment.ISO_8601 = function () {};

    // Plugins that add properties should also add the key here (null value),
    // so we can properly clone ourselves.
    moment.momentProperties = momentProperties;

    // This function will be called whenever a moment is mutated.
    // It is intended to keep the offset in sync with the timezone.
    moment.updateOffset = function () {};

    // This function allows you to set a threshold for relative time strings
    moment.relativeTimeThreshold = function (threshold, limit) {
        if (relativeTimeThresholds[threshold] === undefined) {
            return false;
        }
        if (limit === undefined) {
            return relativeTimeThresholds[threshold];
        }
        relativeTimeThresholds[threshold] = limit;
        return true;
    };

    moment.lang = deprecate(
        'moment.lang is deprecated. Use moment.locale instead.',
        function (key, value) {
            return moment.locale(key, value);
        }
    );

    // This function will load locale and then set the global locale.  If
    // no arguments are passed in, it will simply return the current global
    // locale key.
    moment.locale = function (key, values) {
        var data;
        if (key) {
            if (typeof(values) !== 'undefined') {
                data = moment.defineLocale(key, values);
            }
            else {
                data = moment.localeData(key);
            }

            if (data) {
                moment.duration._locale = moment._locale = data;
            }
        }

        return moment._locale._abbr;
    };

    moment.defineLocale = function (name, values) {
        if (values !== null) {
            values.abbr = name;
            if (!locales[name]) {
                locales[name] = new Locale();
            }
            locales[name].set(values);

            // backwards compat for now: also set the locale
            moment.locale(name);

            return locales[name];
        } else {
            // useful for testing
            delete locales[name];
            return null;
        }
    };

    moment.langData = deprecate(
        'moment.langData is deprecated. Use moment.localeData instead.',
        function (key) {
            return moment.localeData(key);
        }
    );

    // returns locale data
    moment.localeData = function (key) {
        var locale;

        if (key && key._locale && key._locale._abbr) {
            key = key._locale._abbr;
        }

        if (!key) {
            return moment._locale;
        }

        if (!isArray(key)) {
            //short-circuit everything else
            locale = loadLocale(key);
            if (locale) {
                return locale;
            }
            key = [key];
        }

        return chooseLocale(key);
    };

    // compare moment object
    moment.isMoment = function (obj) {
        return obj instanceof Moment ||
            (obj != null && hasOwnProp(obj, '_isAMomentObject'));
    };

    // for typechecking Duration objects
    moment.isDuration = function (obj) {
        return obj instanceof Duration;
    };

    for (i = lists.length - 1; i >= 0; --i) {
        makeList(lists[i]);
    }

    moment.normalizeUnits = function (units) {
        return normalizeUnits(units);
    };

    moment.invalid = function (flags) {
        var m = moment.utc(NaN);
        if (flags != null) {
            extend(m._pf, flags);
        }
        else {
            m._pf.userInvalidated = true;
        }

        return m;
    };

    moment.parseZone = function () {
        return moment.apply(null, arguments).parseZone();
    };

    moment.parseTwoDigitYear = function (input) {
        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
    };

    moment.isDate = isDate;

    /************************************
        Moment Prototype
    ************************************/


    extend(moment.fn = Moment.prototype, {

        clone : function () {
            return moment(this);
        },

        valueOf : function () {
            return +this._d - ((this._offset || 0) * 60000);
        },

        unix : function () {
            return Math.floor(+this / 1000);
        },

        toString : function () {
            return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
        },

        toDate : function () {
            return this._offset ? new Date(+this) : this._d;
        },

        toISOString : function () {
            var m = moment(this).utc();
            if (0 < m.year() && m.year() <= 9999) {
                if ('function' === typeof Date.prototype.toISOString) {
                    // native implementation is ~50x faster, use it when we can
                    return this.toDate().toISOString();
                } else {
                    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
                }
            } else {
                return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
            }
        },

        toArray : function () {
            var m = this;
            return [
                m.year(),
                m.month(),
                m.date(),
                m.hours(),
                m.minutes(),
                m.seconds(),
                m.milliseconds()
            ];
        },

        isValid : function () {
            return isValid(this);
        },

        isDSTShifted : function () {
            if (this._a) {
                return this.isValid() && compareArrays(this._a, (this._isUTC ? moment.utc(this._a) : moment(this._a)).toArray()) > 0;
            }

            return false;
        },

        parsingFlags : function () {
            return extend({}, this._pf);
        },

        invalidAt: function () {
            return this._pf.overflow;
        },

        utc : function (keepLocalTime) {
            return this.utcOffset(0, keepLocalTime);
        },

        local : function (keepLocalTime) {
            if (this._isUTC) {
                this.utcOffset(0, keepLocalTime);
                this._isUTC = false;

                if (keepLocalTime) {
                    this.subtract(this._dateUtcOffset(), 'm');
                }
            }
            return this;
        },

        format : function (inputString) {
            var output = formatMoment(this, inputString || moment.defaultFormat);
            return this.localeData().postformat(output);
        },

        add : createAdder(1, 'add'),

        subtract : createAdder(-1, 'subtract'),

        diff : function (input, units, asFloat) {
            var that = makeAs(input, this),
                zoneDiff = (that.utcOffset() - this.utcOffset()) * 6e4,
                anchor, diff, output, daysAdjust;

            units = normalizeUnits(units);

            if (units === 'year' || units === 'month' || units === 'quarter') {
                output = monthDiff(this, that);
                if (units === 'quarter') {
                    output = output / 3;
                } else if (units === 'year') {
                    output = output / 12;
                }
            } else {
                diff = this - that;
                output = units === 'second' ? diff / 1e3 : // 1000
                    units === 'minute' ? diff / 6e4 : // 1000 * 60
                    units === 'hour' ? diff / 36e5 : // 1000 * 60 * 60
                    units === 'day' ? (diff - zoneDiff) / 864e5 : // 1000 * 60 * 60 * 24, negate dst
                    units === 'week' ? (diff - zoneDiff) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst
                    diff;
            }
            return asFloat ? output : absRound(output);
        },

        from : function (time, withoutSuffix) {
            return moment.duration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);
        },

        fromNow : function (withoutSuffix) {
            return this.from(moment(), withoutSuffix);
        },

        calendar : function (time) {
            // We want to compare the start of today, vs this.
            // Getting start-of-today depends on whether we're locat/utc/offset
            // or not.
            var now = time || moment(),
                sod = makeAs(now, this).startOf('day'),
                diff = this.diff(sod, 'days', true),
                format = diff < -6 ? 'sameElse' :
                    diff < -1 ? 'lastWeek' :
                    diff < 0 ? 'lastDay' :
                    diff < 1 ? 'sameDay' :
                    diff < 2 ? 'nextDay' :
                    diff < 7 ? 'nextWeek' : 'sameElse';
            return this.format(this.localeData().calendar(format, this, moment(now)));
        },

        isLeapYear : function () {
            return isLeapYear(this.year());
        },

        isDST : function () {
            return (this.utcOffset() > this.clone().month(0).utcOffset() ||
                this.utcOffset() > this.clone().month(5).utcOffset());
        },

        day : function (input) {
            var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
            if (input != null) {
                input = parseWeekday(input, this.localeData());
                return this.add(input - day, 'd');
            } else {
                return day;
            }
        },

        month : makeAccessor('Month', true),

        startOf : function (units) {
            units = normalizeUnits(units);
            // the following switch intentionally omits break keywords
            // to utilize falling through the cases.
            switch (units) {
            case 'year':
                this.month(0);
                /* falls through */
            case 'quarter':
            case 'month':
                this.date(1);
                /* falls through */
            case 'week':
            case 'isoWeek':
            case 'day':
                this.hours(0);
                /* falls through */
            case 'hour':
                this.minutes(0);
                /* falls through */
            case 'minute':
                this.seconds(0);
                /* falls through */
            case 'second':
                this.milliseconds(0);
                /* falls through */
            }

            // weeks are a special case
            if (units === 'week') {
                this.weekday(0);
            } else if (units === 'isoWeek') {
                this.isoWeekday(1);
            }

            // quarters are also special
            if (units === 'quarter') {
                this.month(Math.floor(this.month() / 3) * 3);
            }

            return this;
        },

        endOf: function (units) {
            units = normalizeUnits(units);
            if (units === undefined || units === 'millisecond') {
                return this;
            }
            return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');
        },

        isAfter: function (input, units) {
            var inputMs;
            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');
            if (units === 'millisecond') {
                input = moment.isMoment(input) ? input : moment(input);
                return +this > +input;
            } else {
                inputMs = moment.isMoment(input) ? +input : +moment(input);
                return inputMs < +this.clone().startOf(units);
            }
        },

        isBefore: function (input, units) {
            var inputMs;
            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');
            if (units === 'millisecond') {
                input = moment.isMoment(input) ? input : moment(input);
                return +this < +input;
            } else {
                inputMs = moment.isMoment(input) ? +input : +moment(input);
                return +this.clone().endOf(units) < inputMs;
            }
        },

        isBetween: function (from, to, units) {
            return this.isAfter(from, units) && this.isBefore(to, units);
        },

        isSame: function (input, units) {
            var inputMs;
            units = normalizeUnits(units || 'millisecond');
            if (units === 'millisecond') {
                input = moment.isMoment(input) ? input : moment(input);
                return +this === +input;
            } else {
                inputMs = +moment(input);
                return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));
            }
        },

        min: deprecate(
                 'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',
                 function (other) {
                     other = moment.apply(null, arguments);
                     return other < this ? this : other;
                 }
         ),

        max: deprecate(
                'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',
                function (other) {
                    other = moment.apply(null, arguments);
                    return other > this ? this : other;
                }
        ),

        zone : deprecate(
                'moment().zone is deprecated, use moment().utcOffset instead. ' +
                'https://github.com/moment/moment/issues/1779',
                function (input, keepLocalTime) {
                    if (input != null) {
                        if (typeof input !== 'string') {
                            input = -input;
                        }

                        this.utcOffset(input, keepLocalTime);

                        return this;
                    } else {
                        return -this.utcOffset();
                    }
                }
        ),

        // keepLocalTime = true means only change the timezone, without
        // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
        // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
        // +0200, so we adjust the time as needed, to be valid.
        //
        // Keeping the time actually adds/subtracts (one hour)
        // from the actual represented time. That is why we call updateOffset
        // a second time. In case it wants us to change the offset again
        // _changeInProgress == true case, then we have to adjust, because
        // there is no such time in the given timezone.
        utcOffset : function (input, keepLocalTime) {
            var offset = this._offset || 0,
                localAdjust;
            if (input != null) {
                if (typeof input === 'string') {
                    input = utcOffsetFromString(input);
                }
                if (Math.abs(input) < 16) {
                    input = input * 60;
                }
                if (!this._isUTC && keepLocalTime) {
                    localAdjust = this._dateUtcOffset();
                }
                this._offset = input;
                this._isUTC = true;
                if (localAdjust != null) {
                    this.add(localAdjust, 'm');
                }
                if (offset !== input) {
                    if (!keepLocalTime || this._changeInProgress) {
                        addOrSubtractDurationFromMoment(this,
                                moment.duration(input - offset, 'm'), 1, false);
                    } else if (!this._changeInProgress) {
                        this._changeInProgress = true;
                        moment.updateOffset(this, true);
                        this._changeInProgress = null;
                    }
                }

                return this;
            } else {
                return this._isUTC ? offset : this._dateUtcOffset();
            }
        },

        isLocal : function () {
            return !this._isUTC;
        },

        isUtcOffset : function () {
            return this._isUTC;
        },

        isUtc : function () {
            return this._isUTC && this._offset === 0;
        },

        zoneAbbr : function () {
            return this._isUTC ? 'UTC' : '';
        },

        zoneName : function () {
            return this._isUTC ? 'Coordinated Universal Time' : '';
        },

        parseZone : function () {
            if (this._tzm) {
                this.utcOffset(this._tzm);
            } else if (typeof this._i === 'string') {
                this.utcOffset(utcOffsetFromString(this._i));
            }
            return this;
        },

        hasAlignedHourOffset : function (input) {
            if (!input) {
                input = 0;
            }
            else {
                input = moment(input).utcOffset();
            }

            return (this.utcOffset() - input) % 60 === 0;
        },

        daysInMonth : function () {
            return daysInMonth(this.year(), this.month());
        },

        dayOfYear : function (input) {
            var dayOfYear = round((moment(this).startOf('day') - moment(this).startOf('year')) / 864e5) + 1;
            return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
        },

        quarter : function (input) {
            return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
        },

        weekYear : function (input) {
            var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
            return input == null ? year : this.add((input - year), 'y');
        },

        isoWeekYear : function (input) {
            var year = weekOfYear(this, 1, 4).year;
            return input == null ? year : this.add((input - year), 'y');
        },

        week : function (input) {
            var week = this.localeData().week(this);
            return input == null ? week : this.add((input - week) * 7, 'd');
        },

        isoWeek : function (input) {
            var week = weekOfYear(this, 1, 4).week;
            return input == null ? week : this.add((input - week) * 7, 'd');
        },

        weekday : function (input) {
            var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
            return input == null ? weekday : this.add(input - weekday, 'd');
        },

        isoWeekday : function (input) {
            // behaves the same as moment#day except
            // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
            // as a setter, sunday should belong to the previous week.
            return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);
        },

        isoWeeksInYear : function () {
            return weeksInYear(this.year(), 1, 4);
        },

        weeksInYear : function () {
            var weekInfo = this.localeData()._week;
            return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
        },

        get : function (units) {
            units = normalizeUnits(units);
            return this[units]();
        },

        set : function (units, value) {
            var unit;
            if (typeof units === 'object') {
                for (unit in units) {
                    this.set(unit, units[unit]);
                }
            }
            else {
                units = normalizeUnits(units);
                if (typeof this[units] === 'function') {
                    this[units](value);
                }
            }
            return this;
        },

        // If passed a locale key, it will set the locale for this
        // instance.  Otherwise, it will return the locale configuration
        // variables for this instance.
        locale : function (key) {
            var newLocaleData;

            if (key === undefined) {
                return this._locale._abbr;
            } else {
                newLocaleData = moment.localeData(key);
                if (newLocaleData != null) {
                    this._locale = newLocaleData;
                }
                return this;
            }
        },

        lang : deprecate(
            'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
            function (key) {
                if (key === undefined) {
                    return this.localeData();
                } else {
                    return this.locale(key);
                }
            }
        ),

        localeData : function () {
            return this._locale;
        },

        _dateUtcOffset : function () {
            // On Firefox.24 Date#getTimezoneOffset returns a floating point.
            // https://github.com/moment/moment/pull/1871
            return -Math.round(this._d.getTimezoneOffset() / 15) * 15;
        }

    });

    function rawMonthSetter(mom, value) {
        var dayOfMonth;

        // TODO: Move this out of here!
        if (typeof value === 'string') {
            value = mom.localeData().monthsParse(value);
            // TODO: Another silent failure?
            if (typeof value !== 'number') {
                return mom;
            }
        }

        dayOfMonth = Math.min(mom.date(),
                daysInMonth(mom.year(), value));
        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
        return mom;
    }

    function rawGetter(mom, unit) {
        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();
    }

    function rawSetter(mom, unit, value) {
        if (unit === 'Month') {
            return rawMonthSetter(mom, value);
        } else {
            return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
        }
    }

    function makeAccessor(unit, keepTime) {
        return function (value) {
            if (value != null) {
                rawSetter(this, unit, value);
                moment.updateOffset(this, keepTime);
                return this;
            } else {
                return rawGetter(this, unit);
            }
        };
    }

    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor('Milliseconds', false);
    moment.fn.second = moment.fn.seconds = makeAccessor('Seconds', false);
    moment.fn.minute = moment.fn.minutes = makeAccessor('Minutes', false);
    // Setting the hour should keep the time, because the user explicitly
    // specified which hour he wants. So trying to maintain the same hour (in
    // a new timezone) makes sense. Adding/subtracting hours does not follow
    // this rule.
    moment.fn.hour = moment.fn.hours = makeAccessor('Hours', true);
    // moment.fn.month is defined separately
    moment.fn.date = makeAccessor('Date', true);
    moment.fn.dates = deprecate('dates accessor is deprecated. Use date instead.', makeAccessor('Date', true));
    moment.fn.year = makeAccessor('FullYear', true);
    moment.fn.years = deprecate('years accessor is deprecated. Use year instead.', makeAccessor('FullYear', true));

    // add plural methods
    moment.fn.days = moment.fn.day;
    moment.fn.months = moment.fn.month;
    moment.fn.weeks = moment.fn.week;
    moment.fn.isoWeeks = moment.fn.isoWeek;
    moment.fn.quarters = moment.fn.quarter;

    // add aliased format methods
    moment.fn.toJSON = moment.fn.toISOString;

    // alias isUtc for dev-friendliness
    moment.fn.isUTC = moment.fn.isUtc;

    /************************************
        Duration Prototype
    ************************************/


    function daysToYears (days) {
        // 400 years have 146097 days (taking into account leap year rules)
        return days * 400 / 146097;
    }

    function yearsToDays (years) {
        // years * 365 + absRound(years / 4) -
        //     absRound(years / 100) + absRound(years / 400);
        return years * 146097 / 400;
    }

    extend(moment.duration.fn = Duration.prototype, {

        _bubble : function () {
            var milliseconds = this._milliseconds,
                days = this._days,
                months = this._months,
                data = this._data,
                seconds, minutes, hours, years = 0;

            // The following code bubbles up values, see the tests for
            // examples of what that means.
            data.milliseconds = milliseconds % 1000;

            seconds = absRound(milliseconds / 1000);
            data.seconds = seconds % 60;

            minutes = absRound(seconds / 60);
            data.minutes = minutes % 60;

            hours = absRound(minutes / 60);
            data.hours = hours % 24;

            days += absRound(hours / 24);

            // Accurately convert days to years, assume start from year 0.
            years = absRound(daysToYears(days));
            days -= absRound(yearsToDays(years));

            // 30 days to a month
            // TODO (iskren): Use anchor date (like 1st Jan) to compute this.
            months += absRound(days / 30);
            days %= 30;

            // 12 months -> 1 year
            years += absRound(months / 12);
            months %= 12;

            data.days = days;
            data.months = months;
            data.years = years;
        },

        abs : function () {
            this._milliseconds = Math.abs(this._milliseconds);
            this._days = Math.abs(this._days);
            this._months = Math.abs(this._months);

            this._data.milliseconds = Math.abs(this._data.milliseconds);
            this._data.seconds = Math.abs(this._data.seconds);
            this._data.minutes = Math.abs(this._data.minutes);
            this._data.hours = Math.abs(this._data.hours);
            this._data.months = Math.abs(this._data.months);
            this._data.years = Math.abs(this._data.years);

            return this;
        },

        weeks : function () {
            return absRound(this.days() / 7);
        },

        valueOf : function () {
            return this._milliseconds +
              this._days * 864e5 +
              (this._months % 12) * 2592e6 +
              toInt(this._months / 12) * 31536e6;
        },

        humanize : function (withSuffix) {
            var output = relativeTime(this, !withSuffix, this.localeData());

            if (withSuffix) {
                output = this.localeData().pastFuture(+this, output);
            }

            return this.localeData().postformat(output);
        },

        add : function (input, val) {
            // supports only 2.0-style add(1, 's') or add(moment)
            var dur = moment.duration(input, val);

            this._milliseconds += dur._milliseconds;
            this._days += dur._days;
            this._months += dur._months;

            this._bubble();

            return this;
        },

        subtract : function (input, val) {
            var dur = moment.duration(input, val);

            this._milliseconds -= dur._milliseconds;
            this._days -= dur._days;
            this._months -= dur._months;

            this._bubble();

            return this;
        },

        get : function (units) {
            units = normalizeUnits(units);
            return this[units.toLowerCase() + 's']();
        },

        as : function (units) {
            var days, months;
            units = normalizeUnits(units);

            if (units === 'month' || units === 'year') {
                days = this._days + this._milliseconds / 864e5;
                months = this._months + daysToYears(days) * 12;
                return units === 'month' ? months : months / 12;
            } else {
                // handle milliseconds separately because of floating point math errors (issue #1867)
                days = this._days + Math.round(yearsToDays(this._months / 12));
                switch (units) {
                    case 'week': return days / 7 + this._milliseconds / 6048e5;
                    case 'day': return days + this._milliseconds / 864e5;
                    case 'hour': return days * 24 + this._milliseconds / 36e5;
                    case 'minute': return days * 24 * 60 + this._milliseconds / 6e4;
                    case 'second': return days * 24 * 60 * 60 + this._milliseconds / 1000;
                    // Math.floor prevents floating point math errors here
                    case 'millisecond': return Math.floor(days * 24 * 60 * 60 * 1000) + this._milliseconds;
                    default: throw new Error('Unknown unit ' + units);
                }
            }
        },

        lang : moment.fn.lang,
        locale : moment.fn.locale,

        toIsoString : deprecate(
            'toIsoString() is deprecated. Please use toISOString() instead ' +
            '(notice the capitals)',
            function () {
                return this.toISOString();
            }
        ),

        toISOString : function () {
            // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
            var years = Math.abs(this.years()),
                months = Math.abs(this.months()),
                days = Math.abs(this.days()),
                hours = Math.abs(this.hours()),
                minutes = Math.abs(this.minutes()),
                seconds = Math.abs(this.seconds() + this.milliseconds() / 1000);

            if (!this.asSeconds()) {
                // this is the same as C#'s (Noda) and python (isodate)...
                // but not other JS (goog.date)
                return 'P0D';
            }

            return (this.asSeconds() < 0 ? '-' : '') +
                'P' +
                (years ? years + 'Y' : '') +
                (months ? months + 'M' : '') +
                (days ? days + 'D' : '') +
                ((hours || minutes || seconds) ? 'T' : '') +
                (hours ? hours + 'H' : '') +
                (minutes ? minutes + 'M' : '') +
                (seconds ? seconds + 'S' : '');
        },

        localeData : function () {
            return this._locale;
        },

        toJSON : function () {
            return this.toISOString();
        }
    });

    moment.duration.fn.toString = moment.duration.fn.toISOString;

    function makeDurationGetter(name) {
        moment.duration.fn[name] = function () {
            return this._data[name];
        };
    }

    for (i in unitMillisecondFactors) {
        if (hasOwnProp(unitMillisecondFactors, i)) {
            makeDurationGetter(i.toLowerCase());
        }
    }

    moment.duration.fn.asMilliseconds = function () {
        return this.as('ms');
    };
    moment.duration.fn.asSeconds = function () {
        return this.as('s');
    };
    moment.duration.fn.asMinutes = function () {
        return this.as('m');
    };
    moment.duration.fn.asHours = function () {
        return this.as('h');
    };
    moment.duration.fn.asDays = function () {
        return this.as('d');
    };
    moment.duration.fn.asWeeks = function () {
        return this.as('weeks');
    };
    moment.duration.fn.asMonths = function () {
        return this.as('M');
    };
    moment.duration.fn.asYears = function () {
        return this.as('y');
    };

    /************************************
        Default Locale
    ************************************/


    // Set default locale, other locale will inherit from English.
    moment.locale('en', {
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (toInt(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });

    /* EMBED_LOCALES */

    /************************************
        Exposing Moment
    ************************************/

    function makeGlobal(shouldDeprecate) {
        /*global ender:false */
        if (typeof ender !== 'undefined') {
            return;
        }
        oldGlobalMoment = globalScope.moment;
        if (shouldDeprecate) {
            globalScope.moment = deprecate(
                    'Accessing Moment through the global scope is ' +
                    'deprecated, and will be removed in an upcoming ' +
                    'release.',
                    moment);
        } else {
            globalScope.moment = moment;
        }
    }

    // CommonJS module is defined
    if (hasModule) {
        module.exports = moment;
    } else if (typeof define === 'function' && define.amd) {
        define(function (require, exports, module) {
            if (module.config && module.config() && module.config().noGlobal === true) {
                // release the global variable
                globalScope.moment = oldGlobalMoment;
            }

            return moment;
        });
        makeGlobal(true);
    } else {
        makeGlobal();
    }
}).call(this);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:moment-js', location = '/bower/moment-timezone/moment-timezone-with-data-1970-2030.js' */
//! moment-timezone.js
//! version : 0.5.25
//! Copyright (c) JS Foundation and other contributors
//! license : MIT
//! github.com/moment/moment-timezone

(function (root, factory) {
	"use strict";

	/*global define*/
	if (typeof module === 'object' && module.exports) {
		module.exports = factory(require('moment')); // Node
	} else if (typeof define === 'function' && define.amd) {
		define(['moment'], factory);                 // AMD
	} else {
		factory(root.moment);                        // Browser
	}
}(this, function (moment) {
	"use strict";

	// Do not load moment-timezone a second time.
	// if (moment.tz !== undefined) {
	// 	logError('Moment Timezone ' + moment.tz.version + ' was already loaded ' + (moment.tz.dataVersion ? 'with data from ' : 'without any data') + moment.tz.dataVersion);
	// 	return moment;
	// }

	var VERSION = "0.5.25",
		zones = {},
		links = {},
		names = {},
		guesses = {},
		cachedGuess;

	if (!moment || typeof moment.version !== 'string') {
		logError('Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/');
	}

	var momentVersion = moment.version.split('.'),
		major = +momentVersion[0],
		minor = +momentVersion[1];

	// Moment.js version check
	if (major < 2 || (major === 2 && minor < 6)) {
		logError('Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js ' + moment.version + '. See momentjs.com');
	}

	/************************************
		Unpacking
	************************************/

	function charCodeToInt(charCode) {
		if (charCode > 96) {
			return charCode - 87;
		} else if (charCode > 64) {
			return charCode - 29;
		}
		return charCode - 48;
	}

	function unpackBase60(string) {
		var i = 0,
			parts = string.split('.'),
			whole = parts[0],
			fractional = parts[1] || '',
			multiplier = 1,
			num,
			out = 0,
			sign = 1;

		// handle negative numbers
		if (string.charCodeAt(0) === 45) {
			i = 1;
			sign = -1;
		}

		// handle digits before the decimal
		for (i; i < whole.length; i++) {
			num = charCodeToInt(whole.charCodeAt(i));
			out = 60 * out + num;
		}

		// handle digits after the decimal
		for (i = 0; i < fractional.length; i++) {
			multiplier = multiplier / 60;
			num = charCodeToInt(fractional.charCodeAt(i));
			out += num * multiplier;
		}

		return out * sign;
	}

	function arrayToInt (array) {
		for (var i = 0; i < array.length; i++) {
			array[i] = unpackBase60(array[i]);
		}
	}

	function intToUntil (array, length) {
		for (var i = 0; i < length; i++) {
			array[i] = Math.round((array[i - 1] || 0) + (array[i] * 60000)); // minutes to milliseconds
		}

		array[length - 1] = Infinity;
	}

	function mapIndices (source, indices) {
		var out = [], i;

		for (i = 0; i < indices.length; i++) {
			out[i] = source[indices[i]];
		}

		return out;
	}

	function unpack (string) {
		var data = string.split('|'),
			offsets = data[2].split(' '),
			indices = data[3].split(''),
			untils  = data[4].split(' ');

		arrayToInt(offsets);
		arrayToInt(indices);
		arrayToInt(untils);

		intToUntil(untils, indices.length);

		return {
			name       : data[0],
			abbrs      : mapIndices(data[1].split(' '), indices),
			offsets    : mapIndices(offsets, indices),
			untils     : untils,
			population : data[5] | 0
		};
	}

	/************************************
		Zone object
	************************************/

	function Zone (packedString) {
		if (packedString) {
			this._set(unpack(packedString));
		}
	}

	Zone.prototype = {
		_set : function (unpacked) {
			this.name       = unpacked.name;
			this.abbrs      = unpacked.abbrs;
			this.untils     = unpacked.untils;
			this.offsets    = unpacked.offsets;
			this.population = unpacked.population;
		},

		_index : function (timestamp) {
			var target = +timestamp,
				untils = this.untils,
				i;

			for (i = 0; i < untils.length; i++) {
				if (target < untils[i]) {
					return i;
				}
			}
		},

		parse : function (timestamp) {
			var target  = +timestamp,
				offsets = this.offsets,
				untils  = this.untils,
				max     = untils.length - 1,
				offset, offsetNext, offsetPrev, i;

			for (i = 0; i < max; i++) {
				offset     = offsets[i];
				offsetNext = offsets[i + 1];
				offsetPrev = offsets[i ? i - 1 : i];

				if (offset < offsetNext && tz.moveAmbiguousForward) {
					offset = offsetNext;
				} else if (offset > offsetPrev && tz.moveInvalidForward) {
					offset = offsetPrev;
				}

				if (target < untils[i] - (offset * 60000)) {
					return offsets[i];
				}
			}

			return offsets[max];
		},

		abbr : function (mom) {
			return this.abbrs[this._index(mom)];
		},

		offset : function (mom) {
			logError("zone.offset has been deprecated in favor of zone.utcOffset");
			return this.offsets[this._index(mom)];
		},

		utcOffset : function (mom) {
			return this.offsets[this._index(mom)];
		}
	};

	/************************************
		Current Timezone
	************************************/

	function OffsetAt(at) {
		var timeString = at.toTimeString();
		var abbr = timeString.match(/\([a-z ]+\)/i);
		if (abbr && abbr[0]) {
			// 17:56:31 GMT-0600 (CST)
			// 17:56:31 GMT-0600 (Central Standard Time)
			abbr = abbr[0].match(/[A-Z]/g);
			abbr = abbr ? abbr.join('') : undefined;
		} else {
			// 17:56:31 CST
			// 17:56:31 GMT+0800 ()
			abbr = timeString.match(/[A-Z]{3,5}/g);
			abbr = abbr ? abbr[0] : undefined;
		}

		if (abbr === 'GMT') {
			abbr = undefined;
		}

		this.at = +at;
		this.abbr = abbr;
		this.offset = at.getTimezoneOffset();
	}

	function ZoneScore(zone) {
		this.zone = zone;
		this.offsetScore = 0;
		this.abbrScore = 0;
	}

	ZoneScore.prototype.scoreOffsetAt = function (offsetAt) {
		this.offsetScore += Math.abs(this.zone.utcOffset(offsetAt.at) - offsetAt.offset);
		if (this.zone.abbr(offsetAt.at).replace(/[^A-Z]/g, '') !== offsetAt.abbr) {
			this.abbrScore++;
		}
	};

	function findChange(low, high) {
		var mid, diff;

		while ((diff = ((high.at - low.at) / 12e4 | 0) * 6e4)) {
			mid = new OffsetAt(new Date(low.at + diff));
			if (mid.offset === low.offset) {
				low = mid;
			} else {
				high = mid;
			}
		}

		return low;
	}

	function userOffsets() {
		var startYear = new Date().getFullYear() - 2,
			last = new OffsetAt(new Date(startYear, 0, 1)),
			offsets = [last],
			change, next, i;

		for (i = 1; i < 48; i++) {
			next = new OffsetAt(new Date(startYear, i, 1));
			if (next.offset !== last.offset) {
				change = findChange(last, next);
				offsets.push(change);
				offsets.push(new OffsetAt(new Date(change.at + 6e4)));
			}
			last = next;
		}

		for (i = 0; i < 4; i++) {
			offsets.push(new OffsetAt(new Date(startYear + i, 0, 1)));
			offsets.push(new OffsetAt(new Date(startYear + i, 6, 1)));
		}

		return offsets;
	}

	function sortZoneScores (a, b) {
		if (a.offsetScore !== b.offsetScore) {
			return a.offsetScore - b.offsetScore;
		}
		if (a.abbrScore !== b.abbrScore) {
			return a.abbrScore - b.abbrScore;
		}
		return b.zone.population - a.zone.population;
	}

	function addToGuesses (name, offsets) {
		var i, offset;
		arrayToInt(offsets);
		for (i = 0; i < offsets.length; i++) {
			offset = offsets[i];
			guesses[offset] = guesses[offset] || {};
			guesses[offset][name] = true;
		}
	}

	function guessesForUserOffsets (offsets) {
		var offsetsLength = offsets.length,
			filteredGuesses = {},
			out = [],
			i, j, guessesOffset;

		for (i = 0; i < offsetsLength; i++) {
			guessesOffset = guesses[offsets[i].offset] || {};
			for (j in guessesOffset) {
				if (guessesOffset.hasOwnProperty(j)) {
					filteredGuesses[j] = true;
				}
			}
		}

		for (i in filteredGuesses) {
			if (filteredGuesses.hasOwnProperty(i)) {
				out.push(names[i]);
			}
		}

		return out;
	}

	function rebuildGuess () {

		// use Intl API when available and returning valid time zone
		try {
			var intlName = Intl.DateTimeFormat().resolvedOptions().timeZone;
			if (intlName && intlName.length > 3) {
				var name = names[normalizeName(intlName)];
				if (name) {
					return name;
				}
				logError("Moment Timezone found " + intlName + " from the Intl api, but did not have that data loaded.");
			}
		} catch (e) {
			// Intl unavailable, fall back to manual guessing.
		}

		var offsets = userOffsets(),
			offsetsLength = offsets.length,
			guesses = guessesForUserOffsets(offsets),
			zoneScores = [],
			zoneScore, i, j;

		for (i = 0; i < guesses.length; i++) {
			zoneScore = new ZoneScore(getZone(guesses[i]), offsetsLength);
			for (j = 0; j < offsetsLength; j++) {
				zoneScore.scoreOffsetAt(offsets[j]);
			}
			zoneScores.push(zoneScore);
		}

		zoneScores.sort(sortZoneScores);

		return zoneScores.length > 0 ? zoneScores[0].zone.name : undefined;
	}

	function guess (ignoreCache) {
		if (!cachedGuess || ignoreCache) {
			cachedGuess = rebuildGuess();
		}
		return cachedGuess;
	}

	/************************************
		Global Methods
	************************************/

	function normalizeName (name) {
		return (name || '').toLowerCase().replace(/\//g, '_');
	}

	function addZone (packed) {
		var i, name, split, normalized;

		if (typeof packed === "string") {
			packed = [packed];
		}

		for (i = 0; i < packed.length; i++) {
			split = packed[i].split('|');
			name = split[0];
			normalized = normalizeName(name);
			zones[normalized] = packed[i];
			names[normalized] = name;
			addToGuesses(normalized, split[2].split(' '));
		}
	}

	function getZone (name, caller) {
		
		name = normalizeName(name);

		var zone = zones[name];
		var link;

		if (zone instanceof Zone) {
			return zone;
		}

		if (typeof zone === 'string') {
			zone = new Zone(zone);
			zones[name] = zone;
			return zone;
		}

		// Pass getZone to prevent recursion more than 1 level deep
		if (links[name] && caller !== getZone && (link = getZone(links[name], getZone))) {
			zone = zones[name] = new Zone();
			zone._set(link);
			zone.name = names[name];
			return zone;
		}

		return null;
	}

	function getNames () {
		var i, out = [];

		for (i in names) {
			if (names.hasOwnProperty(i) && (zones[i] || zones[links[i]]) && names[i]) {
				out.push(names[i]);
			}
		}

		return out.sort();
	}

	function addLink (aliases) {
		var i, alias, normal0, normal1;

		if (typeof aliases === "string") {
			aliases = [aliases];
		}

		for (i = 0; i < aliases.length; i++) {
			alias = aliases[i].split('|');

			normal0 = normalizeName(alias[0]);
			normal1 = normalizeName(alias[1]);

			links[normal0] = normal1;
			names[normal0] = alias[0];

			links[normal1] = normal0;
			names[normal1] = alias[1];
		}
	}

	function loadData (data) {
		addZone(data.zones);
		addLink(data.links);
		tz.dataVersion = data.version;
	}

	function zoneExists (name) {
		if (!zoneExists.didShowError) {
			zoneExists.didShowError = true;
				logError("moment.tz.zoneExists('" + name + "') has been deprecated in favor of !moment.tz.zone('" + name + "')");
		}
		return !!getZone(name);
	}

	function needsOffset (m) {
		var isUnixTimestamp = (m._f === 'X' || m._f === 'x');
		return !!(m._a && (m._tzm === undefined) && !isUnixTimestamp);
	}

	function logError (message) {
		if (typeof console !== 'undefined' && typeof console.error === 'function') {
			console.error(message);
		}
	}

	/************************************
		moment.tz namespace
	************************************/

	function tz (input) {
		var args = Array.prototype.slice.call(arguments, 0, -1),
			name = arguments[arguments.length - 1],
			zone = getZone(name),
			out  = moment.utc.apply(null, args);

		if (zone && !moment.isMoment(input) && needsOffset(out)) {
			out.add(zone.parse(out), 'minutes');
		}

		out.tz(name);

		return out;
	}

	tz.version      = VERSION;
	tz.dataVersion  = '';
	tz._zones       = zones;
	tz._links       = links;
	tz._names       = names;
	tz.add          = addZone;
	tz.link         = addLink;
	tz.load         = loadData;
	tz.zone         = getZone;
	tz.zoneExists   = zoneExists; // deprecated in 0.1.0
	tz.guess        = guess;
	tz.names        = getNames;
	tz.Zone         = Zone;
	tz.unpack       = unpack;
	tz.unpackBase60 = unpackBase60;
	tz.needsOffset  = needsOffset;
	tz.moveInvalidForward   = true;
	tz.moveAmbiguousForward = false;

	/************************************
		Interface with Moment.js
	************************************/

	var fn = moment.fn;

	moment.tz = tz;

	moment.defaultZone = null;

	moment.updateOffset = function (mom, keepTime) {
		var zone = moment.defaultZone,
			offset;

		if (mom._z === undefined) {
			if (zone && needsOffset(mom) && !mom._isUTC) {
				mom._d = moment.utc(mom._a)._d;
				mom.utc().add(zone.parse(mom), 'minutes');
			}
			mom._z = zone;
		}
		if (mom._z) {
			offset = mom._z.utcOffset(mom);
			if (Math.abs(offset) < 16) {
				offset = offset / 60;
			}
			if (mom.utcOffset !== undefined) {
				var z = mom._z;
				mom.utcOffset(-offset, keepTime);
				mom._z = z;
			} else {
				mom.zone(offset, keepTime);
			}
		}
	};

	fn.tz = function (name, keepTime) {
		if (name) {
			if (typeof name !== 'string') {
				throw new Error('Time zone name must be a string, got ' + name + ' [' + typeof name + ']');
			}
			this._z = getZone(name);
			if (this._z) {
				moment.updateOffset(this, keepTime);
			} else {
				logError("Moment Timezone has no data for " + name + ". See http://momentjs.com/timezone/docs/#/data-loading/.");
			}
			return this;
		}
		if (this._z) { return this._z.name; }
	};

	function abbrWrap (old) {
		return function () {
			if (this._z) { return this._z.abbr(this); }
			return old.call(this);
		};
	}

	function resetZoneWrap (old) {
		return function () {
			this._z = null;
			return old.apply(this, arguments);
		};
	}

	function resetZoneWrap2 (old) {
		return function () {
			if (arguments.length > 0) this._z = null;
			return old.apply(this, arguments);
		};
	}

	fn.zoneName  = abbrWrap(fn.zoneName);
	fn.zoneAbbr  = abbrWrap(fn.zoneAbbr);
	fn.utc       = resetZoneWrap(fn.utc);
	fn.local     = resetZoneWrap(fn.local);
	fn.utcOffset = resetZoneWrap2(fn.utcOffset);
	
	moment.tz.setDefault = function(name) {
		if (major < 2 || (major === 2 && minor < 9)) {
			logError('Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js ' + moment.version + '.');
		}
		moment.defaultZone = name ? getZone(name) : null;
		return moment;
	};

	// Cloning a moment should include the _z property.
	var momentProperties = moment.momentProperties;
	if (Object.prototype.toString.call(momentProperties) === '[object Array]') {
		// moment 2.8.1+
		momentProperties.push('_z');
		momentProperties.push('_a');
	} else if (momentProperties) {
		// moment 2.7.0
		momentProperties._z = null;
	}

	loadData({
		"version": "2019a",
		"zones": [
			"Africa/Abidjan|GMT|0|0||48e5",
			"Africa/Nairobi|EAT|-30|0||47e5",
			"Africa/Algiers|WET WEST CET CEST|0 -10 -10 -20|01012320102|3bX0 11A0 dDd0 17b0 11B0 1cN0 2Dy0 1cN0 1fB0 1cL0|26e5",
			"Africa/Lagos|WAT|-10|0||17e6",
			"Africa/Bissau|-01 GMT|10 0|01|cap0|39e4",
			"Africa/Maputo|CAT|-20|0||26e5",
			"Africa/Cairo|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|LX0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1WL0 rd0 1Rz0 wp0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1qL0 Xd0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1ny0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 WL0 1qN0 Rb0 1wp0 On0 1zd0 Lz0 1EN0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0|15e6",
			"Africa/Casablanca|+00 +01|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4mn0 SyN0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600|32e5",
			"Africa/Ceuta|WET WEST CET CEST|0 -10 -10 -20|0101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4VB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|85e3",
			"Africa/El_Aaiun|-01 +00 +01|10 0 -10|01212121212121212121212121212121212121212121212121212121212121212121|fi10 6L0 AL0 1Nd0 XX0 1Cp0 pz0 1cBB0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600|20e4",
			"Africa/Johannesburg|SAST|-20|0||84e5",
			"Africa/Juba|CAT CAST EAT|-20 -30 -30|0101010101010101010101010101010102|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0",
			"Africa/Khartoum|CAT CAST EAT|-20 -30 -30|01010101010101010101010101010101020|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0 HjL0|51e5",
			"Africa/Monrovia|MMT GMT|I.u 0|01|4SoI.u|11e5",
			"Africa/Ndjamena|WAT WAST|-10 -20|010|nNb0 Wn0|13e5",
			"Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00",
			"Africa/Tripoli|EET CET CEST|-20 -10 -20|0121212121212121210120120|tda0 A10 1db0 1cN0 1db0 1dd0 1db0 1eN0 1bb0 1e10 1cL0 1c10 1db0 1dd0 1db0 1cN0 1db0 1q10 fAn0 1ep0 1db0 AKq0 TA0 1o00|11e5",
			"Africa/Tunis|CET CEST|-10 -20|0101010101010101010|hOn0 WM0 1rA0 11c0 nwo0 Ko0 1cM0 1cM0 1rA0 10M0 zuM0 10N0 1aN0 1qM0 WM0 1qM0 11A0 1o00|20e5",
			"Africa/Windhoek|SAST CAT WAT|-20 -20 -10|01212121212121212121212121212121212121212121212121|Ndy0 9Io0 16P0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4",
			"America/Adak|BST BDT AHST HST HDT|b0 a0 a0 a0 90|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326",
			"America/Anchorage|AHST AHDT YST AKST AKDT|a0 90 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kc0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4",
			"America/Puerto_Rico|AST|40|0||24e5",
			"America/Araguaina|-03 -02|30 20|01010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 ny10 Lz0|14e4",
			"America/Argentina/Buenos_Aires|-03 -02|30 20|01010101010101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 A4p0 uL0 1qN0 WL0",
			"America/Argentina/Catamarca|-03 -02 -04|30 20 40|01010101210102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 7B0 8zb0 uL0",
			"America/Argentina/Cordoba|-03 -02 -04|30 20 40|01010101210101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0 1qN0 WL0",
			"America/Argentina/Jujuy|-03 -02 -04|30 20 40|010101202101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1ze0 TX0 1ld0 WK0 1wp0 TX0 A4p0 uL0",
			"America/Argentina/La_Rioja|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0",
			"America/Argentina/Mendoza|-03 -02 -04|30 20 40|01010120202102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1u20 SL0 1vd0 Tb0 1wp0 TW0 ri10 Op0 7TX0 uL0",
			"America/Argentina/Rio_Gallegos|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0",
			"America/Argentina/Salta|-03 -02 -04|30 20 40|010101012101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0",
			"America/Argentina/San_Juan|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rld0 m10 8lb0 uL0",
			"America/Argentina/San_Luis|-03 -02 -04|30 20 40|010101202020102020|9Rf0 Db0 zvd0 Bz0 1tB0 XX0 1q20 SL0 AN0 vDb0 m10 8lb0 8L0 jd0 1qN0 WL0 1qN0",
			"America/Argentina/Tucuman|-03 -02 -04|30 20 40|0101010121010201010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 4N0 8BX0 uL0 1qN0 WL0",
			"America/Argentina/Ushuaia|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rkN0 8p0 8zb0 uL0",
			"America/Asuncion|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|6FE0 3CL0 3Dd0 10L0 1pB0 10n0 1pB0 10n0 1pB0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1lB0 14n0 1dd0 1cL0 1fd0 WL0 1rd0 1aL0 1dB0 Xz0 1qp0 Xb0 1qN0 10L0 1rB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 WN0 1qL0 11B0 1nX0 1ip0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 TX0 1tB0 19X0 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0|28e5",
			"America/Panama|EST|50|0||15e5",
			"America/Bahia_Banderas|PST MST MDT CDT CST|80 70 60 50 60|012121212121212121212121212121343434343434343434343434343434343434343434|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|84e3",
			"America/Bahia|-03 -02|30 20|010101010101010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 l5B0 Rb0|27e5",
			"America/Barbados|AST ADT|40 30|010101010|i7G0 IL0 1ip0 17b0 1ip0 17b0 1ld0 13b0|28e4",
			"America/Belem|-03 -02|30 20|0101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0|20e5",
			"America/Belize|CST CDT|60 50|01010|9xG0 qn0 lxB0 mn0|57e3",
			"America/Boa_Vista|-04 -03|40 30|01010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 smp0 WL0 1tB0 2L0|62e2",
			"America/Bogota|-05 -04|50 40|010|Snh0 2en0|90e5",
			"America/Boise|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 Dd0 1Kn0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e4",
			"America/Cambridge_Bay|MST MDT CST CDT EST|70 60 60 50 50|01010101010101010101010101010101010101012342101010101010101010101010101010101010101010101010101010101010|p7J0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11A0 1nX0 2K0 WQ0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e2",
			"America/Campo_Grande|-04 -03|40 30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|77e4",
			"America/Cancun|CST EST EDT CDT|60 50 40 50|012121230303030303030303030303030303030301|t9G0 yLB0 1lb0 14p0 1lb0 14p0 Lz0 xB0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4",
			"America/Caracas|-04 -0430|40 4u|010|1wmv0 kqo0|29e5",
			"America/Cayenne|-03|30|0||58e3",
			"America/Chicago|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5",
			"America/Chihuahua|CST CDT MDT MST|60 50 60 70|01010232323232323232323232323232323232323232323232323232323232323232323|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|81e4",
			"America/Costa_Rica|CST CDT|60 50|010101010|mgS0 Db0 1Kp0 Db0 pRB0 15b0 1kp0 mL0|12e5",
			"America/Phoenix|MST|70|0||42e5",
			"America/Cuiaba|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 4a10 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|54e4",
			"America/Danmarkshavn|-03 -02 GMT|30 20 0|0101010101010101010101010101010102|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 DC0|8",
			"America/Dawson_Creek|PST PDT MST|80 70 70|0101012|Ka0 1cL0 1cN0 1fz0 1cN0 ML0|12e3",
			"America/Dawson|YST PST PDT|90 80 70|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|9ix0 fNd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|13e2",
			"America/Denver|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5",
			"America/Detroit|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|85H0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e5",
			"America/Edmonton|MST MDT|70 60|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E90 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|10e5",
			"America/Eirunepe|-05 -04|50 40|01010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0 yTd0 d5X0|31e3",
			"America/El_Salvador|CST CDT|60 50|01010|Gcu0 WL0 1qN0 WL0|11e5",
			"America/Tijuana|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fmy0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|20e5",
			"America/Fort_Nelson|PST PDT MST|80 70 70|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010102|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2",
			"America/Fort_Wayne|EST EDT|50 40|01010101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Fortaleza|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 5z0 2mN0 On0|34e5",
			"America/Glace_Bay|AST ADT|40 30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E60 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3",
			"America/Godthab|-03 -02|30 20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e3",
			"America/Goose_Bay|AST ADT ADDT|40 30 20|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|76e2",
			"America/Grand_Turk|EST EDT AST|50 40 40|01010101010101010101010101010101010101010101010101010101010101010101010101210101010101010101010101010|mG70 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2",
			"America/Guatemala|CST CDT|60 50|010101010|9tG0 An0 mtd0 Nz0 ifB0 17b0 zDB0 11z0|13e5",
			"America/Guayaquil|-05 -04|50 40|010|TKR0 rz0|27e5",
			"America/Guyana|-0345 -03 -04|3J 30 40|012|dyPJ Bxbf|80e4",
			"America/Halifax|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4",
			"America/Havana|CST CDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K50 1cL0 1cN0 1fz0 1cN0 14n0 1ld0 14L0 1kN0 15b0 1kp0 1cL0 1cN0 1fz0 1a10 1fz0 1fB0 11z0 14p0 1nX0 11B0 1nX0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 1a10 1in0 1a10 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 17c0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 11A0 6i00 Rc0 1wo0 U00 1tA0 Rc0 1wo0 U00 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5",
			"America/Hermosillo|PST MST MDT|80 70 60|01212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0|64e4",
			"America/Indiana/Knox|CST CDT EST|60 50 50|01010101010101010101010101010101010101010101210101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 z8o0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Marengo|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1e6p0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Petersburg|CST CDT EST EDT|60 50 50 40|0101010101010101210123232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 19co0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Tell_City|EST EDT CDT CST|50 40 50 60|01023232323232323232323232323232323232323232323232323|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Vevay|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1lnd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Vincennes|EST EDT CDT CST|50 40 50 60|01023201010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Indiana/Winamac|EST EDT CDT CST|50 40 50 60|01023101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1za0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Inuvik|PST MST MDT|80 70 60|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|mGa0 2pz0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|35e2",
			"America/Iqaluit|EST EDT CST CDT|50 40 60 50|0101010101010101010101010101010101010101230101010101010101010101010101010101010101010101010101010101010|p7H0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|67e2",
			"America/Jamaica|EST EDT|50 40|010101010101010101010|9Kv0 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0|94e4",
			"America/Juneau|PST PDT YDT YST AKST AKDT|80 70 80 90 90 80|0101010101010101010102010101345454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cM0 1cM0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|33e3",
			"America/Kentucky/Louisville|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Kentucky/Monticello|CST CDT EST EDT|60 50 50 40|010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/La_Paz|-04|40|0||19e5",
			"America/Lima|-05 -04|50 40|010101010|CVF0 zX0 1O10 zX0 6Gp0 zX0 98p0 zX0|11e6",
			"America/Los_Angeles|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6",
			"America/Maceio|-03 -02|30 20|0101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 8Q10 WL0 1tB0 5z0 2mN0 On0|93e4",
			"America/Managua|CST EST CDT|60 50 50|010202010102020|86u0 4mn0 9Up0 Dz0 1K10 Dz0 s3F0 1KH0 DB0 9In0 k8p0 19X0 1o30 11y0|22e5",
			"America/Manaus|-04 -03|40 30|010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0|19e5",
			"America/Martinique|AST ADT|40 30|010|oXg0 19X0|39e4",
			"America/Matamoros|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|45e4",
			"America/Mazatlan|PST MST MDT|80 70 60|012121212121212121212121212121212121212121212121212121212121212121212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|44e4",
			"America/Menominee|EST CDT CST|50 50 60|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|85H0 1cM0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|85e2",
			"America/Merida|CST EST CDT|60 50 50|0102020202020202020202020202020202020202020202020202020202020202020202020|t9G0 2hz0 wu30 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|11e5",
			"America/Metlakatla|PST PDT AKST AKDT|80 70 90 80|0101010101010101010101010101023232302323232323232323232323232|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1hU10 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2",
			"America/Mexico_City|CST CDT|60 50|01010101010101010101010101010101010101010101010101010101010101010101010|13Vk0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|20e6",
			"America/Miquelon|AST -03 -02|40 30 20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|p9g0 gQ10 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2",
			"America/Moncton|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14n1 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 ReX 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|64e3",
			"America/Monterrey|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|41e5",
			"America/Montevideo|-03 -02 -0130 -0230|30 20 1u 2u|0101023010101010101010101010101010101010101010101010|JD0 jX0 4vB0 xz0 3Cp0 mmu 1a10 IMu Db0 4c10 uL0 1Nd0 An0 1SN0 uL0 mp0 28L0 iPB0 un0 1SN0 xz0 1zd0 Lz0 1zd0 Rb0 1zd0 On0 1wp0 Rb0 s8p0 1fB0 1ip0 11z0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0|17e5",
			"America/Toronto|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e5",
			"America/New_York|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6",
			"America/Nipigon|EST EDT|50 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avj0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|16e2",
			"America/Nome|BST BDT YST AKST AKDT|b0 a0 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cl0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|38e2",
			"America/Noronha|-02 -01|20 10|01010101010101010|CxC0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|30e2",
			"America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010123232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/North_Dakota/Center|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/North_Dakota/New_Salem|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0",
			"America/Ojinaga|CST CDT MDT MST|60 50 60 70|01010232323232323232323232323232323232323232323232323232323232323232323|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3",
			"America/Pangnirtung|AST ADT EDT EST CST CDT|40 30 40 50 60 50|0101010101010101010101010101010232323232453232323232323232323232323232323232323232323232323232323232323|p7G0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1o00 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2",
			"America/Paramaribo|-0330 -03|3u 30|01|zSPu|24e4",
			"America/Port-au-Prince|EST EDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010|wu50 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14q0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 i6n0 1nX0 11B0 1nX0 d430 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5",
			"America/Rio_Branco|-05 -04|50 40|010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0 d5X0|31e4",
			"America/Porto_Velho|-04 -03|40 30|0101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0|37e4",
			"America/Punta_Arenas|-03 -04|30 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0",
			"America/Rainy_River|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avk0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|842",
			"America/Rankin_Inlet|CST CDT EST|60 50 50|0101010101010101010101010101010101010101012101010101010101010101010101010101010101010101010101010101010|p7I0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e2",
			"America/Recife|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|33e5",
			"America/Regina|CST|60|0||19e4",
			"America/Resolute|CST CDT EST|60 50 50|0101010101010101010101010101010101010101012101010101012101010101010101010101010101010101010101010101010|p7I0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|229",
			"America/Santarem|-04 -03|40 30|01010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0|21e4",
			"America/Santiago|-03 -04|30 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|62e5",
			"America/Santo_Domingo|-0430 EST AST|4u 50 40|0101010101212|ksu 1Cou yLu 1RAu wLu 1QMu xzu 1Q0u xXu 1PAu 13jB0 e00|29e5",
			"America/Sao_Paulo|-03 -02|30 20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|20e6",
			"America/Scoresbysund|-02 -01 +00|20 10 0|0102121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|oXg0 1a00 1cK0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|452",
			"America/Sitka|PST PDT YST AKST AKDT|80 70 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|90e2",
			"America/St_Johns|NST NDT NDDT|3u 2u 1u|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K5u 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4",
			"America/Swift_Current|MST CST|70 60|01|5E90|16e3",
			"America/Tegucigalpa|CST CDT|60 50|0101010|Gcu0 WL0 1qN0 WL0 GRd0 AL0|11e5",
			"America/Thule|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010|PHG0 1cL0 1cN0 1cL0 1fB0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|656",
			"America/Thunder_Bay|EST EDT|50 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4",
			"America/Vancouver|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5",
			"America/Whitehorse|PST PDT|80 70|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|p7K0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3",
			"America/Winnipeg|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|66e4",
			"America/Yakutat|YST YDT AKST AKDT|90 80 90 80|0101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|Kb0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cn0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|642",
			"America/Yellowknife|MST MDT|70 60|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|p7J0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3",
			"Antarctica/Casey|+08 +11|-80 -b0|0101010|1ARS0 T90 40P0 KL0 blz0 3m10|10",
			"Antarctica/Davis|+07 +05|-70 -50|01010|1ART0 VB0 3Wn0 KN0|70",
			"Pacific/Port_Moresby|+10|-a0|0||25e4",
			"Antarctica/Macquarie|AEDT AEST +11|-b0 -a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010102|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0|1",
			"Antarctica/Mawson|+06 +05|-60 -50|01|1ARU0|60",
			"Pacific/Auckland|NZST NZDT|-c0 -d0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|14e5",
			"Antarctica/Palmer|-03 -02 -04|30 20 40|01020202020202020202020202020202020202020202020202020202020202020202020|9Rf0 Db0 jsN0 14N0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40",
			"Antarctica/Rothera|-00 -03|0 30|01|gOo0|130",
			"Asia/Riyadh|+03|-30|0||57e5",
			"Antarctica/Troll|-00 +00 +02|0 0 -20|012121212121212121212121212121212121212121212121212121|1puo0 hd0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|40",
			"Asia/Urumqi|+06|-60|0||32e5",
			"Europe/Berlin|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXd0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e5",
			"Asia/Almaty|+06 +07 +05|-60 -70 -50|0101010101010101010102010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|15e5",
			"Asia/Amman|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|8kK0 KL0 1oN0 11b0 1oN0 11b0 1pd0 1dz0 1cp0 11b0 1op0 11b0 fO10 1db0 1e10 1cL0 1cN0 1cL0 1cN0 1fz0 1pd0 10n0 1ld0 14n0 1hB0 15b0 1ip0 19X0 1cN0 1cL0 1cN0 17b0 1ld0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1So0 y00 1fc0 1dc0 1co0 1dc0 1cM0 1cM0 1cM0 1o00 11A0 1lc0 17c0 1cM0 1cM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|25e5",
			"Asia/Anadyr|+13 +14 +12 +11|-d0 -e0 -c0 -b0|010202020202020202023202020202020202020202020202020202020232|rmX0 1db0 2q10 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|13e3",
			"Asia/Aqtau|+05 +06 +04|-50 -60 -40|0101010101010101010201010120202020202020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|15e4",
			"Asia/Aqtobe|+05 +06 +04|-50 -60 -40|01010101010101010102010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|27e4",
			"Asia/Ashgabat|+05 +06 +04|-50 -60 -40|01010101010101010101020|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0|41e4",
			"Asia/Atyrau|+05 +06 +04|-50 -60 -40|010101010101010101020101010101010102020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 2sp0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0",
			"Asia/Baghdad|+03 +04|-30 -40|01010101010101010101010101010101010101010101010101010|u190 11b0 1cp0 1dz0 1dd0 1db0 1cN0 1cp0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1de0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0|66e5",
			"Asia/Qatar|+04 +03|-40 -30|01|5QI0|96e4",
			"Asia/Baku|+04 +05 +03|-40 -50 -30|010101010101010101010201010101010101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 9Je0 1o00 11z0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5",
			"Asia/Bangkok|+07|-70|0||15e6",
			"Asia/Barnaul|+07 +08 +06|-70 -80 -60|01010101010101010101020101010102020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 p90 LE0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0",
			"Asia/Beirut|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|61a0 En0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1op0 11b0 dA10 17b0 1iN0 17b0 1iN0 17b0 1iN0 17b0 1vB0 SL0 1mp0 13z0 1iN0 17b0 1iN0 17b0 1jd0 12n0 1a10 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|22e5",
			"Asia/Bishkek|+06 +07 +05|-60 -70 -50|0101010101010101010102020202020202020202020202020|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2e00 1tX0 17b0 1ip0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1cPu 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|87e4",
			"Asia/Brunei|+08|-80|0||42e4",
			"Asia/Kolkata|IST|-5u|0||15e6",
			"Asia/Chita|+09 +10 +08|-90 -a0 -80|0101010101010101010102010101010101010101010101010101010101010120|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3re0|33e4",
			"Asia/Choibalsan|+07 +08 +10 +09|-70 -80 -a0 -90|012323232323232323232323232323232323232323232313131|jsF0 cKn0 1da0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 3Db0 h1f0 1cJ0 1cP0 1cJ0|38e3",
			"Asia/Shanghai|CST CDT|-80 -90|0101010101010|DKG0 Rb0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6",
			"Asia/Colombo|+0530 +0630 +06|-5u -6u -60|0120|14giu 11zu n3cu|22e5",
			"Asia/Dhaka|+06 +07|-60 -70|010|1A5R0 1i00|16e6",
			"Asia/Damascus|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|M00 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 Nb0 1AN0 Nb0 bcp0 19X0 1gp0 19X0 3ld0 1xX0 Vd0 1Bz0 Sp0 1vX0 10p0 1dz0 1cN0 1cL0 1db0 1db0 1g10 1an0 1ap0 1db0 1fd0 1db0 1cN0 1db0 1dd0 1db0 1cp0 1dz0 1c10 1dX0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 19z0 1fB0 1qL0 11B0 1on0 Wp0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0|26e5",
			"Asia/Dili|+09 +08|-90 -80|010|fpr0 Xld0|19e4",
			"Asia/Dubai|+04|-40|0||39e5",
			"Asia/Dushanbe|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2hB0|76e4",
			"Asia/Famagusta|EET EEST +03|-20 -30 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101012010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00",
			"Asia/Gaza|IST IDT EET EEST|-20 -30 -20 -30|010101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 11z0 1o10 14o0 1lA1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|18e5",
			"Asia/Hebron|IST IDT EET EEST|-20 -30 -20 -30|01010101010101010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 12L0 1mN0 14o0 1lc0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|25e4",
			"Asia/Ho_Chi_Minh|+08 +07|-80 -70|01|dfs0|90e5",
			"Asia/Hong_Kong|HKT HKST|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|73e5",
			"Asia/Hovd|+06 +07 +08|-60 -70 -80|01212121212121212121212121212121212121212121212121|jsG0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|81e3",
			"Asia/Irkutsk|+08 +09 +07|-80 -90 -70|010101010101010101010201010101010101010101010101010101010101010|rn40 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4",
			"Europe/Istanbul|EET EEST +04 +03|-20 -30 -40 -30|01010101010101010123232323231010101010101010101010101010101010101010101010101010101010101013|MK0 11z0 1o10 11z0 1qN0 11z0 1ze0 11B0 WM0 1qO0 WI0 1nX0 1rB0 10L0 11B0 1in0 17d0 1in0 2pX0 19E0 1fU0 16Q0 1iI0 16Q0 1iI0 1Vd0 pb0 3Kp0 14o0 1de0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1a00 1fA0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6",
			"Asia/Jakarta|WIB|-70|0||31e6",
			"Asia/Jayapura|WIT|-90|0||26e4",
			"Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 1hB0 1dX0 1ep0 1aL0 1eN0 17X0 1nf0 11z0 1tB0 19W0 1e10 17b0 1ep0 1gL0 18N0 1fz0 1eN0 17b0 1gq0 1gn0 19d0 1dz0 1c10 17X0 1hB0 1gn0 19d0 1dz0 1c10 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0|81e4",
			"Asia/Kabul|+0430|-4u|0||46e5",
			"Asia/Kamchatka|+12 +13 +11|-c0 -d0 -b0|0101010101010101010102010101010101010101010101010101010101020|rn00 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|18e4",
			"Asia/Karachi|+05 PKT PKST|-50 -50 -60|01212121|2Xv0 1fy00 1cL0 dK10 11b0 1610 1jX0|24e6",
			"Asia/Kathmandu|+0530 +0545|-5u -5J|01|CVuu|12e5",
			"Asia/Khandyga|+09 +10 +08 +11|-90 -a0 -80 -b0|01010101010101010101020101010101010101010101010131313131313131310|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 qK0 yN0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|66e2",
			"Asia/Krasnoyarsk|+07 +08 +06|-70 -80 -60|010101010101010101010201010101010101010101010101010101010101010|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|10e5",
			"Asia/Kuala_Lumpur|+0730 +08|-7u -80|01|td4u|71e5",
			"Asia/Macau|CST CDT|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|57e4",
			"Asia/Magadan|+11 +12 +10|-b0 -c0 -a0|0101010101010101010102010101010101010101010101010101010101010120|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Cq0|95e3",
			"Asia/Makassar|WITA|-80|0||15e5",
			"Asia/Manila|PST PDT|-80 -90|010|k0E0 1db0|24e6",
			"Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|32e4",
			"Asia/Novokuznetsk|+07 +08 +06|-70 -80 -60|0101010101010101010102010101010101010101010101010101010101020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|55e4",
			"Asia/Novosibirsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101020202020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 ml0 Os0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 4eN0|15e5",
			"Asia/Omsk|+06 +07 +05|-60 -70 -50|010101010101010101010201010101010101010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|12e5",
			"Asia/Oral|+05 +06 +04|-50 -60 -40|010101010101010202020202020202020202020202020|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 1cM0 IM0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|27e4",
			"Asia/Pontianak|WITA WIB|-80 -70|01|HNs0|23e4",
			"Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5",
			"Asia/Qostanay|+05 +06 +04|-50 -60 -40|0101010101010101010201010101010101010101010101|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0",
			"Asia/Qyzylorda|+05 +06|-50 -60|010101010101010101010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 3ao0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 zQl0|73e4",
			"Asia/Rangoon|+0630|-6u|0||48e5",
			"Asia/Sakhalin|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010202020202020202020202020202020|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 2pB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|58e4",
			"Asia/Samarkand|+05 +06|-50 -60|010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|36e4",
			"Asia/Seoul|KST KDT|-90 -a0|01010|Gf50 11A0 1o00 11A0|23e6",
			"Asia/Srednekolymsk|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010101010101010101010101010101010|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|35e2",
			"Asia/Taipei|CST CDT|-80 -90|0101010|akg0 1db0 1cN0 1db0 97B0 AL0|74e5",
			"Asia/Tashkent|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0|23e5",
			"Asia/Tbilisi|+04 +05 +03|-40 -50 -30|01010101010101010101020202010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cK0 1cL0 1cN0 1cL0 1cN0 2pz0 1cL0 1fB0 3Nz0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 An0 Os0 WM0|11e5",
			"Asia/Tehran|+0330 +04 +05 +0430|-3u -40 -50 -4u|0121030303030303030303030303030303030303030303030303030303030303030303030303030303030|j4ku TXu 1pz0 sN0 vAu 1cL0 1dB0 1en0 pNB0 UL0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 64p0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0|14e6",
			"Asia/Thimphu|+0530 +06|-5u -60|01|HcGu|79e3",
			"Asia/Tokyo|JST|-90|0||38e6",
			"Asia/Tomsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101010101010101010101020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 co0 1bB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Qp0|10e5",
			"Asia/Ulaanbaatar|+07 +08 +09|-70 -80 -90|01212121212121212121212121212121212121212121212121|jsF0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|12e5",
			"Asia/Ust-Nera|+09 +12 +11 +10|-90 -c0 -b0 -a0|0121212121212121212123212121212121212121212121212121212121212123|rn30 1d90 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|65e2",
			"Asia/Vladivostok|+10 +11 +09|-a0 -b0 -90|010101010101010101010201010101010101010101010101010101010101010|rn20 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4",
			"Asia/Yakutsk|+09 +10 +08|-90 -a0 -80|010101010101010101010201010101010101010101010101010101010101010|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|28e4",
			"Asia/Yekaterinburg|+05 +06 +04|-50 -60 -40|010101010101010101010201010101010101010101010101010101010101010|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|14e5",
			"Asia/Yerevan|+04 +05 +03|-40 -50 -30|01010101010101010101020202020101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 4RX0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|13e5",
			"Atlantic/Azores|-01 +00 WET|10 0 0|0101010101010101010101010101010121010101010101010101010101010101010101010101010101010101010101010101010101010|hAN0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|25e4",
			"Atlantic/Bermuda|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avi0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e3",
			"Atlantic/Canary|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXc0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4",
			"Atlantic/Cape_Verde|-02 -01|20 10|01|elE0|50e4",
			"Atlantic/Faroe|WET WEST|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|49e3",
			"Atlantic/Madeira|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hAM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e4",
			"Atlantic/South_Georgia|-02|20|0||30",
			"Atlantic/Stanley|-04 -03 -02|40 30 20|01212101010101010101010101010101010101010101010101010101|wrg0 WL0 1qL0 U10 1tz0 2mN0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 U10 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qN0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 U10 1tz0 U10 1tz0 U10|21e2",
			"Australia/Sydney|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|40e5",
			"Australia/Adelaide|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 WM0 1qM0 Rc0 1zc0 U00 1tA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|11e5",
			"Australia/Brisbane|AEST AEDT|-a0 -b0|010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0|20e5",
			"Australia/Broken_Hill|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|18e3",
			"Australia/Currie|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|746",
			"Australia/Darwin|ACST|-9u|0||12e4",
			"Australia/Eucla|+0845 +0945|-8J -9J|0101010101010|bHRf Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|368",
			"Australia/Hobart|AEDT AEST|-b0 -a0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|21e4",
			"Australia/Lord_Howe|AEST +1030 +1130 +11|-a0 -au -bu -b0|01212121213131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|raC0 1zdu Rb0 1zd0 On0 1zd0 On0 1zd0 On0 1zd0 TXu 1qMu WLu 1tAu WLu 1tAu TXu 1tAu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu 11zu 1o0u 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 11Au 1nXu 1qMu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu 11zu 1o0u WLu 1qMu 14nu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu|347",
			"Australia/Lindeman|AEST AEDT|-a0 -b0|0101010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0|10",
			"Australia/Melbourne|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|39e5",
			"Australia/Perth|AWST AWDT|-80 -90|0101010101010|bHS0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|18e5",
			"Europe/Brussels|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|21e5",
			"Pacific/Easter|-06 -07 -05|60 70 50|010101010101010101010101020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 2pA0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|30e2",
			"EET|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00",
			"Europe/Dublin|IST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Etc/GMT-1|+01|-10|0|",
			"Pacific/Guadalcanal|+11|-b0|0||11e4",
			"Pacific/Tarawa|+12|-c0|0||29e3",
			"Etc/GMT-13|+13|-d0|0|",
			"Etc/GMT-14|+14|-e0|0|",
			"Etc/GMT-2|+02|-20|0|",
			"Indian/Maldives|+05|-50|0||35e4",
			"Pacific/Palau|+09|-90|0||21e3",
			"Etc/GMT+1|-01|10|0|",
			"Pacific/Tahiti|-10|a0|0||18e4",
			"Etc/GMT+11|-11|b0|0|",
			"Etc/GMT+12|-12|c0|0|",
			"Etc/GMT+5|-05|50|0|",
			"Etc/GMT+6|-06|60|0|",
			"Etc/GMT+7|-07|70|0|",
			"Etc/GMT+8|-08|80|0|",
			"Pacific/Gambier|-09|90|0||125",
			"Etc/UTC|UTC|0|0|",
			"Europe/Andorra|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|B7d0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|79e3",
			"Europe/Astrakhan|+04 +05 +03|-40 -50 -30|0101010101010101020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|10e5",
			"Europe/Athens|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cOK0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|35e5",
			"Europe/London|BST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|10e6",
			"Europe/Belgrade|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|wdd0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Europe/Prague|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muN0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|13e5",
			"Europe/Bucharest|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|mRa0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|19e5",
			"Europe/Budapest|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXc0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5",
			"Europe/Zurich|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|38e4",
			"Europe/Chisinau|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010101012323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 gL0 WO0 1cM0 1cM0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11D0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|67e4",
			"Europe/Gibraltar|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|tLB0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|30e3",
			"Europe/Helsinki|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm00 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Europe/Kaliningrad|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010102323232323232323232323232323232323232323232343|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|44e4",
			"Europe/Kiev|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 Db0 3220 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|34e5",
			"Europe/Kirov|+04 +05 +03|-40 -50 -30|010101010101010102020202020202020202020202020202020202020202|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|48e4",
			"Europe/Lisbon|CET WET WEST CEST|-10 0 -10 -20|01212121212121212121212121212121203030302121212121212121212121212121212121212121212121212121212121212121212121|go00 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e5",
			"Europe/Madrid|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|apy0 1a10 1fz0 1a10 19X0 1cN0 1fz0 1a10 1fC0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|62e5",
			"Europe/Malta|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1co0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4",
			"Europe/Minsk|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010101023232323232323232323232323232323232323234|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fc0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0|19e5",
			"Europe/Paris|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fbc0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e6",
			"Europe/Moscow|MSK MSD EEST EET MSK|-30 -40 -30 -20 -40|0101010101010101010102301010101010101010101010101010101010101040|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|16e6",
			"Europe/Riga|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|64e4",
			"Europe/Rome|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1C00 LA0 1zc0 Oo0 1C00 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|39e5",
			"Europe/Samara|+04 +05 +03|-40 -50 -30|01010101010101010202010101010101010101010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2y10 14m0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|12e5",
			"Europe/Saratov|+04 +05 +03|-40 -50 -30|0101010101010102020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 5810",
			"Europe/Simferopol|MSK MSD EET EEST MSK|-30 -40 -20 -30 -40|0101010101010101010232323101010323232323232323232323232323232323240|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 4eL0 1cL0 1cN0 1cL0 1cN0 dX0 WL0 1cN0 1cL0 1fB0 1o30 11B0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0|33e4",
			"Europe/Sofia|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muJ0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5",
			"Europe/Tallinn|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e4",
			"Europe/Tirane|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|axz0 10n0 1op0 11z0 1pd0 11z0 1qN0 WL0 1qp0 Xb0 1qp0 Xb0 1qp0 11z0 1lB0 11z0 1qN0 11z0 1iN0 16n0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4",
			"Europe/Ulyanovsk|+04 +05 +03 +02|-40 -50 -30 -20|010101010101010102023202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|13e5",
			"Europe/Uzhgorod|MSK MSD CET EET EEST|-30 -40 -10 -20 -30|010101010101010101023434343434343434343434343434343434343434343434343434343434343434343434343434343|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 1Nf0 2pw0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e4",
			"Europe/Vienna|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXb0 19X0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|18e5",
			"Europe/Vilnius|MSK MSD EEST EET CEST CET|-30 -40 -30 -20 -20 -10|01010101010101010232323232323232323454323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4",
			"Europe/Volgograd|+04 +05 +03|-40 -50 -30|0101010101010102020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 9Jd0|10e5",
			"Europe/Warsaw|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5",
			"Europe/Zaporozhye|MSK MSD EEST EET|-30 -40 -30 -20|01010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cK0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|77e4",
			"Pacific/Honolulu|HST|a0|0||37e4",
			"Indian/Chagos|+05 +06|-50 -60|01|13ij0|30e2",
			"Indian/Mauritius|+04 +05|-40 -50|01010|v5U0 14L0 12kr0 11z0|15e4",
			"Pacific/Kwajalein|-12 +12|c0 -c0|01|Vxo0|14e3",
			"MET|MET MEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00",
			"Pacific/Chatham|+1245 +1345|-cJ -dJ|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|600",
			"Pacific/Apia|-11 -10 +14 +13|b0 a0 -e0 -d0|0101232323232323232323232323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|37e3",
			"Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4",
			"Pacific/Efate|+11 +12|-b0 -c0|010101010101010101010|xpN0 1cL0 1oN0 10L0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 Lz0 1Nd0 An0|66e3",
			"Pacific/Enderbury|-12 -11 +13|c0 b0 -d0|012|nIc0 B7X0|1",
			"Pacific/Fakaofo|-11 +13|b0 -d0|01|1Gfn0|483",
			"Pacific/Fiji|+12 +13|-c0 -d0|010101010101010101010101010101010101010101010101|1ace0 LA0 1EM0 IM0 nJc0 LA0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0|88e4",
			"Pacific/Galapagos|-05 -06|50 60|0101|CVF0 gNd0 rz0|25e3",
			"Pacific/Guam|GST GDT ChST|-a0 -b0 -a0|010101010102|JQ0 Rb0 1wp0 Rb0 5xd0 rX0 5sN0 zb1 1C0X On0 ULb0|17e4",
			"Pacific/Kiritimati|-1040 -10 +14|aE a0 -e0|012|nIaE B7Xk|51e2",
			"Pacific/Kosrae|+12 +11|-c0 -b0|01|1aAA0|66e2",
			"Pacific/Marquesas|-0930|9u|0||86e2",
			"Pacific/Pago_Pago|SST|b0|0||37e2",
			"Pacific/Nauru|+1130 +12|-bu -c0|01|maCu|10e3",
			"Pacific/Niue|-1130 -11|bu b0|01|libu|12e2",
			"Pacific/Norfolk|+1130 +1230 +11|-bu -cu -b0|0102|bHOu On0 1COp0|25e4",
			"Pacific/Noumea|+11 +12|-b0 -c0|0101010|jhp0 xX0 1PB0 yn0 HeP0 Ao0|98e3",
			"Pacific/Pitcairn|-0830 -08|8u 80|01|18Vku|56",
			"Pacific/Rarotonga|-1030 -0930 -10|au 9u a0|012121212121212121212121212|lyWu IL0 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu|13e3",
			"Pacific/Tongatapu|+13 +14|-d0 -e0|010101010|1csd0 15A0 1wo0 xz0 1Q10 xz0 zWN0 s00|75e3",
			"WET|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00"
		],
		"links": [
			"Africa/Abidjan|Africa/Accra",
			"Africa/Abidjan|Africa/Bamako",
			"Africa/Abidjan|Africa/Banjul",
			"Africa/Abidjan|Africa/Conakry",
			"Africa/Abidjan|Africa/Dakar",
			"Africa/Abidjan|Africa/Freetown",
			"Africa/Abidjan|Africa/Lome",
			"Africa/Abidjan|Africa/Nouakchott",
			"Africa/Abidjan|Africa/Ouagadougou",
			"Africa/Abidjan|Africa/Timbuktu",
			"Africa/Abidjan|Atlantic/Reykjavik",
			"Africa/Abidjan|Atlantic/St_Helena",
			"Africa/Abidjan|Etc/GMT",
			"Africa/Abidjan|Etc/GMT+0",
			"Africa/Abidjan|Etc/GMT-0",
			"Africa/Abidjan|Etc/GMT0",
			"Africa/Abidjan|Etc/Greenwich",
			"Africa/Abidjan|GMT",
			"Africa/Abidjan|GMT+0",
			"Africa/Abidjan|GMT-0",
			"Africa/Abidjan|GMT0",
			"Africa/Abidjan|Greenwich",
			"Africa/Abidjan|Iceland",
			"Africa/Cairo|Egypt",
			"Africa/Johannesburg|Africa/Maseru",
			"Africa/Johannesburg|Africa/Mbabane",
			"Africa/Lagos|Africa/Bangui",
			"Africa/Lagos|Africa/Brazzaville",
			"Africa/Lagos|Africa/Douala",
			"Africa/Lagos|Africa/Kinshasa",
			"Africa/Lagos|Africa/Libreville",
			"Africa/Lagos|Africa/Luanda",
			"Africa/Lagos|Africa/Malabo",
			"Africa/Lagos|Africa/Niamey",
			"Africa/Lagos|Africa/Porto-Novo",
			"Africa/Maputo|Africa/Blantyre",
			"Africa/Maputo|Africa/Bujumbura",
			"Africa/Maputo|Africa/Gaborone",
			"Africa/Maputo|Africa/Harare",
			"Africa/Maputo|Africa/Kigali",
			"Africa/Maputo|Africa/Lubumbashi",
			"Africa/Maputo|Africa/Lusaka",
			"Africa/Nairobi|Africa/Addis_Ababa",
			"Africa/Nairobi|Africa/Asmara",
			"Africa/Nairobi|Africa/Asmera",
			"Africa/Nairobi|Africa/Dar_es_Salaam",
			"Africa/Nairobi|Africa/Djibouti",
			"Africa/Nairobi|Africa/Kampala",
			"Africa/Nairobi|Africa/Mogadishu",
			"Africa/Nairobi|Indian/Antananarivo",
			"Africa/Nairobi|Indian/Comoro",
			"Africa/Nairobi|Indian/Mayotte",
			"Africa/Tripoli|Libya",
			"America/Adak|America/Atka",
			"America/Adak|US/Aleutian",
			"America/Anchorage|US/Alaska",
			"America/Argentina/Buenos_Aires|America/Buenos_Aires",
			"America/Argentina/Catamarca|America/Argentina/ComodRivadavia",
			"America/Argentina/Catamarca|America/Catamarca",
			"America/Argentina/Cordoba|America/Cordoba",
			"America/Argentina/Cordoba|America/Rosario",
			"America/Argentina/Jujuy|America/Jujuy",
			"America/Argentina/Mendoza|America/Mendoza",
			"America/Cayenne|Etc/GMT+3",
			"America/Chicago|CST6CDT",
			"America/Chicago|US/Central",
			"America/Denver|America/Shiprock",
			"America/Denver|MST7MDT",
			"America/Denver|Navajo",
			"America/Denver|US/Mountain",
			"America/Detroit|US/Michigan",
			"America/Edmonton|Canada/Mountain",
			"America/Fort_Wayne|America/Indiana/Indianapolis",
			"America/Fort_Wayne|America/Indianapolis",
			"America/Fort_Wayne|US/East-Indiana",
			"America/Halifax|Canada/Atlantic",
			"America/Havana|Cuba",
			"America/Indiana/Knox|America/Knox_IN",
			"America/Indiana/Knox|US/Indiana-Starke",
			"America/Jamaica|Jamaica",
			"America/Kentucky/Louisville|America/Louisville",
			"America/La_Paz|Etc/GMT+4",
			"America/Los_Angeles|PST8PDT",
			"America/Los_Angeles|US/Pacific",
			"America/Los_Angeles|US/Pacific-New",
			"America/Manaus|Brazil/West",
			"America/Mazatlan|Mexico/BajaSur",
			"America/Mexico_City|Mexico/General",
			"America/New_York|EST5EDT",
			"America/New_York|US/Eastern",
			"America/Noronha|Brazil/DeNoronha",
			"America/Panama|America/Atikokan",
			"America/Panama|America/Cayman",
			"America/Panama|America/Coral_Harbour",
			"America/Panama|EST",
			"America/Phoenix|America/Creston",
			"America/Phoenix|MST",
			"America/Phoenix|US/Arizona",
			"America/Puerto_Rico|America/Anguilla",
			"America/Puerto_Rico|America/Antigua",
			"America/Puerto_Rico|America/Aruba",
			"America/Puerto_Rico|America/Blanc-Sablon",
			"America/Puerto_Rico|America/Curacao",
			"America/Puerto_Rico|America/Dominica",
			"America/Puerto_Rico|America/Grenada",
			"America/Puerto_Rico|America/Guadeloupe",
			"America/Puerto_Rico|America/Kralendijk",
			"America/Puerto_Rico|America/Lower_Princes",
			"America/Puerto_Rico|America/Marigot",
			"America/Puerto_Rico|America/Montserrat",
			"America/Puerto_Rico|America/Port_of_Spain",
			"America/Puerto_Rico|America/St_Barthelemy",
			"America/Puerto_Rico|America/St_Kitts",
			"America/Puerto_Rico|America/St_Lucia",
			"America/Puerto_Rico|America/St_Thomas",
			"America/Puerto_Rico|America/St_Vincent",
			"America/Puerto_Rico|America/Tortola",
			"America/Puerto_Rico|America/Virgin",
			"America/Regina|Canada/Saskatchewan",
			"America/Rio_Branco|America/Porto_Acre",
			"America/Rio_Branco|Brazil/Acre",
			"America/Santiago|Chile/Continental",
			"America/Sao_Paulo|Brazil/East",
			"America/St_Johns|Canada/Newfoundland",
			"America/Tijuana|America/Ensenada",
			"America/Tijuana|America/Santa_Isabel",
			"America/Tijuana|Mexico/BajaNorte",
			"America/Toronto|America/Montreal",
			"America/Toronto|America/Nassau",
			"America/Toronto|Canada/Eastern",
			"America/Vancouver|Canada/Pacific",
			"America/Whitehorse|Canada/Yukon",
			"America/Winnipeg|Canada/Central",
			"Asia/Ashgabat|Asia/Ashkhabad",
			"Asia/Bangkok|Asia/Phnom_Penh",
			"Asia/Bangkok|Asia/Vientiane",
			"Asia/Bangkok|Etc/GMT-7",
			"Asia/Bangkok|Indian/Christmas",
			"Asia/Brunei|Asia/Kuching",
			"Asia/Brunei|Etc/GMT-8",
			"Asia/Dhaka|Asia/Dacca",
			"Asia/Dubai|Asia/Muscat",
			"Asia/Dubai|Etc/GMT-4",
			"Asia/Dubai|Indian/Mahe",
			"Asia/Dubai|Indian/Reunion",
			"Asia/Ho_Chi_Minh|Asia/Saigon",
			"Asia/Hong_Kong|Hongkong",
			"Asia/Jerusalem|Asia/Tel_Aviv",
			"Asia/Jerusalem|Israel",
			"Asia/Kathmandu|Asia/Katmandu",
			"Asia/Kolkata|Asia/Calcutta",
			"Asia/Kuala_Lumpur|Asia/Singapore",
			"Asia/Kuala_Lumpur|Singapore",
			"Asia/Macau|Asia/Macao",
			"Asia/Makassar|Asia/Ujung_Pandang",
			"Asia/Nicosia|Europe/Nicosia",
			"Asia/Qatar|Asia/Bahrain",
			"Asia/Rangoon|Asia/Yangon",
			"Asia/Rangoon|Indian/Cocos",
			"Asia/Riyadh|Antarctica/Syowa",
			"Asia/Riyadh|Asia/Aden",
			"Asia/Riyadh|Asia/Kuwait",
			"Asia/Riyadh|Etc/GMT-3",
			"Asia/Seoul|ROK",
			"Asia/Shanghai|Asia/Chongqing",
			"Asia/Shanghai|Asia/Chungking",
			"Asia/Shanghai|Asia/Harbin",
			"Asia/Shanghai|PRC",
			"Asia/Taipei|ROC",
			"Asia/Tehran|Iran",
			"Asia/Thimphu|Asia/Thimbu",
			"Asia/Tokyo|Japan",
			"Asia/Ulaanbaatar|Asia/Ulan_Bator",
			"Asia/Urumqi|Antarctica/Vostok",
			"Asia/Urumqi|Asia/Kashgar",
			"Asia/Urumqi|Etc/GMT-6",
			"Atlantic/Faroe|Atlantic/Faeroe",
			"Atlantic/South_Georgia|Etc/GMT+2",
			"Australia/Adelaide|Australia/South",
			"Australia/Brisbane|Australia/Queensland",
			"Australia/Broken_Hill|Australia/Yancowinna",
			"Australia/Darwin|Australia/North",
			"Australia/Hobart|Australia/Tasmania",
			"Australia/Lord_Howe|Australia/LHI",
			"Australia/Melbourne|Australia/Victoria",
			"Australia/Perth|Australia/West",
			"Australia/Sydney|Australia/ACT",
			"Australia/Sydney|Australia/Canberra",
			"Australia/Sydney|Australia/NSW",
			"Etc/UTC|Etc/UCT",
			"Etc/UTC|Etc/Universal",
			"Etc/UTC|Etc/Zulu",
			"Etc/UTC|UCT",
			"Etc/UTC|UTC",
			"Etc/UTC|Universal",
			"Etc/UTC|Zulu",
			"Europe/Belgrade|Europe/Ljubljana",
			"Europe/Belgrade|Europe/Podgorica",
			"Europe/Belgrade|Europe/Sarajevo",
			"Europe/Belgrade|Europe/Skopje",
			"Europe/Belgrade|Europe/Zagreb",
			"Europe/Berlin|Arctic/Longyearbyen",
			"Europe/Berlin|Atlantic/Jan_Mayen",
			"Europe/Berlin|Europe/Copenhagen",
			"Europe/Berlin|Europe/Oslo",
			"Europe/Berlin|Europe/Stockholm",
			"Europe/Brussels|CET",
			"Europe/Brussels|Europe/Amsterdam",
			"Europe/Brussels|Europe/Luxembourg",
			"Europe/Chisinau|Europe/Tiraspol",
			"Europe/Dublin|Eire",
			"Europe/Helsinki|Europe/Mariehamn",
			"Europe/Istanbul|Asia/Istanbul",
			"Europe/Istanbul|Turkey",
			"Europe/Lisbon|Portugal",
			"Europe/London|Europe/Belfast",
			"Europe/London|Europe/Guernsey",
			"Europe/London|Europe/Isle_of_Man",
			"Europe/London|Europe/Jersey",
			"Europe/London|GB",
			"Europe/London|GB-Eire",
			"Europe/Moscow|W-SU",
			"Europe/Paris|Europe/Monaco",
			"Europe/Prague|Europe/Bratislava",
			"Europe/Rome|Europe/San_Marino",
			"Europe/Rome|Europe/Vatican",
			"Europe/Warsaw|Poland",
			"Europe/Zurich|Europe/Busingen",
			"Europe/Zurich|Europe/Vaduz",
			"Indian/Maldives|Etc/GMT-5",
			"Indian/Maldives|Indian/Kerguelen",
			"Pacific/Auckland|Antarctica/McMurdo",
			"Pacific/Auckland|Antarctica/South_Pole",
			"Pacific/Auckland|NZ",
			"Pacific/Chatham|NZ-CHAT",
			"Pacific/Easter|Chile/EasterIsland",
			"Pacific/Gambier|Etc/GMT+9",
			"Pacific/Guadalcanal|Etc/GMT-11",
			"Pacific/Guadalcanal|Pacific/Pohnpei",
			"Pacific/Guadalcanal|Pacific/Ponape",
			"Pacific/Guam|Pacific/Saipan",
			"Pacific/Honolulu|HST",
			"Pacific/Honolulu|Pacific/Johnston",
			"Pacific/Honolulu|US/Hawaii",
			"Pacific/Kwajalein|Kwajalein",
			"Pacific/Pago_Pago|Pacific/Midway",
			"Pacific/Pago_Pago|Pacific/Samoa",
			"Pacific/Pago_Pago|US/Samoa",
			"Pacific/Palau|Etc/GMT-9",
			"Pacific/Port_Moresby|Antarctica/DumontDUrville",
			"Pacific/Port_Moresby|Etc/GMT-10",
			"Pacific/Port_Moresby|Pacific/Chuuk",
			"Pacific/Port_Moresby|Pacific/Truk",
			"Pacific/Port_Moresby|Pacific/Yap",
			"Pacific/Tahiti|Etc/GMT+10",
			"Pacific/Tarawa|Etc/GMT-12",
			"Pacific/Tarawa|Pacific/Funafuti",
			"Pacific/Tarawa|Pacific/Majuro",
			"Pacific/Tarawa|Pacific/Wake",
			"Pacific/Tarawa|Pacific/Wallis"
		]
	});


	return moment;
}));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-server-info', location = '/util/server-info/server-info.js' */
define("util/server-info",[],function(){"use strict";var e=WRM.data.claim("bamboo.web.resources.common:util-server-info.server-info");return Object.freeze({getTimeZoneId:function(){return e.timeZone.id},getTimeZoneName:function(){return e.timeZone.name}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:time-widget', location = '/widget/time/time.soy' */
// This file was automatically generated from time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.time.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.time == 'undefined') { bamboo.widget.time = {}; }


bamboo.widget.time.timestamp = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format) : BAMBOO.Time.format(opt_data.datetime, 'short')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.timestamp.soyTemplateName = 'bamboo.widget.time.timestamp';
}


bamboo.widget.time.relative = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format + 'Age') : BAMBOO.Time.format(opt_data.datetime, 'shortAge')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.relative.soyTemplateName = 'bamboo.widget.time.relative';
}


bamboo.widget.time.time = function(opt_data, opt_ignored) {
  return '<time datetime="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'timestamp')) + '" title="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'full')) + '"' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</time>';
};
if (goog.DEBUG) {
  bamboo.widget.time.time.soyTemplateName = 'bamboo.widget.time.time';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:time-widget', location = '/widget/time/time.js' */
(function (BAMBOO, moment) {
    BAMBOO.Time = {};

    var serverInfo = require('util/server-info');

    var hasOwn = Object.prototype.hasOwnProperty,
        dateFormatCache = {},
        dateTokenizer = /d{1,2}|'[^']+'|M{1,4}|y{2,4}|h{1,2}|H{1,2}|m{2}|s{2}|S{1,4}|Z{1,2}|z{1,2}|a|:|-|\/|\s+/g;

    function Type(str, isAge) {
        if (this instanceof Type) {
            this.key = str;
            this.isAge = isAge;
            return this;
        } else {
            return str && hasOwn.call(Type, str) ? Type[str] : null;
        }
    }

    for (var a = ['shortAge', 'longAge', 'short', 'long', 'full', 'timestamp', 'datetime'], i = 0, l = a.length, t; i < l; i++) {
        t = a[i];
        Type[t] = new Type(t, t.toLowerCase().indexOf('age') !== -1);
    }

    function getTextForRelativeAge(age, type, param) {
        switch(age) {
            case 'aMomentAgo':
                return type === Type.shortAge ?
                       "A moment ago" :
                       "A moment ago";
            case 'oneMinuteAgo':
                return type === Type.shortAge ?
                       "1 min ago" :
                       "1 minute ago";
            case 'xMinutesAgo':
                return type === Type.shortAge ?
                       AJS.format("{0} mins ago", param) :
                       AJS.format("{0} minutes ago", param);
            case 'oneHourAgo':
                return type === Type.shortAge ?
                       "1 hour ago" :
                       "1 hour ago";
            case 'xHoursAgo':
                return type === Type.shortAge ?
                       AJS.format("{0} hours ago", param) :
                       AJS.format("{0} hours ago", param);
            case 'oneDayAgo':
                return type === Type.shortAge ?
                       "Yesterday" :
                       "Yesterday";
            case 'xDaysAgo':
                return type === Type.shortAge ?
                       AJS.format("{0} days ago", param) :
                       AJS.format("{0} days ago", param);
            case 'oneWeekAgo':
                return type === Type.shortAge ?
                       "1 week ago" :
                       "1 week ago";
            default:
                return null;
        }
    }

    function createMoment(dateStr) {
        const timeZoneId = serverInfo.getTimeZoneId();
        return dateStr ? moment.tz(dateStr, timeZoneId) : moment.tz(timeZoneId);
    }

    function toMomentFormat(javaDateFormat) {
        if (hasOwn.call(dateFormatCache, javaDateFormat)) {
            return dateFormatCache[javaDateFormat];
        }
        var momentDateFormat = "", token;
        dateTokenizer.exec('');
        while (token = dateTokenizer.exec(javaDateFormat)) {
            token = token[0];
            switch(token.charAt(0)) {
                case "'":
                    momentDateFormat += '[' + token.substring(1, token.length-1) + ']';
                    break;
                case 'd':
                case 'y':
                case 'a':
                    momentDateFormat += token.toUpperCase();
                    break;
                default:
                    momentDateFormat += token;
            }
        }
        dateFormatCache[javaDateFormat] = momentDateFormat;
        return momentDateFormat;
    }
    
    function getFormatString(type) {
        switch (type.key) {
            case 'short':
            case 'shortAge':
                return "dd MMM yyyy";
            case 'long':
            case 'longAge':
                return "dd MMMM yyyy";
            case 'full':
                return "dd MMM yyyy hh:mm a";
            case 'timestamp':
                return "yyyy-MM-ddTHH:mm:ssZ";
            case 'datetime':
                return "dd MMM - hh:mm a";
            default:
                return null;
        }
    }

    function isYesterday(now, date) {
        var end = now.clone().add('d', 1).hours(0).minutes(0).seconds(0).milliseconds(0);
        while (end > now) {
            end.subtract('d', 1);
        }
        var start = end.clone().subtract('d', 1);
        return start <= date && date < end;
    }

    function getSecondsBetween(start, end) {
        return Math.floor(end.diff(start, 'seconds', true));
    }

    function getMinutesBetween(start, end) {
        return Math.floor(end.diff(start, 'minutes', true));
    }

    function getHoursBetween(start, end) {
        return end.diff(start, 'hours'); // diff rounds by default
    }

    function getDaysBetween(start, end) {
        return Math.floor(end.diff(start, 'days', true));
    }

    function getMonthsBetween(start, end) {
        return end.diff(start, 'months', true);
    }

    function formatDateWithFormatString(date, type) {
        var formatString = toMomentFormat(getFormatString(type));

        return date.format(formatString);
    }

    function formatDateWithRelativeAge(date, type, now) {
        now = now || createMoment();

        if (date <= now) {
            if (date > now.clone().subtract('m', 1)) {
                return getTextForRelativeAge('aMomentAgo', type);
            } else if (date > now.clone().subtract('m', 2)) {
                return getTextForRelativeAge('oneMinuteAgo', type);
            } else if (date > now.clone().subtract('m', 50)) {
                return getTextForRelativeAge('xMinutesAgo', type, getMinutesBetween(date, now));
            } else if (date > now.clone().subtract('m', 90)) {
                return getTextForRelativeAge('oneHourAgo', type);
            } else if (isYesterday(now, date) && date < now.clone().subtract('h', 5)) {
                return getTextForRelativeAge('oneDayAgo', type);
            } else if (date > now.clone().subtract('d', 1)) {
                return getTextForRelativeAge('xHoursAgo', type, getHoursBetween(date, now));
            } else if (date > now.clone().subtract('d', 7)) {
                return getTextForRelativeAge('xDaysAgo', type, Math.max(getDaysBetween(date, now), 2));// if it's not yesterday then don't say it's one day ago
            } else if (date > now.clone().subtract('d', 8)) {
                return getTextForRelativeAge('oneWeekAgo', type);
            }
        }
        return formatDateWithFormatString(date, type);
    }

    function formatDate(momentDate, type) {
        if (momentDate && type) {
            if (type.isAge) {
                return formatDateWithRelativeAge(momentDate, type);
            } else {
                return formatDateWithFormatString(momentDate, type);
            }
        } else {
            return null;
        }
    }

    /*
     * Currently only supports the default 'long' formatting.
     */
    function elapsedTime(dateFrom, dateTo) {
         dateTo = dateTo || createMoment();
         if (dateFrom && dateFrom <= dateTo) {
             var months = getMonthsBetween(dateFrom, dateTo);
             if (months < 1) {
                 var minutes = getMinutesBetween(dateFrom, dateTo);
                 if (minutes < 1) {
                     var seconds = getSecondsBetween(dateFrom, dateTo);
                     if (seconds < 1) {
                         return "\u003c 1 second";
                     } else if (seconds > 1) {
                         return AJS.format("{0} seconds", seconds);
                     } else {
                         return "1 second";
                     }
                 } else if (minutes > 1) {
                     return AJS.format("{0} minutes", minutes);
                 } else {
                     return "1 minute";
                 }
             } else {
                 return "more than a month";
             }
        }
        return null;
    }

    BAMBOO.Time.format = function (dateOrNumberOrString, typeString) {
        return formatDate(dateOrNumberOrString ? createMoment(dateOrNumberOrString) : null, Type(typeString));
    }

    BAMBOO.Time.elapsedTime = function (dateOrNumberOrStringFrom, dateOrNumberOrStringTo) {
        var dateFrom = dateOrNumberOrStringFrom ? createMoment(dateOrNumberOrStringFrom) : null;
        var dateTo = dateOrNumberOrStringTo ? createMoment(dateOrNumberOrStringTo) : null;
        return elapsedTime(dateFrom, dateTo);
    }

}(window.BAMBOO = (window.BAMBOO || {}), moment));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-deployment-release', location = '/feature/deployment/deployment-release.js' */
define('feature/deployment-release', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {

    'use strict';

    var DeploymentRelease = Brace.View.extend({

        mixins: [events.EventBusMixin],

        initialize: function(options) {
            this.data = {
                create: {},
                promote: {},
                rollback: false
            };

            if (options.event) {
                this.data[options.event] = options.data || {};
                this.triggerWrapperEvent(options.event, true);
            }

            this.onEvent([
                'release:change',
                'release:change:initial'
            ], this.onReleaseChange);

            this.onEvent([
                'branch:change',
                'branch:change:initial'
            ], this.onBranchChange);

            this.onEvent([
                'build:change',
                'build:change:initial'
            ], this.onBuildChange);

            this.onEvent('deploy:release:warning', this.onToggleWarning);
            this.onEvent('deploy:release:rollback', this.onToggleRollbackWarning);

            $(document).on('change',
                'form input:radio[name="releaseTypeOption"]',
                _.bind(this.onTypeChange, this)
            );
        },

        onBranchChange: function(instance) {
            switch (instance.$el.attr('id')) {
                case 'newReleaseBranchKey':
                    this.data.create.branch = $.trim(instance.$el.val());
                    this.triggerWrapperEvent('create');
                    break;
                case 'promoteReleaseBranchKey':
                    this.triggerWrapperEvent('promote');
                    break;
            }
        },

        onBuildChange: function(instance) {
            switch (instance.$el.attr('id')) {
                case 'newReleaseBuildResult':
                    this.data.create.build = $.trim(instance.$el.val());
                    this.data.create.resultsSummary = instance.getSelectedData();
                    this.triggerWrapperEvent('create');
                    break;
            }
        },

        onReleaseChange: function(instance) {
            switch (instance.$el.attr('id')) {
                case 'promoteVersion':
                    this.data.promote.release = instance.$el.val();
                    this.triggerWrapperEvent('promote');
                    break;
            }
        },

        onTypeChange: function() {
            var type = $('form input:radio[name="releaseTypeOption"]:checked').val();
            var warning = $('#rollbackWarning');

            type = $.trim(type).toLowerCase();

            if (type === 'create') {
                warning.toggleClass('hidden', !this.data.rollback);
            }

            this.triggerWrapperEvent(type);
        },

        onToggleWarning: function(instance) {
            var warning = $('#emptyBuildResults');
            var container = instance.$el.parents('.radio:first');

            if (this.data.create.build) {
                this.triggerEvent('build:show', container);
                this.triggerEvent('release:show', container);

                warning.addClass('hidden');
            }
            else {
                this.triggerEvent('build:hide', container);
                this.triggerEvent('release:hide', container);

                warning.removeClass('hidden');
            }
        },

        onToggleRollbackWarning: function(state) {
            this.data.rollback = state;

            $('#rollbackWarning').toggleClass(
                'hidden', !state
            );
        },

        getSelectedType: function() {
            return $('form input:radio[name="releaseTypeOption"]:checked')
                .val().toLowerCase();
        },

        triggerWrapperEvent: function(event, force) {
            if (force || this.getSelectedType() === event) {
                this.lastEvent = [
                    'deploy:release',
                    event, this.data[event]
                ];

                setTimeout(_.bind(function() {
                    if (this.lastEvent) {
                        this.triggerEvent.apply(this, this.lastEvent);
                        this.lastEvent = null;
                    }
                }, this), 100);
            }
        }

    });

    return DeploymentRelease;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-input', location = '/feature/release/release-input.js' */
define('feature/release-input', [
    'jquery',
    'underscore',
    'backbone',
    'brace',
    'util/events',
    'util/errors'
], function(
    $,
    _,
    Backbone,
    Brace,
    events,
    errors
) {

    'use strict';

    var ReleaseInputModel = Backbone.Model.extend({

        url: [
            AJS.contextPath(),
            'rest/api/latest/deploy/preview/versionName'
        ].join('/'),

        initialize: function(params) {
            this.initialParams = params || {};
        },

        fetch: function(options) {
            options.data = _.extend(
                this.initialParams,
                options.data
            );

            return Backbone.Model.prototype.fetch.call(this, options);
        }
    });

    var ReleaseInput = Brace.View.extend({

        mixins: [events.EventBusMixin],

        initialize: function(options) {
            this.params = null;
            this.data = null;

            this.$el.on('keyup', _.bind(_.debounce(
                this.onContentChange, 320 || options.timeout
            ), this));

            this.settings = {
                masterPickerId: options.masterPickerId
            };

            this.$icon = $(bamboo.feature.release.input.icon());
            $(this.$icon).insertAfter(this.$el).before(' ');

            this.dialog = AJS.InlineDialog(
                this.$icon, this.$icon.attr('id'),
                _.bind(this.onDialogShow, this), {
                    hideDelay: null,
                    offsetX: -60,
                    arrowOffsetX: -7,
                    width: 420
                }
            );

            this.model = new ReleaseInputModel(options.params);

            this.onEvent('build:change', this.onMasterChange);
            this.onEvent('build:change:initial', this.onMasterChangeInitial);
            this.onEvent('build:hide', this.onHide);
            this.onEvent('build:show', this.onShow);
        },

        onContentChange: function() {
            this.triggerEvent('release:change');
        },

        onMasterChange: function(instance) {
            if (
                this.settings.masterPickerId &&
                instance.$el.attr('id') !== this.settings.masterPickerId
            ) {
                return;
            }

            this.data = null;
            this.params = null;
            this.$el.val('');

            if (instance.$el.val()) {
                this.params = {
                    resultKey: instance.$el.val()
                };

                this.loadData(_.bind(function() {
                    this.$el.val(this.data.nextVersionName);
                    this.onContentChange();
                }, this));
            }
        },

        onMasterChangeInitial: function(instance) {
            if (
                this.settings.masterPickerId &&
                instance.$el.attr('id') !== this.settings.masterPickerId
            ) {
                return;
            }

            if (instance.$el.val()) {
                this.params = {
                    resultKey: instance.$el.val()
                };

                this.loadData();
            }
        },

        onDialogShow: function(content, trigger, showPopup) {
            content.css({ padding: '20px' });

            var handler = _.bind(function() {
                content.html(bamboo.feature.release.input.content({
                    item: this.data
                }));

                showPopup();
            }, this);

            if (this.data) {
                handler();
            }
            else {
                this.loadData(handler);
            }

            return false;
        },

        onHide: function(instance, container) {
            if (!container || container.find(this.$el).length) {
                this.$el.parents('.field-group:first').hide();
            }
        },

        onShow: function(instance, container) {
            if (!container || container.find(this.$el).length) {
                this.$el.parents('.field-group:first').show();
            }
        },

        loadData: function(callback) {
            if (this.params) {
                this.model.fetch({
                    data: this.params,
                    error: errors,
                    success: _.bind(function(instance, data) {
                        this.data = this.model.toJSON();

                        if (callback) {
                            callback();
                        }
                    }, this)
                });
            }
            else if (callback) {
                callback();
            }
        }

    });

    return ReleaseInput;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-input', location = '/feature/release/release-input.soy' */
// This file was automatically generated from release-input.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.release.input.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.release == 'undefined') { bamboo.feature.release = {}; }
if (typeof bamboo.feature.release.input == 'undefined') { bamboo.feature.release.input = {}; }


bamboo.feature.release.input.icon = function(opt_data, opt_ignored) {
  return '<a id="helpDialog-releaseInput" href="#" rel="help"><span class="aui-icon aui-icon-small aui-iconfont-info" data-unicode="UTF+E012" original-title="">Info</span></a>';
};
if (goog.DEBUG) {
  bamboo.feature.release.input.icon.soyTemplateName = 'bamboo.feature.release.input.icon';
}


bamboo.feature.release.input.content = function(opt_data, opt_ignored) {
  return '<div class="release-input-info">' + ((opt_data.item) ? (opt_data.item.isBranch) ? '<h3>' + soy.$$escapeHtml("Release version naming for branch deployments") + '</h3><br/>' + soy.$$escapeHtml("When creating releases from a plan branch, the following naming scheme applies:") + '<br><br><span>&lt;branchname&gt;-&lt;incremented number&gt;</span><br><br>' + soy.$$escapeHtml("Changing the release name in this form is a one-time change. The subsequent release from a plan branch will once again use the naming scheme above.") + '<br><br>' + soy.$$filterNoAutoescape(AJS.format("Only releases from your default branch make use of the \x3ca href\x3d\x22{0}\x22\x3erelease version naming scheme\x3c/a\x3e.","" + '/deploy/config/configureDeploymentProjectVersioning.action?id=' + opt_data.item.deploymentProjectId)) : '<h3>' + soy.$$escapeHtml("Release version naming scheme") + '</h3><br/>' + soy.$$escapeHtml("Releases in this deployment project are named according to the following release version naming scheme:") + '<br><span>' + soy.$$escapeHtml(opt_data.item.versionNamingScheme) + '</span><br><br>' + soy.$$escapeHtml("The default value in the Release field was computed using this formula. Changing the release name in this form is a one-time change and will not influence the release version naming scheme for subsequent releases.") + '<br><br>' + soy.$$filterNoAutoescape(AJS.format("You can \x3ca href\x3d\x22{0}\x22\x3echange the release version naming scheme\x3c/a\x3e for permanent changes.","" + '/deploy/config/configureDeploymentProjectVersioning.action?id=' + opt_data.item.deploymentProjectId)) : '<span>' + soy.$$escapeHtml("Please select a build result.") + '</span>') + '</div>';
};
if (goog.DEBUG) {
  bamboo.feature.release.input.content.soyTemplateName = 'bamboo.feature.release.input.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete', location = '/widget/autocomplete/autocomplete.js' */
define('widget/autocomplete', [
    'jquery',
    'underscore',
    'brace',
    'util/events'
], function(
    $,
    _,
    Brace,
    events
) {
    'use strict';

    /**
     * @module widget/autocomplete
     */

    var Autocomplete = Brace.View.extend({

        mixins: [
            events.EventBusMixin
        ],

        initialize: function(options) {
            this.data = [];

            options.initialValue = $.parseJSON(
                options.initialValue || null
            );

            if (_.isFunction(this.onInitSelection)) {
                options.initSelection = _.bind(this.onInitSelection, this);
            }

            this.settings = $.extend({
                escapeMarkup: function(m) {
                    return m;
                },
                placeholder: ' '
            }, options || {});

            if (!this.$el.val()) {
                if (!options.initialValue && options.loadAndProcess && this.onLoadAndProcess) {
                    this.settings.initSelection = _.bind(this.onLoadAndProcess, this);
                    this.$el.val('__LOADING__');
                }
            }

            this.$el.auiSelect2(this.settings);
            this.$el.on('change', _.bind(function() {
                $('#select2-drop-mask').hide();

                this.$el.auiSelect2('dropdown').hide();
                this.$el.auiSelect2('container')
                    .removeClass('select2-dropdown-open')
                    .removeClass('select2-container-active');
            }, this));

            this.onRegisterEvents();
        },

        onRegisterEvents: function() {
            this.proxyEvents('select',
                ['change', 'select2-open', 'select2-blur'],
                this.$el
            );
        },

        getSelectedData: function(callback) {
            var selected = this.$el.auiSelect2('data');

            if (!selected) {
                selected = _.find(this.data.results, _.bind(callback || function(item) {
                    return item.id === this.$el.val();
                }, this));
            }

            return selected;
        },

        initConfig: function(values) {
            var defaults = _.defaults(values || {}, {
                placeholder: this.settings.placeholder,
                data: []
            });

            this.$el.auiSelect2(_.defaults(
                defaults,
                this.settings
            ));

            return this;
        },

        getContainer: function() {
            return this.$el.auiSelect2('container');
        },

        addLoadingIcon: function() {
            var $icon = $(document.createElement('span'))
                .addClass('aui-icon aui-icon-wait');

            this.$el.siblings('.select2-container:first').append($icon);
            return this;
        },

        removeLoadingIcon: function() {
            setTimeout(_.bind(function() {
                this.$el.parent().find('.aui-icon-wait').fadeOut();
            }, this), 500);

            return this;
        },

        clearValue: function() {
            this.$el.auiSelect2('data', null);
            return this;
        },

        processData: function(data) {
            this.data = data;
            return this.data;
        },

        disable: function() {
            this.$el.auiSelect2('enable', false);
            return this;
        },

        enable: function() {
            this.$el.auiSelect2('enable', true);
            return this;
        }

    });

    return Autocomplete;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('Bamboo.Widget.Autocomplete', null, require('widget/autocomplete'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete', location = '/widget/autocomplete/autocomplete.soy' */
// This file was automatically generated from autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }


bamboo.widget.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.result.soyTemplateName = 'bamboo.widget.autocomplete.result';
}


bamboo.widget.autocomplete.selection = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.selection.soyTemplateName = 'bamboo.widget.autocomplete.selection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog', location = '/widget/dialog/dialog.js' */
define("widget/dialog",["jquery","underscore","brace","util/events"],function(t,i,n,e){"use strict";return n.View.extend({mixins:[e.EventBusMixin],initialize:function(n){this.settings=t.extend({templateContent:bamboo.widget.dialog.content,keypressListener:i.bind(this.onKeyPress,this),height:400,width:800,buttons:[{id:"cancel",label:"Close",type:"link"}]},n||{}),this.settings.$triggerEl?this.settings.$triggerEl.on("click",i.bind(function(t){t.preventDefault(),this.createInstance()},this)):this.createInstance()},createInstance:function(){this.dialog=new AJS.Dialog(this.settings),this.proxyEvents("dialog",["show.dialog","hide.dialog","remove.dialog"],AJS,"bind"),this.onCreateInstance(),i.each(this.dialog.getPage(0).button,function(t){"button-panel-button"!==t.item.attr("class")&&t.item.removeClass("button-panel-button")}),this.dialog.show()},onCreateInstance:function(){this.$dialogContent=t(this.settings.templateContent({content:bamboo.widget.dialog.loading()})),this.dialog.addPanel("",this.$dialogContent),this.settings.header?this.dialog.addHeader(this.settings.header):this.settings.$triggerEl&&this.dialog.addHeader(this.settings.$triggerEl.attr("title")),this.settings.buttons&&i.each(this.settings.buttons,i.bind(function(t){var n=this.dialog.addButton,e=this.onButtonClick;"link"===t.type&&(n=this.dialog.addLink),t.callback&&(e=function(){for(var i=arguments.length,n=Array(i),e=0;e<i;e++)n[e]=arguments[e];t.callback.apply(this,n),this.onButtonClick.apply(this,n)});var s=t.params?[t.id,t.params]:[t.id];n.apply(this.dialog,[t.label,i.bind(function(){i.bind(e,this).apply(this,s)},this),t.cssClass])},this)),i.isString(this.settings.content)?this.onContentLoaded(this.settings.content):i.isFunction(this.settings.content)?this.settings.content().then(this.onContentLoaded.bind(this),this.onContentLoadError.bind(this)):i.isObject(this.settings.content)?this.onContentLoaded(this.settings.content.removeClass("hidden")):this.settings.$triggerEl&&t.ajax({url:this.settings.$triggerEl.attr("href"),data:{"bamboo.successReturnMode":"json",decorator:"nothing"},cache:!1}).done(this.onContentLoaded.bind(this)).fail(this.onContentLoadError.bind(this))},onContentLoaded:function(t){this.$dialogContent.empty(),this.$dialogContent.append(t)},onContentLoadError:function(){this.$dialogContent.empty()},onButtonClick:function(t){"cancel"===t&&this.dialog.remove()},onKeyPress:function(t){27===t.which&&this.dialog.remove()}})}),AJS.namespace&&AJS.namespace("Bamboo.Widget.Dialog",null,require("widget/dialog"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog', location = '/widget/dialog/dialog.soy' */
// This file was automatically generated from dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.dialog.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.dialog == 'undefined') { bamboo.widget.dialog = {}; }


bamboo.widget.dialog.loading = function(opt_data, opt_ignored) {
  return '<span class="icon icon-loading aui-dialog-content-loading"></span>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.loading.soyTemplateName = 'bamboo.widget.dialog.loading';
}


bamboo.widget.dialog.content = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.content.soyTemplateName = 'bamboo.widget.dialog.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-error', location = '/widget/dialog-error/dialog-error.js' */
define("widget/dialog-error",["jquery","underscore","widget/dialog","exports"],function(t,e,n,i){"use strict";var o=n.extend({defaultSettings:{id:"error-dialog",height:270,width:600,header:"An unexpected error has occurred",buttons:[{id:"reload",label:"Reload page",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},initialize:function(t){var i=t||{};i.content||(i.content="Please try reloading the page."),n.prototype.initialize.call(this,e.defaults(i,this.defaultSettings))},onButtonClick:function(t){for(var i,o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];if((i=n.prototype.onButtonClick).call.apply(i,[this,t].concat(a)),"reload"===t){var r=this.dialog.getPage(0).buttonpanel;r.prepend(aui.icons.icon({size:"small",icon:"wait"})),r.find(":button").attr("disabled",!0),e.delay(function(){window.location.reload()},500)}}});i.Dialog=o,i.callback=function(t){var e=AJS.popup.current;return e&&(e.hide(),e.remove()),AJS.undim(),new o({content:t})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-error-helper', location = '/util/error-helper/error-helper.js' */
define("util/error-helper",["widget/dialog-error"],function(r){"use strict";var e=bamboo.util.error.helper;return Object.freeze({getErrorFromResponse:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return e;if(r.responseJSON)return this.getErrorFromResponse(r.responseJSON,e);if(r.responseText||r.data)try{var o=JSON.parse(r.responseText||r.data);return this.getErrorFromResponse(o,e)}catch(r){}var t=null;return r.message?t=r.message:r.errors&&(t=r.errors.join(" ").trim()),t||e},displayErrorDialog:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.callback.call(null,e.dialogMessage({content:o}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-error-helper', location = '/util/error-helper/error-helper.soy' */
// This file was automatically generated from error-helper.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.util.error.helper.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.util == 'undefined') { bamboo.util = {}; }
if (typeof bamboo.util.error == 'undefined') { bamboo.util.error = {}; }
if (typeof bamboo.util.error.helper == 'undefined') { bamboo.util.error.helper = {}; }


bamboo.util.error.helper.dialogMessage = function(opt_data, opt_ignored) {
  return ((opt_data.content) ? '<p><strong class="unexpected-error-content">' + soy.$$escapeHtml(opt_data.content) + '</strong></p>' : '') + '<p>' + soy.$$escapeHtml("Please try reloading the page.") + '</p>';
};
if (goog.DEBUG) {
  bamboo.util.error.helper.dialogMessage.soyTemplateName = 'bamboo.util.error.helper.dialogMessage';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-errors', location = '/util/errors/errors.js' */
define("util/errors",["util/error-helper"],function(r){"use strict";function e(r){return 0===r.status&&"abort"===r.statusText}return function(t){if(!e(t)){var o=r.getErrorFromResponse(t);r.displayErrorDialog(o)}}}),AJS.namespace&&AJS.namespace("Bamboo.Util.ErrorHandler",null,require("util/errors"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-ajax', location = '/util/ajax/ajax.js' */
define("util/ajax",["jquery","underscore","util/errors"],function(r,e,n){"use strict";var t={contentType:"application/json",dataType:"json",async:!0,cache:!1};return function(){var a=(arguments.length<=0?void 0:arguments[0])||{};return e.isString(a)&&(a={url:a}),a.error||(a.error=n),r.ajax(e.defaults(a,t))}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete-ajax', location = '/widget/autocomplete/autocomplete-ajax.js' */
define('widget/autocomplete-ajax', [
    'jquery',
    'underscore',
    'widget/autocomplete',
    'util/events',
    'util/ajax',
    'util/errors'
], function(
    $,
    _,
    Autocomplete,
    events,
    ajax,
    errors
) {

    'use strict';

    var AutocompleteAjax = Autocomplete.extend({

        mixins: [
            events.EventBusMixin
        ],

        initialize: function(options) {
            this.params = $.extend({
                'max-results': 10
            }, this.params || {});

            if (_.isFunction(this.onFormatSelection)) {
                options.formatSelection = _.bind(this.onFormatSelection, this);
            }

            if (_.isFunction(this.onFormatResult)) {
                options.formatResult = _.bind(this.onFormatResult, this);
            }

            options.ajax.quietMillis = options.ajax.quietMillis || 320;

            if (_.isUndefined(options.cache) || !!options.cache) {
                options.ajax.resultsCallback = options.ajax.results;
                options.ajax.results = null;

                options.query = _.debounce(
                    _.bind(this.queryAjaxCache, this),
                    options.ajax.quietMillis
                );

                if (!options.ajax.params) {
                    if (_.isFunction(this.onRemoteData)) {
                        options.ajax.params = {
                            error: _.bind(this.onRemoteData, this)
                        };
                    }
                    else {
                        options.ajax.params = {
                            error: _.bind(function(jqXHR, textStatus, errorThrown) {
                                this.$el.auiSelect2('close');
                                errors(
                                    jqXHR, textStatus, errorThrown
                                );
                            }, this)
                        };
                    }
                }
            }

            Autocomplete.prototype.initialize.apply(
                this, [options || {}]
            );
        },

        queryAjaxCache: function(query) {
            this.cache = this.cache || {
                initial: {},
                term: {}
            };

            var term = $.trim(query.term);

            query.key = JSON.stringify(
                this.settings.ajax.data(term, query.page || 1, true)
            );

            var cache = (term.length) ?
                this.cache.term[query.key] :
                this.cache.initial[query.key];

            if (!_.isEmpty(cache)) {
                query.callback(cache);
                return;
            }

            this.settings.ajax.results = _.bind(function(data, page) {
                var response = this.settings.ajax
                    .resultsCallback(data, page);

                if (!response.results.length && this.settings.ajax.empty) {
                    response = {
                        results: this.settings.ajax.empty.call(this, query.term),
                        more: false
                    };
                }

                if (term) {
                    this.cache.term[query.key] = response;
                }
                else {
                    this.cache.initial[query.key] = response;
                }

                return response;
            }, this);

            window.Select2.query.ajax($.extend({
                transport: ajax
            }, this.settings.ajax))(query);
        },

        addQueryCache: function(request, data) {
            var key = JSON.stringify(request);
            data = data || this.data;

            if (!key.query || !key.query.length) {
                this.cache.initial[key] = data;
            }
            else {
                this.cache.term[key] = data;
            }

            return this;
        },

        clearQueryCache: function() {
            this.cache = {
                initial: {},
                term: {}
            };

            return this;
        }

    });

    return AutocompleteAjax;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-autocomplete', location = '/feature/release/release-autocomplete.js' */
define('feature/release-autocomplete', [
    'jquery',
    'underscore',
    'widget/autocomplete-ajax',
    'util/events',
    'util/ajax'
], function(
    $,
    _,
    AutocompleteAjax,
    events,
    ajax
) {

    'use strict';

    var ReleaseAutocomplete = AutocompleteAjax.extend({

        mixins: [events.EventBusMixin],

        initialize: function(options) {
            this.params = options.params || {};

            if (options.params) {
                delete options.params;
            }

            var dataCallback = _.bind(function(term, page) {
                return $.extend({
                    searchTerm: term,
                    'start-index': Math.max(
                        (page - 1) * this.params['max-results'], 0
                    ),
                    chronologicalOrder: true
                }, this.params);
            }, this);

            var settings = {
                minimumInputLength: 0,
                ajax: {
                    url: AJS.contextPath() + '/rest/api/latest/search/versions',
                    dataType: 'json',
                    data: dataCallback,
                    results: _.bind(function(data, page) {
                        return this.processData({
                            results: data.searchResults,
                            more: data.size ? data.size > (page * this.params['max-results']) : false
                        });
                    }, this)
                }
            };

            AutocompleteAjax.prototype.initialize.apply(
                this, [$.extend(settings, options || {})]
            );
        },

        onRegisterEvents: function() {
            this.proxyEvents('release', ['change'], this.$el);
            var events = ['branch:change'];

            if (!this.$el.val()) {
                events.push('branch:change:initial');
            }

            this.onEvent(events, this.onMasterChange);
        },

        onLoadAndProcess: function(element, callback) {
            if (this.currentRequest && this.currentRequest.readyState !== 4) {
                this.currentRequest.abort();
            }

            var settings = _.defaults({
                data: this.settings.ajax.data('', 1)
            }, this.settings.ajax);

            this.currentRequest = ajax(settings);
            this.currentRequest.done(_.bind(function(data) {
                    var selected = data.searchResults[0];

                    if (selected && selected.id) {
                        this.$el.val(selected.id);
                        this.$el.select2('data', selected);
                    }

                    this.processData({
                        results: data.searchResults,
                        more: data.size ? data.size > this.params['max-results'] : false
                    });

                    this.triggerEvent('release:change');

                    if (callback) {
                        callback(selected);
                    }
                }, this));
        },

        onFormatResult: function(item) {
            if (!_.isEmpty(item)) {
                return bamboo.widget.autocomplete.result({
                    name: item.searchEntity.name
                });
            }
        },

        onFormatSelection: function(item) {
            if (!_.isEmpty(item)) {
                return bamboo.widget.autocomplete.selection({
                    name: item.searchEntity.name
                });
            }
        },

        onMasterChange: function(instance) {
            if (
                this.settings.masterPickerId &&
                instance.$el.attr('id') !== this.settings.masterPickerId
            ) {
                return;
            }

            this.params.branchKey = '';
            this.clearValue();

            var value = instance.getSelectedData();

            if (value) {
                this.params.branchKey = value.searchEntity.key;
                this.onLoadAndProcess();
            }
        }

    });

    return ReleaseAutocomplete;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:feature-release-autocomplete', location = '/feature/release/release-autocomplete.soy' */
// This file was automatically generated from release-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.release.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.release == 'undefined') { bamboo.feature.release = {}; }
if (typeof bamboo.feature.release.autocomplete == 'undefined') { bamboo.feature.release.autocomplete = {}; }


bamboo.feature.release.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.feature.release.autocomplete.result.soyTemplateName = 'bamboo.feature.release.autocomplete.result';
}


bamboo.feature.release.autocomplete.selection = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.feature.release.autocomplete.selection.soyTemplateName = 'bamboo.feature.release.autocomplete.selection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:piecon-js', location = '/scripts/piecon/piecon.js' */
//
// piecon.js
//
// https://github.com/lipka/piecon
//
// Copyright (c) 2012 Lukas Lipka <lukaslipka@gmail.com>. All rights reserved.
//
// Licenced under MIT Licence
//
// Modified by Atlassian
(function($, Piecon) {
    var currentFavicon = null;
    var originalFavicon = null;
    var originalTitle = null;
    var canvas = null;
    var options = {};
    var defaults = {
        color: '#0065ff',
        //background: '#999',
        background: '#ccd9ea',
        shadow: '#fff',
        fallback: false
    };

    var isRetina = window.devicePixelRatio > 1;

    var ua = (function () {
        var agent = navigator.userAgent.toLowerCase();
        return function (browser) {
            return agent.indexOf(browser) !== -1;
        };
    }());

    var browser = {
        ie: ua('msie'),
        chrome: ua('chrome'),
        webkit: ua('chrome') || ua('safari'),
        safari: ua('safari') && !ua('chrome'),
        mozilla: ua('mozilla') && !ua('chrome') && !ua('safari')
    };

    var getFaviconTag = function() {
        var links = $("head").find("link");

        for (var l = links.length, i = l-1; i >= 0; i--) {
            if (links[i].getAttribute('rel') === 'icon' || links[i].getAttribute('rel') === 'shortcut icon') {
                return links[i];
            }
        }
        return false;
    };

    var removeFaviconTag = function() {
        var $head = $("head");
        $head.find("link[rel='icon']").remove();
        $head.find("link[rel='shortcut icon']").remove();
    };

    var setFaviconTag = function(url) {
        removeFaviconTag();
        $("head").append("<link rel='icon' type='image/x-icon' href='" + url + "'/>")
    };

    var getCanvas = function () {
        if (!canvas) {
            canvas = document.createElement("canvas");
            if (isRetina) {
                canvas.width = 32;
                canvas.height = 32;
            } else {
                canvas.width = 16;
                canvas.height = 16;
            }
        }

        return canvas;
    };

    var drawFavicon = function(percentage) {
        var canvas = getCanvas();
        var context = canvas.getContext("2d");
        var percentage = percentage || 0;
        var src = currentFavicon;

        var faviconImage = new Image();
        faviconImage.onload = function() {
            if (context) {
                context.clearRect(0, 0, canvas.width, canvas.height);

                // Draw empty circle
                context.beginPath();
                context.arc(canvas.width / 2, canvas.height / 2, Math.min(canvas.width / 2 -1 , canvas.height / 2 -1), 0, Math.PI * 2, false);
                context.lineWidth = isRetina ? 2.0 : 1.0;
                context.strokeStyle = options.color;
                context.stroke();

                // Draw pie
                if (percentage > 0) {
                    context.beginPath();
                    context.moveTo(canvas.width / 2, canvas.height / 2);
                    context.arc(canvas.width / 2, canvas.height / 2, Math.min(canvas.width / 2 - 1, canvas.height / 2 -1), (-0.5) * Math.PI, (-0.5 + 2 * percentage / 100) * Math.PI, false);
                    context.lineTo(canvas.width / 2, canvas.height / 2);
                    context.fillStyle = options.color;
                    context.fill();
                }

                setFaviconTag(canvas.toDataURL());
            }
        };

        // allow cross origin resource requests if the image is not a data:uri
        // as detailed here: https://github.com/mrdoob/three.js/issues/1305
        if (!src.match(/^data/)) {
            faviconImage.crossOrigin = 'anonymous';
        }

        faviconImage.src = src;
    };

    var updateTitle = function(percentage) {
        if (percentage > 0) {
            document.title = '(' + percentage + '%) ' + originalTitle;
        } else {
            document.title = originalTitle;
        }
    };

    Piecon.setOptions = function(custom) {
        options = {};

        for (var key in defaults){
            options[key] = custom.hasOwnProperty(key) ? custom[key] : defaults[key];
        }

        return this;
    };

    Piecon.setProgress = function(percentage) {
        if (!originalTitle) {
            originalTitle = document.title;
        }

        if (!originalFavicon || !currentFavicon) {
            var tag = getFaviconTag();
            originalFavicon = currentFavicon = tag ? tag.getAttribute('href') : '/favicon.ico';
        }

        if (!isNaN(parseFloat(percentage)) && isFinite(percentage)) {
            if (!getCanvas().getContext || browser.ie || browser.safari || options.fallback === true) {
                // Fallback to updating the browser title if unsupported
                return updateTitle(percentage);
            } else if (options.fallback === 'force') {
                updateTitle(percentage);
            }

            return drawFavicon(percentage);
        }

        return false;
    };

    Piecon.reset = function() {
        if (originalTitle) {
            document.title = originalTitle;
        }

        if (originalFavicon) {
            currentFavicon = originalFavicon;
            setFaviconTag(currentFavicon);
        }
    };

    Piecon.setFavicon = function(url)
    {
        if (!browser.ie)
        {
            setFaviconTag(url);
        }
    };

    Piecon.browserSupportsDynamicFavicon = function()
    {
        return !browser.ie && !browser.safari;
    };

    Piecon.setOptions(defaults);
}(jQuery, window.Piecon = (window.Piecon || {})));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:piecon-js', location = '/scripts/piecon/favicon-update.js' */
(function ($, BAMBOO) {
    BAMBOO.FaviconUpdate = function (opts) {
        var resourcePrefix = opts.resourcePrefix,
            url = opts.faviconRestUrl,
            update = function () {
                $.ajax({
                           url: url,
                           dataType: "json",
                           cache: false,
                           success: function (json) {
                               Piecon.setFavicon(resourcePrefix + json.faviconUrl);
                           }
                       });
                // Update again in 20 seconds
                setTimeout(update, 20000);
            };
        return {
            init: function () {
                update();
            }
        };
    }
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.icons.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.icons == 'undefined') { widget.icons = {}; }


widget.icons.icon = function(opt_data, opt_ignored) {
  return '<span class="icon icon-' + soy.$$escapeHtml(opt_data.type) + ' ' + ((opt_data.reversed) ? 'icon-reversed' : '') + '" ' + ((opt_data.text && opt_data.showTitle) ? 'title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.icon.soyTemplateName = 'widget.icons.icon';
}


widget.icons.fontIcon = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.fontIcon.soyTemplateName = 'widget.icons.fontIcon';
}


widget.icons.auiFontLink = function(opt_data, opt_ignored) {
  return '<a ' + ((opt_data.text) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '" ' : '') + 'href="' + soy.$$escapeHtml("" + opt_data.relativeUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.iconType) + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</span></a>';
};
if (goog.DEBUG) {
  widget.icons.auiFontLink.soyTemplateName = 'widget.icons.auiFontLink';
}


widget.icons.statusIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.status == 'approve' || opt_data.status == 'project-success' || opt_data.status == 'Successful' || opt_data.status == 'SUCCESS' || opt_data.status == 'successful' || opt_data.status == 'successful-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'successful-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'error' || opt_data.status == 'project-fail' || opt_data.status == 'Failed' || opt_data.status == 'FAILED' || opt_data.status == 'failed' || opt_data.status == 'failed-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'failed-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-cancelled' || opt_data.status == 'NotBuilt' || opt_data.status == 'notbuilt' || opt_data.status == 'NOT_BUILT' || opt_data.status == 'Unknown' || opt_data.status == 'UNKNOWN' || opt_data.status == 'unknown' || opt_data.status == 'incomplete-build') ? widget.icons.fontIcon({type: 'incomplete-build', text: opt_data.text, showTitle: opt_data.text ? true : false}) : (opt_data.status == 'task-in-progress' || opt_data.status == 'Pending' || opt_data.status == 'PENDING' || opt_data.status == 'pending' || opt_data.status == 'Queued' || opt_data.status == 'QUEUED' || opt_data.status == 'queued' || opt_data.status == 'queued-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'queued-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-disabled' || opt_data.status == 'disabled' || opt_data.status == 'project-none' || opt_data.status == 'NeverExecuted' || opt_data.status == 'skipped' || opt_data.status == 'Suspended' || opt_data.status == 'plan-disabled') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'plan-disabled', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'running-build' || opt_data.status == 'project-current' || opt_data.status == 'Building' || opt_data.status == 'BUILDING' || opt_data.status == 'building' || opt_data.status == 'InProgress' || opt_data.status == 'INPROGRESS' || opt_data.status == 'IN_PROGRESS' || opt_data.status == 'inprogress') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'running-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : widget.icons.icon({type: opt_data.status + (opt_data.reversed ? ' icon-reversed' : ''), text: opt_data.text, showTitle: opt_data.text ? true : false}));
};
if (goog.DEBUG) {
  widget.icons.statusIcon.soyTemplateName = 'widget.icons.statusIcon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/lozenges.soy' */
// This file was automatically generated from lozenges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.lozenges.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.lozenges == 'undefined') { widget.lozenges = {}; }


widget.lozenges.lozenge = function(opt_data, opt_ignored) {
  return '<span class="lozenge lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.lozenge.soyTemplateName = 'widget.lozenges.lozenge';
}


widget.lozenges.auilozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' aui-lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.auilozenge.soyTemplateName = 'widget.lozenges.auilozenge';
}


widget.lozenges.branch = function(opt_data, opt_ignored) {
  return '<span class="' + ((opt_data.cssClass) ? soy.$$escapeHtml(opt_data.cssClass) : 'lozenge-newline') + '">' + ((opt_data.label) ? '<span class="inline-label">' + soy.$$escapeHtml(opt_data.label) + '</span> ' : '') + '<span class="lozenge branch-lozenge monospace" title="' + soy.$$escapeHtml(opt_data.planBranchName) + '"><span class="branch">' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + '<span class="name">' + soy.$$escapeHtml(opt_data.planBranchName) + '</span></span></span></span>';
};
if (goog.DEBUG) {
  widget.lozenges.branch.soyTemplateName = 'widget.lozenges.branch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/agent.soy' */
// This file was automatically generated from agent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.agent.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.agent == 'undefined') { widget.agent = {}; }


widget.agent.renderAgentNameLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.type == 'ELASTIC') ? (true) ? '<a href="' + soy.$$escapeHtml("" + '/admin/elastic/manageElasticInstances.action') + '">' + widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) + '</a>' : widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) : '') + ((opt_data.showAdminLink) ? '<a href="' + soy.$$escapeHtml("" + '/admin/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>' : '<a href="' + soy.$$escapeHtml("" + '/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>');
};
if (goog.DEBUG) {
  widget.agent.renderAgentNameLink.soyTemplateName = 'widget.agent.renderAgentNameLink';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/plan.soy' */
// This file was automatically generated from plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.plan.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.plan == 'undefined') { widget.plan = {}; }


widget.plan.renderPlanNameLink = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) + ' &rsaquo; ' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + ' ' : '') + soy.$$escapeHtml(opt_data.plan.buildName) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLink.soyTemplateName = 'widget.plan.renderPlanNameLink';
}


widget.plan.renderPlanNameLinkWithoutBranch = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) : soy.$$escapeHtml(opt_data.plan.buildName)) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLinkWithoutBranch.soyTemplateName = 'widget.plan.renderPlanNameLinkWithoutBranch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/buildresult.soy' */
// This file was automatically generated from buildresult.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.buildresult.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.buildresult == 'undefined') { widget.buildresult = {}; }


widget.buildresult.resultStatusAndLink = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy5 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <a href="' + soy.$$escapeHtml("" + '/browse/' + opt_data.resultSummary.planResultKey.key) + '" class="' + soy.$$escapeHtml(resultClass__soy5) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</a>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatusAndLink.soyTemplateName = 'widget.buildresult.resultStatusAndLink';
}


widget.buildresult.resultStatus = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy18 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <span class="' + soy.$$escapeHtml(resultClass__soy18) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</span>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatus.soyTemplateName = 'widget.buildresult.resultStatus';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jquery/plugins/bamboo/progressbar.js' */
/**
 * Progress Bar jQuery plugin
 *
 * Options:
 * - value  {number}    Default: 0
 *      The value of the progressBar.
 *      Can be set when initialising (first creating) the progressBar.
 *          eg. $(".selector").progressBar({ value: 40 });
 *      Get or set the value option after initialisation:
 *          //getter
 *          var value = $(".selector").progressBar("option", "value");
 *          //setter
 *          $(".selector").progressBar("option", "value", 40);
 *
 * - text   {string}    Default: &nbsp;
 *      The text shown in the progressBar.
 *      Can be set when initialising (first creating) the progressBar.
 *          eg. $(".selector").progressBar({ text: "40% complete" });
 *      Get or set the value option after initialisation:
 *          //getter
 *          var text = $(".selector").progressBar("option", "text");
 *          //setter
 *          $(".selector").progressBar("option", "text", "40% complete");
 *
 * Initialisation:
 * $("#myBar").progressBar();
 *
 * This will turn the target element (in this case <div id="myBar"></div>) into a progress bar using the
 * default options. If the HTML for the progress bar is already contained within the target element the plugin will
 * initialise by extracting the data from the HTML, which from then onward can be updated using the plugin methods.
 *
 * You could also pass an object as the first parameter containing your own options with which to initialise the
 * progress bar. eg. $("#myBar").progressBar({ value: 40, text: "40% complete" });
 *
 * Methods:
 * - progressBar("destroy")
 *      Removes any data and bindings that were added to the element by the plugin leaving just the HTML.
 *
 * - progressBar("option", optionName, [value])
 *      Get or set any progressBar option. If no value is specified, will act as a getter.
 *
 * - progressBar("option", [options])
 *      Get or set multiple progressBar options at once by providing an options object. If options is not specified,
 *      will act as a getter.
 * 
 */
(function ($) {
    $.fn.progressBar = function (options) {
        if (typeof options == "string") {
            if (options == "option") {
                if (arguments.length == 1) { // getter
                    var retArr = [];
                    this.each(function () {
                        retArr.push($(this).data("options"));
                    });
                    return retArr;
                } else if (arguments.length == 2 && typeof arguments[1] == "string") { // individual option getter
                    var ret,
                        opt = arguments[1];
                    this.each(function () {
                        var $el = $(this);
                        ret = (typeof ret == "undefined") ? $el.data("options")[opt] : ret + $el.data("options")[opt];
                    });
                    return ret;
                } else if (arguments.length == 2 && typeof arguments[1] == "object") { // option object setter
                    var newOpts = arguments[1];
                    if (typeof newOpts.text != "undefined" && (newOpts.text == null || newOpts.text == "")) {
                        newOpts.text = $.fn.progressBar.defaults.text;
                    }
                    return this.each(function () {
                        var $el = $(this);
                        $el.data("options", $.extend($el.data("options"), newOpts)).trigger("updateProgressBar");
                    });
                } else if (arguments.length == 3 && typeof arguments[1] == "string") { // individual option setter
                    var key = arguments[1],
                        newVal = arguments[2];
                    if (key == "text" && (newVal == null || newVal == "")) {
                        newVal = $.fn.progressBar.defaults.text;
                    }
                    return this.each(function () {
                        var $el = $(this);
                        var currentOptions = $el.data("options");
                        currentOptions[key] = newVal;
                        $el.data("options", currentOptions).trigger("updateProgressBar");
                    });
                }
            } else if (options == "destroy") {
                return this.each(function () {
                    $(this).removeData("options").removeData("bar").removeData("text").unbind("updateProgressBar");
                });
            }
        } else { // init
            if (typeof options != "undefined" && typeof options.text != "undefined" && (options.text == null || options.text == "")) {
                delete options.text;
            }
            var opts = $.extend({}, $.fn.progressBar.defaults, options);
            return this.each(function () {
                var $el = $(this);
                $el.bind("updateProgressBar", function (e) {
                    var $el = $(this),
                        options = $el.data("options");
                    $el.data("bar").width(Math.max(0, Math.min(100, options.value)) + "%");
                    $el.data("text").html(options.text);
                });
                if ($(".progress-bar, .progress-text", this).length == 2) { // check if HTML for progressBar already exists
                    var bar = $(".progress-bar", this),
                        text = $(".progress-text", this),
                        optsFromExisting = {};
                    if (typeof options == "undefined") {
                        var barWidth = bar.clone().width(), // clone the element so we're working with a detached element, then get the detached element's width which won't be in px, it'll be the proper percentage
                            barText = text.text();
                        optsFromExisting.value = barWidth;
                        if (barText != null && barText != "") {
                            optsFromExisting.text = barText;
                        }
                    }
                    $el.data("options", $.extend({}, opts, optsFromExisting))
                       .data("bar", bar)
                       .data("text", text)
                       .trigger("updateProgressBar");
                } else {
                    $el.empty()
                       .data("options", opts)
                       .data("bar", $('<div class="progress-bar" style="width: ' + Math.max(0, Math.min(100, opts.value)) + '%;" />').appendTo(this))
                       .data("text", $('<div class="progress-text">' + opts.text + '</div>').appendTo(this));
                }
                if (!$el.hasClass("progress")) {
                    $el.addClass("progress");
                }
            });
        }
    };
    $.fn.progressBar.defaults = {
        value: 0,
        text: "&nbsp;"
    };
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jquery/plugins/bamboo/cronbuilder.js' */
(function ($)
{
    /**
     * Creates a Cron builder on the page for a specific field.  The builder makes up two form components, the text display
     * (showing the pretty cron expression) and a hidden field (with the raw cron expression)
     * The value to be submitted can only be updated via the cron buidler dialog.
     *
     * USAGE
     * ------
     * Call against display field e.g:
     *
     *   AJS.$("#displayFieldId").cronBuilder({});
     *
     * Arguments (all required)
     *
     * opts {
     *  hiddenFieldSelector:    selector for the field that will be submited as part of the form (usually a hidden field)
     *  dialogTrigger:          html for the cron builder trigger
     *  eventNamespace:         unique namespace for this dialog click event
     *  contextPath:            context path for bamboo instance (used when generating urls;)
     *  dialogSubmitButtonText: text for the dialog submit button
     *  dialogHeadingText:      text for the dialog heading
     * }
     });
     */
    $.fn.cronBuilder = function (opts)
    {
        return this.each(function ()
                         {
                             var $this = $(this),
                                     initialCron = $(opts.hiddenFieldSelector).val(),
                                     $dialogTrigger = $(opts.dialogTrigger),

                                     addCronExpression = function (result)
                                     {
                                         //update fields
                                         $(opts.hiddenFieldSelector).val(result.cronExpression);
                                         $this.text(result.prettyCronExpression);

                                         // need to remove the old dialog and reattach with the new cron expression as the arg.
                                         $($dialogTrigger).unbind("click." + opts.eventNamespace);
                                         attachCronDialog(result.cronExpression);
                                     },

                                     attachCronDialog = function (cron)
                                     {
                                         simpleDialogForm($dialogTrigger, opts.contextPath + "/ajax/editCronExpression.action?cronExpression=" + encodeURIComponent(cron),
                                                          620, 480, opts.dialogSubmitButtonText, "ajax", addCronExpression, null, opts.dialogHeadingText, opts.eventNamespace);
                                     };

                             // generate pretty string
                             $.get(opts.contextPath + "/ajax/getPrettyCronExpression.action?cronExpression=" + encodeURIComponent(initialCron), function (result)
                             {
                                 $this.text(result.prettyCronExpression);
                             });

                             // add the link to the right spot - needed cause it avoids playing with the form templates.
                             $dialogTrigger.insertAfter($this);

                             attachCronDialog(initialCron);
                         });

    };

    /**
     * Replaces an element containing a cron expression with the pretty version of that expression.
     *
     * Usage:  e.g. AJS.$("#element").cronBuilder(${req.contextPath});
     *
     */
    $.fn.cronDisplay = function (contextPath)
    {
        return this.each(function ()
                         {
                             var $this = $(this),
                                     cron = $this.text();

                             // generate pretty string
                             $.get(contextPath + "/ajax/getPrettyCronExpression.action?cronExpression=" + encodeURIComponent(cron), function (result)
                             {
                                 $this.text(result.prettyCronExpression);
                             });
                         });
    };
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jquery/plugins/bamboo/reload-image.js' */
(function ($) {
    $.fn.reloadImage = function (options) {
        var defaults = {
            text: "Reload image",
            cssClass: "image-reload"
        };
        var opts = $.extend(defaults, options);

        return this.each(function () {
            var $this = $(this);
            $('<span class="' + opts.cssClass + '" title="' + opts.text + '" />').insertAfter($this).click(function (e) {
                var src = $this.attr("src"),
                    pos = src.indexOf("&v="),
                    date = new Date();
                if (pos >= 0) {
                    src = src.substr(0, pos);
                }
                $this.attr("src", src + "&v=" + date.getTime());
                e.preventDefault();
            });
        });
    }
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/build-decorator.js' */
(function ($, BAMBOO) {
    BAMBOO.BUILDRESULT = {};
    BAMBOO.PLAN = {};

    BAMBOO.BUILDRESULT.StatusRibbon = function (opts) {
        var defaults = {
                ribbonSelector: null,
                key: null,
                progressBarContainerSelector: '.status-ribbon-progress-bar'
            },
            options = $.extend(true, defaults, opts),
            isJobResult,
            $ribbon,
            $progressBar,
            $buildingForText,
            updateProgressBar = function (progress) {
                var progressPercentage = Math.ceil(100 - (progress['percentageCompleted'] * 100));
                if (!$progressBar.length) {
                    $progressBar = $('<div />', { id: 'sr-pb-' + options.key }).progressBar().appendTo($ribbon.find(options.progressBarContainerSelector));
                    $ribbon.trigger('createprogressbar.buildresult', [ progress ]);
                }
                if (progressPercentage < $progressBar.progressBar('option', 'value')) { // this progress bar works backwards
                    $progressBar.progressBar('option', 'value', progressPercentage);
                }
                updateBuildTime(progress[(progress['averageBuildDuration'] > 0 ? 'prettyTimeRemaining' : 'prettyBuildTime')], { prefix: '&ndash; ' });
                $ribbon.trigger('updateprogressbar.buildresult', [ progress ]);
                if (progressPercentage > 0)
                {
                    Piecon.setOptions({fallback: 'force'});
                    Piecon.setProgress(100 - progressPercentage);
                }
                else
                {
                    Piecon.reset();
                }
            },
            updateBuildTime = function (time, options) {
                options || (options = {});
                var prefix = options['prefix'] || '';
                var suffix = options['suffix'] || '';

                if (!$buildingForText.length) { return; }
                if (time) {
                    $buildingForText.text(time + suffix).prepend(prefix).show();
                } else {
                    $buildingForText.hide();
                }
            },
            res = {
                refresh: function (e, json) {
                    var progress, stages = json['stages']['stage'];

                    if (isJobResult) {
                        if (stages.length) {
                            for (var i = 0, ii = stages.length; i < ii && !progress; i++) {
                                var jobs = stages[i]['results']['result'];

                                for (var j = 0, jj = jobs.length; j < jj; j++) {
                                    var job = jobs[j];

                                    if (job['key'] == options.key) {
                                        progress = job['progress'];
                                        if (job['queued']) {
                                            updateBuildTime(job['prettyQueuedTime']);
                                        } else if (job['updatingSource']) {
                                            updateBuildTime(job['prettyVcsUpdateDuration']);
                                        } else if (progress) {
                                            updateProgressBar(progress);
                                        }
                                        break;
                                    }
                                }
                            }
                        }
                    } else {
                        progress = json['progress'];
                        if (!progress['buildTime']) {
                            updateBuildTime(json['prettyQueuedTime']);
                        } else {
                            updateProgressBar(progress);
                        }
                    }
                }
            };

        $(function () {
            $ribbon = $(options.ribbonSelector);
            $progressBar = $ribbon.find('.progress');
            $buildingForText = $ribbon.find('.operation-time');
            isJobResult = $ribbon.hasClass('has-job');
            $(document).bind('update.buildresult', res.refresh);
        });

        return res;
    };

    BAMBOO.BUILDRESULT.PlanNavigator = function (opts) {
        var defaults = {
                planNavigatorSelector: null,
                key: null
            },
            options = $.extend(true, defaults, opts),
            $planNavigator,
            $stageElements,
            hiddenClass = 'collapsed',
            updateIcon = function ($icon, iconType) {
                $icon.replaceWith(widget.icons.statusIcon({ status: iconType }));
            },
            togglePlanNav = function () {
                if ($planNavigator.parent().hasClass(hiddenClass)) {
                    $planNavigator.parent().removeClass(hiddenClass);
                    $(this).attr('title', "Hide");
                } else {
                    $planNavigator.parent().addClass(hiddenClass);
                    $(this).attr('title', "Show");
                }
            },
            addPlanNavToggle = function () {
                $('<button />', { title: ($planNavigator.parent().hasClass(hiddenClass) ? "Show" : "Hide"), id: 'plan-nav-toggle', click: togglePlanNav }).insertAfter($planNavigator);
            },
            res = {
                refresh: function (e, json) {
                    var jobs = [], stages = json['stages']['stage'];

                    if (stages.length) {
                        for (var i = 0, ii = stages.length, k = stages[0].index; i < ii; i++, k++) {
                            var stage = stages[i],
                                $stageElement = $($stageElements[k]),
                                $stageIcon = $('.stageIcon', $stageElement);

                            jobs = jobs.concat(stage['results']['result']);
                            if (stage['isBuilding']) {
                                $stageElement.removeClass('Pending').addClass('InProgress');
                                if ($stageIcon.length) {
                                    updateIcon($stageIcon, 'stage-InProgress stageIcon');
                                }
                            } else if (stage['isCompleted']) {
                                $stageElement.removeClass('Pending InProgress').addClass(stage['isSuccessful'] ? 'Successful' : 'Failed');
                                if ($stageIcon.length) {
                                    updateIcon($stageIcon, stage['isSuccessful'] ? 'stage-Successful stageIcon' : 'stage-Failed stageIcon');
                                }
                            } else {
                                $stageElement.addClass('Pending');
                                if ($stageIcon.length) {
                                    updateIcon($stageIcon, 'stage-Pending stageIcon');
                                }
                            }
                        }
                        for (var j = 0, jj = jobs.length; j < jj; j++) {
                            var job = jobs[j],
                                $job = $('#job-' + job['key']),
                                $icon = $job.find('.aui-icon, .icon'),
                                $progress = $job.find('.progress'),
                                progressPercentage;

                            $job.trigger('updatejob.buildresult', [ job ]);
                            
                            if (job['finished']) {
                                updateIcon($icon, job['state']);
                                if ($progress.length) {
                                    $progress.remove();
                                }
                            } else if (job['progress'] && !job['queued']) {
                                progressPercentage = Math.ceil(100 - (job['progress']['percentageCompleted'] * 100));
                                updateIcon($icon, 'InProgress');
                                if (!$progress.length) {
                                    $progress = $('<div />', { id: 'navPb' + job['key'] }).progressBar().prependTo($job);
                                }
                                if (progressPercentage < $progress.progressBar('option', 'value')) { // this progress bar works backwards
                                    $progress.progressBar('option', 'value', progressPercentage);
                                }
                            } else {
                                updateIcon($icon, 'Queued');
                            }
                        }
                    }
                }
            };

        $(function () {
            $planNavigator = $(options.planNavigatorSelector);
            $stageElements = $planNavigator.find("> ul > li");
            addPlanNavToggle();
            $(document).bind('update.buildresult', res.refresh);
        });

        return res;
    };

    BAMBOO.BUILDRESULT.BuildResult = (function () {
        var opts = {
                currentKey: null,
                getStatusUrl: null,
                jobStatus: null,
                isActive: false,
                ribbonSelector: '#status-ribbon'
            },
            planNavigator,
            statusRibbon,
            getJobStatus = function (job) {
                if (job['finished']) {
                    return job['state'];
                } else if (job['waiting']) {
                    return "Pending";
                } else if (job['progress'] && !job['queued']) {
                    if (job['updatingSource']) {
                        return "updatingSource";
                    } else {
                        return "InProgress";
                    }
                } else {
                    return "Queued";
                }
            },
            updateTimeout,
            update = function () {
                $.ajax({
                    url: opts.getStatusUrl,
                    cache: false,
                    data: {
                        expand: "stages.stage.results.result"
                    },
                    dataType: "json",
                    contentType: "application/json",
                    success: function (json) {
                        if (json['finished']) {
                            reloadThePage();
                            return;
                        }

                        $(document).trigger('update.buildresult', [ json ]);

                        // Update again in 5 seconds
                        updateTimeout = setTimeout(update, 5000);
                    },
                    error: function (XMLHttpRequest) {
                        // 404 for status means either no such result key exists OR build is not executing
                        // both cases are a good reason to reload, otherwise just wait
                        if (XMLHttpRequest.status == 404) {
                            reloadThePage();
                            return;
                        }
                        // Error occurred when doing the update, try again in 30 sec
                        updateTimeout = setTimeout(update, 30000);
                    }
                });
            },
            refreshDetails = function (e, progress) {
                if (progress) {
                    $(".started + dd > time").attr("datetime", progress['startedTimeFormatted']).html(progress['startedTime'] + ' &ndash; <span>' + progress['prettyStartedTime'] + '</span>');
                }
            },
            onJobUpdated = function (e, job) {
                if (opts.jobStatus && job['key'] == opts.currentKey && opts.jobStatus != getJobStatus(job)) {
                    reloadThePage();
                }
            };

        return {
            init: function (options) {
                $.extend(true, opts, options);

                if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
                    $(function () {
                        $(opts.ribbonSelector).prepend('<span class="before"></span>').append('<span class="after"></span>');
                    });
                }

                planNavigator = new BAMBOO.BUILDRESULT.PlanNavigator({ planNavigatorSelector: '#plan-navigator', key: opts.currentKey });

                if (opts.isActive) {
                    $(document)
                        .bind('updateprogressbar.buildresult', refreshDetails)
                        .bind('updatejob.buildresult', onJobUpdated)
                        .bind('createprogressbar.buildresult', function () { reloadThePage(); }); // TODO: Remove this when we can update the build results page dynamically without needing to refresh manually

                    statusRibbon = new BAMBOO.BUILDRESULT.StatusRibbon({ ribbonSelector: opts.ribbonSelector, key: opts.currentKey });

                    update();
                }
            }
        }
    }());

    BAMBOO.PLAN.LinkedJiraIssueDescription = (function (opts) {
        var options = $.extend(true, {
                planKey: null,
                issueSelector: '.plan-description'
            }, opts),
            $description = $(options.issueSelector),
            issueKey = $description.data('jiraIssueKey'),
            keyLink = AJS.contextPath() + '/project/jiraRedirect.action?jiraIssueKey=' + issueKey,
            remoteJiraLinkRequired = $description.data('remoteJiraLinkRequired');

        $(bamboo.feature.jiraIssueList.singleIssueLoading({
            key: issueKey,
            keyLink: keyLink
        })).appendTo($description);
        $.ajax({
            url: AJS.contextPath() + '/rest/api/latest/plan/' + options.planKey + '/issue/' + issueKey,
            cache: false,
            dataType: 'json'
        }).done(update).fail(error);

        function update(issue, textStatus, jqXHR) {
            var summary = issue['summary'];

            if (summary) {
                $description.html(bamboo.feature.jiraIssueList.singleIssue(issue));
                if (remoteJiraLinkRequired) {
                    showRemoteJiraLinkButton();
                }
            } else {
                error(jqXHR);
            }
        }
        function error(jqXHR) {
            var response, authUrl, authInstance;

            try {
                response = $.parseJSON(jqXHR.responseText);
                authUrl = response['authenticationRedirectUrl'];
                authInstance = response['authenticationInstanceName'] || "Jira";
            }
            catch (e) {}
            if (authUrl) {
                $description.html(bamboo.feature.jiraIssueList.singleIssueOAuth({
                    key: issueKey,
                    keyLink: keyLink,
                    authenticationRedirectUrl: authUrl + '&redirectUrl=' + encodeURIComponent(document.location.href),
                    authenticationInstanceName: authInstance
                }));
            } else {
                $description.html(bamboo.feature.jiraIssueList.singleIssueRetrievalError({
                    key: issueKey,
                    keyLink: keyLink
                }));
            }
        }
        function showRemoteJiraLinkButton() {
            var disabledProperty = 'aria-disabled',
                $button = $('<button/>', { 'class': 'aui-button aui-style', text: "Create link in Jira" }).click(initiateLink).insertAfter($description),
                $icon = $(widget.icons.icon({ type: 'loading' }));

            function initiateLink() {
                if (!$button.attr(disabledProperty)) {
                    $button.attr(disabledProperty, true).append($icon);

                    $.ajax({
                        url: AJS.contextPath() + '/ajax/createRemoteIssueLink.action',
                        cache: false,
                        dataType: 'json',
                        type: 'POST',
                        data: {
                            planKey: options.planKey,
                            issueKey: issueKey
                        }
                    }).done(linkCreated).fail(linkFailed);
                }
            }
            function linkCreated(response, textStatus, jqXHR) {
                if (response['status'] == "ERROR") {
                    linkFailed(jqXHR);
                } else {
                    $icon.replaceWith(widget.icons.icon({ type: 'tick-agent' }));
                    setTimeout(function () {
                        $button.fadeOut(function () { $(this).remove(); });
                    }, 1500);
                }
            }
            function linkFailed(jqXHR) {
                var response, authUrl, authInstance, authMessage, errors;

                try {
                    response = $.parseJSON(jqXHR.responseText);
                    errors = response['errors'];
                    authUrl = response['authorisationURI'];
                    authInstance = response['context'] || "Jira";
                    authMessage = response['message'];
                }
                catch (e) {}

                if (authUrl) {
                    showMessageDialog(authMessage, BAMBOO.buildAUIMessage([ bamboo.feature.jiraIssueList.linkedIssueOAuth({
                        authenticationRedirectUrl: authUrl + '&redirectUrl=' + encodeURIComponent(document.location.href),
                        authenticationInstanceName: authInstance,
                        reason: 'in order to create a remote issue link'
                    }) ], 'warning', { escapeTitle: false }));
                } else {
                    if (!errors || !errors.length) {
                        errors = [ "Unable to link Jira issue to branch" ];
                    }
                    showMessageDialog("Error while linking Jira issue to branch", BAMBOO.buildAUIErrorMessage(errors));
                }
                $button.removeAttr(disabledProperty);
                $icon.remove();
            }
            function showMessageDialog(title, content) {
                var dialog = new AJS.Dialog({
                    width: 600
                }).addHeader(title).addPanel('', content).addButton("Close", function () { dialog.remove(); });

                dialog.show().updateHeightProperly();
            }
        }
    });
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/bamboo.js' */
//  ######
//  #     #  ######  #####   #####   ######   ####     ##     #####  ######  #####
//  #     #  #       #    #  #    #  #       #    #   #  #      #    #       #    #
//  #     #  #####   #    #  #    #  #####   #       #    #     #    #####   #    #
//  #     #  #       #####   #####   #       #       ######     #    #       #    #
//  #     #  #       #       #   #   #       #    #  #    #     #    #       #    #
//  ######   ######  #       #    #  ######   ####   #    #     #    ######  #####

var pageVisibilityManager = require('widget/page-visibility-manager');
var simpleSelect2 = require('widget/simple-select2');

// Constants
var BAMBOO_DASH_DISPLAY_TOGGLES = "bamboo.dash.display.toggles",
    BAMBOO_EVENT_ON_DASHBOARD_RELOADED = "BAMBOO_EVENT_ON_DASHBOARD_RELOADED";

window.BAMBOO = (window.BAMBOO || {});
BAMBOO.fastServerPollMillis = 5000;
BAMBOO.mediumServerPollMillis = 10000; // This polling interval is only used in one place. Should we replace it with fastServerPoll or slowServerPoll?
BAMBOO.slowServerPollMillis = 15000;
BAMBOO.afterErrorServerPollMillis = 30000;
BAMBOO.reloadDashboardTimeout = 20; // Seconds

//
// Display the given help page in a separate window
//
function openHelp(helpPage) {
    window.open(helpPage, 'manualPopup', 'width=770,height=550,scrollbars=yes,status=yes,resizable=yes');
}

function reloadThePage() {
    window.location.reload(true);
}

function redirectAfterReturningFromDialog(response) {
    if (response.redirectUrl) {
        window.location = AJS.contextPath() + response.redirectUrl;
    } else {
        reloadThePage();
    }
}

function isDefinedObject(reference) {
    return (typeof reference !== "undefined") && (reference !== null);
}

if (!jQuery.isNumeric) {
    jQuery.isNumeric = function (n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
    };
}

/**
 * Any href clicked with rel=help (e.g. our help bubbles) will open in new window.
 * Any element with id=addPlanLabel will trigger the edit labels dialog
 * Applies to all of Bamboo.
 **/
AJS.$(document).delegate("a[rel~='help']", "click", function (e) {
    var $this = AJS.$(this);
    e.preventDefault();
    if ($this.data('useHelpPopup')) {
        openHelp(this.href);
    } else {
        window.open(this.href);
    }
});


/**
 * Workaround for Cancel links in Dialog which append a hash to URL by default
 */
AJS.$("a.button-panel-link[href='#']").live("click", function (e) {
    e.preventDefault();
});

/**
 * AJS.BambooDialog
 */
AJS.BambooDialog = function (options, onSubmitCallback, onCancelCallback) {
    var dialog;
    options = options || {};
    options = jQuery.extend({}, options, {
        keypressListener: function (e) {
            if (e.which == jQuery.ui.keyCode.ESCAPE) {
                if (isDefinedObject(onCancelCallback)) {
                    onCancelCallback(dialog);
                } else {
                    dialog.remove();
                }
            } else if (e.which == jQuery.ui.keyCode.ENTER && isDefinedObject(onSubmitCallback)) {
                onSubmitCallback(dialog);
                if (options.submitMode && options.submitMode == "ajax") {
                    e.preventDefault();
                }
            }
        }
    });
    dialog = new AJS.Dialog(options);
    return dialog;
};
AJS.Dialog.prototype.addHelpText = function (template, args) {
    if (!template) {
        // Don't do anything if there is no text to add.
        // This stops us printing 'undefined'.
        return;
    }

    var text = template;
    if (args) {
        text = AJS.template(template).fill(args).toString();
    }

    var page = this.page[this.curpage];
    if (!page.buttonpanel) {
        page.addButtonPanel();
    }

    // The text may include html i.e. links or strongs
    var tip = AJS.$("<div class='dialog-tip'></div>").html(text);
    page.buttonpanel.append(tip);
    tip.find("a").click(function () {
        window.open(this.href, '_blank').focus();
        return false;
    });
};
AJS.Dialog.prototype.updateHeightProperly = function () {
    this.updateHeight();
    this.getCurrentPanel().body.css('height', '');
};

String.prototype.replaceAll = function (pcFrom, pcTo) {
    var MARKER = "js___bmbo_mrk",
        i = this.indexOf(pcFrom),
        c = this;
    while (i > -1) {
        c = c.replace(pcFrom, MARKER);
        i = c.indexOf(pcFrom);
    }

    i = c.indexOf(MARKER);
    while (i > -1) {
        c = c.replace(MARKER, pcTo);
        i = c.indexOf(MARKER);
    }

    return c;
};


if (!jQuery.generateId) {
    jQuery.generateId = function () {
        return arguments.callee.prefix + arguments.callee.count++;
    };
    jQuery.generateId.prefix = 'jq-';
    jQuery.generateId.count = 0;

    jQuery.fn.generateId = function () {
        return this.each(function () {
            this.id = jQuery.generateId();
        });
    };
}

// Cookie handling functions

function saveToConglomerateCookie(cookieName, name, value) {
    var cookieValue = getCookieValue(cookieName);
    cookieValue = addOrAppendToValue(name, value, cookieValue);

    saveCookie(cookieName, cookieValue, 365);
}

function readFromConglomerateCookie(cookieName, name, defaultValue) {
    var cookieValue = getCookieValue(cookieName);
    var value = getValueFromCongolmerate(name, cookieValue);
    if (value != null) {
        return value;
    }

    return defaultValue;
}

function getValueFromCongolmerate(name, cookieValue) {
    // a null cookieValue is just the first time through so create it
    if (cookieValue == null) {
        cookieValue = "";
    }
    var eq = name + "-";
    var cookieParts = cookieValue.split('|');
    for (var i = 0; i < cookieParts.length; i++) {
        var cp = cookieParts[i];
        while (cp.charAt(0) == ' ') {
            cp = cp.substring(1, cp.length);
        }
        // rebuild the value string exluding the named portion passed in
        if (cp.indexOf(name) == 0) {
            return cp.substring(eq.length, cp.length);
        }
    }
    return null;
}

//either append or replace the value in the cookie string
function addOrAppendToValue(name, value, cookieValue) {
    var newCookieValue = "";
    // a null cookieValue is just the first time through so create it
    if (cookieValue == null) {
        cookieValue = "";
    }

    var cookieParts = cookieValue.split('|');
    for (var i = 0; i < cookieParts.length; i++) {
        var cp = cookieParts[i];

        // ignore any empty tokens
        if (cp != "") {
            while (cp.charAt(0) == ' ') {
                cp = cp.substring(1, cp.length);
            }
            // rebuild the value string exluding the named portion passed in
            if (cp.indexOf(name) != 0) {
                newCookieValue += cp + "|";
            }
        }
    }

    // always append the value passed in if it is not null or empty
    if (value != null && value != '') {
        var pair = name + "-" + value;
        if ((newCookieValue.length + pair.length) < 4020) {
            newCookieValue += pair;
        }
    }
    return newCookieValue;
}

function getCookieValue(name, defaultString) {
    var eq = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1, c.length);
        }
        if (c.indexOf(eq) == 0) {
            return c.substring(eq.length, c.length);
        }
    }

    return defaultString;
}

function saveCookie(name, value, days) {
    var ex;
    if (days) {
        var d = new Date();
        d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
        ex = "; expires=" + d.toGMTString();
    }
    else {
        ex = "";
    }
    document.cookie = name + "=" + value + ex + ";path=" + (!AJS.contextPath().length ? "/" : AJS.contextPath());
}

function toggleOn(e, toggleGroup_id) {
    var onToggle = document.getElementById(toggleGroup_id + "_toggler_on");
    var offToggle = document.getElementById(toggleGroup_id + "_toggler_off");
    var target = document.getElementById(toggleGroup_id + "_target");
    onToggle.style.display = 'block';
    offToggle.style.display = 'none';
    target.style.display = 'block';
    saveToConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, toggleGroup_id, null);
}

function toggleOff(e, toggleGroup_id) {
    var onToggle = document.getElementById(toggleGroup_id + "_toggler_on");
    var offToggle = document.getElementById(toggleGroup_id + "_toggler_off");
    var target = document.getElementById(toggleGroup_id + "_target");
    onToggle.style.display = 'none';
    offToggle.style.display = 'block';
    target.style.display = 'none';
    saveToConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, toggleGroup_id, '0');
}

function restoreTogglesFromCookie(toggleGroup_id) {
    var elem = document.getElementById(toggleGroup_id + "_target");
    if (elem) {
        if (readFromConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, toggleGroup_id, null) == '0') {
            toggleOff(null, toggleGroup_id);
        }
        else {
            toggleOn(null, toggleGroup_id);
        }
    }
}

// Forms JS
function toggleContainingCheckbox(e) {
    if (e && e.target.tagName == "INPUT") {
        return true;
    }

    AJS.$(this).find("input:checkbox").each(function () {
        this.checked = !this.checked;
    });

    return true;
}

function toggleIconOff(dom) {
    dom.src = dom.src.replace('_on.', '_off.');
}

function toggleIconOn(dom) {
    dom.src = dom.src.replace('_off.', '_on.');
}

/*
*   For user picker - when you click "Check All' all the select boxes are changed
*/
var selectedBoxes = [];

function setCheckboxes() {
    var numelements = document.selectorform.elements.length;
    var item0 = document.selectorform.elements[0];
    var item1;

    for (var i = 1; i < numelements; i++) {
        item1 = document.selectorform.elements[i];
        item1.checked = item0.checked;
        if (!selectedBoxes[item1.name])
            selectedBoxes[item1.name] = [];
        selectedBoxes[item1.name][item1.value] = item1.checked;
    }
}

/*
*  For User Picker - checkboxes are named after users so by compiling a list of all selected checkboxes
*   we have a list of users (comma seperated)
*/
function getEntityNames() {
    var numelements = document.selectorform.elements.length;
    var item;
    var checkedList = "";

    var sep = "";
    for (var i = 0; i < numelements; i++) {
        item = document.selectorform.elements[i];
        if (item != null && item.type == "checkbox" && item.name != "all" && item.checked == true) {
            var itemValue = item.value;
            itemValue = itemValue.replace(/\\/g, "\\\\").replace(/,/g, "\\,");
            checkedList = checkedList + sep + itemValue;
            sep = ", ";
        }
    }

    return checkedList;
}

/*
*   For User Picker - takes comma seperated list of users and places them in specified field.
*/
function addUsers(commaDelimitedUserNames, fieldID, multiSelect) {
    var element = document.getElementById(fieldID);
    var currentUsers = element.value;
    if (!multiSelect) {
        element.value = commaDelimitedUserNames;
    } else if (currentUsers != null && currentUsers != "") {
        element.value = currentUsers + ", " + commaDelimitedUserNames;
    } else {
        element.value = commaDelimitedUserNames;
    }
}

function updatePlan(plan, toHide, toShow) {
    var STATUS_PREFIX = 'statusSection';
    var REASON_PREFIX = 'reasonSummary';
    var DURATION_PREFIX = 'durationSummary';
    var LAST_BUILT = 'lastBuiltSummary';
    var TESTCOUNT_PREFIX = 'testSummary';
    var LATEST_BUILD_PREFIX = 'latestBuild';
    var PLAN_PROPS = [LATEST_BUILD_PREFIX, REASON_PREFIX, DURATION_PREFIX, TESTCOUNT_PREFIX, LAST_BUILT];

    try {
        var planKey = plan.planKey;

        //the following for loops have len initialised as such for improved performance
        for (var i = 0, len = PLAN_PROPS.length; i < len; i++) {
            var propPrefix = PLAN_PROPS[i];
            var elem = AJS.$("#" + propPrefix + planKey);
            if (LATEST_BUILD_PREFIX == propPrefix) {
                // Update the status when first item and clear the existing classes on this element

                elem.closest(".planKeySection").attr('class', 'planKeySection ' + plan.statusClass);
            }
            elem.html(plan[propPrefix]);
        }

        var iconClass = {
            'icon-disabled': 'aui-icon aui-icon-small aui-iconfont-plan-disabled',
            'icon-building': 'aui-icon aui-icon-small aui-iconfont-running-build',
            'icon-queued': 'aui-icon aui-icon-small aui-iconfont-queued-build',
            'icon-successful': 'aui-icon aui-icon-small aui-iconfont-successful-build',
            'icon-failed': 'aui-icon aui-icon-small aui-iconfont-failed-build',
            'icon-notbuilt': 'aui-icon aui-icon-small aui-iconfont-incomplete-build'
        }[plan.statusIconClass] || 'icon ' + plan.statusIconClass;

        AJS.$("#" + STATUS_PREFIX + planKey).find(".icon, .aui-icon").each(function () {
            if (!AJS.$(this).hasClass(plan.statusIconClass)) {
                AJS.$(this).removeAttr('class').addClass(iconClass).attr("title", plan.statusText);
            }
        });

        //Update link
        var link = AJS.$("a#" + STATUS_PREFIX + planKey);
        if (link.length) {
            if (plan.lastResultKey != null) {
                link.attr("href", AJS.contextPath() + "/browse/" + plan.lastResultKey);
            } else {
                link.attr("href", AJS.contextPath() + "/browse/" + planKey);
            }
        }

        // Update favourites
        var faves = AJS.$('#favouriteIconFor_' + planKey);
        for (var i = 0, len = faves.length; i < len; i++) {
            var fave = faves.get(i);
            if (plan.favourite) {
                toggleIconOn(fave);
            }
            else {
                toggleIconOff(fave);
            }
        }

        if (plan.suspendedFromBuilding) {
            toShow.push('#resumeBuild_' + planKey);
            toHide.push('#stopSingleBuild_' + planKey, '#stopMultipleBuilds_' + planKey, '#manualBuild_' + planKey);
        } else {
            toHide.push('#resumeBuild_' + planKey);
            if (plan.allowStop) {
                toHide.push('#manualBuild_' + planKey);
                if (plan.numberOfCurrentlyBuildingPlans > 1) {
                    toHide.push('#stopSingleBuild_' + planKey);
                    toShow.push('#stopMultipleBuilds_' + planKey);
                } else {
                    toShow.push('#stopSingleBuild_' + planKey);
                    toHide.push('#stopMultipleBuilds_' + planKey);
                }
            } else {
                toHide.push('#stopSingleBuild_' + planKey, '#stopMultipleBuilds_' + planKey);
                toShow.push('#manualBuild_' + planKey);
            }
        }
    } catch (ex) {
        //alert(ex);
        console.warn(ex);
    }
}

function updatePlans(sinceSystemTime) {
    // Make the call to the server for JSON data
    if (!sinceSystemTime) sinceSystemTime = 0;

    var $showMoreTrigger = AJS.$(".show-more-plans");
    var lastProjectKey = $showMoreTrigger.length ? $showMoreTrigger.data("lastProjectKey") : "";

    // Define the callbacks for the asyncRequest
    var timeout,
        panelId = 'dashboardUpdatePlans',
        callbacks = {
            dataType: 'json',
            url: AJS.contextPath() + "/ajax/viewPlanUpdates.action",
            data: {
                sinceSystemTime: sinceSystemTime,
                lastProject: lastProjectKey
            },
            success: function (response) {
                if (!BAMBOO.reloadDashboard) return; // do nudda

                // Process the JSON data returned from the server
                try {
                    if (response.plans) {
                        var plans = response.plans,
                            toHide = [], toShow = [];
                        //Using toHide/toShow arrays here and deferring hide/show improved performance 20x,
                        //do not change it without heavy performance testing (on 2000 top level plans) please
                        for (var i = 0, len = plans.length; i < len; i++) {
                            var plan = plans[i];
                            updatePlan(plan, toHide, toShow);
                        }
                        if (toHide.length) {
                            AJS.$(toHide.join(',')).hide();
                        }
                        if (toShow.length) {
                            AJS.$(toShow.join(',')).show();
                        }
                    }
                } catch (x) {
                    console.warn("JSON Parse failed! " + x + "\n", response);
                }

                sinceSystemTime = response ? response.currentTime : 0;

                BAMBOO.panelTimeouts[panelId] = setTimeout(function () {
                    updatePlans(sinceSystemTime);
                }, BAMBOO.reloadDashboardTimeout * 1000);
                hideAjaxErrorMessage();
                AJS.$("body").trigger(BAMBOO_EVENT_ON_DASHBOARD_RELOADED);
            },
            error: function (XMLHttpRequest) {
                showAjaxErrorMessage(XMLHttpRequest);
            },
            timeout: 60000
        };

    if (typeof BAMBOO.panelTimeouts === "undefined") {
        BAMBOO.panelTimeouts = {};
    } else {
        timeout = BAMBOO.panelTimeouts[panelId];
        clearTimeout(timeout);
    }
    AJS.$.ajax(callbacks);
}

function reloadPanel(id, url, reloadEvery, loadScripts, previousText, callback) {
    var timeout;
    if (typeof BAMBOO.panelTimeouts === "undefined") {
        BAMBOO.panelTimeouts = {};
    } else {
        timeout = BAMBOO.panelTimeouts[id];
        clearTimeout(timeout);
    }
    AJS.$.get(processReloadUrl(url), function (data) {
        var reponseText = data;

        if (!document.getElementById(id)) {
            return false;
        } // don't bother updating if the target isn't available to update

        if (!previousText || previousText != reponseText) {
            // only update if the previous response is different
            updateDomObject(reponseText, id, loadScripts, callback);
        }
        if (reloadEvery) {
            BAMBOO.panelTimeouts[id] = setTimeout(function () {
                reloadPanel(id, url, reloadEvery, loadScripts, reponseText, callback);
            }, reloadEvery * 1000);
        }
    });
}

function processReloadUrl(url) {
    if (BAMBOO.buildLastCurrentStatus) {
        var indexOfCurrentStatus = url.indexOf("&lastCurrentStatus");
        if (indexOfCurrentStatus != -1) {
            url = url.substring(0, indexOfCurrentStatus);
        }

        return url + "&lastCurrentStatus=" + BAMBOO.buildLastCurrentStatus;

    }
    else {
        return url;
    }
}

function updateDomObject(html, targetId, loadScripts, callback) {
    if (typeof html == 'undefined') {
        html = '';
    }
    if (loadScripts !== true) {
        AJS.$("#" + targetId).html(html);
        if (AJS.$.isFunction(callback)) {
            AJS.$("#" + targetId).each(callback);
        }
        return;
    }
    var id = AJS.$.generateId();
    html += '<span id="' + id + '"></span>';

    AJS.$("#" + id).ready(function () {
        var hd = document.getElementsByTagName("head")[0];
        var re = /(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img;
        var srcRe = /\ssrc=([\'\"])(.*?)\1/i;
        var match;
        while (match = re.exec(html)) {
            var srcMatch = match[0].match(srcRe);
            if (srcMatch && srcMatch[2]) {
                var s = document.createElement("script");
                s.src = srcMatch[2];
                hd.appendChild(s);
            } else if (match[1] && match[1].length > 0) {
                eval(match[1]);
            }
        }
        var el = document.getElementById(id);
        if (el) {
            el.parentNode.removeChild(el);
        }
    });
    var newHtml = html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img, '');

    AJS.$('#' + targetId)
        .html(newHtml)
        .find('.aui-message').each(function () {
        // Because we define AUI messages in an old way (div.aui-message instead of aui-message) we have to "setup" them manually.
        // Currently "setup" method doesn't accept message as an arguments so here we have to call two methods "setup" calls.
        AJS.messages.makeCloseable(this);
        AJS.messages.makeFadeout(this);
    });

    if (AJS.$.isFunction(callback)) {
        AJS.$("#" + targetId).each(callback);
    }
    return;
}


function updateInlineSection(url, sectionName) {
    AJS.$.get(processReloadUrl(url), function (data) {
        updateDomObject(data, sectionName, "true", "null");
    });
}

function addConfirmationToLinks() {
    require(['jquery'], function ($) {
        var handleDialog2Confirm = function (event, $el, Dialog2, Dialog2Confirmation) {
            event.preventDefault();
            new Dialog2Confirmation({
                titleText: $el.attr('data-confirmation-title'),
                content: $el.attr('data-confirmation-content'),
                onConfirm: function (event) {
                    $el.trigger("clickMutativeLink");
                },
                size: Dialog2.MEDIUM,
            }).show();
        };

        var handleAlertConfirm = function (event, $el) {
            var isConfirmed = confirm('Please confirm that you are about to \n' + ($el.attr("title") ? $el.attr("title") : AJS.$.trim($el.text())));
            if (isConfirmed && $el.hasClass("mutative")) {
                event.preventDefault();
                $el.trigger("clickMutativeLink");
            }
            return isConfirmed;
        };

        $(document).on(
            'click',
            '.requireConfirmation',
            function (event) {
                var $el = $(this);
                var Dialog2 = require('widget/dialog2');
                var Dialog2Confirmation = require('widget/dialog2-confirmation');
                if ($el.hasClass('dialog2Confirmation')) {
                    if (typeof Dialog2Confirmation === "undefined") {
                        console.warn("widget/dialog2-confirmation not available, falling back to alert");
                        handleAlertConfirm(event, $el);
                    } else {
                        handleDialog2Confirm(event, $el, Dialog2, Dialog2Confirmation);
                    }
                } else {
                    return handleAlertConfirm(event, $el);
                }
            });
    });
}


/**
 * Build queue related stuff
 */
var buildQueue = function () {
    AJS.$(document).ready(function () {
        if (buildQueue) {
            buildQueue.portletReloadCallback();
        }
    });

    return {
        /**
         * Shows and hides Build Queue's action panels
         */
        displayActions: function (actionsId) {
            var prevActionsId = readFromConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, "buildQueueActions", actionsId);
            AJS.$("#builders").removeClass(prevActionsId);
            AJS.$("#builders").addClass(actionsId);

            saveToConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, "buildQueueActions", actionsId);
        },

        restoreDisplayActionsFromCookie: function () {
            this.displayActions(readFromConglomerateCookie(BAMBOO_DASH_DISPLAY_TOGGLES, "buildQueueActions", "actions-queueControl"));
        },

        portletReloadCallback: function () {
            buildQueue.restoreDisplayActionsFromCookie();
        }
    };
}();


function initCommitsTooltip(targetId, planKey, buildNumber) {
    AJS.InlineDialog(AJS.$("#" + targetId),
        targetId,
        AJS.contextPath() + "/build/ajax/viewBuildCommits.action?buildKey=" + planKey + "&buildNumber=" + buildNumber,
        {onHover: true, fadeTime: 50, hideDelay: 0, showDelay: 100, width: 300, offsetX: 0, offsetY: 10});
}

function initCommentTooltip(targetId, planKey, buildNumber) {
    var link = AJS.$("#" + targetId);
    AJS.InlineDialog(link,
        targetId,
        AJS.contextPath() + "/build/ajax/viewBuildComments.action?buildKey=" + planKey + "&buildNumber=" + buildNumber,
        {onHover: true, fadeTime: 50, hideDelay: 0, showDelay: 100, width: 300, offsetX: 0, offsetY: 10});
}

/**
 * This function is not mentioned to be used directly but rather via @dj.simpleDialogForm FTL macro defined in dojo.ftl
 *
 * All the input params are also described in the dojo.ftl
 */
function simpleDialogForm(triggerSelector, getDialogBodyUrl, dialogWidth, dialogHeight, submitLabel, submitMode, submitCallback, cancelCallback, header, eventNamespace) {
    function clearAllErrors(formJQ) {
        formJQ.find('.error,.aui-message').remove();
    }

    function addActionError(formJQ, errors) {
        formJQ.find(".field-group:first").before(BAMBOO.buildAUIErrorMessage(errors));
    }

    function applyErrors(formJQ, result) {
        if (result.fieldErrors) {
            for (var fieldName in result.fieldErrors) {
                BAMBOO.addFieldErrors(formJQ, fieldName, result.fieldErrors[fieldName]);
            }
        }

        if (result.errors) {
            addActionError(formJQ, result.errors);
        }
    }

    /**
     * This is called where callee requests non-ajax submit.
     * 1st phase is to call validation via AJAX using form's action attribute and then submit form in a classical way.
     *
     * @param formJQ  form to be submitted
     */
    function validateSubmitForm(formJQ) {
        clearAllErrors(formJQ);

        function validationCallback(result) {
            if (result.status.toUpperCase() == "OK") {
                formJQ.submit();
            }
            else {
                applyErrors(formJQ, result);
            }
        }

        AJS.$.post(formJQ.attr("action"), formJQ.serialize() + '&bamboo.enableJSONValidation=true', validationCallback, "json");
    }

    /**
     * For Ajax submit there's no separate validation phase.
     * Assumption is made that action will validate itself and will return proper JSON response in case of validation errors.
     *
     * @param formJQ          jQuery wrapper for form
     * @param submitCallback
     */
    function ajaxSubmitForm(formJQ, submitCallback) {
        clearAllErrors(formJQ);

        function successCallback(result) {
            if (result.status.toUpperCase() == "OK") {
                submitCallback(result);
            }
            else {
                applyErrors(formJQ, result);
            }
        }

        function errorCallback(result) {
            if (result.status == 500) {
                addActionError(formJQ, Array("An internal server error has occurred. Please check the logs for more details."));
            }
            else {
                addActionError(formJQ, Array("An unknown error has occurred."));
            }
        }

        AJS.$.ajax({
            type: "POST",
            url: formJQ.attr("action"),
            data: formJQ.serialize(),
            success: successCallback,
            error: errorCallback,
            dataType: "json"
        });
    }

    function showDialog(linkElementJQ) {
        var $loading = AJS.$('<span class="icon icon-loading aui-dialog-content-loading" />'),
            $dialogForm = AJS.$("<div id='simpleDialogForm'/>").html($loading),
            setFocus = function () {
                var $firstError = $dialogForm.find(":input:visible:enabled.errorField:first").focus();
                if (!$firstError.length) {
                    $dialogForm.find(":input:visible:enabled:first").focus();
                }
            },
            onSubmitCallback = function (dialog) {
                var formJQ = AJS.$("#simpleDialogForm form");

                if (submitMode == "ajax") {
                    ajaxSubmitForm(formJQ, function (result) {
                        if (AJS.$.isFunction(submitCallback)) {
                            submitCallback(result);
                        }
                        dialog.remove();
                        $dialogForm.html($loading);
                    });
                } else {
                    validateSubmitForm(formJQ);
                }
            },
            onCancelCallback = function (dialog) {
                if (AJS.$.isFunction(cancelCallback)) {
                    cancelCallback();
                }
                dialog.remove();
                $dialogForm.html($loading);
            },
            $popup = new AJS.BambooDialog({
                width: dialogWidth,
                height: dialogHeight,
                submitMode: submitMode
            }, onSubmitCallback, onCancelCallback);

        $popup.addHeader(header != null ? header : linkElementJQ.attr('title'))
            .addPanel("I am invisible", $dialogForm)
            .addCancel("Cancel", onCancelCallback);

        AJS.$.get(getDialogBodyUrl, function (data) {
            $dialogForm.html(data);
            $popup.addSubmit(submitLabel, onSubmitCallback);
            $popup.getPage(0).button[1].moveLeft();
            setFocus();
            BAMBOO.DynamicFieldParameters.syncFieldShowHide($dialogForm, false);
        });
        $popup.show();
    }

    if (triggerSelector) {
        var namespace = "click";
        if (eventNamespace && eventNamespace.length) {
            namespace += "." + eventNamespace;
        }
        AJS.$(triggerSelector).bind(namespace, function (e) {
            showDialog(AJS.$(this));
            //disable the default behaviour (we don't want link to be followed when we display dialog)
            e.preventDefault();
        });
    } else {
        showDialog(AJS.$(this));
    }

}

/**
 * Asynchronous form handler
 * @param options
 *  - target        String - selector targeting the form
 *  - success       Function - handles JSON response from successful form submission
 *  - cancel        Function - handles what to do when the cancel link is clicked
 *  - formReplaced  Function - is fired after the form is replaced
 *  - $delegator    jQuery Object - where the event handler should be bound
 */
BAMBOO.asyncForm = function (options) {
    var $ = AJS.$,
        defaults = {
            target: null,
            success: null,
            cancel: null,
            formReplaced: null,
            error: null,
            $delegator: $(document),
            resetOnSuccess: false,
            loadingIconInsertionMethod: 'prepend'
        },
        handleSubmit = function (e) {
            var $form = $(this),
                cancelOnClick = function (e) {
                    e.stopPropagation();
                };

            e.preventDefault();
            $form.ajaxSubmit({
                data: {
                    "bamboo.successReturnMode": "json",
                    decorator: "nothing",
                    confirm: true
                },
                dataFilter: function (data) { //data contains HTML or escaped JSON embedded in a script tag
                    var scriptTagContent;
                    if (data.indexOf("<script") !== 0) {
                        return data;
                    }
                    scriptTagContent = data.substring(data.indexOf(">") + 1, data.lastIndexOf("</script"));
                    return scriptTagContent
                        .replaceAll("<\\!--", "<!--")
                        .replaceAll("<\\script", "<script")
                        .replaceAll("<\\/script", "</script")
                        .valueOf();
                },
                dataType: "html",
                beforeSerialize: function ($form, options) {
                    var fileInputs = $form.find('input:file').length > 0,
                        mp = 'multipart/form-data',
                        multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);

                    if (options.iframe !== false && (fileInputs || options.iframe || multipart)) {
                        this.data["bamboo.successReturnMode"] = "json-as-html";
                    }
                },
                beforeSubmit: function (formData, $form) {
                    $form
                        .find(".buttons")[options.loadingIconInsertionMethod]('<span class="icon icon-loading"/>')
                        .find('input:submit').prop('disabled', true).end()
                        .find('.cancel').addClass('disabled').on('click', cancelOnClick);
                },
                success: function (data) {
                    var $data, json, messages, warnings;

                    if (typeof data == "object") {
                        // Returned data is JSON
                        json = data;
                    } else {
                        // Returned data is string
                        try {
                            // Try to parse string as JSON
                            json = $.parseJSON(data);
                        }
                        catch (e1) {
                            // Must be HTML
                            $data = $(data);
                            try {
                                // Check if the response only contains a textarea, if so it probably just contains JSON
                                if ($data.length == 1 && !$data.children().length && $data.is("textarea")) {
                                    json = $.parseJSON($data[0].value);
                                }
                            }
                            catch (e2) {
                            }
                        }
                    }

                    if (json) {
                        $form.trigger("asyncform-success", [json]);

                        messages = json['messages'];
                        warnings = json['warnings'];
                        if (messages || warnings) {
                            $form.trigger("asyncform-notification", [messages, warnings]);
                        }

                        if (options.resetOnSuccess) {
                            $form
                                .find(".buttons").find('.icon-loading').remove().end()
                                .find('input:submit').prop('disabled', false).end()
                                .find('.cancel').removeClass('disabled').off('click', cancelOnClick);
                        }

                        options.success(json);
                    } else if ($data) {
                        $form.trigger("asyncform-replaced", [$data]);
                        // Returned data isn't JSON, isn't JSON in a textarea, assume it's straight HTML
                        if (!$data.is("form")) {
                            // Should have been a form, probably IE stripping the form element.
                            // Or the form element is hidden somewhere inside. Try to find it first (compare by id).
                            var formId = $form.get(0).id;
                            if (formId) {
                                var $nestedForm = $data.find('form[id="' + formId + '"]');
                                var formContents = $nestedForm.length ? $nestedForm.html() : $data;
                                $form.html(formContents);
                            } else {
                                $form.html($data);
                            }
                        } else {
                            // Data might contain few elements, we want to replace the form with a new form only
                            $form.replaceWith($data.filter('form'));
                        }
                        if ($.isFunction(options.formReplaced)) {
                            options.formReplaced($data);
                        }
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    $form.trigger("asyncform-error", [jqXHR, textStatus, errorThrown]);
                    if ($.isFunction(options.error)) {
                        options.error(jqXHR, textStatus, errorThrown);
                    } else {
                        var $dummy = $('<div />'), $stackTrace;

                        try {
                            $stackTrace = $(jqXHR.responseText).filter('pre');
                        }
                        catch (e) {
                        }

                        if (!$stackTrace || !$stackTrace.length) {
                            $stackTrace = $('<p/>', {text: errorThrown});
                        }

                        AJS.messages.error($dummy, {
                            title: "An unexpected error has occurred",
                            body: $stackTrace.wrap('<div/>').parent().html(),
                            closeable: false
                        });
                        $form.replaceWith($dummy.children());
                    }
                }
            });
        },
        handleCancel = function (e) {
            e.preventDefault();
            options.cancel(e);
        };

    options = $.extend(defaults, options);

    if ($.isFunction(options.success)) { // No point in an async form if there's no success callback to handle a successful post
        options.$delegator.undelegate(options.target, "submit.asyncform").delegate(options.target, "submit.asyncform", handleSubmit);
    }

    if ($.isFunction(options.cancel)) {
        options.$delegator.undelegate(options.target + " .cancel", "click.asyncform").delegate(options.target + " .cancel", "click.asyncform", handleCancel);
    }
};

/**
 * Handles form input in dialogs
 * @param options
 *  - trigger       String - selector targeting the element that triggers the popup
 *  - dialogWidth   Number - dialog width
 *  - dialogHeight  Number - dialog height
 *  - success       Function - handles JSON response from successful form submission
 *  - cancel        Function - handles what to do when the cancel link is clicked
 *  - header        String - header for the dialog
 */
BAMBOO.simpleDialogForm = function (options) {
    var defaults = {
        trigger: null,
        $trigger: null,
        dialogWidth: null,
        dialogHeight: null,
        success: null,
        cancel: null,
        header: null,
        help: null
    };
    options = AJS.$.extend(defaults, options);
    var $trigger = options.$trigger,
        $loading = AJS.$('<span class="icon icon-loading aui-dialog-content-loading" />'),
        $formContainer = AJS.$('<div class="aui-dialog-content"/>').html($loading),
        dialog,
        setFocus = function () {
            var $firstError = $formContainer.find(":input:visible:enabled.errorField:first").focus();
            if (!$firstError.length) {
                $formContainer.find(":input:visible:enabled:first").focus();
            }
        },
        setupDialogContent = function (html) {
            $formContainer.html(html);
            setupForm($formContainer.find("form"));
            BAMBOO.asyncForm({
                $delegator: $formContainer,
                target: "form",
                success: function (data) {
                    if (AJS.$.isFunction(options.success)) {
                        options.success(data);
                    }
                    dialog.remove();
                    $formContainer.html($loading);
                },
                cancel: function (e) {
                    e.preventDefault();
                    if (AJS.$.isFunction(options.cancel)) {
                        options.cancel(e);
                    }
                    dialog.remove();
                    $formContainer.html($loading);
                },
                formReplaced: setupForm
            });
        },
        setupForm = function ($dialogForm) {
            if (options.help) {
                addHelp();
            }
            setFocus();
            BAMBOO.DynamicFieldParameters.syncFieldShowHide($dialogForm, false);
        },
        showDialog = function () {
            dialog = new AJS.Dialog({
                width: options.dialogWidth,
                height: options.dialogHeight,
                keypressListener: function (e) {
                    if (e.which == jQuery.ui.keyCode.ESCAPE) {
                        dialog.remove();
                        $formContainer.html($loading);
                    }
                }
            });
            var header = options.header ? options.header : $trigger.attr("title");
            if (header) {
                dialog.addHeader(header);
            }
            dialog.addPanel("", $formContainer);

            // $trigger.attr("data-dialog-href") won't be needed once we're on jQuery 1.4.3
            AJS.$.ajax({
                url: $trigger.attr("href") || $trigger.data("dialog-href") || $trigger.attr("data-dialog-href"),
                data: {'bamboo.successReturnMode': 'json', decorator: 'nothing', confirm: true},
                success: setupDialogContent,
                cache: false
            });

            dialog.show();
        },
        addHelp = function () {
            return AJS.$('<div />', {
                'class': 'dialog-tip',
                html: options.help
            }).prependTo($formContainer.find('.buttons-container'));
        };

    if (options.trigger) {
        var namespace = "click";
        if (options.eventNamespace && options.eventNamespace.length) {
            namespace += "." + options.eventNamespace;
        }
        AJS.$(document).undelegate(options.trigger, namespace);
        AJS.$(document).delegate(options.trigger, namespace, function (e) {
            $trigger = AJS.$(this);
            e.preventDefault();
            showDialog();
        });
    } else {
        showDialog();
    }
};

/**
 * Displays confirmation dialog that is consistent in style with simpleDialogForm but with content
 * generated without additional server request.
 */
function simpleConfirmationDialog(dialogWidth, dialogHeight, content, header, submitLabel, cancelLabel, onSubmit, onCancel) {
    var confirmDialog = new AJS.BambooDialog({width: dialogWidth, height: dialogHeight, submitMode: "ajax"}),
        doSubmit = function (dialog) {
            if (AJS.$.isFunction(onSubmit)) {
                onSubmit();
            }
            dialog.remove();
        },
        doCancel = function (dialog) {
            if (AJS.$.isFunction(onCancel)) {
                onCancel();
            }
            dialog.remove();
        };
    confirmDialog.addHeader(header);

    // @TODO a workaround to some bug... We should revisit this post AUI 2.0 upgrade
    confirmDialog.addPanel("nothing", "nothing");
    confirmDialog.addButton(submitLabel, doSubmit);
    confirmDialog.addCancel(cancelLabel, doCancel);

    confirmDialog.getCurrentPanel().html("<div id='simpleDialogForm'>" + content + "</div>");
    confirmDialog.show();
}

/**
 * General checkbox tree utilities.
 */
var checkboxTree = function () {
    return {
        DONT_ENABLE_PARENT_ON_ALL_CHILDREN_ENABLED: 1 << 0,
        DISABLE_CHILDREN_ON_PARENT_CHECKED: 1 << 1,
        /**
         * Cascade state of a parent checkbox to collection of children checkboxes.
         * @param jqParent    parent checkbox (jQuery object)
         * @param jqChildren  children checkboxes (jQuery object)
         */
        cascadeToChildren: function (jqParent, jqChildren, options) {
            if (jqParent.is(":checked")) {
                jqChildren.attr("checked", "checked");
            } else {
                jqChildren.removeAttr("checked");
            }
            if (options & this.DISABLE_CHILDREN_ON_PARENT_CHECKED) {
                if (jqParent.is(":checked")) {
                    jqChildren.attr("disabled", "disabled");
                } else {
                    jqChildren.removeAttr("disabled");
                }
            }
        },

        /**
         * Propagate state of children checkboxes to parent checkbox.
         * @param jqParent    parent checkbox (jQuery object)
         * @param jqChildren  children checkboxes (jQuery object)
         * @param options     options that modify default behavior
         */
        propagateToParent: function (jqParent, jqChildren, options) {
            if (jqChildren.is(":not(:checked)")) {
                jqParent.removeAttr("checked");
            } else {
                if (!(options & this.DONT_ENABLE_PARENT_ON_ALL_CHILDREN_ENABLED)) {
                    jqParent.attr("checked", "checked");
                }
            }
        }
    };
}();

function enableShowSnapshotsForMaven2Dependencies(showAllSelector, showOnlySnapshotsSelector, tableSelector, hasSnapshots) {
    AJS.$(document).ready(function () {
        var showAllLink = AJS.$(showAllSelector);
        var showOnlySnapshotsLink = AJS.$(showOnlySnapshotsSelector);
        var table = AJS.$(tableSelector);

        showAllLink.click(function () {
            showOnlySnapshotsLink.show();
            showAllLink.hide();
            AJS.$('.gav-tbody-releases').show();
        });

        showOnlySnapshotsLink.click(function () {
            showAllLink.show();
            showOnlySnapshotsLink.hide();
            AJS.$('.gav-tbody-releases').hide();
        });

        if (hasSnapshots) {
            showOnlySnapshotsLink.click();
        } else {
            showAllLink.hide();
            showOnlySnapshotsLink.hide();
        }
    });
}

function addAliasSubmitCallback(result) {
    AJS.$('select.selectAlias').append(
        AJS.$('<option />', {
            text: result.aliasName,
            selected: 'selected',
            val: result.aliasId
        })
    );
    simpleSelect2('select.selectAlias');
}

/**
 * Checks if any forms on the page need a submit on change hook.
 */
AJS.$(function ($) {
    $(".submitOnChange").change(function () {
        $(this).closest("form").submit();
    });
});

/**
 * Current Activity screen
 */
var CurrentActivity = {
    // Default options
    options: {
        contextPath: null,
        getBuildsUrl: null,
        viewAgentUrl: null,
        reorderBuildUrl: null,
        stopBuildUrl: null,
        stopDeploymentUrl: null,
        manageElasticInstancesUrl: null,
        emptyQueueText: null,
        emptyBuildingText: null,
        cancellingBuildText: null,
        cancelBuildText: null,
        cancelDeploymentText: null,
        queueOutOfDateText: null,
        canBuildElastically: null,
        canBuildElasticallyAdmin: null,
        fetchingBuildData: null,
        hasAdminPermission: false,
        canManageElasticBamboo: false,
        caParent: null,
        buildingParent: null,
        queueParent: null,
        activityStream: null,
        agentSummary: null
    },
    updateTimeout: null, // ID of timeout which determines when the data will be next fetched from the server
    building: null, // jQuery object referring to the list holding the currently building builds (set on init)
    queue: null, // jQuery object referring to the list holding the queued builds (set on init)
    noBuilding: null, // jQuery object referring to the message shown when there are no currently building builds (set on init)
    noQueued: null, // jQuery object referring to the message shown when there are no queued builds (set on init)
    loadingBuilding: null, // jQuery object referring to the loading indicator shown while currently building data is being fetched the first time (set on init)
    loadingQueued: null, // jQuery object referring to the loading indicator shown while queue data is being fetched the first time (set on init)
    queueOutOfDate: null, // jQuery object referring to the message shown when the queue order has been updated remotely and is not reflected locally (set on init)
    updateTimestamp: null, // Timestamp (represented as milliseconds since the Unix epoch) that the builds were last updated
    isBeingSorted: false, // Is the queue currently being sorted?
    disabledStopHTML: '', // HTML to replace the stop button with if it's disabled (set on init)
    /**
     * Generates a nice, readable string of Agents that the Plan can build on
     * @param executableAgents - Array of Agent objects
     * @returns {String} A readable sentence containing the list of agents
     */
    generateBuildableAgentsText: function (executableAgents) {
        var agentNames = [];

        for (var i = 0; i < executableAgents.length; i++) {
            agentNames.push(executableAgents[i].name);
        }
        return "Can build on " + agentNames.join(", ");
    },
    generateListItem: function (queueItem) {
        if (queueItem.itemType == 'BUILD') {
            return CurrentActivity.generateBuildListItem(queueItem);
        }
        else {
            return CurrentActivity.generateDeploymentListItem(queueItem);
        }
    },
    /**
     * Generates the list item
     * @param deployment - Deployment object
     * @returns {Object} containing the list item or false if no list item is built (would require build.status to be something other than BUILDING or QUEUED)
     */
    generateDeploymentListItem: function (deployment) {
        var ca = CurrentActivity,
            o = ca.options,
            handle = o.hasAdminPermission ? '<span class="handle"></span>' : '',
            el = '';
        if (deployment.hasReadPermission) {
            var name = 'Deployment of ' + deployment.deploymentProjectName + ' &rsaquo; ' + _.escape(deployment.versionName) + ' to     ' + deployment.environmentName;
            var resultLink = '<a href="' + o.contextPath + '/deploy/viewDeploymentResult.action?deploymentResultId=' + deployment.resultId + '">' + name + '</a>'

            if (deployment.status == "BUILDING") {
                var buildAgentInfo = deployment.agent ? ' running on <a href="' + o.viewAgentUrl + '?agentId=' + deployment.agent.id + '" class="' + deployment.agent.type.toLowerCase() + '">' + deployment.agent.name + '</a>' : '';
                el = '<li id="b' + deployment.resultKey + '" class="buildRow"><div class="buildInfo">' + resultLink + buildAgentInfo + '</div><div class="message ' + deployment.messageType.toLowerCase() + '">' + deployment.messageText + '</div>';
                if (deployment.hasBuildPermission) {
                    var stopButtonHTML = (deployment.isBeingStopped) ? ca.disabledStopHTML : '<a href="' + o.stopDeploymentUrl + '?deploymentResultId=' + deployment.resultId + '" class="build-stop">' + widget.icons.icon({
                        type: 'build-stop',
                        text: o.cancelDeploymentText,
                        showTitle: true
                    }) + '</a>';
                    el += '<ul class="buildActions"><li>' + stopButtonHTML + '</li></ul>'
                }
                el += '</li>';
            } else if (deployment.status == "QUEUED") {
                var title = deployment.executableAgents ? ' title="' + ca.generateBuildableAgentsText(deployment.executableAgents) + '"' : '',
                    handle = o.hasAdminPermission ? '<span class="handle"></span>' : '';

                el = '<li id="b' + deployment.resultKey + '" class="buildRow"><div class="buildInfo">' + handle + resultLink + '</div>';
                el += '<div class="message ' + deployment.messageType.toLowerCase() + '"' + title + '>' + deployment.messageText + '</div>'

                if (deployment.executableElasticImages || deployment.hasBuildPermission) {
                    el += '<ul class="buildActions">';
                    if (deployment.executableElasticImages) {
                        if (o.canManageElasticBamboo) {
                            el += '<li><a href="' + o.manageElasticInstancesUrl + '">' + widget.icons.icon({
                                type: 'elastic',
                                text: o.canBuildElasticallyAdmin,
                                showTitle: true
                            }) + '</a></li>';
                        } else {
                            el += '<li>' + widget.icons.icon({
                                type: 'elastic-disabled',
                                text: o.canBuildElastically,
                                showTitle: true
                            }) + '</li>';
                        }
                    }
                    if (deployment.hasBuildPermission) {
                        el += '<li><a href="' + o.stopDeploymentUrl + '?deploymentResultId=' + deployment.resultId + '" class="build-stop">' + widget.icons.icon({
                            type: 'build-stop',
                            text: o.cancelDeploymentText,
                            showTitle: true
                        }) + '</a></li>'
                    }
                    el += '</ul>';
                }
                el += '</li>';
            }
        } else {
            el = '<li id="b' + deployment.resultKey + '" class="buildRow"><div class="buildInfo">' + _.escape(deployment.versionName) + '</div><span class="message ' + deployment.messageType.toLowerCase() + '">' + deployment.messageText + '</span></li>';
        }
        return (el.length == 0 ? false : AJS.$(el).data("item-type", "DEPLOYMENT"));
    },
    /**
     * Generates the list item
     * @param build - Build object
     * @returns {Object} containing the list item or false if no list item is built (would require build.status to be something other than BUILDING or QUEUED)
     */
    generateBuildListItem: function (build) {
        var ca = CurrentActivity,
            o = ca.options,
            el = "";

        if (build.hasReadPermission) {
            var masterName = build.isBranch ? build.planName.split(" - ", 2)[1] + ' &rsaquo; <span class="aui-icon aui-icon-small aui-iconfont-devtools-branch"/> ' : "";
            var buildLink = '<a href="' + o.contextPath + '/browse/' + build.planResultKey + '/">' + build.projectName + ' &rsaquo; ' + masterName + build.chainName + ' &rsaquo; #' + build.buildNumber + '</a> &rsaquo; <a href="' + o.contextPath + '/browse/' + build.buildResultKey + '/">' + build.jobName + '</a>';

            if (build.status == "BUILDING") {
                var msgHtml = build.messageType == "PROGRESS" ? '<div class="progress-bar" style="width:' + build.percentageComplete + '%;"></div><div class="progress-text">' + build.messageText + '</div>' : build.messageText;
                var buildAgentInfo = build.agent ? ' building on <a href="' + o.viewAgentUrl + '?agentId=' + build.agent.id + '" class="' + build.agent.type.toLowerCase() + '">' + build.agent.name + '</a>' : '';
                el = '<li id="b' + build.buildResultKey + '" class="buildRow"><div class="buildInfo">' + buildLink + buildAgentInfo + '</div><div class="message ' + build.messageType.toLowerCase() + '">' + msgHtml + '</div>'; //Current Activity
                if (build.hasBuildPermission) {
                    var stopButtonHTML = (build.isBeingStopped) ? ca.disabledStopHTML : '<a href="' + o.stopBuildUrl + '?planResultKey=' + build.buildResultKey + '" class="build-stop">' + widget.icons.icon({
                        type: 'build-stop',
                        text: o.cancelBuildText,
                        showTitle: true
                    }) + '</a>';
                    el += '<ul class="buildActions"><li>' + stopButtonHTML + '</li></ul>';
                }
                el += '</li>';
            } else if (build.status == "QUEUED") {
                var title = build.executableAgents ? ' title="' + ca.generateBuildableAgentsText(build.executableAgents) + '"' : '',
                    handle = o.hasAdminPermission ? '<span class="handle"></span>' : '';
                el = '<li id="b' + build.buildResultKey + '" class="buildRow"><div class="buildInfo">' + handle + buildLink + '</div><div class="message ' + build.messageType.toLowerCase() + '"' + title + '>' + build.messageText + '</div>';  //Current Activity
                if (build.executableElasticImages || build.hasBuildPermission) {
                    el += '<ul class="buildActions">';
                    if (build.executableElasticImages) {
                        if (o.canManageElasticBamboo) {
                            el += '<li><a href="' + o.manageElasticInstancesUrl + '">' + widget.icons.icon({
                                type: 'elastic',
                                text: o.canBuildElasticallyAdmin,
                                showTitle: true
                            }) + '</a></li>';
                        } else {
                            el += '<li>' + widget.icons.icon({
                                type: 'elastic-disabled',
                                text: o.canBuildElastically,
                                showTitle: true
                            }) + '</li>';
                        }
                    }
                    if (build.hasBuildPermission) {
                        el += '<li><a href="' + o.stopBuildUrl + '?planResultKey=' + build.buildResultKey + '" class="build-stop">' + widget.icons.icon({
                            type: 'build-stop',
                            text: o.cancelBuildText,
                            showTitle: true
                        }) + '</a></li>'
                    }
                    el += '</ul>';
                }
                el += '</li>';
            }
        } else {
            el = '<li id="b' + build.buildResultKey + '" class="buildRow"><div class="buildInfo">' + build.planName + '</div><span class="message ' + build.messageType.toLowerCase() + '">' + build.messageText + '</span></li>';
        }
        return (el.length == 0 ? false : AJS.$(el).data("item-type", "BUILD"));
    },
    /**
     * Checks if an activity stream is available, and if it is (and there are no activity stream comment forms open -
     * which would indicate the user is probably in the middle of adding a comment) then trigger a refresh.
     */
    updateActivityStream: function () {
        var o = CurrentActivity.options;

        if (o.activityStream && AJS.$(".activity-item-comment-form:visible", document.getElementById("feedContainer-" + o.activityStream.feedId)).length == 0) {
            o.activityStream.populateFeed();
        }
    },
    /**
     * Checks the time the build was last updated with the time the last data was retrieved.
     * Removes the build if it's older than the last update.
     * @param li - List item containing the build
     * @returns {Boolean} indicating whether the build was removed or not
     */
    checkLastUpdated: function (li) {
        var b = AJS.$(li);

        if (b.data("lastUpdated") < CurrentActivity.updateTimestamp) {
            b.remove();
            return true;
        } else {
            return false;
        }
    },
    /**
     * Checks if build lists are empty and if so, hide the list and display a message, otherwise show the list and hide the message.
     */
    checkListsHaveBuilds: function () {
        var ca = CurrentActivity;

        if (ca.building.children().length == 0) {
            ca.building.hide();
            ca.noBuilding.show();
        } else {
            ca.building.show();
            ca.noBuilding.hide();
        }
        if (ca.queue.children().length == 0) {
            ca.queue.hide();
            ca.noQueued.show();
            // If queue is empty but "queue is out-of-date" message is being displayed then hide the message and re-enable sorting
            if (ca.queueOutOfDate.is(":visible")) {
                ca.queue.sortable("enable");
                ca.queueOutOfDate.hide();
            }
        } else {
            ca.queue.show();
            ca.noQueued.hide();
        }
    },
    /**
     * Checks if current activity container exists and is in DOM
     * @returns {Boolean} indicating whether the container exists in the DOM
     */
    isCurrentActivityPresent: function () {
        var o = CurrentActivity.options;

        return (!o.caParent || !o.caParent.length || !o.caParent.parent().length);
    },
    /**
     * Retrieves the build JSON from the server and adds/removes/changes builds in the currently building and queue as needed.
     * @param callback - Allows the ability to execute a callback once the update has completed
     */
    updateBuilds: function (callback) {
        var ca = CurrentActivity,
            o = ca.options;

        ca.updateTimestamp = (new Date()).getTime();
        // Get builds from API
        AJS.$.ajax({
            url: o.getBuildsUrl,
            dataType: 'json',
            cache: false,
            success: function (json) {
                if (ca.isCurrentActivityPresent()) {
                    return false;
                }

                // If a callback was supplied to updateBuilds, fire it
                if (callback && AJS.$.isFunction(callback)) {
                    callback.call();
                }
                // Update agent summary text if available
                if (o.agentSummary) {
                    o.agentSummary.text(json.agentSummary);
                }
                // Go through each build returned and either update or insert as required
                AJS.$.each(json.builds, function () {
                    var build = AJS.$("#b" + this.buildResultKey),
                        msg, progress, messageType, stopButton;

                    if (build.length > 0) { // Check if the build already exists in building/queue
                        if (this.status == "BUILDING") {
                            // Check if build has started, if so move to building
                            if (build.closest(".buildContainer")[0] == o.queueParent[0]) {
                                build.remove();
                                build = ca.generateListItem(this).appendTo(ca.building);
                                progress = AJS.$(".progress", build[0]);
                                if (progress.length > 0) {
                                    progress.progressBar();
                                }
                            } else {
                                msg = AJS.$(".message", build[0]);
                                messageType = this.messageType.toLowerCase();

                                if (messageType == "progress" && msg.hasClass(messageType)) {
                                    msg.progressBar("option", {value: this.percentageComplete, text: this.messageText});
                                } else if (messageType == "progress") {
                                    msg.attr("class", "message").progressBar({
                                        value: this.percentageComplete,
                                        text: this.messageText
                                    });
                                } else {
                                    if (msg.hasClass("progress")) {
                                        msg.progressBar("destroy");
                                    }
                                    if (!msg.hasClass(messageType)) {
                                        msg.attr("class", "message " + messageType).text(this.messageText);
                                    } else {
                                        msg.text(this.messageText);
                                    }
                                }
                                if (this.hasBuildPermission && this.isBeingStopped) {
                                    stopButton = AJS.$(".build-stop", build[0]);
                                    if (stopButton.length > 0) {
                                        stopButton.replaceWith(ca.disabledStopHTML);
                                    }
                                }
                            }
                        } else if (this.status == "QUEUED") {
                            msg = AJS.$(".message", build[0]).text(this.messageText).attr("title", (this.executableAgents ? ca.generateBuildableAgentsText(this.executableAgents) : null));
                            if (!msg.hasClass(this.messageType.toLowerCase())) {
                                msg.attr("class", "message " + this.messageType.toLowerCase());
                            }
                        }
                    } else {
                        if (this.status == "BUILDING") {
                            build = ca.generateListItem(this).appendTo(ca.building);
                            progress = AJS.$(".progress", build[0]);
                            if (progress.length > 0) {
                                progress.progressBar();
                            }
                        } else if (this.status == "QUEUED") {
                            build = ca.generateListItem(this).appendTo(ca.queue);
                        }
                    }
                    // Check if queue order is correct and reorder if required
                    if (!ca.isBeingSorted && typeof(this.queueIndex) != "undefined" && this.queueIndex != build.prevAll().length) {
                        build.insertBefore(ca.queue.children("li:eq(" + this.queueIndex + ")"));
                    }
                    build.data("lastUpdated", ca.updateTimestamp);
                });

                // Clean up builds not returned in JSON
                var numRemoved = 0;
                ca.building.children().each(function () {
                    if (ca.checkLastUpdated(this)) {
                        numRemoved++;
                    }
                });
                ca.queue.children().each(function () {
                    if (ca.checkLastUpdated(this)) {
                        numRemoved++;
                    }
                });
                if (numRemoved > 0) {
                    ca.updateActivityStream();
                }

                if (o.hasAdminPermission) {
                    // Refresh sorting
                    ca.queue.sortable("refresh");
                }

                ca.checkListsHaveBuilds();

                // Clear timeout to ensure we don't have multiple running
                clearTimeout(ca.updateTimeout);

                ca.updateTimeout = setTimeout(ca.updateBuilds, BAMBOO.mediumServerPollMillis);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                if (ca.isCurrentActivityPresent()) {
                    return false;
                }

                // Clear timeout to ensure we don't have multiple running
                clearTimeout(ca.updateTimeout);

                // Error occurred when doing the update, try again in 30 sec, making sure the callback is passed so that it will actually get executed when it finally succeeds
                ca.updateTimeout = setTimeout(function () {
                    ca.updateBuilds(callback);
                }, BAMBOO.afterErrorServerPollMillis);
            }
        });
    },
    /**
     * Strips a build list item's id down to a build result key
     * @param buildListItemID - String containing the build list item's id - eg. bBAM-FUNC-1234
     * @returns {String} containing the build result key - eg. BAM-FUNC-1234
     */
    buildListItemIDToBuildResultKey: function (buildListItemID) {
        return buildListItemID.substr(1);
    },
    /**
     * Initialisation for the Current Activity
     * @param options - Object containing the options to overwrite our defaults
     */
    init: function (options) {
        var ca = CurrentActivity,
            o = ca.options;

        AJS.$.extend(o, options);

        ca.building = AJS.$("<ul/>").appendTo(o.buildingParent).hide();
        ca.queue = AJS.$("<ul/>").appendTo(o.queueParent).hide();
        ca.noBuilding = AJS.$("<p>" + o.emptyBuildingText + "</p>").appendTo(o.buildingParent).hide();
        ca.noQueued = AJS.$("<p>" + o.emptyQueueText + "</p>").appendTo(o.queueParent).hide();
        ca.queueOutOfDate = AJS.$("<p>" + o.queueOutOfDateText + "</p>").insertBefore(ca.queue).hide();
        ca.loadingBuilding = AJS.$('<p class="loading">' + o.fetchingBuildData + '</p>').appendTo(o.buildingParent);
        ca.loadingQueued = AJS.$('<p class="loading">' + o.fetchingBuildData + '</p>').appendTo(o.queueParent);
        ca.disabledStopHTML = widget.icons.icon({
            type: 'build-stop-disabled',
            text: o.cancellingBuildText,
            showTitle: true
        });

        clearTimeout(ca.updateTimeout);
        ca.updateTimestamp = null;

        o.caParent.delegate(".buildActions a.build-stop", "click", function (e) {
            var el = AJS.$(this),
                li = el.closest(".buildRow");
            AJS.$.post(this.href, function () {
                // Only remove from the queue immediately - currently building builds may take a while to stop and clean up - let the next updateBuilds() that runs clean it up
                if (li.closest(".buildContainer")[0] == o.queueParent[0]) {
                    li.remove();
                }
                ca.checkListsHaveBuilds();
            });
            el.replaceWith(ca.disabledStopHTML);
            e.preventDefault();
        });
        AJS.$("a", ca.queueOutOfDate[0]).click(function (e) {
            clearTimeout(ca.updateTimeout);
            ca.queue.empty().sortable("enable");
            AJS.$(this).parent().hide();
            ca.updateBuilds();
            ca.updateActivityStream();
            e.preventDefault();
        });
        if (o.hasAdminPermission) {
            ca.queue.sortable({
                handle: "span.handle",
                update: function (event, ui) {
                    var self = AJS.$(ui.item),
                        resultKey = ca.buildListItemIDToBuildResultKey(self.attr("id")),
                        checkListItemExists = function ($el) {
                            if ($el.length > 0) {
                                return ca.buildListItemIDToBuildResultKey($el.attr("id"));
                            } else {
                                return "";
                            }
                        },
                        prevResultKey = checkListItemExists(self.prev()),
                        itemType = self.data("item-type");
                    AJS.$.post(o.reorderBuildUrl,
                        {resultKey: resultKey, prevResultKey: prevResultKey, itemType: itemType},
                        function (json) {
                            // If an error is returned show the queue out of date message. The next update will restore the correct queue order.
                            if (json.status == "ERROR") {
                                ca.queueOutOfDate.show();
                                ca.queue.sortable("disable");
                            }
                        }, "json");
                },
                start: function (event, ui) {
                    ca.isBeingSorted = true;
                },
                stop: function (event, ui) {
                    ca.isBeingSorted = false;
                }
            });
        }

        var updateBuilds = function () {
            ca.updateBuilds(function () {
                ca.loadingBuilding.hide();
                ca.loadingQueued.hide();
            });
        };

        // If on page load it is not visible - ask for the data anyway.
        // User may open the page in a new tab to revisit it later (he knows that data loads with some delay).
        if (pageVisibilityManager.isPageVisible() === false) {
            updateBuilds();
        }

        pageVisibilityManager.setUp(
            function () {
                clearTimeout(ca.updateTimeout);
                updateBuilds();
            },
            function () {
                clearTimeout(ca.updateTimeout);
            }
        );
    }
};

/**
 * Agent Manager dropdown
 */
var AgentManager = {
    // Default options
    options: {
        contextPath: null,
        getAgentsUrl: null,
        enableAgentUrl: null,
        disableAgentUrl: null,
        enableAllAgentsUrl: null,
        disableAllAgentsUrl: null,
        viewAgentUrl: null,
        enableAgentText: null,
        disableAgentText: null,
        enableAllAgentsText: null,
        disableAllAgentsText: null,
        onlineAgentsText: null,
        defaultRemoteAgentSummaryText: null,
        onlineOnly: false,
        includeRemoteAgentSummary: false,
        triggerId: null,
        dedicatedLozenge: null
    },
    $agentList: null, // jQuery object referring to the list holding the agents
    $dialog: null, // jQuery object referring to the AUI Inline Dialog
    $remoteAgentSummary: null, // jQuery object referring to the paragraph containing the remote agent summary text
    /**
     * Generates the list item
     * @param agent - Agent object
     * @returns {Object} containing the list item or false if no list item is built
     */
    generateListItem: function (agent) {
        var am = AgentManager,
            o = am.options,
            el = "";
        el = '<li class="' + agent.type.toLowerCase() + ' ' + (agent.enabled ? "enabled" : "disabled") + '"><h3><a href="' + o.viewAgentUrl + '?agentId=' + agent.id + '">' + agent.name + '</a>' + (agent.isDedicated ? ' ' + o.dedicatedLozenge : '') + '</h3><span>' + (agent.agentStatus == "Building" ? agent.agentStatus + ' - <a href="' + o.contextPath + agent.buildLogUrl + '">' + agent.buildDisplayName + '</a>' : agent.agentStatus) + '</span> <button class="aui-button ' + (agent.enabled ? "disable" : "enable") + '">' + (agent.enabled ? o.disableAgentText : o.enableAgentText) + '</button></li>';
        return (el.length == 0 ? false : AJS.$(el).data("agentId", agent.id));
    },
    /**
     * Updates the list of agents
     * @param $contents - jQuery element of the Inline Dialog's contents
     * @param $trigger - jQuery element that is triggering the popup
     * @param doShowPopup - function to display the popup
     */
    updateAgents: function ($contents, $trigger, doShowPopup) {
        var am = AgentManager,
            o = am.options;
        AJS.$.ajax({
            url: o.getAgentsUrl,
            data: {onlineOnly: o.onlineOnly, includeRemoteAgentSummary: o.includeRemoteAgentSummary},
            dataType: 'json',
            cache: false,
            success: function (json) {
                if (o.includeRemoteAgentSummary && json.remoteAgentSummary) {
                    am.$remoteAgentSummary.html(json.remoteAgentSummary);
                } else if (o.includeRemoteAgentSummary) {
                    am.$remoteAgentSummary.html(o.defaultRemoteAgentSummaryText);
                }
                am.$agentList.empty();
                AJS.$.each(json.agents, function () {
                    am.$agentList.append(am.generateListItem(this));
                });
                if (doShowPopup) {
                    doShowPopup();
                }
            }
        });
    },
    /**
     * Initialisation for the Agent Manager
     * @param options - Object containing the options to overwrite our defaults
     */
    init: function (options) {
        var am = AgentManager,
            o = am.options;

        // Don't init if already created
        if (am.$dialog) {
            return false;
        }

        AJS.$.extend(o, options);

        am.$dialog = AJS.InlineDialog("#" + o.triggerId, o.triggerId, am.updateAgents, {
            onHover: true,
            width: 400,
            offsetX: 0,
            offsetY: 3,
            cacheContent: false,
            useLiveEvents: true
        });
        var $contents = am.$dialog.find(".contents").addClass("agentManager");
        am.$agentList = AJS.$('<ul />').appendTo($contents).before('<h2>' + o.onlineAgentsText + '</h2>');
        if (o.includeRemoteAgentSummary) {
            am.$remoteAgentSummary = AJS.$('<p>' + o.defaultRemoteAgentSummaryText + '</p>').insertBefore(am.$agentList);
        }
        var $buttons = AJS.$('<div class="aui-buttons"></div>').appendTo($contents);
        AJS.$('<button class="aui-button">' + o.enableAllAgentsText + '</button>').appendTo($buttons).click(function () {
            var el = AJS.$(this);
            el.attr("disabled", "disabled");
            AJS.$.post(o.enableAllAgentsUrl, function () {
                el.removeAttr("disabled");
                am.updateAgents();
            });
        });
        AJS.$('<button class="aui-button">' + o.disableAllAgentsText + '</button>').appendTo($buttons).click(function () {
            var el = AJS.$(this);
            el.attr("disabled", "disabled");
            AJS.$.post(o.disableAllAgentsUrl, function () {
                el.removeAttr("disabled");
                am.updateAgents();
            });
        });
        // FF not firing buttons on click for some reason, mouseup is okay though?!!
        var dialogId = am.$dialog.attr("id");
        AJS.$("#" + dialogId + " button.enable").live("mouseup", function () {
            var el = AJS.$(this),
                li = el.closest("li");
            var agentId = li.data("agentId");
            el.attr("disabled", "disabled");
            AJS.$.post(o.enableAgentUrl, {agentId: agentId}, function () {
                el.text(o.disableAgentText).attr("class", "aui-button disable").removeAttr("disabled").parent().removeClass("disabled");
            });
        });
        AJS.$("#" + dialogId + " button.disable").live("mouseup", function () {
            var el = AJS.$(this),
                li = el.closest("li");
            var agentId = li.data("agentId");
            el.attr("disabled", "disabled");
            AJS.$.post(o.disableAgentUrl, {agentId: agentId}, function () {
                el.text(o.enableAgentText).attr("class", "aui-button enable").removeAttr("disabled").parent().addClass("disabled");
            });
        });
    }
};

var SelectionActions = function () {
    return {
        init: function (formId) {
            registerSelectionActions();

            function registerSelectionActions() {
                AJS.$("span[selector='" + formId + "_all']").click(function () {
                    clearSelectionStatus();

                    getSelectAllWarning().show();
                    getAllPagesSelectedInfo().hide();

                    getAllCheckBoxes("").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_none']").click(function () {
                    clearSelectionStatus();
                });
                AJS.$("span[selector='" + formId + "_disabled']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("[class~='selectorAgentEnabled_false']").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_idle']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("[class~='selectorAgentStatus_Idle']").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_allPages']").click(function () {
                    setCompleteContentSelected(true);
                    getSelectAllWarning().hide();
                    getAllPagesSelectedInfo().show();
                });
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.selectorAgentType_" + formId + "[name='selectedAgents']" + selector);
            }

            function setCompleteContentSelected(newValue) {
                AJS.$('.' + formId + '_completeContentSelected').val(newValue);
            }

            function clearSelectionStatus() {
                AJS.$('.' + formId + '_paginatedWarning').hide();
                getAllCheckBoxes("").removeAttr("checked");
                setCompleteContentSelected(false);
            }

            function getSelectAllWarning() {
                return AJS.$('.' + formId + '_paginatedSelectAllWarning');
            }

            function getAllPagesSelectedInfo() {
                return AJS.$('.' + formId + '_paginatedAllPagesSelected');
            }
        }
    };
}();

/**
 * Generic selection in table control without support for pagination.
 * Selectors need to have 2 attributes :
 *  - data-selector-id (must match name of the checkbox group)
 *  - data-selector-type (ALL, NONE or custom selector that will be match by discriminators)
 *
 * Checkboxes can specify a comma-separated list of discriminators for selection in
 * the 'data-selector-discriminator' attribute.
 *
 */
var GenericSelectionActions = function ($) {
    var SELECT_ALL = "ALL", DESELECT_ALL = "NONE";

    return {

        init: function (formId, checkboxName) {
            registerSelectionActions();

            function registerSelectionActions() {
                var $form = $(BAMBOO.escapeIdToJQuerySelector("#" + formId));
                if ($form.length === 0) {
                    return;
                }
                $form.find("span[data-selector-id='" + checkboxName + "']").click(function () {
                    discriminator = $(this).data("selectorType");
                    applyToCheckboxes($form, discriminator);
                });
            }

            function applyToCheckboxes($inForm, discriminator) {
                $inForm.find("input:checkbox").each(function () {
                    var $this = $(this);
                    if (matchesDiscriminator($this, discriminator)) {
                        $this.attr("checked", "checked");
                    } else {
                        $this.removeAttr("checked");
                    }
                });
            }

            function matchesDiscriminator($checkbox, selector) {
                var found = false;
                if (selector === SELECT_ALL) {
                    return true;
                } else if (selector === DESELECT_ALL) {
                    return false;
                } else {
                    $.each($checkbox.data("selectorDiscriminator").split(","), function (index, value) {
                        if (value === selector) {
                            found = true;
                            return true;
                        }
                    });
                    return found;
                }
            }
        }
    };
}(AJS.$);

/**
 * @deprecated since 5.10 use 'widget/bulk-selection-links'
 */
var BulkSelectionActions = function () {
    return {
        init: function (formId) {
            registerSelectionActions();

            function registerSelectionActions() {
                AJS.$("span[selector='bulk_selector_all']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("").attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_none']").click(function () {
                    clearSelectionStatus();
                });
                AJS.$("span[selector='bulk_selector_plans']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Plan").attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_jobs']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Job").attr("checked", "checked");
                });
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.bulk" + selector);
            }

            function setCompleteContentSelected(newValue) {
                AJS.$('.' + formId + '_completeContentSelected').val(newValue);
            }

            function clearSelectionStatus() {
                getAllCheckBoxes("").removeAttr("checked");
                setCompleteContentSelected(false);
            }
        }
    };
}();

/**
 * @deprecated since 5.10 use 'widget/bulk-selection-links'
 */
var BulkSubtreeSelectionActions = function () {
    return {
        init: function (formId, enableProjectCheckbox) {
            registerSelectionActions(enableProjectCheckbox);

            function registerSelectionActions(enableProjectCheckbox) {
                AJS.$("span[selector='bulk_selector_sub_" + formId + "']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes(formId).attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_sub_none_" + formId + "']").click(function () {
                    clearSelectionStatus();
                });
                AJS.$("span[selector='bulk_selector_sub_plans_" + formId + "']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Plan" + formId).attr("checked", "checked");
                });
                AJS.$("span[selector='bulk_selector_sub_jobs_" + formId + "']").click(function () {
                    clearSelectionStatus();
                    getAllCheckBoxes("Job" + formId).attr("checked", "checked");
                });

                if (enableProjectCheckbox) {
                    AJS.$("#checkbox_" + formId).change(function () {
                        var val = AJS.$(this).is(":checked");
                        clearSelectionStatus();
                        if (val) {
                            getAllCheckBoxes(formId).attr("checked", "checked");
                        }
                    });
                }
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.bulk" + selector);
            }

            function clearSelectionStatus() {
                getAllCheckBoxes(formId).removeAttr("checked");
            }
        }
    };
}();

var ConfigurableSelectionActions = function () {
    return {
        init: function (formId) {
            var formIdSelector = formId.replace(/([\.:])/g, "\\$1");
            registerSelectionActions();

            function registerSelectionActions() {
                AJS.$("span[selector='" + formId + "_all']").click(function () {
                    getAllCheckBoxes("").attr("checked", "checked");
                });
                AJS.$("span[selector='" + formId + "_none']").click(function () {
                    clearSelectionStatus();
                });

                AJS.$("span[selector^='" + formId + "_'][selector!='" + formId + "_none'][selector!='" + formId + "_all']").each(function () {
                    var span = AJS.$(this),
                        selector = span.attr("selector").substring(formId.length + 1);
                    span.click(function () {
                        clearSelectionStatus();
                        getAllCheckBoxes("[class~='selector_" + selector + "_true']").attr("checked", "checked");
                    });
                });
            }

            function getAllCheckBoxes(selector) {
                return AJS.$("input:checkbox.selectorScope_" + formIdSelector + selector);
            }

            function clearSelectionStatus() {
                getAllCheckBoxes("").removeAttr("checked");
            }
        }
    };
}();

/**
 * Live Activity for Plans
 */
var LiveActivity = function ($) {
    var opts = {
            planKey: null,
            container: null,
            getBuildsUrl: null,
            getResultUrl: null,
            getChangesUrl: null,
            queueEmptyText: null,
            cancellingBuildText: null,
            noAdditionalInfoText: null,
            defaultIssueIconUrl: null,
            defaultIssueType: null,
            slideSpeed: 600,
            templates: {
                buildListItemTemplate: null,
                buildingOnTemplate: null,
                buildMessageTemplate: null,
                jiraIssueTemplate: null,
                codeChangeTemplate: null,
                codeChangeChangesetLinkTemplate: null,
                codeChangeChangesetDisplayTemplate: null,
                currentStageTemplate: null,
                toggleDetailsButton: AJS.template('<span class="toggle-details"></span>')
            }
        },
        $buildList, // jQuery object referring to the list holding the builds
        $noBuilds, // jQuery object referring to the message that shows when there are no builds
        disabledStopHTML, // HTML fragment that replaces the stop button when a user clicks it (so it can't be clicked multiple times)
        toggleDetailsHTML, // HTML fragment inserted to enable the user to toggle the display of additional information
        /**
         * Checks if build list is empty and if so, hide the list and display a message, otherwise show the list and hide the message.
         */
        checkListHasBuilds = function () {
            if ($buildList.children().length == 0) {
                $buildList.hide();
                $noBuilds.show();
            } else {
                $buildList.show();
                $noBuilds.hide();
            }
        },
        updateTimeout, // ID of timeout which determines when the data will be next fetched from the server
        updateTimestamp, // Timestamp (represented as milliseconds since the Unix epoch) that the builds were last updated
        /**
         * Retrieves the build JSON from the server and adds/removes/changes builds in the build list as needed.
         */
        update = function () {
            // Otherwise switching to history tab results in undefined behaviour
            if ($('#liveActivity').length == 0) return;
            updateTimestamp = (new Date()).getTime();
            $.ajax({
                url: opts.getBuildsUrl,
                data: {planKey: opts.planKey},
                dataType: "json",
                cache: false,
                success: function (json) {
                    // Go through each build returned and either update or insert as required
                    $.each(json.builds, function () {
                        var $build = $("#b" + this.buildResultKey),
                            messageType = this.messageType.toLowerCase(),
                            status = this.status.toLowerCase();
                        if ($build.length > 0) { // Check if the build already exists in list
                            var $msg = $(".message", $build[0]),
                                $stageInfo = $(".stage-info", $build[0]),
                                $agentInfo = $(".agent-info", $build[0]);
                            if (messageType == "progress" && $msg.hasClass(messageType)) {
                                $msg.progressBar("option", {value: this.percentageComplete, text: this.messageText});
                            } else if (messageType == "progress") {
                                $msg.attr("class", "message").progressBar({
                                    value: this.percentageComplete,
                                    text: this.messageText
                                });
                            } else {
                                if ($msg.hasClass("progress")) {
                                    $msg.progressBar("destroy");
                                }
                                if (!$msg.hasClass(messageType)) {
                                    $msg.attr("class", "message " + messageType).text(this.messageText);
                                } else {
                                    $msg.text(this.messageText);
                                }
                            }
                            if (status == "building") {
                                if ($agentInfo.length == 0 && this.agent != null) {
                                    var buildingOnHTML = status == "building" ? AJS.template.load(opts.templates.buildingOnTemplate).fill({
                                        agentId: this.agent.id,
                                        agentType: this.agent.type.toLowerCase(),
                                        agentName: this.agent.name
                                    }).toString() : "";
                                    $(".build-description", $build[0]).append(buildingOnHTML);
                                }
                                if (this.stage != null && $stageInfo.length > 0) {
                                    var currentStageHTML = (status == "building" ? AJS.template.load(opts.templates.currentStageTemplate).fill({
                                        stageName: this.stage.name,
                                        stageNumber: this.stage.number,
                                        totalStages: this.stage.totalStages
                                    }).toString() : "");
                                    $stageInfo.html($.trim(currentStageHTML));
                                }
                            }
                            if (!$build.hasClass(status)) {
                                $build.removeClass(status == "building" ? "queued" : "building").addClass(status);
                            }
                        } else {
                            var buildingOnHTML = (status == "building" && this.agent != null) ? AJS.template.load(opts.templates.buildingOnTemplate).fill({
                                    agentId: this.agent.id,
                                    agentType: this.agent.type.toLowerCase(),
                                    agentName: this.agent.name
                                }).toString() : "",
                                currentStageHTML = (status == "building" && this.stage != null) ? AJS.template.load(opts.templates.currentStageTemplate).fill({
                                    stageName: this.stage.name,
                                    stageNumber: this.stage.number,
                                    totalStages: this.stage.totalStages
                                }).toString() : "",
                                buildMessageHTML = AJS.template.load(opts.templates.buildMessageTemplate).fill({
                                    type: messageType,
                                    text: this.messageText
                                }).toString(),
                                listItemHTML = AJS.template.load(opts.templates.buildListItemTemplate).fill({
                                    buildResultKey: this.buildResultKey,
                                    cssClass: status,
                                    status: status,
                                    planKey: this.planKey
                                }).fillHtml({
                                    buildingOn: buildingOnHTML,
                                    triggerReason: this.triggerReason,
                                    currentStage: currentStageHTML,
                                    buildMessage: buildMessageHTML
                                }).toString();
                            $build = $(listItemHTML).appendTo($buildList);
                            var $msg = $(".message", $build[0]);
                            $build.addClass("collapsed").prepend(toggleDetailsHTML);
                            $(".additional-information", $build).hide();
                            if (messageType == "progress") {
                                $msg.progressBar({value: this.percentageComplete, text: this.messageText});
                            }
                        }
                        $build.data("lastUpdated", updateTimestamp);
                    });

                    // Clean up builds not returned in JSON
                    var planResultKeys = [];
                    $buildList.children().each(function () {
                        var b = $(this);
                        if (b.data("lastUpdated") < updateTimestamp) {
                            b.fadeOut(500, function () {
                                $(this).remove();
                                checkListHasBuilds();
                            })
                            planResultKeys.push(b.attr('id').substring(1));
                        }
                    });
                    if (planResultKeys.length > 0) {
                        // Pet peeve - reverse mutates in place :(
                        planResultKeys.reverse();
                        $.ajax({
                            url: opts.getResultUrl,
                            data: {planResultKeys: planResultKeys},
                            success: function (result) {
                                $('.buildResultsNone').hide();
                                $('#buildResultsTable').show().find('tbody').prepend($(result).find('tr'));
                            }
                        });
                    }

                    checkListHasBuilds();

                    // Use a fast poll if something is going on, slow poll if everything is calm
                    updateTimeout = setTimeout(update, json.builds && json.builds.length ? BAMBOO.fastServerPollMillis : BAMBOO.slowServerPollMillis);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    updateTimeout = setTimeout(update, BAMBOO.afterErrorServerPollMillis);
                }
            });
        };
    return {
        /**
         * Initialisation for the Live Activity
         * @param options - Object containing the options to overwrite our defaults
         */
        init: function (options) {
            $.extend(true, opts, options);
            disabledStopHTML = widget.icons.icon({
                type: 'build-stop-disabled',
                text: opts.cancellingBuildText,
                showTitle: true
            });
            if (opts.templates.toggleDetailsButton) {
                toggleDetailsHTML = opts.templates.toggleDetailsButton.toString();
            }

            $buildList = $("> ul", opts.container);
            if ($buildList.length == 0) {
                $buildList = $("<ul />").hide().prependTo(opts.container);
            } else {
                $buildList.children().addClass("collapsed").prepend(toggleDetailsHTML);
                $(".additional-information", $buildList).hide();
            }
            $noBuilds = $("> p", opts.container);
            if ($noBuilds.length == 0) {
                $noBuilds = $("<p>" + opts.queueEmptyText + "</p>").hide().appendTo(opts.container);
            }

            $("#" + opts.container.attr("id") + " a.build-stop").live("click", function (e) {
                var el = $(this),
                    li = el.closest("li");
                $.post(this.href, function () {
                    // Only remove from the queue immediately - currently building builds may take a while to stop and clean up - let the next updateBuilds() that runs clean it up
                    if (li.hasClass("queued")) {
                        li.fadeOut(500, function () {
                            $(this).remove();
                            checkListHasBuilds();
                        })
                    }
                });
                el.replaceWith(disabledStopHTML);
                e.preventDefault();
            });

            $("#" + opts.container.attr("id") + " .collapsed .toggle-details").live("click", function (e) {
                var el = $(this),
                    li = el.closest("li"),
                    additionalInfo = $(".additional-information", li[0]),
                    buildResultKey = li.attr("id").substring(1);

                if (!additionalInfo.data("data-retrieved")) {
                    li.removeClass("collapsed");
                    $.ajax({
                        url: opts.getChangesUrl + buildResultKey,
                        data: {
                            expand: "jiraIssues,vcsRevisions.vcsRevision.changes.change"
                        },
                        dataType: "json",
                        contentType: "application/json",
                        success: function (json) {
                            var issues = "";
                            if (json.jiraIssues && json.jiraIssues.size > 0) {
                                $.each(json.jiraIssues.issue, function () {
                                    if (this.url && this.url.href && this.key && this.summary) {
                                        issues += AJS.template.load(opts.templates.jiraIssueTemplate).fill({
                                            url: this.url.href,
                                            issueType: (this.issueType && this.issueType.length > 0) ? this.issueType : opts.defaultIssueType,
                                            issueIconUrl: (this.iconUrl && this.iconUrl.length > 0) ? this.iconUrl : opts.defaultIssueIconUrl,
                                            key: this.key,
                                            details: this.summary
                                        }).toString();
                                    }
                                });
                            }

                            var changes = "";
                            if (json.vcsRevisions && json.vcsRevisions.size > 0) {
                                $.each(json.vcsRevisions.vcsRevision, function () {
                                    if (this.changes && this.changes.size > 0) {
                                        $.each(this.changes.change, function () {
                                            if (this.author && this.comment) {
                                                changes += AJS.template.load(opts.templates.codeChangeTemplate).fill({
                                                    authorOrUser: (this.userName && this.userName.length > 0) ? "user" : "author",
                                                    author: (this.userName && this.userName.length > 0) ? this.userName : this.author,
                                                    displayName: (this.fullName && this.fullName.length > 0) ? this.fullName : this.author,
                                                    comment: this.comment
                                                }).fillHtml({
                                                    changesetInfo: this.changesetId ? AJS.template.load(this.commitUrl ? opts.templates.codeChangeChangesetLinkTemplate : opts.templates.codeChangeChangesetDisplayTemplate).fill({
                                                        commitUrl: this.commitUrl ? this.commitUrl : null,
                                                        changesetId: this.changesetId
                                                    }).toString() : ""
                                                }).toString();
                                            }
                                        });
                                    }
                                });
                            }

                            if (issues.length == 0 && changes.length == 0) {
                                additionalInfo.text(opts.noAdditionalInfoText);
                            } else {
                                if (issues.length == 0) {
                                    $(".issueSummary", additionalInfo[0]).remove();
                                } else {
                                    $(".issueSummary", additionalInfo[0]).append("<ul>" + issues + "</ul>");
                                }
                                if (changes.length == 0) {
                                    $(".changesSummary", additionalInfo[0]).remove();
                                } else {
                                    $(".changesSummary", additionalInfo[0]).append("<ul>" + changes + "</ul>");
                                }
                            }

                            li.addClass("expanded");
                            additionalInfo.data("data-retrieved", true, true).stop(true).slideDown(opts.slideSpeed);
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            li.addClass("collapsed");
                        }
                    });
                } else {
                    li.removeClass("collapsed").addClass("expanded");
                    additionalInfo.stop(true, true).slideDown(opts.slideSpeed);
                }
            });

            $("#" + opts.container.attr("id") + " .expanded .toggle-details").live("click", function (e) {
                var el = $(this),
                    li = el.closest("li");
                li.removeClass("expanded").addClass("collapsed");
                $(".additional-information", li[0]).stop(true, true).slideUp(opts.slideSpeed);
            });

            // Trigger the first update
            update();
        }
    }
}(jQuery);


function showAjaxErrorMessage(XMLHttpRequest) {
    AJS.$(".ajaxErrorMessage").html('"' + getMessageToShow(XMLHttpRequest.statusText) + '"');
    AJS.$("#ajaxErrorHolder").removeClass("hidden").show();
}

/**
 * Translates indecipherable messages into something more readable
 *
 * @param originalMessage the original message
 * @returns {string} either the original message passed in (if it's not indecipherable) or a generic message
 */
function getMessageToShow(originalMessage) {
    originalMessage = AJS.$.trim(originalMessage);
    if (originalMessage === "" || originalMessage === "error") {
        return "Error whilst communicating with server";
    }
    return originalMessage;
}

function hideAjaxErrorMessage() {
    AJS.$(".ajaxErrorMessage").empty();
    AJS.$("#ajaxErrorHolder").hide();
}

/**
 * Usage: init(selector, reloadEvent) . Calling init function multiple times on the same page is safe regardless of used selectors.
 *
 * @param selector the jQuery selector used to mark asynchronously executed links
 * @param resetLinkStateEventName (optional, nullable) the event causing the "executed" status of links to be cleared
 * @param onUrlCallFinished (optional) handler to call when url processing is finished
 */
var AsynchronousRequestManager = function ($) {
    var IN_PROGRESS_KEY = "isInProgress";
    var registeredResetLinkStateHandlers = {};

    function isInProgress(link) {
        return link.data(IN_PROGRESS_KEY);
    }

    function setInProgress(link, newValue) {
        link.data(IN_PROGRESS_KEY, newValue);
        if (newValue) {
            link.fadeTo("slow", 0.4);
        } else {
            link.fadeTo("slow", 1);
        }
    }

    var onAsynchronousLinkClick = function (event) {
        var $this = $(this);
        var data = event.data;
        if (!isInProgress($this)) {
            $.ajax({
                url: this.href,
                type: $this.hasClass("usePostMethod") ? "POST" : "GET",
                error: function (XMLHttpRequest) {
                    setInProgress($this, false);
                    if (event.data.failureHandler) {
                        event.data.failureHandler();
                    }
                    showAjaxErrorMessage(XMLHttpRequest);
                },
                success: function (htmlOrJson) {
                    if (htmlOrJson.status && htmlOrJson.status == "ERROR") {
                        if (data.failureHandler) {
                            data.failureHandler(htmlOrJson);
                        }
                    } else {
                        if (data.successHandler) {
                            data.successHandler();
                        }
                    }
                    setInProgress($this, false);
                }
            });
            setInProgress($this, true);
        }
        event.preventDefault();
    };

    function makePair(first, second) {
        return first + "##" + second;
    }

    return {
        init: function (selector, resetLinkStateEventName, onUrlCallFinished) {
            var $selector = $(selector);
            if (resetLinkStateEventName) {
                var pair = makePair(resetLinkStateEventName, selector);
                if (!(pair in registeredResetLinkStateHandlers)) {
                    $("body").bind(resetLinkStateEventName, function () {
                        $selector.filter(":visible").each(function () {
                            setInProgress($(this), false);
                        });
                    });
                    registeredResetLinkStateHandlers[pair] = true;
                }
            }

            $(document)
                .off("click", selector, onAsynchronousLinkClick)
                .on("click", selector, {
                    successHandler: onUrlCallFinished,
                    failureHandler: onUrlCallFinished
                }, onAsynchronousLinkClick);
        }
    }
}(AJS.$);


/**
 * JobResultSummary page
 */
var JobResultSummaryLiveActivity = function ($) {
    var opts = {
            buildResultKey: null,
            buildLifeCycleState: null,
            container: null,
            getBuildUrl: null,
            reloadUrl: null,
            templates: {
                disabledStopButton: null,
                logTableRow: null,
                progressOverAverage: null,
                progressUnderAverage: null,
                queueDurationDescription: null,
                queuePositionDescription: null,
                updatingSourceFor: null
            }
        },
        linesOfLogToDisplay = 10,
        $linesOfLogToDisplaySelect,
        $logBody,
        $logContainer,
        $logLoading,
        $progressBarContainer,
        $queueDurationDescriptionContainer,
        $queuePositionDescriptionContainer,
        queueDuration,
        updateTimeout,
        update = function () {

            clearTimeout(updateTimeout);

            var ajaxData = $logContainer.is(":visible") ? {
                expand: 'logEntries[-' + linesOfLogToDisplay + ':]',
                'max-results': linesOfLogToDisplay
            } : {};

            $.ajax({
                url: opts.getBuildUrl,
                data: ajaxData,
                dataType: "json",
                contentType: "application/json",
                cache: false,
                success: function (buildResult) {
                    if (buildResult.lifeCycleState != opts.buildLifeCycleState) {
                        document.location = opts.reloadUrl;
                        return;
                    } else if (buildResult.lifeCycleState == "Pending" || buildResult.lifeCycleState == "Queued") {
                        if (queueDuration != buildResult.queueDuration) {
                            var queueDurationMarkup = AJS.template.load(opts.templates.queueDurationDescription)
                                .fill({durationDescription: DurationUtils.getPrettyPrint(buildResult.queueDuration)}).toString();
                            $queueDurationDescriptionContainer.html(queueDurationMarkup);
                            $queueDurationDescriptionContainer.show();
                            queueDuration = buildResult.queueDuration;
                        }

                        var queuePositionMarkup = AJS.template.load(opts.templates.queuePositionDescription)
                            .fill({
                                position: buildResult.queue.position + 1,
                                length: buildResult.queue.length
                            }).toString();
                        $queuePositionDescriptionContainer.html(queuePositionMarkup);
                        $queuePositionDescriptionContainer.show();

                    } else if (buildResult.lifeCycleState == "InProgress") {
                        if (buildResult.progress) {

                            var pbOptions = {};

                            if (buildResult.buildStartedTime) {
                                pbOptions.value = buildResult.progress.percentageCompleted * 100;
                                if (buildResult.progress.isUnderAverageTime) {
                                    pbOptions.text = AJS.template.load(opts.templates.progressUnderAverage).fill({
                                        elapsed: buildResult.progress.prettyBuildTime,
                                        remaining: buildResult.progress.prettyTimeRemainingLong
                                    }).toString();
                                } else {
                                    pbOptions.text = AJS.template.load(opts.templates.progressOverAverage).fill({
                                        elapsed: buildResult.progress.prettyBuildTime,
                                        remaining: buildResult.progress.prettyTimeRemainingLong
                                    }).toString();
                                }
                            } else {
                                pbOptions.value = 0;
                                pbOptions.text = AJS.template.load(opts.templates.updatingSourceFor).fill({
                                    prettyVcsUpdateDuration: buildResult.prettyVcsUpdateDuration
                                }).toString();
                            }

                            $progressBarContainer.progressBar(pbOptions);
                        }

                        if (buildResult.logEntries && buildResult.logEntries.logEntry) {

                            var newLogBody = '';

                            for (var i = 0, ii = buildResult.logEntries.logEntry.length; i < ii; i++) {
                                var logEntry = buildResult.logEntries.logEntry[i];
                                newLogBody += AJS.template.load(opts.templates.logTableRow)
                                    .fill({time: logEntry.formattedDate})
                                    .fillHtml({log: logEntry.log}).toString();
                            }
                            if ($logBody.html() != newLogBody) {
                                $logBody.html(newLogBody);
                            }
                            if ($logLoading.is(":visible")) {
                                $logLoading.hide();
                                $logBody.parent().removeClass("hidden");
                            }
                        }
                    }

                    // Update again in 5 seconds
                    updateTimeout = setTimeout(update, BAMBOO.fastServerPollMillis);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    updateTimeout = setTimeout(update, BAMBOO.afterErrorServerPollMillis);
                }
            });
        };
    return {
        init: function (options) {
            $.extend(true, opts, options);

            $linesOfLogToDisplaySelect = $("#linesToDisplay");
            $logBody = $("#buildLog tbody");
            $logContainer = $logBody.parent().parent();
            $logLoading = $(".loading", $logContainer[0]);
            $progressBarContainer = $("#pb" + opts.buildResultKey);
            $queueDurationDescriptionContainer = $("#queueDurationDescription");
            $queuePositionDescriptionContainer = $("#queuePositionDescription");

            // Get our default in line with what was set previously
            linesOfLogToDisplay = $linesOfLogToDisplaySelect.val();

            $linesOfLogToDisplaySelect.change(function () {
                linesOfLogToDisplay = $(this).val();
                saveCookie("BAMBOO-MAX-DISPLAY-LINES", linesOfLogToDisplay, 365);
                update();
            });

            if (opts.templates.disabledStopButton) {
                var disabledStopHTML = opts.templates.disabledStopButton.toString();
                $("#buildResults a.build-stop").live("click", function (e) {
                    var $el = $(this);
                    $.post(this.href);
                    $el.replaceWith(disabledStopHTML);
                    e.preventDefault();
                });
            }

            // Trigger the first update
            update();
        }
    }
}(jQuery);


var DurationUtils = function () {
    var opts = {
            format: "{value} {unit}",
            units: {
                SEC: ["second", "seconds"],
                MIN: ["minute", "minutes"]
            }
        },
        MILLIS_IN_MINUTE = 60 * 1000,
        MILLIS_IN_SECOND = 1000,
        describeValueAs = function (value, unit) {
            return opts.format.replace("{value}", value).replace("{unit}", value == 1 ? unit[0] : unit[1]);
        };
    return {
        init: function (options) {
            $.extend(true, opts, options);
        },
        getPrettyPrint: function (elapsedTimeMillis) {
            if (elapsedTimeMillis >= MILLIS_IN_MINUTE) {
                return describeValueAs(Math.floor(elapsedTimeMillis / MILLIS_IN_MINUTE), opts.units.MIN)
            } else if (elapsedTimeMillis >= MILLIS_IN_SECOND) {
                return describeValueAs(Math.floor(elapsedTimeMillis / MILLIS_IN_SECOND), opts.units.SEC)
            } else {
                return "< 1 {unit}".replace("{unit}", opts.units.SEC[0]);
            }
        }
    }
}();

/**
 * BuildResultSummary page
 */
var BuildResultSummaryLiveActivity = function ($) {
    var opts = {
            getBuildUrl: null,
            activeJobResultKey: null,
            templates: {
                logMessagePending: null,
                logMessageQueued: null,
                logMessageFinished: null,
                logTableRow: null
            }
        },
        displayLogActivity = function (logBody) {
            $logMessage.hide();
            $logLoading.hide();
            if ($logBody.html() != logBody) {
                $logBody.html(logBody);
            }
            $logBody.parent().show();
            $logContainer.show();
        },
        displayLogLoading = function () {
            $logMessage.hide();
            $logBody.parent().hide();
            $logLoading.show();
            $logContainer.show();
        },
        displayLogMessage = function (template) {
            $logContainer.hide();
            $logMessage.html(AJS.template.load(template).fill({job: jobName})).show();
        },
        $jobResultKeyForLogDisplaySelect,
        jobResultKey,
        jobName,
        linesOfLogToDisplay = 10,
        $linesOfLogToDisplaySelect,
        $logBody,
        $logContainer,
        $logLoading,
        $logMessage,
        updateTimeout,
        update = function () {

            clearTimeout(updateTimeout);

            $.ajax({
                url: opts.getBuildUrl.replace("@KEY@", jobResultKey),
                data: {
                    expand: 'logEntries[-' + linesOfLogToDisplay + ':]',
                    'max-results': linesOfLogToDisplay
                },
                dataType: "json",
                contentType: "application/json",
                cache: false,
                success: function (buildResult) {
                    if (buildResult.lifeCycleState == "Pending") {
                        displayLogMessage(opts.templates.logMessagePending);
                    } else if (buildResult.lifeCycleState == "Queued") {
                        displayLogMessage(opts.templates.logMessageQueued);
                    } else if (buildResult.lifeCycleState == "InProgress") {
                        if (buildResult.logEntries && typeof(buildResult.logEntries.logEntry) != "undefined") {
                            var newLogBody = '';
                            for (var i = 0, ii = buildResult.logEntries.logEntry.length; i < ii; i++) {
                                var logEntry = buildResult.logEntries.logEntry[i];
                                newLogBody += AJS.template.load(opts.templates.logTableRow)
                                    .fill({time: logEntry.formattedDate})
                                    .fillHtml({log: logEntry.log}).toString();
                            }
                            displayLogActivity(newLogBody);
                        } else {
                            displayLogLoading();
                        }
                    } else if (buildResult.lifeCycleState == "Finished") {
                        displayLogMessage(opts.templates.logMessageFinished);
                    }

                    // Update again in 5 seconds
                    updateTimeout = setTimeout(update, BAMBOO.fastServerPollMillis);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    updateTimeout = setTimeout(update, BAMBOO.afterErrorServerPollMillis);
                }
            });
        };
    return {
        init: function (options) {
            $.extend(true, opts, options);
            $jobResultKeyForLogDisplaySelect = $("#jobResultKeyForLogDisplay");
            $linesOfLogToDisplaySelect = $("#linesToDisplay");
            $logContainer = $("#buildResultSummaryLogs");
            $logBody = $("table > tbody", $logContainer[0]);
            $logLoading = $(".loading", $logContainer[0]);
            $logMessage = $("#buildResultSummaryLogMessage");

            // Get our default in line with what was set previously
            linesOfLogToDisplay = $linesOfLogToDisplaySelect.val();

            $jobResultKeyForLogDisplaySelect.change(function () {
                jobResultKey = $jobResultKeyForLogDisplaySelect.val();
                jobName = $jobResultKeyForLogDisplaySelect.find("option:selected").text();
                update();
            });

            $linesOfLogToDisplaySelect.change(function () {
                linesOfLogToDisplay = $linesOfLogToDisplaySelect.val();
                saveCookie("BAMBOO-MAX-DISPLAY-LINES", linesOfLogToDisplay, 365);
                update();
            });

            // Trigger the first update
            if (opts.activeJobResultKey) {
                $jobResultKeyForLogDisplaySelect.val(opts.activeJobResultKey);
            }
            $jobResultKeyForLogDisplaySelect.change();
        }
    }
}(jQuery);


var ChainConfiguration = function ($) {
    var opts = {
        $list: null,
        moveStageUrl: null,
        moveJobUrl: null,
        confirmStageMoveUrl: null,
        confirmJobMoveJobUrl: null,
        chainKey: null,
        canReorder: false,
        stageMoveHeader: "Move Stage",
        jobMoveHeader: "Move Job"
    };
    return {
        init: function (options) {
            $.extend(true, opts, options);
            opts.$list.children(":last-child").addClass("last");

            if (!opts.canReorder) {
                return;
            }

            opts.$list.sortable({
                cursor: "move",
                distance: 5,
                handle: "dl",
                start: function (event, ui) {
                    var $self = $(ui.item);
                    $self.data("movedFromPos", $self.prevAll().length);
                },
                update: function (event, ui) {
                    var $self = $(ui.item),
                        revertMove = function (index) {
                            if ((opts.$list.children().length - 1) == $self.data("movedFromPos")) {
                                $self.appendTo(opts.$list).removeData("movedFromPos");
                            } else {
                                $self.insertBefore(opts.$list.children("li:eq(" + ($self.data("movedFromPos") + (($self.data("movedFromPos") > index) ? 1 : 0)) + ")")).removeData("movedFromPos");
                            }
                        },
                        showError = function () {
                            var message = arguments.length ? arguments[0] : "There was a problem moving your stage.",
                                errorDialog = new AJS.Dialog(550, 300);
                            errorDialog.addHeader("Stage move failed").addPanel("errorPanel", '<div class="fieldError errorText">' + message + '</div>').addButton("Close", function (dialog) {
                                dialog.hide();
                            });
                            errorDialog.show();
                            revertMove();
                        },
                        callMoveAction = function () {
                            var stageId = $self.attr("id").split("_")[1],
                                index = $self.prevAll().length;
                            $.ajax({
                                type: "POST",
                                url: opts.moveStageUrl,
                                data: {buildKey: opts.chainKey, stageId: stageId, index: index},
                                success: function (json) {
                                    if (json.status == "ERROR") {
                                        if (json.errors && json.errors.length > 0) {
                                            var message = json.errors.join("<br>");
                                            showError(message);
                                        } else {
                                            showError();
                                        }
                                    } else if (json.status == "CONFIRM") {
                                        var cancelCallback = function (dialog) {
                                            revertMove(index);
                                        };
                                        simpleDialogForm(null, opts.confirmStageMoveUrl + "?buildKey=" + opts.chainKey + "&stageId=" + stageId + "&index=" + index, 600, 500, opts.stageMoveHeader, "ajax", null, cancelCallback, opts.stageMoveHeader);
                                    } else {
                                        opts.$list.children(":last-child").addClass("last").siblings().removeClass("last");
                                    }
                                },
                                error: function (XMLHttpRequest, textStatus, errorThrown) {
                                    showError();
                                },
                                dataType: "json"
                            });
                        };
                    callMoveAction();
                }
            });

            var jobLists = opts.$list.find("> li > div > ul");
            jobLists.children("[id^='job_']").draggable({
                cursor: "move",
                handle: ".handle",
                revert: "invalid",
                revertDuration: 300,
                scope: "jobs",
                start: function (event, ui) {
                    var $self = $(this);
                    $self.data("movedFrom", $self.parent()).data("movedFromPos", $self.prevAll().length);

                    // Add a z-index to the stage when someone drags a job to fix IE7's crappy stacking
                    if ($.browser.msie && parseInt($.browser.version, 10) == 7) {
                        $self.closest("li[id^='stage_']").css("zIndex", 1).siblings().css("zIndex", "")
                    }
                }
            });
            jobLists.droppable({
                accept: function (li) {
                    return (this != li.parent()[0]); // prevents being able to drop to the same stage
                },
                activeClass: "ui-state-active",
                drop: function (event, ui) {
                    var $self = ui.draggable,
                        revertMove = function () {
                            var $originalFollowingElement = $self.data("movedFrom").children("li:eq(" + $self.data("movedFromPos") + ")");
                            if ($originalFollowingElement.length == 0) {
                                $self.appendTo($self.data("movedFrom")).removeData("movedFrom").removeData("movedFromPos");
                            } else {
                                $self.insertBefore($originalFollowingElement).removeData("movedFrom").removeData("movedFromPos");
                            }
                        },
                        showError = function () {
                            var message = arguments.length ? arguments[0] : "There was a problem moving your Job.",
                                errorDialog = new AJS.Dialog(400, 150);

                            errorDialog.addHeader("Job move failed").addPanel("errorPanel", '<div class="fieldError errorText">' + message + '</div>').addButton("Close", function (dialog) {
                                dialog.hide();
                            });
                            errorDialog.show();
                            revertMove();
                        },
                        callMoveAction = function () {
                            var stageId = $self.closest("li[id^='stage_']").attr("id").split("_")[1],
                                jobKey = $self.attr("id").split("_")[1];
                            $.ajax({
                                type: "POST",
                                url: opts.moveJobUrl,
                                data: {buildKey: opts.chainKey, stageId: stageId, jobKey: jobKey},
                                success: function (json) {
                                    if (json.status == "ERROR") {
                                        if (json.errors && json.errors.length > 0) {
                                            var message = json.errors.join("<br>");
                                            showError(message);
                                        } else {
                                            showError();
                                        }
                                    } else if (json.status == "CONFIRM") {
                                        var cancelCallback = function () {
                                            revertMove();
                                        };
                                        simpleDialogForm(null, opts.confirmJobMoveJobUrl + "?buildKey=" + opts.chainKey + "&stageId=" + stageId + "&jobKey=" + jobKey, 600, 500, opts.jobMoveHeader, "ajax", null, cancelCallback, opts.jobMoveHeader);
                                    }
                                },
                                error: function (XMLHttpRequest, textStatus, errorThrown) {
                                    showError();
                                },
                                dataType: "json"
                            });
                        };
                    $self.prependTo(this).css({left: "", top: ""});
                    callMoveAction();
                },
                hoverClass: "ui-state-hover",
                scope: "jobs"
            });
        }
    }
}(jQuery);

var ArtifactDefinitionEdit = function ($) {
    var opts = {
            i18n: {
                artifact_definition_shareToggle_error: null,
                artifact_definition_shareToggle_error_header: null,
                global_buttons_close: null
            },
            deletePackageItem: {
                actionUrl: null,
                submitLabel: null,
                title: null
            },
            editPackageItem: {
                actionUrl: null,
                submitLabel: null,
                title: null
            },
            renameArtifactDefinitionToEnableSharing: {
                actionUrl: null,
                submitLabel: null,
                title: null
            }
        },
        $artifactDefinitionsTable,
        deleteArtifactDefinitionCallback = function (result) {
            var artifact = result.artifactDefinition;

            (($("tbody > tr", $artifactDefinitionsTable).length == 1) ? $artifactDefinitionsTable : $("#artifactDefinition-" + artifact.id)).remove();
        },
        deleteArtifactDefinitionOnClick = function () {
            var artifactId = this.id.split("-")[1],
                hasDependencies = $(this).hasClass("hasDependencies");

            simpleDialogForm(null,
                opts.deletePackageItem.actionUrl + "&artifactId=" + artifactId,
                hasDependencies ? 600 : 400,
                hasDependencies ? 500 : 200,
                opts.deletePackageItem.submitLabel,
                "ajax",
                deleteArtifactDefinitionCallback,
                null,
                opts.deletePackageItem.title,
                null);
        },
        editArtifactDefinitionOnClick = function () {
            var artifactId = this.id.split("-")[1];

            simpleDialogForm(null,
                opts.editPackageItem.actionUrl + "&artifactId=" + artifactId,
                800,
                510,
                opts.editPackageItem.submitLabel,
                "ajax",
                updateArtifactDefinitionCallback,
                null,
                opts.editPackageItem.title,
                null);
        },
        updateArtifactDefinitionCallback = function (result) {
            var artifact = result.artifactDefinition,
                $cells = $("#artifactDefinition-" + artifact.id + " > td");

            $($cells[0]).find("span.artifactName").text(artifact.name);
            $($cells[0]).find("span.icon").attr("class", artifact.sharedArtifact ? "icon icon-artifact-shared" : "icon icon-artifact");

            $($cells[1]).text(artifact.location);
            $($cells[2]).text(artifact.copyPattern);

            $artifactDefinitionsTable.trigger("update").trigger("sorton", [$artifactDefinitionsTable.get(0).config.sortList]);
        };

    return {
        init: function (options) {
            $.extend(true, opts, options);

            $artifactDefinitionsTable = $("#artifactDefinitions");

            // initialize table sorter
            $artifactDefinitionsTable.tablesorter({
                headers: {3: {sorter: false}, 4: {sorter: false}},
                sortList: [[0, 0]]
            });
            $artifactDefinitionsTable.delegate("a.deleteArtifactDefinition", "click", deleteArtifactDefinitionOnClick)
                .delegate("a.editArtifactDefinition", "click", editArtifactDefinitionOnClick);
        }
    }
}(jQuery);


var LinkedJiraProjects = function ($) {
    var defaults = {
            deleteItem: {
                title: null
            }
        },
        $table,
        deleteItemCallback = function (result) {
            var item = result.linkedJiraProject;
            (($("tbody > tr", $table).length === 1) ? $table : $(BAMBOO.escapeIdToJQuerySelector("#linkedJiraProject-" + item.id))).remove();
        };

    return {
        init: function (options) {
            options = AJS.$.extend(defaults, options);

            $table = $("#linkedJiraProjects");

            // initialize table sorter
            $table.tablesorter({
                headers: {2: {sorter: false}},
                sortList: [[0, 0]]
            });

            BAMBOO.simpleDialogForm({
                trigger: '#linkedJiraProjects a.deleteLinkedJiraProject',
                dialogWidth: 400,
                dialogHeight: 200,
                success: deleteItemCallback,
                header: options.deleteItem.title
            });
        }
    }
}(jQuery);


/* Tests Tables */
AJS.$(document).delegate(".tests-table > tbody > tr > .twixie > span", "click", function (e) {
    var $twixie = AJS.$(this),
        $tr = $twixie.closest("tr"),
        $stack = $tr.next(),
        newTwixieText = !$twixie.hasClass("icon-collapse") ? "Collapse" : "Expand"; //negated because we toggle the class later
    $stack[$tr.hasClass("collapsed") ? "show" : "hide"]();
    $tr.toggleClass("collapsed expanded");
    $twixie.toggleClass("icon-collapse icon-expand").attr("title", newTwixieText).html("<span>" + newTwixieText + "</span>");
});
AJS.$(document).delegate(".tests-table-container > .controls li", "click", function (e) {
    var $trigger = AJS.$(this),
        $li = $trigger.closest("li"),
        $table = $trigger.closest(".controls").prevAll(".tests-table");
    if ($li.hasClass("expand-all")) {
        $table.find("tbody > .collapsed .twixie > span").click();
    } else if ($li.hasClass("collapse-all")) {
        $table.find("tbody > .expanded .twixie > span").click();
    }
});


/**
 * Strip given prefix from input.
 * Can handle String and jQuery object input.
 *
 * @param prefix String                   prefix to be stripped from input
 * @param input  String or jQuery object
 */
BAMBOO.stripPrefixFromId = function (prefix, input) {
    if (typeof(input) == 'string') {
        if (input.indexOf(prefix) === 0) {
            return input.slice(prefix.length);
        } else {
            return input;
        }
    } else {
        return this.stripPrefixFromId(prefix, AJS.$(input).attr("id"));
    }
};

/**
 * Unsafe (for jQuery id's) character regex
 * Reference: http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F
 */
BAMBOO.unsafeIdCharacterRegex = /([:.])/g;

/**
 * Escape characters in element id to use it as jQuery selector
 * @param id
 */
BAMBOO.escapeIdToJQuerySelector = function (id) {
    return id.replace(BAMBOO.unsafeIdCharacterRegex, '\\$1');
};

BAMBOO.buildAUIMessage = function (messages, type, opts) {
    var defaults = {
            escapeTitle: true
        },
        options = AJS.$.extend(true, defaults, opts),
        msg,
        $dummy = AJS.$('<div/>');
    if (messages.length === 1) {
        msg = (options.escapeTitle ? messages[0] : '<strong>' + messages[0] + '</strong>');
        AJS.messages[type]($dummy, (options.escapeTitle ? {title: msg, closeable: false} : {
            body: msg,
            closeable: false
        }));
    } else if (messages.length > 1) {
        var list = ['<ul>'];
        for (var i = 0, ii = messages.length; i < ii; i++) {
            list.push('<li>', messages[i], '</li>');
        }
        list.push('</ul>');
        AJS.messages[type]($dummy, {body: list.join(''), closeable: false});
    }
    return $dummy.children();
};

BAMBOO.buildAUIErrorMessage = function (errors) {
    return BAMBOO.buildAUIMessage(errors, 'error', {});
};

BAMBOO.buildAUIWarningMessage = function (warnings) {
    return BAMBOO.buildAUIMessage(warnings, 'warning', {});
};

BAMBOO.buildFieldError = function (errors) {
    var $dummy = AJS.$('<div/>');
    for (var i = 0, ii = errors.length; i < ii; i++) {
        $dummy.append(AJS.$('<div class="error"/>').html(errors[i]));
    }
    return $dummy.children();
};

/**
 * Add errors to a form field
 * @param $form
 * @param fieldName
 * @param {Array} errors
 * @param {boolean=} animate - display the error(s) with an animation
 */
BAMBOO.addFieldErrors = function ($form, fieldName, errors, animate) {
    var $field = AJS.$('#fieldArea_' + $form.attr('id') + '_' + fieldName.replace(BAMBOO.addFieldErrorsFieldNameRegex, "_")),
        $input = AJS.$('#' + $form.attr('id') + '_' + fieldName.replace(BAMBOO.addFieldErrorsFieldNameRegex, "_")),
        $description = $field.find('.description'),
        $errors = BAMBOO.buildFieldError(errors);

    if (animate) {
        $errors.hide();
    }
    if ($description.length) {
        $description.before($errors);
    } else if ($field.length) {
        $field.append($errors);
    } else {
        $input.after($errors);
    }
    if (animate) {
        $errors.slideDown();
    }
};
BAMBOO.addFieldErrorsFieldNameRegex = /\./g;

(function ($) {
    var i18nCollapse = "Collapse",
        i18nExpand = "Expand";

    $(document).delegate(".collapsible-section > .summary > h3, .collapsible-section > .summary > .icon", "click", function (e) {
        var $summary = $(this).parent(),
            $section = $summary.closest(".collapsible-section"),
            $details = $section.children(".collapsible-details"),
            $icon = $summary.children(".icon");

        if ($section.hasClass("collapsed")) {
            $icon.addClass("icon-collapse").removeClass("icon-expand").attr({title: i18nCollapse}).children().text(i18nCollapse);
            $details.stop(true, true).slideDown(function () {
                $section.removeClass("collapsed");
            });
        } else {
            $icon.addClass("icon-expand").removeClass("icon-collapse").attr({title: i18nExpand}).children().text(i18nExpand);
            $details.stop(true, true).slideUp(function () {
                $section.addClass("collapsed");
            });
        }
    });
})(AJS.$);

/**
 * TODO: extend this with automatic link adding (which will work also for AJAX loaded forms).
 */
BAMBOO.JdkBuilderSelectWidget = function (options) {
    var opts = {
        dialog: {
            height: 320,
            width: 540
        }
    };

    AJS.$.extend(true, opts, options);

    BAMBOO.simpleDialogForm({
        trigger: options.clickTarget,
        dialogWidth: opts.dialog.width,
        dialogHeight: opts.dialog.height,
        success: function (result) {
            AJS.$(opts.displayTarget).append(AJS.$("<option />", {
                val: result.capability.label,
                text: result.capability.label
            })).val(result.capability.label);
        }
    });
};

AJS.$(function ($) {
    addConfirmationToLinks();
    /* Default options for jQuery's tablesorter plugin */
    if ($.tablesorter) {
        // use 'zebra' plugin by default
        $.tablesorter.defaults.widgets = ['zebra'];
        // use AUI compatible classes
        $.tablesorter.defaults.widgetZebra = {css: ['', 'zebra']};
    }

    // Drop down for user profile
    AJS.$("#header > .global > .secondary .aui-dd-parent").dropDown("Standard", {trigger: "span.aui-dd-trigger"});
});

BAMBOO.JdkBuilderSelectWidget({clickTarget: "a.addSharedJdkCapability", displayTarget: "select.jdkSelectWidget"});
BAMBOO.JdkBuilderSelectWidget({
    clickTarget: "a.addSharedBuilderCapability",
    displayTarget: "select.builderSelectWidget"
});

/**
 * Small jQuery method to check if the element has been clipped (content breaking outside it's bounding box) or not
 */
jQuery.fn.isClipped = function () {
    var $el = this.filter(':first');
    return ($el.prop('scrollWidth') > $el.prop('clientWidth'));
};

BAMBOO.openJiraIssueTransitionDialog = function (e) {
    e.preventDefault();
    var $trigger = AJS.$(this),
        dialog = new AJS.Dialog({
            width: 720,
            height: 350,
            keypressListener: function (e) {
                if (e.which == jQuery.ui.keyCode.ESCAPE) {
                    dialog.remove();
                }
            }
        });
    dialog.addHeader("Transition Issue").addCancel("Done", function () {
//      dialog.remove();
        reloadThePage();
    });
    AJS.$.ajax({
        url: $trigger.attr("href"),
        data: {'bamboo.successReturnMode': 'json', decorator: 'rest', confirm: true},
        success: function (html) {
            var $html = AJS.$(html);

            dialog.addPanel("", $html).show();
            BAMBOO.JIRAISSUETRANSITION.init({
                issueKey: $trigger.attr("issueKey"),
                returnUrl: $trigger.attr("returnUrl")
            });
        },
        cache: false
    });
};

(function ($) {
    $(document).on('aui-message-close', function (e, a) {
        if (a.hasClass('system-error-message')) {
            var $link = a.find('.system-error-message-remove');
            if ($link.length) {
                $.post($link.attr('href'));
            }
        }
    });
}(AJS.$));

// trigger analytics event when clicked element with 'data-bamboo-analytics-event' attribute
(function ($) {
    const isJSON = function (string) {
        try {
            JSON.parse(string);
            return true
        } catch (e) {
            return false;
        }
    };
    const eventPayloadToEvent = function (eventPayload) {
        if (isJSON(eventPayload)) {
            return $.parseJSON(eventPayload);
        }
        return {name: eventPayload};
    };

    $(document).on('click', '[data-bamboo-analytics-event]', function () {
        AJS.trigger('analytics', eventPayloadToEvent($(this).attr('data-bamboo-analytics-event')));
    });
}(AJS.$));

(function ($) {
    $.ajaxSetup({
        cache: false
    });
}(AJS.$));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/dynamic-field-parameters.js' */
BAMBOO.DynamicFieldParameters = (function ($) {
    var handleOnSelectShowHideSelector = ".handleOnSelectShowHide",
        handleDynamicDescriptionSelector = ".handleDynamicDescription",
        // lifted straight from jQuery, just changed the order
        fxAttrs = [
            // height animations
            [ "height", "marginTop", "marginBottom", "paddingTop", "paddingBottom" ],
            // opacity animations
            [ "opacity" ],
            // width animations
            [ "width", "marginLeft", "marginRight", "paddingLeft", "paddingRight" ]
        ],
        // object to handle the methods we make 'public'
        ret = {};

    /**
     * Handles form select field dynamic description updating
     */
    function handleDynamicSelectDescription() {
        var $select = $(this);

        $select.nextAll(".description").html($select.find("option:selected").attr("data-dynamic-select-description") || null);
    }

    /**
     * Syncs form display states for handleOnSelectShowHide fields and select field dynamic description updating
     * @param context (optional) - DOM Element, Document or jQuery object to use as context
     * @param animate (optional) - force transition animations
     */
    ret.syncFieldShowHide = function (context, animate) {
        if (typeof context === "boolean") {
            animate = context;
            context = null;
        }
        $(".handleOnSelectShowHide", context).each(function () { handleOnSelectShowHide.call(this, animate); });
        $(handleDynamicDescriptionSelector, context).each(handleDynamicSelectDescription);
    };

    function escapeCss(str) {
        var charsToEscape = /[!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~]/g; //from jQuery docs
        return str.replace(charsToEscape, '\\$&');
    }

    /**
     * Runs on a change of a field
     */
    function handleOnSelectShowHide(e) {
        var $el = $(this),
            dependsOnSelector = (".dependsOn" + escapeCss($el.prop("name") || "")),
            switchValue = getSwitchValue($el),
            showPattern, hidePattern,
            useAnimations = (e instanceof jQuery.Event || (typeof e === "boolean" && e)),
            showFn = !useAnimations ? jQuery.fn.show : function () {
                ret.slideDown(this);
            },
            hideFn = !useAnimations ? jQuery.fn.hide : function () {
                ret.slideUp(this);
            };

        if (!(!switchValue && $el.is(":radio"))) {
            showPattern = "showOn" + switchValue;
            hidePattern = "showOn__" + switchValue;

            $el.closest("form").find(dependsOnSelector).each(function () {
                var $deps = $(this);

                if ($deps.prop("class").indexOf("showOn__") != -1) {
                    if ($deps.hasClass(hidePattern)) {
                        hideFn.call($deps);
                    } else {
                        showFn.call($deps);
                    }
                } else {
                    if ($deps.hasClass(showPattern)) {
                        showFn.call($deps);
                    } else {
                        hideFn.call($deps);
                    }
                }
                if ($deps.hasClass(hidePattern)) {
                    hideFn.call($deps);
                }
            });
        }
    }

    /**
     * JSOn listData looks like:
     *
     *  [data: [{value: 'key1', text: 'name for the screen', supportedValues: ['dependencyKey1', 'dependencyKey2']},
     *   {value: 'key2', text: "name 2", supportedValues: ['dependencyKey1']}]]
     *
     * If supportedValues is empty it will be shown for all selections in selParentJQ.
     *
     * @param selParentJQ - the select list that the your data depends on
     * @param selToMutateJQ - the select list that you want to mutate based on the contents of the selDependency
     * @param listDataJson - the json containing all information required to generate the selToMutate
     */
    ret.mutateSelectListContent = function (selParentJQ, selToMutateJQ, listDataJson) {
        var selToMutate = selToMutateJQ[0],
            currentSelectedValue = selToMutateJQ.val(),
            switchValue = getSwitchValue(selParentJQ),
            listData = listDataJson.data;

        //wipe existing items
        selToMutate.options.length = 0;

        // go through selToMutate check if each item is in allowed Items, if not remove?
        for (var i = 0; i<listData.length; i++){
            var value = listData[i].value,
                text = listData[i].text,
                allowedOptions = listData[i].supportedValues,
                show = allowedOptions === null || allowedOptions.length <= 0 || !switchValue;

            if (!show) {
                for (var x = 0; x < allowedOptions.length; x++) {
                    var allowedOption = allowedOptions[x];
                    if (switchValue === allowedOption) {
                        show = true;
                        break;
                    }
                }
            }

            if (show) {
                selToMutate.options[selToMutate.options.length] = new Option(text, value, false, value === currentSelectedValue);
            }
        }

        // make sure we update the dependents of the mutated list.
        handleOnSelectShowHide.call(selToMutate)
    };

    function getSwitchValue($el) {
        if ($el.is("select") && $el.prop("selectedIndex") > -1) {
            var $opt = $el.find("option:selected").filter(":first"),
                optClass = $opt.prop("class");

            //  Special uiSwitch* class prefix
            if (optClass.indexOf('uiSwitch') != -1) {
                return optClass.substring(optClass.lastIndexOf("uiSwitch") + 8);
            } else {
                return $el.val();
            }
        } else if ($el.is(":radio") || $el.is(":checkbox")) {
            return ($el.is(":checked") ? $el.val() : false);
        } else {
            return $el.val();
        }
    }

    ret.selectFirstFieldOfForm = function (formId) {
        var $form = $("#" + formId),
            $firstError = $form.find(":input:visible:enabled.errorField:first").focus();

        if (!$firstError.length) {
            $form.find(":input:visible:enabled:first").focus();
        }
    };

    ret.slideDown = function ($el) {
        $el.animate(genFx('show', 2), function() { $el.show(); });
    };

    ret.slideUp = function ($el) {
        $el.animate(genFx('hide', 2), function() { $el.hide(); });
    };

    /** Generate parameters to create a standard animation
     * This has been lifted straight from jQuery
     * @param type
     * @param num
     */
    function genFx( type, num ) {
        var obj = {};

        jQuery.each( fxAttrs.concat.apply([], fxAttrs.slice(0,num)), function() {
            obj[ this ] = type;
        });

        return obj;
    }

    // handleOnSelectShowHide functionality
    $(document)
        .delegate('input' + handleOnSelectShowHideSelector, 'click', handleOnSelectShowHide)
        .delegate('select, input' + handleOnSelectShowHideSelector, 'change', handleOnSelectShowHide)
        .delegate(handleDynamicDescriptionSelector, 'change', handleDynamicSelectDescription);

    $(function () {
        ret.syncFieldShowHide();
    });

    return ret;
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/config-panel-editor.js' */
BAMBOO.ConfigPanelEditor = function () {
    var events = require('util/events');
    var $ = AJS.$,
        defaults = {
            editor: null,
            configContainer: null,
            itemList: null,
            deleteItemKey: null,
            configFormSuccess: $.noop,
            configFormWarnings: $.noop,
            checkListHasItems: $.noop,
            templates: {
                item: null,
                icon: null
            },
            i18n: {
                confirmAbandonItem: null,
                itemDeleteSuccess: null,
                sortingHasUnsavedItemError: null,
                sortingHasUnspecifiedError: null,
                sortingErrorDialogHeader: null,
                defaultDisplayText: null,
                defaultDisplayTextDescription: null
            },
            sortable: {
                enabled: true,
                items: "> li",
                moveItem: $.noop
            },
            deleteDialogHeight: 200,
            onShowData: null
        },
        options,
        $editor,
        $configContainer,
        $itemList,
        setFocus = function () {
            var $firstError = $configContainer.find(":input:visible:enabled.errorField:first").focus();

            if (!$firstError.length) {
                $configContainer.find(":input:visible:enabled:first").focus();
            }
        },
        insertDefaultText = function () {
            var noItemId = "no-item-selected",
                $noItem = $("#" + noItemId);

            if (!$noItem.length) {
                $noItem = $("<div/>", { "id": noItemId })
                    .append($("<h2/>", { text: options.i18n.defaultDisplayText }))
                    .append($("<p/>", { text: options.i18n.defaultDisplayTextDescription }))
                    .hide()
                    .prependTo($configContainer)
                    .fadeIn();
            }
            return $noItem;
        },
        setupAsyncForm = function ($item) {
            BAMBOO.asyncForm({
                $delegator: $configContainer,
                target: "form",
                success: function (data) {
                    var $newItem = options.configFormSuccess(data, $item.hasClass("unsaved"));
                    $item.replaceWith($newItem);
                    if (data.warnings) {
                        options.configFormWarnings(data.warnings);
                    }
                    setTimeout(function () { $newItem.removeClass("active"); }, 0); // this is so that the class doesn't get removed immediately after the DOM element is replaced which would causes the CSS transition (fading) not to be applied
                },
                cancel: function () {
                    // simply empty the container
                    $configContainer.empty();

                    // clean previous widgets
                    events.EventBus.trigger('unbind');

                    if ($item.hasClass("unsaved")) {
                        $item.remove();
                        checkListHasItems();
                    } else {
                        $item.removeClass("active");
                    }
                    insertDefaultText();
                },
                formReplaced: asyncFormReplaced
            });
        },
        asyncFormReplaced = function () {
            handleOnShow();
            setFocus();
        },
        showItemLoadingIndicator = function ($item) {
            var $configLink;
            if (!$item) {
                $item = $itemList.find('.active');
            }
            $configLink = $item.find("> a:not(.delete)");
            $(AJS.template.load(options.templates.icon).fill({ type: "loading" }).toString()).insertAfter($configLink);
        },
        hideItemLoadingIndicator = function ($item) {
            if (!$item) $item = $itemList.find('.active');
            $item.find(".icon-loading").remove();
        },
        hasUnsavedItem = function () {
            var $unsaved = $itemList.find(".unsaved");

            return ($unsaved.length ? $unsaved : false);
        },
        isOkayToProceedWithUnsavedItem = function () {
            var $unsavedItem = hasUnsavedItem();

            if ($unsavedItem) {
                if (confirm(options.i18n.confirmAbandonItem)) {
                    $unsavedItem.remove();
                    $configContainer.empty();
                    checkListHasItems();
                } else {
                    return false;
                }
            }
            return true;
        },
        checkListHasItems = function () {
            var hasItems = $itemList.children(".item").length;

            $editor.toggleClass("no-items", !hasItems);
            options.checkListHasItems(hasItems);
        },
        add = function (url, $item, attachMethod, attachTarget) {
            // clean previous widgets
            events.EventBus.trigger('unbind');

            return $.ajax({
                url: url,
                data: { decorator: 'nothing', confirm: true },
                success: function (html) {
                    $item[attachMethod](attachTarget).addClass("active unsaved").siblings().removeClass("active");
                    checkListHasItems();
                    $configContainer.html(html);
                    handleOnShow();
                    setupAsyncForm($item);
                    setFocus();
                    if (options.onShowData) {
                        options.onShowData();
                    }
                },
                cache: false
            });
        },
        edit = function (e) {
            var $item = $(this),
                $target = $(e.target),
                showData = function (html) {
                    $configContainer.html(html);
                    handleOnShow();
                    hideItemLoadingIndicator($item);
                    $item.addClass("active").siblings().removeClass("active");
                    setupAsyncForm($item);
                    setFocus();
                    if (options.onShowData) {
                        options.onShowData();
                    }
                };

            if (!$target.hasClass("delete") && !$target.hasClass("icon-delete") && !$target.is(":input")) {
                e.preventDefault();
                if ($item.hasClass("active") || !isOkayToProceedWithUnsavedItem()) {
                    setFocus();
                } else {
                    showItemLoadingIndicator($item);

                    // clean previous widgets
                    events.EventBus.trigger('unbind');

                    $.ajax({
                        url: $item.find("> a:not(.delete)").attr("href"),
                        data: { decorator: 'nothing', confirm: true },
                        success: showData,
                        error: function (data) {
                            showData(data.responseText ? data.responseText : data.responseXML);
                        },
                        cache: false
                    });
                }
            }
        },
        sortUpdate = function (event, ui) {
            if (hasUnsavedItem()) {
                alert(options.i18n.sortingHasUnsavedItemError);
                $itemList.sortable("cancel");
                return;
            }
            var Dialog2 = require('widget/dialog2');
            var $item = $(ui.item),
                showSortingError = function (errors) {
                    var index = $item.prevAll().length;
                    var errorsLength = errors.length;
                    var $content;

                    if (!errors || errorsLength === 0) {
                        $content = $('<div />', {text: options.i18n.sortingHasUnspecifiedError});
                    } else if (errorsLength === 1) {
                        $content = $('<div />', {text: errors[0]});
                    } else {
                        $content = $('<ul />').append(errors.map(function(error) {
                            return $('<li />', {text: error});
                        }));
                    }

                    Dialog2.show({
                        warning: true,
                        removeOnHide: true,
                        titleText: options.i18n.sortingErrorDialogHeader,
                        content: $content.wrap('<div />').parent().html(),
                        size: Dialog2.SMALL
                    });

                    if (($itemList.children().length - 1) == $item.data("movedFromPos")) {
                        $item.appendTo($itemList).removeData("movedFromPos");
                    } else {
                        $item.insertBefore($itemList.children("li:eq(" + ($item.data("movedFromPos") + (($item.data("movedFromPos") > index) ? 1 : 0)) + ")")).removeData("movedFromPos");
                    }
                },
                jqXHR = options.sortable.moveItem($item);

            if (jqXHR) {
                jqXHR.done(function (json) {
                    if (json.status == "ERROR") {
                        if (json.errors && json.errors.length) {
                            showSortingError(json.errors);
                        } else {
                            showSortingError();
                        }
                    }
                }).fail(function () {
                    showSortingError();
                });
            }
        },
        sortStart = function (event, ui) {
            var $self = $(ui.item);

            $self.data("movedFromPos", $self.prevAll().length);
        },
        handleOnShow = function () {
            BAMBOO.DynamicFieldParameters.syncFieldShowHide($configContainer);
            AJS.messages.setup();
        };

    return {
        displayMessages: function (messages) {
            var $dummy = $("<div/>"),
                $messages,
                defaultMsgType = "success";

            for (var i = 0, ii = messages.length; i < ii; i++) {
                var message = messages[i],
                    msgType = message.type || defaultMsgType;

                AJS.messages[msgType]($dummy, { title: message.title, closeable: (msgType != defaultMsgType), body: message.body });
            }

            $messages = $dummy.children();

            $configContainer.empty();
            $configContainer.append($messages);

            $messages.filter("." + defaultMsgType).delay(3000).fadeOut(function () {
                $(this).remove();
            });
            insertDefaultText();
        },

        init: function (opts) {
            options = $.extend(true, defaults, opts);

            var self = this;

            $(document)
                .delegate(options.itemList + " > .item", "click", edit)
                .delegate("#finalisePlanCreation, #finaliseJobCreation", "submit", function (e) {
                    if (!isOkayToProceedWithUnsavedItem()) {
                        e.preventDefault();
                    }
                });

            $(function () {
                $editor = $(options.editor);
                $configContainer = $(options.configContainer)
                    .delegate("form", "submit", function () {
                        showItemLoadingIndicator();

                        // clean previous widgets
                        events.EventBus.trigger('unbind');
                    })
                    .delegate("form", "asyncform-error asyncform-replaced", function () {
                        hideItemLoadingIndicator();
                    });
                $itemList = $(options.itemList);
                if (options.sortable.enabled) {
                    $itemList.sortable({
                        cursor: "move",
                        items: options.sortable.items,
                        update: sortUpdate,
                        start: sortStart
                    });
                }

                BAMBOO.simpleDialogForm({
                    $delegator: $itemList,
                    trigger: "a.delete",
                    dialogWidth: 540,
                    dialogHeight: options.deleteDialogHeight,
                    success: function (data) {
                        self.displayMessages([{ title: options.i18n.itemDeleteSuccess }]);
                        $("#item-" + data[options.deleteItemKey].id).remove();
                        checkListHasItems();
                        events.EventBus.trigger('config-panel-item-removed', data);
                    }
                });
                insertDefaultText();
            });
        },
        add: add,
        setFocus: setFocus,
        isOkayToProceedWithUnsavedItem: isOkayToProceedWithUnsavedItem,
        checkListHasItems: checkListHasItems,
        updateUnspecifiedSortingErrorText: function (updatedText) {
            options.i18n.sortingHasUnspecifiedError = updatedText;
        }
    }
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/tasks.js' */
BAMBOO.TASKS = {};

BAMBOO.TASKS.tasksConfig = function ($) {
    var events = require('util/events');
    var defaults = {
        addTaskTrigger: null,
        taskSetupContainer: null,
        taskConfigContainer: null,
        taskList: null,
        defaultTaskToSelect: null,
        taskTypeCategories: { categories: [] },
        taskTypesDialog: {
            id: "task-types-dialog",
            header: "Task types",
            width: 865,
            height: 530,
            filterForm: null
        },
        templates: {
            taskListItem: null,
            lozengeDisabled: null,
            lozengeConditional: null,
            iconTemplate: null,
            getMoreOnPac: null
        },
        i18n: {
            cancel: "Cancel",
            confirmAbandonTask: "The new task has not yet been saved. If you continue you will abandon the new task.\n\nAre you sure you want to continue?",
            tasksAddSuccess: "Task created successfully.",
            tasksAddSuccessWarning: "Possible conflicting requirements found.",
            tasksEditSuccess: "Task saved successfully.",
            tasksEditSuccessWarning: "Possible conflicting requirements found.",
            tasksDeleteSuccess: "Task deleted successfully.",
            sortingHasUnsavedTaskError: "Please save the new task before reordering.",
            sortingHasUnspecifiedError: "There was a problem moving your task.",
            sortingErrorDialogHeader: "Task move failed",
            defaultDisplayText: "No task selected",
            defaultDisplayTextDescription: "Select a task from the list on the left to configure it."
        },
        agentAvailabilityDescriptionContainer: null,
        agentAvailabilityDescriptionUrl: null,
        moveTaskUrl: null,
        moveFinalBarUrl: null
    },
    options,
    editor = new BAMBOO.ConfigPanelEditor(),
    $filterForm,
    $taskTypesDialog,
    $taskSetupContainer,
    $taskConfigContainer,
    $taskList,
    $loadingIndicator,
    $finalTasksBar,
    taskTypesDialog,
    updateAgentAvailabilityDescription = function () {
        $.ajax({
            url: options.agentAvailabilityDescriptionUrl,
            data: { decorator: "nothing", confirm: true },
            cache: false
          }).done(function (data) {
                $(options.agentAvailabilityDescriptionContainer).html(data);
          });
    },
    displaySuccessMessageAndPossibleWarning = function (isNew, data) {
        var list,
            messages = [{ title: (isNew ? options.i18n.tasksAddSuccess : options.i18n.tasksEditSuccess) }];

        if (data.taskResult.warning.requirementsConflicts) {
            list = ["<ul>"];
            for (var r = 0, rr = data.taskResult.warning.requirementsConflicts.length; r < rr; r++) {
                var req = data.taskResult.warning.requirementsConflicts[r],
                    reqKey = req.group,
                    conflicts = req.labels;

                list.push("<li>", reqKey, "</li><ul>");
                for (var i = 0, ii = conflicts.length; i < ii; i++) {
                    list.push("<li>", conflicts[i], "</li>");
                }
                list.push("</ul>");
            }
            list.push("</ul>");
            messages.unshift({ title: (isNew ? options.i18n.tasksAddSuccessWarning : options.i18n.tasksEditSuccessWarning), type: "warning", body: list.join("") });
        }
        editor.displayMessages(messages);
    },
    configFormSuccess = function (data, isUnsaved) {
        updateAgentAvailabilityDescription();
        displaySuccessMessageAndPossibleWarning(isUnsaved, data);
        var taskItem = $(AJS.template.load(options.templates.taskListItem).fill({ name: data.taskResult.task.name, description: data.taskResult.task.description, id: data.taskResult.task.id, valid : data.taskResult.task.valid }).toString()).addClass("active");
        if (data.taskResult.task.isEnabled === false) {
            $(AJS.template.load(options.templates.lozengeDisabled).toString()).insertBefore(taskItem.find(".delete"));
        } else if (data.taskResult.task.isConditional === true) {
            $(AJS.template.load(options.templates.lozengeConditional).toString()).insertBefore(taskItem.find(".delete"));
        }
        return taskItem;
    },
    addTask = function (e) {
        var $taskTypeListItem = $(this).append($(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString())),
            $taskConfigLink = $taskTypeListItem.find("> a"),
            $taskListItem = $(AJS.template.load(options.templates.taskListItem).fill({
                name: $taskConfigLink.attr("title"),
                description: "",
                id: "",
                valid: true
            }).toString());

        e.preventDefault();

        editor.add($taskConfigLink.attr("href"), $taskListItem, "insertBefore", $finalTasksBar).success(function () {
            taskTypesDialog.remove();
        });
    },
    setupTaskTypesDialogContent = function (html) {
        var $html = $(html);

        $loadingIndicator.hide();

        taskTypesDialog.addPanel("All", $html);
        for (var i = 0, ii = options.taskTypeCategories.length; i < ii; i++) {
            var category = options.taskTypeCategories[i],
                $categoryTasks = $html.clone();
            $categoryTasks.children(":not(.task-type-category-" + category.key + ")").remove();
            if ($categoryTasks.children().length) {
                taskTypesDialog.addPanel(category.label, $categoryTasks);
            }
        }

        taskTypesDialog.show().gotoPanel(0);

        $taskTypesDialog = $("#" + options.taskTypesDialog.id).delegate(".task-type-list > li", "click", addTask);

        if (options.taskTypesDialog.filterForm) {
            $filterForm.find("> input").focus();
        }
    },
    showTaskTypesPicker = function (e) {
        var $addTaskTrigger = $(this),
            header = options.taskTypesDialog.header ? options.taskTypesDialog.header : $addTaskTrigger.text();

        e.preventDefault();

        if (!editor.isOkayToProceedWithUnsavedItem()) {
            editor.setFocus();
            return false;
        }

        if (!$loadingIndicator) {
            $loadingIndicator = $(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString()).insertAfter($addTaskTrigger.closest(".aui-toolbar"));
        } else {
            $loadingIndicator.show();
        }

        taskTypesDialog = new AJS.Dialog({
            id: options.taskTypesDialog.id,
            width: options.taskTypesDialog.width,
            height: options.taskTypesDialog.height,
            keypressListener: function (e) {
                if (e.which == jQuery.ui.keyCode.ESCAPE) {
                    taskTypesDialog.remove();
                }
            }
        });

        if (header) {
            taskTypesDialog.addHeader(header);

            if (options.taskTypesDialog.filterForm) {
                $filterForm = $(options.taskTypesDialog.filterForm).appendTo(taskTypesDialog.page[0].header);

                $filterForm.submit(function (e) { e.preventDefault(); }).find("> input").bind("keypress keyup click", function (e) {
                    var textToLookFor = $(this).val().toUpperCase();

                    e.stopPropagation();
                    $taskTypesDialog.find(".task-type-list > li").each(function () {
                        var $li = $(this);

                        $li[( $li.text().toUpperCase().indexOf(textToLookFor) >= 0 ? "show" : "hide" )]();
                    });
                });
            }
        }
        taskTypesDialog.addCancel(options.i18n.cancel, function () { taskTypesDialog.remove(); });
        if (options.templates.getMoreOnPac) {
            taskTypesDialog.addHelpText(options.templates.getMoreOnPac, {});
        }

        $.ajax({
            url: $addTaskTrigger.attr("href"),
            data: { decorator: "nothing", confirm: true },
            success: setupTaskTypesDialogContent,
            cache: false
        });
    },
    moveTask = function ($taskListItem) {
        var isMovedToFinal, status,
            requestComplete = function () {
                if (!status || status == "ERROR") {
                    triggerReflowOnPrompt();
                }
            };

        triggerReflowOnPrompt();

        if ($taskListItem.hasClass("final-tasks-bar")) {
            editor.updateUnspecifiedSortingErrorText("There was a problem moving the final tasks bar.");

            return $.ajax({
                type: "POST",
                url: options.moveFinalBarUrl,
                data: {
                    afterId: $taskListItem.nextAll(".item:first").data("item-id"),
                    beforeId: $taskListItem.prevAll(".item:first").data("item-id")
                },
                dataType: "json",
                complete: requestComplete
            }).done(function (json) {
                status = json.status;
                if (status != "ERROR") {
                    $taskListItem.nextAll(".item").addClass("final").end().prevAll(".item").removeClass("final");
                }
            });
        } else {
            isMovedToFinal = !!$taskListItem.prevAll(".final-tasks-bar").length;
            editor.updateUnspecifiedSortingErrorText(options.i18n.sortingHasUnspecifiedError);

            return $.ajax({
                type: "POST",
                url: options.moveTaskUrl,
                data: {
                    taskId: $taskListItem.data("item-id"),
                    afterId: $taskListItem.nextAll(".item:first").data("item-id"),
                    beforeId: $taskListItem.prevAll(".item:first").data("item-id"),
                    finalising: isMovedToFinal
                },
                dataType: "json",
                complete: requestComplete
            }).done(function (json) {
                status = json.status;
                if (status != "ERROR") {
                    $taskListItem.toggleClass("final", isMovedToFinal);
                }
            });
        }
    },
    triggerReflowOnPrompt = function () {
        var prompt;

        if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {
            prompt = $("#final-tasks-prompt")[0];
            prompt.style.zoom = "100%";
            prompt.style.zoom = "normal";
        }
    };

    return {
        init: function (opts) {

            options = $.extend(true, defaults, opts);

            editor.init({
                editor: options.taskSetupContainer,
                configContainer: options.taskConfigContainer,
                itemList: options.taskList,
                deleteItemKey: "taskResult",
                configFormSuccess: configFormSuccess,
                templates: {
                    item: options.templates.taskListItem,
                    icon: options.templates.iconTemplate
                },
                i18n: {
                    confirmAbandonItem: options.i18n.confirmAbandonTask,
                    itemDeleteSuccess: options.i18n.tasksDeleteSuccess,
                    sortingHasUnsavedItemError: options.i18n.sortingHasUnsavedTaskError,
                    sortingHasUnspecifiedError: options.i18n.sortingHasUnspecifiedError,
                    sortingErrorDialogHeader: options.i18n.sortingErrorDialogHeader,
                    defaultDisplayText: options.i18n.defaultDisplayText,
                    defaultDisplayTextDescription: options.i18n.defaultDisplayTextDescription
                },
                sortable: {
                    items: "> li:not(#final-tasks-prompt)",
                    moveItem: moveTask
                }
            });

            $(document).undelegate(options.addTaskTrigger, "click");
            $(document)
                    .delegate(options.addTaskTrigger, "click", showTaskTypesPicker);

            events.EventBus.on('config-panel-item-removed', updateAgentAvailabilityDescription);

            $(function () {
                $taskSetupContainer = $(options.taskSetupContainer);
                $taskList = $(options.taskList);
                $taskConfigContainer = $(options.taskConfigContainer);
                $finalTasksBar = $taskList.find(".final-tasks-bar");

                options.defaultTaskToSelect && $taskList.find("#item-" + options.defaultTaskToSelect).click();
            });
        }
    }
}(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/repository.js' */
(function ($, BAMBOO) {
    BAMBOO.REPOSITORY = {};

    BAMBOO.REPOSITORY.repositoryConfig = (function () {
        var events = require('util/events');
        var defaults = {
                    addRepositoryTrigger: null,
                    repositorySetupContainer: null,
                    repositoryConfigContainer: null,
                    repositoryList: null,
                    selectRepositorySelector: "#selectedRepository",
                    templates: {
                        repositoryListItem: null,
                        repositoryListItemDefaultMarker: null,
                        iconTemplate: null
                    },
                    displayCategories: null,
                    repositoryTypeCategories: [{
                            key:"linked",
                            label:"Link existing"
                        }, {
                            key:"new",
                            label: "Create new"
                        }
                    ],
                    repositoryTypesDialog: {
                        id: "repository-types-dialog",
                        header: "Repository host",
                        width: 865,
                        height: 530,
                        filterForm: null,
                        isNewAllowed: true
                    },
                    i18n: {
                        cancel: "Cancel",
                        confirmAbandonRepository: "The new repository has not yet been saved. If you continue you will abandon the new repository.\n\nAre you sure you want to continue?",
                        repositoryAddSuccess: "Repository created successfully.",
                        repositoryEditSuccess: "Repository updated successfully.",
                        repositoryDeleteSuccess: "Repository deleted successfully.",
                        sortingHasUnsavedRepositoryError: "Please save the new repository before reordering.",
                        defaultDisplayText: "No repository selected",
                        defaultDisplayTextDescription: "Select a repository from the list on the left to configure it.",
                        repositoryMovingError: AJS.I18n.getText("There was a problem moving your repository."),
                        repositoryMovingFailure: AJS.I18n.getText("Repository move failed")
                    },
                    moveRepositoryUrl: null,
                    markDefault: true,
                    preselectItemId: null
                },
                options,
                editor = new BAMBOO.ConfigPanelEditor(),
                $repositorySetupContainer,
                $repositoryConfigContainer,
                $repositoryList,
                $loadingIndicator,
                $repositoryTypesDialog,
                repositoryTypesDialog,
                $filterForm,

                checkListHasItems = function(hasItems) {
                    if (hasItems) {
                        markDefaultRepository();
                    }
                },
                configFormSuccess = function(data, isUnsaved) {
                    editor.displayMessages([{
                        title: isUnsaved ? options.i18n.repositoryAddSuccess : options.i18n.repositoryEditSuccess
                    }]);

                    var repositoryResult = data.repositoryResult;
                    var repositoryItemTemplateString = AJS.template.load(options.templates.repositoryListItem).fill({
                        name: repositoryResult.name,
                        id: repositoryResult.id
                    }).toString();

                    return $(repositoryItemTemplateString).addClass('active');
                },
                configFormWarnings = function (warnings) {
                    for (var i = 0, ii = warnings.length; i < ii; i++) {
                        editor.displayMessages([{ type: "warning", title: warnings[i] }]);
                    }
                },
                markDefaultRepository = function() {
                    if (options.markDefault) {
                        $repositoryList.find(".item-default").removeClass("item-default").find(".item-default-marker").remove();
                        $repositoryList.find(".item:first").addClass("item-default").find(".item-title");
                    }
                },
                addRepository = function (e) {
                    var $repositoryTypeListItem = $(this).append($(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString())),
                        $repositoryConfigLink = $repositoryTypeListItem.find(".trigger-type-link"),
                        $repositoryListItem = $(AJS.template.load(options.templates.repositoryListItem).fill({ name: "New Repository", id: "" }).toString());

                    e.preventDefault();

                    editor.add($repositoryConfigLink.attr("href"), $repositoryListItem, "appendTo", $repositoryList).success(function () {
                        repositoryTypesDialog.remove();
                    });
                    markDefaultRepository();
                },
                moveRepository = function ($repositoryListItem) {
                    return $.post(options.moveRepositoryUrl, {
                        repositoryId: $repositoryListItem.data("item-id"),
                        afterPosition: $repositoryListItem.nextAll(".item:first").data("item-id"),
                        beforePosition: $repositoryListItem.prevAll(".item:first").data("item-id"),
                        "bamboo.successReturnMode": "json"
                    }).done(markDefaultRepository);
                },
                setupRepositoryTypesDialogContent = function (html) {
                    var $html = $(html);

                    $loadingIndicator.hide();

                    repositoryTypesDialog.addPanel("All", $html);

                    if (options.displayCategories)
                    {
                        for (var i = 0, ii = options.repositoryTypeCategories.length; i < ii; i++)
                        {
                            var category = options.repositoryTypeCategories[i];

                            if (category.key == "new" && !options.repositoryTypesDialog.isNewAllowed)
                                continue;

                            var $categoryTasks = $html.clone();
                            $categoryTasks.children(":not(.repository-type-category-" + category.key + ")").remove();
                            if ($categoryTasks.children().length)
                            {
                                repositoryTypesDialog.addPanel(category.label, $categoryTasks);
                            }
                        }
                    }

                    repositoryTypesDialog.show().gotoPanel(0);

                    $repositoryTypesDialog = $("#" + options.repositoryTypesDialog.id).delegate(".trigger-type-list > li", "click", addRepository);

                    if (options.repositoryTypesDialog.filterForm) {
                        $filterForm.find("> input").focus();
                    }
                },
                showRepositoryTypesPicker = function (e) {
                    var $addRepositoryTrigger = $(this),
                            header = options.repositoryTypesDialog.header ? options.repositoryTypesDialog.header : $addRepositoryTrigger.text();

                    e.preventDefault();

                    if (!editor.isOkayToProceedWithUnsavedItem()) {
                        editor.setFocus();
                        return false;
                    }

                    if (!$loadingIndicator) {
                        $loadingIndicator = $(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString()).insertAfter($addRepositoryTrigger.closest(".aui-toolbar"));
                    } else {
                        $loadingIndicator.show();
                    }

                    repositoryTypesDialog = new AJS.Dialog({
                        id: options.repositoryTypesDialog.id,
                        width: options.repositoryTypesDialog.width,
                        height: options.repositoryTypesDialog.height,
                        keypressListener: function (e) {
                            if (e.which == jQuery.ui.keyCode.ESCAPE) {
                                repositoryTypesDialog.remove();
                            }
                        }
                    });

                    if (header) {
                        repositoryTypesDialog.addHeader(header);

                        if (options.repositoryTypesDialog.filterForm) {
                            $filterForm = $(options.repositoryTypesDialog.filterForm).appendTo(repositoryTypesDialog.page[0].header);

                            $filterForm.submit(function (e) { e.preventDefault(); }).find("> input").bind("keypress keyup click", function (e) {
                                var textToLookFor = $(this).val().toUpperCase();

                                e.stopPropagation();
                                $repositoryTypesDialog.find(".trigger-type-list > li").each(function () {
                                    var $li = $(this);

                                    $li[( $li.text().toUpperCase().indexOf(textToLookFor) >= 0 ? "show" : "hide" )]();
                                });
                            });
                        }
                    }
                    repositoryTypesDialog.addCancel(options.i18n.cancel, function () { repositoryTypesDialog.remove(); });
                    if (options.templates.getMoreOnPac) {
                        repositoryTypesDialog.addHelpText(options.templates.getMoreOnPac, {});
                    }

                    $.ajax({
                        url: $addRepositoryTrigger.attr("href"),
                        data: { decorator: "nothing", confirm: true },
                        success: setupRepositoryTypesDialogContent,
                        cache: false
                    });
                };

        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);

                editor.init({
                    editor: options.repositorySetupContainer,
                    configContainer: options.repositoryConfigContainer,
                    itemList: options.repositoryList,
                    deleteItemKey: "repositoryResult",
                    checkListHasItems: checkListHasItems,
                    configFormSuccess: configFormSuccess,
                    configFormWarnings: configFormWarnings,
                    templates: {
                        item: options.templates.repositoryListItem,
                        icon: options.templates.iconTemplate
                    },
                    i18n: {
                        confirmAbandonItem: options.i18n.confirmAbandonRepository,
                        itemDeleteSuccess: options.i18n.repositoryDeleteSuccess,
                        sortingHasUnsavedItemError: options.i18n.sortingHasUnsavedRepositoryError,
                        sortingHasUnspecifiedError: options.i18n.repositoryMovingError,
                        sortingErrorDialogHeader: options.i18n.repositoryMovingFailure,
                        defaultDisplayText: options.i18n.defaultDisplayText,
                        defaultDisplayTextDescription: options.i18n.defaultDisplayTextDescription
                    },
                    sortable: {
                        enabled: !!options.moveRepositoryUrl,
                        items: "> li:not(#repository-trigger-item)",
                        moveItem: moveRepository
                    },
                    deleteDialogHeight: 540
                });

                $(function () {
                    $repositorySetupContainer = $(options.repositorySetupContainer)
                            .delegate(options.addRepositoryTrigger, "click", showRepositoryTypesPicker);

                    $repositoryList = $(options.repositoryList);
                    $repositoryConfigContainer = $(options.repositoryConfigContainer);

                    editor.checkListHasItems();

                    if (options.preselectItemId) {
                        $(options.repositoryList).children("#item-" + options.preselectItemId).click();
                    }
                });
            }
        }
    }());


    BAMBOO.REPOSITORY.buildStrategyToggle = (function () {
        var defaults = {
                    noVcsStrategyOptions : null,
                    vcsStrategyOptions : null,
                    strategyList: null
                },
                options,
                $strategyList,
                toggleStrategiesForCreate = function () {
                    if (!$strategyList) {
                        $strategyList = $(options.strategyList);
                    }
                    var value = $strategyList.val();
                    $strategyList.attr("disabled", "disabled");
                    if ($(this).val() == "nullRepository") {
                        $strategyList.html(options.noVcsStrategyOptions);
                    } else {
                        $strategyList.html(options.vcsStrategyOptions);
                    }
                    $strategyList.removeAttr("disabled").val(value).change();
                };
        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);
                $(document).delegate("#selectedRepository", "change", toggleStrategiesForCreate);
            }
        }
    }());

    BAMBOO.REPOSITORY.CheckoutTaskConfiguration = (function () {
        var defaults = {
                    addCheckoutSelector: null,
                    removeCheckoutSelector: '.toolbar-trigger',
                    checkoutListSelector: null,
                    checkoutDirectorySelector: null,
                    selectedRepositorySelector: 'select[name^="selectedRepository_"]',
                    templates: {
                        checkoutListItem: null
                    },
                    i18n: {
                        checkoutDirectoryInUse: null
                    }
                },
                options,
                $list,
                $form,
                addCheckoutListItem = function () {
                    var newIndex, $lastCheckout;

                    $lastCheckout = $list.children(':last');
                    newIndex = ($lastCheckout.length ? (parseInt($lastCheckout.attr('data-checkout-id'), 10) + 1) : 0);

                    $(AJS.template.load(options.templates.checkoutListItem).fill({ index: newIndex }).toString())
                            .hide().appendTo($list)
                            .find(options.selectedRepositorySelector).end()
                            .slideDown();

                    BAMBOO.DynamicFieldParameters.syncFieldShowHide($list);
                },
                removeCheckoutListItem = function () {
                    $(this).closest('.aui-toolbar').closest('li').slideUp(function () { $(this).remove(); });
                },
                validateForm = function (e) {
                    var checkoutDirectories = {},
                            hasError = false,
                            checkField = function () {
                                var $field = $(this),
                                        val = $field.val();

                                if (checkoutDirectories.hasOwnProperty(val)) {
                                    $('<div/>', { 'class': 'error', text: options.i18n.checkoutDirectoryInUse }).insertAfter($field.next('.description'));
                                    hasError = true;
                                } else {
                                    checkoutDirectories[val] = true;
                                }
                            },
                            $trigger = $(this),
                            $fieldsToCheck = $form.find(options.checkoutDirectorySelector);

                    $form.find('.error').remove();

                    if ($trigger.is(':text')) {
                        $fieldsToCheck = $fieldsToCheck.not($trigger);
                        $fieldsToCheck.each(checkField);
                        checkField.apply(this);
                    } else {
                        $fieldsToCheck.each(checkField);
                        if (hasError) {
                            e.preventDefault();
                            e.stopPropagation();
                        }
                    }
                };

        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);

                $(function () {
                    $list = $(options.checkoutListSelector)
                            .delegate(options.removeCheckoutSelector, 'click', removeCheckoutListItem)
                            .delegate(options.checkoutDirectorySelector, 'blur', validateForm);

                    $form = $list.closest('form').submit(validateForm);
                    $(options.addCheckoutSelector).click(addCheckoutListItem);
                });
            }
        };
    }());
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/chainTriggers.js' */
(function ($, BAMBOO) {
    BAMBOO.TRIGGER = {};

    BAMBOO.TRIGGER.chainTriggerConfig = (function () {
        var defaults = {
                    addTriggerTrigger: null,
                    triggerSetupContainer: null,
                    triggerConfigContainer: null,
                    triggerList: null,
                    templates: {
                        triggerListItem: null,
                        triggerListItemDefaultMarker: null,
                        iconTemplate: null,
                        lozengeDisabled: null
                    },
                    triggerTypesDialog: {
                        id: "trigger-types-dialog",
                        header: "Select trigger",
                        width: 865,
                        height: 530,
                        filterForm: null
                    },
                    i18n: {
                        cancel: "Cancel",
                        confirmAbandonTrigger: "The new trigger has not yet been saved. If you continue you will abandon the new trigger.\n\nAre you sure you want to continue?",
                        triggerAddSuccess: "Trigger created successfully.",
                        triggerEditSuccess: "Trigger saved successfully.",
                        triggerDeleteSuccess: "Trigger deleted successfully.",
                        defaultDisplayText: "No trigger selected",
                        defaultDisplayTextDescription: "Select a trigger from the list on the left to configure it."
                    },
                    preselectItemId: null
                },
                options,
                editor = new BAMBOO.ConfigPanelEditor(),
                $triggerSetupContainer,
                $triggerConfigContainer,
                $triggerList,
                $loadingIndicator,
                $triggerTypesDialog,
                triggerTypesDialog,
                checkListHasItems = function(hasItems) {
                },
                configFormSuccess = function (data, isUnsaved) {
                    editor.displayMessages([{ title: (isUnsaved ? options.i18n.triggerAddSuccess : options.i18n.triggerEditSuccess) }]);
                    var triggerItem = $(AJS.template.load(options.templates.triggerListItem).fill({ name: data.triggerResult.name, id: data.triggerResult.id, description: data.triggerResult.description }).toString()).addClass("active");
                    if (data.triggerResult.isEnabled === false) {
                        $(AJS.template.load(options.templates.lozengeDisabled).toString()).insertBefore(triggerItem.find(".delete"));
                    }
                    return triggerItem;
                },
                configFormWarnings = function (warnings) {
                    for (var i = 0, ii = warnings.length; i < ii; i++) {
                        editor.displayMessages([{ type: "warning", title: warnings[i] }]);
                    }
                },
                addTrigger = function (e) {
                    var $triggerTypeListItem = $(this).append($(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString())),
                        $triggerConfigLink = $triggerTypeListItem.find(".trigger-type-link"),
                        $triggerListItem = $(AJS.template.load(options.templates.triggerListItem).fill({ name: $triggerConfigLink.text(), description: "", id: "" , valid : true }).toString());

                    e.preventDefault();

                    editor.add($triggerConfigLink.attr("href"), $triggerListItem, "appendTo", $triggerList).success(function () {
                        triggerTypesDialog.remove();
                    });

                },
                setupTriggerTypesDialogContent = function (html) {
                    var $html = $(html);

                    $loadingIndicator.hide();
                    triggerTypesDialog.addPanel("All", $html);
                    triggerTypesDialog.show().gotoPanel(0);

                    $triggerTypesDialog = $("#" + options.triggerTypesDialog.id).delegate(".trigger-type-list > li", "click", addTrigger);

                    if (options.triggerTypesDialog.filterForm) {
                        $filterForm.find("> input").focus();
                    }
                },
                showTaskTypesPicker = function (e) {
                    var $addTriggerTrigger = $(this),
                        header = options.triggerTypesDialog.header ? options.triggerTypesDialog.header : $addTriggerTrigger.text();

                    e.preventDefault();

                    if (!editor.isOkayToProceedWithUnsavedItem()) {
                        editor.setFocus();
                        return false;
                    }

                    if (!$loadingIndicator) {
                        $loadingIndicator = $(AJS.template.load(options.templates.iconTemplate).fill({ type: "loading" }).toString()).insertAfter($addTriggerTrigger.closest(".aui-toolbar"));
                    } else {
                        $loadingIndicator.show();
                    }

                    triggerTypesDialog = new AJS.Dialog({
                                                         id: options.triggerTypesDialog.id,
                                                         width: options.triggerTypesDialog.width,
                                                         height: options.triggerTypesDialog.height,
                                                         keypressListener: function (e) {
                                                             if (e.which == jQuery.ui.keyCode.ESCAPE) {
                                                                 triggerTypesDialog.remove();
                                                             }
                                                         }
                                                     });

                    if (header) {
                        triggerTypesDialog.addHeader(header);

                        if (options.triggerTypesDialog.filterForm) {
                            $filterForm = $(options.triggerTypesDialog.filterForm).appendTo(triggerTypesDialog.page[0].header);

                            $filterForm.submit(function (e) { e.preventDefault(); }).find("> input").bind("keypress keyup click", function (e) {
                                var textToLookFor = $(this).val().toUpperCase();

                                e.stopPropagation();
                                $triggerTypesDialog.find(".trigger-type-list > li").each(function () {
                                    var $li = $(this);

                                    $li[( $li.text().toUpperCase().indexOf(textToLookFor) >= 0 ? "show" : "hide" )]();
                                });
                            });
                        }
                    }
                    triggerTypesDialog.addCancel(options.i18n.cancel, function () {
                        triggerTypesDialog.remove();
                    });
                    if (options.templates.getMoreOnPac) {
                        triggerTypesDialog.addHelpText(options.templates.getMoreOnPac, {});
                    }

                    $.ajax({
                               url: $addTriggerTrigger.attr("href"),
                               data: { decorator: "nothing", confirm: true },
                               success: setupTriggerTypesDialogContent,
                               cache: false
                           });
                };

        return {
            init: function (opts) {
                options = $.extend(true, defaults, opts);
                editor.init({
                                editor: options.triggerSetupContainer,
                                configContainer: options.triggerConfigContainer,
                                itemList: options.triggerList,
                                deleteItemKey: "triggerResult",
                                checkListHasItems: checkListHasItems,
                                configFormSuccess: configFormSuccess,
                                configFormWarnings: configFormWarnings,
                                templates: {
                                    item: options.templates.triggerListItem,
                                    icon: options.templates.iconTemplate
                                },
                                i18n: {
                                    confirmAbandonItem: options.i18n.confirmAbandonTrigger,
                                    itemDeleteSuccess: options.i18n.triggerDeleteSuccess,
                                    defaultDisplayText: options.i18n.defaultDisplayText,
                                    defaultDisplayTextDescription: options.i18n.defaultDisplayTextDescription
                                },
                                sortable: {
                                    enabled: false
                                }
                            });

                $(function () {
                    $triggerSetupContainer = $(options.triggerSetupContainer)
                            .delegate(options.addTriggerTrigger, "click", showTaskTypesPicker);
                    $triggerList = $(options.triggerList);
                    $triggerConfigContainer = $(options.triggerConfigContainer);

                    editor.checkListHasItems();

                    if (options.preselectItemId) {
                        $(options.triggerList).children("#item-" + options.preselectItemId).click();
                    }
                });
            }
        }
    }());
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/labels.js' */
(function ($, BAMBOO) {
    BAMBOO.LABELS = {};
    BAMBOO.LABELS.LabelDialog = LabelDialog;

    function LabelDialog(opts) {
        var defaults = {
                trigger: '.labels-edit',
                labelView: '.label-list, .label-none',
                labelsDialog: {
                    id: 'labels-dialog',
                    header: null,
                    width: 550,
                    height: 250,
                    shortcutKey: "L"
                },
                removeUrl: ''
            },
            options = $.extend(true, defaults, opts),
            $loadingIndicator,
            dialog,
            setupDialogContent = function (html) {
                var $html = $(html);
                $loadingIndicator.hide();

                dialog.addPanel('All', $html).show();
            },
            showDialog = function (e) {
                e.preventDefault();
                var $trigger = $(this);

                if (!$loadingIndicator) {
                    $loadingIndicator = $(widget.icons.icon({ type: 'loading' })).insertAfter($trigger);
                } else {
                    $loadingIndicator.show();
                }

                dialog = new AJS.Dialog({
                    id: options.labelsDialog.id,
                    width: options.labelsDialog.width,
                    height: options.labelsDialog.height,
                    keypressListener: function (e) {
                        if (e.which == jQuery.ui.keyCode.ESCAPE) {
                            dialog.remove();
                        }
                    }
                });

                dialog.addCancel("Close", function () { dialog.remove(); })
                      .addHeader(options.labelsDialog.header);

                if (options.labelsDialog.shortcutKey) {
                    dialog.addHelpText(AJS.format("Shortcut tip: pressing \u003ckbd\u003e{0}\u003c/kbd\u003e also opens this dialog box", options.labelsDialog.shortcutKey));
                }

                $.ajax({
                    url: $trigger.attr('href'),
                    data: { decorator: 'nothing', confirm: true },
                    success: setupDialogContent,
                    cache: false
                });
                $('#' + options.labelsDialog.id).addClass('labels-dialog');
            },
            addLabels = function (e) {
                e.preventDefault();

                var $form = $(this),
                    $input = $form.find('input:text').attr('readonly', 'readonly'),
                    $submit = $form.find('input:submit').attr('disabled', 'disabled'),
                    $loading = $(widget.icons.icon({ type: 'loading' })).insertAfter($submit);

                $.post($form.attr('action'), $form.serialize(), function (data) {
                    var fieldErrors;
                    $form.find('.error,.aui-message').remove();
                    if (typeof data == 'object') {
                        // Returned data is JSON
                        fieldErrors = data.fieldErrors;
                        if (fieldErrors) {
                            for (var fieldName in fieldErrors) {
                                if (fieldErrors.hasOwnProperty(fieldName)) {
                                    BAMBOO.addFieldErrors($form, fieldName, fieldErrors[fieldName]);
                                }
                            }
                        }
                        if (data.errors) {
                            $form.prepend(BAMBOO.buildAUIErrorMessage(data.errors));
                        }
                    } else {
                        // Returned data isn't JSON, assume it's HTML
                        updateDisplay(data);
                        $form.find('input:text').val('');
                    }
                    $input.removeAttr('readonly');
                    $submit.removeAttr('disabled');
                    $loading.remove();
                    $form.find('input:text').focus();
                });
            },
            deleteLabel = function (e) {
                e.preventDefault();

                $.post(options.removeUrl, { selectedLabel: $(this).closest('.aui-label').attr('data-label') }).done(updateDisplay);
            },
            updateDisplay = function (data) {
                var $html = $(data),
                    edit = $html.filter('.label-edit-mode').html(),
                    view = $html.filter('.label-view-mode').html();

                $(options.labelView).each(function () {
                    var $replaceTarget = $(this);
                    $replaceTarget.replaceWith($replaceTarget.closest('#' + options.labelsDialog.id).length ? edit : view);
                });


                var labels = AJS.$('#plan-labels');
                if (labels.length) {
                    var $container = $('<div/>').append(view);
                    $container.find('.label-none').remove();

                    labels.html($container.html());
                }

            },
            handlersBoundKey = options.labelsDialog.id + 'handlersBound';

        if (!$(document).data(handlersBoundKey)) {
            $(document)
                .undelegate('.' + options.labelsDialog.id)
                .delegate(options.trigger, 'click.' + options.labelsDialog.id, showDialog)
                .delegate('#' + options.labelsDialog.id + ' form', 'submit.' + options.labelsDialog.id, addLabels)
                .delegate('#' + options.labelsDialog.id + ' .aui-icon-close', 'click.' + options.labelsDialog.id, deleteLabel);

            if (options.labelsDialog.shortcutKey) {
                $(function(){
                    AJS.whenIType(options.labelsDialog.shortcutKey).click(options.trigger);
                });
            }
            $(document).data(handlersBoundKey, true);
        }
    }
}(AJS.$, window.BAMBOO = (window.BAMBOO || {})));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/logs.js' */
/* Chain Log Tables */
(function ($) {
    var BAMBOO = window.BAMBOO || {};
    BAMBOO.LOGS = {};
    BAMBOO.LOGS.chainTableLiveView = (function () {
        var opts = {
            getBuildUrl: null,
            chainStatus: "",
            noLogsFound: 'No logs were found for this Job',
            templates: {
                logTableRow: null
            }
        },
        updateTimeout,
        update = function () {
            clearTimeout(updateTimeout);
            updateLogDisplay();

            //If build not finished update again in 5 seconds
            if (opts.chainStatus != "Finished" && opts.chainStatus != "NotBuilt") {
                updateTimeout = setTimeout(update, 5000);
            }
        },
        updateLogDisplay = function() {
            $(".chain-logs-table > tbody > tr.log-trace > td.code table").each(function() {
                var $logContainer = $(this),
                    $tr = $logContainer.closest("tr").prev();

                if ($tr.hasClass("expanded")) {
                    updateSingleLog($tr.find(".twixie > span"));
                }
            });
        },
        updateSingleLog = function ($twixie) {
            var $tr = $twixie.closest("tr"),
                $stack = $tr.next(),
                $logContainer = $stack.find("table"),
                $loading = $('<span />', { 'class': 'icon icon-loading' });

            if ($logContainer.data('dontUpdate') || $logContainer.data('updateInProgress')) {
                return;
            }
            $logContainer.data('updateInProgress', true);

            $twixie.hide().before($loading);

            $.ajax({
                url: opts.getBuildUrl.replace("@KEY@", $logContainer.attr("id")),
                data: {
                    expand: 'logEntries[-' + 25 + ':]',
                    'max-results': 25
                },
                dataType: "json",
                contentType: "application/json",
                cache: false,
                success: function (buildResult) {
                    var newLogBody = '';

                    if (buildResult.lifeCycleState == "Finished" || buildResult.lifeCycleState == "NotBuilt") {
                        //if build result is finished there will be no more log changes
                        $logContainer.data('dontUpdate', true);
                    }
                    if (buildResult.logEntries && typeof(buildResult.logEntries.logEntry) != "undefined") {
                        for (var i = 0, ii = buildResult.logEntries.logEntry.length; i < ii; i++) {
                            var logEntry = buildResult.logEntries.logEntry[i];

                            newLogBody += AJS.template.load(opts.templates.logTableRow)
                                .fill({ time: logEntry.formattedDate })
                                .fillHtml({ log: logEntry.log }).toString();
                        }
                    }

                    if ($.trim(newLogBody).length) {
                        $logContainer.html(newLogBody);
                    } else {
                        $logContainer.html(AJS.template.load(opts.templates.logTableRow)
                            .fill({time : ''})
                            .fillHtml({ log: opts.noLogsFound }).toString());
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    // Error occurred when doing the update, try again in 30 sec
                    $logContainer.html(opts.noLogsFound);
                },
                complete: function (jqXHR, textStatus) {
                    $loading.remove();
                    $twixie.show();
                    $logContainer.data('updateInProgress', false);
                }
            });
        };

        return {
            init: function(options) {
                var twixieSelector = ".chain-logs-table > tbody > tr > .twixie > span",
                    twixieAllSelector = ".chain-logs-table > thead > tr > .twixie span[role]";

                $.extend(true, opts, options);

                $(document)
                    .undelegate(twixieSelector, "click")
                    .delegate(twixieSelector, "click", function (e) {
                        var $twixie = $(this),
                                $tr = $twixie.closest("tr"),
                                $stack = $tr.next(),
                                newTwixieText = !$twixie.hasClass("icon-collapse") ? "Collapse" : "Expand"; //negated because we toggle the class later

                        $stack[$tr.hasClass("collapsed") ? "show" : "hide"]();
                        $tr.toggleClass("collapsed expanded");
                        $twixie.toggleClass("icon-collapse icon-expand").attr("title", newTwixieText).html("<span>" + newTwixieText + "</span>");
                        if ($tr.hasClass("expanded")) {
                            updateSingleLog($twixie);
                        }
                    })
                    .undelegate(twixieAllSelector, "click")
                    .delegate(twixieAllSelector, "click", function (e) {
                        var $trigger = $(this),
                                $li = $trigger.closest("li"),
                                $table = $trigger.closest("table");

                        if ($li.hasClass("expand-all")) {
                            $table.find("tbody > .collapsed .twixie > span").click();
                        } else if ($li.hasClass("collapse-all")) {
                            $table.find("tbody > .expanded .twixie > span").click();
                        }
                    });

                update();
            }
        }
    })();
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/plugin-content.js' */
(function ($) {
    var BAMBOO = window.BAMBOO || {};
    BAMBOO.AGGREGATE_PLUGIN_CONTENT = {};
    BAMBOO.AGGREGATE_PLUGIN_CONTENT.loadPluginContent = (function () {
        var opts = {
            pluginUrl: null,
            jobKeySelector: null,
            contentSelector: null
        },
        $content,
        $jobDropdown,
        update = function () {
            var jobKey = $jobDropdown.val(),
                buildUrl = AJS.template(opts.pluginUrl).fill({ buildKey: jobKey, planKey: jobKey }).toString(),
                $tabsContainer = $('.aui-tabs.aui-tabs-disabled').addClass('loading');

            $.ajax({
                cache: false,
                url: buildUrl,
                beforeSend: function (jqXHR) {
                    jqXHR.setRequestHeader('X-No-Decorate', true);
                },
                success: function (data, textStatus, jqXHR) {
                    // If no data is returned, or an entire web page, go directly to that page for normal error handling
                    if (!$.trim(data) || /<html/i.test(data)) {
                        return window.location = this.url;
                    }
                    $content.html(data);
                    $tabsContainer.removeClass('loading');
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    if (textStatus != 'abort') {
                        return window.location = this.url;
                    }
                }
            });
        };

        return {
            init: function (options) {
                opts = $.extend(true, options);

                $(function () {
                    $content = $(opts.contentSelector);
                    $jobDropdown = $(opts.jobKeySelector).change(update);
                    update();
                });
            }
        }
    })();
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/manual-stages.js' */
(function($) {
    var BAMBOO = window.BAMBOO || {};
    BAMBOO.STAGES = {};
    BAMBOO.STAGES.manualStagesSelection = (function () {
        return {
            init: function() {
               $("#stageContainer").delegate("input:checkbox", "click", function() {
                    var $checkbox = $(this),
                        checked = $checkbox.is(":checked"),
                        $selectedStage = $("#selectedStage"),
                        prevManualFound = false;

                    if (checked) {
                        $selectedStage.val($checkbox.val());
                    } else {
                        $selectedStage.val("");
                    }

                    $checkbox.parent().closest(".checkbox").toggleClass("selected", checked).prevAll(".checkbox").each(function () {
                        var $checkboxContainer = $(this),
                            $checkbox = $checkboxContainer.children("input:checkbox"),
                            isManual = $checkboxContainer.hasClass("manual");
                        if (checked) {
                            $checkboxContainer.addClass("selected");
                            if (isManual) {
                                $checkbox.attr("checked", "checked").attr("disabled", "disabled");
                            }
                        } else {
                            if (isManual && !prevManualFound) {
                                $selectedStage.val($checkbox.val());
                                $checkbox.removeAttr("disabled");
                                prevManualFound = true;
                            }
                        }
                    }).end().nextAll(".checkbox").each(function () {
                        var $checkboxContainer = $(this);
                        if ($checkboxContainer.hasClass("manual")) {
                            return false; // breaks the loop
                        } else {
                            $checkboxContainer.toggleClass("selected", checked);
                        }
                    });
                });
            }
        }
    })();
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/dashboard.js' */
(function($, BAMBOO){
    BAMBOO.DASHBOARD = {};

    BAMBOO.DASHBOARD.Expander = function (opts) {
        var defaults = {
                toggleFilterClass: null,
                triggerSelector: null,
                triggerRootSelector: null,
                tableSelector: null,
                pageSize: 50,
                disabledAttr: 'aria-disabled',
                disabledProperty: 'disabled',
                editFilterClass: 'edit-project-filter',
                icons: {
                    filter: 'filter',
                    loading: 'loading'
                }
            },
            options = $.extend(true, defaults, opts),
            request,
            iconClassPrefix = 'icon-',
            iconFilterClass = iconClassPrefix + options.icons.filter,
            iconLoadingClass = iconClassPrefix + options.icons.loading,
            showMorePlans = function (e) {
                var $loading,
                    $trigger = $(this),
                    lastProjectKey = $trigger.closest(options.triggerRootSelector).data('lastProjectKey'),
                    getPlansUrl = $trigger.hasClass('quick-filters') ? '/quickFilteredPlansSnippet.action' : '/allPlansSnippet.action';

                if ($(e.target).hasClass(options.editFilterClass) || $trigger.is(':disabled')) {
                    return;
                }

                $loading = $(widget.icons.icon({ type: options.icons.loading }));
                $trigger.append($loading).prop(options.disabledProperty, true);

                var $activeFilters = $('.quick-filters-container').find('.quick-filter.active');
                var filterIds = $activeFilters.toArray()
                    .map(function(element) {
                        return $(element).attr('data-filter-id');
                    });

                getPlans(AJS.contextPath() + getPlansUrl, {
                    pageSize: options.pageSize,
                    lastProject: lastProjectKey,
                    filterIds : filterIds
                }).done(updateTable).fail(showError);

                function showError() {
                    $loading.remove();
                    $trigger.prop(options.disabledProperty, false).html("Bamboo appears to be unresponsive, \u003cspan class=\u0022try-again\u0022\u003etry again\u003c/span\u003e?");
                }
            },
            updateTable = function (response) {
                var $table = $(options.tableSelector),
                    $htmlResponse = $(response);

                $table.append($htmlResponse.find('tbody'));
                $table.find('tfoot').replaceWith($htmlResponse.find('tfoot'));

                realignDiscoveryDialog();
            },
            toggleFilter = function (e, enable) {
                var $button = $('#toggle-project-filter'),
                    filterEnabled = (typeof enable === 'boolean' ? !enable : $button.is('[aria-pressed="true"]')),
                    updateButton = function () {
                        $button.attr('aria-pressed', !filterEnabled).removeAttr(options.disabledAttr);
                        if ($button.hasClass(options.editFilterClass)) {
                            $button.removeClass(options.editFilterClass).addClass(options.toggleFilterClass);
                        }
                        var iconHtml = widget.icons.icon({ type: options.icons.filter, reversed: !filterEnabled });
                        $button.html(iconHtml + '&nbsp;' + (filterEnabled ? "Personal filter is off" : "Personal filter is on"));
                    },
                    restoreButton = function () {
                        $button.removeAttr(options.disabledAttr)
                            .find('.icon').removeClass(iconLoadingClass).addClass(iconFilterClass);
                    };

                e && e.preventDefault();

                if ($button.is('[' + options.disabledAttr + '="true"]')) {
                    return;
                }
                $button.attr(options.disabledAttr, true)
                    .find('.icon').removeClass(iconFilterClass).addClass(iconLoadingClass);

                getPlans(AJS.contextPath() + '/toggleDashboardFilterInline.action', { filterEnabled: !filterEnabled })
                    .done(replaceTable).done(updateButton)
                    .fail(restoreButton);
            },
            replaceTable = function (response) {
                $(options.tableSelector).replaceWith(response);
                realignDiscoveryDialog();
            },
            getPlans = function (url, data) {
                if (request) {
                    request.abort();
                }
                return request = $.ajax({
                    url: url,
                    type: 'POST',
                    cache: false,
                    dataType: 'html',
                    data: $.extend(true, { decorator: 'nothing', confirm: true }, data || {})
                });
            },
            enableFilter = function () {
                toggleFilter(null, true);
            },
            realignDiscoveryDialog = function() {
                var quickFilters = BAMBOO.DASHBOARD.quickFilters;
                if (quickFilters && quickFilters.discoveryDialog) {
                    quickFilters.discoveryDialog.realign();
                }
            };

        return {
            init: function ()  {
                $(options.tableSelector).on('click', options.triggerSelector, showMorePlans);
                $(document).on('click', makeClassSelector(options.toggleFilterClass), toggleFilter);

                BAMBOO.simpleDialogForm({
                    trigger: makeClassSelector(options.editFilterClass),
                    dialogWidth: 640,
                    dialogHeight: 420,
                    success: enableFilter,
                    header: "Personal filter"
                });

                AJS.whenIType("L").click('#main-edit-project-filter');
            }
        };
    };

    BAMBOO.DASHBOARD.InlineActions = function () {
        var options = {
            classes: {
                favourite: 'markBuildFavourite',
                unfavourite: 'unmarkBuildFavourite',
                enable: 'enableBuild',
                loading: 'loading',
                icon: 'aui-icon',
                iconFavourite: 'aui-iconfont-unstar', //this is counter intuitive but "star" and "unstar" is action in AUI while we're showing state
                iconUnfavourite: 'aui-iconfont-star'
            },
            texts: {
                favourite: "Favourite",
                unfavourite: "Unfavourite"
            }

        };

        $(document)
            .on('click', makeClassSelector([ options.classes.favourite, options.classes.unfavourite ]), toggleFavourite)
            .on('click', makeClassSelector(options.classes.enable), enableBuild);

        function toggleFavourite(e) {
            var $this = $(this),
                planKey = $this.data('planKey'),
                icon = $this.children(makeClassSelector(options.classes.icon)),
                isFavourite = $this.hasClass(options.classes.unfavourite),
                endpoint = AJS.contextPath() + '/rest/api/latest/plan/' + planKey + '/favourite';

            e.preventDefault();

            if ($this.hasClass(options.classes.loading)) {
                return;
            }
            $this.addClass(options.classes.loading);

            $.ajax({
                url: endpoint,
                type: (isFavourite ? 'DELETE' : 'POST'),
                dataType: 'json'
            }).done((isFavourite ? unmark : mark)).always(reset);

            function toggleTitle(e, on) {
                if (on) {
                    e.prop('title', e.prop('title').replace(options.texts.favourite, options.texts.unfavourite));
                } else {
                    e.prop('title', e.prop('title').replace(options.texts.unfavourite, options.texts.favourite));
                }
            }
            function mark() {
                $this.removeClass(options.classes.favourite).addClass(options.classes.unfavourite);
                icon.removeClass(options.classes.iconFavourite).addClass(options.classes.iconUnfavourite);
                toggleTitle($this, true);
                toggleTitle(icon, true);
            }
            function unmark() {
                $this.removeClass(options.classes.unfavourite).addClass(options.classes.favourite);
                icon.removeClass(options.classes.iconUnfavourite).addClass(options.classes.iconFavourite);
                toggleTitle($this, false);
                toggleTitle(icon, false);
            }
            function reset() {
                $this.removeClass(options.classes.loading);
            }
        }

        function enableBuild(e) {
            var $this = $(this),
                planKey = $this.data('planKey');

            e.preventDefault();

            if ($this.hasClass(options.classes.loading)) {
                return;
            }
            $this.addClass(options.classes.loading);

            $.ajax({
                type: 'POST',
                url: AJS.contextPath() + '/rest/api/latest/plan/' + planKey + '/enable',
                dataType: 'json'
            }).done(enable).always(reset);

            function enable() {
                $this.hide();
                $('#manualBuild_' + planKey).css("display", "");
            }
            function reset() {
                $this.removeClass(options.classes.loading);
            }
        }
    };
    BAMBOO.DASHBOARD.InlineActions();

    function makeClassSelector(classes) {
        var classArr = (typeof classes === 'string' ? [ classes ] : classes);
        return '.' + classArr.join(',.');
    }
}(jQuery, window.BAMBOO = (window.BAMBOO || {})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jira-issues.js' */
(function ($) {
    BAMBOO.JIRAISSUES = (function () {
        var opts = {
                resultSummaryKey: null,
                getIssuesUrl: null,
                currentFullUrl: null,
                defaultIssueIconUrl: null,
                defaultIssueType: null,
                defaultIssueDetails: null,
                newIssueKey: null,
                jiraTabUrl: null,
                maxIssues: null,
                hideStatus: null,
                templates: {
                    authenticationRequiredTemplate: null
                }
            },
            $issuesPanel,
            refresh = function () {
                opts.newIssueKey = (arguments.length ? arguments[0] : null);

                return ($issuesPanel && $issuesPanel.length ? $.ajax({
                    url: opts.getIssuesUrl + opts.resultSummaryKey,
                    cache: false,
                    data: {
                        expand: "jiraIssues[0:" + (opts.maxIssues - 1) + "]",
                        returnUrl: opts.currentFullUrl
                    },
                    dataType: "json",
                    contentType: "application/json"
               }).done(update).fail(error) : false);
            },
            update = function (json) {
                if (json.jiraIssues && json.jiraIssues.issue && json.jiraIssues.issue.length) {
                    $issuesPanel
                        .find('> table')
                        .replaceWith(bamboo.feature.jiraIssueList.jiraIssueList({
                            issues: json.jiraIssues.issue,
                            defaultIssueType: opts.defaultIssueType,
                            defaultIssueIconUrl: opts.defaultIssueIconUrl,
                            hideStatus: opts.hideStatus,
                            jiraTabUrl: opts.jiraTabUrl,
                            maxIssues: opts.maxIssues,
                            issuesCount: json.jiraIssues.size
                        }));

                    $issuesPanel.removeClass('hidden').show();
                    if (opts.newIssueKey) {
                        highlightIssue($issuesPanel.find("tr:contains('" + opts.newIssueKey + "')"));
                    }
                } else {
                    $issuesPanel.hide();
                }
            },
            error = function (jqXHR, textStatus, errorThrown) {
                var response, authUrl, authInstance,
                    $issueTable = $issuesPanel.find('> table');

                try {
                    response = $.parseJSON(jqXHR.responseText);
                    authUrl = response['authenticationRedirectUrl'];
                    authInstance = response['authenticationInstanceName'] || "Jira";
                }
                catch (e) {}

                $issueTable.removeClass('loading');
                if (authUrl) {
                    $(AJS.template.load(opts.templates.authenticationRequiredTemplate).fill({ authenticationUrl: authUrl, authenticationInstanceName: authInstance }).toString()).insertBefore($issueTable);
                }
            };
        
        function highlightIssue($newIssue) {
            if ($newIssue.length) {
                var oldColor = $newIssue.css("backgroundColor");
                $newIssue.css("backgroundColor", "#FFFFDD").delay(3000).animate({ backgroundColor:oldColor }, 1500, "swing");
            }
        }
        
        return {
            /**
             * @param options - Object containing the options to overwrite our defaults
             */
            init: function (options) {
                $.extend(true, opts, options);
                $(function () {
                    $issuesPanel = $(".issueSummary");
                    refresh();
                });
            },
            refresh: refresh,
            highlightIssue: highlightIssue
        }
    })();

    BAMBOO.JIRATEASER = (function () {
        var jiraTeaserPopup,
            dialogOptions = {
                width: 420,
                hideDelay: 36e5
            },
            generatePopup = function ($contents, trigger, doShowPopup) {
                // hide popup hooks
                var doHidePopup = function () {
                    jiraTeaserPopup.hide();
                    return false;
                };

                $(document).keyup(function (e) {
                    if (e.which == jQuery.ui.keyCode.ESCAPE) {
                        doHidePopup();
                        $(document).unbind("keyup", arguments.callee);
                        return false;
                    }
                    return true;
                });

                // replace container contents with teaser
                $contents
                    .html(AJS.template.load("jira-teaser-popup").fill())
                    .find(".close-dialog").click(doHidePopup).end()
                    .find(".jiraTeaserCheckbox").change(function (e) {
                        var val = $(this).is(":checked");
                        $.ajax({
                            url: AJS.contextPath() + "/rest/pref/latest/user",
                            type: "post",
                            data: {
                                "bamboo.user.jira.teaser.hide" : val
                            }
                        });
                    });

                doShowPopup();
            };

        $(function ($) {
            if ($("#jira-teaser-template").length) {
                jiraTeaserPopup = AJS.InlineDialog($("#changesSummary .jiraIssueLink:last"), "jiraChangesSummary", generatePopup, dialogOptions);
                jiraTeaserPopup.show();
            }
        });
    }());
})(AJS.$);

var JiraIssueLinkManager = (function ($) {
    var globalBambooProjectKey,
        addLink = function () {
            var $this = $(this),
                jiraIssueKey = $this.data("issue-key"),
                bambooProjectKey = $this.data("bamboo-project-key") || globalBambooProjectKey,
                href = AJS.contextPath() + "/project/jiraRedirect.action?jiraIssueKey=" + jiraIssueKey;

            if (bambooProjectKey) {
                href += "&bambooProjectKey=" + bambooProjectKey;
            }
            $this.attr("href", href);
        };

    return {
        init: function (bambooProjectKey) {
            globalBambooProjectKey = bambooProjectKey;
            $(function () {
                $("a.jiraIssueLink").each(addLink);
           });
        }
    };
})(AJS.$);

var JiraRelatedIssues = (function ($) {
    return {
        init: function() {
            BAMBOO.JIRAISSUES.highlightIssue($(".newJiraIssue"));
        }
    }
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/jiraIssueCreation.js' */
BAMBOO.JIRAISSUECREATION = (function ($) {
    var defaults = {
            planResultKey: null,
            applinkId: null,
            projectId: null,
            returnUrl: null,
            issueTypeId: null,
            noProjectsMessage: null,
            templates: {
                authenticationRequiredTemplate: null,
                cannotCreateTemplate: null,
                shortcutHint: null,
                genericErrorHelpLink: null
            }
        },
        options,
        firstTime = true,
        setRequiredField = function ($selectField, value) {
            var $label = $("label[for="+$selectField.attr('id')+"]");
            $label.find("span").remove();
            if (value) {
                $label.append("<span class=\"aui-icon icon-required\"></span><span class=\"content\"> (required)</span>");
            }
        },
        hideSelect = function ($selectField) {
            $selectField.parent().hide();
            $selectField.find("option").remove();
        },
        populateMultiSelect = function ($selectField, fieldSchema) {
            var show = false;
            setRequiredField($selectField, fieldSchema.required);

            $(fieldSchema.allowedValues).each(function () {
                $('<option />', {
                    val: this.id,
                    text: this.name,
                    title: this.description
                }).appendTo($selectField);
               show = true;
            });
            if (show) {
                $selectField.parent().show();
            }
        },
        populateErrors = function (data) {
            var $messageContainer = $("#cannot-create-message-container"),
                $issueContainer = $("#issue-contents-container"),
                $message;
            /* other error cases */
            if (data.errors && data.errors.length) {
                $message = BAMBOO.buildAUIErrorMessage(data.errors);
            } else if (data.fieldErrors && data.fieldErrors.length) {
                var renderedErrors = [];
                for (var fieldError in data.fieldErrors){
                    if (data.fieldErrors.hasOwnProperty(fieldError)) {
                        renderedErrors.push(fieldError + ": " + data.fieldErrors[fieldError]);
                    }
                }
                $message = BAMBOO.buildAUIErrorMessage(renderedErrors);
            } else if (data.messages && data.messages.length) {
                $message = BAMBOO.buildAUIWarningMessage(data.messages);
            }
            $message.append(AJS.template.load(options.templates.genericErrorHelpLink).toString());
            $messageContainer.append($message).show();
        },
        clearErrors = function () {
            $("#executeCreateNewJiraIssue div.error").remove();
        },
        populateForm = function (projectKey, issueTypeId) {
            var $versionSelectField = $("#jiraProjectVersions"),
                $componentSelectField =$("#jiraProjectComponents"),
                $messageContainer = $("#cannot-create-message-container"),
                $fieldContainer = $("#issue-fields-container"),
                $loadingSpinner = $("#fields-loading-spinner"),
                $createButton = $("#executeCreateNewJiraIssue_save");

            $messageContainer.hide().children().remove();
            $fieldContainer.hide();
            $loadingSpinner.show();
            $createButton.attr("disabled", "disabled");
            hideSelect($versionSelectField);
            hideSelect($componentSelectField);

            $.ajax({
                url: AJS.contextPath() + "/ajax/issueTypeSchema.action",
                data: {
                    appLinkId: $("#jiraServer option:selected").val(),
                    projectKey: projectKey,
                    issueTypeId: issueTypeId,
                    returnUrl: options.returnUrl
                },
                dataType: 'json',
                contentType: 'application/json',
                success: function (data) {
                    if (data.status != 'ERROR') {
                        var fields = data.projects[0].issuetypes[0].fields,
                            unhandledRequiredFields = "";

                        for (var fieldName in fields) {
                            if (fields.hasOwnProperty(fieldName)) {
                                var field = fields[fieldName];
                                if (fieldName == "summary") {
                                    setRequiredField($("#jiraIssueSummary"), field.required);
                                } else if (fieldName == "description") {
                                    setRequiredField($("#issueDescription"), field.required);
                                } else if (fieldName == "components") {
                                    populateMultiSelect($componentSelectField, field);
                                } else if (fieldName == "versions") {
                                    populateMultiSelect($versionSelectField, field);
                                } else if (field.required && fieldName != "issuetype" && fieldName != "reporter" && fieldName != "project" && fieldName != "assignee") {
                                    unhandledRequiredFields = unhandledRequiredFields + " " + field.name;
                                }
                            }
                        }
                        $loadingSpinner.hide();
                        if (unhandledRequiredFields.length) {
                            $messageContainer.append(AJS.template.load(options.templates.cannotCreateTemplate).fill({issueTypeName: data.projects[0].issuetypes[0].name, fieldNames: unhandledRequiredFields}).toString()).show();
                        } else {
                            $createButton.removeAttr("disabled");
                            $fieldContainer.show();
                        }
                    } else {
                        populateErrors(data);
                    }
                },
                error: function (request, textStatus, errorThrown) {}
            });
        },
        serverSelect = function () {
            var projectsById = {},
                $loginDanceContainer = $("#login-dance-message-container"),
                $issueContainer = $("#issue-contents-container"),
                $messageContainer = $("#cannot-create-message-container");

            $("#executeCreateNewJiraIssue_save").attr("disabled", "disabled");
            $("#jiraServer").attr("disabled", "disabled");
            $loginDanceContainer.hide();
            $issueContainer.hide();
            $("#cannot-create-message-container").hide();
            $("#issue-loading-spinner").show();
            $('#jiraProjectKey option').remove();
            $('#jiraIssueType option').remove();
            $messageContainer.hide().children().remove();

            $.ajax({
                url: AJS.contextPath() + "/ajax/jiraIssueSchema.action",
                data: {
                    appLinkId: $("#jiraServer option:selected").val(),
                    returnUrl: options.returnUrl
                },
                dataType: 'json',
                contentType: 'application/json',
                success: function (data) {
                    if (data.status != 'ERROR') {
                        var $projects = $('#jiraProjectKey'),
                            projectIdExists = false;

                        // there is a slight chance of multiple requests being made via selenium or bad programming.
                        // this prevents the project list from getting duplicate options
                        $projects.children().remove();

                        if (data.projects && data.projects.length) {
                            $(data.projects).each(function () {
                                projectsById[this.id] = this;
                                $('<option />', {
                                    val: this.id,
                                    text: this.name
                                }).appendTo($projects);
                                if (this.id == options.projectId) {
                                    projectIdExists = true;
                                }
                            });

                            $projects.unbind();
                            var updateForProject = function () {
                                var project = $('option:selected', $projects),
                                    projectScheme = projectsById[project.val()],
                                    issueTypeExists = false,
                                    $types = $('#jiraIssueType');

                                $types.find("option").remove();
                                $types.unbind();
                                $(projectScheme.issuetypes).each(function () {
                                    if (!this.subtask) {
                                        $('<option />', {
                                            val: this.id,
                                            text: this.name,
                                            title: this.description
                                        }).appendTo($types);
                                        if (this.id == options.issueTypeId) {
                                            issueTypeExists = true;
                                        }
                                    }
                                });

                                var updateForType = function () {
                                    populateForm(projectScheme.key, $types.val());
                                };
                                $types.change(function () {
                                    clearErrors();
                                    updateForType();
                                });
                                if (firstTime && issueTypeExists) {
                                    $types.val(options.issueTypeId);
                                }
                                updateForType();
                            };
                            $projects.change(function () {
                                clearErrors();
                                updateForProject();
                            });
                            if (firstTime && projectIdExists) {
                                $projects.val(options.projectId);
                            }
                            updateForProject();
                            $projects.focus();
                            $loginDanceContainer.hide();
                            $issueContainer.show();
                            firstTime=false;
                        } else {
                            var $message = BAMBOO.buildAUIErrorMessage([options.noProjectsMessage]);
                            $message.append(AJS.template.load(options.templates.genericErrorHelpLink).toString());
                            $messageContainer.append($message).show();
                        }
                    } else if (data.authenticationRedirectUrl && data.authenticationRedirectUrl.length) {
                        $loginDanceContainer.children().remove();
                        $loginDanceContainer.append(AJS.template.load(options.templates.authenticationRequiredTemplate).fill({ authenticationUrl: data.authenticationRedirectUrl, authenticationInstanceName: (data['authenticationInstanceName'] || "Jira") }).toString()).show();
                        $issueContainer.hide();
                    } else {
                        populateErrors(data);
                    }
                    $("#issue-loading-spinner").hide();
                    $("#jiraServer").removeAttr("disabled");
                },
                error: function (request, textStatus, errorThrown) {}
            });
        };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);
            firstTime = true;
            $("#executeCreateNewJiraIssue").find(".buttons-container").prepend(AJS.template.load(options.templates.shortcutHint).toString());
            var $jiraServer = $("#jiraServer");
            $jiraServer.change(function () {
                clearErrors();
                serverSelect();
            });
            if (options.applinkId && $jiraServer.find("option[value='" + options.applinkId + "']").length) {
                $jiraServer.val(options.applinkId);
            }
            serverSelect();
            $jiraServer.closest('form').bind('asyncform-notification', function (e, messages, warnings) {
                var messageDialog, $messages = $('<div />');

                if (messages && messages.length) {
                    $messages.append(BAMBOO.buildAUIMessage(messages, 'success', {escapeTitle: false}));
                }
                if (warnings && warnings.length) {
                    var $message = BAMBOO.buildAUIWarningMessage(warnings);
                    $message.append(AJS.template.load(options.templates.genericErrorHelpLink).toString());
                    $messages.append($message);
                }
                if ($messages.children().length) {
                    $messages.hide().appendTo(document.body); // append to the DOM so we can calculate how big the dialog should be to accommodate the messages
                    messageDialog = new AJS.Dialog({
                        width: 600,
                        height: $messages.innerHeight() + 70 // ~70px should be enough for the button bar plus a bit of padding
                    });
                    messageDialog.addPanel('', $messages.remove().html());
                    messageDialog.addButton("Close", function (dialog) {
                        dialog.remove();
                    });
                    messageDialog.show();
                }
            });
        },
        returnFromDialog: function (response) {
            BAMBOO.JIRAISSUES.refresh(response['newIssueKey']);
        }
    };
})(jQuery);


BAMBOO.JIRAISSUECREATION.NOAPPLINK = (function ($) {
    var defaults = {
        trigger: null,
        contentTemplate: null,
        appLinksAdminUrl: null,
        admin: null
    },
    options,
    showDialog = function () {
        var dialog = new AJS.Dialog({
            width: 600,
            height: 600,
            keypressListener: function (e) {
                if (e.which == jQuery.ui.keyCode.ESCAPE) {
                    dialog.remove();
                }
            }
        });
        dialog.addHeader("Create issue for build");
        dialog.addPanel("", AJS.template.load(options.contentTemplate).toString());
        if (options.admin) {
            dialog.addButton("Connect to Jira", function (dialog) {
                window.location = options.appLinksAdminUrl;
            });
        }
        dialog.addCancel("Cancel", function (dialog)
        {
            dialog.hide();
        });
        dialog.show();
    };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);
            $(document).delegate(options.trigger, "click", function (e) {
                e.preventDefault();
                showDialog();
            });
        }
    }
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/transition-jira-issue.js' */
BAMBOO.JIRAISSUETRANSITION = (function ($) {
    var opts = {
        issueKey: null,
        returnUrl: null
    },
    $errorMessagesContainer,
    $issueControlsContainer,
    $loginDanceMessageContainer,
    $loadingSpinner,
    $issueDetails,
    $issueStatus,
    $transitionButton,
    $transitionSelect,
    $transitionIssueResolution,
    $resolutionButton,
    $resolutionSelect,

    onTransitionClick = function() {
        $transitionButton.attr("disabled", "disabled");
        $transitionSelect.attr("disabled", "disabled");
        $resolutionButton.attr("disabled", "disabled");
        $resolutionSelect.attr("disabled", "disabled");
        $loadingSpinner.show();
        AJS.$.ajax({
            url: AJS.contextPath() + "/ajax/transitionIssue.action?issueKey=" + opts.issueKey + "&transitionId=" + $transitionButton.val()
                    + ($transitionIssueResolution.is(":visible") ? ("&resolutionId=" + $resolutionButton.val()) : "")
                    + "&returnUrl=" + encodeURIComponent(opts.returnUrl),
            dataType: 'json',
            contentType: 'application/json',
            success: function(response) {
                if (response.status != 'ERROR') {
                    if (response.requireResolution) {
                        $resolutionSelect.children().remove();
                        $(response.resolution.allowedValues).each(function(){
                            $('<option value="' + this.id + '"></option>').appendTo($resolutionSelect).text(this.name);
                        });
                        $resolutionSelect.change();
                        $resolutionButton.removeAttr("disabled");
                        $resolutionSelect.removeAttr("disabled");
                        $transitionIssueResolution.show();
                        $loadingSpinner.hide();
                    } else {
                        refreshIssueStatus();
                    }
                } else {
                    handleErrorResponse(response);
                }
                handleLoginDanceResponse(response);
            },
            error: function (request, textStatus, errorThrown) {
                $transitionButton.removeAttr("disabled");
                $transitionSelect.removeAttr("disabled");
                $resolutionButton.removeAttr("disabled");
                $resolutionSelect.removeAttr("disabled");
            }
        });

    },

    onChangeTransition = function() {
        $transitionButton.val($transitionSelect.val());
        $transitionButton.text($(":selected", $transitionSelect).text());
    },

    onChangeResolution = function() {
        $resolutionButton.val($resolutionSelect.val());
        $resolutionButton.text($(":selected", $resolutionSelect).text());
    },

    refreshIssueStatus = function() {
        $loadingSpinner.show();
        AJS.$.ajax({
            url: AJS.contextPath() + "/ajax/issueDetails.action?issueKey=" + opts.issueKey
                    + "&returnUrl=" + encodeURIComponent(opts.returnUrl),
            dataType: 'json',
            contentType: 'application/json',
            success: function(response) {
                if (response.status != 'ERROR') {
                    $issueDetails.children().remove();
                    $issueDetails.append(AJS.template.load("issueDetails-template").fill({url: response.issueUrl, title: response.fields.summary, iconUrl: response.fields.issuetype.iconUrl, key: response.key}).toString());

                    $issueStatus.children().remove();
                    $issueStatus.append(AJS.template.load("issueStatus-template").fill({iconUrl: response.fields.status.iconUrl, name: response.fields.status.name}).toString());
                    refreshTransitions();
                } else {
                    handleErrorResponse(response);
                }
                handleLoginDanceResponse(response);
            },
            error: function (request, textStatus, errorThrown) {
            }
        });
    },

    refreshTransitions = function() {
        AJS.$.ajax({
            url: AJS.contextPath() + "/ajax/issueTransitions.action?issueKey=" + opts.issueKey
                    + "&returnUrl=" + encodeURIComponent(opts.returnUrl),
            dataType: 'json',
            contentType: 'application/json',
            success: function(response) {
                if (response.status != 'ERROR') {
                    $transitionSelect.children().remove();
                    $(response.transitions).each(function(){
                        $('<option value="' + this.id + '"></option>').appendTo($transitionSelect).text(this.name);
                    });
                    $transitionSelect.change();
                    $issueControlsContainer.show();
                } else {
                    handleErrorResponse(response);
                }
                $loadingSpinner.hide();
                $transitionButton.removeAttr("disabled");
                $transitionSelect.removeAttr("disabled");
                $transitionIssueResolution.hide();
                handleLoginDanceResponse(response);
            },
            error: function (request, textStatus, errorThrown) {
            }
        });
    },

    handleLoginDanceResponse = function(response) {
        if (isDefinedObject(response.authenticationRedirectUrl)) {
            $loginDanceMessageContainer.children().remove();
            $loginDanceMessageContainer.append(AJS.template.load("authenticationRequired-template").fill({authenticationUrl: response.authenticationRedirectUrl}).toString()).show();
            $loginDanceMessageContainer.show();
            $issueControlsContainer.hide();
        } else {
            $loginDanceMessageContainer.hide();
        }
    },

    handleErrorResponse = function(response) {
        $errorMessagesContainer.children().remove();
        $(response.errors).each(function(){
            AJS.messages.error($errorMessagesContainer, { body: this, closeable: false });
        });
        $issueControlsContainer.hide();
        $errorMessagesContainer.show();
        $loadingSpinner.hide();
    };

    return {
        init: function (options) {
            $.extend(true, opts, options);
            $errorMessagesContainer = $("#error-messages-container");
            $issueControlsContainer = $("#issue-controls-container");
            $loginDanceMessageContainer = $("#login-dance-message-container");
            $loadingSpinner = $("#loading-spinner");
            $issueDetails = $("#issue-details");
            $issueStatus = $("#issue-status");
            $transitionButton = $("#transition-button");
            $transitionButton.click(onTransitionClick);
            $transitionSelect = $("#transition-select");
            $transitionSelect.change(onChangeTransition);
            $transitionIssueResolution = $("#transition-issue-resolution");
            $resolutionButton = $("#resolution-button");
            $resolutionButton.click(onTransitionClick);
            $resolutionSelect = $("#resolution-select");
            $resolutionSelect.change(onChangeResolution);
            refreshIssueStatus();
        }
    }
})(jQuery);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/test-actions.js' */
BAMBOO.TESTACTIONS = (function ($, _) {
    var toggleFail = function (jqXHR) {
        var json,
                message = 'An error occurred while connecting to Bamboo server. Please refresh the page and try again.';

        try {
            json = $.parseJSON(jqXHR.responseText);
            if (json.errors && json.errors.length) {
                message += "\n\n" + json.errors.join("\n");
            }
        }
        catch (e) {}
        alert(message); //todo: ask Matty how to better present error message
    };

    $(document).delegate(".unlink-test-to-jira-action", "click", function (e) {
        var $button = $(this),
                $toolbarItem = $button.closest(".toolbar-item"),
                isDisabledClass = "disabled",
                jqXHR;

        e.preventDefault();

        if (!$toolbarItem.hasClass(isDisabledClass)) {
            $toolbarItem.addClass(isDisabledClass);
            jqXHR = $.post($button.attr("href"), { "bamboo.successReturnMode": "json" }).fail(toggleFail).always(function () { $toolbarItem.removeClass(isDisabledClass); });

            jqXHR.done(function (json) {
                if (json && json.status && json.status == "OK") {
                    var $tableRows = AJS.$(".test-case-row-"+$button.data('testCaseId'));
                    $tableRows.find(".linked-jira-issue").html('');

                    $tableRows.find(".link-test-to-jira-action").toggleClass("hidden", false);
                    $tableRows.find(".create-jira-issue-for-test-action").toggleClass("hidden", false);
                    $tableRows.find(".unlink-test-to-jira-action").toggleClass("hidden", true);
                } else {
                    toggleFail(jqXHR);
                }
            });
        }
    });

    var renderLinkedJiraIssue = function ($element, issue) {
        $element.html(bamboo.feature.jiraIssueList.singleIssue(issue));
    };

    return {
        onReturnFromLinkingIssueManually: function (json) {
            if (json && json.status && json.status == "OK") {
                var $tableRows = AJS.$(".test-case-row-"+json.testCaseId),
                        $linkedJiraIssueContainers = $tableRows.find(".linked-jira-issue");

                if (json.authenticationRedirectUrl)
                {
                    $linkedJiraIssueContainers.html(bamboo.feature.jiraIssueList.singleIssueOAuth({
                        key: json.issue.key,
                        keyLink: AJS.contextPath() + '/project/jiraRedirect.action?jiraIssueKey=' + json.issue.key,
                        authenticationRedirectUrl: json.authenticationRedirectUrl + '&redirectUrl=' + encodeURIComponent(document.location.href),
                        authenticationInstanceName: json.authenticationInstanceName
                    }));
                }
                else
                {
                    renderLinkedJiraIssue($linkedJiraIssueContainers, json.issue);
                }

                $tableRows.find(".unlink-test-to-jira-action").toggleClass("hidden", false);
                $tableRows.find(".link-test-to-jira-action").toggleClass("hidden", true);
                $tableRows.find(".create-jira-issue-for-test-action").toggleClass("hidden", true);
            } else {
                //show some error alert?... shouldn't happen anyway...
            }
        }
    };

})(jQuery, _);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/scripts/config-sidebar.js' */
BAMBOO.ConfigSidebar = (function ($) {
    var classes = {
            animating: "animating",
            collapsed: "collapsed",
            expanded: "expanded",
            icons: {
                collapse: "icon-collapse",
                expand: "icon-expand"
            }
        },
        toggleState = function (shouldExpand) {
            var $h2 = $(this),
                $icon = $h2.children(".icon").addClass(classes.animating),
                $listOrMessage = $h2.next();

            $listOrMessage[shouldExpand ? "slideDown" : "slideUp"](function () {
                $h2.removeClass(shouldExpand ? classes.collapsed : classes.expanded).addClass(shouldExpand ? classes.expanded : classes.collapsed);
                $icon
                    .removeClass(classes.animating)
                    .removeClass(shouldExpand ? classes.icons.expand : classes.icons.collapse)
                    .addClass(shouldExpand ? classes.icons.collapse : classes.icons.expand);
                AJS.Cookie.save("config.sidebar." + $h2.data("sidebarSection") + ".expanded", shouldExpand, 365);
            });
        };

    return {
        init: function () {
            $(function () {
                var $configSidebar = $("#config-sidebar")
                    .delegate("." + classes.collapsed, "click", function () { toggleState.call(this, true); })
                    .delegate("." + classes.expanded, "click", function () { toggleState.call(this, false); });

                $configSidebar.find("ul a").each(function () {
                    var $a = $(this);

                    if ($a.isClipped() && !$a.attr("title")) {
                        $a.attr("title", $a.text());
                    }
                });
                $configSidebar.children("." + classes.collapsed).each(function () {
                    $(this).next().hide();
                });
            });
        }
    };
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:bamboo-js', location = '/widget/error/error.js' */
define('widget/generate-error-messages', [
    'jquery',
    'underscore'
], function(
    $,
    _
) {

    'use strict';

    var generateErrorMessages = function(jqXHR, textStatus, errorThrown) {
        var $message, data;
        try {
            data = $.parseJSON(jqXHR.responseText);
            if (data.errors && data.errors.length) {
                $message = BAMBOO.buildAUIErrorMessage(data.errors);
            } else if (data.fieldErrors && data.fieldErrors.length) {
                var renderedErrors = [];
                for (var fieldError in data.fieldErrors) {
                    if (data.fieldErrors.hasOwnProperty(fieldError)) {
                        renderedErrors.push(fieldError + ': ' + data.fieldErrors[fieldError]);
                    }
                }
                $message = BAMBOO.buildAUIErrorMessage(renderedErrors);
            } else if (data.messages && data.messages.length) {
                $message = BAMBOO.buildAUIWarningMessage(data.messages);
            } else if (data.message) {
                $message = BAMBOO.buildAUIWarningMessage([data.message]);
            }
        } catch (ignore) {}
        return $message;
    };

    return generateErrorMessages;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plan-config-delete-confirmation', location = '/feature/plan-config-delete-confirmation/plan-config-delete-confirmation.js' */
define("feature/plan-config-delete-confirmation",["jquery"],function(e){"use strict";return function(){var n=function(n){return function(t){t.preventDefault();var o=t.currentTarget,r=o.href,i=e(o).data();window.simpleDialogForm(null,r,600,500,"Confirm","ajax",function(e){return n(e,i)},null,i.title)}};e(document).on("click",".plan-delete-link",n(function(n,t){var o=n.plan,r=t.redirect;o&&(e("#job_"+o.key).remove(),e("#job-"+o.key).remove(),r&&(window.location.href=r))})).on("click",".stage-delete-link",n(function(n){var t=n.stage;t&&(e("#stage_"+t.id).remove(),e("#stage-"+t.id).remove())}))}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:history-js', location = '/bower/history.js/jquery.history.js' */
/**
 * History.js jQuery Adapter
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */

// Closure
(function(window,undefined){
	"use strict";

	// Localise Globals
	var
		History = window.History = window.History||{},
		jQuery = window.jQuery;

	// Check Existence
	if ( typeof History.Adapter !== 'undefined' ) {
		throw new Error('History.js Adapter has already been loaded...');
	}

	// Add the Adapter
	History.Adapter = {
		/**
		 * History.Adapter.bind(el,event,callback)
		 * @param {Element|string} el
		 * @param {string} event - custom and standard events
		 * @param {function} callback
		 * @return {void}
		 */
		bind: function(el,event,callback){
			jQuery(el).bind(event,callback);
		},

		/**
		 * History.Adapter.trigger(el,event)
		 * @param {Element|string} el
		 * @param {string} event - custom and standard events
		 * @param {Object=} extra - a object of extra event data (optional)
		 * @return {void}
		 */
		trigger: function(el,event,extra){
			jQuery(el).trigger(event,extra);
		},

		/**
		 * History.Adapter.extractEventData(key,event,extra)
		 * @param {string} key - key for the event data to extract
		 * @param {string} event - custom and standard events
		 * @param {Object=} extra - a object of extra event data (optional)
		 * @return {mixed}
		 */
		extractEventData: function(key,event,extra){
			// jQuery Native then jQuery Custom
			var result = (event && event.originalEvent && event.originalEvent[key]) || (extra && extra[key]) || undefined;

			// Return
			return result;
		},

		/**
		 * History.Adapter.onDomLoad(callback)
		 * @param {function} callback
		 * @return {void}
		 */
		onDomLoad: function(callback) {
			jQuery(callback);
		}
	};

	// Try and Initialise History
	if ( typeof History.init !== 'undefined' ) {
		History.init();
	}

})(window);

/**
 * History.js Core
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */

(function(window,undefined){
	"use strict";

	// ========================================================================
	// Initialise

	// Localise Globals
	var
		console = window.console||undefined, // Prevent a JSLint complain
		document = window.document, // Make sure we are using the correct document
		navigator = window.navigator, // Make sure we are using the correct navigator
		sessionStorage = window.sessionStorage||false, // sessionStorage
		setTimeout = window.setTimeout,
		clearTimeout = window.clearTimeout,
		setInterval = window.setInterval,
		clearInterval = window.clearInterval,
		JSON = window.JSON,
		alert = window.alert,
		History = window.History = window.History||{}, // Public History Object
		history = window.history; // Old History Object

	try {
		sessionStorage.setItem('TEST', '1');
		sessionStorage.removeItem('TEST');
	} catch(e) {
		sessionStorage = false;
	}

	// MooTools Compatibility
	JSON.stringify = JSON.stringify||JSON.encode;
	JSON.parse = JSON.parse||JSON.decode;

	// Check Existence
	if ( typeof History.init !== 'undefined' ) {
		throw new Error('History.js Core has already been loaded...');
	}

	// Initialise History
	History.init = function(options){
		// Check Load Status of Adapter
		if ( typeof History.Adapter === 'undefined' ) {
			return false;
		}

		// Check Load Status of Core
		if ( typeof History.initCore !== 'undefined' ) {
			History.initCore();
		}

		// Check Load Status of HTML4 Support
		if ( typeof History.initHtml4 !== 'undefined' ) {
			History.initHtml4();
		}

		// Return true
		return true;
	};


	// ========================================================================
	// Initialise Core

	// Initialise Core
	History.initCore = function(options){
		// Initialise
		if ( typeof History.initCore.initialized !== 'undefined' ) {
			// Already Loaded
			return false;
		}
		else {
			History.initCore.initialized = true;
		}


		// ====================================================================
		// Options

		/**
		 * History.options
		 * Configurable options
		 */
		History.options = History.options||{};

		/**
		 * History.options.hashChangeInterval
		 * How long should the interval be before hashchange checks
		 */
		History.options.hashChangeInterval = History.options.hashChangeInterval || 100;

		/**
		 * History.options.safariPollInterval
		 * How long should the interval be before safari poll checks
		 */
		History.options.safariPollInterval = History.options.safariPollInterval || 500;

		/**
		 * History.options.doubleCheckInterval
		 * How long should the interval be before we perform a double check
		 */
		History.options.doubleCheckInterval = History.options.doubleCheckInterval || 500;

		/**
		 * History.options.disableSuid
		 * Force History not to append suid
		 */
		History.options.disableSuid = History.options.disableSuid || false;

		/**
		 * History.options.storeInterval
		 * How long should we wait between store calls
		 */
		History.options.storeInterval = History.options.storeInterval || 1000;

		/**
		 * History.options.busyDelay
		 * How long should we wait between busy events
		 */
		History.options.busyDelay = History.options.busyDelay || 250;

		/**
		 * History.options.debug
		 * If true will enable debug messages to be logged
		 */
		History.options.debug = History.options.debug || false;

		/**
		 * History.options.initialTitle
		 * What is the title of the initial state
		 */
		History.options.initialTitle = History.options.initialTitle || document.title;

		/**
		 * History.options.html4Mode
		 * If true, will force HTMl4 mode (hashtags)
		 */
		History.options.html4Mode = History.options.html4Mode || false;

		/**
		 * History.options.delayInit
		 * Want to override default options and call init manually.
		 */
		History.options.delayInit = History.options.delayInit || false;


		// ====================================================================
		// Interval record

		/**
		 * History.intervalList
		 * List of intervals set, to be cleared when document is unloaded.
		 */
		History.intervalList = [];

		/**
		 * History.clearAllIntervals
		 * Clears all setInterval instances.
		 */
		History.clearAllIntervals = function(){
			var i, il = History.intervalList;
			if (typeof il !== "undefined" && il !== null) {
				for (i = 0; i < il.length; i++) {
					clearInterval(il[i]);
				}
				History.intervalList = null;
			}
		};


		// ====================================================================
		// Debug

		/**
		 * History.debug(message,...)
		 * Logs the passed arguments if debug enabled
		 */
		History.debug = function(){
			if ( (History.options.debug||false) ) {
				History.log.apply(History,arguments);
			}
		};

		/**
		 * History.log(message,...)
		 * Logs the passed arguments
		 */
		History.log = function(){
			// Prepare
			var
				consoleExists = !(typeof console === 'undefined' || typeof console.log === 'undefined' || typeof console.log.apply === 'undefined'),
				textarea = document.getElementById('log'),
				message,
				i,n,
				args,arg
				;

			// Write to Console
			if ( consoleExists ) {
				args = Array.prototype.slice.call(arguments);
				message = args.shift();
				if ( typeof console.debug !== 'undefined' ) {
					console.debug.apply(console,[message,args]);
				}
				else {
					console.log.apply(console,[message,args]);
				}
			}
			else {
				message = ("\n"+arguments[0]+"\n");
			}

			// Write to log
			for ( i=1,n=arguments.length; i<n; ++i ) {
				arg = arguments[i];
				if ( typeof arg === 'object' && typeof JSON !== 'undefined' ) {
					try {
						arg = JSON.stringify(arg);
					}
					catch ( Exception ) {
						// Recursive Object
					}
				}
				message += "\n"+arg+"\n";
			}

			// Textarea
			if ( textarea ) {
				textarea.value += message+"\n-----\n";
				textarea.scrollTop = textarea.scrollHeight - textarea.clientHeight;
			}
			// No Textarea, No Console
			else if ( !consoleExists ) {
				alert(message);
			}

			// Return true
			return true;
		};


		// ====================================================================
		// Emulated Status

		/**
		 * History.getInternetExplorerMajorVersion()
		 * Get's the major version of Internet Explorer
		 * @return {integer}
		 * @license Public Domain
		 * @author Benjamin Arthur Lupton <contact@balupton.com>
		 * @author James Padolsey <https://gist.github.com/527683>
		 */
		History.getInternetExplorerMajorVersion = function(){
			var result = History.getInternetExplorerMajorVersion.cached =
					(typeof History.getInternetExplorerMajorVersion.cached !== 'undefined')
				?	History.getInternetExplorerMajorVersion.cached
				:	(function(){
						var v = 3,
								div = document.createElement('div'),
								all = div.getElementsByTagName('i');
						while ( (div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->') && all[0] ) {}
						return (v > 4) ? v : false;
					})()
				;
			return result;
		};

		/**
		 * History.isInternetExplorer()
		 * Are we using Internet Explorer?
		 * @return {boolean}
		 * @license Public Domain
		 * @author Benjamin Arthur Lupton <contact@balupton.com>
		 */
		History.isInternetExplorer = function(){
			var result =
				History.isInternetExplorer.cached =
				(typeof History.isInternetExplorer.cached !== 'undefined')
					?	History.isInternetExplorer.cached
					:	Boolean(History.getInternetExplorerMajorVersion())
				;
			return result;
		};

		/**
		 * History.emulated
		 * Which features require emulating?
		 */

		if (History.options.html4Mode) {
			History.emulated = {
				pushState : true,
				hashChange: true
			};
		}

		else {

			History.emulated = {
				pushState: !Boolean(
					window.history && window.history.pushState && window.history.replaceState
					&& !(
						(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent) /* disable for versions of iOS before version 4.3 (8F190) */
						|| (/AppleWebKit\/5([0-2]|3[0-2])/i).test(navigator.userAgent) /* disable for the mercury iOS browser, or at least older versions of the webkit engine */
					)
				),
				hashChange: Boolean(
					!(('onhashchange' in window) || ('onhashchange' in document))
					||
					(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8)
				)
			};
		}

		/**
		 * History.enabled
		 * Is History enabled?
		 */
		History.enabled = !History.emulated.pushState;

		/**
		 * History.bugs
		 * Which bugs are present
		 */
		History.bugs = {
			/**
			 * Safari 5 and Safari iOS 4 fail to return to the correct state once a hash is replaced by a `replaceState` call
			 * https://bugs.webkit.org/show_bug.cgi?id=56249
			 */
			setHash: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),

			/**
			 * Safari 5 and Safari iOS 4 sometimes fail to apply the state change under busy conditions
			 * https://bugs.webkit.org/show_bug.cgi?id=42940
			 */
			safariPoll: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),

			/**
			 * MSIE 6 and 7 sometimes do not apply a hash even it was told to (requiring a second call to the apply function)
			 */
			ieDoubleCheck: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8),

			/**
			 * MSIE 6 requires the entire hash to be encoded for the hashes to trigger the onHashChange event
			 */
			hashEscape: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 7)
		};

		/**
		 * History.isEmptyObject(obj)
		 * Checks to see if the Object is Empty
		 * @param {Object} obj
		 * @return {boolean}
		 */
		History.isEmptyObject = function(obj) {
			for ( var name in obj ) {
				if ( obj.hasOwnProperty(name) ) {
					return false;
				}
			}
			return true;
		};

		/**
		 * History.cloneObject(obj)
		 * Clones a object and eliminate all references to the original contexts
		 * @param {Object} obj
		 * @return {Object}
		 */
		History.cloneObject = function(obj) {
			var hash,newObj;
			if ( obj ) {
				hash = JSON.stringify(obj);
				newObj = JSON.parse(hash);
			}
			else {
				newObj = {};
			}
			return newObj;
		};


		// ====================================================================
		// URL Helpers

		/**
		 * History.getRootUrl()
		 * Turns "http://mysite.com/dir/page.html?asd" into "http://mysite.com"
		 * @return {String} rootUrl
		 */
		History.getRootUrl = function(){
			// Create
			var rootUrl = document.location.protocol+'//'+(document.location.hostname||document.location.host);
			if ( document.location.port||false ) {
				rootUrl += ':'+document.location.port;
			}
			rootUrl += '/';

			// Return
			return rootUrl;
		};

		/**
		 * History.getBaseHref()
		 * Fetches the `href` attribute of the `<base href="...">` element if it exists
		 * @return {String} baseHref
		 */
		History.getBaseHref = function(){
			// Create
			var
				baseElements = document.getElementsByTagName('base'),
				baseElement = null,
				baseHref = '';

			// Test for Base Element
			if ( baseElements.length === 1 ) {
				// Prepare for Base Element
				baseElement = baseElements[0];
				baseHref = baseElement.href.replace(/[^\/]+$/,'');
			}

			// Adjust trailing slash
			baseHref = baseHref.replace(/\/+$/,'');
			if ( baseHref ) baseHref += '/';

			// Return
			return baseHref;
		};

		/**
		 * History.getBaseUrl()
		 * Fetches the baseHref or basePageUrl or rootUrl (whichever one exists first)
		 * @return {String} baseUrl
		 */
		History.getBaseUrl = function(){
			// Create
			var baseUrl = History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();

			// Return
			return baseUrl;
		};

		/**
		 * History.getPageUrl()
		 * Fetches the URL of the current page
		 * @return {String} pageUrl
		 */
		History.getPageUrl = function(){
			// Fetch
			var
				State = History.getState(false,false),
				stateUrl = (State||{}).url||History.getLocationHref(),
				pageUrl;

			// Create
			pageUrl = stateUrl.replace(/\/+$/,'').replace(/[^\/]+$/,function(part,index,string){
				return (/\./).test(part) ? part : part+'/';
			});

			// Return
			return pageUrl;
		};

		/**
		 * History.getBasePageUrl()
		 * Fetches the Url of the directory of the current page
		 * @return {String} basePageUrl
		 */
		History.getBasePageUrl = function(){
			// Create
			var basePageUrl = (History.getLocationHref()).replace(/[#\?].*/,'').replace(/[^\/]+$/,function(part,index,string){
				return (/[^\/]$/).test(part) ? '' : part;
			}).replace(/\/+$/,'')+'/';

			// Return
			return basePageUrl;
		};

		/**
		 * History.getFullUrl(url)
		 * Ensures that we have an absolute URL and not a relative URL
		 * @param {string} url
		 * @param {Boolean} allowBaseHref
		 * @return {string} fullUrl
		 */
		History.getFullUrl = function(url,allowBaseHref){
			// Prepare
			var fullUrl = url, firstChar = url.substring(0,1);
			allowBaseHref = (typeof allowBaseHref === 'undefined') ? true : allowBaseHref;

			// Check
			if ( /[a-z]+\:\/\//.test(url) ) {
				// Full URL
			}
			else if ( firstChar === '/' ) {
				// Root URL
				fullUrl = History.getRootUrl()+url.replace(/^\/+/,'');
			}
			else if ( firstChar === '#' ) {
				// Anchor URL
				fullUrl = History.getPageUrl().replace(/#.*/,'')+url;
			}
			else if ( firstChar === '?' ) {
				// Query URL
				fullUrl = History.getPageUrl().replace(/[\?#].*/,'')+url;
			}
			else {
				// Relative URL
				if ( allowBaseHref ) {
					fullUrl = History.getBaseUrl()+url.replace(/^(\.\/)+/,'');
				} else {
					fullUrl = History.getBasePageUrl()+url.replace(/^(\.\/)+/,'');
				}
				// We have an if condition above as we do not want hashes
				// which are relative to the baseHref in our URLs
				// as if the baseHref changes, then all our bookmarks
				// would now point to different locations
				// whereas the basePageUrl will always stay the same
			}

			// Return
			return fullUrl.replace(/\#$/,'');
		};

		/**
		 * History.getShortUrl(url)
		 * Ensures that we have a relative URL and not a absolute URL
		 * @param {string} url
		 * @return {string} url
		 */
		History.getShortUrl = function(url){
			// Prepare
			var shortUrl = url, baseUrl = History.getBaseUrl(), rootUrl = History.getRootUrl();

			// Trim baseUrl
			if ( History.emulated.pushState ) {
				// We are in a if statement as when pushState is not emulated
				// The actual url these short urls are relative to can change
				// So within the same session, we the url may end up somewhere different
				shortUrl = shortUrl.replace(baseUrl,'');
			}

			// Trim rootUrl
			shortUrl = shortUrl.replace(rootUrl,'/');

			// Ensure we can still detect it as a state
			if ( History.isTraditionalAnchor(shortUrl) ) {
				shortUrl = './'+shortUrl;
			}

			// Clean It
			shortUrl = shortUrl.replace(/^(\.\/)+/g,'./').replace(/\#$/,'');

			// Return
			return shortUrl;
		};

		/**
		 * History.getLocationHref(document)
		 * Returns a normalized version of document.location.href
		 * accounting for browser inconsistencies, etc.
		 *
		 * This URL will be URI-encoded and will include the hash
		 *
		 * @param {object} document
		 * @return {string} url
		 */
		History.getLocationHref = function(doc) {
			doc = doc || document;

			// most of the time, this will be true
			if (doc.URL === doc.location.href)
				return doc.location.href;

			// some versions of webkit URI-decode document.location.href
			// but they leave document.URL in an encoded state
			if (doc.location.href === decodeURIComponent(doc.URL))
				return doc.URL;

			// FF 3.6 only updates document.URL when a page is reloaded
			// document.location.href is updated correctly
			if (doc.location.hash && decodeURIComponent(doc.location.href.replace(/^[^#]+/, "")) === doc.location.hash)
				return doc.location.href;

			if (doc.URL.indexOf('#') == -1 && doc.location.href.indexOf('#') != -1)
				return doc.location.href;
			
			return doc.URL || doc.location.href;
		};


		// ====================================================================
		// State Storage

		/**
		 * History.store
		 * The store for all session specific data
		 */
		History.store = {};

		/**
		 * History.idToState
		 * 1-1: State ID to State Object
		 */
		History.idToState = History.idToState||{};

		/**
		 * History.stateToId
		 * 1-1: State String to State ID
		 */
		History.stateToId = History.stateToId||{};

		/**
		 * History.urlToId
		 * 1-1: State URL to State ID
		 */
		History.urlToId = History.urlToId||{};

		/**
		 * History.storedStates
		 * Store the states in an array
		 */
		History.storedStates = History.storedStates||[];

		/**
		 * History.savedStates
		 * Saved the states in an array
		 */
		History.savedStates = History.savedStates||[];

		/**
		 * History.noramlizeStore()
		 * Noramlize the store by adding necessary values
		 */
		History.normalizeStore = function(){
			History.store.idToState = History.store.idToState||{};
			History.store.urlToId = History.store.urlToId||{};
			History.store.stateToId = History.store.stateToId||{};
		};

		/**
		 * History.getState()
		 * Get an object containing the data, title and url of the current state
		 * @param {Boolean} friendly
		 * @param {Boolean} create
		 * @return {Object} State
		 */
		History.getState = function(friendly,create){
			// Prepare
			if ( typeof friendly === 'undefined' ) { friendly = true; }
			if ( typeof create === 'undefined' ) { create = true; }

			// Fetch
			var State = History.getLastSavedState();

			// Create
			if ( !State && create ) {
				State = History.createStateObject();
			}

			// Adjust
			if ( friendly ) {
				State = History.cloneObject(State);
				State.url = State.cleanUrl||State.url;
			}

			// Return
			return State;
		};

		/**
		 * History.getIdByState(State)
		 * Gets a ID for a State
		 * @param {State} newState
		 * @return {String} id
		 */
		History.getIdByState = function(newState){

			// Fetch ID
			var id = History.extractId(newState.url),
				str;

			if ( !id ) {
				// Find ID via State String
				str = History.getStateString(newState);
				if ( typeof History.stateToId[str] !== 'undefined' ) {
					id = History.stateToId[str];
				}
				else if ( typeof History.store.stateToId[str] !== 'undefined' ) {
					id = History.store.stateToId[str];
				}
				else {
					// Generate a new ID
					while ( true ) {
						id = (new Date()).getTime() + String(Math.random()).replace(/\D/g,'');
						if ( typeof History.idToState[id] === 'undefined' && typeof History.store.idToState[id] === 'undefined' ) {
							break;
						}
					}

					// Apply the new State to the ID
					History.stateToId[str] = id;
					History.idToState[id] = newState;
				}
			}

			// Return ID
			return id;
		};

		/**
		 * History.normalizeState(State)
		 * Expands a State Object
		 * @param {object} State
		 * @return {object}
		 */
		History.normalizeState = function(oldState){
			// Variables
			var newState, dataNotEmpty;

			// Prepare
			if ( !oldState || (typeof oldState !== 'object') ) {
				oldState = {};
			}

			// Check
			if ( typeof oldState.normalized !== 'undefined' ) {
				return oldState;
			}

			// Adjust
			if ( !oldState.data || (typeof oldState.data !== 'object') ) {
				oldState.data = {};
			}

			// ----------------------------------------------------------------

			// Create
			newState = {};
			newState.normalized = true;
			newState.title = oldState.title||'';
			newState.url = History.getFullUrl(oldState.url?oldState.url:(History.getLocationHref()));
			newState.hash = History.getShortUrl(newState.url);
			newState.data = History.cloneObject(oldState.data);

			// Fetch ID
			newState.id = History.getIdByState(newState);

			// ----------------------------------------------------------------

			// Clean the URL
			newState.cleanUrl = newState.url.replace(/\??\&_suid.*/,'');
			newState.url = newState.cleanUrl;

			// Check to see if we have more than just a url
			dataNotEmpty = !History.isEmptyObject(newState.data);

			// Apply
			if ( (newState.title || dataNotEmpty) && History.options.disableSuid !== true ) {
				// Add ID to Hash
				newState.hash = History.getShortUrl(newState.url).replace(/\??\&_suid.*/,'');
				if ( !/\?/.test(newState.hash) ) {
					newState.hash += '?';
				}
				newState.hash += '&_suid='+newState.id;
			}

			// Create the Hashed URL
			newState.hashedUrl = History.getFullUrl(newState.hash);

			// ----------------------------------------------------------------

			// Update the URL if we have a duplicate
			if ( (History.emulated.pushState || History.bugs.safariPoll) && History.hasUrlDuplicate(newState) ) {
				newState.url = newState.hashedUrl;
			}

			// ----------------------------------------------------------------

			// Return
			return newState;
		};

		/**
		 * History.createStateObject(data,title,url)
		 * Creates a object based on the data, title and url state params
		 * @param {object} data
		 * @param {string} title
		 * @param {string} url
		 * @return {object}
		 */
		History.createStateObject = function(data,title,url){
			// Hashify
			var State = {
				'data': data,
				'title': title,
				'url': url
			};

			// Expand the State
			State = History.normalizeState(State);

			// Return object
			return State;
		};

		/**
		 * History.getStateById(id)
		 * Get a state by it's UID
		 * @param {String} id
		 */
		History.getStateById = function(id){
			// Prepare
			id = String(id);

			// Retrieve
			var State = History.idToState[id] || History.store.idToState[id] || undefined;

			// Return State
			return State;
		};

		/**
		 * Get a State's String
		 * @param {State} passedState
		 */
		History.getStateString = function(passedState){
			// Prepare
			var State, cleanedState, str;

			// Fetch
			State = History.normalizeState(passedState);

			// Clean
			cleanedState = {
				data: State.data,
				title: passedState.title,
				url: passedState.url
			};

			// Fetch
			str = JSON.stringify(cleanedState);

			// Return
			return str;
		};

		/**
		 * Get a State's ID
		 * @param {State} passedState
		 * @return {String} id
		 */
		History.getStateId = function(passedState){
			// Prepare
			var State, id;

			// Fetch
			State = History.normalizeState(passedState);

			// Fetch
			id = State.id;

			// Return
			return id;
		};

		/**
		 * History.getHashByState(State)
		 * Creates a Hash for the State Object
		 * @param {State} passedState
		 * @return {String} hash
		 */
		History.getHashByState = function(passedState){
			// Prepare
			var State, hash;

			// Fetch
			State = History.normalizeState(passedState);

			// Hash
			hash = State.hash;

			// Return
			return hash;
		};

		/**
		 * History.extractId(url_or_hash)
		 * Get a State ID by it's URL or Hash
		 * @param {string} url_or_hash
		 * @return {string} id
		 */
		History.extractId = function ( url_or_hash ) {
			// Prepare
			var id,parts,url, tmp;

			// Extract
			
			// If the URL has a #, use the id from before the #
			if (url_or_hash.indexOf('#') != -1)
			{
				tmp = url_or_hash.split("#")[0];
			}
			else
			{
				tmp = url_or_hash;
			}
			
			parts = /(.*)\&_suid=([0-9]+)$/.exec(tmp);
			url = parts ? (parts[1]||url_or_hash) : url_or_hash;
			id = parts ? String(parts[2]||'') : '';

			// Return
			return id||false;
		};

		/**
		 * History.isTraditionalAnchor
		 * Checks to see if the url is a traditional anchor or not
		 * @param {String} url_or_hash
		 * @return {Boolean}
		 */
		History.isTraditionalAnchor = function(url_or_hash){
			// Check
			var isTraditional = !(/[\/\?\.]/.test(url_or_hash));

			// Return
			return isTraditional;
		};

		/**
		 * History.extractState
		 * Get a State by it's URL or Hash
		 * @param {String} url_or_hash
		 * @return {State|null}
		 */
		History.extractState = function(url_or_hash,create){
			// Prepare
			var State = null, id, url;
			create = create||false;

			// Fetch SUID
			id = History.extractId(url_or_hash);
			if ( id ) {
				State = History.getStateById(id);
			}

			// Fetch SUID returned no State
			if ( !State ) {
				// Fetch URL
				url = History.getFullUrl(url_or_hash);

				// Check URL
				id = History.getIdByUrl(url)||false;
				if ( id ) {
					State = History.getStateById(id);
				}

				// Create State
				if ( !State && create && !History.isTraditionalAnchor(url_or_hash) ) {
					State = History.createStateObject(null,null,url);
				}
			}

			// Return
			return State;
		};

		/**
		 * History.getIdByUrl()
		 * Get a State ID by a State URL
		 */
		History.getIdByUrl = function(url){
			// Fetch
			var id = History.urlToId[url] || History.store.urlToId[url] || undefined;

			// Return
			return id;
		};

		/**
		 * History.getLastSavedState()
		 * Get an object containing the data, title and url of the current state
		 * @return {Object} State
		 */
		History.getLastSavedState = function(){
			return History.savedStates[History.savedStates.length-1]||undefined;
		};

		/**
		 * History.getLastStoredState()
		 * Get an object containing the data, title and url of the current state
		 * @return {Object} State
		 */
		History.getLastStoredState = function(){
			return History.storedStates[History.storedStates.length-1]||undefined;
		};

		/**
		 * History.hasUrlDuplicate
		 * Checks if a Url will have a url conflict
		 * @param {Object} newState
		 * @return {Boolean} hasDuplicate
		 */
		History.hasUrlDuplicate = function(newState) {
			// Prepare
			var hasDuplicate = false,
				oldState;

			// Fetch
			oldState = History.extractState(newState.url);

			// Check
			hasDuplicate = oldState && oldState.id !== newState.id;

			// Return
			return hasDuplicate;
		};

		/**
		 * History.storeState
		 * Store a State
		 * @param {Object} newState
		 * @return {Object} newState
		 */
		History.storeState = function(newState){
			// Store the State
			History.urlToId[newState.url] = newState.id;

			// Push the State
			History.storedStates.push(History.cloneObject(newState));

			// Return newState
			return newState;
		};

		/**
		 * History.isLastSavedState(newState)
		 * Tests to see if the state is the last state
		 * @param {Object} newState
		 * @return {boolean} isLast
		 */
		History.isLastSavedState = function(newState){
			// Prepare
			var isLast = false,
				newId, oldState, oldId;

			// Check
			if ( History.savedStates.length ) {
				newId = newState.id;
				oldState = History.getLastSavedState();
				oldId = oldState.id;

				// Check
				isLast = (newId === oldId);
			}

			// Return
			return isLast;
		};

		/**
		 * History.saveState
		 * Push a State
		 * @param {Object} newState
		 * @return {boolean} changed
		 */
		History.saveState = function(newState){
			// Check Hash
			if ( History.isLastSavedState(newState) ) {
				return false;
			}

			// Push the State
			History.savedStates.push(History.cloneObject(newState));

			// Return true
			return true;
		};

		/**
		 * History.getStateByIndex()
		 * Gets a state by the index
		 * @param {integer} index
		 * @return {Object}
		 */
		History.getStateByIndex = function(index){
			// Prepare
			var State = null;

			// Handle
			if ( typeof index === 'undefined' ) {
				// Get the last inserted
				State = History.savedStates[History.savedStates.length-1];
			}
			else if ( index < 0 ) {
				// Get from the end
				State = History.savedStates[History.savedStates.length+index];
			}
			else {
				// Get from the beginning
				State = History.savedStates[index];
			}

			// Return State
			return State;
		};
		
		/**
		 * History.getCurrentIndex()
		 * Gets the current index
		 * @return (integer)
		*/
		History.getCurrentIndex = function(){
			// Prepare
			var index = null;
			
			// No states saved
			if(History.savedStates.length < 1) {
				index = 0;
			}
			else {
				index = History.savedStates.length-1;
			}
			return index;
		};

		// ====================================================================
		// Hash Helpers

		/**
		 * History.getHash()
		 * @param {Location=} location
		 * Gets the current document hash
		 * Note: unlike location.hash, this is guaranteed to return the escaped hash in all browsers
		 * @return {string}
		 */
		History.getHash = function(doc){
			var url = History.getLocationHref(doc),
				hash;
			hash = History.getHashByUrl(url);
			return hash;
		};

		/**
		 * History.unescapeHash()
		 * normalize and Unescape a Hash
		 * @param {String} hash
		 * @return {string}
		 */
		History.unescapeHash = function(hash){
			// Prepare
			var result = History.normalizeHash(hash);

			// Unescape hash
			result = decodeURIComponent(result);

			// Return result
			return result;
		};

		/**
		 * History.normalizeHash()
		 * normalize a hash across browsers
		 * @return {string}
		 */
		History.normalizeHash = function(hash){
			// Prepare
			var result = hash.replace(/[^#]*#/,'').replace(/#.*/, '');

			// Return result
			return result;
		};

		/**
		 * History.setHash(hash)
		 * Sets the document hash
		 * @param {string} hash
		 * @return {History}
		 */
		History.setHash = function(hash,queue){
			// Prepare
			var State, pageUrl;

			// Handle Queueing
			if ( queue !== false && History.busy() ) {
				// Wait + Push to Queue
				//History.debug('History.setHash: we must wait', arguments);
				History.pushQueue({
					scope: History,
					callback: History.setHash,
					args: arguments,
					queue: queue
				});
				return false;
			}

			// Log
			//History.debug('History.setHash: called',hash);

			// Make Busy + Continue
			History.busy(true);

			// Check if hash is a state
			State = History.extractState(hash,true);
			if ( State && !History.emulated.pushState ) {
				// Hash is a state so skip the setHash
				//History.debug('History.setHash: Hash is a state so skipping the hash set with a direct pushState call',arguments);

				// PushState
				History.pushState(State.data,State.title,State.url,false);
			}
			else if ( History.getHash() !== hash ) {
				// Hash is a proper hash, so apply it

				// Handle browser bugs
				if ( History.bugs.setHash ) {
					// Fix Safari Bug https://bugs.webkit.org/show_bug.cgi?id=56249

					// Fetch the base page
					pageUrl = History.getPageUrl();

					// Safari hash apply
					History.pushState(null,null,pageUrl+'#'+hash,false);
				}
				else {
					// Normal hash apply
					document.location.hash = hash;
				}
			}

			// Chain
			return History;
		};

		/**
		 * History.escape()
		 * normalize and Escape a Hash
		 * @return {string}
		 */
		History.escapeHash = function(hash){
			// Prepare
			var result = History.normalizeHash(hash);

			// Escape hash
			result = window.encodeURIComponent(result);

			// IE6 Escape Bug
			if ( !History.bugs.hashEscape ) {
				// Restore common parts
				result = result
					.replace(/\%21/g,'!')
					.replace(/\%26/g,'&')
					.replace(/\%3D/g,'=')
					.replace(/\%3F/g,'?');
			}

			// Return result
			return result;
		};

		/**
		 * History.getHashByUrl(url)
		 * Extracts the Hash from a URL
		 * @param {string} url
		 * @return {string} url
		 */
		History.getHashByUrl = function(url){
			// Extract the hash
			var hash = String(url)
				.replace(/([^#]*)#?([^#]*)#?(.*)/, '$2')
				;

			// Unescape hash
			hash = History.unescapeHash(hash);

			// Return hash
			return hash;
		};

		/**
		 * History.setTitle(title)
		 * Applies the title to the document
		 * @param {State} newState
		 * @return {Boolean}
		 */
		History.setTitle = function(newState){
			// Prepare
			var title = newState.title,
				firstState;

			// Initial
			if ( !title ) {
				firstState = History.getStateByIndex(0);
				if ( firstState && firstState.url === newState.url ) {
					title = firstState.title||History.options.initialTitle;
				}
			}

			// Apply
			try {
				document.getElementsByTagName('title')[0].innerHTML = title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');
			}
			catch ( Exception ) { }
			document.title = title;

			// Chain
			return History;
		};


		// ====================================================================
		// Queueing

		/**
		 * History.queues
		 * The list of queues to use
		 * First In, First Out
		 */
		History.queues = [];

		/**
		 * History.busy(value)
		 * @param {boolean} value [optional]
		 * @return {boolean} busy
		 */
		History.busy = function(value){
			// Apply
			if ( typeof value !== 'undefined' ) {
				//History.debug('History.busy: changing ['+(History.busy.flag||false)+'] to ['+(value||false)+']', History.queues.length);
				History.busy.flag = value;
			}
			// Default
			else if ( typeof History.busy.flag === 'undefined' ) {
				History.busy.flag = false;
			}

			// Queue
			if ( !History.busy.flag ) {
				// Execute the next item in the queue
				clearTimeout(History.busy.timeout);
				var fireNext = function(){
					var i, queue, item;
					if ( History.busy.flag ) return;
					for ( i=History.queues.length-1; i >= 0; --i ) {
						queue = History.queues[i];
						if ( queue.length === 0 ) continue;
						item = queue.shift();
						History.fireQueueItem(item);
						History.busy.timeout = setTimeout(fireNext,History.options.busyDelay);
					}
				};
				History.busy.timeout = setTimeout(fireNext,History.options.busyDelay);
			}

			// Return
			return History.busy.flag;
		};

		/**
		 * History.busy.flag
		 */
		History.busy.flag = false;

		/**
		 * History.fireQueueItem(item)
		 * Fire a Queue Item
		 * @param {Object} item
		 * @return {Mixed} result
		 */
		History.fireQueueItem = function(item){
			return item.callback.apply(item.scope||History,item.args||[]);
		};

		/**
		 * History.pushQueue(callback,args)
		 * Add an item to the queue
		 * @param {Object} item [scope,callback,args,queue]
		 */
		History.pushQueue = function(item){
			// Prepare the queue
			History.queues[item.queue||0] = History.queues[item.queue||0]||[];

			// Add to the queue
			History.queues[item.queue||0].push(item);

			// Chain
			return History;
		};

		/**
		 * History.queue (item,queue), (func,queue), (func), (item)
		 * Either firs the item now if not busy, or adds it to the queue
		 */
		History.queue = function(item,queue){
			// Prepare
			if ( typeof item === 'function' ) {
				item = {
					callback: item
				};
			}
			if ( typeof queue !== 'undefined' ) {
				item.queue = queue;
			}

			// Handle
			if ( History.busy() ) {
				History.pushQueue(item);
			} else {
				History.fireQueueItem(item);
			}

			// Chain
			return History;
		};

		/**
		 * History.clearQueue()
		 * Clears the Queue
		 */
		History.clearQueue = function(){
			History.busy.flag = false;
			History.queues = [];
			return History;
		};


		// ====================================================================
		// IE Bug Fix

		/**
		 * History.stateChanged
		 * States whether or not the state has changed since the last double check was initialised
		 */
		History.stateChanged = false;

		/**
		 * History.doubleChecker
		 * Contains the timeout used for the double checks
		 */
		History.doubleChecker = false;

		/**
		 * History.doubleCheckComplete()
		 * Complete a double check
		 * @return {History}
		 */
		History.doubleCheckComplete = function(){
			// Update
			History.stateChanged = true;

			// Clear
			History.doubleCheckClear();

			// Chain
			return History;
		};

		/**
		 * History.doubleCheckClear()
		 * Clear a double check
		 * @return {History}
		 */
		History.doubleCheckClear = function(){
			// Clear
			if ( History.doubleChecker ) {
				clearTimeout(History.doubleChecker);
				History.doubleChecker = false;
			}

			// Chain
			return History;
		};

		/**
		 * History.doubleCheck()
		 * Create a double check
		 * @return {History}
		 */
		History.doubleCheck = function(tryAgain){
			// Reset
			History.stateChanged = false;
			History.doubleCheckClear();

			// Fix IE6,IE7 bug where calling history.back or history.forward does not actually change the hash (whereas doing it manually does)
			// Fix Safari 5 bug where sometimes the state does not change: https://bugs.webkit.org/show_bug.cgi?id=42940
			if ( History.bugs.ieDoubleCheck ) {
				// Apply Check
				History.doubleChecker = setTimeout(
					function(){
						History.doubleCheckClear();
						if ( !History.stateChanged ) {
							//History.debug('History.doubleCheck: State has not yet changed, trying again', arguments);
							// Re-Attempt
							tryAgain();
						}
						return true;
					},
					History.options.doubleCheckInterval
				);
			}

			// Chain
			return History;
		};


		// ====================================================================
		// Safari Bug Fix

		/**
		 * History.safariStatePoll()
		 * Poll the current state
		 * @return {History}
		 */
		History.safariStatePoll = function(){
			// Poll the URL

			// Get the Last State which has the new URL
			var
				urlState = History.extractState(History.getLocationHref()),
				newState;

			// Check for a difference
			if ( !History.isLastSavedState(urlState) ) {
				newState = urlState;
			}
			else {
				return;
			}

			// Check if we have a state with that url
			// If not create it
			if ( !newState ) {
				//History.debug('History.safariStatePoll: new');
				newState = History.createStateObject();
			}

			// Apply the New State
			//History.debug('History.safariStatePoll: trigger');
			History.Adapter.trigger(window,'popstate');

			// Chain
			return History;
		};


		// ====================================================================
		// State Aliases

		/**
		 * History.back(queue)
		 * Send the browser history back one item
		 * @param {Integer} queue [optional]
		 */
		History.back = function(queue){
			//History.debug('History.back: called', arguments);

			// Handle Queueing
			if ( queue !== false && History.busy() ) {
				// Wait + Push to Queue
				//History.debug('History.back: we must wait', arguments);
				History.pushQueue({
					scope: History,
					callback: History.back,
					args: arguments,
					queue: queue
				});
				return false;
			}

			// Make Busy + Continue
			History.busy(true);

			// Fix certain browser bugs that prevent the state from changing
			History.doubleCheck(function(){
				History.back(false);
			});

			// Go back
			history.go(-1);

			// End back closure
			return true;
		};

		/**
		 * History.forward(queue)
		 * Send the browser history forward one item
		 * @param {Integer} queue [optional]
		 */
		History.forward = function(queue){
			//History.debug('History.forward: called', arguments);

			// Handle Queueing
			if ( queue !== false && History.busy() ) {
				// Wait + Push to Queue
				//History.debug('History.forward: we must wait', arguments);
				History.pushQueue({
					scope: History,
					callback: History.forward,
					args: arguments,
					queue: queue
				});
				return false;
			}

			// Make Busy + Continue
			History.busy(true);

			// Fix certain browser bugs that prevent the state from changing
			History.doubleCheck(function(){
				History.forward(false);
			});

			// Go forward
			history.go(1);

			// End forward closure
			return true;
		};

		/**
		 * History.go(index,queue)
		 * Send the browser history back or forward index times
		 * @param {Integer} queue [optional]
		 */
		History.go = function(index,queue){
			//History.debug('History.go: called', arguments);

			// Prepare
			var i;

			// Handle
			if ( index > 0 ) {
				// Forward
				for ( i=1; i<=index; ++i ) {
					History.forward(queue);
				}
			}
			else if ( index < 0 ) {
				// Backward
				for ( i=-1; i>=index; --i ) {
					History.back(queue);
				}
			}
			else {
				throw new Error('History.go: History.go requires a positive or negative integer passed.');
			}

			// Chain
			return History;
		};


		// ====================================================================
		// HTML5 State Support

		// Non-Native pushState Implementation
		if ( History.emulated.pushState ) {
			/*
			 * Provide Skeleton for HTML4 Browsers
			 */

			// Prepare
			var emptyFunction = function(){};
			History.pushState = History.pushState||emptyFunction;
			History.replaceState = History.replaceState||emptyFunction;
		} // History.emulated.pushState

		// Native pushState Implementation
		else {
			/*
			 * Use native HTML5 History API Implementation
			 */

			/**
			 * History.onPopState(event,extra)
			 * Refresh the Current State
			 */
			History.onPopState = function(event,extra){
				// Prepare
				var stateId = false, newState = false, currentHash, currentState;

				// Reset the double check
				History.doubleCheckComplete();

				// Check for a Hash, and handle apporiatly
				currentHash = History.getHash();
				if ( currentHash ) {
					// Expand Hash
					currentState = History.extractState(currentHash||History.getLocationHref(),true);
					if ( currentState ) {
						// We were able to parse it, it must be a State!
						// Let's forward to replaceState
						//History.debug('History.onPopState: state anchor', currentHash, currentState);
						History.replaceState(currentState.data, currentState.title, currentState.url, false);
					}
					else {
						// Traditional Anchor
						//History.debug('History.onPopState: traditional anchor', currentHash);
						History.Adapter.trigger(window,'anchorchange');
						History.busy(false);
					}

					// We don't care for hashes
					History.expectedStateId = false;
					return false;
				}

				// Ensure
				stateId = History.Adapter.extractEventData('state',event,extra) || false;

				// Fetch State
				if ( stateId ) {
					// Vanilla: Back/forward button was used
					newState = History.getStateById(stateId);
				}
				else if ( History.expectedStateId ) {
					// Vanilla: A new state was pushed, and popstate was called manually
					newState = History.getStateById(History.expectedStateId);
				}
				else {
					// Initial State
					newState = History.extractState(History.getLocationHref());
				}

				// The State did not exist in our store
				if ( !newState ) {
					// Regenerate the State
					newState = History.createStateObject(null,null,History.getLocationHref());
				}

				// Clean
				History.expectedStateId = false;

				// Check if we are the same state
				if ( History.isLastSavedState(newState) ) {
					// There has been no change (just the page's hash has finally propagated)
					//History.debug('History.onPopState: no change', newState, History.savedStates);
					History.busy(false);
					return false;
				}

				// Store the State
				History.storeState(newState);
				History.saveState(newState);

				// Force update of the title
				History.setTitle(newState);

				// Fire Our Event
				History.Adapter.trigger(window,'statechange');
				History.busy(false);

				// Return true
				return true;
			};
			History.Adapter.bind(window,'popstate',History.onPopState);

			/**
			 * History.pushState(data,title,url)
			 * Add a new State to the history object, become it, and trigger onpopstate
			 * We have to trigger for HTML4 compatibility
			 * @param {object} data
			 * @param {string} title
			 * @param {string} url
			 * @return {true}
			 */
			History.pushState = function(data,title,url,queue){
				//History.debug('History.pushState: called', arguments);

				// Check the State
				if ( History.getHashByUrl(url) && History.emulated.pushState ) {
					throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');
				}

				// Handle Queueing
				if ( queue !== false && History.busy() ) {
					// Wait + Push to Queue
					//History.debug('History.pushState: we must wait', arguments);
					History.pushQueue({
						scope: History,
						callback: History.pushState,
						args: arguments,
						queue: queue
					});
					return false;
				}

				// Make Busy + Continue
				History.busy(true);

				// Create the newState
				var newState = History.createStateObject(data,title,url);

				// Check it
				if ( History.isLastSavedState(newState) ) {
					// Won't be a change
					History.busy(false);
				}
				else {
					// Store the newState
					History.storeState(newState);
					History.expectedStateId = newState.id;

					// Push the newState
					history.pushState(newState.id,newState.title,newState.url);

					// Fire HTML5 Event
					History.Adapter.trigger(window,'popstate');
				}

				// End pushState closure
				return true;
			};

			/**
			 * History.replaceState(data,title,url)
			 * Replace the State and trigger onpopstate
			 * We have to trigger for HTML4 compatibility
			 * @param {object} data
			 * @param {string} title
			 * @param {string} url
			 * @return {true}
			 */
			History.replaceState = function(data,title,url,queue){
				//History.debug('History.replaceState: called', arguments);

				// Check the State
				if ( History.getHashByUrl(url) && History.emulated.pushState ) {
					throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');
				}

				// Handle Queueing
				if ( queue !== false && History.busy() ) {
					// Wait + Push to Queue
					//History.debug('History.replaceState: we must wait', arguments);
					History.pushQueue({
						scope: History,
						callback: History.replaceState,
						args: arguments,
						queue: queue
					});
					return false;
				}

				// Make Busy + Continue
				History.busy(true);

				// Create the newState
				var newState = History.createStateObject(data,title,url);

				// Check it
				if ( History.isLastSavedState(newState) ) {
					// Won't be a change
					History.busy(false);
				}
				else {
					// Store the newState
					History.storeState(newState);
					History.expectedStateId = newState.id;

					// Push the newState
					history.replaceState(newState.id,newState.title,newState.url);

					// Fire HTML5 Event
					History.Adapter.trigger(window,'popstate');
				}

				// End replaceState closure
				return true;
			};

		} // !History.emulated.pushState


		// ====================================================================
		// Initialise

		/**
		 * Load the Store
		 */
		if ( sessionStorage ) {
			// Fetch
			try {
				History.store = JSON.parse(sessionStorage.getItem('History.store'))||{};
			}
			catch ( err ) {
				History.store = {};
			}

			// Normalize
			History.normalizeStore();
		}
		else {
			// Default Load
			History.store = {};
			History.normalizeStore();
		}

		/**
		 * Clear Intervals on exit to prevent memory leaks
		 */
		History.Adapter.bind(window,"unload",History.clearAllIntervals);

		/**
		 * Create the initial State
		 */
		History.saveState(History.storeState(History.extractState(History.getLocationHref(),true)));

		/**
		 * Bind for Saving Store
		 */
		if ( sessionStorage ) {
			// When the page is closed
			History.onUnload = function(){
				// Prepare
				var	currentStore, item, currentStoreString;

				// Fetch
				try {
					currentStore = JSON.parse(sessionStorage.getItem('History.store'))||{};
				}
				catch ( err ) {
					currentStore = {};
				}

				// Ensure
				currentStore.idToState = currentStore.idToState || {};
				currentStore.urlToId = currentStore.urlToId || {};
				currentStore.stateToId = currentStore.stateToId || {};

				// Sync
				for ( item in History.idToState ) {
					if ( !History.idToState.hasOwnProperty(item) ) {
						continue;
					}
					currentStore.idToState[item] = History.idToState[item];
				}
				for ( item in History.urlToId ) {
					if ( !History.urlToId.hasOwnProperty(item) ) {
						continue;
					}
					currentStore.urlToId[item] = History.urlToId[item];
				}
				for ( item in History.stateToId ) {
					if ( !History.stateToId.hasOwnProperty(item) ) {
						continue;
					}
					currentStore.stateToId[item] = History.stateToId[item];
				}

				// Update
				History.store = currentStore;
				History.normalizeStore();

				// In Safari, going into Private Browsing mode causes the
				// Session Storage object to still exist but if you try and use
				// or set any property/function of it it throws the exception
				// "QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to
				// add something to storage that exceeded the quota." infinitely
				// every second.
				currentStoreString = JSON.stringify(currentStore);
				try {
					// Store
					sessionStorage.setItem('History.store', currentStoreString);
				}
				catch (e) {
					if (e.code === DOMException.QUOTA_EXCEEDED_ERR) {
						if (sessionStorage.length) {
							// Workaround for a bug seen on iPads. Sometimes the quota exceeded error comes up and simply
							// removing/resetting the storage can work.
							sessionStorage.removeItem('History.store');
							sessionStorage.setItem('History.store', currentStoreString);
						} else {
							// Otherwise, we're probably private browsing in Safari, so we'll ignore the exception.
						}
					} else {
						throw e;
					}
				}
			};

			// For Internet Explorer
			History.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));

			// For Other Browsers
			History.Adapter.bind(window,'beforeunload',History.onUnload);
			History.Adapter.bind(window,'unload',History.onUnload);

			// Both are enabled for consistency
		}

		// Non-Native pushState Implementation
		if ( !History.emulated.pushState ) {
			// Be aware, the following is only for native pushState implementations
			// If you are wanting to include something for all browsers
			// Then include it above this if block

			/**
			 * Setup Safari Fix
			 */
			if ( History.bugs.safariPoll ) {
				History.intervalList.push(setInterval(History.safariStatePoll, History.options.safariPollInterval));
			}

			/**
			 * Ensure Cross Browser Compatibility
			 */
			if ( navigator.vendor === 'Apple Computer, Inc.' || (navigator.appCodeName||'') === 'Mozilla' ) {
				/**
				 * Fix Safari HashChange Issue
				 */

				// Setup Alias
				History.Adapter.bind(window,'hashchange',function(){
					History.Adapter.trigger(window,'popstate');
				});

				// Initialise Alias
				if ( History.getHash() ) {
					History.Adapter.onDomLoad(function(){
						History.Adapter.trigger(window,'hashchange');
					});
				}
			}

		} // !History.emulated.pushState


	}; // History.initCore

	// Try to Initialise History
	if (!History.options || !History.options.delayInit) {
		History.init();
	}

})(window);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:history-xhr', location = '/scripts/history-xhr.js' */
(function (window, undefined) {
    const History = window.History,
        $ = window.jQuery,
        document = window.document;

    if (!History.enabled) {
        return false;
    }

    $(function () {
        var $tabsContainer = $('.aui-tabs.aui-tabs-disabled,.aui-navgroup-horizontal'),
            isHorizontalNav = $tabsContainer.hasClass('aui-navgroup-horizontal'),
            $content = (
                isHorizontalNav ?
                $tabsContainer.nextAll('.aui-page-panel:first').find('.aui-page-panel-content').filter(':first') :
                $tabsContainer.children('.tabs-pane').filter(':first')
            ),
            $links = (
                isHorizontalNav ?
                $tabsContainer.find('.aui-navgroup-primary:first .aui-nav') :
                $tabsContainer.children('.tabs-menu')
            ),
            activeClass = (isHorizontalNav ? 'aui-nav-selected' : 'active-tab'),
            $planNavigator = $('#plan-navigator'),
            $plan,
            $jobs,
            planKey,
            activeJobKey,
            request,
            contextPath = AJS.contextPath() || '',
            listenForPotentialTabLinksInContent = function () {
                const $tab = $(this);

                $content.delegate('a[href="' + $tab.attr('href') + '"]', 'click', function (e) {
                    // Continue as normal for cmd clicks etc
                    if (e.which === 2 || e.metaKey) { return true; }

                    e.preventDefault();
                    $tab.click();
                });
            };

        // If not a tabbed page don't do any history manipulation
        if (!$tabsContainer.length || $tabsContainer.hasClass('history-xhr-disabled')) {
            return false;
        }

        // Get active tab on page load and store that data against this history entry
        const tabId = $links.find('.' + activeClass).children('a').attr('id');
        if(tabId !== undefined) { //sometimes at old browser links are not yet identified
            History.replaceState({
                tabId: BAMBOO.escapeIdToJQuerySelector(tabId)
            }, document.title, null);
        }

        if ($planNavigator.length) {
            $plan = $planNavigator.find('> ol');
            planKey = $plan.data('planKey');
            $jobs = $planNavigator.find('> ol ul > li');
            activeJobKey = $jobs.filter('.active').data('jobKey');
        }

        $links.find('a:not(.history-xhr-disabled)').click(function (e) {
            const $this = $(this),
                url = $this.attr('href'),
                title = $this.attr('title') || null;

            // Continue as normal for cmd clicks etc
            if (e.which === 2 || e.metaKey) { return true; }

            History.pushState({ tabId: BAMBOO.escapeIdToJQuerySelector($this.attr('id')) }, title, url);
            e.preventDefault();
        }).each(listenForPotentialTabLinksInContent);

        $(window).bind('statechange', function () {
            const State = History.getState(),
                url = State.url,
                tabId = State.data.tabId,
                $tab = $('#' + tabId);

            if (request && request.readyState < 4) {
                request.abort();
            }

            $tabsContainer.addClass('loading');
            $tab.parent().addClass(activeClass).siblings().removeClass(activeClass);

            $(document).trigger('statechange.historyxhr', [ url ]);

            if ($planNavigator.length) {
                // Update urls in plan navigator
                if (activeJobKey) {
                    // Update job urls
                    $jobs.each(function () {
                        const $li = $(this),
                            $a = $li.children('a').last(),
                            jobKey = $li.data('jobKey');

                        $a.attr('href', (jobKey === activeJobKey ? url : url.replace(activeJobKey, jobKey)));
                    });
                } else {
                    // Update plan url
                    // $plan.children('a').attr('href', url);
                }
            }
            
            request = $.ajax({
                cache: false,
                url: url,
                beforeSend: function (jqXHR) {
                    jqXHR.setRequestHeader('X-History-XHR', true);
                },
                success: function (data, textStatus, jqXHR) {
                    var title, planURL, jobURL;

                    // If no data is returned, or an entire web page, go directly to that page for normal error handling
                    if (!$.trim(data) || /<html/i.test(data)) {
                        return window.location = url;
                    }

                    $content.html(data);

                    title = jqXHR.getResponseHeader('X-Page-Title') || $.trim($content.find('title,.document-title').remove().filter(':first').text());
                    if (title) {
                        document.title = title;
                        try {
                            document.getElementsByTagName('title')[0].innerHTML = document.title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');
                        }
                        catch ( Exception ) { }
                    }

                    planURL = jqXHR.getResponseHeader('X-Plan-URL');
                    jobURL = jqXHR.getResponseHeader('X-Job-URL');
                    if ($planNavigator.length) {
                        if (activeJobKey && planURL) {
                            // Update plan url (url is returned with current job key, replace it with the plan key)
                            // $plan.children('a').attr('href', contextPath + planURL.replace(activeJobKey, planKey));
                        } else if (!activeJobKey && jobURL) {
                            // Update job urls (url is returned with plan key, replace it with the appropriate job key)
                            $jobs.each(function () {
                                const $li = $(this),
                                    $a = $li.children('a').last(),
                                    jobKey = $li.data('jobKey');

                                $a.attr('href', contextPath + jobURL.replace(planKey, jobKey));
                            });
                        }
                    }

                    $tabsContainer.removeClass('loading');
                },
                error: function (jqXHR, textStatus) {
                    if (textStatus !== 'abort') {
                        return window.location = url;
                    }
                }
            });
        });
    });
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:serverstate', location = '/scripts/serverstate.js' */
BAMBOO.ADMIN = (BAMBOO.ADMIN || {});
BAMBOO.ADMIN.SERVERSTATE = {};

BAMBOO.ADMIN.SERVER_STATUS_UPDATED_EVENT = "serverStatusChangedEvent";
BAMBOO.ADMIN.SERVER_STATUS_POLLING_EVENT = "serverStatusPollingEvent";
BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT = "serverStatusActionEvent";

BAMBOO.ADMIN.STATUS_RUNNING = "RUNNING";
BAMBOO.ADMIN.STATUS_PAUSED = "PAUSED";
BAMBOO.ADMIN.STATUS_PAUSING = "PAUSING";
BAMBOO.ADMIN.STATUS_POLLING = "POLLING";
BAMBOO.ADMIN.STATUS_ERROR = "ERROR";
BAMBOO.ADMIN.STATUS_PREPARING_FOR_RESTART = "PREPARING_FOR_RESTART";
BAMBOO.ADMIN.STATUS_READY_FOR_RESTART = "READY_FOR_RESTART";

BAMBOO.ADMIN.ACTION_PAUSE = "ACTION_PAUSE";
BAMBOO.ADMIN.ACTION_RESUME = "ACTION_RESUME";

BAMBOO.ADMIN.SERVERSTATE.serverStateUpdater = (function ($) {
    var defaults = {
            statusUrl: AJS.contextPath() + "/rest/api/latest/server",
            pauseUrl: AJS.contextPath() + "/rest/api/latest/server/pause",
            resumeUrl: AJS.contextPath() + "/rest/api/latest/server/resume"
        },
        options,
        serverState,
        $statusElement,
        doPoll = true,
        doRequest = function (type, url) {
            statusPolling();
            $.ajax({
                type: type,
                url: url,
                cache: false,
                dataType: "json",
                success: function (json) {
                    if (json && json.state) {
                        updateStatus(json, null);
                    } else {
                        updateStatus({state: BAMBOO.ADMIN.STATUS_ERROR}, null);
                    }
                },
                error: function (request, textStatus, errorThrown) {
                    updateStatus({state: BAMBOO.ADMIN.STATUS_ERROR}, textStatus + ": " + errorThrown);
                }
            });
        },
        update = function () {
            doRequest("GET", options.statusUrl);
        },
        statusPolling = function () {
            $statusElement.attr("data-server-state", BAMBOO.ADMIN.STATUS_POLLING);
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_POLLING_EVENT);
        },
        updateStatus = function (newState, additionalInfo) {
            var oldState = serverState;
            serverState = newState;
            $statusElement.attr("data-server-state", newState.state);
            if (additionalInfo) {
                $statusElement.attr("data-additional-info", additionalInfo);
            } else {
                $statusElement.removeAttr("data-additional-info");
            }
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_UPDATED_EVENT, [oldState, serverState, additionalInfo]);
        },
        pollInterval = function () {
            if (serverState && (serverState.state == BAMBOO.ADMIN.STATUS_RUNNING || serverState.state == BAMBOO.ADMIN.STATUS_PAUSED || serverState.state == BAMBOO.ADMIN.STATUS_ERROR)) {
                return 30000;
            } else {
                return 5000;
            }
        },
        poll = function (interval) {
            setTimeout(function () {
                if (doPoll) {
                    update();
                    poll(pollInterval());
                }
            }, interval);
        };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);
            $(function ($){
                $statusElement = $("<input id='bamboo-server-status' type='hidden'>").appendTo("body");
                if (doPoll) {
                    update();
                    poll(pollInterval());
                }
            });
        },

        pause: function () {
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT, BAMBOO.ADMIN.ACTION_PAUSE);
            doRequest("POST", options.pauseUrl);
            poll(1000);
        },

        resume: function () {
            $statusElement.trigger(BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT, BAMBOO.ADMIN.ACTION_RESUME);
            doRequest("POST", options.resumeUrl);
        },

        onServerStatusPolling: function (callback) {
            $statusElement.bind(BAMBOO.ADMIN.SERVER_STATUS_POLLING_EVENT, callback);
        },

        onServerStatusUpdated: function (callback) {
            $statusElement.bind(BAMBOO.ADMIN.SERVER_STATUS_UPDATED_EVENT, callback);
        },

        onServerStatusAction: function (callback) {
            $statusElement.bind(BAMBOO.ADMIN.SERVER_STATUS_ACTION_EVENT, callback);
        },

        stopPolling: function () {
            doPoll = false;
        }
    }
})(AJS.$);

BAMBOO.ADMIN.SERVERSTATE.serverState = (function ($) {
    var defaults = {
            control: null,
            statusInfo: null,
            button: null,
            pausedMessage: "The server is \u003cstrong\u003epaused\u003c/strong\u003e. No builds will be run or queued.",
            pausedButtonLabel: "Resume server",
            pausingMessage: "The server is \u003cstrong\u003epausing\u003c/strong\u003e. No builds will be queued. All currently building plans will finish but requests for new builds is not allowed.",
            pausingButtonLabel: "Cancel pause",
            reindexInProgressMessage: "The server is being reindexed. Not all data might be available at the moment.",
            preparingForRestartMessage: "The server is \u003cstrong\u003epreparing for restart\u003c/strong\u003e. No builds will be queued.",
            readyForRestartMessage: "The server is \u003cstrong\u003eready for restart\u003c/strong\u003e. No builds will be queued.",
            serverRunningCallback: null,
            pollError: "Server could not be contacted and its state is unknown. Please reload the page",
            reloadPage: "Reload"
        },
        options,
        lifecycleState,
        $control,
        $button,
        $statusInfo,
        updateStatus = function (event, oldState, newState) {
            if (lifecycleState) {
                $control.removeClass("server-status-" + lifecycleState.toLowerCase());
            }
            lifecycleState = newState.state;
            $control.addClass("server-status-" + lifecycleState.toLowerCase());

            var oldLifecycleState = oldState ? oldState.state : undefined;

            if (lifecycleState == BAMBOO.ADMIN.STATUS_RUNNING) {
                if (oldLifecycleState != BAMBOO.ADMIN.STATUS_RUNNING && options.serverRunningCallback) {
                    options.serverRunningCallback();
                }
                if (newState.reindexInProgress) {
                    $statusInfo.html(options.reindexInProgressMessage);
                    $button.hide();
                    $control.show();
                } else {
                    $control.hide();
                }
                return;
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_ERROR) {
                if (oldLifecycleState == BAMBOO.ADMIN.STATUS_PAUSED || oldLifecycleState == BAMBOO.ADMIN.STATUS_PAUSING) {
                    if ($button && $button.length) {
                        $button.text(options.reloadPage).click(function () {
                            window.location.reload();
                        });
                    }
                    $statusInfo.html(options.pollError);
                    $control.show();
                } else if (oldLifecycleState != BAMBOO.ADMIN.STATUS_ERROR) {
                    $control.hide();
                }
                return;
            } else {
                $control.show();
            }

            if (lifecycleState == BAMBOO.ADMIN.STATUS_PAUSED || lifecycleState == BAMBOO.ADMIN.STATUS_PAUSING) {
                if ($button && $button.length) {
                    $button.show();
                }
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_PREPARING_FOR_RESTART || lifecycleState == BAMBOO.ADMIN.STATUS_READY_FOR_RESTART) {
                if ($button && $button.length) {
                    $button.hide();
                }
            }

            if (lifecycleState == BAMBOO.ADMIN.STATUS_PAUSING) {
                if ($button && $button.length) {
                    $button.text(options.pausingButtonLabel);
                }
                $statusInfo.html(options.pausingMessage);
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_PAUSED) {
                if ($button && $button.length) {
                    $button.text(options.pausedButtonLabel);
                }
                $statusInfo.html(options.pausedMessage);
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_PREPARING_FOR_RESTART) {
                $statusInfo.html(options.preparingForRestartMessage);
            } else if (lifecycleState == BAMBOO.ADMIN.STATUS_READY_FOR_RESTART) {
                $statusInfo.html(options.readyForRestartMessage);
            }
        };

    return {
        init: function (opts) {
            options = $.extend(true, defaults, opts);

            $(function () {
                $control = $(options.control);
                $statusInfo = $(options.statusInfo, $control);
                $button = $(options.button, $control);

                if ($button && $button.length) {
                    $button.click(BAMBOO.ADMIN.SERVERSTATE.serverStateUpdater.resume);
                }
                BAMBOO.ADMIN.SERVERSTATE.serverStateUpdater.onServerStatusUpdated(updateStatus);
            });
        }
    }
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:xsrf', location = '/scripts/xsrf.js' */
AJS.$.ajaxPrefilter(
        function(options, originalOptions, jqXHR) {
            function isMutativeHttpMethod(method) {
                return !(/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
            }
            if (isMutativeHttpMethod(options.type)) {
                options.crossDomain = false;
                jqXHR.setRequestHeader("X-Atlassian-Token", "no-check");
            }
        });

BAMBOO.XsrfUtils = (function ($) {
    function getXsrfTokenFromCookie() {
        return $.cookie('atl.xsrf.token');
    }

    function addXsrfToken($form) {
        $form.append($("<input>", {type: "hidden", name: "atl_token", value: getXsrfTokenFromCookie()}));
    }

    function postOnLinkClick(event) {
        if (event.isDefaultPrevented()) {
            return;
        }

        var $form = $("<form/>", {method: "post", action: this.href});
        addXsrfToken($form);

        $("body").append($form);

        event.preventDefault();
        $form.submit();
    }

    function isOriginCurrentLocation(url) {
        function isUrlEqual(url1, url2) {
            return (url1 == url2 || url1.slice(0, url2.length + 1) == url2 + '/');
        }

        var
                protocol = document.location.protocol,
                hostPort = document.location.host,
                ssHostPort = '//' + hostPort,
                protocolSsHostPort = protocol + ssHostPort;

        if (!url) {
            return false;
        }

        return isUrlEqual(url, protocolSsHostPort) ||
                isUrlEqual(url, ssHostPort) ||
                !(/^(\/\/|http:|https:).*/.test(url)); //not starting with: // or http: or https:
    }

    function addXsrfTokenToFormIfSameOrigin($form) {
        if (isOriginCurrentLocation($form.attr('action'))) {
            addXsrfToken($form);
        }
    }

    function addXsrfTokenProperty(url, object) {
        if (isOriginCurrentLocation(url)) {
            object.atl_token = getXsrfTokenFromCookie();
        }
        return object;
    }

    function addXsrfTokenToForms() {
        function addXsrfTokenSource($form) {
            $form.append($("<input>", {type: "hidden", name: "atl_token_source", value: 'js'})); //this will cause a warning in DEV mode
        }

        $("form").each(function () {
            var
                    $form = $(this),
                    hasNoAtlToken = !$form.find("input[name='atl_token']").length;

            if (hasNoAtlToken) {
                addXsrfTokenToFormIfSameOrigin($form);
                addXsrfTokenSource($form);
            }
        });
    }

    function getAtlTokenQueryParam(url) {
        if (isOriginCurrentLocation(url)) {
            return "atl_token=" + getXsrfTokenFromCookie();
        }
    }

    function registerLinkClickHandler() {
        $(document).on('click', 'a.mutative:not(.requireConfirmation)', postOnLinkClick);
        $(document).on('clickMutativeLink', 'a', postOnLinkClick);
        $(document).on('click', 'a#log-out', postOnLinkClick);
    }

    return {
        registerLinkClickHandler: registerLinkClickHandler,
        addXsrfTokenProperty: addXsrfTokenProperty,
        addXsrfTokenToForm: addXsrfTokenToFormIfSameOrigin,
        addXsrfTokenToForms: addXsrfTokenToForms,
        getAtlTokenQueryParam: getAtlTokenQueryParam
    }
})(AJS.$);


AJS.$(function() {
    BAMBOO.XsrfUtils.addXsrfTokenToForms();
    BAMBOO.XsrfUtils.registerLinkClickHandler();
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:jira-issue-list', location = '/feature/jira-issue-list/jira-issue-list.soy' */
// This file was automatically generated from jira-issue-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.jiraIssueList.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.jiraIssueList == 'undefined') { bamboo.feature.jiraIssueList = {}; }


bamboo.feature.jiraIssueList.jiraIssueList = function(opt_data, opt_ignored) {
  var output = '<table class="aui jira-issues' + ((opt_data.loading) ? ' loading' : '') + '"><thead><tr><th colspan="2" class="issue">Issue</th><th class="description">Description</th>' + ((! opt_data.hideStatus) ? '<th class="status">Status</th>' : '') + '</tr></thead>' + ((opt_data.issuesCount > opt_data.maxIssues) ? '<tfoot><tr><td colspan="' + soy.$$escapeHtml(opt_data.hideStatus ? 3 : 4) + '"><a href="' + soy.$$escapeHtml(opt_data.jiraTabUrl) + '">' + soy.$$escapeHtml(opt_data.issuesCount - opt_data.maxIssues + ' more issue' + (opt_data.issuesCount - opt_data.maxIssues > 1 ? 's' : '')) + '&hellip;</a></td></tr></tfoot>' : '') + '<tbody>';
  var issueList22 = opt_data.issues;
  var issueListLen22 = issueList22.length;
  for (var issueIndex22 = 0; issueIndex22 < issueListLen22; issueIndex22++) {
    var issueData22 = issueList22[issueIndex22];
    output += (issueData22.url && issueData22.url.href && issueData22.key && issueData22.summary) ? bamboo.feature.jiraIssueList.jiraIssueListItem({key: issueData22.key, url: issueData22.url, summary: issueData22.summary, issueType: issueData22.issueType ? issueData22.issueType : opt_data.defaultIssueType, iconUrl: issueData22.iconUrl ? issueData22.iconUrl : opt_data.defaultIssueIconUrl, status: issueData22.status, statusClass: issueData22.statusClass, hideStatus: opt_data.hideStatus}) : bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection({key: issueData22.issueKey ? issueData22.issueKey : issueData22.key, hideStatus: opt_data.hideStatus});
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueList.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueList';
}


bamboo.feature.jiraIssueList.jiraIssueListItem = function(opt_data, opt_ignored) {
  return '<tr data-issue-key="' + opt_data.key + '"><td class="type"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '" title="' + soy.$$escapeHtml("View this issue") + '"><img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issueType) + '" /></a></td><td class="key"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '">' + opt_data.key + '</a></td><td class="description">' + soy.$$escapeHtml(opt_data.summary) + '</td>' + ((! opt_data.hideStatus) ? '<td class="status"><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItem.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItem';
}


bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection = function(opt_data, opt_ignored) {
  return '<tr><td class="type">' + widget.icons.icon({type: 'jiraissue-unknown', text: 'Unknown Issue Type', showTitle: true}) + '</td><td class="key">' + soy.$$escapeHtml(opt_data.key) + '</td><td' + ((! opt_data.hideStatus) ? ' colspan="2"' : '') + ' class="details-error"><span>' + soy.$$escapeHtml("Could not obtain issue details from Jira") + '</span></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection';
}


bamboo.feature.jiraIssueList.singleIssue = function(opt_data, opt_ignored) {
  return '<span class="jira-issue"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '><a href="' + ((opt_data.url.href) ? soy.$$escapeHtml(opt_data.url.href) : soy.$$escapeHtml(opt_data.url)) + '" title="' + soy.$$escapeHtml("View this issue") + ' (' + soy.$$escapeHtml(opt_data.issueType) + ')" style="background-image: url(' + soy.$$escapeHtml(opt_data.iconUrl) + ');">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="description">' + soy.$$escapeHtml(opt_data.summary) + '</span><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssue.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssue';
}


bamboo.feature.jiraIssueList.singleIssueLoading = function(opt_data, opt_ignored) {
  return '<span class="single-issue-loading"><a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueLoading.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueLoading';
}


bamboo.feature.jiraIssueList.singleIssueOAuth = function(opt_data, opt_ignored) {
  return '' + bamboo.feature.jiraIssueList.singleIssueRetrievalError({key: opt_data.key, keyLink: opt_data.keyLink, errorDetails: '' + bamboo.feature.jiraIssueList.linkedIssueOAuth({authenticationRedirectUrl: opt_data.authenticationRedirectUrl, authenticationInstanceName: opt_data.authenticationInstanceName, reason: 'to see issue details'})});
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueOAuth';
}


bamboo.feature.jiraIssueList.singleIssueRetrievalError = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="single-issue-retrieval-error"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '>' + ((opt_data.key) ? '<a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a>' : '') + '<span class="error-message' + ((! opt_data.errorDetails) ? ' unspecified' : '') + '">' + ((opt_data.errorDetails) ? soy.$$filterNoAutoescape(opt_data.errorDetails) : soy.$$escapeHtml("Could not obtain issue details from Jira")) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueRetrievalError.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueRetrievalError';
}


bamboo.feature.jiraIssueList.linkedIssueOAuth = function(opt_data, opt_ignored) {
  return '<a class="oauth-init" href="' + soy.$$escapeHtml(opt_data.authenticationRedirectUrl) + '">Authenticate</a> ' + ((opt_data.authenticationInstanceName) ? ' with ' + soy.$$escapeHtml(opt_data.authenticationInstanceName) : '') + ' ' + soy.$$escapeHtml(opt_data.reason);
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.linkedIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.linkedIssueOAuth';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete-controls', location = '/widget/autocomplete-controls/aui/progressive-data-set.js' */
AJS.ProgressiveDataSet = Backbone.Collection.extend({
    initialize: function(models, options) {
        options || (options = {});
        if (options.matcher) this.matcher = options.matcher;
        if (options.model) this.model = options.model; // Fixed in backbone 0.9.2
        this._idAttribute = (new this.model()).idAttribute;
        this._maxResults = options.maxResults || 5;
        this._queryData = options.queryData || {};
        this._queryParamKey = options.queryParamKey || "q";
        this._queryEndpoint = options.queryEndpoint || "";
        this._allowEmptyQuery = (typeof options.allowEmptyQuery != 'undefined' ? options.allowEmptyQuery : false);
        this._matchAnyOnEmptyQuery = (typeof options.matchAnyOnEmptyQuery != 'undefined' ? options.matchAnyOnEmptyQuery : true);
        this.value = null;
        this.queryCache = {};
        this.activeQueryCount = 0;
        _.bindAll(this, 'query', 'respond');
    },

    url: function() {
        return this._queryEndpoint;
    },

    query: function(query) {
        var remote, results;

        this.value = query;
        results = this.getFilteredResults(query);
        this.respond(query, results);

        if (!this._queryEndpoint ||
            (query && (this.hasQueryCache(query) || !this.shouldGetMoreResults(results))) ||
            (!query && !(this._allowEmptyQuery && this.shouldGetMoreResults(results)))
            ) {
            return;
        }

        remote = this.fetch(query);

        this.activeQueryCount++;
        this.trigger('activity', { activity: true });
        remote.always(_.bind(function() {
            this.activeQueryCount--;
            this.trigger('activity', { activity: !!this.activeQueryCount });
        }, this));

        remote.done(_.bind(function(resp, succ, xhr) {
            this.addQueryCache(query, resp, xhr);
        }, this));
        remote.done(_.bind(function() {
            query = this.value;
            results = this.getFilteredResults(query);
            this.respond(query, results);
        }, this));
    },

    getQueryData: function(query) {
        var params = _.isFunction(this._queryData) ? this._queryData(query) : this._queryData;
        var data = _.extend({}, params);
        data[this._queryParamKey] = query;
        return data;
    },

    fetch: function(query) {
        var data = this.getQueryData(query);
        // {add: true} for Backbone <= 0.9.2
        // {update: true, remove: false} for Backbone >= 0.9.9
        var params = { add : true, update : true, remove : false, data : data };
        var remote = Backbone.Collection.prototype.fetch.call(this, params);
        return remote;
    },

    respond: function(query, results) {
        this.trigger('respond', {
            query: query,
            results: results
        });
        return results;
    },

    matcher: function(item, query) { },

    getFilteredResults: function(query) {
        var results = [];
        if (!query && !this._matchAnyOnEmptyQuery) return results;
        results = this.filter(function(item) {
            return (true == this.matcher(item, query) || !query && this._matchAnyOnEmptyQuery);
        }, this);
        if (this._maxResults) {
            results = _.first(results, this._maxResults);
        }
        return results;
    },

    addQueryCache: function(query, response, xhr) {
        var cache = this.queryCache;
        var results = this.parse(response, xhr);
        cache[query] = _.pluck(results, this._idAttribute);
    },

    hasQueryCache: function(query) {
        return this.queryCache.hasOwnProperty(query);
    },

    findQueryCache: function(query) {
        return this.queryCache[query];
    },

    shouldGetMoreResults: function(results) {
        return results.length < this._maxResults;
    },

    setMaxResults: function(number) {
        this._maxResults = number;
        this.value && this.respond(this.value, this.getFilteredResults(this.value));
    }
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete-controls', location = '/widget/autocomplete-controls/aui/query-input.js' */
AJS.QueryInput = Backbone.View.extend({
    initialize: function(options) {
        _.bindAll(this, 'changed', 'val');
        this._lastValue = this.val();
        this.$el.bind('keyup focus', this.changed);
    },
    val: function () {
        if (arguments.length) { this._lastValue = arguments[0]; } // difference to AUI
        return this.$el.val.apply(this.$el, arguments);
    },
    changed: function() {
        if (this._lastValue != this.val()) {
            this.trigger('change', this.val());
            this._lastValue = this.val();
        }
    }
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete-controls', location = '/widget/autocomplete-controls/aui/query-result.js' */
AJS.ResultSet = Backbone.Model.extend({
    initialize: function(options) {
        this.set('active', null, {silent: true});
        this.collection = new Backbone.Collection();
        this.collection.bind('reset', this.setActive, this);
        this.source = options.source;
        this.source.bind('respond', this.process, this);
    },

    url: false,

    process: function(response) {
        this.set('query', response.query);
        this.collection.reset(response.results);
        this.set('length', response.results.length);
        this.trigger('update', this);
    },

    setActive: function() {
        var id = (arguments[0] instanceof Backbone.Collection) ? false : arguments[0];
        var model = (id) ? this.collection.get(id) : this.collection.first();
        this.set('active', model || null);
        return this.get('active');
    },

    next: function() {
        var current = this.collection.indexOf(this.get('active'));
        var i = (current + 1) % this.get('length');
        var next = this.collection.at(i);
        return this.setActive(next && next.id);
    },

    prev: function() {
        var current = this.collection.indexOf(this.get('active'));
        var i = ((current === 0) ? this.get('length') : current) - 1;
        var prev = this.collection.at(i);
        return this.setActive(prev && prev.id);
    },

    each: function() {
        return this.collection.each.apply(this.collection, arguments);
    }
});

AJS.ResultsList = Backbone.View.extend({
    events: {
        "click [data-id]": "setSelection"
    },

    initialize: function (options) {
        if (!this.model) {
            this.model = new AJS.ResultSet({ source: options.source });
        }
        if (!(this.model instanceof AJS.ResultSet)) {
            throw new Error('model must be set to a ResultSet');
        }
        this.model.bind('update', this.process, this);

        this.render = _.wrap(this.render, function(func) {
            this.trigger('rendering');
            func.apply(this, arguments);
            this.trigger('rendered');
        });
    },

    process: function() {
        if (!this._shouldShow(this.model.get('query'))) return;
        this.show();
    },

    render: function() {
        var ul, listItems = [];
        this.model.each(function(model) {
            var li = Backbone.$('<li/>').attr('data-id', model.id).html(this.renderItem(model));
            listItems.push(li);
        }, this);
        ul = Backbone.$('<ul/>').html(listItems);
        this.$el.html(ul);
        return this;
    },

    renderItem: function() {
        return;
    },

    setSelection: function(event) {
        var id = Backbone.$(event.target).closest('li[data-id]').data("id");
        var selected = this.model.setActive(id);
        this.trigger('selected', selected);
    },

    show: function() {
        this.lastQuery = this.model.get('query');
        this._hiddenQuery = null;
        this.render();
        this.$el.show();
        this.trigger('shown');
    },

    hide: function() {
        this.$el.hide();
        this._hiddenQuery = this.lastQuery;
        this.trigger('hidden');
    },

    size: function() {
        return this.model.get('length');
    },

    _shouldShow: function(query) {
        return query === '' || !(this._hiddenQuery && this._hiddenQuery === query);
    }

});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/single-select.js' */
define('widget/single-select', [
    'jquery',
    'underscore',
    'backbone'
], function(
    $,
    _,
    Backbone
) {

    'use strict';

    var SingleSelectResultView = AJS.ResultsList.extend({
        events: function() {
            // Required because Backbone doesn't easily support
            // adding event to the event object when extending a View, it just replaces them
            return _.extend({}, AJS.ResultsList.prototype.events, {
                'hover [data-id]': 'setActive',
                mouseenter: 'setContainerActive',
                mouseleave: 'setContainerInactive'
            });
        },
        process: function() {
            if (!this.size() && !this.model.get('query')) {
                this.hide();
            } else {
                this.show();
            }
        },
        render: function() {
            var $ul = jQuery('<ul/>');
            if (this.size()) {
                this.model.each(function(model) {
                    var $li = jQuery('<li/>', {
                        'data-id': model.id,
                        html: this.renderItem(model)
                    });
                    $li.attr('title', $li.text());
                    $ul.append($li);
                }, this);
            } else {
                jQuery('<li/>', {
                    'class': 'autocomplete-nomatch',
                    text: "No matches"
                }).appendTo($ul);
            }
            this.$el.html($ul);
            return this;
        },
        setActive: function(event) {
            var id = jQuery(event.target).closest('li[data-id]').data('id');
            this.model.setActive(id);
        },
        isContainerActive: function() {
            return !!this._containerActive;
        },
        setContainerActive: function() {
            this._containerActive = true;
        },
        setContainerInactive: function() {
            this._containerActive = false;
        }
    });

    var SingleSelectInputDropdown = Backbone.View.extend({
        initialize: function() {
            this.render();
        },
        _loadingClass: 'loading',
        tagName: 'span',
        className: 'icon bamboo-single-select-icon drop-menu',
        events: {
            mouseenter: 'setActive',
            mouseleave: 'setInactive'
        },
        render: function() {
            this.$el.html('<span>More</span>');
            return this;
        },
        isActive: function() {
            return !!this._active;
        },
        setActive: function() {
            this._active = true;
        },
        setInactive: function() {
            this._active = false;
        },
        setLoading: function(isLoading) {
            this.$el.toggleClass(this._loadingClass, isLoading);
        }
    });

    var SingleSelectField = Backbone.View.extend({
        initialize: function(options) {
            this.$original = options.$original;
            this.dropMenu = new SingleSelectInputDropdown();
            this.$placeholder = jQuery('<input type="text" autocomplete="off" class="bamboo-single-select-field text" />');
            this.render();
        },
        _hasIconClass: 'bamboo-single-select-has-entity-icon',
        render: function() {
            this.$el.removeClass('text'); // remove AUI field class names
            this.dropMenu.$el.appendTo(this.$el);
            this.$placeholder
                .attr('placeholder', this.$original.attr('placeholder') || '')
                .val(this.$original.attr('data-field-text') || this.$original.val())
                .prependTo(this.$el);
            this.setIcon(this.$original.attr('data-icon'));
            jQuery('label').filter('[for="' + this.$original.attr('id') + '"]').click(_.bind(function() {
                this.$placeholder.focus();
            }, this));

            return this;
        },
        addDropMenuEvents: function(events) {
            this.dropMenu.delegateEvents(_.extend(SingleSelectInputDropdown.prototype.events, events));
        },
        indicateActivity: function(ds) {
            this.dropMenu.setLoading(ds.activity);
        },
        setIcon: function(iconUrl) {
            this.$icon = this.$icon || jQuery('<div />', { 'class': 'bamboo-single-select-entity-icon' });
            if (iconUrl) {
                this.$icon.css('background-image', 'url(' + iconUrl + ')').appendTo(this.$el);
                this.$el.addClass(this._hasIconClass);
            } else {
                this.$icon.detach();
                this.$el.removeClass(this._hasIconClass);
            }
        }
    });

    var SingleSelect = Backbone.View.extend({
        initialize: function(options) {
            this._chosen = options.chosen || !!this.$el.data('chosen');
            this._activeClass = options.activeClass || 'active';
            this.datasource = new AJS.ProgressiveDataSet(options.bootstrap || [], {
                queryEndpoint: options.queryEndpoint,
                queryParamKey: options.queryParamKey,
                maxResults: options.maxResults,
                allowEmptyQuery: (typeof options.allowEmptyQuery != 'undefined' ? options.allowEmptyQuery : true),
                matchAnyOnEmptyQuery: options.matchAnyOnEmptyQuery,
                queryData: options.queryData
            });
            this.datasource.matcher = options.matcher;
            this.datasource.parse = options.parser;

            this.field = new SingleSelectField({
                className: 'bamboo-single-select ' + this.$el.attr('class'),
                $original: this.$el
            });

            this.queryInput = new AJS.QueryInput({ el: this.field.$placeholder });
            this.queryInput
                .on('change', this.datasource.query)
                .on('change', this.handleInputChange, this)
                .delegateEvents(_.extend(AJS.QueryInput.prototype.events || {}, {
                    keydown: _.bind(this.handleInputKeydown, this),
                    blur: _.bind(this.handleInputBlur, this),
                    focus: _.bind(this.handleInputFocus, this),
                    click: _.bind(this.requestMatches, this)
                }));

            var singleSelect = this;

            var ResultView = SingleSelectResultView.extend({
                renderItem: function(model) {
                    return options.resultItemTemplate(model.attributes);
                },
                process: function() {
                    if (!singleSelect.disableRendering)
                    {
                        SingleSelectResultView.prototype.process.call(this);
                    }
                    singleSelect.disableRendering = false;
                }
            });

            this.field.addDropMenuEvents({
                click: _.bind(function() {
                    this.queryInput.$el.focus();
                    if (this.queryResult.$el.is(':visible')) {
                        this.queryResult.hide();
                    } else {
                        this.requestMatches();
                    }
                }, this)
            });

            this.datasource.on('activity', this.field.indicateActivity, this.field);

            this.queryResult = new ResultView({ source: this.datasource });
            this.queryResult
                .on('selected', this.setValue, this)
                .on('rendered', this.highlightActive, this)
                .on('shown', this.indicateActive, this)
                .on('hidden', this.indicateInactive, this)
                .model.on('change:active', this.highlightActive, this);

            this.render();
        },
        render: function() {
            this.field.$el.insertBefore(this.$el.hide());
            this.queryResult.hide();
            this.queryResult.$el.addClass('autocomplete').appendTo(document.body);

            return this;
        },
        highlightActive: function() {
            var active = this.queryResult.model.get('active');
            var id = active && active.id;
            this.queryResult.$('li[data-id]').filter(function(i, li) {
                var $li = jQuery(li);
                var method = (id == $li.attr('data-id')) ? 'addClass' : 'removeClass';
                $li[method]('active');
            });
        },
        reset: function() {
            this.datasource.reset();
            this.setValue(null);
            this.trigger('reset');
        },
        setValue: function(model) {
            this.$el.val(model ? model.id : '');
            this.queryInput.val(model ? this.getDisplayValue(model) : '');
            this.field.setIcon(model ? this.getIconValue(model) : null);
            this.queryResult.hide();
            if (model) {
                this.queryInput.$el.focus();
                this._chosen = true;
                this.trigger('selected', model);
            } else {
                this._chosen = false;
            }
            // QueryResult and dropmenu being active prevents blurring the field,
            // so ensure we set them inactive if an option is chosen to allow taking focus from field
            this.queryResult.setContainerInactive();
            this.field.dropMenu.setInactive();
        },
        getDisplayValue: function(model) {
            return model.id;
        },
        getIconValue: function() {
            return null;
        },
        indicateActive: function() {
            this.queryInput.$el.addClass(this._activeClass);
        },
        indicateInactive: function() {
            this.queryInput.$el.removeClass(this._activeClass);
        },
        requestMatchesQuietly: function(callback) {
            this.requestMatches();

            this.datasource.once('sync',
                    _.bind(function()
                    {
                        callback();
                        this.disableRendering = true;
                    }, this));
        },
        requestMatches: function() {
            this.datasource.query(this._chosen ? '' : this.queryInput.val());
        },
        handleInputKeydown: function(e) {
            var active;
            if (this.queryResult.$el.is(':visible')) {
                switch (e.which) {
                    case jQuery.ui.keyCode.UP:
                        e.preventDefault();
                        this.queryResult.model.prev();
                        break;
                    case jQuery.ui.keyCode.DOWN:
                        e.preventDefault();
                        this.queryResult.model.next();
                        break;
                    case jQuery.ui.keyCode.ENTER:
                    case jQuery.ui.keyCode.TAB:
                        e.preventDefault();
                        active = this.queryResult.model.get('active');
                        if (active) {
                            this.queryResult.trigger('selected', active);
                        }
                        break;
                    case jQuery.ui.keyCode.ESCAPE:
                        e.stopPropagation();
                        this.queryResult.hide();
                        break;
                }
            } else if (e.which == jQuery.ui.keyCode.DOWN) {
                this.requestMatches();
            }
        },
        handleInputBlur: function() {
            if (this.field.dropMenu.isActive() || this.queryResult.isContainerActive()) {
                this.queryInput.$el.focus();
            } else {
                if (this.queryResult.$el.is(':visible')) {
                    this.queryResult.hide();
                }
            }
        },
        handleInputFocus: function() {
            var $input = this.queryInput.$el;
            var inputOffset = $input.offset();
            var inputWidth = $input.outerWidth();
            var inputHeight = $input.outerHeight();
            this.queryResult.$el.css({
                width: inputWidth,
                top: inputOffset.top + inputHeight,
                left: inputOffset.left
            });
            // setTimeout will fire after user has clicked in field to give it focus,
            // ensures text is always selected on focus
            setTimeout(function() {
                $input.select();
            });
        },
        handleInputChange: function() {
            this.$el.val(this.queryInput.val());
            this.field.setIcon(null);
            this._chosen = false;
        }
    });

    return SingleSelect;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('BAMBOO.SingleSelect', null, require('widget/single-select'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/selected-set.js' */
define('widget/selected-list', [
    'jquery',
    'underscore',
    'backbone'
], function(
    $,
    _,
    Backbone
) {

    'use strict';

    var SelectedSet = Backbone.Model.extend({
        initialize: function(options) {
            this.collection = options.bootstrap instanceof Backbone.Collection
                ? options.bootstrap
                : new Backbone.Collection(options.bootstrap || []);
        },
        each: function() {
            return this.collection.each.apply(this.collection, arguments);
        },
        add: function(model) {
            this.collection.add(model);
        },
        remove: function(id) {
            this.collection.remove(this.collection.get(id));
        }
    });
    var SelectedList = Backbone.View.extend({
        events: {
            'click [data-id] .remove': 'removeItem'
        },
        initialize: function(options) {
            this.model = new SelectedSet({ bootstrap: options.bootstrap || [] });
            this.options = options;
            if (this.model.collection.length) {
                this.render();
            }
        },
        render: function() {
            var listItems = [];
            this.model.each(function(model) {
                var li = Backbone.$('<li/>').attr('data-id', model.id).html(this.renderItem(model));
                listItems.push(li);
            }, this);
            this.$el.toggleClass('empty', (this.model.collection.length === 0)).html(listItems);
            return this;
        },
        renderItem: function(model) {
            return this.options.itemTemplate(model.attributes);
        },
        fadeout: function() {
            jQuery('.multi-select-added').animate({
                 'background-color': 'transparent'
            }, 1500);
        },
        addItem: function(model) {
            this.model.add(model);
            this.render(model);
            this.fadeout();
        },
        removeItem: function(event) {
            var $item = jQuery(event.target).closest('[data-id]');
            this.model.remove($item.data('id'));
            $item.fadeOut(400, _.bind(function() {
                this.render();
            }, this));
        }

    });

    return SelectedList;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/user-autocomplete.js' */
define('widget/user-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/single-select'
], function(
    $,
    _,
    Backbone,
    SingleSelect
) {

    'use strict';

    var UserSingleSelect = Backbone.View.extend({
        initialize: function(options) {
            options || (options = {});
            var SingleSelectWrapper = SingleSelect.extend({
                getDisplayValue: this.getFilterValue,
                getIconValue: this.getIconValue
            });
            this.singleSelect = new SingleSelectWrapper({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 5,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.userItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/users?includeAvatars=true',
                queryParamKey: 'searchTerm',
                allowEmptyQuery: false
            });
            this.singleSelect.on('selected', this.handleSelection, this);
        },
        lCasePrefixMatch: function(str, prefix) {
            return (str.toLowerCase().indexOf(prefix.toLowerCase()) === 0);
        },
        matcher: function(user, query) {
            var matches = false;
            matches = matches || this.lCasePrefixMatch(user.get('username'), query);
            if (user.has('fullName')) {
                matches = matches || this.lCasePrefixMatch(user.get('fullName'), query);
            }
            if (user.has('displayableEmail')) {
                matches = matches || this.lCasePrefixMatch(user.get('displayableEmail'), query);
            }
            return matches;
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        handleSelection: function(user) {
            this.trigger('selected', user);
        },
        getFilterValue: function(user) {
            return user.get('fullName');
        },
        getIconValue: function(user) {
            return user.get('avatarUrl');
        }
    });

    return UserSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/plan-single-select.js' */
define('widget/plan-single-select', [
    'jquery',
    'underscore',
    'brace',
    'backbone',
    'widget/single-select',
    'util/events'
], function(
    $,
    _,
    Brace,
    Backbone,
    SingleSelect,
    events
) {
    'use strict';

    return Brace.View.extend({
        mixins: [events.EventBusMixin],
        initialize: function(options) {
            options || (options = {});

            var PlanSingleSelect = SingleSelect.extend({
                getDisplayValue: this.getFilterValue
            });

            this.singleSelect = new PlanSingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 10,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.planItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/plans',
                queryParamKey: 'searchTerm',
                queryData: options.queryData || { fuzzy: true }
            });

            if (this.singleSelect.queryInput.val()) {
                this.singleSelect.requestMatchesQuietly(_.bind(function() {
                    if (this.singleSelect.datasource.length) {
                        this.singleSelect.setValue(this.singleSelect.datasource.models[0]);
                    }
                }, this));
            }

            this.onEvent('branch:empty', this.onHideBranchOptions);
            this.singleSelect.on('selected', this.onHandleSelection, this);
            this.singleSelect.queryInput.on('change', this.onHandleSelection, this);
        },

        /**
         * Normalizes the string for searching. Should be applied both for query string and for result string returned
         * from server.
         *
         * Note: this widget uses client-side matching whenever possible, avoiding unnecessary server requests. Because
         * of that, search result filtering on client side must not be stricter than filtering on server side. The
         * optimal solution is to keep this normalization method and server normalization method in sync.
         *
         * @param str string to normalize
         * @returns {string} normalized string
         */
        normalizeString: function(str) {
            return (str || '').toLowerCase().replace(/[\u203A `~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]+/g, ' ');
        },

        containsMatch: function(str, find) {
            return this.normalizeString(str).indexOf(this.normalizeString(find)) > -1;
        },
        matcher: function(plan, query) {
            return this.containsMatch(this.getFilterValue(plan), query);
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        getFilterValue: function(model) {
            // > character is not escaped for a reason
            return model.get('projectName') + '  ' + model.get('planName');
        },
        onHandleSelection: function(model) {
            this.triggerEvent('plan:selected', model);

            if (model instanceof Backbone.Model) {
                this.$el.parents('.field-group').next().show();
            }
        },
        onHideBranchOptions: function() {
            this.$el.parents('.field-group').next().hide();
        }
    });
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/branch-autocomplete.js' */
define('widget/branch-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'brace',
    'widget/single-select',
    'util/events'
], function(
    $,
    _,
    Backbone,
    Brace,
    SingleSelect,
    events
) {

    'use strict';

    var BranchSingleSelect = Brace.View.extend({
        mixins: [events.EventBusMixin],
        initialize: function(options) {
            options || (options = {});

            var ExtendedSingleSelect = SingleSelect.extend({
                getDisplayValue: this.getFilterValue
            });

            this.singleSelect = new ExtendedSingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 10,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.branchItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/branches',
                queryParamKey: 'searchTerm',
                queryData: _.bind(this.generateAdditionalQueryData, this)
            });

            this.singleSelect.on('selected', this.handleSelection, this);
            this.singleSelect.queryInput.on('change', this.handleSelection, this);

            if (options.masterPlanKey) {
                this.masterPlanKey = options.masterPlanKey;
            }
            else if (options.masterPlanField) {
                this.masterPlanKey = options.masterPlanField.val();
            }
            else if (options.masterPlanPicker) {
                this.onEvent('plan:selected', this.onMasterPlanChange);
                this.masterPlanKey = options.masterPlanPicker.val();
            }

            if (!this.masterPlanKey) {
                this.singleSelect.$el.parent().hide();
            }
        },
        containsMatch: function(str, find) {
            return (str.toLowerCase().indexOf(find.toLowerCase()) > -1);
        },
        matcher: function(plan, query) {
            return this.containsMatch(this.getFilterValue(plan), query);
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        handleSelection: function(model) {
            this.trigger('selected', model);
        },
        getFilterValue: function(model) {
            return model.get('branchName');
        },
        generateAdditionalQueryData: function() {
            return { masterPlanKey: this.masterPlanKey, includeMasterBranch: this.options.includeMasterBranch };
        },
        // using global event-bus event handling (first argument is an instance)
        onMasterPlanChange: function(instance, masterModel) {
            this.singleSelect.reset();

            if (!(masterModel instanceof Backbone.Model)) {
                this.singleSelect.$el.parent().hide();
            }
            else {
                this.singleSelect.$el.parent().filter(':hidden').show();
                this.masterPlanKey = masterModel.get('key');

                var branchPickerContainer = this.options.branchPickerContainer;

                if (branchPickerContainer) {
                    this.singleSelect.requestMatchesQuietly(_.bind(function() {
                        var numberOfBranches = this.singleSelect.datasource.length;
                        if (this.options.includeMasterBranch) numberOfBranches--;
                        if (numberOfBranches) {
                            branchPickerContainer.show();

                            // select master branch
                            if (this.options.includeMasterBranch) {
                                this.singleSelect.setValue(this.singleSelect.datasource.models[0]);
                            }
                        } else {
                            branchPickerContainer.hide();
                        }
                    }, this));
                }
            }
        }
    });

    return BranchSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/project-autocomplete.js' */
define('widget/project-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/single-select'
], function(
    $,
    _,
    Backbone,
    SingleSelect
) {

    'use strict';

    var ProjectSingleSelect = Backbone.View.extend({
        initialize: function(options) {
            options || (options = {});
            this.singleSelect = new SingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap || [],
                maxResults: options.maxResults || 5,
                matcher: _.bind(this.matcher, this),
                parser: this.parser,
                resultItemTemplate: bamboo.widget.autocomplete.projectItemResult,
                queryEndpoint: AJS.contextPath() + '/rest/api/latest/search/projects',
                queryParamKey: 'searchTerm'
            });
            this.singleSelect.on('selected', this.handleSelection, this);
        },
        containsMatch: function(str, find) {
            return (str.toLowerCase().indexOf(find.toLowerCase()) > -1);
        },
        matcher: function(plan, query) {
            var matches = false;
            matches = matches || this.containsMatch(plan.get('projectName'), query);
            return matches;
        },
        parser: function(response) {
            return _.map(response.searchResults, function(result) {
                return result.searchEntity;
            });
        },
        handleSelection: function(model) {
            this.trigger('selected', model);
        }
    });

    return ProjectSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:autocomplete', location = '/widget/autocomplete-controls/bamboo/autocomplete.soy' */
// This file was automatically generated from autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }


bamboo.widget.autocomplete.userItemResult = function(opt_data, opt_ignored) {
  return '<span>' + ((opt_data.avatarUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.avatarUrl) + '" alt="" class="avatar" />' : '') + ((opt_data.fullName) ? soy.$$escapeHtml(opt_data.fullName) + ((opt_data.displayableEmail) ? ' - ' + soy.$$escapeHtml(opt_data.displayableEmail) : '') + ' (' + soy.$$escapeHtml(opt_data.username) + ')' : (opt_data.displayableEmail) ? soy.$$escapeHtml(opt_data.displayableEmail) + ' (' + soy.$$escapeHtml(opt_data.username) + ')' : soy.$$escapeHtml(opt_data.username)) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.userItemResult.soyTemplateName = 'bamboo.widget.autocomplete.userItemResult';
}


bamboo.widget.autocomplete.planItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.projectName) + ((opt_data.planName) ? ' &rsaquo; ' + soy.$$escapeHtml(opt_data.planName) : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planItemResult.soyTemplateName = 'bamboo.widget.autocomplete.planItemResult';
}


bamboo.widget.autocomplete.branchItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.branchName) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.branchItemResult.soyTemplateName = 'bamboo.widget.autocomplete.branchItemResult';
}


bamboo.widget.autocomplete.projectItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.projectName) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.projectItemResult.soyTemplateName = 'bamboo.widget.autocomplete.projectItemResult';
}


bamboo.widget.autocomplete.variableItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.key) + '</span>';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableItemResult.soyTemplateName = 'bamboo.widget.autocomplete.variableItemResult';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-aui', location = '/util/shims/aui.js' */
define('aui', function() {
    return window.AJS;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-projects-picker', location = '/widget/projects-picker/projects-picker.soy' */
// This file was automatically generated from projects-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.projectsPicker.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.projectsPicker == 'undefined') { bamboo.widget.projectsPicker = {}; }


bamboo.widget.projectsPicker.selection = function(opt_data, opt_ignored) {
  return '<a class="select2-search-choice__url" href="' + soy.$$escapeHtml("" + '/browse/' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.text) + '</a><input type="hidden" name="selectedProjectKeys" value="' + soy.$$escapeHtml(opt_data.id) + '" />';
};
if (goog.DEBUG) {
  bamboo.widget.projectsPicker.selection.soyTemplateName = 'bamboo.widget.projectsPicker.selection';
}


bamboo.widget.projectsPicker.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.text);
};
if (goog.DEBUG) {
  bamboo.widget.projectsPicker.result.soyTemplateName = 'bamboo.widget.projectsPicker.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-projects-picker', location = '/widget/projects-picker/projects-picker.js' */
define("widget/projects-picker",["aui","marionette"],function(e,t){"use strict";var i=e.contextPath()+"/rest/api/latest/search/projects",a="Select projects",r=function(e){var t=e.id;return{text:e.projectName,id:t}};return t.ItemView.extend({template:!1,initialize:function(e){var t=e.selected,i=void 0===t?[]:t;this.initialData=i.map(r)},onRender:function(){this.initSelect2(),this.setInitialData(),this.attachListeners()},initSelect2:function(){this.$el.auiSelect2({multiple:!0,placeholder:a,containerCssClass:"widget-projects-picker",formatSelection:bamboo.widget.projectsPicker.selection,formatResult:bamboo.widget.projectsPicker.result,ajax:{url:i,dataType:"json",quietMillis:250,data:function(e,t){return{"start-index":25*(t-1),"max-result":25,searchTerm:e}},results:function(e,t){var i=25*t<e.size;return{results:e.searchResults.map(function(e){var t=e.searchEntity;return r(t)}),more:i}}}})},setInitialData:function(){this.$el.auiSelect2("data",this.initialData)},attachListeners:function(){this.$el.data("select2").container.on("click",".select2-search-choice__url",function(e){window.open(e.currentTarget.href)})}},{create:function(e,t){return new this({el:e,selected:t}).render()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:status-widgets', location = '/widget/status/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.status.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.status == 'undefined') { widget.status = {}; }


widget.status.deploymentResultStatusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var colour__soy3 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        colour__soy3 += 'default';
        break;
      case 'SUCCESS':
        colour__soy3 += 'success';
        break;
      case 'FAILED':
        colour__soy3 += 'error';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        colour__soy3 += 'current';
        break;
      case 'QUEUED':
        colour__soy3 += 'current';
        break;
      case 'IN_PROGRESS':
        colour__soy3 += 'current';
        break;
      case 'NOT_BUILT':
        colour__soy3 += 'default';
        break;
    }
  }
  var text__soy23 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        text__soy23 += 'Unknown';
        break;
      case 'SUCCESS':
        text__soy23 += 'Success';
        break;
      case 'FAILED':
        text__soy23 += 'Failed';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        text__soy23 += 'Queued';
        break;
      case 'QUEUED':
        text__soy23 += 'Queued';
        break;
      case 'IN_PROGRESS':
        text__soy23 += 'In Progress';
        break;
      case 'NOT_BUILT':
        text__soy23 += 'Not Built';
        break;
    }
  }
  output += widget.lozenges.auilozenge({colour: colour__soy3, text: text__soy23, subtle: opt_data.subtle});
  return output;
};
if (goog.DEBUG) {
  widget.status.deploymentResultStatusLozenge.soyTemplateName = 'widget.status.deploymentResultStatusLozenge';
}


widget.status.buildResultStatusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var class__soy48 = '' + widget.status.buildResultStatusClass(opt_data);
  output += widget.icons.statusIcon({status: class__soy48});
  return output;
};
if (goog.DEBUG) {
  widget.status.buildResultStatusIcon.soyTemplateName = 'widget.status.buildResultStatusIcon';
}


widget.status.buildResultStatusClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.resultSummary.continuable && opt_data.resultSummary.successful) ? 'SuccessfulPartial' : (opt_data.resultSummary.notRunYet) ? 'NotRunYet' : (opt_data.resultSummary.finished) ? soy.$$escapeHtml(opt_data.resultSummary.buildState) : soy.$$escapeHtml(opt_data.resultSummary.lifeCycleState));
};
if (goog.DEBUG) {
  widget.status.buildResultStatusClass.soyTemplateName = 'widget.status.buildResultStatusClass';
}


widget.status.statusRibbon = function(opt_data, opt_ignored) {
  var output = '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon' + aui.renderExtraClasses(opt_data) + '" data-statuses="' + soy.$$escapeHtml(opt_data.statuses.length) + '"' + aui.renderExtraAttributes(opt_data) + '><div class="status-ribbon-inner">';
  var statusList77 = opt_data.statuses;
  var statusListLen77 = statusList77.length;
  for (var statusIndex77 = 0; statusIndex77 < statusListLen77; statusIndex77++) {
    var statusData77 = statusList77[statusIndex77];
    output += widget.status.statusRibbonItem(statusData77);
  }
  output += '</div>' + ((opt_data.progressbarContent) ? '<div class="status-ribbon-progress-bar">' + soy.$$filterNoAutoescape(opt_data.progressbarContent) + '</div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  widget.status.statusRibbon.soyTemplateName = 'widget.status.statusRibbon';
}


widget.status.statusRibbonItem = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon-status ' + soy.$$escapeHtml(opt_data.state) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + ' class="status-ribbon-status-heading">' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.state, reversed: true}) + ' ' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + '></div>';
};
if (goog.DEBUG) {
  widget.status.statusRibbonItem.soyTemplateName = 'widget.status.statusRibbonItem';
}


widget.status.deploymentVersionStatus = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.deploymentVersionState && opt_data.deploymentVersionState != 'UNKNOWN') ? widget.lozenges.auilozenge({colour: '' + ((opt_data.deploymentVersionState == 'BROKEN' || opt_data.deploymentVersionState == 'INCOMPLETE') ? 'error' : 'success'), text: opt_data.deploymentVersionState, subtle: opt_data.subtle, extraClasses: 'version-lozenge'}) : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatus.soyTemplateName = 'widget.status.deploymentVersionStatus';
}


widget.status.deploymentVersionStatusInfo = function(opt_data, opt_ignored) {
  return '' + ((opt_data.deploymentVersionState == 'APPROVED' || opt_data.deploymentVersionState == 'BROKEN') ? '<div class="detailed-version-info-container reviewed-user-avatar">' + aui.avatar.avatar({size: 'small', avatarImageUrl: opt_data.avatar ? opt_data.avatar : "" + '/images/icons/useravatar-grey.png', accessibilityText: opt_data.userName ? opt_data.userName : "Anonymous user", title: opt_data.displayName ? opt_data.displayName : "Anonymous user", badgeContent: '' + ((opt_data.deploymentVersionState == 'BROKEN') ? '<span class="badge reviewed broken"></span>' : (opt_data.deploymentVersionState == 'APPROVED') ? '<span class="badge reviewed approved"></span>' : '')}) + '<script>AJS.$(".aui-avatar-inner > img").tooltip({gravity: \'n\'});<\/script></div>' : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatusInfo.soyTemplateName = 'widget.status.deploymentVersionStatusInfo';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:tooltip-widget', location = '/widget/tooltip/tooltip.soy' */
// This file was automatically generated from tooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.tooltip.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.tooltip == 'undefined') { bamboo.widget.tooltip = {}; }


bamboo.widget.tooltip.tooltip = function(opt_data, opt_ignored) {
  return '<script type="text/javascript">require([\'aui\', \'jquery\', \'underscore\'], function(AJS, $, _){var $element = $(\'' + soy.$$escapeHtml(opt_data.trigger) + '\'); AJS.InlineDialog( $element, undefined' + ((opt_data.url) ? ',\'' + soy.$$escapeHtml("") + soy.$$escapeJsString(opt_data.url) + '\'' : ',function(content, trigger, showPopup){content .css({padding: \'20px\'}) .html(_.unescape(\'' + soy.$$escapeHtml(opt_data.content) + '\')); showPopup(); return false;}') + ',{' + ((opt_data.width) ? ' width: ' + soy.$$escapeHtml(opt_data.width) + ' ' : '') + ((opt_data.showDelay) ? ' ' + ((opt_data.width) ? ',' : '') + ' showDelay: ' + soy.$$escapeHtml(opt_data.showDelay) : '') + ((opt_data.width || opt_data.showDelay) ? ',' : '') + ' onHover: true});' + ((opt_data.addMarker) ? '$element.addClass(\'tooltip-marker\');' : '') + '});<\/script>';
};
if (goog.DEBUG) {
  bamboo.widget.tooltip.tooltip.soyTemplateName = 'bamboo.widget.tooltip.tooltip';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/feature/variables/variables.js' */
define('feature/variables', [
    'jquery',
    'underscore',
    'widget/dialog',
    'widget/variable-single-select',
    'feature/config-read-only',
    'exports'
], function(
    $,
    _,
    Dialog,
    VariableSingleSelect,
    /** @type {module:feature/config-read-only} */ readOnlyMode,
    exports
) {

    'use strict';

    /**
     * Array of keywords to determine whether a variable should be masked. Lazily initialised by #isPasswordVariable
     * function.
     */
    var passwordKeywords;

    /**
     * A function that determines whether a variable should be masked.
     * @param variableName name of the variable
     * @returns {boolean}
     */
    var isPasswordVariable = function(variableName) {
        if (!passwordKeywords) {
            var resourceKey = 'bamboo.web.resources:variables.password-variable-keywords';
            passwordKeywords = _.map(WRM.data.claim(resourceKey), function(keyword) {
                return keyword.toLowerCase();
            });
        }
        var lcVariableName = (variableName || '').toLowerCase();
        return passwordKeywords.some(function(keyword) {
            return lcVariableName.indexOf(keyword) >= 0;
        });
    };

    /**
     * Inline Editing
     * @param options
     *  - target        String - selector targeting the span/element to make inline-editable
     *  - submit        Function - handles what to do when value is submitted
     *  - cancel        Function - handles what to do when cancel is triggered
     *  - focus         Function - handles what to do when focus is given to the edit field
     *  - $delegator    jQuery Object - where the event handler should be bound
     */
    var inlineEdit = function(options) {
        var defaults = {
                target: null,
                submit: null,
                cancel: null,
                focus: null
            },
            handleEdit = function(event) {
                var $target = $(this);
                var $row = $target.parents('tr:first');

                if (!keyIsPassword($row)) {
                    prepareRow($row, $target);
                }
                // field contains password
                else {
                    prepareRow($row, $target, true,
                        _.bind(function() {
                            var keyElement = $row.find('td:eq(0) .inline-edit-field');
                            var $input = $target.siblings('div.input-password');

                            keyElement.trigger('selected', !!$input.length);
                        }, this)
                    );
                }

                event.preventDefault();
            },
            handleKeyDown = function(event) {
                var keyCode = event.which;
                var $element = $(event.currentTarget);

                // on ESCAPE revert current changes
                if (keyCode === $.ui.keyCode.ESCAPE) {
                    revertRow($element.blur().parents('tr:first'));
                    event.preventDefault();
                }
                // on ENTER apply current changes
                else if (keyCode === $.ui.keyCode.ENTER) {
                    updateRow($element.blur().parents('tr:first'));
                    event.preventDefault();
                }
            },
            prepareRow = function($row, $target, clearValue, callback) {
                // update currently active row
                options.$delegator.find('tr.active').each(function() {
                    revertRow($(this));
                });

                // find elements
                var $elements = $row.find('.inline-edit-view');
                var elementsCount = $elements.length;

                $elements.each(function(index) {
                    var $target = $(this);
                    var $input = $target.parent('td:first').find('.inline-edit-field:text');

                    // set current value
                    $input.val($target.text());

                    // clear value for last element if flag was set
                    if (clearValue && (elementsCount - 1) === index) {
                        $input.val('');
                    }

                    if (!$input.data('hasInlineEditHandlers')) {
                        $input.keydown(handleKeyDown)
                            .data('hasInlineEditHandlers', true)
                            .data('lastValidValue', $input.val());
                    }

                    $target.hide();
                    $input.parent().removeClass('hidden');
                });

                if ($.isFunction(options.focus)) {
                    options.focus($target);
                }

                // focus on first input field (which was clicked)
                $target.parent().find('.inline-edit-field').addClass('focus').focus();

                if ($.isFunction(callback)) {
                    callback();
                }
            },
            revertRow = function($row) {
                // activate first row
                options.$delegator.find('tr.inactive').removeClass('inactive');

                // cancel callback
                if ($.isFunction(options.cancel)) {
                    options.cancel($row.find('td:eq(0) input:visible'));
                }

                // reset styles and behaviour
                $row.removeClass('active')
                    .find('.inline-edit-view, .inline-edit-field')
                    .attr('style', '');

                $row.find('td:eq(1) .input-password').addClass('hidden');
            },
            updateRow = function($row) {
                if (!$.isFunction(options.submit)) {
                    updateRowSuccess();
                }
                // submit callback
                else {
                    options.submit($row.find('td:eq(1)').find('input:visible'), _.bind(function() {
                        updateRowSuccess($row);
                    }, this));
                }
            },
            updateRowSuccess = function($row) {
                var keyCell = $row.find('td:eq(0)');

                // is key value empty?
                if ($.trim(keyCell.find('input').val()).length > 0) {
                    // activate first row
                    options.$delegator.find('tr.inactive').removeClass('inactive');

                    // cancel callback
                    if ($.isFunction(options.cancel)) {
                        options.cancel(keyCell.find('input:visible'));
                    }

                    // reset styles and behaviour
                    $row.removeClass('active')
                        .find('.inline-edit-view, .inline-edit-field')
                        .attr('style', '');

                    keyCell.find('.inline-edit-view:first').text(
                        keyCell.find('.inline-edit-field:text').val()
                    );

                    // default password value
                    var value = '********';
                    var valueCell = $row.find('td:eq(1)');

                    valueCell.find('.input-password')
                        .addClass('hidden');

                    if (!keyIsPassword($row)) {
                        value = valueCell.find('.inline-edit-field:text').val();
                    }

                    $row.find('td:eq(1) .inline-edit-view:first').text(value);
                }
            },
            keyIsPassword = function($row) {
                var value = $.trim($row.find('.inline-edit-view:first').text());
                return isPasswordVariable(value);
            };

        options = $.extend(true, defaults, options);

        // append update handler
        options.$delegator.find('.operations button[name="update"]').on('click', function() {
            updateRow($(this).parents('tr:first'));
        });

        // append revert handler
        options.$delegator.find('.operations a.cancel-variable').on('click', function() {
            revertRow($(this).parents('tr:first'));
        });

        // revert current active TR if user click on .add-variable fields
        options.$delegator.find('tr.add-variable').on('click', 'input', _.bind(function() {
            var $active = options.$delegator.find('tr.active');

            if ($active.length) {
                revertRow($active);
                $(this).removeClass('inactive');
            }
        }, this));

        if (options.target) {
            options.$delegator.delegate(options.target, 'click', handleEdit);
        }
    };

    function VariablesTable(options) {
        if (!(this instanceof VariablesTable)) {
            return new VariablesTable(options);
        }

        var defaults = {
            selectors: {
                table: null,
                addRow: '.add-variable',
                deleteRow: '.delete-variable',
                overrideButton: 'a.variables-override'
            },
            templates: {
                row: null
            },
            availableVariables: null
        }, that = this;
        this.options = $.extend(true, defaults, options);

        this.$table = $(this.options.selectors.table)
            .on('click', this.options.selectors.deleteRow, function(e) {
                _.bind(that.handleDeleteClick, that)(this, e);
            })
            .on('click', this.options.selectors.overrideButton, _.bind(this.handleOverrideClick, this))
            .on('change', 'select', this.handleChangeVariableSelection);

        this.$addVariable = this.$table.find(this.options.selectors.addRow)
            .on('keydown', 'input:text, select', _.bind(this.handleAdd, this))
            .on('click', 'input:submit', _.bind(this.handleAdd, this));
    }

    VariablesTable.prototype = {
        handleAdd: function(e) {
            if (e.type == 'click' || e.which == jQuery.ui.keyCode.ENTER) {
                e.preventDefault();
                var $inputs = this.$addVariable.find(':input'),
                    key = $inputs.filter('[name="variableKey"]').val(),
                    value = $inputs.filter('[name="variableValue"]').val();

                $(AJS.template.load(this.options.templates.row).fill({
                    id: 'variable_' + key,
                    key: key,
                    value: value
                }).toString()).appendTo(this.$table.find('tbody'));
            }
        },
        handleChangeVariableSelection: function() {
            var $this = $(this),
                $option = $this.find('option:selected'),
                $text = $this.closest('tr').find('input:text, input:password'),
                id = $option.val(),
                hasPassword = isPasswordVariable(id);
            $this.prop('name', 'key_' + id);
            $text.prop('type', hasPassword ? 'password' : 'text');
            $text.prop('name', 'variable_' + id).val($option.get(0).getAttribute('data-current-value') || '');
        },
        handleDeleteClick: function(el, event) {
            var $this = $(el);
            var href = $this.attr('href');
            var self = this;

            event.preventDefault();

            // if in override mode (customised build) then just delete nearest TR
            if (!!this.overrideMode) {
                $this.closest('tr').remove();
            }
            // show confirmation dialog when deleting a record
            else {
                new Dialog({
                    header: "Delete a variable",
                    content: bamboo.feature.variables.deleteConfirmaton(),
                    height: 260,
                    width: 600,
                    buttons: [
                        {
                            id: 'confirm',
                            label: "Confirm",
                            cssClass: 'aui-button aui-button-primary',
                            params: {
                                self: self,
                                $this: $this,
                                href: href
                            },
                            callback: function(id, params) {
                                if (params.href) {
                                    $.post(params.href, { 'bamboo.successReturnMode': 'json', decorator: 'nothing', confirm: true }).done(_.bind(function(result) {
                                        if (params.self.resultStatusMatches(result, 'OK')) {
                                            if (!$('table[id=global-variable-config]').length) {
                                                var variable = {};
                                                variable.key = params.$this.data('variableKey');

                                                if (params.self.options.overriddenVariablesMap[variable.key]) {
                                                    var oldPicker = params.$this.closest('tbody').find('.bamboo-single-select');

                                                    if (oldPicker) {
                                                        oldPicker.remove();
                                                    }

                                                    params.self.options.globalNotOverriddenVariables.push(variable);

                                                    var variableSelect = new VariableSingleSelect({
                                                        el: '#variableKey',
                                                        bootstrap: params.self.options.globalNotOverriddenVariables
                                                    });

                                                    variableSelect.singleSelect.field.$placeholder.attr(
                                                        'placeholder', "Choose from global variables or type in your own"
                                                    );
                                                }
                                            }
                                            params.$this.closest('tr').remove();
                                        }
                                    }, params.self));
                                } else {
                                    params.$this.closest('tr').remove();
                                }

                                this.dialog.remove();
                            }
                        },
                        {
                            id: 'cancel',
                            label: "Cancel",
                            type: 'link'
                        }
                    ]
                });
            }
        },
        handleOverrideClick: function(e) {
            var $row = $(bamboo.feature.variables.variablesTableRow({
                id: '',
                key: '',
                value: '',
                availableVariables: this.options.availableVariables
            })).appendTo(this.$table.find('tbody'));

            this.handleChangeVariableSelection.call($row[0]);
            this.overrideMode = true;

            e.preventDefault();
        },
        resultStatusMatches: function(result, match) {
            return (result.status.toUpperCase() == match);
        }
    };

    function VariablesConfigurationForm(options) {
        if (!(this instanceof VariablesConfigurationForm)) {
            return new VariablesConfigurationForm(options);
        }

        var defaults = {
            selectors: {
                form: null,
                table: '.variables-list',
                addRow: '.add-variable',
                deleteRow: '.delete-variable'
            },
            templates: {
                row: null
            },
            classes: {
                active: 'active',
                inactive: 'inactive'
            },
            updateVariableUrl: null,
            overriddenVariablesMap: {},
            globalNotOverriddenVariables: [],
            readOnly: false
        }, that = this;

        this.options = $.extend(true, defaults, options);
        this.cache = {};

        this.$form = $(this.options.selectors.form)
            .on('submit', _.bind(this.handleSubmit, this));
        this.$table = this.$form.find(this.options.selectors.table)
            .on('click', this.options.selectors.deleteRow, function(event) {
                _.bind(that.handleDeleteClick, that)(this, event);
            });

        this.$addVariable = this.$table.find(this.options.selectors.addRow)
            .on('change', 'select', this.handleChangeVariableSelection);

        // global table handler for input <> password fields
        this.$table.on('selected keyup', 'tr td:first-child input', function(event, focusValue) {
            _.bind(that.handleChangeVariableName, this)(that, focusValue);
        });
        
        if (!this.options.readOnly) {
            inlineEdit({
                target: '.inline-edit-view',
                $delegator: this.$form,
                submit: _.bind(this.handleInlineSubmit, this),
                focus: _.bind(this.handleInlineFocus, this),
                cancel: _.bind(this.handleInlineCancel, this)
            });
        }
        else {
            readOnlyMode.makeReadOnly(this.$table);
        }
    }

    VariablesConfigurationForm.prototype = new VariablesTable();

    $.extend(true, VariablesConfigurationForm.prototype, {
        clearFormErrors: function() {
            this.$form.find('.error,.aui-message').remove();
        },
        clearFieldErrors: function($field) {
            $field.nextAll('.error').remove();
        },
        resultFieldErrors: function(fieldErrors, func) {
            for (var fieldName in fieldErrors) {
                if (fieldErrors.hasOwnProperty(fieldName)) {
                    func(fieldName, fieldErrors[fieldName]);
                }
            }
        },
        handleChangeVariableSelection: function() {
            var $this = $(this),
                $option = $this.find('option:selected'),
                $text = $this.closest('tr').find('input:text');

            $text.val($option.get(0).getAttribute('data-current-value') || '');
        },
        handleChangeVariableName: function(self, focusValue) {
            var $this = $(this);
            var $tr = $this.parents('tr:first');
            var id = $tr.attr('id');

            var value = $.trim($this.val());
            var hasPassword = isPasswordVariable(value);

            // initialize cache object
            if (!self.cache[id]) {
                self.cache[id] = {};
            }

            // runs only once per row & then is cached
            if (_.isEmpty(self.cache[id])) {
                self.cache[id].varHasPassword = null;

                // always synchronize input & password field
                self.cache[id].$varInput = $tr.find('.variable-value input')
                    .on('keyup', _.bind(function() {
                        self.cache[id].$varPassword.val(
                            self.cache[id].$varInput.val()
                        );
                    }, $this));

                self.cache[id].$varPassword = $tr.find('.variable-value-password input')
                    .on('keyup', _.bind(function() {
                        self.cache[id].$varInput.val(
                            self.cache[id].$varPassword.val()
                        );
                    }, $this));

                // register toggle for show/hide password field
                self.cache[id].$varToggle = $tr.find('.input-password > button').on('click', _.bind(function(event) {
                    self.cache[id].$varInput.parent().toggleClass('hidden')
                        .find('button').toggleClass('hidden');

                    self.cache[id].$varPassword
                        .parent().toggleClass('hidden');

                    event.preventDefault();
                }, self));
            }

            // input contains variable to mask
            if (hasPassword) {
                self.cache[id].$varInput.parent().addClass('hidden');
                self.cache[id].$varPassword.val(self.cache[id].$varInput.val()).parent().removeClass('hidden');
                self.cache[id].varHasPassword = true;

                if (focusValue) {
                    self.cache[id].$varPassword.focus();
                }
            }
            else if (self.cache[id].varHasPassword !== false) {
                self.cache[id].$varInput.parent().removeClass('hidden').find('button').addClass('hidden');
                self.cache[id].$varPassword.parent().addClass('hidden');
                self.cache[id].varHasPassword = false;

                if (focusValue) {
                    self.cache[id].$varInput.focus();
                }
            }

            // focus variable key
            if (!_.isUndefined(focusValue) && !focusValue) {
                $this.focus();
            }
        },
        handleSubmit: function(e) {
            e.preventDefault();
            this.clearFormErrors();
            var formUrl = this.$form.attr('action'),
                data = this.$addVariable.find(':input').serialize() + '&'
                    + BAMBOO.XsrfUtils.getAtlTokenQueryParam(formUrl)
                    + '&bamboo.successReturnMode=json&decorator=nothing&confirm=true';
            $.post(formUrl, data, _.bind(function(result) {
                if (this.resultStatusMatches(result, 'OK')) {
                    window.location.reload();
                } else if (this.resultStatusMatches(result, 'ERROR')) {
                    var fieldErrors = result.fieldErrors,
                        errors = result.errors,
                        $firstError;

                    if (fieldErrors) {
                        this.resultFieldErrors(fieldErrors, _.bind(function(fieldName, fieldError) {
                            this.$addVariable.find(':input[name="' + fieldName + '"]').after(BAMBOO.buildFieldError(fieldError));
                        }, this));
                    }
                    if (errors) {
                        this.$form.prepend(BAMBOO.buildAUIErrorMessage(errors));
                    }
                    $firstError = this.$addVariable.find(':input:visible:enabled.errorField:first').focus();
                    if (!$firstError.length) {
                        this.$addVariable.find(':input:visible:enabled:first').focus();
                    }
                }
            }, this));
        },
        handleInlineSubmit: function($target, callback) {
            var $loading = $('<span/>', { 'class': 'icon icon-loading' }),
                name = $target.attr('name'),
                id, $key, $value;

            if (name.indexOf('key_') === 0) {
                id = BAMBOO.stripPrefixFromId('key_', name);
                $key = $target;
                $value = this.$form.find(':input[name="value_' + id + '"]');
            }
            else if (name.indexOf('value_') === 0) {
                id = BAMBOO.stripPrefixFromId('value_', name);
                $key = this.$form.find(':input[name="key_' + id + '"]');
                $value = $target;
            }

            if (id && $key && $value) {
                $loading.insertAfter($target[0]);
                this.clearFieldErrors($target);

                $.post(this.options.updateVariableUrl, BAMBOO.XsrfUtils.addXsrfTokenProperty(this.options.updateVariableUrl, {
                        variableId: id,
                        variableKey: $key.val(),
                        variableValue: $value.val(),
                        'bamboo.successReturnMode': 'json',
                        decorator: 'nothing',
                        confirm: true
                    })).done(_.bind(function(result) {
                        var fieldErrors = result.fieldErrors,
                            errors = result.errors,
                            $tr = $target.closest('tr');

                        $loading.remove();

                        if (!$tr.find('.focus').length) {
                            $tr.removeClass('active');
                        }
                        if (this.resultStatusMatches(result, 'OK')) {
                            $target.data('lastValidValue', $target.val());
                            var $div = $('#override_field_' + id);

                            $div.html($(bamboo.feature.variables.overrideText({
                                variable: this.options.overriddenVariablesMap[$key.val()]
                            })));

                            if (!this.$form.find('.focus').length) {
                                this.$addVariable
                                    .removeClass(this.options.classes.inactive)
                                    .find('input')
                                    .removeAttr('disabled');
                            }

                            if (callback) {
                                callback();
                            }
                        }
                        else if (this.resultStatusMatches(result, 'ERROR')) {
                            if (fieldErrors) {
                                this.resultFieldErrors(fieldErrors, _.bind(function(fieldName, fieldError) {
                                    var $field = (fieldName === 'variableValue' ? $value : $key);
                                    this.clearFieldErrors($field);
                                    $field.after(BAMBOO.buildFieldError(fieldError));
                                }, this));
                            }
                            if (errors) {
                                $key.after(BAMBOO.buildAUIErrorMessage(errors));
                            }
                        }

                        // update variable meta-data
                        $tr.find('td.variable-value-container')
                            .attr('data-variable-key', $key.val());

                    }, this)).fail(function() {
                        $loading.remove();
                        var error = ["Server error - variable not saved"];
                        $key.after(BAMBOO.buildFieldError(error));
                    });
            }
        },
        handleInlineFocus: function($target) {
            $target.closest('tr').addClass(this.options.classes.active);
            this.$addVariable.addClass(this.options.classes.inactive);
        },
        handleInlineCancel: function($target) {
            this.clearFieldErrors($target.closest('tr').removeClass(this.options.classes.active).end());
            this.$addVariable.removeClass(this.options.classes.inactive);
        }
    });

    exports.VariablesTable = VariablesTable;
    exports.VariablesConfigurationForm = VariablesConfigurationForm;

});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/feature/variables/variables.soy' */
// This file was automatically generated from variables.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.variables.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.variables == 'undefined') { bamboo.feature.variables = {}; }


bamboo.feature.variables.variablesTable = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param28 = '' + ((! opt_data.hideAddHeader) ? '<tr class="add-variable"><td>' + bamboo.feature.variables.selectOrInput({id: 'variableKey', options: opt_data.availableVariables}) + '</td><td>' + bamboo.feature.variables.selectOrInput({id: 'variableValue', value: opt_data.firstAvailableVariable}) + '</td><td class="operations">' + aui.form.submit({text: "Add", id: ''}) + '</td></tr>' : '');
  if (opt_data.variables) {
    var variableList46 = opt_data.variables;
    var variableListLen46 = variableList46.length;
    for (var variableIndex46 = 0; variableIndex46 < variableListLen46; variableIndex46++) {
      var variableData46 = variableList46[variableIndex46];
      param28 += bamboo.feature.variables.variablesTableRow(soy.$$augmentMap(variableData46, {inlineEdit: opt_data.inlineEdit, availableVariables: opt_data.availableVariables, deleteVariableUrl: opt_data.deleteVariableUrl}));
    }
  }
  var output = '' + aui.table({extraClasses: 'variables-list', columnsContent: '<colgroup><col width="30%" /><col width="*" /><col width="60" /></colgroup>', theadContent: '<tr><th>' + soy.$$escapeHtml("Variable name") + '</th><th>' + soy.$$escapeHtml("Value") + '</th><th class="operations"><span class="assistive">' + soy.$$escapeHtml("Operations") + '</span></th></tr>', tfootContent: '' + ((opt_data.showOverrideFooter) ? '<tr>' + ((opt_data.userCanOverrideVariables) ? '<td colspan="3"><a class="aui-button aui-button-link aui-style variables-override">' + soy.$$escapeHtml("Override a variable") + '</a></td>' : '<td colspan="3"><span class="variables-override">' + soy.$$escapeHtml("Build variables override is forbidden") + '</span></td>') + '</tr>' : ''), content: param28});
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTable.soyTemplateName = 'bamboo.feature.variables.variablesTable';
}


bamboo.feature.variables.variablesTableRow = function(opt_data, opt_ignored) {
  return '<tr data-variable-id="' + soy.$$escapeHtml(opt_data.id) + '"><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables}) : bamboo.feature.variables.selectOrInput({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables})) + '</td><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'value_' + opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput({id: 'value_' + opt_data.id, value: opt_data.key})) + '</td><td class="operations"><a id="deleteVariable_' + soy.$$escapeHtml(opt_data.id) + '" class="delete-variable"' + ((opt_data.deleteVariableUrl) ? ' href="' + soy.$$escapeHtml(opt_data.deleteVariableUrl) + '"' : '') + ' title="' + soy.$$escapeHtml("Delete") + '" tabindex="-1">' + aui.icons.icon({icon: 'remove', useIconFont: true, accessibilityText: "Delete", extraAttributes: {title: "Delete"}}) + '</a></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTableRow.soyTemplateName = 'bamboo.feature.variables.variablesTableRow';
}


bamboo.feature.variables.inPlaceEditField = function(opt_data, opt_ignored) {
  return '<span class="inline-edit-view"' + ((! opt_data.readonly) ? ' tabindex="0"' : '') + ' id="key_' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.value) + '</span>' + ((opt_data.readonly) ? aui.form.input({type: 'hidden', name: opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput(soy.$$augmentMap(opt_data, {extraClasses: 'inline-edit-field'})));
};
if (goog.DEBUG) {
  bamboo.feature.variables.inPlaceEditField.soyTemplateName = 'bamboo.feature.variables.inPlaceEditField';
}


bamboo.feature.variables.selectOrInput = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options) ? bamboo.feature.variables.select({name: opt_data.id, options: opt_data.options, extraClasses: opt_data.extraClasses}) : aui.form.input({type: 'text', name: opt_data.id, value: opt_data.value, extraClasses: opt_data.extraClasses, extraAttributes: {autocomplete: 'off'}}));
};
if (goog.DEBUG) {
  bamboo.feature.variables.selectOrInput.soyTemplateName = 'bamboo.feature.variables.selectOrInput';
}


bamboo.feature.variables.passwordConfirmaton = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: "variables.password.dialog.title", content: '<p>' + soy.$$escapeHtml("variables.password.dialog.description") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.variables.passwordConfirmaton.soyTemplateName = 'bamboo.feature.variables.passwordConfirmaton';
}


bamboo.feature.variables.deleteConfirmaton = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("You are about to delete the selected variable. Are you sure you want to continue?");
};
if (goog.DEBUG) {
  bamboo.feature.variables.deleteConfirmaton.soyTemplateName = 'bamboo.feature.variables.deleteConfirmaton';
}


bamboo.feature.variables.select = function(opt_data, opt_ignored) {
  var output = '<select' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'multi-select' : 'select') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isMultiple) ? ' multiple' : '') + aui.renderExtraAttributes(opt_data) + '>';
  var optionList167 = opt_data.options;
  var optionListLen167 = optionList167.length;
  for (var optionIndex167 = 0; optionIndex167 < optionListLen167; optionIndex167++) {
    var optionData167 = optionList167[optionIndex167];
    output += bamboo.feature.variables.optionOrOptgroup(optionData167);
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.select.soyTemplateName = 'bamboo.feature.variables.select';
}


bamboo.feature.variables.optionOrOptgroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.options) {
    output += '<optgroup label="' + soy.$$escapeHtml(opt_data.text) + '"' + aui.renderExtraAttributes(opt_data) + '>';
    var optionList179 = opt_data.options;
    var optionListLen179 = optionList179.length;
    for (var optionIndex179 = 0; optionIndex179 < optionListLen179; optionIndex179++) {
      var optionData179 = optionList179[optionIndex179];
      output += bamboo.feature.variables.optionOrOptgroup(optionData179);
    }
    output += '</optgroup>';
  } else {
    output += '<option value="' + soy.$$escapeHtml(opt_data.value) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.selected) ? ' selected' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.optionOrOptgroup.soyTemplateName = 'bamboo.feature.variables.optionOrOptgroup';
}


bamboo.feature.variables.overrideText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.variable) ? '<div class="variable-override-text">' + ((opt_data.variable.variableType == 'PLAN') ? soy.$$escapeHtml("Overrides plan value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value) : soy.$$escapeHtml("Overrides global value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value)) + '</div>' : '');
};
if (goog.DEBUG) {
  bamboo.feature.variables.overrideText.soyTemplateName = 'bamboo.feature.variables.overrideText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/widget/autocomplete-controls/bamboo/single-select.js' */
define('widget/single-select', [
    'jquery',
    'underscore',
    'backbone'
], function(
    $,
    _,
    Backbone
) {

    'use strict';

    var SingleSelectResultView = AJS.ResultsList.extend({
        events: function() {
            // Required because Backbone doesn't easily support
            // adding event to the event object when extending a View, it just replaces them
            return _.extend({}, AJS.ResultsList.prototype.events, {
                'hover [data-id]': 'setActive',
                mouseenter: 'setContainerActive',
                mouseleave: 'setContainerInactive'
            });
        },
        process: function() {
            if (!this.size() && !this.model.get('query')) {
                this.hide();
            } else {
                this.show();
            }
        },
        render: function() {
            var $ul = jQuery('<ul/>');
            if (this.size()) {
                this.model.each(function(model) {
                    var $li = jQuery('<li/>', {
                        'data-id': model.id,
                        html: this.renderItem(model)
                    });
                    $li.attr('title', $li.text());
                    $ul.append($li);
                }, this);
            } else {
                jQuery('<li/>', {
                    'class': 'autocomplete-nomatch',
                    text: "No matches"
                }).appendTo($ul);
            }
            this.$el.html($ul);
            return this;
        },
        setActive: function(event) {
            var id = jQuery(event.target).closest('li[data-id]').data('id');
            this.model.setActive(id);
        },
        isContainerActive: function() {
            return !!this._containerActive;
        },
        setContainerActive: function() {
            this._containerActive = true;
        },
        setContainerInactive: function() {
            this._containerActive = false;
        }
    });

    var SingleSelectInputDropdown = Backbone.View.extend({
        initialize: function() {
            this.render();
        },
        _loadingClass: 'loading',
        tagName: 'span',
        className: 'icon bamboo-single-select-icon drop-menu',
        events: {
            mouseenter: 'setActive',
            mouseleave: 'setInactive'
        },
        render: function() {
            this.$el.html('<span>More</span>');
            return this;
        },
        isActive: function() {
            return !!this._active;
        },
        setActive: function() {
            this._active = true;
        },
        setInactive: function() {
            this._active = false;
        },
        setLoading: function(isLoading) {
            this.$el.toggleClass(this._loadingClass, isLoading);
        }
    });

    var SingleSelectField = Backbone.View.extend({
        initialize: function(options) {
            this.$original = options.$original;
            this.dropMenu = new SingleSelectInputDropdown();
            this.$placeholder = jQuery('<input type="text" autocomplete="off" class="bamboo-single-select-field text" />');
            this.render();
        },
        _hasIconClass: 'bamboo-single-select-has-entity-icon',
        render: function() {
            this.$el.removeClass('text'); // remove AUI field class names
            this.dropMenu.$el.appendTo(this.$el);
            this.$placeholder
                .attr('placeholder', this.$original.attr('placeholder') || '')
                .val(this.$original.attr('data-field-text') || this.$original.val())
                .prependTo(this.$el);
            this.setIcon(this.$original.attr('data-icon'));
            jQuery('label').filter('[for="' + this.$original.attr('id') + '"]').click(_.bind(function() {
                this.$placeholder.focus();
            }, this));

            return this;
        },
        addDropMenuEvents: function(events) {
            this.dropMenu.delegateEvents(_.extend(SingleSelectInputDropdown.prototype.events, events));
        },
        indicateActivity: function(ds) {
            this.dropMenu.setLoading(ds.activity);
        },
        setIcon: function(iconUrl) {
            this.$icon = this.$icon || jQuery('<div />', { 'class': 'bamboo-single-select-entity-icon' });
            if (iconUrl) {
                this.$icon.css('background-image', 'url(' + iconUrl + ')').appendTo(this.$el);
                this.$el.addClass(this._hasIconClass);
            } else {
                this.$icon.detach();
                this.$el.removeClass(this._hasIconClass);
            }
        }
    });

    var SingleSelect = Backbone.View.extend({
        initialize: function(options) {
            this._chosen = options.chosen || !!this.$el.data('chosen');
            this._activeClass = options.activeClass || 'active';
            this.datasource = new AJS.ProgressiveDataSet(options.bootstrap || [], {
                queryEndpoint: options.queryEndpoint,
                queryParamKey: options.queryParamKey,
                maxResults: options.maxResults,
                allowEmptyQuery: (typeof options.allowEmptyQuery != 'undefined' ? options.allowEmptyQuery : true),
                matchAnyOnEmptyQuery: options.matchAnyOnEmptyQuery,
                queryData: options.queryData
            });
            this.datasource.matcher = options.matcher;
            this.datasource.parse = options.parser;

            this.field = new SingleSelectField({
                className: 'bamboo-single-select ' + this.$el.attr('class'),
                $original: this.$el
            });

            this.queryInput = new AJS.QueryInput({ el: this.field.$placeholder });
            this.queryInput
                .on('change', this.datasource.query)
                .on('change', this.handleInputChange, this)
                .delegateEvents(_.extend(AJS.QueryInput.prototype.events || {}, {
                    keydown: _.bind(this.handleInputKeydown, this),
                    blur: _.bind(this.handleInputBlur, this),
                    focus: _.bind(this.handleInputFocus, this),
                    click: _.bind(this.requestMatches, this)
                }));

            var singleSelect = this;

            var ResultView = SingleSelectResultView.extend({
                renderItem: function(model) {
                    return options.resultItemTemplate(model.attributes);
                },
                process: function() {
                    if (!singleSelect.disableRendering)
                    {
                        SingleSelectResultView.prototype.process.call(this);
                    }
                    singleSelect.disableRendering = false;
                }
            });

            this.field.addDropMenuEvents({
                click: _.bind(function() {
                    this.queryInput.$el.focus();
                    if (this.queryResult.$el.is(':visible')) {
                        this.queryResult.hide();
                    } else {
                        this.requestMatches();
                    }
                }, this)
            });

            this.datasource.on('activity', this.field.indicateActivity, this.field);

            this.queryResult = new ResultView({ source: this.datasource });
            this.queryResult
                .on('selected', this.setValue, this)
                .on('rendered', this.highlightActive, this)
                .on('shown', this.indicateActive, this)
                .on('hidden', this.indicateInactive, this)
                .model.on('change:active', this.highlightActive, this);

            this.render();
        },
        render: function() {
            this.field.$el.insertBefore(this.$el.hide());
            this.queryResult.hide();
            this.queryResult.$el.addClass('autocomplete').appendTo(document.body);

            return this;
        },
        highlightActive: function() {
            var active = this.queryResult.model.get('active');
            var id = active && active.id;
            this.queryResult.$('li[data-id]').filter(function(i, li) {
                var $li = jQuery(li);
                var method = (id == $li.attr('data-id')) ? 'addClass' : 'removeClass';
                $li[method]('active');
            });
        },
        reset: function() {
            this.datasource.reset();
            this.setValue(null);
            this.trigger('reset');
        },
        setValue: function(model) {
            this.$el.val(model ? model.id : '');
            this.queryInput.val(model ? this.getDisplayValue(model) : '');
            this.field.setIcon(model ? this.getIconValue(model) : null);
            this.queryResult.hide();
            if (model) {
                this.queryInput.$el.focus();
                this._chosen = true;
                this.trigger('selected', model);
            } else {
                this._chosen = false;
            }
            // QueryResult and dropmenu being active prevents blurring the field,
            // so ensure we set them inactive if an option is chosen to allow taking focus from field
            this.queryResult.setContainerInactive();
            this.field.dropMenu.setInactive();
        },
        getDisplayValue: function(model) {
            return model.id;
        },
        getIconValue: function() {
            return null;
        },
        indicateActive: function() {
            this.queryInput.$el.addClass(this._activeClass);
        },
        indicateInactive: function() {
            this.queryInput.$el.removeClass(this._activeClass);
        },
        requestMatchesQuietly: function(callback) {
            this.requestMatches();

            this.datasource.once('sync',
                    _.bind(function()
                    {
                        callback();
                        this.disableRendering = true;
                    }, this));
        },
        requestMatches: function() {
            this.datasource.query(this._chosen ? '' : this.queryInput.val());
        },
        handleInputKeydown: function(e) {
            var active;
            if (this.queryResult.$el.is(':visible')) {
                switch (e.which) {
                    case jQuery.ui.keyCode.UP:
                        e.preventDefault();
                        this.queryResult.model.prev();
                        break;
                    case jQuery.ui.keyCode.DOWN:
                        e.preventDefault();
                        this.queryResult.model.next();
                        break;
                    case jQuery.ui.keyCode.ENTER:
                    case jQuery.ui.keyCode.TAB:
                        e.preventDefault();
                        active = this.queryResult.model.get('active');
                        if (active) {
                            this.queryResult.trigger('selected', active);
                        }
                        break;
                    case jQuery.ui.keyCode.ESCAPE:
                        e.stopPropagation();
                        this.queryResult.hide();
                        break;
                }
            } else if (e.which == jQuery.ui.keyCode.DOWN) {
                this.requestMatches();
            }
        },
        handleInputBlur: function() {
            if (this.field.dropMenu.isActive() || this.queryResult.isContainerActive()) {
                this.queryInput.$el.focus();
            } else {
                if (this.queryResult.$el.is(':visible')) {
                    this.queryResult.hide();
                }
            }
        },
        handleInputFocus: function() {
            var $input = this.queryInput.$el;
            var inputOffset = $input.offset();
            var inputWidth = $input.outerWidth();
            var inputHeight = $input.outerHeight();
            this.queryResult.$el.css({
                width: inputWidth,
                top: inputOffset.top + inputHeight,
                left: inputOffset.left
            });
            // setTimeout will fire after user has clicked in field to give it focus,
            // ensures text is always selected on focus
            setTimeout(function() {
                $input.select();
            });
        },
        handleInputChange: function() {
            this.$el.val(this.queryInput.val());
            this.field.setIcon(null);
            this._chosen = false;
        }
    });

    return SingleSelect;

});

/**
 * Export functionality onto Bamboo prototype.
 * To be removed in 6.0
 * @deprecated
 */
if (AJS.namespace) {
    AJS.namespace('BAMBOO.SingleSelect', null, require('widget/single-select'));
}
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:variables', location = '/widget/autocomplete-controls/bamboo/variables/variable-singleselect.js' */
define('widget/variable-single-select', [
    'jquery',
    'underscore',
    'backbone',
    'widget/single-select'
], function(
    $,
    _,
    Backbone,
    SingleSelect
) {

    'use strict';

    /* currently only supports pre-bootstrapped data.  No rest end point. */
    var VariableSingleSelect = Backbone.View.extend({
        initialize: function(options) {
            options || (options = {});
            this.singleSelect = new SingleSelect({
                el: this.$el,
                bootstrap: options.bootstrap ? _.map(options.bootstrap, function(variable) {
                    return $.extend(true, variable, {id: variable.key});
                }) : [],
                maxResults: options.maxResults || 5,
                matcher: _.bind(this.matcher, this),
                resultItemTemplate: bamboo.widget.autocomplete.variableItemResult
            });
            this.singleSelect.on('selected', this.handleSelection, this);
        },
        containsMatch: function(str, find) {
            return (str.toLowerCase().indexOf(find.toLowerCase()) > -1);
        },
        matcher: function(variable, query) {
            var matches = false;
            matches = matches || this.containsMatch(variable.get('key'), query);
            return matches;
        },
        handleSelection: function(model) {
            this.$el.trigger('selected', model);
        }
    });

    return VariableSingleSelect;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: "Other applications", content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics', location = 'browser-metrics-legacy.js' */
(function(){var a=window.BrowserMetrics||{};var b=window.WRM||{};a.isFunction=function(c){return !!(c&&c.constructor&&c.call&&c.apply)};a.isEnabled=function(){if(a.enabled===undefined){var c="com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy";a.enabled=a.isFunction(b.data)?b.data(c):b.data.claim(c)}return a.enabled};window.BrowserMetrics=a}());(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var f=5;var e=12000;var c=function(g){return Math.round(g)};var a=function(g){return Math.round(g*100)/100};var d=function(k){var h=(function(){var n=/^(\w+):\/\/([^\/]*)(.*)$/;return function(p){var o=p.match(n);if(!o){return{path:p}}return{scheme:o[1],host:o[2],path:o[3]}}}());var i=(function(){var n=["secureConnectionStart","requestStart","responseStart","responseEnd","domContentLoadedEventStart","domContentLoadedEventEnd","loadEventEnd"];return function(o){if(k.performance){var s=k.performance.timing;var p=s.navigationStart;if(p){for(var r=0;r<n.length;++r){var q=n[r];var t=s[q];if(t){o(q,t-p)}}}}}}());var g=(function(){var o=[{key:"LOGIN",pattern:/^\/login.*/i},{key:"J-DASH",pattern:/^\/secure\/dashboard\.jspa.*/i},{key:"J-ISSUE",pattern:/^\/browse\/\w+\-\w+.*/i},{key:"J-NAV",pattern:/^\/issues.*/i},{key:"J-RAPID",pattern:/secure\/rapidboard\.jspa/i},{key:"SD-AGENT",pattern:/^(\/\w+)?\/servicedesk\/agent\/.*/i},{key:"SD-CUSTOMER",pattern:/^(\/\w+)?\/servicedesk\/customer\/.*/i},{key:"C-DASH",pattern:/^\/wiki(\/)?(\?.*|#.*)?$/i},{key:"C-DASH",pattern:/^\/wiki\/dashboard\.action.*$/i},{key:"C-SPACE",pattern:/^\/wiki\/display\/\w+(\?.*|#.*)?$/i},{key:"C-PAGE",pattern:/^\/wiki\/display\/\w+\/.*/i},{key:"C-PAGE",pattern:/^\/wiki\/pages\/viewpage\.action.*/i},{key:"C-BLOG",pattern:/^\/wiki\/display\/~\w+\/\d+\/\d+\/\d+\/.*/i},{key:"C-EDITOR",pattern:/^\/wiki\/pages\/editpage\.action.*/i},{key:"C-CREATE",pattern:/^\/wiki\/pages\/createpage\.action.*/i}];return function n(){var r=h(k.location.href).path;for(var p=0;p<o.length;++p){var q=o[p];if(r.match(q.pattern)){return q.key}}return null}}());function j(){var n=g();if(n){i(function(p,r){var o="browser.metrics."+p,q={version:f,page:n,value:r>e?"x":Math.ceil((r)/100),rawValue:c(r)};AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(o,q):AJS.trigger("analyticsEvent",{name:o,data:q})})}}function m(){try{j()}catch(n){if(window.console){window.console.log("Error reporting browser metrics: "+n)}}}function l(){if(k.performance.timing.loadEventEnd){m()}else{setTimeout(l,1000)}}if(k.performance&&k.performance.timing){l()}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initPageLoad=d}}());(function(){var b=window.BrowserMetrics||{};if(b.isEnabled()){var e=5;var d=12000;var a=function(f){return Math.round(f*100)/100};var c=function(g){var l={};function h(){return g.performance&&g.performance.now?g.performance.now():new Date().getTime()}function n(o){return o===Object(o)}function k(o){if(n(o)){return o.eventName+"."+o.eventType}else{return o}}function m(o){if(n(o)){return o.eventName}else{return o}}function j(o){if(n(o)){return o.eventType}else{return""}}function f(o){var p=k(o);l[p]=h()}function i(r,u){var v=k(r);if(!l[v]){throw ("Error logging browser metrics event end: no start event for key '"+v+"'")}var t=h()-l[v];l[v]=null;var o=m(r),q=j(r);var p="browser.metrics.e."+o+(u?"."+u:""),s={version:e,value:t>d?"x":Math.ceil((t)/100),rawValue:a(t),eventType:q};g.AJS.Analytics?g.AJS.Analytics.triggerPrivacyPolicySafeEvent(p,s):g.AJS.trigger("analyticsEvent",{name:p,data:s})}return{start:f,end:i}};if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initEvents=c}}());(function(){var a=window.BrowserMetrics||{};if(a.isEnabled()){if(Math.random()<0.1){window.ATL_PERF&&window.ATL_PERF.initPageLoad&&window.ATL_PERF.initPageLoad(window)}window.ATL_PERF&&window.ATL_PERF.initEvents&&(function(){window.BrowserMetrics=window.ATL_PERF.initEvents(window)}())}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml("Application Links") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml("Shortcuts") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}}) + '<script>\n                (function (NL) {\n                    var initialise = function () {\n                        new NL.SideBar({\n                            sidebarContents: \'#app-switcher\'\n                        });\n                    };\n                    if (NL.SideBar) {\n                        initialise();\n                    } else {\n                        NL.onInit = initialise;\n                    }\n                }(window.NL = (window.NL || {})));\n                window.NL.isUserAdmin = ' + soy.$$escapeHtml(false) + '<\/script>';
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true">' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(c,a){a.SideBar=function(d){var e=this;this.$sidebar=null;d=c.extend({sidebarContents:null},d);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(g,f){e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:f,name:g}))};this.getProjectData=function(){var f=c(".project-shortcut-dialog-trigger"),g=f.data("key"),h=f.data("entity-type");if(f.size()==0||!g||!h){c(".app-switcher-shortcuts").remove();return}var j,i;i=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+g,cache:false,data:{entityType:h},dataType:"json"});j=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+g,cache:false,data:{entityType:h},dataType:"json"});c.when(i,j).then(function(l,k){e.updateProjectShortcuts(l,k,{key:g,entityType:h,name:f.data("name"),avatarUrl:f.find("img").prop("src")})},e.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=c(d.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){c(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(f,h){var g=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+f,label:"Customize shortcuts",title:""}];if(e.entityMappings[h]){g.push({href:e.generateEntityLinksUrl(f,e.entityMappings[h]),label:"Manage product links",title:""})}e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:g}))};this.updateAppLinks=function(f){c(function(){e.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:f}));if(a.isUserAdmin){e.addApplicationsCog()}e.bindAnalyticsHandlers(e.getSidebar(),f)})};this.updateProjectShortcuts=function(i,g,h){var j=i[0].shortcuts,f=g[0].shortcuts;e.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:j.concat(f)}));if(a.isUserAdmin){e.addProjectShortcutsCog(h.key,h.entityType)}e.populateProjectHeader(h.name,h.avatarUrl);e.bindAnalyticsHandlers(e.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(f,g){if(g===e.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+g+"&key="+f}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+g+"/"+f}};this.showAppSwitcherError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.showProjectShortcutsError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.retryLoading=function(f){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();f&&f.stopPropagation()};this.bindAnalyticsHandlers=function(f,g){};this.getLinks();c(this.getProjectData);this.toggleSidebar=function(h){var i=e.getSidebar(),g=c("body"),f=c(window.document);if(!g.hasClass("app-switcher-open")){var k=c("#header");i.css("left",-i.width());i.parent("body").length||i.appendTo("body");b({data:i});i.animate({left:0},300);function j(l){var n=l.target&&c(l.target),m=l.keyCode;if(l.originalEvent===h.originalEvent){return}if(n&&!m&&!(n.closest(i).length||n.closest(k).length)&&h.which==1&&!(l.shiftKey||l.ctrlKey||l.metaKey)){e.toggleSidebar()}else{if(m===27){e.toggleSidebar()}}}f.on("click.appSwitcher",j);f.on("keydown.appSwitcher",j);f.on("scroll.appSwitcher",i,b)}else{f.off(".appSwitcher")}g.toggleClass("app-switcher-open")};c("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(f){var d=c(document).scrollTop(),g=c("#header"),e=(g.height()+g.offset().top)-d;if(e>=0){f.data.css({top:e,position:"fixed"})}else{f.data.css({top:0,left:0,position:"fixed"})}}if(a.onInit){a.onInit()}}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
(function(e,c){c.AppSwitcher=function(f){var g=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var h=this;this.$dropdown=null;f=e.extend({dropdownContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=e(f.dropdownContents)}return this.$dropdown};this.updateDropdown=function(i){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:i,showAdminLink:c.environment.isUserAdmin,adminLink:g}));h.bindAnalyticsHandlers(h.getDropdown(),i);if(window.NL.environment.isAppSuggestionAvailable){h.handleSuggestionApps(i)}})};this.bindAnalyticsHandlers=function(i,j){};this.handleSuggestionApps=function(k){var l=_.map(k,function(m){return m.applicationType.toLowerCase()});$suggestionApps=e("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");$suggestionApps.html(navlinks.templates.appswitcher_old.suggestionApps);var j=$suggestionApps.find(".suggestion-apps");var i=false;_.each(a,function(m){if(!_.contains(l,m.appName)){i=true;j.append(navlinks.templates.appswitcher_old.suggestionApp({appName:m.appName,appDesc:m.appDesc}))}});if(!i){return}e("#app-switcher").append($suggestionApps);e(".app-discovery-suggestion-app").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.user.select."+e(this).find("a").attr("id").toLowerCase()});window.open(e(this).find("a").attr("title"),"_blank")});e(".app-discovery-suggestion-app").hover(function(){e(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});e(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});d(b,"true");$suggestionApps.remove()})};this.showError=function(){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(h.retryLoading,h))})};this.retryLoading=function(i){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();i&&i.stopPropagation()};this.getLinks()};var b="key-no-thanks";var a=[{appName:"jira",appDesc:"Issue & Project Tracking Software"},{appName:"confluence",appDesc:"Collaboration and content sharing"},{appName:"bamboo",appDesc:"Continuous integration"}];var d=function(f,g){e.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:f,value:g})})};if(c.onInit){c.onInit()}}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape("Configure\x26hellip;") + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default'}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}}) + '<script>\n            (function (NL) {\n                var initialise = function () {\n                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.\n                    window.atlassian = window.atlassian || window.aui;\n                    new NL.AppSwitcher({\n                        dropdownContents: \'#app-switcher\'\n                    });\n                };\n                if (NL.AppSwitcher) {\n                    initialise();\n                } else {\n                    NL.onInit = initialise;\n                }\n            }(window.NL = (window.NL || {})));\n            window.NL.environment = ' + soy.$$escapeHtml({}) + ';<\/script>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  return '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.appName) + '" href="#" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.appName) + '-product-icon" title="https://www.atlassian.com/software/' + soy.$$escapeHtml(opt_data.appName) + '"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.appDesc) + '</div></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml("Try other Atlassian apps") + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml("Don\x27t show this again") + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/inline-dialog.js' */
(function(d){AJS.CustomInlineDialog=AJS.CustomInlineDialog||function(B,n,r,p){p=p||[];if(p.hasOwnProperty("getArrowAttributes")){getArrowAttributesDeprecationLogger()}if(p.hasOwnProperty("getArrowPath")){getArrowPathDeprecationLogger();if(p.hasOwnProperty("gravity")){getArrowPathWithGravityDeprecationLogger()}}if(p.hasOwnProperty("onTop")){onTopDeprecationLogger();if(p.onTop&&p.gravity===undefined){p.gravity="s"}}if(typeof n==="undefined"){n=String(Math.random()).replace(".","");if(d("#inline-dialog-"+n+", #arrow-"+n+", #inline-dialog-shim-"+n).length){throw"GENERATED_IDENTIFIER_NOT_UNIQUE"}}var z=d.extend(false,AJS.CustomInlineDialog.opts,p);if(z.gravity==="w"){z.offsetX=p.offsetX===undefined?10:p.offsetX;z.offsetY=p.offsetY===undefined?0:p.offsetY}var v=function(){return window.Raphael&&p&&(p.getArrowPath||p.getArrowAttributes)};var j;var q;var K;var u=false;var A=false;var I=false;var J;var x;var g=d('<div id="inline-dialog-'+n+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+n+'" class="aui-inline-dialog-arrow arrow"></div></div>');var m=d("#arrow-"+n,g);var G=g.find(".contents");if(!v()){g.find(".aui-inline-dialog-arrow").addClass("aui-css-arrow")}if(!z.displayShadow){G.addClass("aui-inline-dialog-no-shadow")}if(z.autoWidth){G.addClass("aui-inline-dialog-auto-width")}else{G.css("width",z.width+"px")}G.mouseover(function(O){clearTimeout(q);g.unbind("mouseover")}).mouseout(function(){E()});var D=function(){if(!j){j={popup:g,hide:function(){E(0)},id:n,show:function(){y()},persistent:z.persistent?true:false,reset:function(){function S(U,T){U.css(T.popupCss);if(v()){if(T.gravity==="s"){T.arrowCss.top-=d.browser.msie?10:9}if(!U.arrowCanvas){U.arrowCanvas=Raphael("arrow-"+n,16,16)}var V=z.getArrowPath,W=d.isFunction(V)?V(T):V;U.arrowCanvas.path(W).attr(z.getArrowAttributes())}else{m.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");if(T.gravity==="s"&&!m.hasClass("aui-bottom-arrow")){m.addClass("aui-bottom-arrow")}else{if(T.gravity==="n"){}else{if(T.gravity==="w"){m.addClass("aui-left-arrow")}else{if(T.gravity==="e"){m.addClass("aui-right-arrow")}}}}}m.css(T.arrowCss)}var P=AJS.$(window).height();var Q=Math.round(P*0.75);g.children(".aui-inline-dialog-contents").css("max-height",Q);var O=z.calculatePositions(g,x,J,z);if(O.hasOwnProperty("displayAbove")){displayAboveDeprecationLogger();O.gravity=O.displayAbove?"s":"n"}S(g,O);g.fadeIn(z.fadeTime,function(){});if(d.browser.msie&&~~(d.browser.version)<10){var R=d("#inline-dialog-shim-"+n);if(!R.length){d(g).prepend(d('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+n+'" frameBorder="0" src="javascript:false;"></iframe>'))}R.css({width:G.outerWidth(),height:G.outerHeight()})}}}}return j};var y=function(){if(g.is(":visible")){return}K=setTimeout(function(){if(!I||!A){return}z.addActiveClass&&d(B).addClass("active");u=true;if(!z.persistent){H()}AJS.CustomInlineDialog.current=D();d(document).trigger("showLayer",["inlineDialog",D()]);D().reset()},z.showDelay)};var E=function(O){if(typeof O=="undefined"&&z.persistent){return}A=false;if(u&&z.preHideCallback.call(g[0].popup)){O=(O==null)?z.hideDelay:O;clearTimeout(q);clearTimeout(K);if(O!=null){q=setTimeout(function(){l();z.addActiveClass&&d(B).removeClass("active");g.fadeOut(z.fadeTime,function(){z.hideCallback.call(g[0].popup)});if(g.arrowCanvas){g.arrowCanvas.remove();g.arrowCanvas=null}u=false;A=false;d(document).trigger("hideLayer",["inlineDialog",D()]);AJS.CustomInlineDialog.current=null;if(!z.cacheContent){I=false;w=false}},O)}}};var F=function(R,P){var O=d(P);z.upfrontCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});g.each(function(){if(typeof this.popup!="undefined"){this.popup.hide()}});if(z.closeOthers){d(".aui-inline-dialog").each(function(){!this.popup.persistent&&this.popup.hide()})}x={target:O};if(!R){J={x:O.offset().left,y:O.offset().top}}else{J={x:R.pageX,y:R.pageY}}if(!u){clearTimeout(K)}A=true;var Q=function(){w=false;I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()};if(!w){w=true;if(d.isFunction(r)){r(G,P,Q)}else{d.get(r,function(T,S,U){G.html(z.responseHandler(T,S,U));I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()})}}clearTimeout(q);if(!u){y()}return false};g[0].popup=D();var w=false;var t=false;var s=function(){if(!t){d(z.container).append(g);t=true}};var o=d(B);if(z.onHover){if(z.useLiveEvents){if(o.selector){d(document).on("mousemove",o.selector,function(O){s();F(O,this)}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.mousemove(function(O){s();F(O,this)}).mouseout(function(){E()})}}else{if(!z.noBind){if(z.useLiveEvents){if(o.selector){d(document).on("click",o.selector,function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.click(function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).mouseout(function(){E()})}}}var M=function(){return u&&z.closeOnTriggerClick};var H=function(){k();f()};var l=function(){C();N()};var i=false;var h=n+".inline-dialog-check";var k=function(){if(!i){d("body").bind("click."+h,function(P){var O=d(P.target);if(O.closest("#inline-dialog-"+n+" .contents").length===0){E(0)}});i=true}};var C=function(){if(i){d("body").unbind("click."+h)}i=false};var L=function(O){if(O.keyCode===27){E(0)}};var f=function(){d(document).on("keydown",L)};var N=function(){d(document).off("keydown",L)};g.show=function(P,O){if(P){P.stopPropagation()}s();if(z.noBind&&!(B&&B.length)){F(P,O===undefined?P.target:O)}else{F(P,B)}};g.hide=function(){E(0)};g.refresh=function(){if(u){D().reset()}};g.getOptions=function(){return z};return g};function c(g){var f=d(g);var h=d.extend({left:0,top:0},f.offset());return{left:h.left,top:h.top,width:f.outerWidth(),height:f.outerHeight()}}function b(h,j,t,f){var m=AJS.$.isFunction(f.offsetX)?f.offsetX(h,j,t,f):f.offsetX;var l=AJS.$.isFunction(f.offsetY)?f.offsetY(h,j,t,f):f.offsetY;var q=AJS.$.isFunction(f.arrowOffsetX)?f.arrowOffsetX(h,j,t,f):f.arrowOffsetX;var p=AJS.$.isFunction(f.arrowOffsetY)?f.arrowOffsetY(h,j,t,f):f.arrowOffsetY;var s=f.container.toLowerCase()!=="body";var g=AJS.$(f.container);var o=s?AJS.$(f.container).parent():AJS.$(window);var r=s?g.offset():{left:0,top:0};var k=s?o.offset():{left:0,top:0};var i=j.target;var u=i.offset();var n=i[0].getBBox&&i[0].getBBox();return{screenPadding:10,arrowMargin:5,window:{top:k.top,left:k.left,scrollTop:o.scrollTop(),scrollLeft:o.scrollLeft(),width:o.width(),height:o.height()},scrollContainer:{width:g.width(),height:g.height()},trigger:{top:u.top-r.top,left:u.left-r.left,width:n?n.width:i.outerWidth(),height:n?n.height:i.outerHeight()},dialog:{width:h.width(),height:h.height(),offset:{top:l,left:m}},arrow:{height:h.find(".arrow").outerHeight(),offset:{top:p,left:q}}}}function e(f,p,G,r){var n=b(f,p,G,r);var j=n.screenPadding;var k=n.window;var t=n.trigger;var D=n.dialog;var i=n.arrow;var z=n.scrollContainer;var E={top:t.top-k.scrollTop,left:t.left-k.scrollLeft};var A=Math.floor(t.height/2);var v=Math.floor(D.height/2);var u=Math.floor(i.height/2);var C=E.left-D.offset.left-j;var H=z.width-E.left-t.width-D.offset.left-j;var B=C>=D.width;var h=H>=D.width;var l=!h&&B?"e":"w";var o=E.top+A-u;var q=k.height-o-i.height;j=Math.min(j,o-n.arrowMargin);j=Math.min(j,q-n.arrowMargin);var g=E.top+A;var x=Math.max(g-j,0);var F=Math.max(k.height-g-j,0);var y=v-D.offset.top>x;var m=v+D.offset.top>F;var w;var s;if(y){w={top:k.scrollTop+j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{if(m){w={top:k.scrollTop+k.height-D.height-j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{w={top:t.top+A-v+D.offset.top,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:v-u+i.offset.top}}}return{gravity:l,popupCss:w,arrowCss:s}}function a(g,o,z,s){var x=AJS.$.isFunction(s.offsetX)?s.offsetX(g,o,z,s):s.offsetX;var v=AJS.$.isFunction(s.offsetY)?s.offsetY(g,o,z,s):s.offsetY;var m=AJS.$.isFunction(s.arrowOffsetX)?s.arrowOffsetX(g,o,z,s):s.arrowOffsetX;var l=AJS.$.isFunction(s.arrowOffsetY)?s.arrowOffsetY(g,o,z,s):s.arrowOffsetY;var f=c(window);var p=c(o.target);var y=c(g);var j=c(g.find(".aui-inline-dialog-arrow"));var i=p.left+p.width/2;var u=(window.pageYOffset||document.documentElement.scrollTop)+f.height;var k=10;y.top=p.top+p.height+~~v;y.left=p.left+~~x;var r=f.width-(y.left+y.width+k);j.left=i-y.left+~~m;j.top=-(j.height/2);var n=p.top>y.height;var h=(y.top+y.height)<u;var q=(!h&&n)||(n&&s.gravity==="s");if(q){y.top=p.top-y.height-(j.height/2);j.top=y.height}if(s.isRelativeToMouse){if(r<0){y.right=k;y.left="auto";j.left=z.x-(f.width-y.width)}else{y.left=z.x-20;j.left=z.x-y.left}}else{if(r<0){y.right=k;y.left="auto";var w=f.width-y.right;var t=w-y.width;j.right="auto";j.left=i-t-j.width/2}else{if(y.width<=p.width/2){j.left=y.width/2;y.left=i-y.width/2}}}return{gravity:q?"s":"n",displayAbove:q,popupCss:{left:y.left,top:y.top,right:y.right},arrowCss:{left:j.left,top:j.top,right:j.right}}}AJS.CustomInlineDialog.opts={onTop:false,responseHandler:function(g,f,h){return g},closeOthers:true,isRelativeToMouse:false,addActiveClass:true,onHover:false,useLiveEvents:false,noBind:false,fadeTime:100,persistent:false,hideDelay:10000,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:true,displayShadow:true,autoWidth:false,gravity:"n",closeOnTriggerClick:false,preHideCallback:function(){return true},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(f,i,j,h){h=h||{};var g=h.gravity==="w"?e:a;return g(f,i,j,h)},getArrowPath:function(f){if(f.gravity==="s"){return"M0,8L8,16,16,8"}else{return"M0,8L8,0,16,8"}},getArrowAttributes:function(){return{fill:"#fff",stroke:"#ccc"}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-jenkins-importer:jenkinsImporterWeb', location = 'layout/jenkins-importer/jenkins-importer.soy' */
// This file was automatically generated from jenkins-importer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ji.layout.jenkinsImporter.
 */

if (typeof ji == 'undefined') { var ji = {}; }
if (typeof ji.layout == 'undefined') { ji.layout = {}; }
if (typeof ji.layout.jenkinsImporter == 'undefined') { ji.layout.jenkinsImporter = {}; }


ji.layout.jenkinsImporter.jenkinsImporter = function(opt_data, opt_ignored) {
  return '<section id="content" role="main">' + aui.page.pageHeader({content: '' + aui.page.pageHeaderMain({content: '<h1>' + soy.$$escapeHtml("Jenkins Importer") + '</h1>'}) + aui.page.pageHeaderActions({content: '' + aui.progressTracker.progressTracker({isInverted: true, steps: [{text: "Locate Jenkins", isCurrent: opt_data.currentStep == 1}, {text: "Choose jobs", isCurrent: opt_data.currentStep == 2}, {text: "Results", isCurrent: opt_data.currentStep == 3}]})})}) + aui.page.pagePanel({content: '' + aui.page.pagePanelContent(opt_data)}) + '</section>';
};
if (goog.DEBUG) {
  ji.layout.jenkinsImporter.jenkinsImporter.soyTemplateName = 'ji.layout.jenkinsImporter.jenkinsImporter';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-jenkins-importer:jenkinsImporterWeb', location = 'layout/jenkins-importer/jenkins-importer.js' */
(function(b,a){a.JENKINS_IMPORTER={};a.JENKINS_IMPORTER.Progressbar=function(c){var d=this,e=false;this.options=b.extend({classes:{progressbar:null},timeout:1000},c);this.updateTimeout=null;this.scheduleUpdate=function(){clearTimeout(d.updateTimeout);if(!e){d.updateTimeout=setTimeout(d.getProgress,d.options.timeout)}};this.getProgress=function(){return b.ajax({url:AJS.contextPath()+"/admin/jenkinsImport/getProgress.action",dataType:"json",contentType:"application/json",cache:false}).done(d.updateProgressbar).done(d.redirectOnCompletion).always(d.scheduleUpdate)};this.updateProgressbar=function(f){b("."+d.options.classes.progressbar).replaceWith(ji.page.importProgress.progressBar({current:f.chainsImported+1,number:f.chainsToImport}))};this.redirectOnCompletion=function(f){if(f.importFinished){e=true;window.location.replace(AJS.contextPath()+"/admin/jenkinsImport/importResultSummary.action")}};this.getProgress()};a.JENKINS_IMPORTER.JobSelector=function(c){var d=this;this.options=b.extend({classes:{table:null,jobRow:null,pipelineRow:null,enable:null,select:null}},c);this.selectToggle=function(j){var i=b(this);var f=i.closest("."+d.options.classes.jobRow+", ."+d.options.classes.pipelineRow);var l=i.is(":checked");var g=['input[type="text"],',"."+d.options.classes.enable];var k,h;d.toggleFields(f,g.join(","),!l);if(f.hasClass(d.options.classes.pipelineRow)){k=f.find("."+d.options.classes.enable).val();h=f.closest("."+d.options.classes.table).find("."+d.options.classes.jobRow).filter('[data-parent="'+k+'"]');d.toggleFields(h.map(d.hasCheckedSelectField),g.concat("."+d.options.classes.select).join(","),!l);d.toggleFields(h.map(d.hasNoCheckedSelectField),"."+d.options.classes.select,!l)}};this.toggleFields=function(f,e,g){f.find(e).prop("disabled",g)};this.hasCheckedSelectField=function(){return(d.isChecked(this)?this:null)};this.hasNoCheckedSelectField=function(){return(!d.isChecked(this)?this:null)};this.isChecked=function(e){return !!b(e).has("."+d.options.classes.select+":checked").length};this.init=function(){b(function(){b("."+d.options.classes.table).on("change","."+d.options.classes.select,d.selectToggle)})};this.init()};a.JENKINS_IMPORTER.IssueCollector=function(c){var d=this;this.options=b.extend({trigger:null,description:null,containers:{feedbackSubmitConfirmation:null}},c);this.submitFeedbackDone=function(f,g,e){AJS.messages.success(d.options.containers.feedbackSubmitConfirmation,{title:"Your feedback was successfully submitted",body:AJS.format("Issue \u003ca href=\u0022{1}\u0022\u003e{0}\u003c/a\u003e was successfully created",f.key,f.url),closeable:false})};this.submitFeedbackFail=function(e,g,f){AJS.messages.error(d.options.containers.feedbackSubmitConfirmation,{title:"There was a problem submitting your feedback",body:g,closeable:false})};this.setDialogToConfirmationPage=function(){d.dialog.gotoPage(2)};this.submitFeedback=function(){d.dialog.gotoPage(1);b.ajax({type:"POST",url:AJS.contextPath()+"/rest/ji/latest/submitFeedback/",data:{description:b(d.options.description).val()},dataType:"json"}).done(d.submitFeedbackDone).fail(d.submitFeedbackFail).always(d.setDialogToConfirmationPage)};this.init=function(){b(d.options.trigger).click(function(f){f.preventDefault();d.dialog=new AJS.Dialog({width:600}).addHeader("Tell us what you think").addPanel("feedbackForm",ji.page.importResult.feedbackSubmitForm({})).addButton("Submit",function(){d.submitFeedback()}).addCancel("Close",function(){d.dialog.remove()}).addPage().addPanel("progress",ji.page.importResult.feedbackSubmitProgress({})).addPage().addPanel("confirmation",ji.page.importResult.feedbackSubmitConfirmation({})).addCancel("Close",function(){d.dialog.remove()}).gotoPage(0);d.dialog.show()})};this.init()}}(jQuery,window.BAMBOO=(window.BAMBOO||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-jenkins-importer:jenkinsImporterWeb', location = 'page/import-progress/import-progress.soy' */
// This file was automatically generated from import-progress.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ji.page.importProgress.
 */

if (typeof ji == 'undefined') { var ji = {}; }
if (typeof ji.page == 'undefined') { ji.page = {}; }
if (typeof ji.page.importProgress == 'undefined') { ji.page.importProgress = {}; }


ji.page.importProgress.importProgress = function(opt_data, opt_ignored) {
  return '<div class="ji-import-progress">' + ji.page.importProgress.progressBar({number: opt_data.numberOfPlansToImport, current: opt_data.currentPlanBeingImported}) + '<p>' + soy.$$escapeHtml("This might take a few minutes.") + '</p><p>' + soy.$$escapeHtml("Please do not close this browser window.") + '</p></div>';
};
if (goog.DEBUG) {
  ji.page.importProgress.importProgress.soyTemplateName = 'ji.page.importProgress.importProgress';
}


ji.page.importProgress.progressBar = function(opt_data, opt_ignored) {
  return '<div class="ji-import-progress-bar"><span class="bar" style="width: ' + soy.$$escapeHtml(Math.floor(Math.min(opt_data.current, opt_data.number) / opt_data.number * 100)) + '%;"></span><span class="percentage">' + soy.$$escapeHtml(AJS.format("{0}% imported",Math.round(Math.min(opt_data.current, opt_data.number) / opt_data.number * 100))) + '</span><span class="current-status">' + soy.$$filterNoAutoescape(AJS.format("Currently importing Plan {0} of {1}\x26hellip;",Math.min(opt_data.current, opt_data.number),opt_data.number)) + '</span></div>';
};
if (goog.DEBUG) {
  ji.page.importProgress.progressBar.soyTemplateName = 'ji.page.importProgress.progressBar';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-jenkins-importer:jenkinsImporterWeb', location = 'page/import-result/import-result.soy' */
// This file was automatically generated from import-result.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ji.page.importResult.
 */

if (typeof ji == 'undefined') { var ji = {}; }
if (typeof ji.page == 'undefined') { ji.page = {}; }
if (typeof ji.page.importResult == 'undefined') { ji.page.importResult = {}; }


ji.page.importResult.importResult = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({extraClasses: 'ji-import-results-actions', content: '' + aui.toolbar2.item({item: 'primary', content: '' + aui.buttons.button({id: 'ji-import-results-view-plans', text: "View Plans", tagName: 'a', type: 'primary', extraClasses: 'aui-style', extraAttributes: {href: "" + '/browse/JIMPORT'}}) + ((opt_data.logFileDownloadUrl != '') ? aui.buttons.button({id: 'ji-import-results-download-logs', text: "Download import log file", tagName: 'a', extraClasses: 'aui-style', extraAttributes: {href: opt_data.logFileDownloadUrl}}) : '') + aui.buttons.button({id: 'ji-import-results-submit-feedback', text: "Submit feedback", tagName: 'a', extraClasses: 'aui-style'})})});
};
if (goog.DEBUG) {
  ji.page.importResult.importResult.soyTemplateName = 'ji.page.importResult.importResult';
}


ji.page.importResult.shareOnTwitter = function(opt_data, opt_ignored) {
  return '<p class="ji-share-on-twitter"><q>' + soy.$$escapeHtml("jenkins.twitter.share.message") + '</q><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.atlassian.com/software/bamboo/why-switch" data-text="' + soy.$$escapeHtml("jenkins.twitter.share.message") + '" data-count="none" data-dnt="true">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");<\/script></p>';
};
if (goog.DEBUG) {
  ji.page.importResult.shareOnTwitter.soyTemplateName = 'ji.page.importResult.shareOnTwitter';
}


ji.page.importResult.feedbackSubmitForm = function(opt_data, opt_ignored) {
  return '<div class="ji-feedback-submit-form">' + aui.form.textareaField({id: 'ji-feedback-description', labelContent: '', descriptionText: "Provide description of your Jenkins Importer experience, log from your import will be automatically attached.", rows: 16, extraClasses: 'long-field'}) + '</div>';
};
if (goog.DEBUG) {
  ji.page.importResult.feedbackSubmitForm.soyTemplateName = 'ji.page.importResult.feedbackSubmitForm';
}


ji.page.importResult.feedbackSubmitProgress = function(opt_data, opt_ignored) {
  return '<div class="aui-group ji-feedback-submit-progress"><div class="aui-item"></div><div class="aui-item ji-feedback-submit-progress-bar"></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  ji.page.importResult.feedbackSubmitProgress.soyTemplateName = 'ji.page.importResult.feedbackSubmitProgress';
}


ji.page.importResult.feedbackSubmitConfirmation = function(opt_data, opt_ignored) {
  return '<div id="ji-feedback-submit-confirmation-message-container"></div>';
};
if (goog.DEBUG) {
  ji.page.importResult.feedbackSubmitConfirmation.soyTemplateName = 'ji.page.importResult.feedbackSubmitConfirmation';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-jenkins-importer:jenkinsImporterWeb', location = 'fileUpload/Class.js' */
(function(){begetObject=function(d){var c=function(){};c.prototype=d;return new c()};var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){var j;var g=this.prototype;if(arguments.length>1){var i=AJS.$.makeArray(arguments);j=i.pop();var h;AJS.$.each(i,function(l,k){if(h){h=h.extend(k)}else{h=k}});return h.extend(this.prototype).extend(j)}else{j=arguments[0]}a=true;var f=new this();a=false;for(var e in j){if(f[e]=typeof j[e]=="function"&&typeof g[e]=="function"&&b.test(j[e])){f[e]=(function(k,l){return function(){var n=this._super;this._super=g[k];var m=l.apply(this,arguments);this._super=n;return m}})(e,j[e])}else{if(typeof g[e]==="object"){var d=begetObject(j[e]);AJS.$.each(g[e],function(l,m){if(!d[l]){d[l]=m}else{if(typeof d[l]==="object"){var k=begetObject(d[l]);AJS.$.each(m,function(o,n){if(!k[o]){k[o]=n}});d[l]=k}}});f[e]=d}else{f[e]=j[e]}}}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.fn=c.prototype=f;c.constructor=c;c.extend=arguments.callee;return c}})();Class.prototype.bind=function(a,b){jQuery(this).bind(a,b);return this};Class.prototype.trigger=function(c){var a=jQuery(this),b=Array().slice.call(arguments,1);c=new jQuery.Event(c);b.unshift(c);a.trigger.apply(a,b);return !c.isDefaultPrevented()};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-jenkins-importer:jenkinsImporterWeb', location = 'fileUpload/InlineUpload.js' */
AJS.InlineAttach=Class.extend({init:function(b){var a=AJS.$(b);if(AJS.InlineAttach.AjaxPresenter.isSupported(a)){new AJS.InlineAttach.AjaxPresenter(a)}else{new AJS.InlineAttach.FormPresenter(a)}}});AJS.$.extend(AJS.InlineAttach,{DISPLAY_WAIT:10,rescope:function(b,a){if(b){if(a){return AJS.$.proxy(b,a)}else{return b}}else{return AJS.$.noop}},copyArrayLike:function(a){return AJS.$.makeArray(a)},Renderers:{container:function(){return AJS.$("<div class='field-group'/>")}}});AJS.InlineAttach.Presenter=Class.extend({init:function(){this.cancelled=false;this.running=[]},_addUpload:function(a){if(!this.cancelled){this.running.push(a);a.upload()}return this.running.length>0},_finishUpload:function(a){if(!this.cancelled){AJS.InlineAttach.Presenter.removeFromArray(this.running,a)}return this.running.length>0},_cancel:function(){this.cancelled=true;var a;var b=AJS.InlineAttach.copyArrayLike(this.running);for(a=0;a<b.length;a++){b[a].abort()}this.running=[]}});AJS.$.extend(AJS.InlineAttach.Presenter,{removeFromArray:function(c,b){var a=AJS.$.inArray(b,c);if(a>=0){return c.splice(a,1)}else{return null}}});AJS.InlineAttach.FormPresenter=AJS.InlineAttach.Presenter.extend({init:function(a){this._super();this.form=new AJS.InlineAttach.Form(new AJS.InlineAttach.FileInput(a,false));this.form.fileSelector.onChange(AJS.$.proxy(this._attach,this));this.form.onCancel(AJS.$.proxy(this._cancel,this))},_attach:function(f){this.form.clearErrors();if(this.cancelled){return}var d=this.form;var c=d.cloneFileInput();d.fileSelector.clear();var b=d.addStaticProgress(f);var e=new AJS.InlineAttach.Timer(function(){!this.cancelled&&b.show()},this);var a=new AJS.InlineAttach.FormUpload({$input:c,url:AJS.InlineAttach.FormPresenter.DEFAULT_URL,scope:this,before:function(){!this.cancelled&&b.start();d.hideUploadControls()},success:function(g){if(this.cancelled){d.showUploadControls();return}showControls=true;if(g.serverFileName&&g.name){d.addTemporaryFileHiddenInput(g.serverFileName,g.name,b);showControls=false}else{if(g.errorMessage){d.addErrorWithFileName(g.errorMsg,f,b)}else{d.addError(AJS.InlineAttach.Text.tr("upload.error.bad.response",f),b)}}if(showControls){d.showUploadControls()}},error:function(g){d.showUploadControls();if(this.cancelled){return}if(g.indexOf("SecurityTokenMissing")>=0){d.addError(AJS.InlineAttach.Text.tr("upload.xsrf.timeout",f),b)}else{d.addError(AJS.InlineAttach.Text.tr("upload.error.unknown",f),b)}},after:function(){e.cancel();b.remove();if(!this.cancelled&&!this._finishUpload(a)){d.enable()}}});b.onCancel(function(){d.showUploadControls();a.abort()});if(this._addUpload(a)){e.schedule(AJS.InlineAttach.DISPLAY_WAIT);d.disable()}d.fileSelector.focus()},_cancel:function(){this._super();this.form.enable()}});AJS.InlineAttach.FormPresenter.DEFAULT_URL=AJS.contextPath()+"/admin/jenkinsImport/uploadJenkinsData.action";AJS.InlineAttach.AjaxPresenter=AJS.InlineAttach.Presenter.extend({init:function(a){this._super();this.form=new AJS.InlineAttach.Form(new AJS.InlineAttach.FileInput(a,true));this.form.fileSelector.onChange(AJS.$.proxy(this._attach,this));this.form.onCancel(AJS.$.proxy(this._cancel,this))},_attach:function(a){this.form.clearErrors();if(this.cancelled){return}if(a&&a.length>0){a=this._checkAndFilterFiles(a);if(a){this._uploadFiles(a)}}this.form.fileSelector.clear().focus()},_checkAndFilterFiles:function(d){if(d.length>AJS.InlineAttach.AjaxPresenter.MAX_SELECTED_FILES){this.form.addError(AJS.InlineAttach.Text.tr("upload.error.too.many.files",d.length,AJS.InlineAttach.AjaxPresenter.MAX_SELECTED_FILES));return null}var h=this.form.maxSize;var f=[];for(var b=0;b<d.length;b++){try{var a=d[b];if(a.size==0){this.form.addError(AJS.InlineAttach.Text.tr("upload.empty.file",a.name))}else{if(h>0&&a.size>h){var c=AJS.InlineAttach.Text.fileSize(h,a.size);this.form.addError(AJS.InlineAttach.Text.tr("upload.too.big",a.name,c[1],c[0]))}else{f.push({name:a.name,size:a.size,file:a})}}}catch(g){this.form.addError(AJS.InlineAttach.AjaxUpload.getClientErrorMessage(g,a))}}return f.length==0?null:f},_uploadFiles:function(d){var c=this.form,b=this,a=false;AJS.$.each(d,function(){var f=c.addProgress(this),g=this;var h=new AJS.InlineAttach.Timer(function(){if(!b.cancelled){f.show()}});var e=new AJS.InlineAttach.AjaxUpload({file:g.file,params:BAMBOO.XsrfUtils.addXsrfTokenProperty(AJS.InlineAttach.AjaxPresenter.DEFAULT_URL,{filename:g.name,size:g.size}),scope:b,url:AJS.InlineAttach.AjaxPresenter.DEFAULT_URL,before:function(){!this.cancelled&&f.start();c.hideUploadControls()},progress:function(i){!this.cancelled&&f.update(i)},success:function(j,i){if(this.cancelled){return}showControls=true;if(i===200||i===201){if(j.serverFileName!==undefined&&j.name!==undefined){c.addTemporaryFileHiddenInput(j.serverFileName,j.name,f,g.file);showControls=false}else{if(j.errorMessage){c.addErrorWithFileName(j.errorMessage,g.name,f)}else{c.addError(AJS.InlineAttach.Text.tr("upload.error.bad.response",g.name),f)}}}else{if(j.errorMessage){c.addErrorWithFileName(j.errorMessage,g.name,f)}else{c.addError(this._getErrorFromStatus(i,g),f)}}if(showControls){c.showUploadControls()}},error:function(k,j){c.showUploadControls();if(this.cancelled){return}if(j<0){c.addError(k,f)}else{var i=this._getErrorFromStatus(j,g);if(i){c.addError(i,f)}else{c.addError(AJS.InlineAttach.Text.tr("upload.error.unknown",g.name),f)}}},after:function(){h.cancel();f.finish().remove();if(!this.cancelled&&!this._finishUpload(e)){c.enable()}}});f.onCancel(function(){c.showUploadControls();e.abort()});if(b._addUpload(e)){a=true;h.schedule(AJS.InlineAttach.DISPLAY_WAIT)}});if(a){this.form.disable()}},_getErrorFromStatus:function(a,c){var b;if(a===0){b=AJS.InlineAttach.Text.tr("upload.error.server.no.reply",c.name)}else{if(a===400){b=AJS.InlineAttach.Text.tr("upload.error.badrequest",c.name)}else{if(a===401){b=AJS.InlineAttach.Text.tr("upload.error.auth",c.name)}else{b=AJS.InlineAttach.Text.tr("upload.error.unknown.status",c.name,a)}}}return b},_cancel:function(){this._super();this.form.enable()}});AJS.$.extend(AJS.InlineAttach.AjaxPresenter,{DEFAULT_URL:AJS.contextPath()+"/admin/jenkinsImport/uploadJenkinsData.action",MAX_SELECTED_FILES:100,isSupported:function(a){if(!a||!a[0]||!a[0].files){return false}else{return AJS.InlineAttach.AjaxUpload.isSupported()}}});AJS.InlineAttach.FileInput=Class.extend({init:function(a,b){this.$element=a;this.$container=a.parent();if(b&&this.$element[0].files!==undefined){this.$element.attr("multiple","multiple");this.multiple=true}else{this.multiple=false}},clear:function(){this.$element.val("");return this},getFiles:function(){return this.$element[0].files},hasFiles:function(){return this.getFiles().length>0},onChange:function(b){var a=this;this.$element.change(function(){if(a.multiple){b.call(a,this.files)}else{b.call(a,a.getFileName())}});return this},focus:function(){if(this._isIE()){var a=this.$element;setTimeout(function(){a.focus()},0)}else{this.$element.focus()}return this},cloneInput:function(){var a=this.$element;a.replaceWith(this.$element=a.clone(true));a.unbind();return a},getFileName:(function(){var a=/^c:\\fakepath\\(?!$)/i;return function(){var b=this.$element.val();b=b.replace(a,"");if(this._isIE()&&b.indexOf("\\")>=0){b=b.substring(b.lastIndexOf("\\")+1)}return b}})(),_isIE:function(){return AJS.$.browser.msie},before:function(a){if(a){if(a.$element){a=a.$element}this.$container.before(a)}}});AJS.InlineAttach.ProgressBar=(function(){return Class.extend({init:function(){var a=this.$element=this._renderers.container();this.$progress=this._renderers.progress().appendTo(a);this.$progress.progressBar({value:0});this.hidden=true;this.old=0},value:function(a){if(a>100){a=100}else{if(a<0){a=0}}if(this.hidden){this.$progress.show();this.hidden=false}if(this.old!==a){this.$progress.progressBar({value:a});if(a>=100){this.$progress.fadeOut();this.$progress.progressBar("destroy")}this.old=a}},_renderers:{container:function(){return AJS.$("<div>").addClass("file-progress")},progress:function(){return AJS.$("<div>").attr("id","upload-progress").hide()}}})})();AJS.InlineAttach.UploadProgress=Class.extend({init:function(b){var d=this.$element=AJS.InlineAttach.Renderers.container().hide();var a=this.progress=new AJS.InlineAttach.ProgressBar();var c=this._renders.content(b.name);this.$content=c.$content;this.$cancel=c.$cancel;d.append(c.$element).append(a.$element);this.total=b.size;this.current=0;this.name=b.name;this.timer=new AJS.InlineAttach.Timer(this._update,this);this.rateNumerator=0;this.rateDenominator=0;this._title(AJS.InlineAttach.Text.tr("upload.progress.title.waiting"))},start:function(){this.started=this._now();this.startedSize=0;return this},update:function(a){this.timer.cancel();return this._update(a)},_update:function(g){var b=this._now();if(g===undefined){g=this.current}else{if(g!==this.current){this.lastUpdate=b;this.current=g}}var i=AJS.InlineAttach.Text;var j=Math.min(100,Math.round(g/this.total*100));var h=i.currentOutOfTotalSize(g,this.total);var e,c;this.progress.value(j);var a=(b-this.started)/1000;if(a>=2){if(this.startedSize>0){this._addRate((g-this.startedSize)/a)}this.started=b;this.startedSize=g}var f=this._calcRate();if(g>=AJS.InlineAttach.UploadProgress.DATA_MIN&&f>0){var d=Math.max(1,(this.total-g)/f);e=i.rate(f);c=i.time(d)}if(b-this.lastUpdate>=AJS.InlineAttach.UploadProgress.STALLED_TIMEOUT){this._content(i.tr("upload.file.stalled",this.name));if(e){this._title(i.tr("upload.progress.title.known.stalled",e,h))}else{this._title(i.tr("upload.progress.title.unknown.stalled",h))}}else{if(e){this._title(i.tr("upload.progress.title.known",e,h,c));this._content(i.tr("upload.file.remaining",this.name,c))}else{this._title(h);this._content(this.name)}}if(g<this.total){this.timer.schedule(AJS.InlineAttach.UploadProgress.UPLOAD_REFRESH)}return this},finish:function(){this.progress.value(100);this.timer.cancel();return this},onCancel:function(b){var a=this;this.$cancel.click(function(c){c.preventDefault();b.call(a)});return this},remove:function(){this.$element.remove();return this},hide:function(){this.$element.hide();return this},show:function(){this.$element.fadeIn();return this},_title:function(a){this.$element.attr("title",a);return this},_content:function(a){this.$content.text(a);return this},_addRate:function(a){var b=AJS.InlineAttach.UploadProgress.WEIGHT;this.rateNumerator=this.rateNumerator*b+a;this.rateDenominator=this.rateDenominator*b+1},_calcRate:function(){if(this.rateDenominator==0){return 0}var a=this.rateNumerator/this.rateDenominator;if(Math.abs(a)<0.005){return 0}else{return a}},_now:function(){return new Date().getTime()},_renders:{content:function(e){var d=AJS.InlineAttach.Text.tr("upload.file.waiting",e);var c=AJS.$("<div class='loading file'>");var a=AJS.$("<span>").text(d);var b=AJS.$("<a href='#'/>").text(AJS.InlineAttach.Text.tr("upload.cancel"));c.append(a).append(" ").append(b);return{$element:c,$content:a,$cancel:b}}}});AJS.$.extend(AJS.InlineAttach.UploadProgress,{STALLED_TIMEOUT:10000,UPLOAD_REFRESH:2000,DATA_MIN:20*1024,WEIGHT:0.7});AJS.InlineAttach.UnknownProgress=Class.extend({init:function(b){var a=this._renders.content(b);this.$element=a.$element;this.$cancel=a.$cancel;this.$content=a.$content;this.fileName=b;this._title(AJS.InlineAttach.Text.tr("upload.progress.title.waiting"))},remove:function(){this.$element.remove();return this},hide:function(){this.$element.hide();return this},show:function(){this.$element.fadeIn();return this},start:function(){this._title(AJS.InlineAttach.Text.tr("upload.progress.title.running"));this._content(this.fileName);return this},onCancel:function(b){var a=this;this.$cancel.click(function(c){c.preventDefault();b.call(a)});return this},_title:function(a){this.$element.attr("title",a);return this},_content:function(a){this.$content.text(a);return this},_renders:{content:function(f){var e=AJS.InlineAttach.Text.tr("upload.file.waiting",f);var d=AJS.$("<a href='#'/>").text(AJS.InlineAttach.Text.tr("upload.cancel"));var b=AJS.$("<div class='loading file'>");var a=AJS.$("<span>").text(e);b.append(a).append(" ").append(d);var c=AJS.InlineAttach.Renderers.container().append(b);return{$element:c,$cancel:d,$content:a}}}});AJS.InlineAttach.Form=Class.extend({init:function(a){this.fileSelector=a;this.$form=a.$element.closest("form");this.maxSize=parseInt(this.$form.find("#max-upload-size").text()||AJS.$("#max-upload-size").text());if(isNaN(this.maxSize)){throw"Unable to find maximum upload size on form."}},disable:function(){this._getFormSubmits().attr("disabled","disabled");return this},enable:function(){this._getFormSubmits().removeAttr("disabled");return this},addProgress:function(a){var b=new AJS.InlineAttach.UploadProgress(a);this._addElement(b.$element);return b},addStaticProgress:function(b){var a=new AJS.InlineAttach.UnknownProgress(b);this._addElement(a.$element);return a},addTemporaryFileHiddenInput:function(f,d,c,e){var b=AJS.InlineAttach.Renderers.container();var a=AJS.$("<p style='padding-bottom:8px'>").text(AJS.InlineAttach.Text.tr("jenkins.import.selected.file")+" ").append(AJS.$("<strong>").text(d));var g=AJS.$("<a href='"+AJS.contextPath()+"/admin/jenkinsImport/cancelImport.action?uploadedFile="+f+"'/>").text(AJS.InlineAttach.Text.tr("upload.select.another.source")).addClass("aui-button aui-style");var h=AJS.$("<input type='hidden' name='uploadedFile'>").attr({value:f});b.append(h).append(a).append(g);b.hide();this._replaceElement(b,c);return this},hideUploadControls:function(){AJS.$("#jenkinsFileUpload").parent().hide();AJS.$("#methodSelect").parent().hide()},showUploadControls:function(){AJS.$("#jenkinsFileUpload").parent().show();AJS.$("#methodSelect").parent().show()},addErrorWithFileName:function(b,c,a){if(b.indexOf(c)==-1){b=AJS.InlineAttach.Text.tr("upload.error.server",c,b)}return this.addError(b,a)},addError:function(c,b){var a=AJS.InlineAttach.Renderers.container();a.addClass("error").append(AJS.$("<div>").text(c)).hide();this._replaceElement(a,b);return a},clearErrors:function(){this.$form.find("div.error").remove();return this},cloneFileInput:function(){return this.fileSelector.cloneInput()},onCancel:function(b){var a=this.$form.find("a.cancel");a.click(AJS.$.proxy(b,this));return this},_getFormSubmits:function(){return this.$form.find("input[type=submit]")},_addElement:function(a){this.fileSelector.before(a)},_replaceElement:function(a,b){if(b&&b.$element){b.$element.replaceWith(a)}else{this._addElement(a)}a.fadeIn()}});AJS.InlineAttach.FormUpload=Class.extend({init:function(a){var b=a.scope||null;var c=AJS.InlineAttach.rescope;this.$input=a.$input;this.url=a.url;this.params=a.params||{};this.successcb=c(a.success,b);this.errorcb=c(a.error,b);this.before=c(a.before,b);this.after=c(a.after,b);this.abortcb=c(a.abort,b);this.aborted=false;this.$form=null;this.xhr=null},upload:function(){if(this.aborted){return}var a=this.url;var b=AJS.$.param(this.params);if(b){a=a+"?"+b}this.$form=this._renders.form(a),that=this;BAMBOO.XsrfUtils.addXsrfTokenToForm(this.$form);var c=this.$form;this._addToBody(c.append(this.$input));c.ajaxForm({dataType:"json",data:this.params,timeout:0,beforeSend:function(d){that.xhr=d},beforeSubmit:function(){that.before()},error:function(e){if(that.aborted){that.abortcb()}else{var d=(e&&e.responseText)||"";that.errorcb(d)}},success:function(d){that.successcb(d||{})},complete:function(){if(that.$form){that.$form.remove();that.$form=null}that.after()}});c.submit()},abort:function(){if(!this.aborted){this.aborted=true;if(this.xhr){this.xhr.abort();this.xhr=null}else{this.abortcb();this.after()}}},_addToBody:function(a){AJS.$("body").append(a)},_renders:{form:function(a){return AJS.$("<form method='post' enctype='multipart/form-data'></form>").attr("action",a).hide()}}});AJS.InlineAttach.AjaxUpload=Class.extend({init:function(a){var b=a.scope||null;var c=AJS.InlineAttach.rescope;this.file=a.file;this.url=a.url;this.params=a.params||{};this.beforecb=c(a.before,b);this.progresscb=c(a.progress,b);this.errorcb=c(a.error,b);this.successcb=c(a.success,b);this.abortcb=c(a.abort,b);this.finalcb=c(a.after,b);this.aborted=false},upload:function(){if(this.aborted||this.xhr){return}var d=this.xhr=AJS.InlineAttach.AjaxUpload.xhr();d.upload.onprogress=AJS.$.proxy(this._upload,this);d.onreadystatechange=AJS.$.proxy(this._statechange,this);var a=this.url;var c=AJS.$.param(this.params);if(c){a=a+"?"+c}this.beforecb();try{d.open("POST",a,true);d.setRequestHeader("Content-Type",this.file.type||"application/octet-stream");d.send(this.file)}catch(b){this._clienterror(b,this.file)}},abort:function(){if(!this.aborted){this.aborted=true;if(this.xhr){this.xhr.abort()}else{this.abortcb();this.finalcb()}}},_statechange:function(){if(this.xhr.readyState===4){if(this.aborted){this.abortcb()}else{try{this.successcb(JSON.parse(this.xhr.responseText),this.xhr.status,this.xhr)}catch(a){this.errorcb(this.xhr.responseText,this.xhr.status,this.xhr)}this.xhr.upload.onprogress=this.xhr.statechange=null}this.finalcb()}},_clienterror:function(b,a){this.errorcb(AJS.InlineAttach.AjaxUpload.getClientErrorMessage(b,a),-1,this.xhr);this.finalcb()},_upload:function(a){if(a.lengthComputable){this.progresscb(a.loaded)}}});AJS.$.extend(AJS.InlineAttach.AjaxUpload,{isSupported:function(){return AJS.InlineAttach.AjaxUpload._fileApiSupport(window)&&AJS.InlineAttach.AjaxUpload._xhrSupport()},xhr:function(){var a=AJS.InlineAttach.AjaxUpload._xhrJquery();if(!a){a=AJS.InlineAttach.AjaxUpload._xhrDirect}AJS.InlineAttach.AjaxUpload.xhr=a;return a()},getClientErrorMessage:function(c,b){var d;try{d=b.name}catch(a){d="<unknown>"}if(c.name==="NS_ERROR_FILE_ACCESS_DENIED"){return AJS.InlineAttach.Text.tr("upload.error.no.access",d)}else{if(c.name==="NS_ERROR_FILE_NOT_FOUND"||c.name==="NS_ERROR_FILE_TARGET_DOES_NOT_EXIST"){return AJS.InlineAttach.Text.tr("upload.error.does.not.exist",d)}else{return AJS.InlineAttach.Text.tr("upload.error.client.unknown",d,c.message||c)}}},_xhrJquery:function(){var a=AJS.$.ajaxSettings;return(a&&a.xhr)||null},_xhrDirect:function(){try{return new XMLHttpRequest()}catch(a){return null}},_xhrSupport:function(){try{var b=AJS.InlineAttach.AjaxUpload.xhr();if(b&&b.upload){return true}}catch(a){}return false},_fileApiSupport:function(a){return a.File&&a.FileList&&(!AJS.$.browser.mozilla||a.FileReader)}});AJS.InlineAttach.Timer=Class.extend({init:function(b,a){this.callback=AJS.InlineAttach.rescope(b,a||this);this._callback=AJS.$.proxy(this._callback,this);this.timeoutId=null},cancel:function(){if(this.timeoutId!==null){this._endTimeout(this.timeoutId);this.timeoutId=null}return this},schedule:function(a){this.cancel();this.timeoutId=this._startTimeout(this._callback,a);return this},_callback:function(){this.timeoutId=null;this.callback()},_startTimeout:function(a,b){return window.setTimeout(a,b)},_endTimeout:function(a){window.clearTimeout(a)}});AJS.InlineAttach.Text=(function(){var b=1024;var f=1024*b;var d=1024*f;var e=Math.floor(b*0.995);var a=Math.floor(f*0.995);var c=Math.floor(d*0.995);return{"upload.empty.file":"File is empty","upload.too.big":"{0} is too big. File is {1} but the largest allowed size is {2}.","upload.error.bad.response":"Unexpected server response","upload.error.unknown.status":"Unknown server error","upload.error.auth":"Not authorised","upload.error.badrequest":"Bad request","upload.error.server":"Cannot upload file {0}: {1}","upload.cancel":"Cancel","upload.file.remaining":"{0} - {1} left.","upload.file.waiting":"{0} - waiting.","upload.file.stalled":"{0} - stalled.","upload.checkbox.title":"attachfile.attachment.checkbox.title","upload.xsrf.timeout":"attachment.error.xsrf.expired","upload.error.unknown":"Cannot upload file {0}: Unknown server error.","upload.progress.title.waiting":"Waiting for other uploads to complete.","upload.progress.title.running":"Uploading.","upload.progress.title.unknown.stalled":"{0}, stalled.","upload.progress.title.known":"{0} - {1}, {2} left.","upload.progress.title.known.stalled":"{0} - {1}, stalled.","upload.kilobyte":"{0} kB","upload.kilobyte.part":"{0}/{1} kB","upload.megabyte":"{0} MB","upload.megabyte.part":"{0}/{1} MB","upload.gigabyte":"{0} GB","upload.gigabyte.part":"{0}/{1} GB","upload.seconds":"{0} sec","upload.minutes":"{0} min","upload.hours":"{0} hr","upload.hours.minutes":"{0} hr {1} min","upload.bytes.per.second":"{0} B/sec","upload.kilobytes.per.second":"{0} kB/sec","upload.megabytes.per.second":"{0} MB/sec","upload.error.no.access":"Browser does not have permissions to access {0}.","upload.error.does.not.exist":"{0} does not exist.","upload.error.client.unknown":"An unknown error occurred on the browser while trying to upload {0}: {1}.","upload.error.too.many.files":"You are trying to upload {0} files. Only {1} files can be attached at a time.","upload.error.server.no.reply":"Unable to upload file: Cannot communicate with Bamboo server.","upload.select.another.source":"Choose different source...","jenkins.import.selected.file":"Selected file",tr:function(h){if(arguments.length==0){return undefined}else{if(arguments.length==1){return this[h]||h}else{if(this[h]){var g=AJS.InlineAttach.copyArrayLike(arguments);g[0]=this[h];return AJS.format.apply(AJS,g)}else{return h}}}},fileSize:function(){if(arguments.length==0){return undefined}else{var k,h=AJS.InlineAttach.Text._classifySize(arguments[0]);if(h.unit===b){k="upload.kilobyte"}else{if(h.unit===f){k="upload.megabyte"}else{k="upload.gigabyte"}}if(arguments.length==1){return this.tr(k,h.convert(arguments[0]))}else{var g=new Array(arguments.length);for(var j=0;j<arguments.length;j++){g[j]=this.tr(k,h.convert(arguments[j]))}return g}}},currentOutOfTotalSize:function(j,i){var g=this._classifySize(i),h;if(g.unit===b){h="upload.kilobyte.part"}else{if(g.unit===f){h="upload.megabyte.part"}else{h="upload.gigabyte.part"}}return this.tr(h,g.convert(j),g.convert(i))},_classifySize:function(g){var h;if(g<=a){h=b}else{if(g<=c){h=f}else{h=d}}return{unit:h,convert:function(i){return AJS.InlineAttach.Text._toDisplay(i/h)}}},time:function(i){if(i<60){return this.tr("upload.seconds",Math.floor(i))}else{var h=i/60;if(h<60){return this.tr("upload.minutes",Math.floor(h))}else{var g=Math.floor(h/60);h=Math.floor(h%60);if(h>0){return this.tr("upload.hours.minutes",g,h)}else{return this.tr("upload.hours",g)}}}},rate:function(g){if(g<=e){return this.tr("upload.bytes.per.second",AJS.InlineAttach.Text._toDisplay(g))}else{if(g<=a){return this.tr("upload.kilobytes.per.second",AJS.InlineAttach.Text._toDisplay(g/b))}else{return this.tr("upload.megabytes.per.second",AJS.InlineAttach.Text._toDisplay(g/f))}}},_toDisplay:function(g){if(g<0.005){return"0"}else{return(Math.round(g*100)/100).toFixed(2)}}}})();jQuery.fn.inlineAttach=function(){var a=[];this.each(function(){a.push(new AJS.InlineAttach(this))});return a};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-git:github', location = 'javascript/github.js' */
define("feature/github-repository-form",["jquery","underscore","util/ajax-form","util/events"],function(e,b,a,c){function d(g){var h={repositoryKey:null,repositoryId:0,selectors:{container:null,repositoryType:null,repositoryPluginKey:null,username:null,password:null,loadRepositoriesButton:null,repository:null,branch:null,baseUrl:"http://github.com",enterprise:null},inheritedData:{repository:"",id:""}};var f=e.extend(true,h,g);this.repositoryKey=f.repositoryKey;this.repositoryId=f.repositoryId;this._jqXHRRepository=null;this._jqXHRBranch=null;this.$container=e(f.selectors.container);this.$repositoryType=e(f.selectors.repositoryType);this.$repositoryPluginKey=e(f.selectors.repositoryPluginKey);this.$username=this.$container.find(f.selectors.username);this.$password=this.$container.find(f.selectors.password);this.$loadRepositoriesButton=this.$container.find(f.selectors.loadRepositoriesButton);this.$repository=this.$container.find(f.selectors.repository);this.$branch=e(f.selectors.branch);this.$form=this.$username.closest("form");this.$baseUrl=this.$container.find(f.selectors.baseUrl);this.$enterprise=this.$container.find(f.selectors.enterprise);this.inheritedData=f.inheritedData;this.$overrideRepositoryLocation=e("#overrideRepositoryLocation");c.EventBus.on("repository:server:toggle-override",this.resetRepository.bind(this))}d.prototype={init:function(){this.$repository.select2({enable:false,width:"copy"});this.$loadRepositoriesButton.click(b.bind(this.loadRepositoriesClick,this));this.$repository.change(b.bind(this.repositoryChange,this));var f=(this.$repositoryType.val()===this.repositoryKey||this.$repositoryPluginKey.val()===this.repositoryKey);if(f&&(this.repositoryId||(this.$username.val()&&this.$password.val()))){this.loadRepositories();if(this.$repository.val()!==null){this.loadBranches(true)}}},loadRepositoriesClick:function(){this.clearFieldErrors();this.$repository.prop("disabled",true);this.$branch.prop("disabled",true);if(this._jqXHRBranch){this._jqXHRBranch.abort()}this.loadRepositories().done(b.bind(function(g){var f=g.repositories;if(g.status==="OK"&&f&&f.length){this.$repository.focus();if(!this.$branch.children().length){this.$branch.append(this.generateBranchOption(this.defaultBranch()))}this.$repository.val(this.$repository.find("option:first").val());this.loadBranches(this.isOverrideOn())}},this))},isOverrideOn:function(){return !this.$overrideRepositoryLocation.length||this.$overrideRepositoryLocation.val()==="true"},resetRepository:function(){var f=this.isOverrideOn();if(this.inheritedData.repository&&this.inheritedData.repository!==this.$repository.val()){this.clearFieldErrors();this.$branch.prop("disabled",true).empty().append(this.generateBranchOption(this.defaultBranch()));this.loadBranches(f)}},repositoryChange:function(){this.clearFieldErrors();this.$branch.prop("disabled",true).empty().append(this.generateBranchOption(this.defaultBranch()));this.loadBranches(true)},loadRepositories:function(){var h=this.$repository;var l=e("<optgroup />").attr("label","Loading Repositories...").appendTo(h);var j=h.val();var g=this.generateRepositoryOption;var k=b.bind(function(o,q,p){var m=document.createDocumentFragment();var n=o.repositories;if(o.status==="OK"&&n&&n.length){e.each(n,function(){m.appendChild(g(this).get(0))});h.empty().prop("disabled",false).get(0).appendChild(m);h.val(j)}else{f(p)}},this);var i=b.bind(function(){l.remove();this.$loadRepositoriesButton.prop("disabled",false)},this);var f=b.bind(function(p){var n;var r=[];var o;var m={};if(p.statusText!=="abort"){try{n=e.parseJSON(p.responseText);r=n.errors||[];o=n.repositories;m=n.fieldErrors||{}}catch(q){}if(o&&!o.length){r.push("No repositories found for user {0}.".replace("{0}",this.$username.val()))}if(!r.length){r.push("Failed to load data from GitHub."+"["+p.status+" "+p.statusText+"]")}this.addFieldErrors(this.$repository,r,m)}},this);this.$loadRepositoriesButton.prop("disabled",true);return this.getRepositoryList().done(k).fail(f).always(i)},generateRepositoryOption:function(f){return e("<option/>",{text:f.full_name,val:f.full_name,data:f})},loadBranches:function(m){var i=this.$branch;var l=e("<optgroup />").attr("label","Loading Branches...").appendTo(i);var n=i.closest(".field-group");var j=i.val();var f=this.generateBranchOption;var h=b.bind(function(q,s,r){var p=e();var o=q.branches;if(q.status==="OK"&&o){e.each(o,function(){p=p.add(f(this.name))});i.empty().append(p).prop("disabled",false).val(j);if(j&&i.val()!==j){i.val(this.defaultBranch())}}else{g(r)}},this);var k=b.bind(function(){l.remove()},this);var g=b.bind(function(q){var p;var s=[];var o={};if(q.statusText!=="abort"){try{p=e.parseJSON(q.responseText);s=p.errors||[];o=p.fieldErrors||{}}catch(r){}if(!s.length){s.push("Failed to load data from GitHub."+"["+q.status+" "+q.statusText+"]")}this.addFieldErrors(this.$branch,s,o)}},this);if(n.hasClass("hidden")){n.hide().removeClass("hidden").slideDown()}return this.getBranchList(this.$repository.val(),m).done(h).fail(g).always(k)},generateBranchOption:function(f){return e("<option/>",{text:f})},defaultBranch:function(){return"master"},getJsonResponse:function(f,j,h,g){var k=g.closest(".field-group");var i="loading";if(h){h.abort()}k.addClass(i);return e.ajax({type:"POST",url:f,data:JSON.stringify(j),contentType:"application/json",processData:false,dataType:"json"}).always(function(){k.removeClass(i)})},getRepositoryList:function(){var f=AJS.contextPath()+"/rest/git/latest/gh/repositories/"+this.$username.val()+"/";this._jqXHRRepository=this.getJsonResponse(f,{password:this.$password.val(),repositoryId:this.repositoryId,apiBaseUri:this.$baseUrl.val()},this._jqXHRRepository,this.$repository);return this._jqXHRRepository},getBranchList:function(h,f){var g=AJS.contextPath()+"/rest/git/latest/gh/repositories/";if(f){g=g+h+"/branches/";this._jqXHRBranch=this.getJsonResponse(g,{username:this.$username.val(),password:this.$password.val(),repository:h,repositoryId:this.repositoryId,apiBaseUri:this.$baseUrl.val()},this._jqXHRBranch,this.$branch)}else{g=g+this.inheritedData.repository+"/branches/";this._jqXHRBranch=this.getJsonResponse(g,{repository:this.inheritedData.repository,repositoryId:this.inheritedData.repositoryId,apiBaseUri:this.$baseUrl.val()},this._jqXHRBranch,this.$branch)}return this._jqXHRBranch},addFieldErrors:function(g,i,f){if(i&&i.length){var h=g.attr("name");f[h]=f[h]||[];i.forEach(function(j){f[h].push(j)})}new a(this.$form).injectErrors({errors:[],fieldErrors:f})},clearFieldErrors:function(){this.$form.find(".error").remove()}};return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-ajax-form', location = '/util/ajax-form/ajax-form.js' */
define("util/ajax-form",["jquery","underscore","util/ajax","util/errors"],function(t,e,i,n){"use strict";function r(i,n){var r=function(e){return t("<div/>").addClass("error").text(e)};i.find(".error").remove();var s=[];n.message&&s.push(n.message),n.errors&&n.errors.forEach(function(t){return s.push(t)}),s.length&&i.prepend(aui.message.error({content:s.join("\n")})),e.each(e.keys(n.fieldErrors||{}),function(t){var e=i.find(':input[name="'+t+'"]');if(e.length){var s=r(n.fieldErrors[t].join("\n")),o=e.siblings(".description");o.length?o.before(s):e.parent().append(s)}})}function s(t){this.$el.trigger("success",t)}function o(e){var i=e.responseJSON;if(void 0===e.responseJSON&&(i=t.parseJSON(e.responseText)),!this.$el.triggerHandler("error",[i,e.status]))switch(e.status){case 400:r(this.$el,i);break;default:n.call(null,e)}}var a={contentType:"application/json",processData:!1,dataType:"json",type:"POST",async:!0},u=["atl_token","atl_token_source"],l=function(t){var e=function(){};return function i(){var n=this;this instanceof i||(e.prototype=i.prototype,n=new e);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return t.apply(n,s),n}}(function(i,n){var l=t(i);if(l.is("form")||(l=l.find("form:first")),this.$el=l,n=n||{},void 0===n.url){var c=l.attr("target");c&&(n.url=c)}if(void 0===n.type){var h=l.attr("action");h&&(n.type=h)}n=e.defaults(n,a),this.ignoreFields=e.unique((n.ignoreFields||[]).concat(u)),n.serialize&&(this.serialize=n.serialize),this.settings=e.extend(n,{success:e.bind(s,this),error:e.bind(o,this)}),this.injectErrors=e.bind(r,this,this.$el)});return l.prototype.bind=function(t){return this.settings=e.extend(this.settings,t||{}),this.$el.unbind("submit").find(":input").unbind("keydown"),this.request=e.bind(function(t){return i(e.extend({data:JSON.stringify(t)},this.settings))},this),this.$el.find(":input").keydown(e.bind(function(t){13===t.keyCode&&this.$el.trigger("submit")},this)),this.$el.on("submit",e.bind(function(t){var e=this.$el.find("button[type=submit], input[type=submit]");t.preventDefault(),e.attr("disabled",!0);var i=!(!this.settings||!this.settings.checkboxAsBoolean);this.request(this.serialize(i)).always(function(){e.attr("disabled",!1)})},this)),this},l.prototype.serialize=function(i){var n={};return e.each(this.$el.serializeArray(),e.bind(function(t){var i=t.name,r=t.value;e.indexOf(this.ignoreFields,i)>-1||(void 0===n[i]?n[i]=r:e.isArray(n[i])?n[i]=n[i].concat(r):n[i]=[n[i],r])},this)),i&&e.each(this.$el.find("input[type=checkbox]"),function(e){var i=t(e);n[i.attr("name")]=!!i.is(":checked")}),this.$el.triggerHandler("serialize",[this,n])||n},l.prototype.on=function(t,e){return this.$el.on(t,e),this},l});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-plan-branch-selector', location = '/widget/plan-branch-selector/plan-branch-selector.js' */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();define("widget/plan-branch-selector",["jquery"],function(e){"use strict";return function(){function t(n){var a=this;_classCallCheck(this,t),this.options=e.extend(!0,t.defaults,n),this.inlineDialog=AJS.InlineDialog(this.options.trigger,this.options.id,this.createInlineDialogContent.bind(this),t.inlineDialogOpts),this.inlineDialog.addClass("plan-branch-selector "+this.options.inlineDialogClass),e(document).delegate(n.trigger,"keydown",function(e){e.which===jQuery.ui.keyCode.ENTER&&(e.preventDefault(),a.inlineDialog.show.call(a))})}return _createClass(t,null,[{key:"defaults",get:function(){return{trigger:void 0,planKey:void 0,id:"plan-branch-selector",includeMaster:!1,masterBranchName:void 0,masterBranchDescription:void 0,includeLatestResult:!1,inlineDialogClass:"",maxBranches:10,getPlanDetailsUrl:AJS.contextPath()+"/rest/api/latest/plan/{planKey}/branch",templates:{branchItem:void 0,branchItemActiveBuild:void 0}}}},{key:"inlineDialogOpts",get:function(){return{fadeTime:0,showDelay:0,useLiveEvents:!0,width:250,offsetY:14,arrowOffsetX:10}}}]),_createClass(t,[{key:"getPlanDetails",value:function(t){return e.ajax({url:this.options.getPlanDetailsUrl.replace("{planKey}",t),cache:!1,dataType:"json",data:{expand:this.options.includeLatestResult?"branches.branch":"branches","max-results":this.options.maxBranches}})}},{key:"createInlineDialogContent",value:function(t,n,a){var i=e(n),l=this.options,s=l.planKey||i.data("planKey");t.html(widget.icons.icon({type:"loading"})),this.inlineDialog.is(":visible")||a(),this.inlineDialog.refresh(),this.getPlanDetails(s).done(function(n){var i=e("<ul/>"),r=n.branches.branch;l.includeMaster&&e(AJS.template.load(l.templates.branchItem).fill({key:s,shortName:l.masterBranchName,description:l.masterBranchDescription,"icon:html":bamboo.widget.plan.branch.selector.icon({})}).toString()).addClass("master").appendTo(i);for(var o=0;o<r.length;o+=1){var c=r[o],h={latestResult:{key:c.key+"/latest",state:"NeverExecuted",number:"--",suspendedClass:"",description:""}},u=e.extend(!0,h,c),d=u.latestResult.number;"number"==typeof d&&(u.latestResult.number="#"+d),c.enabled||(u.latestResult.suspendedClass="Suspended");var p=bamboo.widget.plan.branch.selector.icon({workflow:u.workflowType}),m=l.templates.branchItemActiveBuild&&u.latestCurrentlyActive?l.templates.branchItemActiveBuild:l.templates.branchItem;e(AJS.template.load(m).fill(u).fill({"icon:html":p}).toString()).appendTo(i)}t.html(i),e("<a/>",{text:"View all branches",href:AJS.contextPath()+"/browse/"+s+"/branches",class:"complete-listing"}).insertAfter(i),a()})}}]),t}()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-plan-branch-selector', location = '/widget/plan-branch-selector/plan-branch-selector.soy' */
// This file was automatically generated from plan-branch-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.plan.branch.selector.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.plan == 'undefined') { bamboo.widget.plan = {}; }
if (typeof bamboo.widget.plan.branch == 'undefined') { bamboo.widget.plan.branch = {}; }
if (typeof bamboo.widget.plan.branch.selector == 'undefined') { bamboo.widget.plan.branch.selector = {}; }


bamboo.widget.plan.branch.selector.icon = function(opt_data, opt_ignored) {
  var output = '';
  var iconType__soy3 = '';
  switch (opt_data.workflow) {
    case 'pullRequests':
      iconType__soy3 += 'devtools-pull-request';
      break;
    case 'branches':
      iconType__soy3 += 'devtools-branch';
      break;
    default:
      iconType__soy3 += 'devtools-branch';
  }
  output += '<span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(iconType__soy3) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.plan.branch.selector.icon.soyTemplateName = 'bamboo.widget.plan.branch.selector.icon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-error-collection', location = '/util/error-collection/error-collection.js' */
define("util/error-collection",["jquery"],function(r){"use strict";var t=function(){this.errors=[],this.fieldErrors={}};return t.prototype.hasErrors=function(){return!r.isEmptyObject(this.errors)||!r.isEmptyObject(this.fieldErrors)},t.prototype.addErrorMessage=function(r){this.errors.push(r)},t.prototype.addFieldError=function(r,t){this.fieldErrors[r]||(this.fieldErrors[r]=[]),this.fieldErrors[r].push(t)},t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-preferences', location = '/util/preferences/preferences.js' */
define("util/preferences",["jquery","underscore"],function(e,r){"use strict";var n=WRM.data.claim("bamboo.web.resources.common:util-preferences.user-preferences");return{setValue:function(t,s){r.isUndefined(s)&&(s=!0),n[t]=JSON.stringify(s);var a={};a[t]=n[t],e.post(AJS.contextPath()+"/rest/pref/latest/user",a)},getValue:function(e){var t=n[e];return r.isUndefined(t)?null:JSON.parse(t)},getBoolean:function(e){var r=this.getValue(e);return"false"!==r&&!!r}}}),AJS.namespace&&AJS.namespace("Bamboo.PreferencesManager",null,require("util/preferences"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-options', location = '/util/options/options.js' */
define("util/options",[],function(){"use strict";return{animationSpeed:200,spinner:{color:"#fff",length:20,lines:12,radius:30,speed:1.5,trail:60,width:10}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-uri', location = '/util/uri/uri-utils.js' */
define("util/uri-utils",["exports"],function(e){"use strict";function t(e){return(e||document.location.search).replace(/(^\?)/,"").split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{})}e.queryToObject=t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-router', location = '/util/router/router.js' */
define("util/router",["underscore","backbone"],function(t,e){"use strict";return t.extend(e.History.prototype,{routeStripper:/^[#]|\s+$/g,trailingSlash:/\/$/,getFragment:function(t,e){if(!t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var r=this.root.replace(this.trailingSlash,""),i=this.location.search;t.indexOf(r)||(t=t.substr(r.length)),i&&this._hasPushState&&(t+=i)}else t=this.getHash();return t.replace(this.routeStripper,"")}}),e.Router.extend({navigate:function(r,i){var a={trigger:!0};t.extend(a,i),delete a.params,e.Router.prototype.navigate(r,a)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-dark-features', location = '/util/dark-features/dark-features.js' */
define("util/dark-features",[],function(){"use strict";var e=WRM.data.claim("bamboo.web.resources.common:util-dark-features.enabled-dark-features");return{isEnabled:function(r){return e.indexOf(r)!==-1}}}),AJS.DarkFeatures=require("util/dark-features");
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-help-links', location = '/util/help-links/help-links.js' */
define("util/help-links",[],function(){"use strict";var e=void 0;return{getHelpLink:function(i){if(!e){e=WRM.data.claim("bamboo.web.resources.common:util-help-links.help-links")}return e[i]||""}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-clipboard', location = '/bower/clipboard/clipboard.js' */
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT  Zeno Rocha
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["ClipboardJS"] = factory();
	else
		root["ClipboardJS"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _clipboardAction = __webpack_require__(1);

var _clipboardAction2 = _interopRequireDefault(_clipboardAction);

var _tinyEmitter = __webpack_require__(3);

var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);

var _goodListener = __webpack_require__(4);

var _goodListener2 = _interopRequireDefault(_goodListener);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * Base class which takes one or more elements, adds event listeners to them,
 * and instantiates a new `ClipboardAction` on each click.
 */
var Clipboard = function (_Emitter) {
    _inherits(Clipboard, _Emitter);

    /**
     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger
     * @param {Object} options
     */
    function Clipboard(trigger, options) {
        _classCallCheck(this, Clipboard);

        var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));

        _this.resolveOptions(options);
        _this.listenClick(trigger);
        return _this;
    }

    /**
     * Defines if attributes would be resolved using internal setter functions
     * or custom functions that were passed in the constructor.
     * @param {Object} options
     */


    _createClass(Clipboard, [{
        key: 'resolveOptions',
        value: function resolveOptions() {
            var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            this.action = typeof options.action === 'function' ? options.action : this.defaultAction;
            this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;
            this.text = typeof options.text === 'function' ? options.text : this.defaultText;
            this.container = _typeof(options.container) === 'object' ? options.container : document.body;
        }

        /**
         * Adds a click event listener to the passed trigger.
         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger
         */

    }, {
        key: 'listenClick',
        value: function listenClick(trigger) {
            var _this2 = this;

            this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {
                return _this2.onClick(e);
            });
        }

        /**
         * Defines a new `ClipboardAction` on each click event.
         * @param {Event} e
         */

    }, {
        key: 'onClick',
        value: function onClick(e) {
            var trigger = e.delegateTarget || e.currentTarget;

            if (this.clipboardAction) {
                this.clipboardAction = null;
            }

            this.clipboardAction = new _clipboardAction2.default({
                action: this.action(trigger),
                target: this.target(trigger),
                text: this.text(trigger),
                container: this.container,
                trigger: trigger,
                emitter: this
            });
        }

        /**
         * Default `action` lookup function.
         * @param {Element} trigger
         */

    }, {
        key: 'defaultAction',
        value: function defaultAction(trigger) {
            return getAttributeValue('action', trigger);
        }

        /**
         * Default `target` lookup function.
         * @param {Element} trigger
         */

    }, {
        key: 'defaultTarget',
        value: function defaultTarget(trigger) {
            var selector = getAttributeValue('target', trigger);

            if (selector) {
                return document.querySelector(selector);
            }
        }

        /**
         * Returns the support of the given action, or all actions if no action is
         * given.
         * @param {String} [action]
         */

    }, {
        key: 'defaultText',


        /**
         * Default `text` lookup function.
         * @param {Element} trigger
         */
        value: function defaultText(trigger) {
            return getAttributeValue('text', trigger);
        }

        /**
         * Destroy lifecycle.
         */

    }, {
        key: 'destroy',
        value: function destroy() {
            this.listener.destroy();

            if (this.clipboardAction) {
                this.clipboardAction.destroy();
                this.clipboardAction = null;
            }
        }
    }], [{
        key: 'isSupported',
        value: function isSupported() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];

            var actions = typeof action === 'string' ? [action] : action;
            var support = !!document.queryCommandSupported;

            actions.forEach(function (action) {
                support = support && !!document.queryCommandSupported(action);
            });

            return support;
        }
    }]);

    return Clipboard;
}(_tinyEmitter2.default);

/**
 * Helper function to retrieve attribute value.
 * @param {String} suffix
 * @param {Element} element
 */


function getAttributeValue(suffix, element) {
    var attribute = 'data-clipboard-' + suffix;

    if (!element.hasAttribute(attribute)) {
        return;
    }

    return element.getAttribute(attribute);
}

module.exports = Clipboard;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _select = __webpack_require__(2);

var _select2 = _interopRequireDefault(_select);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Inner class which performs selection from either `text` or `target`
 * properties and then executes copy or cut operations.
 */
var ClipboardAction = function () {
    /**
     * @param {Object} options
     */
    function ClipboardAction(options) {
        _classCallCheck(this, ClipboardAction);

        this.resolveOptions(options);
        this.initSelection();
    }

    /**
     * Defines base properties passed from constructor.
     * @param {Object} options
     */


    _createClass(ClipboardAction, [{
        key: 'resolveOptions',
        value: function resolveOptions() {
            var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            this.action = options.action;
            this.container = options.container;
            this.emitter = options.emitter;
            this.target = options.target;
            this.text = options.text;
            this.trigger = options.trigger;

            this.selectedText = '';
        }

        /**
         * Decides which selection strategy is going to be applied based
         * on the existence of `text` and `target` properties.
         */

    }, {
        key: 'initSelection',
        value: function initSelection() {
            if (this.text) {
                this.selectFake();
            } else if (this.target) {
                this.selectTarget();
            }
        }

        /**
         * Creates a fake textarea element, sets its value from `text` property,
         * and makes a selection on it.
         */

    }, {
        key: 'selectFake',
        value: function selectFake() {
            var _this = this;

            var isRTL = document.documentElement.getAttribute('dir') == 'rtl';

            this.removeFake();

            this.fakeHandlerCallback = function () {
                return _this.removeFake();
            };
            this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;

            this.fakeElem = document.createElement('textarea');
            // Prevent zooming on iOS
            this.fakeElem.style.fontSize = '12pt';
            // Reset box model
            this.fakeElem.style.border = '0';
            this.fakeElem.style.padding = '0';
            this.fakeElem.style.margin = '0';
            // Move element out of screen horizontally
            this.fakeElem.style.position = 'absolute';
            this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';
            // Move element to the same position vertically
            var yPosition = window.pageYOffset || document.documentElement.scrollTop;
            this.fakeElem.style.top = yPosition + 'px';

            this.fakeElem.setAttribute('readonly', '');
            this.fakeElem.value = this.text;

            this.container.appendChild(this.fakeElem);

            this.selectedText = (0, _select2.default)(this.fakeElem);
            this.copyText();
        }

        /**
         * Only removes the fake element after another click event, that way
         * a user can hit `Ctrl+C` to copy because selection still exists.
         */

    }, {
        key: 'removeFake',
        value: function removeFake() {
            if (this.fakeHandler) {
                this.container.removeEventListener('click', this.fakeHandlerCallback);
                this.fakeHandler = null;
                this.fakeHandlerCallback = null;
            }

            if (this.fakeElem) {
                this.container.removeChild(this.fakeElem);
                this.fakeElem = null;
            }
        }

        /**
         * Selects the content from element passed on `target` property.
         */

    }, {
        key: 'selectTarget',
        value: function selectTarget() {
            this.selectedText = (0, _select2.default)(this.target);
            this.copyText();
        }

        /**
         * Executes the copy operation based on the current selection.
         */

    }, {
        key: 'copyText',
        value: function copyText() {
            var succeeded = void 0;

            try {
                succeeded = document.execCommand(this.action);
            } catch (err) {
                succeeded = false;
            }

            this.handleResult(succeeded);
        }

        /**
         * Fires an event based on the copy operation result.
         * @param {Boolean} succeeded
         */

    }, {
        key: 'handleResult',
        value: function handleResult(succeeded) {
            this.emitter.emit(succeeded ? 'success' : 'error', {
                action: this.action,
                text: this.selectedText,
                trigger: this.trigger,
                clearSelection: this.clearSelection.bind(this)
            });
        }

        /**
         * Moves focus away from `target` and back to the trigger, removes current selection.
         */

    }, {
        key: 'clearSelection',
        value: function clearSelection() {
            if (this.trigger) {
                this.trigger.focus();
            }

            window.getSelection().removeAllRanges();
        }

        /**
         * Sets the `action` to be performed which can be either 'copy' or 'cut'.
         * @param {String} action
         */

    }, {
        key: 'destroy',


        /**
         * Destroy lifecycle.
         */
        value: function destroy() {
            this.removeFake();
        }
    }, {
        key: 'action',
        set: function set() {
            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';

            this._action = action;

            if (this._action !== 'copy' && this._action !== 'cut') {
                throw new Error('Invalid "action" value, use either "copy" or "cut"');
            }
        }

        /**
         * Gets the `action` property.
         * @return {String}
         */
        ,
        get: function get() {
            return this._action;
        }

        /**
         * Sets the `target` property using an element
         * that will be have its content copied.
         * @param {Element} target
         */

    }, {
        key: 'target',
        set: function set(target) {
            if (target !== undefined) {
                if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {
                    if (this.action === 'copy' && target.hasAttribute('disabled')) {
                        throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');
                    }

                    if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {
                        throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');
                    }

                    this._target = target;
                } else {
                    throw new Error('Invalid "target" value, use a valid Element');
                }
            }
        }

        /**
         * Gets the `target` property.
         * @return {String|HTMLElement}
         */
        ,
        get: function get() {
            return this._target;
        }
    }]);

    return ClipboardAction;
}();

module.exports = ClipboardAction;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

function select(element) {
    var selectedText;

    if (element.nodeName === 'SELECT') {
        element.focus();

        selectedText = element.value;
    }
    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {
        var isReadOnly = element.hasAttribute('readonly');

        if (!isReadOnly) {
            element.setAttribute('readonly', '');
        }

        element.select();
        element.setSelectionRange(0, element.value.length);

        if (!isReadOnly) {
            element.removeAttribute('readonly');
        }

        selectedText = element.value;
    }
    else {
        if (element.hasAttribute('contenteditable')) {
            element.focus();
        }

        var selection = window.getSelection();
        var range = document.createRange();

        range.selectNodeContents(element);
        selection.removeAllRanges();
        selection.addRange(range);

        selectedText = selection.toString();
    }

    return selectedText;
}

module.exports = select;


/***/ }),
/* 3 */
/***/ (function(module, exports) {

function E () {
  // Keep this empty so it's easier to inherit from
  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)
}

E.prototype = {
  on: function (name, callback, ctx) {
    var e = this.e || (this.e = {});

    (e[name] || (e[name] = [])).push({
      fn: callback,
      ctx: ctx
    });

    return this;
  },

  once: function (name, callback, ctx) {
    var self = this;
    function listener () {
      self.off(name, listener);
      callback.apply(ctx, arguments);
    };

    listener._ = callback
    return this.on(name, listener, ctx);
  },

  emit: function (name) {
    var data = [].slice.call(arguments, 1);
    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();
    var i = 0;
    var len = evtArr.length;

    for (i; i < len; i++) {
      evtArr[i].fn.apply(evtArr[i].ctx, data);
    }

    return this;
  },

  off: function (name, callback) {
    var e = this.e || (this.e = {});
    var evts = e[name];
    var liveEvents = [];

    if (evts && callback) {
      for (var i = 0, len = evts.length; i < len; i++) {
        if (evts[i].fn !== callback && evts[i].fn._ !== callback)
          liveEvents.push(evts[i]);
      }
    }

    // Remove event from queue to prevent memory leak
    // Suggested by https://github.com/lazd
    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910

    (liveEvents.length)
      ? e[name] = liveEvents
      : delete e[name];

    return this;
  }
};

module.exports = E;


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

var is = __webpack_require__(5);
var delegate = __webpack_require__(6);

/**
 * Validates all params and calls the right
 * listener function based on its target type.
 *
 * @param {String|HTMLElement|HTMLCollection|NodeList} target
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listen(target, type, callback) {
    if (!target && !type && !callback) {
        throw new Error('Missing required arguments');
    }

    if (!is.string(type)) {
        throw new TypeError('Second argument must be a String');
    }

    if (!is.fn(callback)) {
        throw new TypeError('Third argument must be a Function');
    }

    if (is.node(target)) {
        return listenNode(target, type, callback);
    }
    else if (is.nodeList(target)) {
        return listenNodeList(target, type, callback);
    }
    else if (is.string(target)) {
        return listenSelector(target, type, callback);
    }
    else {
        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');
    }
}

/**
 * Adds an event listener to a HTML element
 * and returns a remove listener function.
 *
 * @param {HTMLElement} node
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenNode(node, type, callback) {
    node.addEventListener(type, callback);

    return {
        destroy: function() {
            node.removeEventListener(type, callback);
        }
    }
}

/**
 * Add an event listener to a list of HTML elements
 * and returns a remove listener function.
 *
 * @param {NodeList|HTMLCollection} nodeList
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenNodeList(nodeList, type, callback) {
    Array.prototype.forEach.call(nodeList, function(node) {
        node.addEventListener(type, callback);
    });

    return {
        destroy: function() {
            Array.prototype.forEach.call(nodeList, function(node) {
                node.removeEventListener(type, callback);
            });
        }
    }
}

/**
 * Add an event listener to a selector
 * and returns a remove listener function.
 *
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenSelector(selector, type, callback) {
    return delegate(document.body, selector, type, callback);
}

module.exports = listen;


/***/ }),
/* 5 */
/***/ (function(module, exports) {

/**
 * Check if argument is a HTML element.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.node = function(value) {
    return value !== undefined
        && value instanceof HTMLElement
        && value.nodeType === 1;
};

/**
 * Check if argument is a list of HTML elements.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.nodeList = function(value) {
    var type = Object.prototype.toString.call(value);

    return value !== undefined
        && (type === '[object NodeList]' || type === '[object HTMLCollection]')
        && ('length' in value)
        && (value.length === 0 || exports.node(value[0]));
};

/**
 * Check if argument is a string.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.string = function(value) {
    return typeof value === 'string'
        || value instanceof String;
};

/**
 * Check if argument is a function.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.fn = function(value) {
    var type = Object.prototype.toString.call(value);

    return type === '[object Function]';
};


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

var closest = __webpack_require__(7);

/**
 * Delegates event to a selector.
 *
 * @param {Element} element
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @param {Boolean} useCapture
 * @return {Object}
 */
function _delegate(element, selector, type, callback, useCapture) {
    var listenerFn = listener.apply(this, arguments);

    element.addEventListener(type, listenerFn, useCapture);

    return {
        destroy: function() {
            element.removeEventListener(type, listenerFn, useCapture);
        }
    }
}

/**
 * Delegates event to a selector.
 *
 * @param {Element|String|Array} [elements]
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @param {Boolean} useCapture
 * @return {Object}
 */
function delegate(elements, selector, type, callback, useCapture) {
    // Handle the regular Element usage
    if (typeof elements.addEventListener === 'function') {
        return _delegate.apply(null, arguments);
    }

    // Handle Element-less usage, it defaults to global delegation
    if (typeof type === 'function') {
        // Use `document` as the first parameter, then apply arguments
        // This is a short way to .unshift `arguments` without running into deoptimizations
        return _delegate.bind(null, document).apply(null, arguments);
    }

    // Handle Selector-based usage
    if (typeof elements === 'string') {
        elements = document.querySelectorAll(elements);
    }

    // Handle Array-like based usage
    return Array.prototype.map.call(elements, function (element) {
        return _delegate(element, selector, type, callback, useCapture);
    });
}

/**
 * Finds closest match and invokes callback.
 *
 * @param {Element} element
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @return {Function}
 */
function listener(element, selector, type, callback) {
    return function(e) {
        e.delegateTarget = closest(e.target, selector);

        if (e.delegateTarget) {
            callback.call(element, e);
        }
    }
}

module.exports = delegate;


/***/ }),
/* 7 */
/***/ (function(module, exports) {

var DOCUMENT_NODE_TYPE = 9;

/**
 * A polyfill for Element.matches()
 */
if (typeof Element !== 'undefined' && !Element.prototype.matches) {
    var proto = Element.prototype;

    proto.matches = proto.matchesSelector ||
                    proto.mozMatchesSelector ||
                    proto.msMatchesSelector ||
                    proto.oMatchesSelector ||
                    proto.webkitMatchesSelector;
}

/**
 * Finds the closest parent that matches a selector.
 *
 * @param {Element} element
 * @param {String} selector
 * @return {Function}
 */
function closest (element, selector) {
    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {
        if (typeof element.matches === 'function' &&
            element.matches(selector)) {
          return element;
        }
        element = element.parentNode;
    }
}

module.exports = closest;


/***/ })
/******/ ]);
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:lib-clipboard', location = '/util/shims/clipboard.js' */
define('clipboard', function() {
    return window.ClipboardJS;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-copy-clipboard', location = '/widget/copy-clipboard/copy-clipboard.soy' */
// This file was automatically generated from copy-clipboard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.copyclipboard.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.copyclipboard == 'undefined') { bamboo.widget.copyclipboard = {}; }


bamboo.widget.copyclipboard.element = function(opt_data, opt_ignored) {
  var output = '';
  var copyMessage__soy3 = opt_data.copyMessage != null ? opt_data.copyMessage : "Click to copy";
  var copyCompleteMessage__soy4 = opt_data.copyCompleteMessage != null ? opt_data.copyCompleteMessage : "Copied!";
  output += aui.icons.icon({tagName: 'copy-clipboard', useIconFont: true, icon: 'copy-clipboard', accessibilityText: opt_data.text, extraAttributes: {'data-clipboard-text': opt_data.text, 'data-message': copyMessage__soy3, 'data-message-complete': copyCompleteMessage__soy4}});
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.copyclipboard.element.soyTemplateName = 'bamboo.widget.copyclipboard.element';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-copy-clipboard', location = '/widget/copy-clipboard/copy-clipboard.js' */
require(["jquery","atlassian/libs/skate-0.12.6","clipboard"],function(a,t,e){"use strict";a(function(){t("copy-clipboard",{attached:function(t){var s=a(t);s.attr("data-original-message",s.attr("data-message")),new e(t).on("success",function(){s.attr("data-message",s.attr("data-message-complete")).tipsy("show"),s.one("mouseout",function(){s.attr("data-message",s.attr("data-original-message"))})}),s.tipsy({title:"data-message",delayIn:0,delayOut:100,trigger:"hover"})}})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog2-confirmation', location = '/widget/dialog2-confirmation/dialog2-confirmation.js' */
define("widget/dialog2-confirmation",["widget/dialog2"],function(t){"use strict";return t.extend({initialize:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.titleText,n=i.content,o=i.onConfirm,a=i.warning,l=void 0!==a&&a,r=i.extraClasses,s=void 0===r?"":r,c=i.confirmLabel,d=void 0===c?"Confirm":c,g=i.size,f=void 0===g?t.SMALL:g;t.prototype.initialize.call(this,{titleText:e,content:n,warning:l,extraClasses:s,size:f,removeOnHide:!0,buttons:[{onClick:o,text:d,type:"primary",extraClasses:"dialog2-confirmation__confirm"},{onClick:function(t){return t.hide()},text:"Cancel",type:"link",extraClasses:"dialog2-confirmation__cancel"}]})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form', location = '/widget/dialog-form/dialog-form.js' */
define("widget/dialog-form",["jquery","underscore","widget/dialog","util/ajax-form","util/error-helper"],function(t,o,i,e,r){"use strict";return i.extend({defaultSettings:{buttons:[{id:"save",label:"Save",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},formSettings:{checkboxAsBoolean:!0},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.helpLink&&(this.helpLink=t.helpLink,delete t.helpLink),t.form&&(this.formSettings=o.defaults(t.form,this.formSettings),delete t.form),this.formEvents={error:[this.onFormError.bind(this)],submit:[this.onFormSubmit.bind(this)],success:[this.onFormSuccess.bind(this)]},t.error&&this.formEvents.error.push(t.error),t.submit&&this.formEvents.submit.push(t.submit),t.success&&this.formEvents.success.push(t.success),i.prototype.initialize.call(this,o.defaults(t||{},this.defaultSettings))},onContentLoaded:function(){for(var t,o=this,r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];(t=i.prototype.onContentLoaded).call.apply(t,[this].concat(n));var a={};this.formSettings.serialize&&(a.serialize=this.formSettings.serialize),this.form=new e(this.dialog.getPage(0).body,a),this.formSettings.noBind||this.form.bind(this.formSettings),this.formEvents.error.forEach(function(t){return o.form.on("error",t)}),this.formEvents.submit.forEach(function(t){return o.form.on("submit",t)}),this.formEvents.success.forEach(function(t){return o.form.on("success",t)}),this.helpLink&&this.dialog.getPage(0).header.after(bamboo.widget.dialog.form.helpLink(this.helpLink))},onContentLoadError:function(t){for(var o,e=arguments.length,n=Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];(o=i.prototype.onContentLoaded).call.apply(o,[this,t].concat(n));var a=r.getErrorFromResponse(t);r.displayErrorDialog(a)},onButtonClick:function(t){for(var o,e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];(o=i.prototype.onButtonClick).call.apply(o,[this,t].concat(r)),"save"===t&&this.form.$el.trigger("submit")},onFormSuccess:function(){this.dialog.hide(),this.dialog.remove()},onFormSubmit:function(){var t=this.dialog.getPage(0).buttonpanel;t.prepend(aui.icons.icon({size:"small",icon:"wait"})),t.find(":button").attr("disabled",!0)},onFormError:function(){var t=this.dialog.getPage(0).buttonpanel;t.find(".aui-icon-wait").remove(),t.find(":button").removeAttr("disabled")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form', location = '/widget/dialog-form/dialog-form.soy' */
// This file was automatically generated from dialog-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.dialog.form.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.dialog == 'undefined') { bamboo.widget.dialog = {}; }
if (typeof bamboo.widget.dialog.form == 'undefined') { bamboo.widget.dialog.form = {}; }


bamboo.widget.dialog.form.content = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.content.soyTemplateName = 'bamboo.widget.dialog.form.content';
}


bamboo.widget.dialog.form.helpLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank" class="dialog-form--help-link">' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.helpLink.soyTemplateName = 'bamboo.widget.dialog.form.helpLink';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form-deletion', location = '/widget/dialog-form-deletion/dialog-form-deletion.soy' */
// This file was automatically generated from dialog-form-deletion.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.dialog.form.deletion.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.dialog == 'undefined') { bamboo.widget.dialog = {}; }
if (typeof bamboo.widget.dialog.form == 'undefined') { bamboo.widget.dialog.form = {}; }
if (typeof bamboo.widget.dialog.form.deletion == 'undefined') { bamboo.widget.dialog.form.deletion = {}; }


bamboo.widget.dialog.form.deletion.loading = function(opt_data, opt_ignored) {
  return '<form><div class="aui-message aui-message-generic">' + soy.$$escapeHtml("Checking artifact dependencies ...") + ' <span class="icon icon-loading aui-dialog-content-loading"></span></div></form>';
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.deletion.loading.soyTemplateName = 'bamboo.widget.dialog.form.deletion.loading';
}


bamboo.widget.dialog.form.deletion.invalidToken = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '<p>' + soy.$$escapeHtml("Artifact dependencies have changed, please try again.") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.widget.dialog.form.deletion.invalidToken.soyTemplateName = 'bamboo.widget.dialog.form.deletion.invalidToken';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-dialog-form-deletion', location = '/widget/dialog-form-deletion/dialog-form-deletion.js' */
define("widget/dialog-form-deletion",["jquery","underscore","widget/dialog-form","util/ajax"],function(t,e,i,n){"use strict";return i.extend({urlRoot:AJS.contextPath()+"/rest/api/latest/",defaultSettings:{buttons:[{id:"confirm",label:"Confirm",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},initialize:function(t){var e=t||{};this.templateDelete=bamboo.widget.dialog.form.deletion,e.content=this.templateDelete.loading(),e.height=320,e.form={type:"DELETE",noBind:!0},this.url=this.urlRoot+e.resourceUrl,this.formTemplateData=t.templateData||{},this.formTemplate=t.template,i.prototype.initialize.call(this,e),this.dialogPage=this.dialog.getPage(0),this.fetchWarnings()},onButtonClick:function(t){for(var n,o=arguments.length,a=Array(o>1?o-1:0),r=1;r<o;r++)a[r-1]=arguments[r];(n=i.prototype.onButtonClick).call.apply(n,[this,t].concat(a)),"confirm"===t&&(this.refetchToken?(this.form.$el.html(this.templateDelete.loading()),this.fetchWarnings()):this.warningData.confirmationToken&&(this.form.bind(e.defaults({url:this.url+"?confirmationToken="+this.warningData.confirmationToken},this.formSettings)),this.form.$el.trigger("submit")))},onWarningLoaded:function(t){var i=this.dialogPage.button[0];this.refetchToken&&(i.item.text(i.originalText),i.originalText=null,this.refetchToken=!1),i.item.show().focus(),this.warningData=t,this.form.$el.html(this.formTemplate({isRunning:this.warningData.running,jobs:this.getConsumerJobs(this.warningData.artifactSubscriptions),data:this.formTemplateData})),this.warningData.running?(e.each(this.dialogPage.button,function(t){t.item.hide()}),this.dialog.addButton("Close",function(t){t.remove()})):this.dialogPage.button[0].item.removeAttr("disabled")},onFormError:function(t,e,n){for(var o,a=arguments.length,r=Array(a>3?a-3:0),l=3;l<a;l++)r[l-3]=arguments[l];if((o=i.prototype.onFormError).call.apply(o,[this,t,e,n].concat(r)),409===n){var s=this.dialogPage.button[0];s.originalText=s.item.text(),s.item.text("Try again"),this.form.$el.html(this.templateDelete.invalidToken()),this.refetchToken=!0}},fetchWarnings:function(){this.dialogPage.button[0].item.hide(),n(this.url+"/deletionWarnings?expand=stage,plan,project").done(e.bind(this.onWarningLoaded,this))},getConsumerJobs:function(t){var i=[],n=[];return e.each(t,function(t){e.each(t.consumerJobs,function(t){e.indexOf(n,t.id)===-1&&i.push(t)})}),i}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-view-results-item.js' */
define("widget/quicksearch-view-results-item",["backbone"],function(t){"use strict";return t.View.extend({initialize:function(t){this.options=t,this.template=bamboo.widget.quicksearch},render:function(){var t={content:this.template[this.options.type.toLowerCase()]({id:this.options.id,entity:this.options.entity})};return this.options.newType&&(t.cssClass="new-type"),this.setElement(this.template.row(t)),this.$el}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-collection-results.js' */
define("widget/quicksearch-collection-results",["backbone"],function(e){"use strict";return e.Collection.extend({url:AJS.contextPath()+"/rest/api/latest/quicksearch"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-view-results.js' */
define("widget/quicksearch-view-results",["jquery","underscore","widget/quicksearch-collection-results","widget/quicksearch-view-results-item"],function(e,i,t,s){"use strict";return Backbone.View.extend({initialize:function(){this.template=bamboo.widget.quicksearch,this.initialElements(),this.registerEvents()},initialElements:function(){this.$noMatches=e(this.template.nomatches()),this.$items=this.$el},registerEvents:function(){this.listenTo(this.collection,"add",this.onChange),this.listenTo(this,"select",this.onSelect),this.listenTo(this,"move",this.onMove),this.listenTo(this,"hide",this.onHide)},onSelect:function(){var e=this.$items.find("li.active");e.length&&(this.$el.addClass("hidden"),window.location.href=e.find("a").attr("href"))},onChange:function(t){var n=t.get("searchResults"),h=document.createDocumentFragment();this.$items.find("li").remove(),this.$el.toggleClass("hidden",!1);var l=null;i.each(n,i.bind(function(e){l!==e.type&&(e.newType=null!==l,l=e.type);var i=new s(e);h.appendChild(i.render().get(0))},this)),e(h.childNodes[0]).addClass("active"),n.length||h.appendChild(this.$noMatches.get(0)),this.$items.append(h)},onMove:function(e){var i=this.$items.find("li.no-results").length,t=void 0;i||(e?(t=this.$items.find("li.active").removeClass("active").next(),t.length||(t=this.$items.find("li:first"))):(t=this.$items.find("li.active").removeClass("active").prev(),t.length||(t=this.$items.find("li:last"))),t&&t.length&&t.addClass("active"))},onHide:function(){this.$el.addClass("hidden"),this.$items.find("li.active").removeClass("active")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch.soy' */
// This file was automatically generated from quicksearch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.quicksearch.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.quicksearch == 'undefined') { bamboo.widget.quicksearch = {}; }


bamboo.widget.quicksearch.row = function(opt_data, opt_ignored) {
  return '<li ' + ((opt_data.cssClass) ? 'class="' + soy.$$escapeHtml(opt_data.cssClass) + '"' : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.row.soyTemplateName = 'bamboo.widget.quicksearch.row';
}


bamboo.widget.quicksearch.nomatches = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.quicksearch.row({content: '' + soy.$$escapeHtml("No matches found"), cssClass: 'no-results'});
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.nomatches.soyTemplateName = 'bamboo.widget.quicksearch.nomatches';
}


bamboo.widget.quicksearch.project = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.entity.key) + '" tabindex="-1" class="entity project">' + widget.icons.fontIcon({type: 'devtools-folder-closed'}) + '<span class="title"><span class="single project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.project.soyTemplateName = 'bamboo.widget.quicksearch.project';
}


bamboo.widget.quicksearch.chain = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.entity.key) + '" tabindex="-1" class="entity chain">' + widget.icons.fontIcon({type: 'build'}) + '<span class="title"><span class="single plan-name">' + soy.$$escapeHtml(opt_data.entity.planName) + '</span></span><span class="subtitle project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.chain.soyTemplateName = 'bamboo.widget.quicksearch.chain';
}


bamboo.widget.quicksearch.branch = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.entity.key) + '" tabindex="-1" class="entity branch">' + widget.icons.fontIcon({type: 'devtools-branch'}) + '<span class="title"><span class="plan-name">' + soy.$$escapeHtml(opt_data.entity.planName) + '</span><span class="branch"><span class="divider"></span>' + soy.$$escapeHtml(opt_data.entity.branchName) + '</span></span><span class="subtitle project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.branch.soyTemplateName = 'bamboo.widget.quicksearch.branch';
}


bamboo.widget.quicksearch.deploymentproject = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/deploy/viewDeploymentProjectEnvironments.action?id=' + soy.$$escapeHtml(opt_data.id) + '" tabindex="-1" class="entity deployment-project">' + widget.icons.fontIcon({type: 'deploy'}) + '<span class="title"><span class="single deployment-project-name">' + soy.$$escapeHtml(opt_data.entity.projectName) + '</span></span></a>';
};
if (goog.DEBUG) {
  bamboo.widget.quicksearch.deploymentproject.soyTemplateName = 'bamboo.widget.quicksearch.deploymentproject';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch-view-input.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}define("widget/quicksearch-view-input",["jquery","underscore","backbone"],function(e,t,n){"use strict";return n.View.extend({keys:{13:function(){return["select"]},27:function(){return["hide",!0]},38:function(){return["move",!1]},40:function(){return["move",!0]}},initialize:function(){this.$el.on("keydown",t.bind(this.onKeyPress,this)),this.$el.on("keyup",t.debounce(t.bind(this.onKeyUp,this),250));var n=this.$el.parent();e(document.body).on("click",t.bind(function(t){e(t.target).closest(n).length||this.trigger.call(this,"hide")},this))},onKeyPress:function(e){var t=this.keys[e.keyCode];t&&(this.trigger.apply(this,_toConsumableArray(t())),e.stopPropagation(),e.preventDefault())},onKeyUp:function(t){if(!this.keys[t.keyCode]){var n=e.trim(this.$el.val());n.length>0?this.trigger("change",n):this.trigger("hide")}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-quicksearch', location = '/widget/quicksearch/quicksearch.js' */
define("widget/quicksearch",["jquery","underscore","backbone","widget/quicksearch-collection-results","widget/quicksearch-view-input","widget/quicksearch-view-results"],function(e,t,i,s,n,r){"use strict";return i.View.extend({initialize:function(){this.collection=new s,this.includeView(),this.registerEvents()},includeView:function(){this.input=new n({el:this.$el.find(".term")}),this.results=new r({el:this.$el.find(".results"),collection:this.collection}),AJS.whenIType("/").execute(t.bind(this.onHide,this))},registerEvents:function(){this.listenTo(this.input,"select",this.onSelect),this.listenTo(this.input,"change",this.onChange),this.listenTo(this.input,"move",this.onMove),this.listenTo(this.input,"hide",this.onHide)},onSelect:function(){this.results.trigger("select")},onChange:function(t){this.requestInProgress&&this.requestInProgress.readyState>0&&this.requestInProgress.readyState<4&&this.requestInProgress.abort(),this.requestInProgress=this.collection.fetch({data:e.param({searchTerm:t})})},onMove:function(e){this.results.trigger("move",e),this.results.$el.focus()},onHide:function(e){this.results.trigger("hide"),e&&this.input.$el.focus()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-bulk-selection-links', location = '/widget/bulk-selection-links/bulk-selection-links.soy' */
// This file was automatically generated from bulk-selection-links.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.bulk.selection.links.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.bulk == 'undefined') { bamboo.widget.bulk = {}; }
if (typeof bamboo.widget.bulk.selection == 'undefined') { bamboo.widget.bulk.selection = {}; }
if (typeof bamboo.widget.bulk.selection.links == 'undefined') { bamboo.widget.bulk.selection.links = {}; }


bamboo.widget.bulk.selection.links.displayLinks = function(opt_data, opt_ignored) {
  return '<span class="bulk-select-links">' + soy.$$escapeHtml("Select") + ': <span tabindex="0" role="link" class="bulk-select-link bulk-select-link-all">' + soy.$$escapeHtml("All") + '</span>, <span tabindex="0" role="link" class="bulk-select-link bulk-select-link-none">' + soy.$$escapeHtml("None") + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.widget.bulk.selection.links.displayLinks.soyTemplateName = 'bamboo.widget.bulk.selection.links.displayLinks';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-bulk-selection-links', location = '/widget/bulk-selection-links/bulk-selection-links.js' */
define("widget/bulk-selection-links",["jquery","underscore"],function(e,t){"use strict";return Backbone.View.extend({defaults:{checkboxClass:null},events:{"click .bulk-select-link-all":"selectAll","click .bulk-select-link-none":"selectNone"},template:bamboo.widget.bulk.selection.links.displayLinks,initialize:function(e){this.options=t.defaults(e,this.defaults),this.$form=this.$el.closest("form"),this.selector=t.template("input:checkbox.<%= checkboxClass %>")(this.options),this.render()},render:function(){this.$el.empty().append(this.template())},selectAll:function(){this.$form.find(this.selector).attr("checked","checked")},selectNone:function(){this.$form.find(this.selector).removeAttr("checked")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.8.3', location = 'libs/underscore/1.8.3/underscore-1.8.3.js' */
'use strict';(function(z){define("atlassian/libs/underscore-1.8.3",function(){var u={};z.call(u);return"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports?module.exports.noConflict():exports.noConflict():u._.noConflict()})})(function(){(function(){function z(a){return function(c,d,e,f){d=v(d,f,4);var g=!n(c)&&b.keys(c),h=(g||c).length,k=0<a?0:h-1;3>arguments.length&&(e=c[g?g[k]:k],k+=a);for(var p=d,m=e;0<=k&&k<h;k+=a){var l=g?g[k]:k;m=p(m,c[l],l,c)}return m}}function u(a){return function(c,
b,e){b=l(b,e);e=r(c);for(var d=0<a?0:e-1;0<=d&&d<e;d+=a)if(b(c[d],d,c))return d;return-1}}function K(a,c,d){return function(e,f,g){var h=0,k=r(e);if("number"==typeof g)0<a?h=0<=g?g:Math.max(g+k,h):k=0<=g?Math.min(g+1,k):g+k+1;else if(d&&g&&k)return g=d(e,f),e[g]===f?g:-1;if(f!==f)return g=c(q.call(e,h,k),b.isNaN),0<=g?g+h:-1;for(g=0<a?h:k-1;0<=g&&g<k;g+=a)if(e[g]===f)return g;return-1}}function L(a,c){var d=M.length,e=a.constructor;e=b.isFunction(e)&&e.prototype||C;var f="constructor";for(b.has(a,
f)&&!b.contains(c,f)&&c.push(f);d--;)f=M[d],f in a&&a[f]!==e[f]&&!b.contains(c,f)&&c.push(f)}var D=this,S=D._,A=Array.prototype,C=Object.prototype,T=A.push,q=A.slice,w=C.toString,U=C.hasOwnProperty,B=Array.isArray,N=Object.keys,E=Function.prototype.bind,O=Object.create,F=function(){},b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):D._=
b;b.VERSION="1.8.3";var v=function(a,c,b){if(void 0===c)return a;switch(null==b?3:b){case 1:return function(b){return a.call(c,b)};case 2:return function(b,d){return a.call(c,b,d)};case 3:return function(b,d,g){return a.call(c,b,d,g)};case 4:return function(b,d,g,h){return a.call(c,b,d,g,h)}}return function(){return a.apply(c,arguments)}},l=function(a,c,d){return null==a?b.identity:b.isFunction(a)?v(a,c,d):b.isObject(a)?b.matcher(a):b.property(a)};b.iteratee=function(a,c){return l(a,c,Infinity)};
var x=function(a,c){return function(b){var d=arguments.length;if(2>d||null==b)return b;for(var f=1;f<d;f++)for(var g=arguments[f],h=a(g),k=h.length,p=0;p<k;p++){var m=h[p];c&&void 0!==b[m]||(b[m]=g[m])}return b}},P=function(a){if(!b.isObject(a))return{};if(O)return O(a);F.prototype=a;a=new F;F.prototype=null;return a},y=function(a){return function(c){return null==c?void 0:c[a]}},V=Math.pow(2,53)-1,r=y("length"),n=function(a){a=r(a);return"number"==typeof a&&0<=a&&a<=V};b.each=b.forEach=function(a,
c,d){c=v(c,d);var e;if(n(a))for(d=0,e=a.length;d<e;d++)c(a[d],d,a);else{var f=b.keys(a);d=0;for(e=f.length;d<e;d++)c(a[f[d]],f[d],a)}return a};b.map=b.collect=function(a,c,d){c=l(c,d);d=!n(a)&&b.keys(a);for(var e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=c(a[h],h,a)}return f};b.reduce=b.foldl=b.inject=z(1);b.reduceRight=b.foldr=z(-1);b.find=b.detect=function(a,c,d){c=n(a)?b.findIndex(a,c,d):b.findKey(a,c,d);if(void 0!==c&&-1!==c)return a[c]};b.filter=b.select=function(a,c,d){var e=
[];c=l(c,d);b.each(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e};b.reject=function(a,c,d){return b.filter(a,b.negate(l(c)),d)};b.every=b.all=function(a,c,d){c=l(c,d);d=!n(a)&&b.keys(a);for(var e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!c(a[g],g,a))return!1}return!0};b.some=b.any=function(a,c,d){c=l(c,d);d=!n(a)&&b.keys(a);for(var e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(c(a[g],g,a))return!0}return!1};b.contains=b.includes=b.include=function(a,c,d,e){n(a)||(a=b.values(a));if("number"!=
typeof d||e)d=0;return 0<=b.indexOf(a,c,d)};b.invoke=function(a,c){var d=q.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){var b=e?c:a[c];return null==b?b:b.apply(a,d)})};b.pluck=function(a,c){return b.map(a,b.property(c))};b.where=function(a,c){return b.filter(a,b.matcher(c))};b.findWhere=function(a,c){return b.find(a,b.matcher(c))};b.max=function(a,c,d){var e=-Infinity,f=-Infinity,g;if(null==c&&null!=a){a=n(a)?a:b.values(a);for(var h=0,k=a.length;h<k;h++)d=a[h],d>e&&(e=d)}else c=
l(c,d),b.each(a,function(a,b,d){g=c(a,b,d);if(g>f||-Infinity===g&&-Infinity===e)e=a,f=g});return e};b.min=function(a,c,d){var e=Infinity,f=Infinity,g;if(null==c&&null!=a){a=n(a)?a:b.values(a);for(var h=0,k=a.length;h<k;h++)d=a[h],d<e&&(e=d)}else c=l(c,d),b.each(a,function(a,b,d){g=c(a,b,d);if(g<f||Infinity===g&&Infinity===e)e=a,f=g});return e};b.shuffle=function(a){a=n(a)?a:b.values(a);for(var c=a.length,d=Array(c),e=0,f;e<c;e++)f=b.random(0,e),f!==e&&(d[e]=d[f]),d[f]=a[e];return d};b.sample=function(a,
c,d){return null==c||d?(n(a)||(a=b.values(a)),a[b.random(a.length-1)]):b.shuffle(a).slice(0,Math.max(0,c))};b.sortBy=function(a,c,d){c=l(c,d);return b.pluck(b.map(a,function(a,b,d){return{value:a,index:b,criteria:c(a,b,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var G=function(a){return function(c,d,e){var f={};d=l(d,e);b.each(c,function(b,e){e=d(b,e,c);a(f,b,e)});return f}};b.groupBy=G(function(a,
c,d){b.has(a,d)?a[d].push(c):a[d]=[c]});b.indexBy=G(function(a,b,d){a[d]=b});b.countBy=G(function(a,c,d){b.has(a,d)?a[d]++:a[d]=1});b.toArray=function(a){return a?b.isArray(a)?q.call(a):n(a)?b.map(a,b.identity):b.values(a):[]};b.size=function(a){return null==a?0:n(a)?a.length:b.keys(a).length};b.partition=function(a,c,d){c=l(c,d);var e=[],f=[];b.each(a,function(a,b,d){(c(a,b,d)?e:f).push(a)});return[e,f]};b.first=b.head=b.take=function(a,c,d){if(null!=a)return null==c||d?a[0]:b.initial(a,a.length-
c)};b.initial=function(a,b,d){return q.call(a,0,Math.max(0,a.length-(null==b||d?1:b)))};b.last=function(a,c,d){if(null!=a)return null==c||d?a[a.length-1]:b.rest(a,Math.max(0,a.length-c))};b.rest=b.tail=b.drop=function(a,b,d){return q.call(a,null==b||d?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var t=function(a,c,d,e){var f=[],g=0;e=e||0;for(var h=r(a);e<h;e++){var k=a[e];if(n(k)&&(b.isArray(k)||b.isArguments(k))){c||(k=t(k,c,d));var p=0,m=k.length;for(f.length+=m;p<m;)f[g++]=k[p++]}else d||
(f[g++]=k)}return f};b.flatten=function(a,b){return t(a,b,!1)};b.without=function(a){return b.difference(a,q.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){b.isBoolean(c)||(e=d,d=c,c=!1);null!=d&&(d=l(d,e));e=[];for(var f=[],g=0,h=r(a);g<h;g++){var k=a[g],p=d?d(k,g,a):k;c?(g&&f===p||e.push(k),f=p):d?b.contains(f,p)||(f.push(p),e.push(k)):b.contains(e,k)||e.push(k)}return e};b.union=function(){return b.uniq(t(arguments,!0,!0))};b.intersection=function(a){for(var c=[],d=arguments.length,e=0,
f=r(a);e<f;e++){var g=a[e];if(!b.contains(c,g)){for(var h=1;h<d&&b.contains(arguments[h],g);h++);h===d&&c.push(g)}}return c};b.difference=function(a){var c=t(arguments,!0,!0,1);return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){return b.unzip(arguments)};b.unzip=function(a){for(var c=a&&b.max(a,r).length||0,d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,e);return d};b.object=function(a,b){for(var c={},e=0,f=r(a);e<f;e++)b?c[a[e]]=b[e]:c[a[e][0]]=a[e][1];return c};b.findIndex=u(1);b.findLastIndex=
u(-1);b.sortedIndex=function(a,b,d,e){d=l(d,e,1);b=d(b);e=0;for(var c=r(a);e<c;){var g=Math.floor((e+c)/2);d(a[g])<b?e=g+1:c=g}return e};b.indexOf=K(1,b.findIndex,b.sortedIndex);b.lastIndexOf=K(-1,b.findLastIndex);b.range=function(a,b,d){null==b&&(b=a||0,a=0);d=d||1;b=Math.max(Math.ceil((b-a)/d),0);for(var c=Array(b),f=0;f<b;f++,a+=d)c[f]=a;return c};var Q=function(a,c,d,e,f){if(!(e instanceof c))return a.apply(d,f);c=P(a.prototype);a=a.apply(c,f);return b.isObject(a)?a:c};b.bind=function(a,c){if(E&&
a.bind===E)return E.apply(a,q.call(arguments,1));if(!b.isFunction(a))throw new TypeError("Bind must be called on a function");var d=q.call(arguments,2),e=function(){return Q(a,e,c,this,d.concat(q.call(arguments)))};return e};b.partial=function(a){var c=q.call(arguments,1),d=function(){for(var e=0,f=c.length,g=Array(f),h=0;h<f;h++)g[h]=c[h]===b?arguments[e++]:c[h];for(;e<arguments.length;)g.push(arguments[e++]);return Q(a,d,this,this,g)};return d};b.bindAll=function(a){var c,d=arguments.length;if(1>=
d)throw Error("bindAll must be passed function names");for(c=1;c<d;c++){var e=arguments[c];a[e]=b.bind(a[e],a)}return a};b.memoize=function(a,c){var d=function(e){var f=d.cache,g=""+(c?c.apply(this,arguments):e);b.has(f,g)||(f[g]=a.apply(this,arguments));return f[g]};d.cache={};return d};b.delay=function(a,b){var c=q.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};b.defer=b.partial(b.delay,b,1);b.throttle=function(a,c,d){var e,f,g,h=null,k=0;d||(d={});var p=function(){k=
!1===d.leading?0:b.now();h=null;g=a.apply(e,f);h||(e=f=null)};return function(){var m=b.now();k||!1!==d.leading||(k=m);var l=c-(m-k);e=this;f=arguments;0>=l||l>c?(h&&(clearTimeout(h),h=null),k=m,g=a.apply(e,f),h||(e=f=null)):h||!1===d.trailing||(h=setTimeout(p,l));return g}};b.debounce=function(a,c,d){var e,f,g,h,k,l=function(){var m=b.now()-h;m<c&&0<=m?e=setTimeout(l,c-m):(e=null,d||(k=a.apply(g,f),e||(g=f=null)))};return function(){g=this;f=arguments;h=b.now();var m=d&&!e;e||(e=setTimeout(l,c));
m&&(k=a.apply(g,f),g=f=null);return k}};b.wrap=function(a,c){return b.partial(c,a)};b.negate=function(a){return function(){return!a.apply(this,arguments)}};b.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,e=a[b].apply(this,arguments);c--;)e=a[c].call(this,e);return e}};b.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};b.before=function(a,b){var c;return function(){0<--a&&(c=b.apply(this,arguments));1>=a&&(b=null);return c}};b.once=b.partial(b.before,
2);var R=!{toString:null}.propertyIsEnumerable("toString"),M="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");b.keys=function(a){if(!b.isObject(a))return[];if(N)return N(a);var c=[],d;for(d in a)b.has(a,d)&&c.push(d);R&&L(a,c);return c};b.allKeys=function(a){if(!b.isObject(a))return[];var c=[],d;for(d in a)c.push(d);R&&L(a,c);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.mapObject=function(a,
c,d){c=l(c,d);d=b.keys(a);for(var e=d.length,f={},g,h=0;h<e;h++)g=d[h],f[g]=c(a[g],g,a);return f};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=x(b.allKeys);b.extendOwn=b.assign=x(b.keys);b.findKey=function(a,c,d){c=l(c,d);d=b.keys(a);for(var e,
f=0,g=d.length;f<g;f++)if(e=d[f],c(a[e],e,a))return e};b.pick=function(a,c,d){var e={},f=a;if(null==f)return e;if(b.isFunction(c)){var g=b.allKeys(f);var h=v(c,d)}else g=t(arguments,!1,!1,1),h=function(a,b,c){return b in c},f=Object(f);for(var k=0,l=g.length;k<l;k++){var m=g[k],n=f[m];h(n,m,f)&&(e[m]=n)}return e};b.omit=function(a,c,d){if(b.isFunction(c))c=b.negate(c);else{var e=b.map(t(arguments,!1,!1,1),String);c=function(a,c){return!b.contains(e,c)}}return b.pick(a,c,d)};b.defaults=x(b.allKeys,
!0);b.create=function(a,c){a=P(a);c&&b.extendOwn(a,c);return a};b.clone=function(a){return b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a};b.tap=function(a,b){b(a);return a};b.isMatch=function(a,c){var d=b.keys(c),e=d.length;if(null==a)return!e;a=Object(a);for(var f=0;f<e;f++){var g=d[f];if(c[g]!==a[g]||!(g in a))return!1}return!0};var H=function(a,c,d,e){if(a===c)return 0!==a||1/a===1/c;if(null==a||null==c)return a===c;a instanceof b&&(a=a._wrapped);c instanceof b&&(c=c._wrapped);var f=w.call(a);
if(f!==w.call(c))return!1;switch(f){case "[object RegExp]":case "[object String]":return""+a===""+c;case "[object Number]":return+a!==+a?+c!==+c:0===+a?1/+a===1/c:+a===+c;case "[object Date]":case "[object Boolean]":return+a===+c}f="[object Array]"===f;if(!f){if("object"!=typeof a||"object"!=typeof c)return!1;var g=a.constructor,h=c.constructor;if(g!==h&&!(b.isFunction(g)&&g instanceof g&&b.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in c)return!1}d=d||[];e=e||[];for(g=d.length;g--;)if(d[g]===
a)return e[g]===c;d.push(a);e.push(c);if(f){g=a.length;if(g!==c.length)return!1;for(;g--;)if(!H(a[g],c[g],d,e))return!1}else{f=b.keys(a);g=f.length;if(b.keys(c).length!==g)return!1;for(;g--;)if(h=f[g],!b.has(c,h)||!H(a[h],c[h],d,e))return!1}d.pop();e.pop();return!0};b.isEqual=function(a,b){return H(a,b)};b.isEmpty=function(a){return null==a?!0:n(a)&&(b.isArray(a)||b.isString(a)||b.isArguments(a))?0===a.length:0===b.keys(a).length};b.isElement=function(a){return!(!a||1!==a.nodeType)};b.isArray=B||
function(a){return"[object Array]"===w.call(a)};b.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};b.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){b["is"+a]=function(b){return w.call(b)==="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return b.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(a){return"function"==typeof a||!1});b.isFinite=function(a){return isFinite(a)&&
!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!==+a};b.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===w.call(a)};b.isNull=function(a){return null===a};b.isUndefined=function(a){return void 0===a};b.has=function(a,b){return null!=a&&U.call(a,b)};b.noConflict=function(){D._=S;return this};b.identity=function(a){return a};b.constant=function(a){return function(){return a}};b.noop=function(){};b.property=y;b.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};
b.matcher=b.matches=function(a){a=b.extendOwn({},a);return function(c){return b.isMatch(c,a)}};b.times=function(a,b,d){var c=Array(Math.max(0,a));b=v(b,d,1);for(d=0;d<a;d++)c[d]=b(d);return c};b.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};b.now=Date.now||function(){return(new Date).getTime()};B={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"};x=b.invert(B);y=function(a){var c=function(b){return a[b]},d="(?:"+
b.keys(a).join("|")+")",e=RegExp(d),f=RegExp(d,"g");return function(a){a=null==a?"":""+a;return e.test(a)?a.replace(f,c):a}};b.escape=y(B);b.unescape=y(x);b.result=function(a,c,d){c=null==a?void 0:a[c];void 0===c&&(c=d);return b.isFunction(c)?c.call(a):c};var W=0;b.uniqueId=function(a){var b=++W+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},
Y=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(a){return"\\"+X[a]};b.template=function(a,c,d){!c&&d&&(c=d);c=b.defaults({},c,b.templateSettings);d=RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g");var e=0,f="__p+\x3d'";a.replace(d,function(b,c,d,g,l){f+=a.slice(e,l).replace(Y,Z);e=l+b.length;c?f+="'+\n((__t\x3d("+c+"))\x3d\x3dnull?'':_.escape(__t))+\n'":d?f+="'+\n((__t\x3d("+d+"))\x3d\x3dnull?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+\x3d'");return b});f+="';\n";
c.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p\x3d'',__j\x3dArray.prototype.join,print\x3dfunction(){__p+\x3d__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(h){throw h.source=f,h;}d=function(a){return g.call(this,a,b)};d.source="function("+(c.variable||"obj")+"){\n"+f+"}";return d};b.chain=function(a){a=b(a);a._chain=!0;return a};var J=function(a,c){return a._chain?b(c).chain():c};b.mixin=function(a){b.each(b.functions(a),function(c){var d=
b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];T.apply(a,arguments);return J(this,d.apply(b,a))}})};b.mixin(b);b.each("pop push reverse shift sort splice unshift".split(" "),function(a){var c=A[a];b.prototype[a]=function(){var b=this._wrapped;c.apply(b,arguments);"shift"!==a&&"splice"!==a||0!==b.length||delete b[0];return J(this,b)}});b.each(["concat","join","slice"],function(a){var c=A[a];b.prototype[a]=function(){return J(this,c.apply(this._wrapped,arguments))}});b.prototype.value=function(){return this._wrapped};
b.prototype.valueOf=b.prototype.toJSON=b.prototype.value;b.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:lib-underscore', location = '/lib/underscore/underscore-1.8.3.js' */
define("lib/underscore-1.8.3",["atlassian/libs/underscore-1.8.3"],function(e){"use strict";return e});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-project-selector', location = '/widget/project-selector/project-selector.js' */
define("widget/project-selector",["underscore","aui","marionette"],function(t,e,i){"use strict";var n=function(t){var e=t.id;return{text:t.projectName,id:e}},s={endpoint:null,permission:null,placeholder:null,toSelect2Result:n,onSelect:function(){},defaultSelection:null,debouncePeriod:250,pageSize:25},o=function(t,e){var i=this,n=e*this.options.pageSize<t.size;return{results:t.searchResults.map(function(t){var e=t.searchEntity;return i.options.toSelect2Result(e)}),more:n}},a=function(t,e){return{searchTerm:t,permission:this.options.permission,"start-index":this.options.pageSize*(e-1),"max-result":this.options.pageSize}};return i.ItemView.extend({template:!1,initialize:function(t){this.options=e.$.extend(!0,Object.create(s),t)},onRender:function(){this.initSelect2(),this.setInitialData(),this.attachListeners()},initSelect2:function(){this.$el.auiSelect2({placeholder:this.options.placeholder,data:this.options.defaultSelection,ajax:{url:this.options.endpoint,dataType:"json",quietMillis:this.options.debouncePeriod,data:t.bind(a,this),results:t.bind(o,this)}})},setInitialData:function(){var t=this.options.defaultSelection;t.id&&t.text&&this.$el.auiSelect2("data",t)},attachListeners:function(){this.$el.on("change",this.options.onSelect)}},{create:function(t){return new this(t).render()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-async-link', location = '/widget/async-link/async-link.js' */
define("widget/async-link",["underscore","backbone","util/ajax"],function(t,e,n){"use strict";return e.View.extend({defaults:{el:null,url:null,type:"POST",confirmationMessage:"",returnUrl:""},events:{click:"onClick"},initialize:function(e){this.settings=t.defaults(e||{},this.defaults)},onClick:function(t){var e=this;t.preventDefault(),this.settings.confirmationMessage&&!confirm(this.settings.confirmationMessage)||n({url:this.settings.url,type:this.settings.type}).then(function(){e.settings.returnUrl&&(window.location.href=e.settings.returnUrl)})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-request', location = '/util/request/request.js' */
function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}var _extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r};define("util/request",["util/errors"],function(r){"use strict";var e=require("jquery"),n=require("ajs"),t=require("backbone"),a=n.contextPath(),o={redirectIfUnauthorised:!0},u=function(r,e,t){r.location.href=n.format.apply(n,_toConsumableArray([a+e].concat(t)))},i=function(e,n,t){if(n.redirectIfUnauthorised)switch(t.status){case 401:u(e,"/userlogin!doDefault.action");break;default:r(t)}else r(t)};return function(r,n){return{ajax:function(){return e.ajax.apply(e,arguments).fail(i.bind(null,r,_extends({},o,n)))},sync:function(e,a){for(var u=arguments.length,c=Array(u>2?u-2:0),f=2;f<u;f++)c[f-2]=arguments[f];return t.sync.apply(a,[e,a].concat(c)).fail(i.bind(null,r,_extends({},o,n)))}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-analytics-base', location = '/util/analytics-base/analytics-base.js' */
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}define("util/analytics-base",[],function(){"use strict";function t(t,i,r){if(null==t)throw new Error("Event bus should be specified");this.prefix=i,this.eventBus=t,this.options=r,this.localEventBus=e.extend({},n.Events);var s=e.isFunction(this.register)?this.register():this.register;e.keys(s).forEach(function(t){this.registerListener.apply(this,[t].concat(_toConsumableArray(s[t])))},this)}var e=require("underscore"),n=require("backbone"),i=require("ajs"),r=function(t,n,r){return function(){var s=t?[t,n].join("."):n,o=e.isFunction(r)?r.apply(void 0,arguments):{};i.trigger("analyticsEvent",{name:s,data:o})}};return t.extend=n.View.extend,t.create=function(t,e,n){return new this(t,e,n)},t.prototype={register:{},registerListener:function(t,e,n){this.localEventBus.listenTo.bind(this.localEventBus,this.eventBus)(t,r.bind(null,this.prefix)(e,n))},stopListening:function(){this.localEventBus.stopListening()}},t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
'use strict';(function(k){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(l,n){k.call({_:l,Backbone:n});l=n.PageableCollection.noConflict();l.VERSION="2.0.2";return l}})})(function(){(function(k){var l=this.Backbone,n=l.PageableCollection,F=k(this._,l);l.PageableCollection.noConflict=function(){l.PageableCollection=n;return F}}).call(this,function(k,l){function n(a,b){if(!k.isNumber(a)||k.isNaN(a)||!k.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");
return a}function F(a){for(var b,e,c={},d=decodeURIComponent,f=a.split("\x26"),g=0,h=f.length;g<h;g++)b=f[g].split("\x3d"),a=b[0],b=b[1]||!0,a=d(a),b=d(b),e=c[a],A(e)?e.push(b):c[a]=e?[e,b]:b;return c}function G(a,b,e){if((a=a._events[b])&&a.length){var c=a[a.length-1],d=c.callback;c.callback=function(){try{d.apply(this,arguments),e()}catch(f){throw f;}finally{c.callback=d}}}else e()}var p=k.extend,r=k.omit,v=k.clone,q=k.each,K=k.pick,L=k.contains,H=k.isEmpty,I=k.pairs,R=k.invert,A=k.isArray,B=k.isFunction,
M=k.isObject,y=k.keys,z=k.isUndefined,C=Math.ceil,N=Math.floor,J=Math.max,D=l.Collection.prototype,O=/[\s'"]/g,S=/[<>\s'"]/g,Q=l.PageableCollection=l.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){D.constructor.apply(this,
arguments);b=b||{};var e=this.mode=b.mode||this.mode||x.mode,c=p({},x.queryParams,this.queryParams,b.queryParams||{});c.directions=p({},x.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=p({},x.state,this.state,b.state||{});c.currentPage=null==c.currentPage?c.firstPage:c.currentPage;A(a)||(a=a?[a]:[]);a=a.slice();"server"==e||null!=c.totalRecords||H(a)||(c.totalRecords=a.length);this.switchMode(e,p({fetch:!1,resetState:!1,models:a},b));var d=b.comparator;
c.sortKey&&!d&&this.setSorting(c.sortKey,c.order,b);"server"!=e&&(e=this.fullCollection,d&&b.full&&(this.comparator=null,e.comparator=d),b.full&&e.sort(),a&&!H(a)&&(this.reset(a,p({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models))));this._initState=v(this.state)},_makeFullCollection:function(a,b){var e=["url","model","sync","comparator"],c=this.constructor.prototype,d,f={};var g=0;for(d=e.length;g<d;g++){var h=e[g];z(c[h])||(f[h]=c[h])}a=new (l.Collection.extend(f))(a,
b);g=0;for(d=e.length;g<d;g++)h=e[g],this[h]!==c[h]&&(a[h]=this[h]);return a},_makeCollectionEventHandler:function(a,b){return function(e,c,d,f){var g=a._handlers;q(y(g),function(d){var c=g[d];a.off(d,c);b.off(d,c)});var h=v(a.state),t=h.firstPage,k=h.pageSize,m=(0===t?h.currentPage:h.currentPage-1)*k,l=m+k;if("add"==e){var n;f=f||{};if(d==b){var u=b.indexOf(c);if(u>=m&&u<l){var r=a;var w=n=u-m}}else w=a.indexOf(c),u=m+w,r=b,n=z(f.at)?u:f.at+m;f.onRemove||(++h.totalRecords,delete f.onRemove);a.state=
a._checkState(h);if(r){r.add(c,p({},f||{},{at:n}));var P=w>=k?c:!z(f.at)&&n<l&&a.length>k?a.at(k):null;P&&G(d,e,function(){a.remove(P,{onAdd:!0})})}}if("remove"==e)if(f.onAdd)delete f.onAdd;else{--h.totalRecords?(w=h.totalPages=C(h.totalRecords/k),h.lastPage=0===t?w-1:w||t,h.currentPage>w&&(h.currentPage=h.lastPage)):(h.totalRecords=null,h.totalPages=null);a.state=a._checkState(h);var E;t=f.index;d==a?((E=b.at(l))?G(a,e,function(){a.push(E,{onRemove:!0})}):!a.length&&h.totalRecords&&a.reset(b.models.slice(m-
k,l-k),p({},f,{parse:!1})),b.remove(c)):t>=m&&t<l&&((E=b.at(l-1))&&G(a,e,function(){a.push(E,{onRemove:!0})}),a.remove(c),!a.length&&h.totalRecords&&a.reset(b.models.slice(m-k,l-k),p({},f,{parse:!1})))}"reset"==e&&(f=d,d=c,d==a&&null==f.from&&null==f.to?(h=b.models.slice(0,m),k=b.models.slice(m+a.models.length),b.reset(h.concat(a.models).concat(k),f)):d==b&&((h.totalRecords=b.models.length)||(h.totalRecords=null,h.totalPages=null),"client"==a.mode&&(h.lastPage=h.currentPage=h.firstPage),a.state=a._checkState(h),
a.reset(b.models.slice(m,l),p({},f,{parse:!1}))));"sort"==e&&(f=d,c===b&&a.reset(b.models.slice(m,l),p({},f,{parse:!1})));q(y(g),function(d){var c=g[d];q([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,e=this.links,c=a.totalRecords,d=a.pageSize,f=a.currentPage,g=a.firstPage;if(null!=c&&null!=d&&null!=f&&null!=g&&("infinite"==b?e:1)){c=n(c,"totalRecords");d=n(d,"pageSize");f=n(f,"currentPage");g=n(g,"firstPage");if(1>d)throw new RangeError("`pageSize` must be \x3e\x3d 1");
c=a.totalPages=C(c/d);if(0>g||1<g)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===g?J(0,c-1):c||g;if("infinite"==b){if(!e[f+""])throw new RangeError("No link found for page "+f);}else if(f<g||0<c&&(g?f>c:f>=c))throw new RangeError("`currentPage` must be firstPage \x3c\x3d currentPage "+(g?"\x3e":"\x3e\x3d")+" totalPages if "+g+"-based. Got "+f+".");}return a},setPageSize:function(a,b){a=n(a,"pageSize");b=b||{first:!1};var e=this.state,c=C(e.totalRecords/a),d=c?J(e.firstPage,N(c*
e.currentPage/e.totalPages)):e.firstPage;e=this.state=this._checkState(p({},e,{pageSize:a,currentPage:b.first?e.firstPage:d,totalPages:c}));return this.getPage(e.currentPage,r(b,["first"]))},switchMode:function(a,b){if(!L(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');b=b||{fetch:!0,resetState:!0};var e=this.state=b.resetState?v(this._initState):this._checkState(p({},this.state));this.mode=a;var c=this,d=this.fullCollection,f=this._handlers=
this._handlers||{},g;if("server"==a||d)"server"==a&&d&&(q(y(f),function(a){g=f[a];c.off(a,g);d.off(a,g)}),delete this._handlers,this._fullComparator=d.comparator,delete this.fullCollection);else{d=this._makeFullCollection(b.models||[],b);d.pageableCollection=this;this.fullCollection=d;var h=this._makeCollectionEventHandler(this,d);q(["add","remove","reset","sort"],function(a){f[a]=g=k.bind(h,{},a);c.on(a,g);d.on(a,g)});d.comparator=this._fullComparator}if("infinite"==a){a=this.links={};var t=e.firstPage,
l=C(e.totalRecords/e.pageSize);t=0===t?J(0,l-1):l||t;for(e=e.firstPage;e<=t;e++)a[e]=this.url}else this.links&&delete this.links;return b.fetch?this.fetch(r(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",
a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var e=this.mode,c=this.fullCollection;b=b||{fetch:!1};var d=this.state,f=d.firstPage,g=d.currentPage,h=d.lastPage,k=d.pageSize;switch(a){case "first":a=f;break;case "prev":a=g-1;break;case "next":a=g+1;break;case "last":a=h;break;default:a=n(a,"index")}this.state=this._checkState(p({},d,{currentPage:a}));b.from=g;b.to=a;d=(0===f?a:a-1)*k;c=c&&c.length?c.models.slice(d,
d+k):[];if(("client"==e||"infinite"==e&&!H(c))&&!b.fetch)return this.reset(c,r(b,"fetch")),this;"infinite"==e&&(b.url=this.links[a]);return this.fetch(r(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be \x3e 0`");a=n(a);a=N(a/this.state.pageSize);0!==this.state.firstPage&&a++;a>this.state.lastPage&&(a=this.state.lastPage);return this.getPage(a,b)},sync:function(a,b,e){var c=this;if("infinite"==c.mode){var d=e.success,f=c.state.currentPage;e.success=function(a,
b,k){var g=c.links,h=c.parseLinks(a,p({xhr:k},e));h.first&&(g[c.state.firstPage]=h.first);h.prev&&(g[f-1]=h.prev);h.next&&(g[f+1]=h.next);d&&d(a,b,k)}}return(D.sync||l.sync).call(c,a,b,e)},parseLinks:function(a,b){var e={};if(a=b.xhr.getResponseHeader("Link")){var c=["first","prev","next"];q(a.split(","),function(a){a=a.split(";");var b=a[0].replace(S,"");a=a.slice(1);q(a,function(a){var d=a.split("\x3d");a=d[0].replace(O,"");d=d[1].replace(O,"");"rel"==a&&L(c,d)&&(e[d]=b)})})}return e},parse:function(a,
b){var e=this.parseState(a,v(this.queryParams),v(this.state),b);e&&(this.state=this._checkState(p({},this.state,e)));return this.parseRecords(a,b)},parseState:function(a,b,e,c){if(a&&2===a.length&&M(a[0])&&A(a[1])){var d=v(e),f=a[0];q(I(r(b,"directions")),function(a){var b=a[0];a=a[1];var c=f[a];z(c)||k.isNull(c)||(d[b]=f[a])});f.order&&(d.order=1*R(b.directions)[f.order]);return d}},parseRecords:function(a,b){return a&&2===a.length&&M(a[0])&&A(a[1])?a[1]:a},fetch:function(a){a=a||{};var b=this._checkState(this.state),
e=this.mode;"infinite"!=e||a.url||(a.url=this.links[b.currentPage]);var c=a.data||{},d=a.url||this.url||"";B(d)&&(d=d.call(this));var f=d.indexOf("?");-1!=f&&(p(c,F(d.slice(f+1))),d=d.slice(0,f));a.url=d;a.data=c;var g="client"==this.mode?K(this.queryParams,"sortKey","order"):r(K(this.queryParams,y(x.queryParams)),"directions"),h=I(g);d=v(this);for(f=0;f<h.length;f++){var k=h[f];var l=k[0];var m=k[1];m=B(m)?m.call(d):m;null!=b[l]&&null!=m&&(c[m]=b[l])}b.sortKey&&b.order?(f=B(g.order)?g.order.call(d):
g.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[g.order];b=I(r(this.queryParams,y(x.queryParams)));for(f=0;f<b.length;f++)k=b[f],m=k[1],m=B(m)?m.call(d):m,null!=m&&(c[k[0]]=m);if("server"!=e){var n=this,q=this.fullCollection,u=a.success;a.success=function(b,d,c){c=c||{};z(a.silent)?delete c.silent:c.silent=a.silent;var f=b.models;"client"==e?q.reset(f,c):(q.add(f,p({at:q.length},p(c,{parse:!1}))),n.trigger("reset",n,c));u&&u(b,d,c)};return D.fetch.call(this,p({},a,{silent:!0}))}return D.fetch.call(this,
a)},_makeComparator:function(a,b,e){var c=this.state;a=a||c.sortKey;b=b||c.order;if(a&&b)return e||(e=function(a,b){return a.get(b)}),function(c,f){c=e(c,a);f=e(f,a);if(1===b){var d=c;c=f;f=d}return c===f?0:c<f?-1:1}},setSorting:function(a,b,e){var c=this.state;c.sortKey=a;c.order=b=b||c.order;c=this.fullCollection;var d=!1,f=!1;a||(d=f=!0);var g=this.mode;e=p({side:"client"==g?g:"server",full:!0},e);a=this._makeComparator(a,b,e.sortValue);b=e.full;e=e.side;"client"==e?b?(c&&(c.comparator=a),d=!0):
(this.comparator=a,f=!0):"server"!=e||b||(this.comparator=a);d&&(this.comparator=null);f&&c&&(c.comparator=null);return this}}),x=Q.prototype;return Q})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-navigation-infinite-view.js' */
define("widget/permissions/views/permissions-navigation-infinite-view",["underscore","marionette","widget/permissions/permissions-templates"],function(i,e,t){"use strict";return e.ItemView.extend({template:t.infiniteNavigation,ui:{loadMore:".permissions-navigation__load-more",spinner:".permissions-navigation__spinner"},events:{"click @ui.loadMore":"loadMoreClickHandler"},collectionEvents:{"add remove reset":"onCollectionChange"},onCollectionChange:function(){this.toggleNavigation(),this.collection.isEmpty()&&this.hasMorePages()&&this.loadFirstPage()},loadMoreClickHandler:function(i){i.preventDefault(),this.loadNextPage()},hasMorePages:function(){var i=this.collection.state;return null!==i.lastPage&&i.lastPage!==i.currentPage},loadFirstPage:function(){this.toggleLoading(!0),this.collection.getFirstPage({remove:!1,merge:!1,add:!0}).always(this.toggleNavigation.bind(this))},loadNextPage:function(){this.hasMorePages()&&(this.toggleLoading(!0),this.collection.getNextPage({remove:!1,merge:!1,add:!0}).always(this.toggleNavigation.bind(this)))},toggleNavigation:function(){this.$el.toggle(this.hasMorePages()),this.toggleLoading(!1)},toggleLoading:function(i){this.ui.loadMore.prop("disabled",i),i?this.ui.spinner.spin():this.ui.spinner.spinStop()},serializeData:function(){return{colspan:this.options.columns.length+2}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-row-view.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var i=0,s=Array(e.length);i<e.length;i++)s[i]=e[i];return s}return Array.from(e)}define("widget/permissions/views/permissions-row-view",["underscore","jquery","ajs","marionette","util/errors","widget/permissions/permissions-templates","widget/permissions/permissions-error","widget/permissions/views/cell/permissions-cell-empty-view","widget/permissions/views/cell/permissions-cell-yes-no-view"],function(e,i,s,n,r,t,o,m,l){"use strict";return n.ItemView.extend({tagName:"tr",className:"permissions-row",template:t.entry,ui:{permissionCell:".permissions-row__cell--permission",remove:".permissions-list__remove-entry",removeSpinner:".permissions-list__remove-spinner"},events:{mouseover:"mouseoverHandler",mouseleave:"mouseleaveHandler","click @ui.remove":"removeClickHandler"},initialize:function(){var i=this;this.childParentDependencies={},this.options.columns.map(function(e){return e.permission}).forEach(function(e){i.childParentDependencies[e]=[]}),e.keys(this.options.dependencies).forEach(function(e){return i.options.dependencies[e].forEach(function(s){return i.childParentDependencies[s].push(e)})})},onRender:function(){this.initPermissionCells()},mouseoverHandler:function(){this.canRemoveEntity()&&this.ui.remove.show()},mouseleaveHandler:function(){this.canRemoveEntity()&&this.ui.remove.hide()},removeClickHandler:function(e){e.preventDefault(),this.removeEntry()},initPermissionCells:function(){this.cellViews=[];var e=this.ui.permissionCell;this.options.columns.forEach(function(i,s){if(this.options.columnPredicate(this.model.getEntryName(),i)){var n=l.create(e.eq(s),this.prepareYesNoPermission(i));this.cellViews.push(n),this.listenTo(n,"permissions:add",this.addPermissions),this.listenTo(n,"permissions:remove",this.removePermissions)}else this.cellViews.push(m.create(e.eq(s)))},this)},prepareYesNoPermission:function(e){var s=i.extend(!0,{},e),n=this.model;n.hasPermission(e.permission)&&(s.isChecked=!0);var r=n.getControlledPermissions().indexOf(e.permission)!==-1,t=this.isPermissionDependent(e.permission);return(!r||s.isChecked&&t)&&(s.isDisabled=!0),s},isPermissionDependent:function(e){var i=this;return this.childParentDependencies[e].some(function(e){return i.model.hasPermission(e)})},addPermissions:function(i,s){for(var n=this,t=this.model.getPermissions(),o=e.chain(s).filter(function(e){return t.indexOf(e)===-1}).uniq().value(),m=[].concat(_toConsumableArray(o));m.length;){var c=m.pop(),a=this.options.dependencies[c];a&&(m.push.apply(m,_toConsumableArray(a)),o.push.apply(o,_toConsumableArray(a)))}o.length?this.model.save(e.uniq(o)).done(this.triggerEntryModified.bind(this)).done(function(){return i.triggerMethod("permissions:add:success")}).done(function(){var i=e.chain(n.model.getPermissions()).filter(function(e){return n.isPermissionDependent(e)}).value();n.cellViews.filter(function(e){return e instanceof l}).filter(function(e){return i.indexOf(e.options.permission)!==-1}).forEach(function(e){return e.checkAndDisableCheckbox()})}).fail(r).fail(function(){return i.triggerMethod("permissions:add:error")}):i.triggerMethod("permissions:add:success")},removePermissions:function(i,s){var n=this,t=this.model.getPermissions(),o=s.filter(function(e){return t.indexOf(e)!==-1});o.length?this.model.destroyPermissions(o).done(this.triggerEntryModified.bind(this)).done(function(){var i=e.chain(n.model.getPermissions()).filter(function(e){return!n.isPermissionDependent(e)}).value();n.cellViews.filter(function(e){return e instanceof l}).filter(function(e){return i.indexOf(e.options.permission)!==-1}).forEach(function(e){return e.enableCheckbox()})}).done(function(){return i.triggerMethod("permissions:remove:success")}).fail(r).fail(function(){return i.triggerMethod("permissions:remove:error")}):i.triggerMethod("permissions:remove:success")},removeEntry:function(){if(!this.canRemoveEntity())throw new o("Deleting entries is not allowed.");var e=this.ui.removeSpinner,i=this.options.eventBus,n=s.escapeHtml(this.model.getEntryDisplayName());e.spin(),this.model.destroy({wait:!0}).fail(function(){e.spinStop()}).done(function(){i.trigger("PERMISSION_ANALYTICS:ENTRY_REMOVED"),i.trigger("notification:success",s.format("\u003cstrong\u003e{0}\u003c/strong\u003e has been removed.",n))})},triggerEntryModified:function(){this.options.eventBus.trigger("PERMISSION_ANALYTICS:ENTRY_MODIFIED")},serializeData:function(){return{displayName:this.model.getEntryDisplayName(),columns:this.options.columns,canRemove:this.canRemoveEntity()}},canRemoveEntity:function(){var e=this;return this.options.canRemove&&this.model.getPermissions().every(function(i){return e.model.getControlledPermissions().indexOf(i)!==-1})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-filter-view.js' */
define("widget/permissions/views/permissions-filter-view",["underscore","marionette","widget/permissions/permissions-templates"],function(i,e,t){"use strict";return e.ItemView.extend({template:t.filter,ui:{filter:".permissions-filter__query",icon:".permissions-filter__icon"},events:{submit:"submitHandler",input:"inputHandler","click @ui.icon":"iconClickHandler"},initialize:function(){this.requestDebounce=i.debounce(this.request.bind(this),300)},submitHandler:function(i){i.preventDefault(),this.filter(!0)},iconClickHandler:function(){this.filter(!0)},inputHandler:function(){this.filter()},filter:function(i){i?this.request():this.requestDebounce()},request:function(){this.model.set("filter",this.ui.filter.val().trim()).trigger("set")},serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/models/permissions-model.js' */
function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}define("widget/permissions/models/permissions-model",["underscore","backbone","util/request"],function(t,i,n){"use strict";var s=n(window,{redirectIfUnauthorised:!1});return i.Model.extend({sync:s.sync,idAttribute:"name",defaults:{permissions:[]},initialize:function(){this.url=this.urlRoot+"/"+encodeURIComponent(this.id)},save:function(t){return t||(t=this.getPermissions()),i.Model.prototype.save.call(this,null,{data:JSON.stringify(t),contentType:"application/json",context:this}).done(function(){this.addPermissions(t)})},destroy:function(n){return i.Model.prototype.destroy.call(this,t.extend({},n,{data:JSON.stringify(this.controls),contentType:"application/json"}))},destroyPermissions:function(t){return this.sync("delete",this,{data:JSON.stringify(t),contentType:"application/json",context:this}).done(function(i){this.removePermissions(t),this.trigger("sync",this,i)}).fail(function(t){this.trigger("error",this,t)})},getEntryName:function(){return this.get("name")},getEntryDisplayName:function(){return this.get("displayName")},getPermissions:function(){return this.get("permissions").slice()},setPermissions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.set("permissions",[].concat(_toConsumableArray(t)))},hasPermission:function(t){return this.getPermissions().indexOf(t)!==-1},modifyPermissions:function(i){var n=i.call(this,this.getPermissions()),s=this.getPermissions(),e=t.intersection(n,s);(s.length===n.length&&e.length===n.length)==!1&&this.set("permissions",n)},addPermissions:function(t){this.modifyPermissions(function(i){return t.forEach(function(t){i.indexOf(t)===-1&&i.push(t)}),i})},removePermissions:function(t){this.modifyPermissions(function(i){return t.forEach(function(t){var n=i.indexOf(t);n!==-1&&i.splice(n,1)}),i})},getControlledPermissions:function(){return this.controls}},{create:function(t,i,n){return new this.prototype.constructor({permissions:i,name:t,displayName:n||t})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/collections/permissions-any-of-collection.js' */
define("widget/permissions/collections/permissions-any-of-collection",["underscore","backbone"],function(e,t){"use strict";return t.Collection.extend({toggleByText:function(e,t){this.toggle(this.getByText(e),t)},toggleByPermission:function(e,t){this.toggle(this.getByPermission(e),t)},toggle:function(e,t){e.set({isChecked:t})},getByText:function(e){return this.findWhere({text:e})},getByPermission:function(e){return this.filter(function(t){return t.get("permissions").indexOf(e)!==-1})[0]},getSelected:function(){return this.where({isChecked:!0})},getSelectedPermissions:function(){return e.unique(e.flatten(this.getSelected().map(function(e){return e.get("permissions")})))},clearSelection:function(){this.forEach(function(e){return e.set({isChecked:!1})})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-notifications.js' */
define("widget/permissions/permissions-notification",["aui/flag"],function(s){"use strict";function t(s){this.eventBus=s,this.attachListeners()}return t.prototype={attachListeners:function(){this.eventBus.on("notification:error",this.showError).on("notification:success",this.showSuccess)},showError:function(t){s({type:"error",close:"manual",body:t})},showSuccess:function(t){s({type:"success",close:"auto",body:t})}},t});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/abstract/permissions-abstract-cell-view.js' */
define("widget/permissions/views/abstract/permissions-abstract-cell-view",["jquery","underscore","marionette"],function(e,s,r){"use strict";var n=["permissions:add","permissions:remove"],i=["permissions:add:success","permissions:remove:success"],o=["permissions:add:error","permissions:remove:error"];return r.ItemView.extend({template:null,initialize:function(){var e=this;n.forEach(function(s){return e.on(s,e.onPermissionsChange)}),i.forEach(function(s){return e.on(s,e.onPermissionsChangeSuccess)}),o.forEach(function(s){return e.on(s,e.onPermissionsChangeError)})},onPermissionsChange:e.noop,onPermissionsChangeSuccess:e.noop,onPermissionsChangeError:e.noop,triggerAdd:function(e){this.triggerMethod("permissions:add",this,e)},triggerRemove:function(e){this.triggerMethod("permissions:remove",this,e)}},{create:function(e,r){return new this(s.extend({},r,{el:e})).render()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-header-view.js' */
define("widget/permissions/views/permissions-header-view",["underscore","marionette","widget/permissions/permissions-templates"],function(e,i,t){"use strict";return i.ItemView.extend({tagName:"tr",template:t.header,serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/preset/permissions-preset-any-of-view.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}define("widget/permissions/views/preset/permissions-preset-any-of-view",["underscore","jquery","marionette","widget/permissions/permissions-templates","widget/permissions/collections/permissions-any-of-collection"],function(e,n,t,i,o){"use strict";return t.ItemView.extend({template:i.anyOfPreset,events:{"aui-dropdown2-show":"onDropdownShow"},ui:{checkbox:".permissions-add__preset-checkbox--any-of"},initialize:function(){this.collection=new o(this.options.items)},onDropdownShow:function(e){n(e.target).off("change.permission-preset").on("change.permission-preset",".permissions-add__preset-checkbox--any-of",this.onCheckboxChange.bind(this))},onCheckboxChange:function(e){var n=this,t=e.target.checked;this.collection.toggleByText(e.target.value,t),t?this.getDependentPermissions().forEach(function(e){return n.checkAndDisableCheckbox(e)}):this.getIndependentPermissions().forEach(function(e){return n.enableCheckbox(e)})},getSelectedPermissionNames:function(){return this.collection.getSelectedPermissions()},getDependentPermissionNames:function(){var n=this,t=function e(t){var i=n.options.dependencies[t]||[],o=[].concat(_toConsumableArray(i));return i.forEach(function(n){return o.push.apply(o,_toConsumableArray(e(n)))}),o};return e.chain(this.getSelectedPermissionNames()).map(t).flatten().uniq().value()},getDependentPermissions:function(){var n=this;return e.chain(this.getDependentPermissionNames()).map(function(e){return n.collection.getByPermission(e)}).value()},getIndependentPermissions:function(){var e=this.getDependentPermissionNames();return this.collection.filter(function(n){return n.get("permissions").every(function(n){return!(e.indexOf(n)!==-1)})})},clearSelection:function(){this.collection.clearSelection(),this.ui.checkbox.prop("checked",!1),this.ui.checkbox.prop("disabled",!1)},checkAndDisableCheckbox:function(e){this.collection.toggleByText(e.get("text"),!0),this.findCheckbox(e).prop("checked",!0).prop("disabled",!0)},enableCheckbox:function(e){this.findCheckbox(e).prop("disabled",!1)},findCheckbox:function(e){return this.ui.checkbox.filter('[value="'+e.get("text")+'"]')},serializeData:function(){return e.extend({},this.options,{id:e.uniqueId("permissions-preset-unique-id-")})}},{create:function(n,t,i){return new this(e.extend({},t,i,{el:n})).render()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-analytics.js' */
define("widget/permissions/permissions-analytics",["util/analytics-base"],function(t){"use strict";return t.extend({eventName:"bamboo.permissions.changed",getAnalyticsData:function(t){return{changeType:t,entryType:this.options.entryType,entityType:this.options.entityType}},register:function(){var t=this;return{"PERMISSION_ANALYTICS:ENTRY_ADDED":[this.eventName,function(){return t.getAnalyticsData("ENTRY_ADDED")}],"PERMISSION_ANALYTICS:ENTRY_REMOVED":[this.eventName,function(){return t.getAnalyticsData("ENTRY_REMOVED")}],"PERMISSION_ANALYTICS:ENTRY_MODIFIED":[this.eventName,function(){return t.getAnalyticsData("ENTRY_MODIFIED")}]}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-list-view.js' */
define("widget/permissions/views/permissions-list-view",["underscore","marionette","widget/permissions/views/permissions-row-view","widget/permissions/views/permissions-empty-view"],function(e,i,n,s){"use strict";return i.CollectionView.extend({childView:n,emptyView:s,childViewOptions:function(){return e.pick(this.options,["eventBus","columns","columnPredicate","canRemove","dependencies"])},emptyViewOptions:function(){return{collection:this.collection,notFoundText:this.options.notFoundText,colspan:this.options.columns.length+2}},collectionEvents:{request:"onRequest","sync error destroy":"onComplete"},onRequest:function(){this.toggleSyncingClass(!0)},onComplete:function(){this.toggleSyncingClass(!1)},toggleSyncingClass:function(e){this.$el.toggleClass("permissions-list--syncing",e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/cell/permissions-cell-empty-view.js' */
define("widget/permissions/views/cell/permissions-cell-empty-view",["widget/permissions/permissions-templates","widget/permissions/views/abstract/permissions-abstract-cell-view"],function(e,s){"use strict";return s.extend({template:e.emptyCell})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-title-view.js' */
define("widget/permissions/views/permissions-title-view",["underscore","marionette","widget/permissions/permissions-templates"],function(e,i,t){"use strict";return i.ItemView.extend({template:t.title,serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions.js' */
define("widget/permissions",["underscore","ajs","backbone","widget/permissions/permissions-props","widget/permissions/permissions-notification","widget/permissions/permissions-error","widget/permissions/collections/permissions-collection","widget/permissions/models/permissions-model","widget/permissions/views/permissions-layout-view","widget/permissions/views/permissions-add-view","widget/permissions/views/permissions-title-view","widget/permissions/views/permissions-filter-view","widget/permissions/views/permissions-header-view","widget/permissions/views/permissions-list-view","widget/permissions/views/permissions-navigation-infinite-view","widget/permissions/permissions-analytics"],function(e,i,n,t,s,o,r,a,c,d,l,m,p,u,f,w){"use strict";var v=["container","endpoint","controls","columns","presets","searchEndpoint","dependencies","columnPredicate","searchPlaceholder","formatEntity","formatSearchResult","pageSize","navigationType","entryColumnLabel","filterPlaceholder","title","notFoundText","canAdd","canRemove","analytics"],y=function(e,n){n.forEach(function(n){if(void 0===e[n])throw new o(i.format('option "{0}" is required',n))})},g=function(e,n){n.forEach(function(n){if(0===e[n].length)throw new o(i.format('option "{0}" cannot be empty',n))})},h=function(e){var i=["controls","container","columns","searchEndpoint"],n=["columns"];e.canAdd&&(i.push("presets"),n.push("presets")),y(e,i),g(e,n),e.columns.forEach(function(e){y(e,["label","permission"])}),e.presets&&e.presets.forEach(function(e){y(e,["label","items"]),g(e,["items"]),e.items.forEach(function(e){y(e,["text","permissions"])})}),e.analytics&&y(e.analytics,["entityType","entryType"])},E=function(i){e.defaults(i,{dependencies:{},formatSearchResult:function(e){return e.name},formatEntity:function(e){return e.name},columnPredicate:function(){return!0},navigationType:t.NAVIGATION_TYPES.infinite,searchPlaceholder:"Pick one or more items",entryColumnLabel:"Name",filterPlaceholder:"Search by name",notFoundText:"No results found",canAdd:!0,canRemove:!0,analytics:null})};return function(i){h(i),E(i);var o=new n.Model({filter:""}),y=e.pick(i,v),g=void 0;switch(y.navigationType){case t.NAVIGATION_TYPES.infinite:default:g=f}var P=a.extend({urlRoot:y.endpoint,controls:y.controls}),T=r.extend({url:y.endpoint,model:P,state:e.extend({},r.prototype.state,e.pick(y,"pageSize")),queryParams:e.extend({},r.prototype.queryParams,{name:function(){return o.get("filter")}})}),A=e.extend({},n.Events);new s(A);var x=new T([],{formatEntity:y.formatEntity}),b=y.analytics,V=i.canAdd,N=i.canRemove,R=c.create(e.extend({},y,{eventBus:A,collection:x,filterModel:o,AddView:d,TitleView:l,FilterView:m,HeaderView:p,ListView:u,NavigationView:g,canAdd:V,canRemove:N}));return R.$el.appendTo(i.container),x.loadFirstPage(),o.on("set",function(){x.loadFirstPage()}),e.isEmpty(b)||w.create(A,void 0,b),R}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-props.js' */
define("widget/permissions/permissions-props",[],function(){"use strict";return{NAVIGATION_TYPES:{infinite:"infinite"}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions.soy' */
// This file was automatically generated from permissions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.permissions.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.permissions == 'undefined') { bamboo.widget.permissions = {}; }


bamboo.widget.permissions.contents = function(opt_data, opt_ignored) {
  return '<div class="permissions-title"></div>' + aui.form.form({action: '#', extraClasses: 'permissions-filter', content: ''}) + '<div class="permissions-add"></div><table class="permissions-table aui"><thead class="permissions-header"></thead><tbody class="permissions-list permissions-list--syncing"></tbody><tbody class="permissions-navigation"></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.contents.soyTemplateName = 'bamboo.widget.permissions.contents';
}


bamboo.widget.permissions.title = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.title) + '</h3>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.title.soyTemplateName = 'bamboo.widget.permissions.title';
}


bamboo.widget.permissions.filter = function(opt_data, opt_ignored) {
  return '' + aui.form.input({type: 'text', name: 'name', extraClasses: 'permissions-filter__query full-width-field doNotDisableInConfigReadOnlyMode', placeholderText: opt_data.filterPlaceholder, autocomplete: 'off', value: ''}) + aui.icons.icon({extraClasses: 'permissions-filter__icon', icon: 'search-small', size: 'small', useIconFont: true});
};
if (goog.DEBUG) {
  bamboo.widget.permissions.filter.soyTemplateName = 'bamboo.widget.permissions.filter';
}


bamboo.widget.permissions.header = function(opt_data, opt_ignored) {
  var output = '';
  var className__soy27 = 'permissions-header__column';
  output += '<tr><th class="' + soy.$$escapeHtml(className__soy27) + '">' + soy.$$escapeHtml(opt_data.entryColumnLabel) + '</th>';
  var columnList34 = opt_data.columns;
  var columnListLen34 = columnList34.length;
  for (var columnIndex34 = 0; columnIndex34 < columnListLen34; columnIndex34++) {
    var columnData34 = columnList34[columnIndex34];
    output += '<th class="' + soy.$$escapeHtml(className__soy27) + '">' + soy.$$escapeHtml(columnData34.label) + '</th>';
  }
  output += '<th class="' + soy.$$escapeHtml(className__soy27) + '"></th></tr>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.header.soyTemplateName = 'bamboo.widget.permissions.header';
}


bamboo.widget.permissions.add = function(opt_data, opt_ignored) {
  var output = '';
  var content__soy45 = '<div class="permissions-add__cell">' + aui.form.input({type: 'text', autofocus: 'off', name: 'items', id: opt_data.itemsId, extraClasses: 'full-width-field permissions-add__items', placeholderText: opt_data.searchPlaceholder, value: ''}) + '</div>';
  var presetList56 = opt_data.presets;
  var presetListLen56 = presetList56.length;
  for (var presetIndex56 = 0; presetIndex56 < presetListLen56; presetIndex56++) {
    var presetData56 = presetList56[presetIndex56];
    content__soy45 += '<div class="permissions-add__cell permissions-add__cell--preset"></div>';
  }
  content__soy45 += '<div class="permissions-add__cell permissions-add__cell--add">' + aui.form.submit({type: 'primary', text: 'Add', extraClasses: 'permissions-add__submit'}) + '</div>';
  output += aui.form.form({action: '#', extraClasses: 'permissions-add__form', content: content__soy45});
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.add.soyTemplateName = 'bamboo.widget.permissions.add';
}


bamboo.widget.permissions.anyOfPreset = function(opt_data, opt_ignored) {
  var output = '';
  var content__soy70 = '';
  var itemList71 = opt_data.items;
  var itemListLen71 = itemList71.length;
  for (var itemIndex71 = 0; itemIndex71 < itemListLen71; itemIndex71++) {
    var itemData71 = itemList71[itemIndex71];
    content__soy70 += aui.form.label({extraClasses: 'permissions-add__preset-item--any-of', content: '' + aui.form.input({type: 'checkbox', name: 'preset', extraClasses: 'permissions-add__preset-checkbox--any-of', isDisabled: itemData71.isDisabled, isChecked: itemData71.isChecked, value: itemData71.text}) + soy.$$escapeHtml(itemData71.text)});
  }
  var menu__soy84 = {id: opt_data.id, extraClasses: 'aui-style-default permissions-add__preset-content permissions-add__preset-content--any-of', content: content__soy70};
  var trigger__soy85 = {menu: menu__soy84, tagName: 'button', extraClasses: 'aui-button aui-button-light permissions-add__preset-trigger', text: opt_data.label};
  output += aui.dropdown2.dropdown2({trigger: trigger__soy85, menu: menu__soy84});
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.anyOfPreset.soyTemplateName = 'bamboo.widget.permissions.anyOfPreset';
}


bamboo.widget.permissions.entry = function(opt_data, opt_ignored) {
  var output = '<td class="permissions-row__principal">' + soy.$$escapeHtml(opt_data.displayName) + '</td>';
  var className__soy93 = 'permissions-row__cell';
  var columnList95 = opt_data.columns;
  var columnListLen95 = columnList95.length;
  for (var columnIndex95 = 0; columnIndex95 < columnListLen95; columnIndex95++) {
    var columnData95 = columnList95[columnIndex95];
    output += '<td class="' + soy.$$escapeHtml(className__soy93) + ' ' + soy.$$escapeHtml(className__soy93) + '--permission"></td>';
  }
  output += '<td>' + ((opt_data.canRemove) ? '<span class="permissions-list__remove-spinner"></span>' + bamboo.widget.permissions.removeButton(null) : '') + '</td>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.permissions.entry.soyTemplateName = 'bamboo.widget.permissions.entry';
}


bamboo.widget.permissions.emptyRow = function(opt_data, opt_ignored) {
  return '<td class="table-empty-message__content ' + ((opt_data.isLoading) ? 'table-empty-message__content--loading' : '') + '" colspan="' + soy.$$escapeHtml(opt_data.colspan) + '">' + ((opt_data.isLoading) ? soy.$$escapeHtml("Loading...") : '<div class="empty-text light full-size">' + soy.$$escapeHtml(opt_data.notFoundText) + '</div>') + '</td>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.emptyRow.soyTemplateName = 'bamboo.widget.permissions.emptyRow';
}


bamboo.widget.permissions.yesNoCell = function(opt_data, opt_ignored) {
  return aui.form.input({type: 'checkbox', extraClasses: 'permissions-cell__permission-toggle', isDisabled: opt_data.isDisabled, isChecked: opt_data.isChecked, value: opt_data.label}) + '<div class="permissions-cell__spinner"></div>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.yesNoCell.soyTemplateName = 'bamboo.widget.permissions.yesNoCell';
}


bamboo.widget.permissions.emptyCell = function(opt_data, opt_ignored) {
  return '<span></span>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.emptyCell.soyTemplateName = 'bamboo.widget.permissions.emptyCell';
}


bamboo.widget.permissions.removeButton = function(opt_data, opt_ignored) {
  return '<a href="#" class="permissions-list__remove-entry">' + aui.icons.icon({icon: 'remove', useIconFont: true}) + '</a>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.removeButton.soyTemplateName = 'bamboo.widget.permissions.removeButton';
}


bamboo.widget.permissions.infiniteNavigation = function(opt_data, opt_ignored) {
  return '<tr colspan="' + soy.$$escapeHtml(opt_data.colspan) + '"><td><a href="#" class="permissions-navigation__load-more">Load more</a><span class="permissions-navigation__spinner"></span></td></tr>';
};
if (goog.DEBUG) {
  bamboo.widget.permissions.infiniteNavigation.soyTemplateName = 'bamboo.widget.permissions.infiniteNavigation';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/cell/permissions-cell-yes-no-view.js' */
define("widget/permissions/views/cell/permissions-cell-yes-no-view",["jquery","widget/permissions/permissions-templates","widget/permissions/views/abstract/permissions-abstract-cell-view"],function(e,i,s){"use strict";return s.extend({template:i.yesNoCell,ui:{spinner:".permissions-cell__spinner",toggle:".permissions-cell__permission-toggle"},events:{"change @ui.toggle":"toggleChangeHandler"},toggleChangeHandler:function(i){var s=this;this.showSpinner(),this.responsePromise=e.Deferred();var n=e.Deferred(),t=e.fx.off?0:500;setTimeout(function(){return n.resolve()},t),e.when(this.responsePromise,n).always(function(){return s.hideSpinner()}),i.currentTarget.checked?this.triggerAdd([this.options.permission]):this.triggerRemove([this.options.permission])},onPermissionsChangeSuccess:function(){this.responsePromise&&this.responsePromise.resolve()},onPermissionsChangeError:function(){this.ui.toggle.prop("checked",!this.ui.toggle.prop("checked")),this.responsePromise&&this.responsePromise.reject()},checkAndDisableCheckbox:function(){this.ui.toggle.prop("checked",!0),this.ui.toggle.prop("disabled",!0)},enableCheckbox:function(){this.ui.toggle.prop("disabled",!1)},showSpinner:function(){this.ui.toggle.hide(),this.ui.spinner.spin()},hideSpinner:function(){this.ui.spinner.spinStop(),this.ui.toggle.show()},serializeData:function(){return this.options}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-templates.js' */
define("widget/permissions/permissions-templates",[],function(){"use strict";return bamboo.widget.permissions});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-empty-view.js' */
define("widget/permissions/views/permissions-empty-view",["underscore","marionette","widget/permissions/permissions-templates"],function(e,t,s){"use strict";return t.ItemView.extend({tagName:"tr",className:"table-empty-message",template:s.emptyRow,collectionEvents:{request:"onRequest","sync error destroy":"onComplete"},onRequest:function(){this.isLoading=!0,this.render()},onComplete:function(){this.isLoading=!1,this.render()},serializeData:function(){return{isLoading:this.isLoading,notFoundText:this.options.notFoundText,colspan:this.options.colspan}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-layout-view.js' */
define("widget/permissions/views/permissions-layout-view",["underscore","backbone","marionette","widget/permissions/permissions-templates"],function(e,i,s,t){"use strict";return s.ItemView.extend({className:"permissions",template:t.contents,ui:{add:".permissions-add",title:".permissions-title",filter:".permissions-filter",header:".permissions-header",list:".permissions-list",navigation:".permissions-navigation"}},{create:function(s){var t=new this(s).render(),n=function(i,t,n){new i(e.extend({},s,n,{el:t})).render()};return s.canAdd&&n(s.FilterView,t.ui.filter,{model:s.filterModel}),n(s.HeaderView,t.ui.header),n(s.ListView,t.ui.list),n(s.NavigationView,t.ui.navigation),s.canAdd&&n(s.AddView,t.ui.add,{permissionsCollection:s.collection,collection:new i.Collection}),s.title&&n(s.TitleView,t.ui.title),t}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/views/permissions-add-view.js' */
define("widget/permissions/views/permissions-add-view",["underscore","marionette","widget/permissions/models/permissions-model","widget/permissions/permissions-templates","widget/permissions/views/preset/permissions-preset-any-of-view","util/request"],function(e,t,i,s,n,r){"use strict";var o=r(window,{redirectIfUnauthorised:!1});return t.ItemView.extend({template:s.add,ui:{items:".permissions-add__items",presetCell:".permissions-add__cell--preset",preset:".permissions-add__preset",submit:".permissions-add__submit"},events:{submit:"onSubmit","change @ui.items":"onItemsChange"},collectionEvents:{"add remove reset":"toggleAddButton"},onRender:function(){this.initItems(),this.initPresets(),this.toggleAddButton()},onItemsChange:function(e){this.updateCollection(e.added,"add"),this.updateCollection(e.removed,"remove")},onPresetChange:function(){this.updateEntitiesPermissions(),this.toggleAddButton()},onSubmit:function(t){var i=this;t.preventDefault();var s=this.options,n=this.collection,r=this.ui.items.data("select2"),o=this.toggleAddButton.bind(this),a=new Array(n.length),u=function(e,t){a[e]=t},c=e.after(n.length,function(){var t=function(e,t){return e.filter(function(e,i){return a[i]===t})},u=t(n,!0);if(u.length){switch(u.reverse().forEach(function(e){s.permissionsCollection.add(e.toJSON(),{at:0}),s.eventBus.trigger("PERMISSION_ANALYTICS:ENTRY_ADDED")}),u.length){case 1:var c=AJS.escapeHtml(u[0].getEntryDisplayName());s.eventBus.trigger("notification:success",AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e has been added.",c));break;default:s.eventBus.trigger("notification:success",AJS.format("\u003cstrong\u003e{0} entries\u003c/strong\u003e have been added.",u.length))}i.presetViews.forEach(function(e){return e.clearSelection()})}var l=t(n,!1);r.val(l.length?e.pluck(l,"id"):"",!0),o()});o(!0),n.map(function(e,t){return e.save().done(function(){u(t,!0)}).fail(function(){u(t,!1)}).always(c)})},updateCollection:function(e,t){if(e){(Array.isArray(e)?e:[e]).map(this.createModel,this).forEach(this.collection[t],this.collection)}},createModel:function(e){var t=this.getSelectedPermissions();return i.extend({urlRoot:this.options.endpoint}).create(e.name,t,e.displayName)},updateEntitiesPermissions:function(){var e=this;this.collection.forEach(function(t){return t.setPermissions(e.getSelectedPermissions())})},initItems:function(){var e=this.options.formatEntity,t=this.options.formatSearchResult;this.ui.items.auiSelect2({multiple:!0,minimumInputLength:1,ajax:{transport:o.ajax,url:this.options.searchEndpoint,quietMillis:250,dataType:"json",data:function(e,t){return{name:e,limit:25,start:25*(t-1)}},results:function(i){return{more:!!i.next,results:i.results.map(function(i){return{name:i.name,displayName:e(i),searchResult:t(i)}})}}},id:function(e){return e.name},formatResult:function(e,t,i,s){return s(e.searchResult)},formatSelection:function(e,t,i){return i(e.displayName)}})},initPresets:function(){var t=this;this.presetViews=[];var i=this.ui.presetCell,s=e.pick(this.options,"dependencies");this.options.presets.forEach(function(e,r){var o=n.create(i.eq(r),e,s);t.listenTo(o.collection,"change",t.onPresetChange),t.presetViews.push(o)},this)},getSelectedPermissions:function(){return e.unique(e.flatten(e.map(this.presetViews,function(e){return e.getSelectedPermissionNames()})))},toggleAddButton:function(e){this.ui.submit.prop("disabled",/true|false/.test(e)?e:!this.isValid())},isValid:function(){var e=this.collection.length>0,t=this.getSelectedPermissions().length>0;return e&&t},serializeData:function(){return e.extend({},this.options,{itemsId:e.uniqueId("permissions-add__items-unique-id-")})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/permissions-errors.js' */
define("widget/permissions/permissions-error",[],function(){"use strict";function r(r){this.name="PermissionsComponentError",this.message=r}return r.prototype=Error.prototype,r});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-permissions', location = '/widget/permissions/collections/permissions-collection.js' */
define("widget/permissions/collections/permissions-collection",["underscore","backbone","atlassian/libs/factories/backbone.paginator-2.0.2","util/request"],function(t,e,s,i){"use strict";var r=i(window,{redirectIfUnauthorised:!1}),n=s(t,e);return n.extend({sync:r.sync,state:{firstPage:0,pageSize:30},queryParams:{totalPages:null,totalRecords:null,currentPage:null,pageSize:"limit",start:function(){return this.state.currentPage*this.state.pageSize}},initialize:function(t,e){this.options=e},parseState:function(t,e,s){return{totalRecords:(s.currentPage+1)*s.pageSize+(t.next?1:0)}},parseRecords:function(t){var e=this;return t.results.map(function(t){return{name:t.name,displayName:e.options.formatEntity(t),permissions:t.permissions}})},fetch:function(e){return n.prototype.fetch.call(this,t.extend(e,{cache:!1}))},loadFirstPage:function(){try{this._firstPageRequest.abort()}catch(t){}return this._firstPageRequest=this.switchMode(this.mode,{resetState:!0,fetch:!0,reset:!0}),this._firstPageRequest}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-submit-button', location = '/widget/submit-button/submit-button.js' */
define("widget/submit-button",["jquery","underscore"],function(t,o){"use strict";function n(n){var c=this;this.options=t.extend(!0,Object.create(e),n),t(function(){c.$button=t(c.options.buttonSelector),c.$form=t(c.options.formSelector),c.$button.off(),c.$button.click(o.bind(i,c))})}var e={buttonSelector:null,formSelector:null,callback:null},i=function(t){t.preventDefault(),o.isFunction(this.options.callback)&&this.options.callback(),this.$form.submit()};return n});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-build-autocomplete', location = '/feature/build-autocomplete/build-autocomplete.js' */
define("feature/build-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events","util/ajax"],function(t,e,i,s,a){"use strict";return i.extend({mixins:[s.EventBusMixin],initialize:function(s){s=t.extend({minimumResultsForSearch:-1},s||{}),this.params=s.params||{},s.params&&delete s.params;var a=e.bind(function(e,i){return t.extend({searchTerm:e,"start-index":Math.max((i-1)*this.params["max-results"],0)},this.params)},this),n={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/deploy/preview/possibleResults",dataType:"json",data:a,results:e.bind(function(t){return this.processData({results:t,more:!!t&&t.length>=this.params["max-results"]})},this)},id:function(t){return t.planResultKey.key}};i.prototype.initialize.apply(this,[t.extend(n,s||{})])},onRegisterEvents:function(){this.proxyEvents("build",["change"],this.$el);var t=["branch:change"];this.$el.val()||t.push("branch:change:initial"),this.onEvent(t,this.onMasterChange),this.onEvent("build:hide",this.onHide),this.onEvent("build:show",this.onShow)},onInitSelection:function(i,s){t(document).ready(e.bind(function(){var a=t(i).val();e.isString(a)&&a.length&&(this.$el.auiSelect2("data",this.settings.initialValue),this.processData({results:[this.settings.initialValue]}),this.params.planKey=this.settings.initialValue.planResultKey.entityKey.key,this.triggerEvent("build:change:initial"),s(this.settings.initialValue))},this))},onLoadAndProcess:function(t,i){var s=e.defaults({data:this.settings.ajax.data("",1)},this.settings.ajax);a(s).done(e.bind(function(t){if(e.isEmpty(t))this.$el.val(null),this.$el.auiSelect2("data",null),this.params.planKey=null;else{var s=t[0];this.$el.val(this.settings.id(s)),this.$el.auiSelect2("data",s),this.processData({results:t,more:!!t&&t.length>=this.params["max-results"]}),this.params.planKey=s.planResultKey.entityKey.key,i&&i(s)}this.triggerEvent("build:change"),this.triggerEvent("deploy:release:warning")},this))},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.build.autocomplete.result({resultSummary:t})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.build.autocomplete.selection({resultSummary:t})},onMasterChange:function(t){if(this.settings.masterPickerId&&t.$el.attr("id")===this.settings.masterPickerId){this.clearValue();var e=t.getSelectedData();e?(this.params.planKey=e.searchEntity.key,this.onLoadAndProcess(),this.enable()):this.disable()}},onHide:function(t,e){e&&!e.find(this.$el).length||this.$el.parents(".field-group:first").hide()},onShow:function(t,e){e&&!e.find(this.$el).length||this.$el.parents(".field-group:first").show()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-build-autocomplete', location = '/feature/build-autocomplete/build-autocomplete.soy' */
// This file was automatically generated from build-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.build.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.build == 'undefined') { bamboo.feature.build = {}; }
if (typeof bamboo.feature.build.autocomplete == 'undefined') { bamboo.feature.build.autocomplete = {}; }


bamboo.feature.build.autocomplete.result = function(opt_data, opt_ignored) {
  return ' ' + widget.buildresult.resultStatus(opt_data) + ' <span class="info">' + soy.$$escapeHtml(opt_data.resultSummary.buildRelativeTime) + '</span>';
};
if (goog.DEBUG) {
  bamboo.feature.build.autocomplete.result.soyTemplateName = 'bamboo.feature.build.autocomplete.result';
}


bamboo.feature.build.autocomplete.selection = function(opt_data, opt_ignored) {
  return widget.buildresult.resultStatus(opt_data) + ' ' + soy.$$escapeHtml(opt_data.resultSummary.buildRelativeTime);
};
if (goog.DEBUG) {
  bamboo.feature.build.autocomplete.selection.soyTemplateName = 'bamboo.feature.build.autocomplete.selection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.deployments:deployment-version-soy', location = '/widget/deployment/version.soy' */
// This file was automatically generated from version.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.deployment.version.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.deployment == 'undefined') { bamboo.widget.deployment = {}; }
if (typeof bamboo.widget.deployment.version == 'undefined') { bamboo.widget.deployment.version = {}; }


bamboo.widget.deployment.version.versionInfo = function(opt_data, opt_ignored) {
  return '' + ((opt_data.version) ? ((opt_data.showVersionStatus && opt_data.version.versionStatus) ? '<div class="release-info">' + bamboo.widget.deployment.version.name(opt_data.version) + '</div>' : bamboo.widget.deployment.version.name(opt_data.version)) + ((opt_data.showBranch) ? ' ' + bamboo.widget.deployment.version.branch(opt_data.version) : '') + ((opt_data.showVersionStatus && opt_data.version.versionStatus) ? ' ' + widget.status.deploymentVersionStatusInfo({avatar: opt_data.version.versionStatus.gravatarUrl, userName: opt_data.version.versionStatus.userName, displayName: opt_data.version.versionStatus.displayName, deploymentVersionState: opt_data.version.versionStatus.versionState}) : '') : '');
};
if (goog.DEBUG) {
  bamboo.widget.deployment.version.versionInfo.soyTemplateName = 'bamboo.widget.deployment.version.versionInfo';
}


bamboo.widget.deployment.version.name = function(opt_data, opt_ignored) {
  return '<a class="release-name" href="' + soy.$$escapeHtml("") + '/deploy/viewDeploymentVersion.action?versionId=' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>';
};
if (goog.DEBUG) {
  bamboo.widget.deployment.version.name.soyTemplateName = 'bamboo.widget.deployment.version.name';
}


bamboo.widget.deployment.version.branch = function(opt_data, opt_ignored) {
  return '<span class="lozenge-newline">' + ((opt_data.label) ? '<span class="inline-label">' + soy.$$escapeHtml(opt_data.label) + '</span> ' : '') + '<span class="lozenge branch-lozenge monospace" title="' + soy.$$escapeHtml(opt_data.planBranchName) + '"><span class="branch">' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + '<span class="name">' + soy.$$escapeHtml(opt_data.planBranchName) + '</span></span></span></span>';
};
if (goog.DEBUG) {
  bamboo.widget.deployment.version.branch.soyTemplateName = 'bamboo.widget.deployment.version.branch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-label', location = '/feature/branch-label/branch-label.js' */
define("feature/branch-label",["jquery","backbone","brace","util/events"],function(e,n,t,i){"use strict";return t.View.extend({mixins:[i.EventBusMixin],initialize:function(){this.onEvent("plan:selected",this.onPlanChange)},onPlanChange:function(e,t){t instanceof n.Model&&this.$el.html(bamboo.widget.deployment.version.branch({planBranchName:t.get("branchName"),label:"Currently"}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-autocomplete', location = '/feature/branch-autocomplete/branch-autocomplete.js' */
define("feature/branch-autocomplete",["jquery","underscore","backbone","widget/autocomplete-ajax","util/ajax","util/events"],function(t,e,a,n,s,i){"use strict";return n.extend({mixins:[i.EventBusMixin],initialize:function(a){a=t.extend({placeholder:"Search for a branch ..."},a||{}),this.params=t.extend({includeMasterBranch:!1},a.params||{}),a.params&&delete a.params;var s=e.bind(function(e,a){return t.extend({searchTerm:e,"start-index":Math.max((a-1)*this.params["max-results"],0)},this.params)},this),i={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/search/branches",dataType:"json",data:s,results:e.bind(function(t,e){return this.processData({results:t.searchResults,more:!!t.size&&t.size>e*this.params["max-results"]})},this)}};n.prototype.initialize.apply(this,[t.extend(i,a||{})])},onRegisterEvents:function(){this.onEvent("plan:selected",this.onMasterChange),this.proxyEvents("branch",["change"],this.$el)},onInitSelection:function(a,n){t(document).ready(e.bind(function(){var i=t(a).val();e.isString(i)&&i.length&&s({url:this.settings.ajax.url,dataType:this.settings.ajax.dataType,data:{includeMasterBranch:!0,masterPlanKey:i,"start-index":0,"max-results":1}}).done(e.bind(function(t){var e=t.searchResults[0];this.$el.auiSelect2("data",e),this.processData({results:t.searchResults}),this.triggerEvent("branch:change:initial"),n(e)},this))},this))},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.branch.autocomplete.result({label:t.searchEntity.branchName})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.branch.autocomplete.result({label:t.searchEntity.branchName})},onMasterChange:function(e,n){if(!this.settings.masterPickerId||e.$el.attr("id")===this.settings.masterPickerId)if(this.clearValue(),n instanceof a.Model){var s=t.trim(n.get("key"));s.length&&(this.params.masterPlanKey=s)}else this.triggerEvent("branch:empty")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-branch-autocomplete', location = '/feature/branch-autocomplete/branch-autocomplete.soy' */
// This file was automatically generated from branch-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.branch.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.branch == 'undefined') { bamboo.feature.branch = {}; }
if (typeof bamboo.feature.branch.autocomplete == 'undefined') { bamboo.feature.branch.autocomplete = {}; }


bamboo.feature.branch.autocomplete.result = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-devtools-branch"></span>  ' + soy.$$escapeHtml(opt_data.label);
};
if (goog.DEBUG) {
  bamboo.feature.branch.autocomplete.result.soyTemplateName = 'bamboo.feature.branch.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-stage-autocomplete', location = '/feature/stage-autocomplete/stage-autocomplete.js' */
define("feature/stage-autocomplete",["jquery","underscore","backbone","widget/autocomplete-ajax","util/ajax","util/events"],function(t,e,a,s,n,i){"use strict";return s.extend({mixins:[i.EventBusMixin],initialize:function(a){a=t.extend({placeholder:"Search for a stage &hellip;"},a||{}),a=a||{},this.params=a.params||{},a.params&&delete a.params;var n=e.bind(function(e,a){return t.extend({searchTerm:e,"start-index":Math.max((a-1)*this.params["max-results"],0)},this.params)},this),i={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/search/stages/"+this.params.masterPlanKey,dataType:"json",data:n,results:e.bind(this.onAjaxResult,this)}};s.prototype.initialize.apply(this,[t.extend(i,a||{})])},onAjaxResult:function(t,e){return this.processData({results:t.searchResults,more:!!t.size&&t.size>e*this.params["max-results"]})},onRegisterEvents:function(){this.proxyEvents("stage",["change"],this.$el)},onInitSelection:function(a,s){t(document).ready(e.bind(function(){var i=t(a).val();e.isString(i)&&i.length&&n({url:this.settings.ajax.url,dataType:this.settings.ajax.dataType,data:{stageId:i,"start-index":0,"max-results":1}}).done(e.bind(function(t){var e=t.searchResults[0];this.$el.auiSelect2("data",e),this.processData({results:t.searchResults}),this.triggerEvent("stage:change:initial"),s(e)},this))},this))},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.stage.autocomplete.result({label:t.searchEntity.name})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.stage.autocomplete.result({label:t.searchEntity.name})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-stage-autocomplete', location = '/feature/stage-autocomplete/stage-autocomplete.soy' */
// This file was automatically generated from stage-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.stage.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.stage == 'undefined') { bamboo.feature.stage = {}; }
if (typeof bamboo.feature.stage.autocomplete == 'undefined') { bamboo.feature.stage.autocomplete = {}; }


bamboo.feature.stage.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.label);
};
if (goog.DEBUG) {
  bamboo.feature.stage.autocomplete.result.soyTemplateName = 'bamboo.feature.stage.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-deployment-tasksdialog', location = '/feature/deployment-tasksdialog/deployment-tasksdialog.js' */
define("feature/deployment-tasksdialog",["jquery","widget/dialog"],function(e,t){"use strict";return t.extend({initialize:function(t){var i=[];t.editTasksRedirect&&i.push({id:"editTasks",label:"Edit tasks",type:"button"}),i.push({id:"cancel",label:"Close",type:"button"});var n=e.extend({buttons:i,header:"Deployment tasks to run",$triggerEl:e("#view-tasks"),width:500,height:300},t||{});this.constructor.__super__.initialize.apply(this,[n])},onButtonClick:function(e){"editTasks"===e?window.location=this.settings.editTasksRedirect:"cancel"===e&&this.dialog.remove()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-job-autocomplete', location = '/feature/job-autocomplete/job-autocomplete.soy' */
// This file was automatically generated from job-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.job.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.job == 'undefined') { bamboo.feature.job = {}; }
if (typeof bamboo.feature.job.autocomplete == 'undefined') { bamboo.feature.job.autocomplete = {}; }


bamboo.feature.job.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + ((opt_data.item.searchEntity.groupName) ? soy.$$escapeHtml(opt_data.item.searchEntity.groupName) : soy.$$escapeHtml(opt_data.item.searchEntity.jobName));
};
if (goog.DEBUG) {
  bamboo.feature.job.autocomplete.result.soyTemplateName = 'bamboo.feature.job.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-job-autocomplete', location = '/feature/job-autocomplete/job-autocomplete.js' */
define("feature/job-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events"],function(t,e,s,a){"use strict";return s.extend({template:bamboo.feature.job.autocomplete,mixins:[a.EventBusMixin],initialize:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params=a.params||{},this.lastGroup=null,a.params&&delete a.params;var i=e.bind(function(t,s){return e.extend({searchTerm:t,"start-index":Math.max((s-1)*this.params["max-results"],0)},this.params)},this),r={minimumInputLength:0,ajax:{url:e.bind(this.onAjaxUrl,this),results:e.bind(this.onAjaxResults,this),data:i,dataType:"json"}};s.prototype.initialize.apply(this,[t.extend(r,a||{})])},onAjaxUrl:function(){if(this.query&&this.query.plan)return AJS.contextPath()+"/rest/api/latest/search/jobs/"+this.query.plan;this.disable().clearValue()},onAjaxResults:function(t,s){var a=[];return 1===s&&(this.lastGroup=null),e.each(t.searchResults,e.bind(function(t){if(this.lastGroup!==t.searchEntity.stageName){this.lastGroup=t.searchEntity.stageName;var e={isGroup:!0,searchEntity:{groupName:this.lastGroup}};a.push(e)}a.push(t)},this)),this.processData({results:a,more:!!t.size&&t.size>s*this.params["max-results"]})},onFormatResult:function(t){if(!e.isEmpty(t))return this.template.result({item:t})},onFormatSelection:function(t){if(!e.isEmpty(t))return this.template.result({item:t})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plan-autocomplete', location = '/feature/plan-autocomplete/plan-autocomplete.soy' */
// This file was automatically generated from plan-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.plan.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.plan == 'undefined') { bamboo.feature.plan = {}; }
if (typeof bamboo.feature.plan.autocomplete == 'undefined') { bamboo.feature.plan.autocomplete = {}; }


bamboo.feature.plan.autocomplete.result = function(opt_data, opt_ignored) {
  return '' + ((opt_data.item.searchEntity.groupName) ? soy.$$escapeHtml(opt_data.item.searchEntity.groupName) : soy.$$escapeHtml(opt_data.item.searchEntity.planName));
};
if (goog.DEBUG) {
  bamboo.feature.plan.autocomplete.result.soyTemplateName = 'bamboo.feature.plan.autocomplete.result';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plan-autocomplete', location = '/feature/plan-autocomplete/plan-autocomplete.js' */
define("feature/plan-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events"],function(t,e,s,a){"use strict";return s.extend({template:bamboo.feature.plan.autocomplete,mixins:[a.EventBusMixin],initialize:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params=a.params||{},this.lastGroup=null,a.params&&delete a.params;var i=e.bind(function(t,s){return e.extend({searchTerm:t,"start-index":Math.max((s-1)*this.params["max-results"],0)},this.params)},this),r={minimumInputLength:0,ajax:{url:AJS.contextPath()+"/rest/api/latest/search/plans",results:e.bind(this.onAjaxResults,this),data:i,dataType:"json"}};s.prototype.initialize.apply(this,[t.extend(r,a||{})])},onAjaxResults:function(t,s){var a=[];return 1===s&&(this.lastGroup=null),e.each(t.searchResults,e.bind(function(t){if(this.lastGroup!==t.searchEntity.projectName){this.lastGroup=t.searchEntity.projectName;var e={isGroup:!0,searchEntity:{groupName:this.lastGroup}};a.push(e)}a.push(t)},this)),this.processData({results:a,more:!!t.size&&t.size>s*this.params["max-results"]})},onFormatResult:function(t){if(!e.isEmpty(t))return this.template.result({item:t})},onFormatSelection:function(t){if(!e.isEmpty(t))return this.template.result({item:t})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-soft-limit-warning', location = '/feature/dialog-storage-soft-limit-warning/dialog-storage-soft-limit-warning.soy' */
// This file was automatically generated from dialog-storage-soft-limit-warning.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.dialog.storage.soft.limit.warning.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.dialog == 'undefined') { bamboo.feature.dialog = {}; }
if (typeof bamboo.feature.dialog.storage == 'undefined') { bamboo.feature.dialog.storage = {}; }
if (typeof bamboo.feature.dialog.storage.soft == 'undefined') { bamboo.feature.dialog.storage.soft = {}; }
if (typeof bamboo.feature.dialog.storage.soft.limit == 'undefined') { bamboo.feature.dialog.storage.soft.limit = {}; }
if (typeof bamboo.feature.dialog.storage.soft.limit.warning == 'undefined') { bamboo.feature.dialog.storage.soft.limit.warning = {}; }


bamboo.feature.dialog.storage.soft.limit.warning.content = function(opt_data, opt_ignored) {
  var output = '';
  var storagePolicyUrl__soy3 = "https://confluence.atlassian.com/display/Cloud/Atlassian+Cloud+Storage+Policy";
  output += aui.message.warning({content: '' + soy.$$escapeHtml("Careful, you\x27re about to run out of storage.")}) + '<p>' + soy.$$escapeHtml("Need more than the storage provided on your Atlassian Cloud account? You can use your AWS account for storing artifacts on your own Amazon S3 instance.") + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Read more about the \x3ca href\x3d\x22{0}\x22\x3eAtlassian Cloud storage policy\x3c/a\x3e.",typeof (storagePolicyUrl__soy3) === 'number' ? storagePolicyUrl__soy3 : soy.$$escapeHtml(storagePolicyUrl__soy3)))) + '</p>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.dialog.storage.soft.limit.warning.content.soyTemplateName = 'bamboo.feature.dialog.storage.soft.limit.warning.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-soft-limit-warning', location = '/feature/dialog-storage-soft-limit-warning/dialog-storage-soft-limit-warning.js' */
define("feature/dialog-storage-soft-limit-warning",["jquery","underscore","widget/dialog"],function(t,i,e){"use strict";return e.extend({defaultSettings:{height:300,width:600,header:"Storage almost full",buttons:[{id:"configure",label:"Configure artifact storage",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Remind me later",type:"link"}]},initialize:function(t){var n=t||{};this.interval=n.interval||1,this.currentTimestamp=(new Date).getTime(),this.cookieName="storage.soft.limit.warning."+n.username;var a=+(24*this.interval*60*60*1e3),o=AJS.Cookie.read(this.cookieName);this.isTimeToDisplay=!o||o<this.currentTimestamp-a,this.defaultSettings.content=bamboo.feature.dialog.storage.soft.limit.warning.content({}),e.prototype.initialize.call(this,i.defaults(n,this.defaultSettings))},createInstance:function(){this.isTimeToDisplay&&(AJS.Cookie.save(this.cookieName,this.currentTimestamp,this.interval),e.prototype.createInstance.call(this))},onButtonClick:function(t){for(var n,a=arguments.length,o=Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];if((n=e.prototype.onButtonClick).call.apply(n,[this,t].concat(o)),"configure"===t){var s=this.dialog.getPage(0).buttonpanel;s.prepend(aui.icons.icon({size:"small",icon:"wait"})),s.find(":button").attr("disabled",!0),i.delay(i.bind(function(){window.location.href=AJS.contextPath()+"/admin/configureArtifactStorage.action"},this),500)}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-hard-limit-warning', location = '/feature/dialog-storage-hard-limit-warning/dialog-storage-hard-limit-warning.soy' */
// This file was automatically generated from dialog-storage-hard-limit-warning.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.dialog.storage.hard.limit.warning.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.dialog == 'undefined') { bamboo.feature.dialog = {}; }
if (typeof bamboo.feature.dialog.storage == 'undefined') { bamboo.feature.dialog.storage = {}; }
if (typeof bamboo.feature.dialog.storage.hard == 'undefined') { bamboo.feature.dialog.storage.hard = {}; }
if (typeof bamboo.feature.dialog.storage.hard.limit == 'undefined') { bamboo.feature.dialog.storage.hard.limit = {}; }
if (typeof bamboo.feature.dialog.storage.hard.limit.warning == 'undefined') { bamboo.feature.dialog.storage.hard.limit.warning = {}; }


bamboo.feature.dialog.storage.hard.limit.warning.content = function(opt_data, opt_ignored) {
  var output = '';
  var storagePolicyUrl__soy3 = "https://confluence.atlassian.com/display/Cloud/Atlassian+Cloud+Storage+Policy";
  var header__soy4 = '' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("You\x27ve exceeded the Atlassian Cloud storage limit. Unfortunately your builds have been disabled until you configure S3 storage for artifacts."));
  output += aui.message.warning({content: '' + soy.$$escapeHtml(header__soy4)}) + '<p>' + soy.$$escapeHtml("You can configure Bamboo\x27s artifact storage to use your own Amazon S3 account for increased storage capacity. Doing so will immediately re-enable builds.") + '</p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Read more about the \x3ca href\x3d\x22{0}\x22\x3eAtlassian Cloud storage policy\x3c/a\x3e.",typeof (storagePolicyUrl__soy3) === 'number' ? storagePolicyUrl__soy3 : soy.$$escapeHtml(storagePolicyUrl__soy3)))) + '</p>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.dialog.storage.hard.limit.warning.content.soyTemplateName = 'bamboo.feature.dialog.storage.hard.limit.warning.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-dialog-storage-hard-limit-warning', location = '/feature/dialog-storage-hard-limit-warning/dialog-storage-hard-limit-warning.js' */
define("feature/dialog-storage-hard-limit-warning",["jquery","underscore","widget/dialog"],function(t,i,e){"use strict";var n="storage.hard.limit.warning.displayed";return e.extend({defaultSettings:{height:320,width:600,header:"Storage full and builds disabled",buttons:[{id:"configure",label:"Configure artifact storage",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Remind me later",type:"link"}]},initialize:function(t){var a=t||{},o=AJS.Cookie.read(n),r=!a.userLoggedIn&&o;this.shouldDisplay=a.userLoggedIn&&!o,this.shouldDisplay?AJS.Cookie.save(n,!0):r&&AJS.Cookie.erase(n),this.defaultSettings.content=bamboo.feature.dialog.storage.hard.limit.warning.content({}),e.prototype.initialize.call(this,i.defaults(a,this.defaultSettings))},createInstance:function(){this.shouldDisplay&&e.prototype.createInstance.call(this)},onButtonClick:function(t){for(var n,a=arguments.length,o=Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];if((n=e.prototype.onButtonClick).call.apply(n,[this,t].concat(o)),"configure"===t){var l=this.dialog.getPage(0).buttonpanel;l.prepend(aui.icons.icon({size:"small",icon:"wait"})),l.find(":button").attr("disabled",!0),i.delay(i.bind(function(){window.location.href=AJS.contextPath()+"/admin/configureArtifactStorage.action"},this),500)}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-fetch', location = '/util/fetch/fetch.js' */
define("util/fetch",[],function(){"use strict";return function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return new Promise(function(t,e){fetch.apply(void 0,n).then(t).catch(e)})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters', location = '/feature/quick-filters/quick-filters.soy' */
// This file was automatically generated from quick-filters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.quick.filters.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.quick == 'undefined') { bamboo.feature.quick = {}; }
if (typeof bamboo.feature.quick.filters == 'undefined') { bamboo.feature.quick.filters = {}; }


bamboo.feature.quick.filters.dashboardFilter = function(opt_data, opt_ignored) {
  return '<button data-filter-id="' + soy.$$escapeHtml(opt_data.filterId) + '" class="aui-button quick-filter ' + ((opt_data.active) ? 'active' : '') + '">' + soy.$$escapeHtml(opt_data.name) + '</button>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.dashboardFilter.soyTemplateName = 'bamboo.feature.quick.filters.dashboardFilter';
}


bamboo.feature.quick.filters.notFoundError = function(opt_data, opt_ignored) {
  return '' + bamboo.util.error.helper.dialogMessage({content: AJS.format("Quick filter \x27\x27{0}\x27\x27 not found. It might have been removed.",opt_data.name)});
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.notFoundError.soyTemplateName = 'bamboo.feature.quick.filters.notFoundError';
}


bamboo.feature.quick.filters.choiceForm = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml("Select quick filters to display on Bamboo dashboard. This change will not affect other users.") + '</p><p>' + aui.icons.icon({icon: 'info', useIconFont: true, extraClasses: 'grey'}) + ' ' + soy.$$escapeHtml("The order in which filters appear on the board is managed by Bamboo administrators.") + '</p><form action="PUT" target="' + soy.$$escapeHtml("") + '/rest/api/latest/quickFilter/visible" class="aui"><fieldset><div class="field-group"><label for="selectedQuickFilters">' + soy.$$escapeHtml("Quick filters") + '</label><select name="selectedQuickFilters" id="selectedQuickFilters" class="long-field" multiple="multiple">';
  var filterList30 = opt_data.filters;
  var filterListLen30 = filterList30.length;
  for (var filterIndex30 = 0; filterIndex30 < filterListLen30; filterIndex30++) {
    var filterData30 = filterList30[filterIndex30];
    output += '<option value="' + soy.$$escapeHtml(filterData30.id) + '" ' + ((filterData30.selected) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(filterData30.name) + '</option>';
  }
  output += '</select><a href="#" class="clear-selected-quick-filters">' + soy.$$escapeHtml("Clear all") + '</a></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.choiceForm.soyTemplateName = 'bamboo.feature.quick.filters.choiceForm';
}


bamboo.feature.quick.filters.choiceFormError = function(opt_data, opt_ignored) {
  return '' + bamboo.util.error.helper.dialogMessage({content: "An error has occurred while loading the list of available quick filters."});
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.choiceFormError.soyTemplateName = 'bamboo.feature.quick.filters.choiceFormError';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters', location = '/feature/quick-filters/quick-filters.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};define("feature/quick-filters",["jquery","underscore","util/ajax","util/errors","util/fetch","util/help-links","widget/dialog-error","widget/dialog-form","widget/feature-discovery-dialog"],function(e,t,i,n,o,l,r,a,s){"use strict";var c=AJS.contextPath()+"/rest/api/latest/quickFilter",d=t.template(c+"/<%= filterId %>/activate"),h=t.template(c+"/<%= filterId %>/deactivate"),u=c+"/deactivate",g=AJS.contextPath()+"/ajax/toggleQuickFilter.action",f=a.extend({defaultSettings:{buttons:[{id:"save",label:"Save",cssClass:"quick-filters-choice-save aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link",cssClass:"quick-filters-choice-cancel"}]},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.prototype.initialize.call(this,_extends({},this.defaultSettings,e))},onContentLoaded:function(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];(e=a.prototype.onContentLoaded).call.apply(e,[this].concat(i));var o=this.form.$el.find("select");o.auiSelect2({closeOnSelect:!1,placeholder:"No quick filters selected"}),this.form.$el.find(".clear-selected-quick-filters").on("click",function(e){e.preventDefault(),o.auiSelect2("data",null)})}}),p=s.extend({shouldDisplay:function(){return this.options.quickFiltersCount>=10&&s.prototype.shouldDisplay.call(this)}});return Backbone.View.extend({initialize:function(t){var i=this,n=t||{};this.dashboard=n.dashboard,this.$iconContainer=e(n.iconContainer),this.$projectFilterToggle=e(n.projectFilter.toggle),this.$projectFilterEdit=e(n.projectFilter.edit),this.$chooseLink=e(n.chooseLink),this.template=bamboo.feature.quick.filters,setTimeout(function(){i.discoveryDialog=new p({el:n.discoveryDialog,preferenceKey:"quick.filters.choose.discovery.dialog.displayed",quickFiltersCount:i.$el.find(".quick-filter").length})},500),this.$el.find(".quick-filter.active").length>0&&(this.deactivateProjectFilter(),this.refreshDashboard()),this.registerEvents()},registerEvents:function(){this.$el.on("click",".quick-filter",this.onQuickFilterToggled.bind(this)),this.$projectFilterToggle.on("click",this.onProjectFilterToggled.bind(this,"toggle")),this.$projectFilterEdit.on("click",this.onProjectFilterToggled.bind(this,"edit")),this.$chooseLink.on("click",this.onChooseLinkClicked.bind(this)),e(document).on("click",".quick-filters-disable-all",this.onDisableAllQuickFiltersClicked.bind(this))},getChoiceDialogContent:function(){var e=this,t={method:"GET",credentials:"same-origin",headers:{Accept:"application/json"}},i=o(AJS.contextPath()+"/rest/api/latest/quickFilter?configured=true",t).then(function(e){return e.json().then(function(t){return e.ok?Promise.resolve(t):Promise.reject(t)})}),n=o(AJS.contextPath()+"/rest/api/latest/quickFilter/visible",t).then(function(e){return e.json().then(function(t){return e.ok?Promise.resolve(t):Promise.reject(t)})});return Promise.all([i,n]).then(function(t){var i=t[0],n=t[1],o=new Set(n.map(function(e){return e.id}));return i.forEach(function(e){e.selected=o.has(e.id)}),Promise.resolve(e.template.choiceForm({filters:i}))})},onQuickFilterToggled:function(n){n.preventDefault(),this.cancelRequest(this.toggleRequest),this.cancelRequest(this.dashboardRequest),this.displayLoadingIcon(),this.deactivateProjectFilter();var o=e(n.target),l=o.attr("data-filter-id"),r=o.hasClass("active"),a=r?h:d,s=this.$el.find(".quick-filter.active").length;this.triggerAnalyticsEventOnToggle(!r,r?s-1:s+1),o.toggleClass("active"),this.toggleRequest=i({type:"PUT",url:a({filterId:l}),error:t.bind(this.onQuickFilterToggledError,this,o)}),this.refreshDashboard()},onQuickFilterToggledError:function(e,t){if(this.hideLoadingIcon(),404===t.status){var i=e.text();new r.Dialog({content:this.template.notFoundError({name:i})})}else n.call(null,t)},onProjectFilterToggled:function(e){this.cancelRequest(this.toggleRequest),this.cancelRequest(this.dashboardRequest),this.hideLoadingIcon(),this.triggerAnalyticsEventOnDisableAll("PERSONAL_FILTER_ENABLED"),this.disableAllQuickFilters(),("edit"===e||this.$projectFilterToggle.hasClass("edit-project-filter"))&&this.refreshDashboard()},onDisableAllQuickFiltersClicked:function(e){e.preventDefault(),this.cancelRequest(this.toggleRequest),this.cancelRequest(this.dashboardRequest),this.displayLoadingIcon(),this.triggerAnalyticsEventOnDisableAll("DISABLE_ALL_BUTTON_CLICKED"),this.disableAllQuickFilters(),this.refreshDashboard()},onChooseLinkClicked:function(e){e.preventDefault(),this.discoveryDialog&&this.discoveryDialog.close(),new f({header:"Choose your quick filters",helpLink:{url:l.getHelpLink("quick.filters.help"),label:"How quick filters work"},content:this.getChoiceDialogContent.bind(this),form:{serialize:function(){return this.$el.serializeArray().map(function(e){return e.value})},success:function(){setTimeout(function(){return window.location.reload(!0)},500)}}})},disableAllQuickFilters:function(){return this.$el.find(".quick-filter.active").removeClass("active"),i({type:"PUT",url:u})},deactivateProjectFilter:function(){"true"===this.$projectFilterToggle.attr("aria-pressed")&&(this.$projectFilterToggle.attr("aria-pressed","false"),this.$projectFilterToggle.html(widget.icons.icon({type:"filter"})+"&nbsp;"+"Personal filter is off"),i({type:"POST",url:AJS.contextPath()+"/toggleDashboardFilterInline.action",dataType:"html",contentType:"application/x-www-form-urlencoded",data:{filterEnabled:!1}}))},refreshDashboard:function(){var t=this;this.cancelRequest(this.dashboardRequest),this.displayLoadingIcon();var n=this.$el.find(".quick-filter.active"),o=n.toArray().map(function(t){return e(t).attr("data-filter-id")});return this.dashboardRequest=i({type:"POST",url:g,dataType:"html",contentType:"application/x-www-form-urlencoded",data:{filterIds:o}}),this.dashboardRequest.then(function(i){e(t.dashboard).replaceWith(i),t.discoveryDialog&&t.discoveryDialog.realign()}).always(this.hideLoadingIcon.bind(this))},cancelRequest:function(e){e&&4!==e.readyState&&e.abort()},displayLoadingIcon:function(){this.$iconContainer.find(".aui-icon-wait").length||this.$iconContainer.append(aui.icons.icon({size:"small",icon:"wait"}))},hideLoadingIcon:function(){var e=this.$iconContainer.find(".aui-icon-wait");e.length&&e.remove()},triggerAnalyticsEventOnToggle:function(e,t){AJS.trigger("analyticsEvent",{name:"bamboo.quick.filter.toggled",data:{enabling:e,totalActive:t}})},triggerAnalyticsEventOnDisableAll:function(e){AJS.trigger("analyticsEvent",{name:"bamboo.quick.filters.all.disabled",data:{reason:e}})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-repository-connect', location = '/feature/repository-connect/repository-connect.soy' */
// This file was automatically generated from repository-connect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.repository.connect.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.repository == 'undefined') { bamboo.feature.repository = {}; }
if (typeof bamboo.feature.repository.connect == 'undefined') { bamboo.feature.repository.connect = {}; }


bamboo.feature.repository.connect.result = function(opt_data, opt_ignored) {
  return '<div class="connection-result ' + soy.$$escapeHtml(opt_data.resultClass) + '"><div class="connection-result-icon"><span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span></div><div class="connection-result-message">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.repository.connect.result.soyTemplateName = 'bamboo.feature.repository.connect.result';
}


bamboo.feature.repository.connect.success = function(opt_data, opt_ignored) {
  return '' + bamboo.feature.repository.connect.result({resultClass: 'connection-result-success', iconClass: 'aui-icon-success', content: '<p>' + soy.$$escapeHtml("Connection successful") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.repository.connect.success.soyTemplateName = 'bamboo.feature.repository.connect.success';
}


bamboo.feature.repository.connect.errors = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param22 = '<p>' + soy.$$escapeHtml("We couldn\x27t connect to the repository.") + ' ' + ((opt_data.message) ? soy.$$escapeHtml(opt_data.message) : (opt_data.messages && opt_data.messages.length) ? soy.$$escapeHtml("Here\x27s what we got back:") : '') + '</p>';
  if (opt_data.messages && opt_data.messages.length) {
    param22 += '<div class="connection-result-error-message command-output">';
    var messageList35 = opt_data.messages;
    var messageListLen35 = messageList35.length;
    for (var messageIndex35 = 0; messageIndex35 < messageListLen35; messageIndex35++) {
      var messageData35 = messageList35[messageIndex35];
      param22 += '<pre>' + soy.$$changeNewlineToBr(soy.$$escapeHtml(messageData35)) + '</pre>';
    }
    param22 += '</div>';
  }
  var output = '' + bamboo.feature.repository.connect.result({resultClass: 'connection-result-error', iconClass: 'aui-icon-warning', content: param22});
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.repository.connect.errors.soyTemplateName = 'bamboo.feature.repository.connect.errors';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-repository-connect', location = '/feature/repository-connect/repository-connect.js' */
define("feature/repository-connect",["jquery","underscore","util/ajax","util/ajax-form","util/errors"],function(t,e,s,i,r){"use strict";return Backbone.View.extend({defaults:{timeout:60},initialize:function(t){this.options=e.defaults(t,this.defaults),this.templateNamespace=bamboo.feature.repository.connect,this.url=AJS.contextPath()+"/rest/api/latest/repository/testConnection",this.$button=this.$el,this.$container=this.$button.parent(),this.$form=this.$button.closest("form"),this.ajaxForm=new i(this.$form),this.registerEvents()},registerEvents:function(){this.$button.on("click",e.bind(this.testConnection,this))},triggerAnalyticsEvent:function(t){AJS.trigger("analyticsEvent",{name:"bamboo.repository.connection.test",data:{repositoryKey:t}})},testConnection:function(t){t.preventDefault(),this.$form.find(".error, .connection-result").remove(),this.$button.attr("disabled",!0),this.$button.siblings().remove(),this.$container.append(aui.icons.icon({size:"small",icon:"wait"}));var i=this.ajaxForm.serialize();this.triggerAnalyticsEvent(i.selectedRepository),s({url:this.url,type:"PUT",data:JSON.stringify(i),success:e.bind(this.handleSuccess,this),error:e.bind(this.handleError,this),timeout:1e3*this.options.timeout})},handleSuccess:function(t){this.$button.attr("disabled",!1),this.$button.siblings().remove();var e=t.connectionErrors;e&&e.length?this.displayErrors(e):this.displaySuccess()},handleError:function(t,e){if(this.$button.attr("disabled",!1),this.$button.siblings().remove(),"timeout"===e)this.displayError(AJS.format("Timed out after {0} seconds.",this.options.timeout));else switch(t.status){case 400:this.ajaxForm.settings.error(t),this.displayError("The details you provided were invalid.");break;case 401:var s=t.responseJSON?t.responseJSON.message:null,i="The request was unauthorised. Please reload the page and try again.";this.displayError(s||i);break;default:r.call(null,t)}},displaySuccess:function(){var t=this.templateNamespace.success();this.$container.append(t)},displayError:function(t){var e=this.templateNamespace.errors({message:t});this.$container.append(e)},displayErrors:function(t){var e=this.templateNamespace.errors({messages:t});this.$container.append(e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-constants', location = 'src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__1925ac36fad64f3d36f6e0c6dbf87479=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.INPUT_SUFFIX="-input";return a}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-toggle', location = 'src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__c4f71c15eb935221cf84c2bf2b79a050=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function j(a){a._canFireEventsNow&&a.dispatchEvent(new o.default("change",{bubbles:!0}))}function c(a){return a._input||(a._input=a.querySelector("input"))}function g(a,b){c(b).removeAttribute(a)}function k(a,b,d){c(b).setAttribute(a,d.newValue)}function h(a){return{removed:g.bind(this,a),fallback:k.bind(this,a)}}"use strict";__6fa2292fd3bc72aee8a14c7b4326719a;
__9736345f6947949dc28f91f6cd21cbe6;var f=__4512e4b5489c59d7921508536665c00f,i=e(__bd7207540b95ff683caa1d3c0bfcc3d7),p=e(__c220881a6424c0b144a85afc642e17bb),q=e(__3f6f6650e96d80fefaaf71feed8f822b),r=e(__2b1734744f1decec6fe4109762d4ff9c),s=e(__7acfe7fd38bbf8b5bf76cc953770b033),t=__1925ac36fad64f3d36f6e0c6dbf87479,o=e(__b4f5303c3f6b97d2fd503b5013ff8de7),l=__05bca48700965a7a8a29288c57bd100b,m=e(l),n={removed:function(a){g.call(this,"form",a);a._formId=null},fallback:function(a,b){k.call(this,"form",a,
b);a._formId=b.newValue}},u={removed:g.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+t.INPUT_SUFFIX)}};(0,s.default)("aui-toggle",{template:(0,r.default)('<input type="checkbox" class="aui-toggle-input assistive">','<span class="aui-toggle-view">','<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){c(a);(a._spinner||
(a._spinner=new m.default)).setAttribute("size",l.SIZE.SMALL.name);(0,i.default)(c(a)).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});c(a).addEventListener("keydown",function(b){a.busy&&b.keyCode===q.default.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&c(a).addEventListener("click",function(b){a.busy&&b.preventDefault()});a.hasAttribute("checked")&&c(a).setAttribute("checked",
"");a._canFireEventsNow=!0},attached:function(a){(0,p.default)(a).attributeExists("label")},events:{click:function(a,b){var d=c(a);!a.disabled&&(!a.busy&&b.target!==d)&&(d.checked=!d.checked);(0,f.setBooleanAttribute)(a,"checked",d.checked)}},attributes:{id:u,checked:{removed:function(a){c(a).checked=!1;j(a)},fallback:function(a){c(a).checked=!0;j(a)}},disabled:h("disabled"),form:n,name:h("name"),value:h("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",
b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){c(this).focus();return this},get checked(){return c(this).checked},set checked(a){c(this).checked!==a&&(c(this).checked=a,(0,f.setBooleanAttribute)(this,
"checked",a))},get disabled(){return c(this).disabled},set disabled(a){return(0,f.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){n.fallback.call(this,this,{newValue:a||null});return this.form},get name(){return c(this).name},set name(a){this.setAttribute("name",a);return a},get value(){return c(this).value},set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===c(this).getAttribute("aria-busy")},set busy(a){var b=
c(this),d=this._spinner||(this._spinner=new m.default);(0,f.setBooleanAttribute)(this,"busy",a);a?(b.setAttribute("aria-busy","true"),b.indeterminate=!0,this.checked?(b.classList.add("indeterminate-checked"),(0,i.default)(this.querySelector(".aui-toggle-tick")).append(d)):(0,i.default)(this.querySelector(".aui-toggle-cross")).append(d)):(b.classList.remove("indeterminate-checked"),b.indeterminate=!1,b.removeAttribute("aria-busy"),d.parentNode&&d.parentNode.removeChild(this._spinner));var e=!!a;this.id&&
Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=e});return a}}});return{}}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-repository-overrides', location = '/feature/repository-overrides/repository-overrides.js' */
define("feature/repository-overrides",["backbone","jquery","marionette","util/events"],function(e,i,r,o){"use strict";return r.ItemView.extend({template:!1,ui:function(){var e=this.getOption("selectors");return{overrideToggle:e.overrideToggle,overrideRepositoryLocation:e.overrideRepositoryLocation,serverConfiguration:e.serverConfiguration,inheritedConfiguration:e.inheritedConfiguration}},events:{"click @ui.overrideToggle":"onOverrideToggleClick"},onRender:function(){this.ui.inheritedConfiguration.find(":input").prop("disabled",!0);var e="true"===this.ui.overrideRepositoryLocation.val();this.showHideControls(e)},onOverrideToggleClick:function(){var e=!!this.ui.overrideToggle.attr("checked");this.ui.overrideRepositoryLocation.val(e),this.showHideControls(e),e||o.EventBus.trigger("repository:server:reset"),o.EventBus.trigger("repository:server:toggle-override")},showHideControls:function(e){this.ui.serverConfiguration.toggle(e),this.ui.inheritedConfiguration.toggle(!e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-agent-executable-pane', location = '/feature/agent-executable-pane/agent-executable-pane.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};define("feature/agent-executable-pane",["jquery","backbone"],function(e,t){"use strict";return t.View.extend({initialize:function(e){this.options=_extends({},e),this.loaded=!1,this.registerEvents(),this.isVisible()&&this.load()},registerEvents:function(){e('a[href="'+this.options.el+'"]').on("click",this.load.bind(this))},isVisible:function(){var e=this.$el.attr("aria-hidden");return!e||"false"===e},load:function(){var t=this;this.loaded||(this.loaded=!0,e.ajax({url:this.options.url}).done(function(e){return t.render(e)}))},render:function(e){this.$el.html(e)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-onboarding-dialog', location = '/feature/specs-onboarding-dialog/specs-onboarding-dialog.js' */
define("feature/specs-onboarding-dialog",["widget/dialog2","util/help-links"],function(e,o){"use strict";return e.extend({initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.repositoryId,n=t.requiresWebhook,s=t.bambooBaseUrl,r=t.bambooSpecsVersion,a=t.onClose,l=void 0===a?function(){}:a,c=t.buildProjectKey,b=t.webhookSetupDocumentationUrl,d=t.footerActionContent,u=void 0===d?" ":d,g=t.showSecuritySettingsHint;e.prototype.initialize.call(this,{id:"specs-onboarding-dialog",titleText:"Few more things...",content:bamboo.feature.specs.onboarding.dialog.content({repositoryId:i,requiresWebhook:n,bambooBaseUrl:s,bambooSpecsVersion:r,buildProjectKey:c,webhookSetupDocumentationUrl:b,specsReferenceUrl:o.getHelpLink("bamboo.specs.help"),showSecuritySettingsHint:g}),warning:!1,modal:!0,extraClasses:"",size:e.XLARGE,removeOnHide:!0,footerActionContent:u,buttons:[{onClick:function(e){l(e),e.hide(),AJS.$("div.aui-blanket").remove()},text:"Got it"}]})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-onboarding-dialog', location = '/feature/specs-onboarding-dialog/specs-onboarding-dialog.soy' */
// This file was automatically generated from specs-onboarding-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.specs.onboarding.dialog.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.specs == 'undefined') { bamboo.feature.specs = {}; }
if (typeof bamboo.feature.specs.onboarding == 'undefined') { bamboo.feature.specs.onboarding = {}; }
if (typeof bamboo.feature.specs.onboarding.dialog == 'undefined') { bamboo.feature.specs.onboarding.dialog = {}; }


bamboo.feature.specs.onboarding.dialog.content = function(opt_data, opt_ignored) {
  return '<div class="specs-onboarding-dialog__dialog-content">' + ((opt_data.requiresWebhook) ? '<h3>' + soy.$$escapeHtml("Step 1: Setup a webhook in your repository") + '</h3>' + bamboo.feature.specs.onboarding.dialog.showWebhookUrl({bambooBaseUrl: opt_data.bambooBaseUrl, repositoryId: opt_data.repositoryId, cssClass: 'dialog-content__code dialog-content__code--full-width', webhookSetupDocumentationUrl: opt_data.webhookSetupDocumentationUrl, showSecuritySettingsHint: opt_data.showSecuritySettingsHint}) : '') + '<h3>' + ((opt_data.requiresWebhook) ? soy.$$escapeHtml("Step 2:") + ' ' : '') + soy.$$escapeHtml("Start with Bamboo Specs") + '</h3><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Use Bamboo YAML Specs to quickly create simple plans. For advanced configuration options, use Java Specs. Whichever option you choose, we\x27\x27ve prepared customized snippets to get you started. For more information, see \x3ca href\x3d\x22{0}\x22\x3eBamboo Specs reference guide\x3c/a\x3e.",typeof (opt_data.specsReferenceUrl) === 'number' ? opt_data.specsReferenceUrl : soy.$$escapeHtml(opt_data.specsReferenceUrl)))) + '</p><div class="dialog-content__code-row"><div class="dialog-content__code-cell dialog-content__code-cell--left"><h5>' + soy.$$escapeHtml("JAVA SPECS") + '</h5><div class="dialog-content__code">' + bamboo.feature.specs.onboarding.dialog.mvnTemplate(opt_data) + '</div></div>' + ((opt_data.buildProjectKey) ? '<div class="dialog-content__code-cell dialog-content__code-cell--right"><h5>' + soy.$$escapeHtml("YAML SPECS") + '</h5><div class="dialog-content__code">' + bamboo.feature.specs.onboarding.dialog.yamlTemplate(opt_data) + '</div></div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.content.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.content';
}


bamboo.feature.specs.onboarding.dialog.showWebhookUrl = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eEnable webhooks\x3c/a\x3e for your repository so that Bamboo knows about new commits. Use this URL as the destination for the webhook:",typeof (opt_data.webhookSetupDocumentationUrl) === 'number' ? opt_data.webhookSetupDocumentationUrl : soy.$$escapeHtml(opt_data.webhookSetupDocumentationUrl)))) + '</p><div class="' + soy.$$escapeHtml(opt_data.cssClass) + '">' + soy.$$escapeHtml(opt_data.bambooBaseUrl) + '/rest/api/latest/repository/scan?repositoryId=' + soy.$$escapeHtml(opt_data.repositoryId) + '</div><div>' + aui.icons.icon({icon: 'info', useIconFont: true}) + ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("Webhooks must be triggered by HTTP \x3cspan class\x3d\x22inlineCode\x22\x3ePOST\x3c/span\x3e method and the \x3cspan class\x3d\x22inlineCode\x22\x3eContent-Type\x3c/span\x3e header should be set to \x3cspan class\x3d\x22inlineCode\x22\x3eapplication/json\x3c/span\x3e.")) + '</div>' + ((opt_data.showSecuritySettingsHint) ? '<div>' + aui.icons.icon({icon: 'info', useIconFont: true}) + ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("The anonymous access is disabled for webhooks. To enable it, go to \x3cb\x3eBamboo administration\x3c/b\x3e \x3e \x3cb\x3eSecurity settings\x3c/b\x3e.")) + '</div>' : '');
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.showWebhookUrl.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.showWebhookUrl';
}


bamboo.feature.specs.onboarding.dialog.mvnTemplate = function(opt_data, opt_ignored) {
  return 'mvn archetype:generate -B \\\n  -DarchetypeGroupId=com.atlassian.bamboo \\\n  -DarchetypeArtifactId=bamboo-specs-archetype \\\n  -DarchetypeVersion=' + soy.$$escapeHtml(opt_data.bambooSpecsVersion) + ' \\\n  -DgroupId=com.atlassian.bamboo \\\n  -DartifactId=bamboo-specs \\\n  -Dversion=1.0.0-SNAPSHOT \\\n  -Dpackage=tutorial \\\n  -Dtemplate=minimal';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.mvnTemplate.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.mvnTemplate';
}


bamboo.feature.specs.onboarding.dialog.yamlTemplate = function(opt_data, opt_ignored) {
  return 'version: 2\nplan:\n  project-key: ' + soy.$$escapeHtml(opt_data.buildProjectKey) + '\n  key: PLAN\n  name: My Plan\n\nstages:\n  - Stage 1:\n      jobs:\n        - Job 1\n\nJob 1:\n  tasks:\n    - script:\n        - echo \'Hello from YAML Specs\'';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.yamlTemplate.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.yamlTemplate';
}


bamboo.feature.specs.onboarding.dialog.dontShowAgain = function(opt_data, opt_ignored) {
  return '<div class="field-group dont-show__content"><div class="checkbox"><input type="checkbox" name="dontshow" value="true" id="dontshow" class="checkbox"/><label for="dontshow" id="label_dontshow">' + soy.$$escapeHtml("Don\x27t show this again") + '</label></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.onboarding.dialog.dontShowAgain.soyTemplateName = 'bamboo.feature.specs.onboarding.dialog.dontShowAgain';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-admin-panel-header', location = '/feature/admin-panel-header/admin-panel-header.js' */
define("feature/admin-panel-header",["marionette"],function(e){"use strict";return e.ItemView.extend({template:bamboo.feature.admin.panel.header.content,ui:{searchLink:"#admin-panel-search-link"},events:{"click @ui.searchLink":"openSearch"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.showSearch=e.showSearch},serializeData:function(){return{showSearch:this.showSearch&&BAMBOO.ACTIONSDIALOG&&BAMBOO.ACTIONSDIALOG.showDialog}},openSearch:function(e){e.preventDefault(),BAMBOO.ACTIONSDIALOG.showDialog("Administration")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-admin-panel-header', location = '/feature/admin-panel-header/admin-panel-header.soy' */
// This file was automatically generated from admin-panel-header.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.admin.panel.header.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.admin == 'undefined') { bamboo.feature.admin = {}; }
if (typeof bamboo.feature.admin.panel == 'undefined') { bamboo.feature.admin.panel = {}; }
if (typeof bamboo.feature.admin.panel.header == 'undefined') { bamboo.feature.admin.panel.header = {}; }


bamboo.feature.admin.panel.header.content = function(opt_data, opt_ignored) {
  return '<ol class="aui-nav aui-nav-horizontal">' + ((opt_data.showSearch) ? '<li><h1>' + soy.$$escapeHtml("Administration") + '</h1></li><li id="admin-panel-search"><a id="admin-panel-search-link" href="#" class="aui-button aui-button-subtle">' + aui.icons.icon({icon: 'search', useIconFont: true}) + '<span>' + soy.$$escapeHtml("Search Bamboo admin") + '</span></a></li>' : '<li><h1>' + soy.$$escapeHtml("Bamboo administration") + '</h1></li>') + '</ol>';
};
if (goog.DEBUG) {
  bamboo.feature.admin.panel.header.content.soyTemplateName = 'bamboo.feature.admin.panel.header.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-permissions', location = '/page/permissions/permissions.js' */
function _defineProperty(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};define("page/permissions",["underscore","backbone","widget/permissions","feature/config-read-only"],function(e,n,s,i){"use strict";var t,o={user:"user",group:"group",role:"role"},r={anonymous:"ANONYMOUS",loggedIn:"LOGGED_IN"},a=(t={},_defineProperty(t,r.anonymous,"Anonymous users"),_defineProperty(t,r.loggedIn,"Logged in users"),t),p=["READ"],l=["baseEndpoint","permissions","dependencies","editablePermissions","usersPermissions","anonymousPermissions","analyticsEntityType","readOnly"];return n.View.extend({template:function(){var e=this.hasRolePermissions();return bamboo.page.permissions.content({hasRolePermissions:e})},initialize:function(n){this.options=e.pick(n,l),this.validate(),this.appendDefaults(),this.options.readOnly&&i.makeReadOnly(this.$el)},render:function(){this.$el.html(this.template()),this.showPermissions({entryType:o.user,container:this.$el.find(".singlePagePermissions__users"),title:"User access",searchPlaceholder:"Add users",notFoundText:"No users have been given explicit permissions.",formatEntity:function(e){return e.fullName},formatSearchResult:function(e){return e.fullName+" - "+e.email},canAdd:!this.options.readOnly,canRemove:!this.options.readOnly}),this.showPermissions({entryType:o.group,container:this.$el.find(".singlePagePermissions__groups"),title:"Group access",searchPlaceholder:"Add groups",notFoundText:"No groups have been given explicit permissions.",canAdd:!this.options.readOnly,canRemove:!this.options.readOnly}),this.hasRolePermissions()&&this.showPermissions({entryType:o.role,container:this.$el.find(".singlePagePermissions__roles"),title:"Other",canAdd:!1,canRemove:!1,columnPredicate:this.rolePermissionPredicate.bind(this),formatEntity:function(e){return a[e.name]}})},hasRolePermissions:function(){return this.options.usersPermissions||this.options.anonymousPermissions},rolePermissionPredicate:function(e,n){var s=void 0;switch(e){case r.loggedIn:s=this.options.usersPermissions;break;case r.anonymous:s=this.options.anonymousPermissions;break;default:s=[]}return s.indexOf(n.permission)!==-1},ensureOptionsDefined:function(e,n){n.forEach(function(n){if(void 0===e[n])throw new Error(AJS.format('option "{0}" is required',n))})},ensurePropertiesAreNotEmpty:function(e,n){n.forEach(function(n){if(0===e[n].length)throw new Error(AJS.format('option "{0}" cannot be empty',n))})},validate:function(){var e=this;this.ensureOptionsDefined(this.options,["baseEndpoint","permissions"]),this.ensurePropertiesAreNotEmpty(this.options,["permissions"]),this.options.permissions.forEach(function(n){e.ensureOptionsDefined(n,["name","label"])})},appendDefaults:function(){this.options.permissions.forEach(function(n){return e.defaults(n,{editable:!0})});var n=this.getPermissionNames();e.defaults(this.options,{editablePermissions:n,usersPermissions:n,anonymousPermissions:n.filter(function(e){return p.indexOf(e)!==-1}),dependencies:{}})},getPermissionNames:function(){return this.options.permissions.map(function(e){return e.name})},getDefaultPreset:function(){var e=this;return{label:"Select permissions",items:this.options.permissions.filter(function(n){return e.options.editablePermissions.indexOf(n.name)!==-1}).map(function(e){return{text:e.label,permissions:[e.name]}})}},getColumns:function(){return this.options.permissions.map(function(e){return{label:e.label,permission:e.name}})},showPermissions:function(e){e=_extends({canAdd:!0,canRemove:!0},e);var n=!!this.options.editablePermissions.length,i=e.canAdd&&n,t=e.canRemove&&n,o=this.options.baseEndpoint,r=e.entryType,a=this.options.analyticsEntityType?{entityType:this.options.analyticsEntityType,entryType:r.toUpperCase()}:void 0;new s({container:e.container,endpoint:o+"/"+r+"s",controls:this.options.editablePermissions,dependencies:this.options.dependencies,columns:this.getColumns(),columnPredicate:e.columnPredicate,presets:i?[this.getDefaultPreset()]:[],searchEndpoint:o+"/available-"+r+"s",searchPlaceholder:e.searchPlaceholder,title:e.title,notFoundText:e.notFoundText,canAdd:i,canRemove:t,formatEntity:e.formatEntity,formatSearchResult:e.formatSearchResult,analytics:a})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-permissions', location = '/page/permissions/permissions.soy' */
// This file was automatically generated from permissions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.permissions.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.permissions == 'undefined') { bamboo.page.permissions = {}; }


bamboo.page.permissions.content = function(opt_data, opt_ignored) {
  return '<div class="singlePagePermissions"><div class="singlePagePermissions__users"></div><div class="singlePagePermissions__groups"></div>' + ((opt_data.hasRolePermissions) ? '<div class="singlePagePermissions__roles"></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bamboo.page.permissions.content.soyTemplateName = 'bamboo.page.permissions.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/base/base.soy' */
// This file was automatically generated from base.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.base = function(opt_data, opt_ignored) {
  var output = '<section id="content" role="main">' + ((opt_data.headerImageContent && opt_data.headerImageContent != '' || opt_data.headerMainContent && opt_data.headerMainContent != '' || opt_data.headerActionsContent && opt_data.headerActionsContent != '' || opt_data.headerActionsButtons && opt_data.headerActionsButtons != '') ? aui.page.pageHeader({content: '' + ((opt_data.headerImageContent && opt_data.headerImageContent != '') ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + ((opt_data.headerMainContent && opt_data.headerMainContent != '') ? aui.page.pageHeaderMain({content: opt_data.headerMainContent}) : '') + ((opt_data.headerActionsContent && opt_data.headerActionsContent != '' || opt_data.headerActionsButtons && opt_data.headerActionsButtons != '') ? aui.page.pageHeaderActions({content: '' + ((opt_data.headerActionsContent && opt_data.headerActionsContent != '') ? soy.$$filterNoAutoescape(opt_data.headerActionsContent) : '') + ((opt_data.headerActionsButtons && opt_data.headerActionsButtons != '') ? aui.buttons.buttons({extraClasses: 'aui-dropdown2-trigger-group', content: opt_data.headerActionsButtons}) : '')}) : '')}) : '') + ((opt_data.headerExtraContent && opt_data.headerExtraContent != '') ? '<div class="bamboo-page-header-extra">' + soy.$$filterNoAutoescape(opt_data.headerExtraContent) + '</div>' : '') + ((opt_data.navItems && opt_data.navItems.length) ? bamboo.widget.nav.horizontal({items: opt_data.navItems, historyXhrDisabled: opt_data.historyXhrDisabled}) : '');
  var param41 = '' + ((opt_data.pageNavContent && opt_data.pageNavContent != '') ? aui.page.pagePanelNav({extraClasses: opt_data.pageNavClass, content: opt_data.pageNavContent}) : '') + ((opt_data.pageItemContent && opt_data.pageItemContent != '') ? aui.page.pagePanelItem({extraClasses: opt_data.pageItemClass, content: opt_data.pageItemContent}) : '') + aui.page.pagePanelContent({content: opt_data.content, extraClasses: opt_data.contentClass});
  if (opt_data.pageSidebarContent && opt_data.pageSidebarContent != '' || opt_data.pageHelpPanels && opt_data.pageHelpPanels.length) {
    var param58 = '' + ((opt_data.pageSidebarContent && opt_data.pageSidebarContent != '') ? soy.$$filterNoAutoescape(opt_data.pageSidebarContent) : '');
    if (opt_data.pageHelpPanels && opt_data.pageHelpPanels.length) {
      var pageHelpPanelList65 = opt_data.pageHelpPanels;
      var pageHelpPanelListLen65 = pageHelpPanelList65.length;
      for (var pageHelpPanelIndex65 = 0; pageHelpPanelIndex65 < pageHelpPanelListLen65; pageHelpPanelIndex65++) {
        var pageHelpPanelData65 = pageHelpPanelList65[pageHelpPanelIndex65];
        param58 += bamboo.widget.help.panel(pageHelpPanelData65);
      }
    }
    param41 += aui.page.pagePanelSidebar({extraClasses: opt_data.pageSidebarClass, content: param58});
  }
  output += aui.page.pagePanel({extraClasses: opt_data.pagePanelClass, content: param41});
  output += ((opt_data.pageFooterContent && opt_data.pageFooterContent != '') ? '<footer class="bamboo-page-footer">' + soy.$$filterNoAutoescape(opt_data.pageFooterContent) + '</footer>' : '') + '</section>';
  return output;
};
if (goog.DEBUG) {
  bamboo.layout.base.soyTemplateName = 'bamboo.layout.base';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/focused/focused.soy' */
// This file was automatically generated from focused.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.focused = function(opt_data, opt_ignored) {
  return '' + bamboo.layout.base(soy.$$augmentMap(opt_data, {headerActionsContent: '' + ((opt_data.progressTrackerSteps && opt_data.progressTrackerSteps.length) ? aui.progressTracker.progressTracker({isInverted: true, steps: opt_data.progressTrackerSteps}) : '')}));
};
if (goog.DEBUG) {
  bamboo.layout.focused.soyTemplateName = 'bamboo.layout.focused';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/dashboard/dashboard.soy' */
// This file was automatically generated from dashboard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.dashboard = function(opt_data, opt_ignored) {
  return '' + bamboo.layout.base(soy.$$augmentMap(opt_data, {headerMainContent: '<h1 id="dashboard-instance-name">' + soy.$$escapeHtml("Build dashboard") + '</h1>'}));
};
if (goog.DEBUG) {
  bamboo.layout.dashboard.soyTemplateName = 'bamboo.layout.dashboard';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/plan/plan.soy' */
// This file was automatically generated from plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.plan = function(opt_data, opt_ignored) {
  return '' + bamboo.layout.base(soy.$$augmentMap(opt_data, {headerActionsContent: '' + ((opt_data.planStatusHistory) ? bamboo.widget.planStatusHistory.container(opt_data.planStatusHistory) : '') + ((opt_data.headerActionsContent) ? soy.$$filterNoAutoescape(opt_data.headerActionsContent) : '')}));
};
if (goog.DEBUG) {
  bamboo.layout.plan.soyTemplateName = 'bamboo.layout.plan';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/layout/project/project.soy' */
// This file was automatically generated from project.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.layout.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.layout == 'undefined') { bamboo.layout = {}; }


bamboo.layout.projectActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.buttons({content: '' + aui.buttons.button({text: ' ' + "Project wallboard", tagName: 'a', id: 'projectWallboardButton', iconClass: 'icon icon-wallboard', iconType: 'custom', extraAttributes: {href: "" + '/telemetry.action?filter=project&projectKey=' + opt_data.projectKey}})}) + ((opt_data.hasAdminPermission) ? aui.buttons.buttons({content: '' + aui.buttons.button({text: ' ' + "Project settings", tagName: 'a', id: 'projectSettingsButton', iconClass: 'aui-icon-small aui-iconfont-configure', iconType: 'aui', extraAttributes: {href: "" + '/project/admin/config/editProjectDetails.action?projectKey=' + opt_data.projectKey}})}) : '');
};
if (goog.DEBUG) {
  bamboo.layout.projectActions.soyTemplateName = 'bamboo.layout.projectActions';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/page/admin/overview.soy' */
// This file was automatically generated from overview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.admin.overview.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.admin == 'undefined') { bamboo.page.admin = {}; }
if (typeof bamboo.page.admin.overview == 'undefined') { bamboo.page.admin.overview = {}; }


bamboo.page.admin.overview.overview = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var viewServerCapabilities__soy3 = "" + '/admin/agent/configureSharedLocalCapabilities.action';
  output += bamboo.page.admin.overview.welcomeItems({content: '' + bamboo.page.admin.overview.welcomeItem({content: AJS.format("\x3ca href\x3d\x22{0}\x22\x3eChange information\x3c/a\x3e you supplied when Bamboo was installed.","" + '/admin/globalConfiguration.action')}) + ((opt_data.hasGlobalAdminPermission) ? ((! opt_data.hasBuilders && ! opt_data.hasJdks) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has failed to detect any \x3ca href\x3d\x22{0}\x22\x3eexecutables or JDK\x27\x27s\x3c/a\x3e available on your Bamboo server.  You will need to manually \x3ca href\x3d\x22{0}\x22\x3econfigure\x3c/a\x3e at least one executable (such as Ant, Maven, Maven 2 or scripts) before you can run any plans.",viewServerCapabilities__soy3)}) : (! opt_data.hasBuilders) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has detected a \x3ca href\x3d\x22{0}\x22\x3eJDK\x3c/a\x3e on your Bamboo server, but has failed to detect any \x3ca href\x3d\x22{0}\x22\x3eexecutables\x3c/a\x3e.  You need to manually \x3ca href\x3d\x22{0}\x22\x3econfigure\x3c/a\x3e at least one executable (such as Ant, Maven, Maven 2 or scripts) before you can run any plans.",viewServerCapabilities__soy3)}) : (! opt_data.hasJdks) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has detected \x3ca href\x3d\x22{0}\x22\x3e{1,choice,1#one executable|1\x3c{1} executables}\x3c/a\x3e on your server, but has failed to detect a \x3ca href\x3d\x22{0}\x22\x3eJDK\x3c/a\x3e.  You may need to manually \x3ca href\x3d\x22{0}\x22\x3econfigure\x3c/a\x3e these before you can run any plans.",viewServerCapabilities__soy3,opt_data.buildersSize ? opt_data.buildersSize : 0)}) : bamboo.page.admin.overview.welcomeItem({content: AJS.format("Bamboo has detected a \x3ca href\x3d\x22{0}\x22\x3eJDK\x3c/a\x3e and  \x3ca href\x3d\x22{0}\x22\x3e{1,choice,1#one executable|1\x3c{1} executables}\x3c/a\x3e on your server.  You may wish to \x3ca href\x3d\x22{0}\x22\x3eedit\x3c/a\x3e these or configure others.",viewServerCapabilities__soy3,opt_data.buildersSize ? opt_data.buildersSize : 0)})) + bamboo.page.admin.overview.welcomeItem({content: AJS.format("Let Bamboo know about your \x3ca href\x3d\x22{0}\x22\x3eemail server\x3c/a\x3e and \x3ca href\x3d\x22{1}\x22\x3einstant messaging server\x3c/a\x3e for build notifications.","" + '/admin/viewMailServer.action',"" + '/admin/instantmessagingserver/viewInstantMessagingServer.action')}) : '') + ((! opt_data.isAllowedRemoteAgents) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Configure your \x3ca href\x3d\x22{0}\x22\x3elocal agents\x3c/a\x3e and their capabilities.","" + '/admin/agent/configureAgents!doDefault.action')}) : (opt_data.canManageElasticBamboo) ? bamboo.page.admin.overview.welcomeItem({content: AJS.format("Configure your \x3ca href\x3d\x22{0}\x22\x3eagents and their capabilities\x3c/a\x3e or set up \x3ca href\x3d\x22{1}\x22\x3eElastic Bamboo\x3c/a\x3e to get your builds running in the Amazon Elastic Compute Cloud (EC2).","" + '/admin/agent/configureAgents!doDefault.action',"" + '/admin/elastic/viewElasticConfig.action')}) : bamboo.page.admin.overview.welcomeItem({content: AJS.format("Configure your \x3ca href\x3d\x22{0}\x22\x3eagents and their capabilities\x3c/a\x3e.","" + '/admin/agent/configureAgents!doDefault.action')})) + bamboo.page.admin.overview.welcomeItem({content: AJS.format("Add more \x3ca href\x3d\x22{0}\x22\x3eusers\x3c/a\x3e, \x3ca href\x3d\x22{1}\x22\x3egroups\x3c/a\x3e and \x3ca href\x3d\x22{2}\x22\x3emanage permissions\x3c/a\x3e.","" + '/admin/user/viewUsers.action',"" + '/admin/group/viewGroups.action',"" + '/admin/configureGlobalPermissions.action')}) + bamboo.page.admin.overview.welcomeItem({content: AJS.format("\x3ca href\x3d\x22{0}\x22\x3eSet build expiry\x3c/a\x3e, \x3ca href\x3d\x22{1}\x22\x3edelete plans\x3c/a\x3e or \x3ca href\x3d\x22{2}\x22\x3eedit plan permissions\x3c/a\x3e.","" + '/admin/buildExpiry.action',"" + '/admin/deleteBuilds.action',"" + '/admin/chooseBuildsToBulkEditPermissions.action')})});
  return output;
};
if (goog.DEBUG) {
  bamboo.page.admin.overview.overview.soyTemplateName = 'bamboo.page.admin.overview.overview';
}


bamboo.page.admin.overview.welcomeItems = function(opt_data, opt_ignored) {
  return '' + ((opt_data.content != '') ? '<ul>' + soy.$$filterNoAutoescape(opt_data.content) + '</ul>' : '');
};
if (goog.DEBUG) {
  bamboo.page.admin.overview.welcomeItems.soyTemplateName = 'bamboo.page.admin.overview.welcomeItems';
}


bamboo.page.admin.overview.welcomeItem = function(opt_data, opt_ignored) {
  return '<li>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  bamboo.page.admin.overview.welcomeItem.soyTemplateName = 'bamboo.page.admin.overview.welcomeItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/jira-issue-list/jira-issue-list.soy' */
// This file was automatically generated from jira-issue-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.jiraIssueList.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.jiraIssueList == 'undefined') { bamboo.feature.jiraIssueList = {}; }


bamboo.feature.jiraIssueList.jiraIssueList = function(opt_data, opt_ignored) {
  var output = '<table class="aui jira-issues' + ((opt_data.loading) ? ' loading' : '') + '"><thead><tr><th colspan="2" class="issue">Issue</th><th class="description">Description</th>' + ((! opt_data.hideStatus) ? '<th class="status">Status</th>' : '') + '</tr></thead>' + ((opt_data.issuesCount > opt_data.maxIssues) ? '<tfoot><tr><td colspan="' + soy.$$escapeHtml(opt_data.hideStatus ? 3 : 4) + '"><a href="' + soy.$$escapeHtml(opt_data.jiraTabUrl) + '">' + soy.$$escapeHtml(opt_data.issuesCount - opt_data.maxIssues + ' more issue' + (opt_data.issuesCount - opt_data.maxIssues > 1 ? 's' : '')) + '&hellip;</a></td></tr></tfoot>' : '') + '<tbody>';
  var issueList22 = opt_data.issues;
  var issueListLen22 = issueList22.length;
  for (var issueIndex22 = 0; issueIndex22 < issueListLen22; issueIndex22++) {
    var issueData22 = issueList22[issueIndex22];
    output += (issueData22.url && issueData22.url.href && issueData22.key && issueData22.summary) ? bamboo.feature.jiraIssueList.jiraIssueListItem({key: issueData22.key, url: issueData22.url, summary: issueData22.summary, issueType: issueData22.issueType ? issueData22.issueType : opt_data.defaultIssueType, iconUrl: issueData22.iconUrl ? issueData22.iconUrl : opt_data.defaultIssueIconUrl, status: issueData22.status, statusClass: issueData22.statusClass, hideStatus: opt_data.hideStatus}) : bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection({key: issueData22.issueKey ? issueData22.issueKey : issueData22.key, hideStatus: opt_data.hideStatus});
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueList.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueList';
}


bamboo.feature.jiraIssueList.jiraIssueListItem = function(opt_data, opt_ignored) {
  return '<tr data-issue-key="' + opt_data.key + '"><td class="type"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '" title="' + soy.$$escapeHtml("View this issue") + '"><img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issueType) + '" /></a></td><td class="key"><a href="' + soy.$$escapeHtml(opt_data.url.href) + '">' + opt_data.key + '</a></td><td class="description">' + soy.$$escapeHtml(opt_data.summary) + '</td>' + ((! opt_data.hideStatus) ? '<td class="status"><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItem.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItem';
}


bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection = function(opt_data, opt_ignored) {
  return '<tr><td class="type">' + widget.icons.icon({type: 'jiraissue-unknown', text: 'Unknown Issue Type', showTitle: true}) + '</td><td class="key">' + soy.$$escapeHtml(opt_data.key) + '</td><td' + ((! opt_data.hideStatus) ? ' colspan="2"' : '') + ' class="details-error"><span>' + soy.$$escapeHtml("Could not obtain issue details from Jira") + '</span></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection.soyTemplateName = 'bamboo.feature.jiraIssueList.jiraIssueListItemNoConnection';
}


bamboo.feature.jiraIssueList.singleIssue = function(opt_data, opt_ignored) {
  return '<span class="jira-issue"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '><a href="' + ((opt_data.url.href) ? soy.$$escapeHtml(opt_data.url.href) : soy.$$escapeHtml(opt_data.url)) + '" title="' + soy.$$escapeHtml("View this issue") + ' (' + soy.$$escapeHtml(opt_data.issueType) + ')" style="background-image: url(' + soy.$$escapeHtml(opt_data.iconUrl) + ');">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="description">' + soy.$$escapeHtml(opt_data.summary) + '</span><span class="status-lozenge lozenge-subtle ' + ((opt_data.statusClass) ? 'status-' + opt_data.statusClass : '') + '" title="' + soy.$$escapeHtml(opt_data.status) + '">' + soy.$$escapeHtml(opt_data.status) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssue.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssue';
}


bamboo.feature.jiraIssueList.singleIssueLoading = function(opt_data, opt_ignored) {
  return '<span class="single-issue-loading"><a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueLoading.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueLoading';
}


bamboo.feature.jiraIssueList.singleIssueOAuth = function(opt_data, opt_ignored) {
  return '' + bamboo.feature.jiraIssueList.singleIssueRetrievalError({key: opt_data.key, keyLink: opt_data.keyLink, errorDetails: '' + bamboo.feature.jiraIssueList.linkedIssueOAuth({authenticationRedirectUrl: opt_data.authenticationRedirectUrl, authenticationInstanceName: opt_data.authenticationInstanceName, reason: 'to see issue details'})});
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueOAuth';
}


bamboo.feature.jiraIssueList.singleIssueRetrievalError = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="single-issue-retrieval-error"' + ((opt_data.key) ? ' data-key="' + opt_data.key + '"' : '') + '>' + ((opt_data.key) ? '<a' + ((opt_data.keyLink) ? ' href="' + soy.$$escapeHtml(opt_data.keyLink) + '"' : '') + '>' + opt_data.key + '</a>' : '') + '<span class="error-message' + ((! opt_data.errorDetails) ? ' unspecified' : '') + '">' + ((opt_data.errorDetails) ? soy.$$filterNoAutoescape(opt_data.errorDetails) : soy.$$escapeHtml("Could not obtain issue details from Jira")) + '</span></span>';
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.singleIssueRetrievalError.soyTemplateName = 'bamboo.feature.jiraIssueList.singleIssueRetrievalError';
}


bamboo.feature.jiraIssueList.linkedIssueOAuth = function(opt_data, opt_ignored) {
  return '<a class="oauth-init" href="' + soy.$$escapeHtml(opt_data.authenticationRedirectUrl) + '">Authenticate</a> ' + ((opt_data.authenticationInstanceName) ? ' with ' + soy.$$escapeHtml(opt_data.authenticationInstanceName) : '') + ' ' + soy.$$escapeHtml(opt_data.reason);
};
if (goog.DEBUG) {
  bamboo.feature.jiraIssueList.linkedIssueOAuth.soyTemplateName = 'bamboo.feature.jiraIssueList.linkedIssueOAuth';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/comments/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.comments.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.comments == 'undefined') { bamboo.feature.comments = {}; }


bamboo.feature.comments.commentList = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.comments.length > 0) {
    output += ((opt_data.showTopLevelHeading) ? '<h2>' + soy.$$escapeHtml("Comments") + '</h2>' : '') + '<ol>';
    var commentList11 = opt_data.comments;
    var commentListLen11 = commentList11.length;
    for (var commentIndex11 = 0; commentIndex11 < commentListLen11; commentIndex11++) {
      var commentData11 = commentList11[commentIndex11];
      output += bamboo.feature.comments.commentListItem({id: commentData11.id, comment: commentData11.comment, lastModificationDate: commentData11.lastModificationDate, prettyLastModificationDate: commentData11.prettyLastModificationDate, avatar: commentData11.avatar, user: commentData11.user, userDisplayName: commentData11.userDisplayName, showOperations: opt_data.showOperations, headingLevel: opt_data.headingLevel ? opt_data.headingLevel : 'h3', result: commentData11.result});
    }
    output += '</ol>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.comments.commentList.soyTemplateName = 'bamboo.feature.comments.commentList';
}


bamboo.feature.comments.commentListItem = function(opt_data, opt_ignored) {
  return '<li><img src="' + soy.$$escapeHtml(opt_data.avatar ? opt_data.avatar : "" + '/images/icons/useravatar.png') + '" class="avatar"><' + soy.$$escapeHtml(opt_data.headingLevel ? opt_data.headingLevel : 'h3') + '>' + ((opt_data.user) ? '<a href="' + soy.$$escapeHtml("" + '/browse/user/' + opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.userDisplayName) + '</a>' : soy.$$escapeHtml("Anonymous user")) + '</' + soy.$$escapeHtml(opt_data.headingLevel ? opt_data.headingLevel : 'h3') + '><p>' + soy.$$filterNoAutoescape(opt_data.comment) + '</p>' + ((opt_data.showOperations) ? '<div class="ops">' + ((opt_data.result) ? '<a class="delete mutative" href="' + soy.$$escapeHtml("" + '/build/ajax/deleteComment.action?commentId=' + opt_data.id + '&buildKey=' + opt_data.result.buildKey + '&buildNumber=' + opt_data.result.buildNumber) + '" title="' + soy.$$escapeHtml("Permanently delete this comment?") + '">' + soy.$$escapeHtml("Delete") + '</a>' : '<a class="delete mutative" href="' + soy.$$escapeHtml("" + '/deploy/deleteComment.action?commentId=' + opt_data.id) + '" title="' + soy.$$escapeHtml("Permanently delete this comment?") + '">' + soy.$$escapeHtml("Delete") + '</a>') + '</div>' : '') + '<time datetime="' + soy.$$escapeHtml(opt_data.lastModificationDate) + '" title="' + soy.$$escapeHtml(opt_data.lastModificationDate) + '">' + soy.$$escapeHtml(AJS.format("about {0} ago",opt_data.prettyLastModificationDate)) + '</time></li>';
};
if (goog.DEBUG) {
  bamboo.feature.comments.commentListItem.soyTemplateName = 'bamboo.feature.comments.commentListItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/variables/variables.soy' */
// This file was automatically generated from variables.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.variables.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.variables == 'undefined') { bamboo.feature.variables = {}; }


bamboo.feature.variables.variablesTable = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param28 = '' + ((! opt_data.hideAddHeader) ? '<tr class="add-variable"><td>' + bamboo.feature.variables.selectOrInput({id: 'variableKey', options: opt_data.availableVariables}) + '</td><td>' + bamboo.feature.variables.selectOrInput({id: 'variableValue', value: opt_data.firstAvailableVariable}) + '</td><td class="operations">' + aui.form.submit({text: "Add", id: ''}) + '</td></tr>' : '');
  if (opt_data.variables) {
    var variableList46 = opt_data.variables;
    var variableListLen46 = variableList46.length;
    for (var variableIndex46 = 0; variableIndex46 < variableListLen46; variableIndex46++) {
      var variableData46 = variableList46[variableIndex46];
      param28 += bamboo.feature.variables.variablesTableRow(soy.$$augmentMap(variableData46, {inlineEdit: opt_data.inlineEdit, availableVariables: opt_data.availableVariables, deleteVariableUrl: opt_data.deleteVariableUrl}));
    }
  }
  var output = '' + aui.table({extraClasses: 'variables-list', columnsContent: '<colgroup><col width="30%" /><col width="*" /><col width="60" /></colgroup>', theadContent: '<tr><th>' + soy.$$escapeHtml("Variable name") + '</th><th>' + soy.$$escapeHtml("Value") + '</th><th class="operations"><span class="assistive">' + soy.$$escapeHtml("Operations") + '</span></th></tr>', tfootContent: '' + ((opt_data.showOverrideFooter) ? '<tr>' + ((opt_data.userCanOverrideVariables) ? '<td colspan="3"><a class="aui-button aui-button-link aui-style variables-override">' + soy.$$escapeHtml("Override a variable") + '</a></td>' : '<td colspan="3"><span class="variables-override">' + soy.$$escapeHtml("Build variables override is forbidden") + '</span></td>') + '</tr>' : ''), content: param28});
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTable.soyTemplateName = 'bamboo.feature.variables.variablesTable';
}


bamboo.feature.variables.variablesTableRow = function(opt_data, opt_ignored) {
  return '<tr data-variable-id="' + soy.$$escapeHtml(opt_data.id) + '"><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables}) : bamboo.feature.variables.selectOrInput({id: 'key_' + opt_data.id, value: opt_data.key, options: opt_data.availableVariables})) + '</td><td>' + ((opt_data.inlineEdit) ? bamboo.feature.variables.inPlaceEditField({id: 'value_' + opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput({id: 'value_' + opt_data.id, value: opt_data.key})) + '</td><td class="operations"><a id="deleteVariable_' + soy.$$escapeHtml(opt_data.id) + '" class="delete-variable"' + ((opt_data.deleteVariableUrl) ? ' href="' + soy.$$escapeHtml(opt_data.deleteVariableUrl) + '"' : '') + ' title="' + soy.$$escapeHtml("Delete") + '" tabindex="-1">' + aui.icons.icon({icon: 'remove', useIconFont: true, accessibilityText: "Delete", extraAttributes: {title: "Delete"}}) + '</a></td></tr>';
};
if (goog.DEBUG) {
  bamboo.feature.variables.variablesTableRow.soyTemplateName = 'bamboo.feature.variables.variablesTableRow';
}


bamboo.feature.variables.inPlaceEditField = function(opt_data, opt_ignored) {
  return '<span class="inline-edit-view"' + ((! opt_data.readonly) ? ' tabindex="0"' : '') + ' id="key_' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.value) + '</span>' + ((opt_data.readonly) ? aui.form.input({type: 'hidden', name: opt_data.id, value: opt_data.value}) : bamboo.feature.variables.selectOrInput(soy.$$augmentMap(opt_data, {extraClasses: 'inline-edit-field'})));
};
if (goog.DEBUG) {
  bamboo.feature.variables.inPlaceEditField.soyTemplateName = 'bamboo.feature.variables.inPlaceEditField';
}


bamboo.feature.variables.selectOrInput = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options) ? bamboo.feature.variables.select({name: opt_data.id, options: opt_data.options, extraClasses: opt_data.extraClasses}) : aui.form.input({type: 'text', name: opt_data.id, value: opt_data.value, extraClasses: opt_data.extraClasses, extraAttributes: {autocomplete: 'off'}}));
};
if (goog.DEBUG) {
  bamboo.feature.variables.selectOrInput.soyTemplateName = 'bamboo.feature.variables.selectOrInput';
}


bamboo.feature.variables.passwordConfirmaton = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: "variables.password.dialog.title", content: '<p>' + soy.$$escapeHtml("variables.password.dialog.description") + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.variables.passwordConfirmaton.soyTemplateName = 'bamboo.feature.variables.passwordConfirmaton';
}


bamboo.feature.variables.deleteConfirmaton = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("You are about to delete the selected variable. Are you sure you want to continue?");
};
if (goog.DEBUG) {
  bamboo.feature.variables.deleteConfirmaton.soyTemplateName = 'bamboo.feature.variables.deleteConfirmaton';
}


bamboo.feature.variables.select = function(opt_data, opt_ignored) {
  var output = '<select' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'multi-select' : 'select') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isMultiple) ? ' multiple' : '') + aui.renderExtraAttributes(opt_data) + '>';
  var optionList167 = opt_data.options;
  var optionListLen167 = optionList167.length;
  for (var optionIndex167 = 0; optionIndex167 < optionListLen167; optionIndex167++) {
    var optionData167 = optionList167[optionIndex167];
    output += bamboo.feature.variables.optionOrOptgroup(optionData167);
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.select.soyTemplateName = 'bamboo.feature.variables.select';
}


bamboo.feature.variables.optionOrOptgroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.options) {
    output += '<optgroup label="' + soy.$$escapeHtml(opt_data.text) + '"' + aui.renderExtraAttributes(opt_data) + '>';
    var optionList179 = opt_data.options;
    var optionListLen179 = optionList179.length;
    for (var optionIndex179 = 0; optionIndex179 < optionListLen179; optionIndex179++) {
      var optionData179 = optionList179[optionIndex179];
      output += bamboo.feature.variables.optionOrOptgroup(optionData179);
    }
    output += '</optgroup>';
  } else {
    output += '<option value="' + soy.$$escapeHtml(opt_data.value) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.selected) ? ' selected' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.variables.optionOrOptgroup.soyTemplateName = 'bamboo.feature.variables.optionOrOptgroup';
}


bamboo.feature.variables.overrideText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.variable) ? '<div class="variable-override-text">' + ((opt_data.variable.variableType == 'PLAN') ? soy.$$escapeHtml("Overrides plan value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value) : soy.$$escapeHtml("Overrides global value:") + ' ' + soy.$$escapeHtml(opt_data.variable.value)) + '</div>' : '');
};
if (goog.DEBUG) {
  bamboo.feature.variables.overrideText.soyTemplateName = 'bamboo.feature.variables.overrideText';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/feature/dashboard/welcome-mat/welcome-mat.soy' */
// This file was automatically generated from welcome-mat.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.dashboard.welcomeMat.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.dashboard == 'undefined') { bamboo.feature.dashboard = {}; }
if (typeof bamboo.feature.dashboard.welcomeMat == 'undefined') { bamboo.feature.dashboard.welcomeMat = {}; }


bamboo.feature.dashboard.welcomeMat.welcomeMat = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bamboo.feature.dashboard.welcomeMat.welcomeMessage({showCreate: opt_data.canCreatePlan, showImport: opt_data.hasAdminPermission, showLogin: ! opt_data.hasUser, showSignup: ! opt_data.hasUser, showContactAdmin: opt_data.hasUser && ! opt_data.canCreatePlan, content: '' + ((opt_data.hasUser && ! opt_data.canCreatePlan) ? aui.message.info({titleContent: "Not authorised to configure plans", content: '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("There are currently no builds configured in Bamboo. You do not have the correct privileges to set up a build. Please \x3ca href\x3d\x22{0}\x22\x3econtact an administrator\x3c/a\x3e for further assistance.",typeof ("" + '/viewAdministrators.action') === 'number' ? "" + '/viewAdministrators.action' : soy.$$escapeHtml("" + '/viewAdministrators.action')))) + '</p>'}) : '')});
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.welcomeMat.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.welcomeMat';
}


bamboo.feature.dashboard.welcomeMat.welcomeMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="welcome-message build"><div class="welcome-content"><h2 class="welcome-title">' + soy.$$escapeHtml("Let\x27s get building!") + '</h2><div class="welcome-blurb"><p>' + soy.$$escapeHtml("Now that the installation and the setup of Bamboo is complete, it\x27s time to create your first build plan.") + '</p><p>' + soy.$$escapeHtml("Build plans hold all the instructions to build, test and assemble your software. Whenever you make a change to your code, Bamboo triggers your build plan and notifies you of the result.") + '</p>' + ((opt_data.content && opt_data.content != '') ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>' + ((opt_data.showContactAdmin || opt_data.showCreate || opt_data.showImport || opt_data.showLogin || opt_data.showSignup) ? aui.toolbar2.toolbar2({extraClasses: 'welcome-actions', content: '' + aui.toolbar2.item({item: 'primary', content: '' + ((opt_data.showContactAdmin) ? aui.buttons.button({text: "Contact administrator", type: 'primary', tagName: 'a', extraClasses: 'aui-style', extraAttributes: {href: "" + '/viewAdministrators.action'}}) : '') + ((opt_data.showCreate || opt_data.showImport) ? (opt_data.showCreate) ? aui.buttons.button({text: "Create your first build plan", type: opt_data.showContactAdmin ? '' : 'primary', tagName: 'a', id: 'create-a-plan', extraClasses: 'aui-style', extraAttributes: {href: "" + '/build/admin/create/newPlan.action'}}) : '' : (opt_data.showLogin || opt_data.showSignup) ? ((opt_data.showLogin) ? aui.buttons.button({text: "Log in", type: 'primary', tagName: 'a', extraClasses: 'aui-style', extraAttributes: {href: "" + '/userlogin!doDefault.action'}}) : '') + ((opt_data.showSignup) ? aui.buttons.button({text: "Sign up", tagName: 'a', extraClasses: 'aui-style', extraAttributes: {href: "" + '/signupUser!doDefault.action'}}) : '') : '')})}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.welcomeMessage.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.welcomeMessage';
}


bamboo.feature.dashboard.welcomeMat.welcomeMessageDeploy = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="welcome-message deployment"><div class="welcome-content"><h2 class="welcome-title">' + soy.$$escapeHtml("Ready, steady, deploy!") + ' </h2><div class="welcome-blurb">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3cp\x3eWith Bamboo deployments you can track your code from a Jira issue, through testing in a build, all the way to deployment. Deployments allow you to: \x3cul\x3e\x3cli\x3eSnapshot your artifacts from any successful build into a release\x3c/li\x3e \x3cli\x3eDeploy, rollback and promote releases to environments\x3c/li\x3e \x3cli\x3eTrack what, when and who deployed releases to your environments\x3c/li\x3e \x3c/ul\x3e\x3c/p\x3e")) + ((opt_data.hasBuilds) ? '<p>' + soy.$$escapeHtml("To get started, create a deployment project and link it to your build plan now!") + ((opt_data.hasGlobalCreatePermission) ? '<p>' + aui.buttons.button({text: "Create my first deployment project", type: 'primary', tagName: 'a', extraAttributes: {href: "" + '/deploy/config/newDeploymentProjectDetails.action'}}) + '</p>' : '') + '</p>' : '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Before you can get started with deployments you need to \x3ca href\x3d\x22{0}\x22\x3ecreate a build plan\x3c/a\x3e that has some artifacts.",typeof ("" + '/build/admin/create/newPlan.action') === 'number' ? "" + '/build/admin/create/newPlan.action' : soy.$$escapeHtml("" + '/build/admin/create/newPlan.action')))) + '</p>') + '</div></div></div><div class="infographic"><h2>' + soy.$$escapeHtml("How do deployments work?") + '</h2><img src="' + soy.$$escapeHtml("") + '/images/infographic/bamboo-deploy.png" /><div class="artifactText"><h3>' + soy.$$escapeHtml("Artifacts") + '</h3>' + soy.$$escapeHtml("Create deployable artifacts with build plans, just like always. Any artifacts you wish to deploy with Bamboo need to be \x22shared\x22.") + '</div><div class="versionText"><h3>' + soy.$$escapeHtml("Release") + '</h3>' + soy.$$escapeHtml("Any artifacts that have been tested to your satisfaction using a plan can be used to create a release. Bamboo preserves metadata related to your release, such as the Jira issues and commits included. This allows for tracking changes across environments, easy traceability when troubleshooting, and creating powerful reports.") + '</div><div class="environmentText"><h3>' + soy.$$escapeHtml("Environments") + '</h3>' + soy.$$escapeHtml("Define environments in Bamboo to reflect the development, testing and production environments in your IT infrastructure. At any point in time, you\x27ll be able to see which version of a release is running in each environment, when and who deployed it and what release it replaced.") + '</div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.welcomeMessageDeploy.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.welcomeMessageDeploy';
}


bamboo.feature.dashboard.welcomeMat.importOptionsItem = function(opt_data, opt_ignored) {
  return '<li><a' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.feature.dashboard.welcomeMat.importOptionsItem.soyTemplateName = 'bamboo.feature.dashboard.welcomeMat.importOptionsItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.icons.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.icons == 'undefined') { widget.icons = {}; }


widget.icons.icon = function(opt_data, opt_ignored) {
  return '<span class="icon icon-' + soy.$$escapeHtml(opt_data.type) + ' ' + ((opt_data.reversed) ? 'icon-reversed' : '') + '" ' + ((opt_data.text && opt_data.showTitle) ? 'title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.icon.soyTemplateName = 'widget.icons.icon';
}


widget.icons.fontIcon = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  widget.icons.fontIcon.soyTemplateName = 'widget.icons.fontIcon';
}


widget.icons.auiFontLink = function(opt_data, opt_ignored) {
  return '<a ' + ((opt_data.text) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '" ' : '') + 'href="' + soy.$$escapeHtml("" + opt_data.relativeUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.iconType) + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</span></a>';
};
if (goog.DEBUG) {
  widget.icons.auiFontLink.soyTemplateName = 'widget.icons.auiFontLink';
}


widget.icons.statusIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.status == 'approve' || opt_data.status == 'project-success' || opt_data.status == 'Successful' || opt_data.status == 'SUCCESS' || opt_data.status == 'successful' || opt_data.status == 'successful-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'successful-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'error' || opt_data.status == 'project-fail' || opt_data.status == 'Failed' || opt_data.status == 'FAILED' || opt_data.status == 'failed' || opt_data.status == 'failed-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'failed-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-cancelled' || opt_data.status == 'NotBuilt' || opt_data.status == 'notbuilt' || opt_data.status == 'NOT_BUILT' || opt_data.status == 'Unknown' || opt_data.status == 'UNKNOWN' || opt_data.status == 'unknown' || opt_data.status == 'incomplete-build') ? widget.icons.fontIcon({type: 'incomplete-build', text: opt_data.text, showTitle: opt_data.text ? true : false}) : (opt_data.status == 'task-in-progress' || opt_data.status == 'Pending' || opt_data.status == 'PENDING' || opt_data.status == 'pending' || opt_data.status == 'Queued' || opt_data.status == 'QUEUED' || opt_data.status == 'queued' || opt_data.status == 'queued-build') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'queued-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'task-disabled' || opt_data.status == 'disabled' || opt_data.status == 'project-none' || opt_data.status == 'NeverExecuted' || opt_data.status == 'skipped' || opt_data.status == 'Suspended' || opt_data.status == 'plan-disabled') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'plan-disabled', text: opt_data.text, showTitle: opt_data.text ? true : false})) : (opt_data.status == 'running-build' || opt_data.status == 'project-current' || opt_data.status == 'Building' || opt_data.status == 'BUILDING' || opt_data.status == 'building' || opt_data.status == 'InProgress' || opt_data.status == 'INPROGRESS' || opt_data.status == 'IN_PROGRESS' || opt_data.status == 'inprogress') ? widget.icons.fontIcon(soy.$$augmentMap(opt_data, {type: 'running-build', text: opt_data.text, showTitle: opt_data.text ? true : false})) : widget.icons.icon({type: opt_data.status + (opt_data.reversed ? ' icon-reversed' : ''), text: opt_data.text, showTitle: opt_data.text ? true : false}));
};
if (goog.DEBUG) {
  widget.icons.statusIcon.soyTemplateName = 'widget.icons.statusIcon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/lozenges.soy' */
// This file was automatically generated from lozenges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.lozenges.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.lozenges == 'undefined') { widget.lozenges = {}; }


widget.lozenges.lozenge = function(opt_data, opt_ignored) {
  return '<span class="lozenge lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.lozenge.soyTemplateName = 'widget.lozenges.lozenge';
}


widget.lozenges.auilozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-' + soy.$$escapeHtml(opt_data.colour ? opt_data.colour : 'default') + soy.$$escapeHtml(opt_data.subtle ? ' aui-lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : opt_data.text) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  widget.lozenges.auilozenge.soyTemplateName = 'widget.lozenges.auilozenge';
}


widget.lozenges.branch = function(opt_data, opt_ignored) {
  return '<span class="' + ((opt_data.cssClass) ? soy.$$escapeHtml(opt_data.cssClass) : 'lozenge-newline') + '">' + ((opt_data.label) ? '<span class="inline-label">' + soy.$$escapeHtml(opt_data.label) + '</span> ' : '') + '<span class="lozenge branch-lozenge monospace" title="' + soy.$$escapeHtml(opt_data.planBranchName) + '"><span class="branch">' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + '<span class="name">' + soy.$$escapeHtml(opt_data.planBranchName) + '</span></span></span></span>';
};
if (goog.DEBUG) {
  widget.lozenges.branch.soyTemplateName = 'widget.lozenges.branch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/status/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.status.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.status == 'undefined') { widget.status = {}; }


widget.status.deploymentResultStatusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var colour__soy3 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        colour__soy3 += 'default';
        break;
      case 'SUCCESS':
        colour__soy3 += 'success';
        break;
      case 'FAILED':
        colour__soy3 += 'error';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        colour__soy3 += 'current';
        break;
      case 'QUEUED':
        colour__soy3 += 'current';
        break;
      case 'IN_PROGRESS':
        colour__soy3 += 'current';
        break;
      case 'NOT_BUILT':
        colour__soy3 += 'default';
        break;
    }
  }
  var text__soy23 = '';
  if (opt_data.lifeCycleState == 'FINISHED') {
    switch (opt_data.deploymentState) {
      case 'UNKNOWN':
        text__soy23 += 'Unknown';
        break;
      case 'SUCCESS':
        text__soy23 += 'Success';
        break;
      case 'FAILED':
        text__soy23 += 'Failed';
        break;
    }
  } else {
    switch (opt_data.lifeCycleState) {
      case 'PENDING':
        text__soy23 += 'Queued';
        break;
      case 'QUEUED':
        text__soy23 += 'Queued';
        break;
      case 'IN_PROGRESS':
        text__soy23 += 'In Progress';
        break;
      case 'NOT_BUILT':
        text__soy23 += 'Not Built';
        break;
    }
  }
  output += widget.lozenges.auilozenge({colour: colour__soy3, text: text__soy23, subtle: opt_data.subtle});
  return output;
};
if (goog.DEBUG) {
  widget.status.deploymentResultStatusLozenge.soyTemplateName = 'widget.status.deploymentResultStatusLozenge';
}


widget.status.buildResultStatusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var class__soy48 = '' + widget.status.buildResultStatusClass(opt_data);
  output += widget.icons.statusIcon({status: class__soy48});
  return output;
};
if (goog.DEBUG) {
  widget.status.buildResultStatusIcon.soyTemplateName = 'widget.status.buildResultStatusIcon';
}


widget.status.buildResultStatusClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.resultSummary.continuable && opt_data.resultSummary.successful) ? 'SuccessfulPartial' : (opt_data.resultSummary.notRunYet) ? 'NotRunYet' : (opt_data.resultSummary.finished) ? soy.$$escapeHtml(opt_data.resultSummary.buildState) : soy.$$escapeHtml(opt_data.resultSummary.lifeCycleState));
};
if (goog.DEBUG) {
  widget.status.buildResultStatusClass.soyTemplateName = 'widget.status.buildResultStatusClass';
}


widget.status.statusRibbon = function(opt_data, opt_ignored) {
  var output = '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon' + aui.renderExtraClasses(opt_data) + '" data-statuses="' + soy.$$escapeHtml(opt_data.statuses.length) + '"' + aui.renderExtraAttributes(opt_data) + '><div class="status-ribbon-inner">';
  var statusList77 = opt_data.statuses;
  var statusListLen77 = statusList77.length;
  for (var statusIndex77 = 0; statusIndex77 < statusListLen77; statusIndex77++) {
    var statusData77 = statusList77[statusIndex77];
    output += widget.status.statusRibbonItem(statusData77);
  }
  output += '</div>' + ((opt_data.progressbarContent) ? '<div class="status-ribbon-progress-bar">' + soy.$$filterNoAutoescape(opt_data.progressbarContent) + '</div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  widget.status.statusRibbon.soyTemplateName = 'widget.status.statusRibbon';
}


widget.status.statusRibbonItem = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="status-ribbon-status ' + soy.$$escapeHtml(opt_data.state) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + ' class="status-ribbon-status-heading">' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.state, reversed: true}) + ' ' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.headingTagName ? opt_data.headingTagName : 'h2') + '></div>';
};
if (goog.DEBUG) {
  widget.status.statusRibbonItem.soyTemplateName = 'widget.status.statusRibbonItem';
}


widget.status.deploymentVersionStatus = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.deploymentVersionState && opt_data.deploymentVersionState != 'UNKNOWN') ? widget.lozenges.auilozenge({colour: '' + ((opt_data.deploymentVersionState == 'BROKEN' || opt_data.deploymentVersionState == 'INCOMPLETE') ? 'error' : 'success'), text: opt_data.deploymentVersionState, subtle: opt_data.subtle, extraClasses: 'version-lozenge'}) : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatus.soyTemplateName = 'widget.status.deploymentVersionStatus';
}


widget.status.deploymentVersionStatusInfo = function(opt_data, opt_ignored) {
  return '' + ((opt_data.deploymentVersionState == 'APPROVED' || opt_data.deploymentVersionState == 'BROKEN') ? '<div class="detailed-version-info-container reviewed-user-avatar">' + aui.avatar.avatar({size: 'small', avatarImageUrl: opt_data.avatar ? opt_data.avatar : "" + '/images/icons/useravatar-grey.png', accessibilityText: opt_data.userName ? opt_data.userName : "Anonymous user", title: opt_data.displayName ? opt_data.displayName : "Anonymous user", badgeContent: '' + ((opt_data.deploymentVersionState == 'BROKEN') ? '<span class="badge reviewed broken"></span>' : (opt_data.deploymentVersionState == 'APPROVED') ? '<span class="badge reviewed approved"></span>' : '')}) + '<script>AJS.$(".aui-avatar-inner > img").tooltip({gravity: \'n\'});<\/script></div>' : '');
};
if (goog.DEBUG) {
  widget.status.deploymentVersionStatusInfo.soyTemplateName = 'widget.status.deploymentVersionStatusInfo';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/agent.soy' */
// This file was automatically generated from agent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.agent.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.agent == 'undefined') { widget.agent = {}; }


widget.agent.renderAgentNameLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.type == 'ELASTIC') ? (true) ? '<a href="' + soy.$$escapeHtml("" + '/admin/elastic/manageElasticInstances.action') + '">' + widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) + '</a>' : widget.icons.icon({type: 'elastic', text: '(elastic)', showTitle: true}) : '') + ((opt_data.showAdminLink) ? '<a href="' + soy.$$escapeHtml("" + '/admin/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>' : '<a href="' + soy.$$escapeHtml("" + '/agent/viewAgent.action?agentId=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>');
};
if (goog.DEBUG) {
  widget.agent.renderAgentNameLink.soyTemplateName = 'widget.agent.renderAgentNameLink';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/plan.soy' */
// This file was automatically generated from plan.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.plan.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.plan == 'undefined') { widget.plan = {}; }


widget.plan.renderPlanNameLink = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) + ' &rsaquo; ' + aui.icons.icon({icon: 'devtools-branch-small', useIconFont: true}) + ' ' : '') + soy.$$escapeHtml(opt_data.plan.buildName) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLink.soyTemplateName = 'widget.plan.renderPlanNameLink';
}


widget.plan.renderPlanNameLinkWithoutBranch = function(opt_data, opt_ignored) {
  return '<a href="' + ((opt_data.url) ? soy.$$escapeHtml(opt_data.url) : soy.$$escapeHtml("" + '/browse/' + opt_data.plan.key)) + '" ' + ((opt_data.plan.description) ? 'title="' + soy.$$escapeHtml(opt_data.plan.description) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.plan.project.name) + ' &rsaquo; ' + ((opt_data.plan.master) ? soy.$$escapeHtml(opt_data.plan.master.buildName) : soy.$$escapeHtml(opt_data.plan.buildName)) + '</a>';
};
if (goog.DEBUG) {
  widget.plan.renderPlanNameLinkWithoutBranch.soyTemplateName = 'widget.plan.renderPlanNameLinkWithoutBranch';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/buildresult.soy' */
// This file was automatically generated from buildresult.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.buildresult.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.buildresult == 'undefined') { widget.buildresult = {}; }


widget.buildresult.resultStatusAndLink = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy5 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <a href="' + soy.$$escapeHtml("" + '/browse/' + opt_data.resultSummary.planResultKey.key) + '" class="' + soy.$$escapeHtml(resultClass__soy5) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</a>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatusAndLink.soyTemplateName = 'widget.buildresult.resultStatusAndLink';
}


widget.buildresult.resultStatus = function(opt_data, opt_ignored) {
  var output = '' + widget.status.buildResultStatusIcon(opt_data);
  var resultClass__soy18 = '' + widget.status.buildResultStatusClass(opt_data);
  output += ' <span class="' + soy.$$escapeHtml(resultClass__soy18) + '">' + soy.$$escapeHtml('#' + opt_data.resultSummary.planResultKey.resultNumber) + '</span>';
  return output;
};
if (goog.DEBUG) {
  widget.buildresult.resultStatus.soyTemplateName = 'widget.buildresult.resultStatus';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/autocomplete-controls/bamboo/plandependencies/plan-dependency.soy' */
// This file was automatically generated from plan-dependency.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.planDependency.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }
if (typeof bamboo.widget.autocomplete.planDependency == 'undefined') { bamboo.widget.autocomplete.planDependency = {}; }


bamboo.widget.autocomplete.planDependency.list = function(opt_data, opt_ignored) {
  var output = '<ul class="' + soy.$$escapeHtml(opt_data.dependencies.length == 0 ? 'empty' : '') + aui.renderExtraClasses(opt_data) + '">';
  var dependencyList7 = opt_data.dependencies;
  var dependencyListLen7 = dependencyList7.length;
  for (var dependencyIndex7 = 0; dependencyIndex7 < dependencyListLen7; dependencyIndex7++) {
    var dependencyData7 = dependencyList7[dependencyIndex7];
    var plan__soy8 = opt_data.isParent ? dependencyData7.childPlan : dependencyData7.parentPlan;
    output += '<li data-id="' + soy.$$escapeHtml(plan__soy8.key) + '">' + bamboo.widget.autocomplete.planDependency.item({id: plan__soy8.key, projectName: plan__soy8.project.name, planName: plan__soy8.buildName, isEditable: dependencyData7.editable, isReadOnly: opt_data.isReadOnly}) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planDependency.list.soyTemplateName = 'bamboo.widget.autocomplete.planDependency.list';
}


bamboo.widget.autocomplete.planDependency.item = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("" + '/chain/admin/config/editChainDependencies.action?buildKey=' + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.projectName) + ((opt_data.planName) ? ' &rsaquo; ' + soy.$$escapeHtml(opt_data.planName) : '') + '</a>' + ((! (opt_data.isEditable == false)) ? (! opt_data.isReadOnly) ? '<a class="remove"></a><input type="hidden" name="childPlanKeys" value="' + soy.$$escapeHtml(opt_data.id) + '" />' : '' : widget.lozenges.lozenge({text: "Generated", subtle: true, extraClasses: 'dependencies-generated'}));
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.planDependency.item.soyTemplateName = 'bamboo.widget.autocomplete.planDependency.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/autocomplete-controls/bamboo/variables/variable-multiselect.soy' */
// This file was automatically generated from variable-multiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.autocomplete.variableSelect.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.autocomplete == 'undefined') { bamboo.widget.autocomplete = {}; }
if (typeof bamboo.widget.autocomplete.variableSelect == 'undefined') { bamboo.widget.autocomplete.variableSelect = {}; }


bamboo.widget.autocomplete.variableSelect.list = function(opt_data, opt_ignored) {
  var output = '<ul class="' + soy.$$escapeHtml(opt_data.variablesToAutoIncrement.length == 0 ? 'empty' : '') + aui.renderExtraClasses(opt_data) + '">';
  var variableList7 = opt_data.variablesToAutoIncrement;
  var variableListLen7 = variableList7.length;
  for (var variableIndex7 = 0; variableIndex7 < variableListLen7; variableIndex7++) {
    var variableData7 = variableList7[variableIndex7];
    output += '<li data-id="' + soy.$$escapeHtml(variableData7.key) + '">' + bamboo.widget.autocomplete.variableSelect.item(variableData7) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableSelect.list.soyTemplateName = 'bamboo.widget.autocomplete.variableSelect.list';
}


bamboo.widget.autocomplete.variableSelect.item = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.key) + '<a class="remove"></a><input type="hidden" name="variablesToAutoIncrement" value="' + soy.$$escapeHtml(opt_data.key) + '" />';
};
if (goog.DEBUG) {
  bamboo.widget.autocomplete.variableSelect.item.soyTemplateName = 'bamboo.widget.autocomplete.variableSelect.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/plan-status-history/plan-status-history.soy' */
// This file was automatically generated from plan-status-history.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.planStatusHistory.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.planStatusHistory == 'undefined') { bamboo.widget.planStatusHistory = {}; }


bamboo.widget.planStatusHistory.container = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '"></div><script type="text/javascript">require([\'jquery\', \'widget/plan-status-history\'], function($, PlanStatusHistory){return new PlanStatusHistory({el: $(\'#' + soy.$$escapeHtml(opt_data.id) + '\'), planKey: \'' + soy.$$escapeHtml(opt_data.planKey) + '\', buildNumber: ' + soy.$$escapeHtml(opt_data.currentBuildNumber ? opt_data.currentBuildNumber : 'null') + ', bootstrap: ' + soy.$$filterNoAutoescape(opt_data.bootstrap) + ', returnUrl: \'' + soy.$$filterNoAutoescape(opt_data.returnUrl) + '\', keyToNavigate: \'' + soy.$$escapeHtml(opt_data.keyToNavigate) + '\', firstBuildNumber: ' + soy.$$escapeHtml(opt_data.firstBuildNumber ? opt_data.firstBuildNumber : 'null') + ', lastBuildNumber: ' + soy.$$escapeHtml(opt_data.lastBuildNumber ? opt_data.lastBuildNumber : 'null') + '});});<\/script>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.container.soyTemplateName = 'bamboo.widget.planStatusHistory.container';
}


bamboo.widget.planStatusHistory.navigator = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.builds.length > 0) {
    output += aui.icons.icon({icon: 'wait', useIconFont: false, size: 'small', extraClasses: 'spinner previous'}) + ((opt_data.minVisibleBuildNumber && opt_data.minVisibleBuildNumber > opt_data.firstBuildNumber) ? '<a class="button previous" title="' + soy.$$escapeHtml("Previous build result") + '" accesskey="' + soy.$$escapeHtml("P") + '">' + aui.icons.icon({icon: 'down', useIconFont: true, size: 'small', extraClasses: 'left'}) + '</a>' : '<span class="button previous disabled">' + aui.icons.icon({icon: 'down', useIconFont: true, size: 'small', extraClasses: 'left'}) + '</span>') + '<ol>';
    var buildList54 = opt_data.builds;
    var buildListLen54 = buildList54.length;
    for (var buildIndex54 = 0; buildIndex54 < buildListLen54; buildIndex54++) {
      var buildData54 = buildList54[buildIndex54];
      output += bamboo.widget.planStatusHistory.item(soy.$$augmentMap(buildData54, {href: "" + (opt_data.currentBuildNumber ? '/build/result/gotoBuildResult.action?buildKey=' + opt_data.keyToNavigate + '&buildNumber=' + buildData54.buildNumber + '&returnUrl=' + opt_data.returnUrl : '/browse/' + buildData54.planKey + '-' + buildData54.buildNumber), isCurrent: opt_data.currentBuildNumber && opt_data.currentBuildNumber == buildData54.buildNumber}));
    }
    output += '</ol>' + ((opt_data.showRightArrow) ? '<a class="button next" title="' + soy.$$escapeHtml("Next build result") + '" accesskey="' + soy.$$escapeHtml("N") + '">' + aui.icons.icon({icon: 'up', useIconFont: true, size: 'small', extraClasses: 'right'}) + '</a>' : '<span class="button next disabled">' + aui.icons.icon({icon: 'up', useIconFont: true, size: 'small', extraClasses: 'right'}) + '</span>') + aui.icons.icon({icon: 'wait', useIconFont: false, size: 'small', extraClasses: 'spinner next'});
  } else {
    output += '<p>' + soy.$$escapeHtml("Status history data not available") + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.navigator.soyTemplateName = 'bamboo.widget.planStatusHistory.navigator';
}


bamboo.widget.planStatusHistory.buildDialog = function(opt_data, opt_ignored) {
  return '<div>' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.buildStatus, text: '#' + opt_data.buildNumber + ' (' + opt_data.buildStatusDescription + ')'}) + '<strong>#' + soy.$$escapeHtml(opt_data.buildNumber) + '</strong>' + ((opt_data.onceOff) ? widget.lozenges.lozenge({color: 'current', text: "Custom revision"}) : '') + ((opt_data.rebuild) ? widget.lozenges.lozenge({color: 'moved', text: "Rebuild"}) : '') + ((opt_data.customBuild) ? widget.lozenges.lozenge({color: 'current', text: "Custom build"}) : '') + '<p>' + soy.$$filterNoAutoescape(opt_data.triggerHtml) + '</p>' + ((opt_data.hasFailed && ! opt_data.specsFailure) ? ((opt_data.existingFailuresText) ? '<p>' + soy.$$escapeHtml(opt_data.existingFailuresText) + '</p>' : '') + ((opt_data.newFailuresText) ? '<p>' + soy.$$escapeHtml(opt_data.newFailuresText) + '</p>' : '') + ((! (opt_data.existingFailuresText || opt_data.newFailuresText)) ? '<p>' + soy.$$escapeHtml("0 tests failed") + '</p>' : '') : '') + '</div>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.buildDialog.soyTemplateName = 'bamboo.widget.planStatusHistory.buildDialog';
}


bamboo.widget.planStatusHistory.item = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.buildStatus) + ((opt_data.isCurrent) ? ' current' : '') + ' animated' + aui.renderExtraClasses(opt_data) + '" data-build-number="' + soy.$$escapeHtml(opt_data.buildNumber) + '" data-trigger="' + soy.$$escapeHtml(opt_data.trigger) + '" data-new-failed-test-case-count="' + soy.$$escapeHtml(opt_data.newFailedTestCaseCount) + '" data-existing-failed-test-case-count="' + soy.$$escapeHtml(opt_data.existingFailedTestCaseCount) + '" data-rebuild="' + soy.$$escapeHtml(opt_data.rebuild) + '" data-once-off="' + soy.$$escapeHtml(opt_data.onceOff) + '" data-custom-build="' + soy.$$escapeHtml(opt_data.customBuild) + '" ><a href="' + soy.$$escapeHtml(opt_data.href) + '">' + widget.icons.statusIcon({status: opt_data.specsFailure ? 'SpecsFailure' : opt_data.specsSuccess ? 'SpecsSuccess' : opt_data.buildStatus, text: '#' + opt_data.buildNumber + ' (' + opt_data.buildStatusDescription + ')'}) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.planStatusHistory.item.soyTemplateName = 'bamboo.widget.planStatusHistory.item';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/nav/nav.soy' */
// This file was automatically generated from nav.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.nav.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.nav == 'undefined') { bamboo.widget.nav = {}; }


bamboo.widget.nav.horizontal = function(opt_data, opt_ignored) {
  var output = '<nav class="aui-navgroup aui-navgroup-horizontal ' + ((opt_data.historyXhrDisabled) ? 'history-xhr-disabled' : '') + '"><div class="aui-navgroup-inner"><div class="aui-navgroup-primary"><ul class="aui-nav">';
  var itemList8 = opt_data.items;
  var itemListLen8 = itemList8.length;
  for (var itemIndex8 = 0; itemIndex8 < itemListLen8; itemIndex8++) {
    var itemData8 = itemList8[itemIndex8];
    output += bamboo.widget.nav.navItem(itemData8);
  }
  output += '</ul></div></div></nav>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.nav.horizontal.soyTemplateName = 'bamboo.widget.nav.horizontal';
}


bamboo.widget.nav.navItem = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + ((opt_data.isSelected) ? 'aui-nav-selected' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '">' + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.badge && opt_data.badge.text) ? ' ' + aui.badges.badge(opt_data.badge) : '') + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.navItem.soyTemplateName = 'bamboo.widget.nav.navItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/nav/tabs.soy' */
// This file was automatically generated from tabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.nav.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.nav == 'undefined') { bamboo.widget.nav = {}; }


bamboo.widget.nav.tabs = function(opt_data, opt_ignored) {
  var output = '<nav class="aui-tabs horizontal-tabs "><ul class="tabs-menu">';
  var itemList4 = opt_data.items;
  var itemListLen4 = itemList4.length;
  for (var itemIndex4 = 0; itemIndex4 < itemListLen4; itemIndex4++) {
    var itemData4 = itemList4[itemIndex4];
    output += bamboo.widget.nav.tab(itemData4);
  }
  output += '</ul></nav>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.nav.tabs.soyTemplateName = 'bamboo.widget.nav.tabs';
}


bamboo.widget.nav.tab = function(opt_data, opt_ignored) {
  return '<li ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="menu-item' + ((opt_data.isSelected) ? ' active-tab' + aui.renderExtraClasses(opt_data) + '"' : ' ' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + '"') + aui.renderExtraAttributes(opt_data) + '><a' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.tab.soyTemplateName = 'bamboo.widget.nav.tab';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/nav/bread-crumb.soy' */
// This file was automatically generated from bread-crumb.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.nav.breadcrumb.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.nav == 'undefined') { bamboo.widget.nav = {}; }
if (typeof bamboo.widget.nav.breadcrumb == 'undefined') { bamboo.widget.nav.breadcrumb = {}; }


bamboo.widget.nav.breadcrumb.crumbContainer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ol ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-nav aui-nav-breadcrumbs">';
  if (opt_data.parentCrumbs && opt_data.parentCrumbs.length > 0) {
    var crumbList12 = opt_data.parentCrumbs;
    var crumbListLen12 = crumbList12.length;
    for (var crumbIndex12 = 0; crumbIndex12 < crumbListLen12; crumbIndex12++) {
      var crumbData12 = crumbList12[crumbIndex12];
      output += bamboo.widget.nav.breadcrumb.showParentCrumb(crumbData12);
    }
  }
  output += ((opt_data.currentCrumb) ? bamboo.widget.nav.breadcrumb.showCurrentCrumb(opt_data.currentCrumb) : '') + '</ol>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.nav.breadcrumb.crumbContainer.soyTemplateName = 'bamboo.widget.nav.breadcrumb.crumbContainer';
}


bamboo.widget.nav.breadcrumb.showParentCrumb = function(opt_data, opt_ignored) {
  return '<li' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + '><a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.id) ? ' id="breadcrumb:' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.breadcrumb.showParentCrumb.soyTemplateName = 'bamboo.widget.nav.breadcrumb.showParentCrumb';
}


bamboo.widget.nav.breadcrumb.showCurrentCrumb = function(opt_data, opt_ignored) {
  return '<li class="aui-nav-selected' + aui.renderExtraClasses(opt_data) + '">' + soy.$$escapeHtml(opt_data.text) + '</li>';
};
if (goog.DEBUG) {
  bamboo.widget.nav.breadcrumb.showCurrentCrumb.soyTemplateName = 'bamboo.widget.nav.breadcrumb.showCurrentCrumb';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/help/help.soy' */
// This file was automatically generated from help.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.help.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.help == 'undefined') { bamboo.widget.help = {}; }


bamboo.widget.help.panel = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + ' class="help-panel' + ((opt_data.type) ? ' help-panel-' + soy.$$escapeHtml(opt_data.type) : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.link) ? ' href="' + soy.$$escapeHtml(opt_data.link) + '"' : '') + aui.renderExtraAttributes(opt_data) + '><strong class="help-panel-title">' + soy.$$escapeHtml(opt_data.title) + '</strong><div class="help-panel-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></' + soy.$$escapeHtml(opt_data.link ? 'a' : 'div') + '>';
};
if (goog.DEBUG) {
  bamboo.widget.help.panel.soyTemplateName = 'bamboo.widget.help.panel';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/time/time.soy' */
// This file was automatically generated from time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.time.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.time == 'undefined') { bamboo.widget.time = {}; }


bamboo.widget.time.timestamp = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format) : BAMBOO.Time.format(opt_data.datetime, 'short')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.timestamp.soyTemplateName = 'bamboo.widget.time.timestamp';
}


bamboo.widget.time.relative = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.time(soy.$$augmentMap(opt_data, {content: opt_data.format ? BAMBOO.Time.format(opt_data.datetime, opt_data.format + 'Age') : BAMBOO.Time.format(opt_data.datetime, 'shortAge')}));
};
if (goog.DEBUG) {
  bamboo.widget.time.relative.soyTemplateName = 'bamboo.widget.time.relative';
}


bamboo.widget.time.time = function(opt_data, opt_ignored) {
  return '<time datetime="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'timestamp')) + '" title="' + soy.$$escapeHtml(BAMBOO.Time.format(opt_data.datetime, 'full')) + '"' + aui.renderExtraClasses(soy.$$augmentMap(opt_data, {isFullAttr: true})) + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</time>';
};
if (goog.DEBUG) {
  bamboo.widget.time.time.soyTemplateName = 'bamboo.widget.time.time';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:server-soy-templates', location = '/widget/tooltip/tooltip.soy' */
// This file was automatically generated from tooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.tooltip.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.tooltip == 'undefined') { bamboo.widget.tooltip = {}; }


bamboo.widget.tooltip.tooltip = function(opt_data, opt_ignored) {
  return '<script type="text/javascript">require([\'aui\', \'jquery\', \'underscore\'], function(AJS, $, _){var $element = $(\'' + soy.$$escapeHtml(opt_data.trigger) + '\'); AJS.InlineDialog( $element, undefined' + ((opt_data.url) ? ',\'' + soy.$$escapeHtml("") + soy.$$escapeJsString(opt_data.url) + '\'' : ',function(content, trigger, showPopup){content .css({padding: \'20px\'}) .html(_.unescape(\'' + soy.$$escapeHtml(opt_data.content) + '\')); showPopup(); return false;}') + ',{' + ((opt_data.width) ? ' width: ' + soy.$$escapeHtml(opt_data.width) + ' ' : '') + ((opt_data.showDelay) ? ' ' + ((opt_data.width) ? ',' : '') + ' showDelay: ' + soy.$$escapeHtml(opt_data.showDelay) : '') + ((opt_data.width || opt_data.showDelay) ? ',' : '') + ' onHover: true});' + ((opt_data.addMarker) ? '$element.addClass(\'tooltip-marker\');' : '') + '});<\/script>';
};
if (goog.DEBUG) {
  bamboo.widget.tooltip.tooltip.soyTemplateName = 'bamboo.widget.tooltip.tooltip';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-build-result', location = '/feature/build-result/build-result.soy' */
// This file was automatically generated from build-result.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.build.result.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.build == 'undefined') { bamboo.feature.build = {}; }
if (typeof bamboo.feature.build.result == 'undefined') { bamboo.feature.build.result = {}; }


bamboo.feature.build.result.resultSelectionList = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.results && opt_data.results.length > 0) {
    output += '<div class="aui-group"><div class="aui-item result-selector"><fieldset id ="build-results" class="group"><legend><span>' + soy.$$escapeHtml("Build result") + '</span></legend>';
    var resultSummaryList8 = opt_data.results;
    var resultSummaryListLen8 = resultSummaryList8.length;
    for (var resultSummaryIndex8 = 0; resultSummaryIndex8 < resultSummaryListLen8; resultSummaryIndex8++) {
      var resultSummaryData8 = resultSummaryList8[resultSummaryIndex8];
      output += (resultSummaryIndex8 < 3) ? bamboo.feature.build.result.resultRadio({resultSummary: resultSummaryData8, checked: ! opt_data.selectedBuildNumber && resultSummaryIndex8 == 0 || opt_data.selectedBuildNumber && opt_data.isBuildRecent && resultSummaryData8.planResultKey.buildNumber == opt_data.selectedBuildNumber}) : '';
    }
    var showOtherResults__soy15 = opt_data.results.length > 3 || opt_data.selectedBuildNumber;
    output += ((showOtherResults__soy15) ? '<div class="radio"><input id="build-result-other" class="radio handleOnSelectShowHide" type="radio" name="buildResult" value="custom" ' + ((opt_data.selectedBuildNumber && ! opt_data.isBuildRecent) ? 'checked="checked"' : '') + '><label for="build-result-other">' + soy.$$escapeHtml("Other build results") + ' </label><input id="custom-build-result" class="text dependsOnbuildResult showOncustom" type="text" placeholder="' + soy.$$escapeHtml(opt_data.placeHolderBuildNumber) + '" name="buildResultOther" value="' + ((opt_data.selectedBuildNumber && ! opt_data.isBuildRecent) ? soy.$$escapeHtml(opt_data.selectedBuildNumber) : '') + '"></div>' : '') + ((opt_data.customBuildResultsError) ? '<div id="custom-build-result-error" class="error control-form-error hidden">' + soy.$$escapeHtml(opt_data.customBuildResultsError) + '</div>' : '') + ((! showOtherResults__soy15) ? '<div class="description">' + soy.$$escapeHtml("The above are the only successful build results available to create a new release.") + '</div>' : '') + '</fieldset></div><div class="aui-item result-selector-note">' + soy.$$escapeHtml("Note: You can only choose artifacts from build results since the last created release.") + '</div></div>';
  } else {
    output += aui.message.info({titleContent: "No build result available", content: '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("You cannot create a release yet. You first need artifacts to be available from a successful run of \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e.",typeof ("" + '/browse/' + opt_data.planKey) === 'number' ? "" + '/browse/' + opt_data.planKey : soy.$$escapeHtml("" + '/browse/' + opt_data.planKey),typeof (opt_data.planName) === 'number' ? opt_data.planName : soy.$$escapeHtml(opt_data.planName)))) + '</p>'});
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.build.result.resultSelectionList.soyTemplateName = 'bamboo.feature.build.result.resultSelectionList';
}


bamboo.feature.build.result.resultRadio = function(opt_data, opt_ignored) {
  return '<div class="radio"><input id="build-result-' + soy.$$escapeHtml(opt_data.resultSummary.buildNumber) + '" class="radio handleOnSelectShowHide" type="radio" ' + ((opt_data.checked) ? 'checked="checked"' : '') + ' name="buildResult" value="' + soy.$$escapeHtml(opt_data.resultSummary.buildResultKey) + '"><label for="build-result-' + soy.$$escapeHtml(opt_data.resultSummary.buildNumber) + '"> ' + widget.buildresult.resultStatusAndLink(opt_data) + ' <span>' + soy.$$filterNoAutoescape(opt_data.resultSummary.reasonSummary) + '</span> ' + bamboo.widget.time.relative({datetime: opt_data.resultSummary.buildCompletedDate}) + '</label></div>';
};
if (goog.DEBUG) {
  bamboo.feature.build.result.resultRadio.soyTemplateName = 'bamboo.feature.build.result.resultRadio';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/quick-filters-admin.soy' */
// This file was automatically generated from quick-filters-admin.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.quick.filters.admin.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.quick == 'undefined') { bamboo.feature.quick = {}; }
if (typeof bamboo.feature.quick.filters == 'undefined') { bamboo.feature.quick.filters = {}; }
if (typeof bamboo.feature.quick.filters.admin == 'undefined') { bamboo.feature.quick.filters.admin = {}; }


bamboo.feature.quick.filters.admin.quickFiltersTable = function(opt_data, opt_ignored) {
  return '<table id="quick-filters-admin-table" class="aui"><thead><tr><th class="quick-filters-drag-handle"></th><th class="quick-filter-name">' + soy.$$escapeHtml("Filter name") + '</th><th class="quick-filter-status"></th><th class="quick-filter-actions">' + soy.$$escapeHtml("Actions") + '</th></tr></thead><tbody></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.admin.quickFiltersTable.soyTemplateName = 'bamboo.feature.quick.filters.admin.quickFiltersTable';
}


bamboo.feature.quick.filters.admin.quickFilterRow = function(opt_data, opt_ignored) {
  return '<td class="quick-filters-drag-handle"><div class="jsDraggableHandle"></div></td><td class="quick-filter-name">' + soy.$$escapeHtml(opt_data.name) + '</td><td class="quick-filter-status">' + ((! opt_data.hasRules) ? '<div><span class="aui-lozenge aui-lozenge-error" title="' + soy.$$escapeHtml("This quick filter doesn\x27t have any rules defined yet. Quick filters without rules are not displayed on Bamboo dashboard. Please configure it.") + '">' + soy.$$escapeHtml("No rules") + '</span></div>' : '') + '</td><td class="quick-filter-actions"><a data-id="' + soy.$$escapeHtml(opt_data.id) + '" href="#" class="edit">' + soy.$$escapeHtml("Rename") + '</a> | <a data-id="' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml("") + '/admin/configureQuickFilter.action?quickFilterId=' + soy.$$escapeHtml(opt_data.id) + '" class="configure">' + soy.$$escapeHtml("Configure") + '</a> | <a data-id="' + soy.$$escapeHtml(opt_data.id) + '" href="#" class="delete">' + soy.$$escapeHtml("Delete") + '</a></td>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.admin.quickFilterRow.soyTemplateName = 'bamboo.feature.quick.filters.admin.quickFilterRow';
}


bamboo.feature.quick.filters.admin.noQuickFiltersRow = function(opt_data, opt_ignored) {
  return '<td colspan="4" class="no-quick-filters">' + soy.$$escapeHtml("There are currently no quick filters defined.") + '</td>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.admin.noQuickFiltersRow.soyTemplateName = 'bamboo.feature.quick.filters.admin.noQuickFiltersRow';
}


bamboo.feature.quick.filters.admin.editQuickFilterFormContainer = function(opt_data, opt_ignored) {
  return '<div class="' + soy.$$escapeHtml(opt_data.cssClass) + '"></div>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.admin.editQuickFilterFormContainer.soyTemplateName = 'bamboo.feature.quick.filters.admin.editQuickFilterFormContainer';
}


bamboo.feature.quick.filters.admin.editQuickFilterForm = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<form id=\'edit-quick-filter-form\' class="aui"><fieldset class="group">' + ((opt_data.name) ? '<div class="field-group current-name"><label>' + soy.$$escapeHtml("Current name") + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.name) + '</span></div>' : '') + '<div class="field-group required"><label for="name">' + ((opt_data.name) ? soy.$$escapeHtml("New name") : soy.$$escapeHtml("Name")) + '<span class="aui-icon icon-required"></span><span class="content"> (required)</span></label><input type="text" name="name" id="name" value="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : '') + '" class="text"><div class="description">' + soy.$$escapeHtml("Filter names are displayed in the Bamboo dashboard, so keep them short.") + '</div></div></fieldset></form>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.admin.editQuickFilterForm.soyTemplateName = 'bamboo.feature.quick.filters.admin.editQuickFilterForm';
}


bamboo.feature.quick.filters.admin.confirmDeleteQuickFilter = function(opt_data, opt_ignored) {
  return '<div><p>' + soy.$$escapeHtml("Are you sure that you want to delete this filter?") + '</p><p><strong>' + soy.$$escapeHtml(opt_data.name) + '</strong></p></div>';
};
if (goog.DEBUG) {
  bamboo.feature.quick.filters.admin.confirmDeleteQuickFilter.soyTemplateName = 'bamboo.feature.quick.filters.admin.confirmDeleteQuickFilter';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/entity/quick-filters-collection.js' */
define("feature/quick-filters-admin/entity/quick-filters-collection",["feature/quick-filters-admin/entity/quick-filter-model","jquery","underscore","backbone"],function(e,t,i,r){"use strict";return r.Collection.extend({model:e,url:AJS.contextPath()+"/rest/api/latest/quickFilter",comparator:"position"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/quick-filters-list-view.js' */
define("feature/quick-filters-admin/quick-filters-list-view",["feature/quick-filters-admin/quick-filters-confirm-delete-dialog","feature/quick-filters-admin/quick-filters-edit-dialog","jquery","underscore","marionette","util/options","aui/flag"],function(e,i,t,n,o,l,a){"use strict";var r=o.Behavior.extend({onInitDragAndDrop:function(){t("#quick-filters-admin-table").find("tbody").sortable({helper:function(e,i){var n=i.children(),o=i.clone();return o.children().each(function(e){t(this).width(n.eq(e).width())}),o},revert:l.animationSpeed,handle:".jsDraggableHandle",placeholder:"jsDraggablePlaceholder",stop:this.onDragAndDropStop.bind(this)})},onDragAndDropStop:function(e,i){var t=this,n=this.view.$childViewContainer.data("sortable"),o=n.currentItem.data("quick-filter-id"),l=this.view.collection.get(o),r=i.item.index()+1;this.view.getOption("$loadingIcon").show(),l.save({position:r},{wait:!0,patch:!0}).fail(function(){new a({type:"error",close:"manual",body:"An error occurred while saving quick filter"})}).always(function(){t.view.collection.fetch({reset:!0})})}}),c=o.ItemView.extend({tagName:"tr",initialize:function(){this.template=bamboo.feature.quick.filters.admin.noQuickFiltersRow}}),d=o.ItemView.extend({tagName:"tr",ui:{editButton:"a.edit",deleteButton:"a.delete"},events:{"click @ui.editButton":"onEdit","click @ui.deleteButton":"onDelete"},initialize:function(){this.template=bamboo.feature.quick.filters.admin.quickFilterRow,this.$el.data("quick-filter-id",this.model.get("id"))},onEdit:function(e){e.preventDefault(),new i({model:this.model,collection:this.getOption("collection"),$loadingIcon:this.getOption("$loadingIcon")})},onDelete:function(i){i.preventDefault(),new e({model:this.model,collection:this.getOption("collection"),$loadingIcon:this.getOption("$loadingIcon")})}});return o.CompositeView.extend({template:bamboo.feature.quick.filters.admin.quickFiltersTable,behaviors:{DragAndDrop:{behaviorClass:r}},onShow:function(){this.triggerMethod("initDragAndDrop")},childViewContainer:"tbody",childViewOptions:function(){return{collection:this.collection,$loadingIcon:this.getOption("$loadingIcon")}},childView:d,emptyView:c})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/quick-filters-manage-app.js' */
define("feature/quick-filters-admin/quick-filters-manage-app",["feature/quick-filters-admin/entity/quick-filter-model","feature/quick-filters-admin/entity/quick-filters-collection","feature/quick-filters-admin/quick-filters-edit-dialog","feature/quick-filters-admin/quick-filters-list-view","jquery","underscore","marionette","aui/flag"],function(i,t,n,e,o,l,c,a){"use strict";return c.Application.extend({el:null,addButton:null,initialize:function(i){var t=i||{};this.el=t.el,this.addButton=t.addButton,this.loadingIcon=t.loadingIcon},onStart:function(){var c=this;this.addRegions({main:this.el}),this.collection=new t;var s=o(this.loadingIcon);this.listenTo(this.collection,"request",function(){s.show()}),this.listenTo(this.collection,"sync",function(){s.hide()}),this.collection.fetch().then(function(){c.getRegion("main").show(new e({collection:c.collection,$loadingIcon:s}))}).fail(function(){new a({type:"error",close:"manual",body:"Quick filters could not be read from the server."})}),o(this.addButton).on("click",l.bind(function(){new n({model:new i,collection:this.collection,$loadingIcon:s})},this))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/quick-filters-configure-rules-app.js' */
define("feature/quick-filters-admin/quick-filters-configure-rules-app",["jquery","underscore","marionette"],function(t,e,i){"use strict";return i.Application.extend({defaultSettings:{el:null,configContainer:null,rulesList:null,addButton:null,templates:{ruleListItem:null,iconTemplate:null},i18n:{newRuleLabel:"New rule",confirmAbandonRule:"The new rule has not yet been saved. If you continue you will abandon the new rule.\n\nAre you sure you want to continue?",ruleAddSuccess:"Rule created successfully.",ruleEditSuccess:"Rule updated successfully.",ruleDeleteSuccess:"Rule deleted successfully.",defaultDisplayText:"No rule selected",defaultDisplayTextHelp:"Select a rule from the list on the left to configure it."}},initialize:function(t){this.settings=e.defaults(t||{},this.defaultSettings),this.el=this.settings.el,this.editor=new BAMBOO.ConfigPanelEditor},onStart:function(){this.editor.init({editor:this.el,configContainer:this.settings.configContainer,itemList:this.settings.rulesList,deleteItemKey:"ruleResult",checkListHasItems:t.noop,configFormSuccess:this.onFormSuccess.bind(this),configFormWarnings:this.onFormWarnings.bind(this),templates:{item:this.settings.templates.ruleListItem,icon:this.settings.templates.iconTemplate},i18n:{confirmAbandonItem:this.settings.i18n.confirmAbandonRule,itemDeleteSuccess:this.settings.i18n.ruleDeleteSuccess,defaultDisplayText:this.settings.i18n.defaultDisplayText,defaultDisplayTextDescription:this.settings.i18n.defaultDisplayTextHelp},sortable:{enabled:!1},deleteDialogHeight:200}),this.$rulesList=t(this.settings.rulesList),this.$addButton=t(this.settings.addButton),this.$loadingIndicator=t(AJS.template.load(this.settings.templates.iconTemplate).fill({type:"loading"}).toString()).insertAfter(this.$addButton.closest(".aui-toolbar")),this.$loadingIndicator.hide(),this.$addButton.on("click",this.onAddButtonClick.bind(this))},onFormSuccess:function(e,i){return this.editor.displayMessages([{title:i?this.settings.i18n.ruleAddSuccess:this.settings.i18n.ruleEditSuccess}]),t(AJS.template.load(this.settings.templates.ruleListItem).fill({name:e.ruleResult.name,id:e.ruleResult.id}).toString()).addClass("active")},onFormWarnings:function(t){t.forEach(function(t){this.editor.displayMessages([{type:"warning",title:t}])},this)},onAddButtonClick:function(i){i.preventDefault();var s=t(AJS.template.load(this.settings.templates.ruleListItem).fill({name:this.settings.i18n.newRuleLabel,id:""}).toString());if(!this.editor.isOkayToProceedWithUnsavedItem())return this.editor.setFocus(),!1;this.$loadingIndicator.show(),this.editor.add(this.$addButton.attr("href"),s,"appendTo",this.$rulesList).success(e.bind(function(){this.$loadingIndicator.hide()},this))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/quick-filters-confirm-delete-dialog.js' */
define("feature/quick-filters-admin/quick-filters-confirm-delete-dialog",["jquery","underscore","marionette","widget/dialog","aui/flag"],function(e,t,i,n,l){"use strict";return n.extend({defaultSettings:{height:300,width:600,header:"Delete filter",buttons:[{id:"confirm",label:"Delete",cssClass:"delete-quick-filter aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link",cssClass:"cancel-delete-quick-filter"}]},initialize:function(e){var i=e||{};this.$loadingIcon=i.$loadingIcon,i.content=bamboo.feature.quick.filters.admin.confirmDeleteQuickFilter({name:i.model.get("name")}),n.prototype.initialize.call(this,t.defaults(i,this.defaultSettings))},onButtonClick:function(e){for(var t,i=this,o=arguments.length,a=Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];(t=n.prototype.onButtonClick).call.apply(t,[this,e].concat(a)),"confirm"===e&&(this.$loadingIcon.show(),this.model.destroy({wait:!0}).then(function(){i.triggerAnalyticsEventOnDelete(i.collection.size()),new l({type:"success",close:"auto",body:"Quick filter successfully deleted"}),i.dialog.remove()}).fail(function(){new l({type:"error",close:"manual",body:"An error occurred while deleting quick filter"})}).always(function(){i.collection.fetch({reset:!0})}))},triggerAnalyticsEventOnDelete:function(e){AJS.trigger("analyticsEvent",{name:"bamboo.quick.filter.deleted",data:{total:e}})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/quick-filters-edit-dialog.js' */
define("feature/quick-filters-admin/quick-filters-edit-dialog",["jquery","underscore","marionette","widget/dialog","util/ajax-form","aui/flag"],function(i,t,e,n,o,a){"use strict";var r=e.ItemView.extend({ui:{form:"#edit-quick-filter-form",name:"#name"},events:{"submit @ui.form":"onFormSubmit"},initialize:function(i){this.template=bamboo.feature.quick.filters.admin.editQuickFilterForm,this.onFormSubmit=i.onFormSubmit},save:function(){var i=this;this.ui.form.find(".error").remove();var t=this.model.isNew(),e={name:this.ui.name.val()},n=this.model.validate(e);return n&&n.hasErrors()?void this.displayErrors(n):this.model.save(e,{wait:!0,patch:!0}).then(function(){t&&i.triggerAnalyticsEventOnCreate(i.collection.size()+1),new a({type:"success",close:"auto",body:"Quick filter successfully saved"})}).fail(function(t){t&&t.responseJSON?i.displayErrors(t.responseJSON):new a({type:"error",close:"manual",body:"An error occurred while saving quick filter"})})},displayErrors:function(i){new o(this.ui.form).injectErrors(i)},triggerAnalyticsEventOnCreate:function(i){AJS.trigger("analyticsEvent",{name:"bamboo.quick.filter.created",data:{total:i}})}});return n.extend({defaultSettings:{height:320,width:600,buttons:[{id:"save",label:"Save",cssClass:"save-quick-filter aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link",cssClass:"cancel-edit-quick-filter"}]},initialize:function(i){var e=i||{};this.$loadingIcon=e.$loadingIcon,e.content=bamboo.feature.quick.filters.admin.editQuickFilterFormContainer({cssClass:"edit-quick-filter"}),e.header=e.model.get("id")?"Rename filter":"Create filter",AJS.bind("show.dialog",this.onDialogShow.bind(this)),AJS.bind("remove.dialog",this.onDialogHide.bind(this)),n.prototype.initialize.call(this,t.defaults(e,this.defaultSettings))},onDialogShow:function(i,t){var n=this;t.dialog&&t.dialog===this.dialog&&(this.region=new e.Region({el:".edit-quick-filter"}),this.region.show(new r({model:this.model,collection:this.collection,onFormSubmit:function(i){i.preventDefault(),n.onButtonClick("save")}})),this.dialog.updateHeight())},onDialogHide:function(){this.region&&this.region.empty()},onButtonClick:function(i){for(var t,e=this,o=arguments.length,a=Array(o>1?o-1:0),r=1;r<o;r++)a[r-1]=arguments[r];(t=n.prototype.onButtonClick).call.apply(t,[this,i].concat(a)),"save"===i&&(this.$loadingIcon.show(),this.region.currentView.save().then(function(){e.dialog.remove(),e.collection.fetch({reset:!0})}).fail(function(){e.$loadingIcon.hide(),e.dialog.updateHeight()}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-quick-filters-admin', location = '/feature/quick-filters-admin/entity/quick-filter-model.js' */
define("feature/quick-filters-admin/entity/quick-filter-model",["backbone","util/error-collection"],function(e,t){"use strict";return e.Model.extend({idAttribute:"id",urlRoot:AJS.contextPath()+"/rest/api/latest/quickFilter",defaults:{id:null,name:"",position:null,hasRules:!1},validate:function(e){var i=new t;return e.name||i.addFieldError("name","Quick filter\u0027s name is required."),e.position&&!_.isNumber(e.position)&&i.addFieldError("position","Position must be a number."),!!i.hasErrors()&&i},save:function(t,i){return!this.isNew()&&i.patch&&(i.type="PUT"),e.Model.prototype.save.call(this,t,i)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-table-add-bar', location = '/widget/table-add-bar/table-add-bar.soy' */
// This file was automatically generated from table-add-bar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.table.add.bar.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.table == 'undefined') { bamboo.widget.table = {}; }
if (typeof bamboo.widget.table.add == 'undefined') { bamboo.widget.table.add = {}; }
if (typeof bamboo.widget.table.add.bar == 'undefined') { bamboo.widget.table.add.bar = {}; }


bamboo.widget.table.add.bar.picker = function(opt_data, opt_ignored) {
  return '<form class="aui"><table class="table-add-bar"><tbody><tr><td class="table-add-bar__cell table-add-bar__cell-items">' + aui.form.input({type: 'text', autofocus: 'off', name: 'items', id: 'table-add-bar__items', autocomplete: 'off', value: ''}) + '</td><td class="table-add-bar__cell table-add-bar__cell-submit">' + aui.form.submit({id: 'table-add-bar__add', type: 'primary', text: "Add"}) + '</td></tr></tbody></table></form>';
};
if (goog.DEBUG) {
  bamboo.widget.table.add.bar.picker.soyTemplateName = 'bamboo.widget.table.add.bar.picker';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-table-add-bar', location = '/widget/table-add-bar/table-add-bar.js' */
function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}define("widget/table-add-bar",["jquery","underscore","backbone","marionette","aui","util/errors"],function(t,e,i,n,o,s){"use strict";var r=bamboo.widget.table.add.bar;return n.ItemView.extend({template:r.picker,ui:{items:".table-add-bar__cell-items input",submit:".table-add-bar__cell-submit input"},events:{submit:"onSubmit","change @ui.items":"onItemsChange"},collectionEvents:{"add remove reset":"toggleSubmitDisabled"},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.Collection.extend({model:i.Model.extend({idAttribute:t.idAttribute})});this.options=t,this.sending=!1,this.collection=new e,this.validateOptions()},validateOptions:function(){var t=this;if(this.options.freeText){["formatSelection","formatResult"].forEach(function(e){if(t.options[e])throw new Error("Option '"+e+"' is not allowed if 'freeText' is enabled.")})}},initSelect2:function(){var t=this.options,e=t.url,i=t.placeholder,n=t.idAttribute,s=t.freeText,r=void 0!==s&&s,l=t.formatResult,a=void 0===l?function(t){return o.escapeHtml(t[n])}:l,u=t.formatSelection,c=void 0===u?function(t){return o.escapeHtml(t[n])}:u,d=this.toSelect2Result.bind(this),f={width:"100%",multiple:!0,placeholder:i,formatResult:function(t){return a(t.entity)},formatSelection:function(t){return c(t.entity)},ajax:{url:e,dataType:"json",quietMillis:250,data:function(t,e){return{"start-index":25*(e-1),"max-result":25,filter:t}},results:function(t,e){return{results:t.results.map(d),more:25*e<t.size}}}};r&&(f.tags=!0,f.createSearchChoice=function(t){return d(_defineProperty({},n,t))}),this.ui.items.auiSelect2(f)},toSelect2Result:function(t){return{text:t[this.options.idAttribute],id:t[this.options.idAttribute],entity:t}},toggleSubmitDisabled:function(t){var i=this.sending||(e.isBoolean(t)?t:this.collection.isEmpty());this.ui.submit.prop("disabled",i)},onRender:function(){this.initSelect2(),this.toggleSubmitDisabled()},onItemsChange:function(t){t.added&&this.collection.add(t.added.entity),t.removed&&this.collection.remove(t.removed.id)},onSubmit:function(i){var n=this;i.preventDefault(),this.sending=!0,this.toggleSubmitDisabled(),t.ajax({url:this.options.postUrl,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(this.collection.map(function(t){return t.get(n.options.idAttribute)}))}).done(function(){e.isFunction(n.options.success)&&n.options.success(n.collection),n.ui.items.select2("data",[]),n.collection.reset()}).fail(function(t){(e.isFunction(n.options.error)?n.options.error:s)(t,n.collection)}).always(function(){n.sending=!1,n.toggleSubmitDisabled()})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:polyfill-intersection-observer', location = '/polyfill/intersection-observer/intersection-observer-0.5.1.js' */
/**
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.
 *
 *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document
 *
 */

(function(window, document) {
'use strict';


// Exits early if all IntersectionObserver and IntersectionObserverEntry
// features are natively supported.
if ('IntersectionObserver' in window &&
    'IntersectionObserverEntry' in window &&
    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {

  // Minimal polyfill for Edge 15's lack of `isIntersecting`
  // See: https://github.com/w3c/IntersectionObserver/issues/211
  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {
    Object.defineProperty(window.IntersectionObserverEntry.prototype,
      'isIntersecting', {
      get: function () {
        return this.intersectionRatio > 0;
      }
    });
  }
  return;
}


/**
 * An IntersectionObserver registry. This registry exists to hold a strong
 * reference to IntersectionObserver instances currently observing a target
 * element. Without this registry, instances without another reference may be
 * garbage collected.
 */
var registry = [];


/**
 * Creates the global IntersectionObserverEntry constructor.
 * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry
 * @param {Object} entry A dictionary of instance properties.
 * @constructor
 */
function IntersectionObserverEntry(entry) {
  this.time = entry.time;
  this.target = entry.target;
  this.rootBounds = entry.rootBounds;
  this.boundingClientRect = entry.boundingClientRect;
  this.intersectionRect = entry.intersectionRect || getEmptyRect();
  this.isIntersecting = !!entry.intersectionRect;

  // Calculates the intersection ratio.
  var targetRect = this.boundingClientRect;
  var targetArea = targetRect.width * targetRect.height;
  var intersectionRect = this.intersectionRect;
  var intersectionArea = intersectionRect.width * intersectionRect.height;

  // Sets intersection ratio.
  if (targetArea) {
    // Round the intersection ratio to avoid floating point math issues:
    // https://github.com/w3c/IntersectionObserver/issues/324
    this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4));
  } else {
    // If area is zero and is intersecting, sets to 1, otherwise to 0
    this.intersectionRatio = this.isIntersecting ? 1 : 0;
  }
}


/**
 * Creates the global IntersectionObserver constructor.
 * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface
 * @param {Function} callback The function to be invoked after intersection
 *     changes have queued. The function is not invoked if the queue has
 *     been emptied by calling the `takeRecords` method.
 * @param {Object=} opt_options Optional configuration options.
 * @constructor
 */
function IntersectionObserver(callback, opt_options) {

  var options = opt_options || {};

  if (typeof callback != 'function') {
    throw new Error('callback must be a function');
  }

  if (options.root && options.root.nodeType != 1) {
    throw new Error('root must be an Element');
  }

  // Binds and throttles `this._checkForIntersections`.
  this._checkForIntersections = throttle(
      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);

  // Private properties.
  this._callback = callback;
  this._observationTargets = [];
  this._queuedEntries = [];
  this._rootMarginValues = this._parseRootMargin(options.rootMargin);

  // Public properties.
  this.thresholds = this._initThresholds(options.threshold);
  this.root = options.root || null;
  this.rootMargin = this._rootMarginValues.map(function(margin) {
    return margin.value + margin.unit;
  }).join(' ');
}


/**
 * The minimum interval within which the document will be checked for
 * intersection changes.
 */
IntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;


/**
 * The frequency in which the polyfill polls for intersection changes.
 * this can be updated on a per instance basis and must be set prior to
 * calling `observe` on the first target.
 */
IntersectionObserver.prototype.POLL_INTERVAL = null;

/**
 * Use a mutation observer on the root element
 * to detect intersection changes.
 */
IntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;


/**
 * Starts observing a target element for intersection changes based on
 * the thresholds values.
 * @param {Element} target The DOM element to observe.
 */
IntersectionObserver.prototype.observe = function(target) {
  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {
    return item.element == target;
  });

  if (isTargetAlreadyObserved) {
    return;
  }

  if (!(target && target.nodeType == 1)) {
    throw new Error('target must be an Element');
  }

  this._registerInstance();
  this._observationTargets.push({element: target, entry: null});
  this._monitorIntersections();
  this._checkForIntersections();
};


/**
 * Stops observing a target element for intersection changes.
 * @param {Element} target The DOM element to observe.
 */
IntersectionObserver.prototype.unobserve = function(target) {
  this._observationTargets =
      this._observationTargets.filter(function(item) {

    return item.element != target;
  });
  if (!this._observationTargets.length) {
    this._unmonitorIntersections();
    this._unregisterInstance();
  }
};


/**
 * Stops observing all target elements for intersection changes.
 */
IntersectionObserver.prototype.disconnect = function() {
  this._observationTargets = [];
  this._unmonitorIntersections();
  this._unregisterInstance();
};


/**
 * Returns any queue entries that have not yet been reported to the
 * callback and clears the queue. This can be used in conjunction with the
 * callback to obtain the absolute most up-to-date intersection information.
 * @return {Array} The currently queued entries.
 */
IntersectionObserver.prototype.takeRecords = function() {
  var records = this._queuedEntries.slice();
  this._queuedEntries = [];
  return records;
};


/**
 * Accepts the threshold value from the user configuration object and
 * returns a sorted array of unique threshold values. If a value is not
 * between 0 and 1 and error is thrown.
 * @private
 * @param {Array|number=} opt_threshold An optional threshold value or
 *     a list of threshold values, defaulting to [0].
 * @return {Array} A sorted list of unique and valid threshold values.
 */
IntersectionObserver.prototype._initThresholds = function(opt_threshold) {
  var threshold = opt_threshold || [0];
  if (!Array.isArray(threshold)) threshold = [threshold];

  return threshold.sort().filter(function(t, i, a) {
    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {
      throw new Error('threshold must be a number between 0 and 1 inclusively');
    }
    return t !== a[i - 1];
  });
};


/**
 * Accepts the rootMargin value from the user configuration object
 * and returns an array of the four margin values as an object containing
 * the value and unit properties. If any of the values are not properly
 * formatted or use a unit other than px or %, and error is thrown.
 * @private
 * @param {string=} opt_rootMargin An optional rootMargin value,
 *     defaulting to '0px'.
 * @return {Array<Object>} An array of margin objects with the keys
 *     value and unit.
 */
IntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {
  var marginString = opt_rootMargin || '0px';
  var margins = marginString.split(/\s+/).map(function(margin) {
    var parts = /^(-?\d*\.?\d+)(px|%)$/.exec(margin);
    if (!parts) {
      throw new Error('rootMargin must be specified in pixels or percent');
    }
    return {value: parseFloat(parts[1]), unit: parts[2]};
  });

  // Handles shorthand.
  margins[1] = margins[1] || margins[0];
  margins[2] = margins[2] || margins[0];
  margins[3] = margins[3] || margins[1];

  return margins;
};


/**
 * Starts polling for intersection changes if the polling is not already
 * happening, and if the page's visibility state is visible.
 * @private
 */
IntersectionObserver.prototype._monitorIntersections = function() {
  if (!this._monitoringIntersections) {
    this._monitoringIntersections = true;

    // If a poll interval is set, use polling instead of listening to
    // resize and scroll events or DOM mutations.
    if (this.POLL_INTERVAL) {
      this._monitoringInterval = setInterval(
          this._checkForIntersections, this.POLL_INTERVAL);
    }
    else {
      addEvent(window, 'resize', this._checkForIntersections, true);
      addEvent(document, 'scroll', this._checkForIntersections, true);

      if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in window) {
        this._domObserver = new MutationObserver(this._checkForIntersections);
        this._domObserver.observe(document, {
          attributes: true,
          childList: true,
          characterData: true,
          subtree: true
        });
      }
    }
  }
};


/**
 * Stops polling for intersection changes.
 * @private
 */
IntersectionObserver.prototype._unmonitorIntersections = function() {
  if (this._monitoringIntersections) {
    this._monitoringIntersections = false;

    clearInterval(this._monitoringInterval);
    this._monitoringInterval = null;

    removeEvent(window, 'resize', this._checkForIntersections, true);
    removeEvent(document, 'scroll', this._checkForIntersections, true);

    if (this._domObserver) {
      this._domObserver.disconnect();
      this._domObserver = null;
    }
  }
};


/**
 * Scans each observation target for intersection changes and adds them
 * to the internal entries queue. If new entries are found, it
 * schedules the callback to be invoked.
 * @private
 */
IntersectionObserver.prototype._checkForIntersections = function() {
  var rootIsInDom = this._rootIsInDom();
  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();

  this._observationTargets.forEach(function(item) {
    var target = item.element;
    var targetRect = getBoundingClientRect(target);
    var rootContainsTarget = this._rootContainsTarget(target);
    var oldEntry = item.entry;
    var intersectionRect = rootIsInDom && rootContainsTarget &&
        this._computeTargetAndRootIntersection(target, rootRect);

    var newEntry = item.entry = new IntersectionObserverEntry({
      time: now(),
      target: target,
      boundingClientRect: targetRect,
      rootBounds: rootRect,
      intersectionRect: intersectionRect
    });

    if (!oldEntry) {
      this._queuedEntries.push(newEntry);
    } else if (rootIsInDom && rootContainsTarget) {
      // If the new entry intersection ratio has crossed any of the
      // thresholds, add a new entry.
      if (this._hasCrossedThreshold(oldEntry, newEntry)) {
        this._queuedEntries.push(newEntry);
      }
    } else {
      // If the root is not in the DOM or target is not contained within
      // root but the previous entry for this target had an intersection,
      // add a new record indicating removal.
      if (oldEntry && oldEntry.isIntersecting) {
        this._queuedEntries.push(newEntry);
      }
    }
  }, this);

  if (this._queuedEntries.length) {
    this._callback(this.takeRecords(), this);
  }
};


/**
 * Accepts a target and root rect computes the intersection between then
 * following the algorithm in the spec.
 * TODO(philipwalton): at this time clip-path is not considered.
 * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo
 * @param {Element} target The target DOM element
 * @param {Object} rootRect The bounding rect of the root after being
 *     expanded by the rootMargin value.
 * @return {?Object} The final intersection rect object or undefined if no
 *     intersection is found.
 * @private
 */
IntersectionObserver.prototype._computeTargetAndRootIntersection =
    function(target, rootRect) {

  // If the element isn't displayed, an intersection can't happen.
  if (window.getComputedStyle(target).display == 'none') return;

  var targetRect = getBoundingClientRect(target);
  var intersectionRect = targetRect;
  var parent = getParentNode(target);
  var atRoot = false;

  while (!atRoot) {
    var parentRect = null;
    var parentComputedStyle = parent.nodeType == 1 ?
        window.getComputedStyle(parent) : {};

    // If the parent isn't displayed, an intersection can't happen.
    if (parentComputedStyle.display == 'none') return;

    if (parent == this.root || parent == document) {
      atRoot = true;
      parentRect = rootRect;
    } else {
      // If the element has a non-visible overflow, and it's not the <body>
      // or <html> element, update the intersection rect.
      // Note: <body> and <html> cannot be clipped to a rect that's not also
      // the document rect, so no need to compute a new intersection.
      if (parent != document.body &&
          parent != document.documentElement &&
          parentComputedStyle.overflow != 'visible') {
        parentRect = getBoundingClientRect(parent);
      }
    }

    // If either of the above conditionals set a new parentRect,
    // calculate new intersection data.
    if (parentRect) {
      intersectionRect = computeRectIntersection(parentRect, intersectionRect);

      if (!intersectionRect) break;
    }
    parent = getParentNode(parent);
  }
  return intersectionRect;
};


/**
 * Returns the root rect after being expanded by the rootMargin value.
 * @return {Object} The expanded root rect.
 * @private
 */
IntersectionObserver.prototype._getRootRect = function() {
  var rootRect;
  if (this.root) {
    rootRect = getBoundingClientRect(this.root);
  } else {
    // Use <html>/<body> instead of window since scroll bars affect size.
    var html = document.documentElement;
    var body = document.body;
    rootRect = {
      top: 0,
      left: 0,
      right: html.clientWidth || body.clientWidth,
      width: html.clientWidth || body.clientWidth,
      bottom: html.clientHeight || body.clientHeight,
      height: html.clientHeight || body.clientHeight
    };
  }
  return this._expandRectByRootMargin(rootRect);
};


/**
 * Accepts a rect and expands it by the rootMargin value.
 * @param {Object} rect The rect object to expand.
 * @return {Object} The expanded rect.
 * @private
 */
IntersectionObserver.prototype._expandRectByRootMargin = function(rect) {
  var margins = this._rootMarginValues.map(function(margin, i) {
    return margin.unit == 'px' ? margin.value :
        margin.value * (i % 2 ? rect.width : rect.height) / 100;
  });
  var newRect = {
    top: rect.top - margins[0],
    right: rect.right + margins[1],
    bottom: rect.bottom + margins[2],
    left: rect.left - margins[3]
  };
  newRect.width = newRect.right - newRect.left;
  newRect.height = newRect.bottom - newRect.top;

  return newRect;
};


/**
 * Accepts an old and new entry and returns true if at least one of the
 * threshold values has been crossed.
 * @param {?IntersectionObserverEntry} oldEntry The previous entry for a
 *    particular target element or null if no previous entry exists.
 * @param {IntersectionObserverEntry} newEntry The current entry for a
 *    particular target element.
 * @return {boolean} Returns true if a any threshold has been crossed.
 * @private
 */
IntersectionObserver.prototype._hasCrossedThreshold =
    function(oldEntry, newEntry) {

  // To make comparing easier, an entry that has a ratio of 0
  // but does not actually intersect is given a value of -1
  var oldRatio = oldEntry && oldEntry.isIntersecting ?
      oldEntry.intersectionRatio || 0 : -1;
  var newRatio = newEntry.isIntersecting ?
      newEntry.intersectionRatio || 0 : -1;

  // Ignore unchanged ratios
  if (oldRatio === newRatio) return;

  for (var i = 0; i < this.thresholds.length; i++) {
    var threshold = this.thresholds[i];

    // Return true if an entry matches a threshold or if the new ratio
    // and the old ratio are on the opposite sides of a threshold.
    if (threshold == oldRatio || threshold == newRatio ||
        threshold < oldRatio !== threshold < newRatio) {
      return true;
    }
  }
};


/**
 * Returns whether or not the root element is an element and is in the DOM.
 * @return {boolean} True if the root element is an element and is in the DOM.
 * @private
 */
IntersectionObserver.prototype._rootIsInDom = function() {
  return !this.root || containsDeep(document, this.root);
};


/**
 * Returns whether or not the target element is a child of root.
 * @param {Element} target The target element to check.
 * @return {boolean} True if the target element is a child of root.
 * @private
 */
IntersectionObserver.prototype._rootContainsTarget = function(target) {
  return containsDeep(this.root || document, target);
};


/**
 * Adds the instance to the global IntersectionObserver registry if it isn't
 * already present.
 * @private
 */
IntersectionObserver.prototype._registerInstance = function() {
  if (registry.indexOf(this) < 0) {
    registry.push(this);
  }
};


/**
 * Removes the instance from the global IntersectionObserver registry.
 * @private
 */
IntersectionObserver.prototype._unregisterInstance = function() {
  var index = registry.indexOf(this);
  if (index != -1) registry.splice(index, 1);
};


/**
 * Returns the result of the performance.now() method or null in browsers
 * that don't support the API.
 * @return {number} The elapsed time since the page was requested.
 */
function now() {
  return window.performance && performance.now && performance.now();
}


/**
 * Throttles a function and delays its execution, so it's only called at most
 * once within a given time period.
 * @param {Function} fn The function to throttle.
 * @param {number} timeout The amount of time that must pass before the
 *     function can be called again.
 * @return {Function} The throttled function.
 */
function throttle(fn, timeout) {
  var timer = null;
  return function () {
    if (!timer) {
      timer = setTimeout(function() {
        fn();
        timer = null;
      }, timeout);
    }
  };
}


/**
 * Adds an event handler to a DOM node ensuring cross-browser compatibility.
 * @param {Node} node The DOM node to add the event handler to.
 * @param {string} event The event name.
 * @param {Function} fn The event handler to add.
 * @param {boolean} opt_useCapture Optionally adds the even to the capture
 *     phase. Note: this only works in modern browsers.
 */
function addEvent(node, event, fn, opt_useCapture) {
  if (typeof node.addEventListener == 'function') {
    node.addEventListener(event, fn, opt_useCapture || false);
  }
  else if (typeof node.attachEvent == 'function') {
    node.attachEvent('on' + event, fn);
  }
}


/**
 * Removes a previously added event handler from a DOM node.
 * @param {Node} node The DOM node to remove the event handler from.
 * @param {string} event The event name.
 * @param {Function} fn The event handler to remove.
 * @param {boolean} opt_useCapture If the event handler was added with this
 *     flag set to true, it should be set to true here in order to remove it.
 */
function removeEvent(node, event, fn, opt_useCapture) {
  if (typeof node.removeEventListener == 'function') {
    node.removeEventListener(event, fn, opt_useCapture || false);
  }
  else if (typeof node.detatchEvent == 'function') {
    node.detatchEvent('on' + event, fn);
  }
}


/**
 * Returns the intersection between two rect objects.
 * @param {Object} rect1 The first rect.
 * @param {Object} rect2 The second rect.
 * @return {?Object} The intersection rect or undefined if no intersection
 *     is found.
 */
function computeRectIntersection(rect1, rect2) {
  var top = Math.max(rect1.top, rect2.top);
  var bottom = Math.min(rect1.bottom, rect2.bottom);
  var left = Math.max(rect1.left, rect2.left);
  var right = Math.min(rect1.right, rect2.right);
  var width = right - left;
  var height = bottom - top;

  return (width >= 0 && height >= 0) && {
    top: top,
    bottom: bottom,
    left: left,
    right: right,
    width: width,
    height: height
  };
}


/**
 * Shims the native getBoundingClientRect for compatibility with older IE.
 * @param {Element} el The element whose bounding rect to get.
 * @return {Object} The (possibly shimmed) rect of the element.
 */
function getBoundingClientRect(el) {
  var rect;

  try {
    rect = el.getBoundingClientRect();
  } catch (err) {
    // Ignore Windows 7 IE11 "Unspecified error"
    // https://github.com/w3c/IntersectionObserver/pull/205
  }

  if (!rect) return getEmptyRect();

  // Older IE
  if (!(rect.width && rect.height)) {
    rect = {
      top: rect.top,
      right: rect.right,
      bottom: rect.bottom,
      left: rect.left,
      width: rect.right - rect.left,
      height: rect.bottom - rect.top
    };
  }
  return rect;
}


/**
 * Returns an empty rect object. An empty rect is returned when an element
 * is not in the DOM.
 * @return {Object} The empty rect.
 */
function getEmptyRect() {
  return {
    top: 0,
    bottom: 0,
    left: 0,
    right: 0,
    width: 0,
    height: 0
  };
}

/**
 * Checks to see if a parent element contains a child element (including inside
 * shadow DOM).
 * @param {Node} parent The parent element.
 * @param {Node} child The child element.
 * @return {boolean} True if the parent node contains the child node.
 */
function containsDeep(parent, child) {
  var node = child;
  while (node) {
    if (node == parent) return true;

    node = getParentNode(node);
  }
  return false;
}


/**
 * Gets the parent node of an element or its host element if the parent node
 * is a shadow root.
 * @param {Node} node The node whose parent to get.
 * @return {Node|null} The parent node or null if no parent exists.
 */
function getParentNode(node) {
  var parent = node.parentNode;

  if (parent && parent.nodeType == 11 && parent.host) {
    // If the parent is a shadow root, return the host element.
    return parent.host;
  }

  if (parent && parent.assignedSlot) {
    // If the parent is distributed in a <slot>, return the parent of a slot.
    return parent.assignedSlot.parentNode;
  }

  return parent;
}


// Exposes the constructors globally.
window.IntersectionObserver = IntersectionObserver;
window.IntersectionObserverEntry = IntersectionObserverEntry;

}(window, document));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-infinite-scroll-table', location = '/widget/infinite-scroll-table/infinite-scroll-table.js' */
define("widget/infinite-scroll-table",["jquery","underscore","marionette","util/errors","widget/infinite-scroll-table/templates","widget/infinite-scroll-table/collection","widget/infinite-scroll-table/row-view"],function(t,i,e,o,n,s,r){"use strict";return e.CompositeView.extend({childView:r,childViewContainer:"tbody",childViewOptions:function(t,e){return this.groupRowsBy&&this.attachRowGroupingHelpers(t,e),i.pick(this.options,"actions","columns","parseRows")},collectionEvents:{request:"onRequestStart",sync:"onRequestEnd",destroy:"onRequestEnd",error:"onRequestError",remove:"render"},template:n.table,ui:{loading:".infinite-scroll-table__footer--loading",finished:".infinite-scroll-table__footer--finished"},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=this.validateOptions(t),this.fetching=!1,this.screenObserver=new IntersectionObserver(this.elementIntersection.bind(this),{root:null,rootMargin:"300px 0px",threshold:0});var i=this.options.url,e=this.options.idAttribute;this.parseRows=this.options.parseRows,this.groupRowsBy=this.options.groupRowsBy;var o=this.getCollection();this.collection=new o([],{url:i,idAttribute:e})},validateOptions:function(t){if(!i.isString(t.url))throw new Error('Parameter "url" is obligatory for the InfiniteScrollTable component');if(!i.isArray(t.columns))throw new Error('Parameter "columns" is obligatory for the InfiniteScrollTable component');if(!i.isArray(t.actions))throw new Error('Parameter "actions" is obligatory for the InfiniteScrollTable component');if(this.validateActions(t.actions),t.groupRowsBy&&(!i.isString(t.groupRowsBy)||!t.columns.filter(function(i){return i.key===t.groupRowsBy}).length))throw new Error("The groupColumnKey column requires to have a correspondent column key");if(t.parseRows&&(!i.isFunction(t.parseRows)||!i.isEqual({row:{},columns:[]},t.parseRows({},[]))))throw new Error('The "parseRow" function follow implementation (row,columns) => {row, columns}');return t},validateActions:function(t){t.forEach(function(t){if(void 0===t.label&&void 0===t.icon)throw new Error("label or icon should be provided for action")})},getCollection:function(){var t=this;return this.options.parseResults?s.extend({parse:function(i){return i=s.prototype.parse.call(t,i),t.options.parseResults.call(t,i)}}):s},serializeData:function(){return{columns:this.options.columns}},elementIntersection:function(t){var i=this;t.filter(function(t){return t.target.isEqualNode(i.ui.loading.get(0))}).forEach(function(t){i.isLoaderVisible=t.isIntersecting,i.updateInfiniteScroll()})},onRender:function(){this.screenObserver.observe(this.ui.loading.get(0))},onAttach:function(){this.screenObserver.observe(this.ui.loading.get(0))},onBeforeDestroy:function(){this.screenObserver.disconnect()},updateInfiniteScroll:function(){this.isLoaderVisible&&!this.fetching&&(this.collection.hasNextPage()?this.collection.nextPage():this.completeLoad())},completeLoad:function(){this.ui.loading.hide(),this.ui.finished.show(),this.collection.length?this.ui.finished.text(this.options.finishedText):this.ui.finished.text(this.options.emptyText)},restartLoad:function(){this.ui.loading.show(),this.ui.finished.hide(),this.ui.finished.text("")},attachRowGroupingHelpers:function(t,i){var e=this.collection.at(i-1),o=this.collection.at(i+1);e&&e.get(this.groupRowsBy)===t.get(this.groupRowsBy)?t.set({hideColumnContent:this.groupRowsBy}):t.set({firstRow:!0}),o&&o.get(this.groupRowsBy)!==t.get(this.groupRowsBy)&&t.set({lastRow:!0})},addElements:function(t){this.collection.add(t)},onRequestStart:function(){this.fetching=!0},onRequestEnd:function(){this.fetching=!1,this.updateInfiniteScroll()},onRequestError:function(t,i){this.fetching=!1,o(i)},applyResourceFilter:function(t){this.fetching=!1,this.collection.setFilter(t),this.collection.reset(),this.restartLoad(),this.updateInfiniteScroll()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-infinite-scroll-table', location = '/widget/infinite-scroll-table/components/collection.js' */
define("widget/infinite-scroll-table/collection",["jquery","backbone"],function(t,e){"use strict";return e.Collection.extend({initialize:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.model=e.Model.extend({idAttribute:r.idAttribute}),this.nextPageUrl=r.url,this.rootUrl=r.url,this.url=r.url.split(/[?#]/)[0]},parse:function(t){return t.results},setFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.nextPageUrl=t?this.rootUrl+"&filter="+t:""+this.rootUrl},hasNextPage:function(){return!!this.nextPageUrl},nextPage:function(){var e=this,r=t.ajax({method:"GET",url:this.nextPageUrl,dataType:"json",beforeSend:function(t){t.setRequestHeader("Bamboo-User-Action","true")}});this.trigger("request",this,r),r.done(function(t,r,i){e.nextPageUrl=t.next,e.add(e.parse(t)),e.trigger("sync",e,i)}).fail(function(t){e.nextPageUrl=void 0,e.trigger("error",e,t)})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-infinite-scroll-table', location = '/widget/infinite-scroll-table/components/row-view.js' */
function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var _extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};define("widget/infinite-scroll-table/row-view",["underscore","marionette","widget/infinite-scroll-table/templates"],function(t,n,e){"use strict";return n.ItemView.extend({tagName:"tr",template:e.tableRow,events:function(){var n=this;return(this.getOption("actions")||[]).filter(function(n){return t.isFunction(n.action)}).reduce(function(t,e){return _extends({},t,_defineProperty({},"click a[data-id='"+e.id+"']",e.action.bind(null,n.model)))},{})},copyCollection:function(t){return t.map(function(t){return _extends({},t)})},processRow:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=this.getOption("parseRows");return t=t.toJSON(),e?e(t,this.copyCollection(n)):{row:t,columns:n}},processActions:function(t){var n=this;return this.getOption("actions").filter(function(e){return n.isActionApplicable(e,t)}).map(function(e){return n.buildAction(e,t)})},processColumns:function(t,n){var e=0;return t.map(function(i,o){if(e>0)return e-=1,{skipDisplay:!0};var r={class:i.class,html:i.template(n),rowHeader:i.rowHeader,isFirstRow:n.firstRow,isLastRow:n.lastRow};return i.lastColumn&&(r.colspan=t.length-o,e=r.colspan-1),i.key&&(r.key=i.key),n.hideColumnContent&&i.key===n.hideColumnContent&&(r.hideColumnContent=!0),r})},serializeData:function(){var t=this.processRow(this.model,this.getOption("columns")),n=t.row,e=t.columns;return{actions:this.processActions(n),cells:this.processColumns(e,n)}},buildAction:function(n,e){return t.isFunction(n.link)&&(n=_extends({},n,{link:n.link(e)})),n},isActionApplicable:function(n,e){return t.isFunction(n.applicable)?n.applicable(e):!t.isBoolean(n.applicable)||n.applicable}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-infinite-scroll-table', location = '/widget/infinite-scroll-table/infinite-scroll-table.soy' */
// This file was automatically generated from infinite-scroll-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.infinite.scroll.table.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.infinite == 'undefined') { bamboo.widget.infinite = {}; }
if (typeof bamboo.widget.infinite.scroll == 'undefined') { bamboo.widget.infinite.scroll = {}; }
if (typeof bamboo.widget.infinite.scroll.table == 'undefined') { bamboo.widget.infinite.scroll.table = {}; }


bamboo.widget.infinite.scroll.table.table = function(opt_data, opt_ignored) {
  var output = '<table class="aui infinite-scroll-table"><thead><tr>';
  var columnList4 = opt_data.columns;
  var columnListLen4 = columnList4.length;
  for (var columnIndex4 = 0; columnIndex4 < columnListLen4; columnIndex4++) {
    var columnData4 = columnList4[columnIndex4];
    output += '<th class="infinite-scroll-table__header ' + ((columnData4['class']) ? 'infinite-scroll-table__header--' + soy.$$escapeHtml(columnData4['class']) + ' ' + soy.$$escapeHtml(columnData4['class']) : '') + '" scope="col">' + soy.$$escapeHtml(columnData4.caption) + '</th>';
  }
  output += '<th class="infinite-scroll-table__header infinite-scroll-table__header--actions" scope="col"></th></tr></thead><tbody></tbody><tfoot><tr><td class="infinite-scroll-table__footer infinite-scroll-table__footer--finished" colspan="' + soy.$$escapeHtml(opt_data.columns.length + 1) + '" ><!--Finished or empty table messages come from the component, see InfiniteScrollTable.completeLoad --></td><td class="infinite-scroll-table__footer infinite-scroll-table__footer--loading" colspan="' + soy.$$escapeHtml(opt_data.columns.length + 1) + '" ><img src="' + soy.$$escapeHtml("") + '/images/loading.gif" alt="" /></td></tr></tfoot></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.infinite.scroll.table.table.soyTemplateName = 'bamboo.widget.infinite.scroll.table.table';
}


bamboo.widget.infinite.scroll.table.tableRow = function(opt_data, opt_ignored) {
  var output = '';
  var cellList24 = opt_data.cells;
  var cellListLen24 = cellList24.length;
  for (var cellIndex24 = 0; cellIndex24 < cellListLen24; cellIndex24++) {
    var cellData24 = cellList24[cellIndex24];
    if (! cellData24.skipDisplay) {
      var cellElement__soy27 = '' + ((cellData24.rowHeader) ? 'th' : 'td');
      var cellScope__soy33 = '' + ((cellData24.rowHeader) ? 'scope="row"' : '');
      var cellClass__soy37 = ((cellData24['class']) ? 'infinite-scroll-table__cell--' + soy.$$escapeHtml(cellData24['class']) + ' ' + soy.$$escapeHtml(cellData24['class']) : '') + ' ' + ((cellData24.isFirstRow) ? 'first-row' : '') + ' ' + ((cellData24.isLastRow) ? 'last-row' : '') + ' ';
      var cellHideColumnContent__soy53 = cellData24.hideColumnContent ? true : false;
      output += '<' + soy.$$escapeHtml(cellElement__soy27) + ' ' + soy.$$filterNoAutoescape(cellScope__soy33) + ' class="infinite-scroll-table__cell ' + soy.$$escapeHtml(cellClass__soy37) + '" colspan="' + soy.$$escapeHtml(cellData24.colspan ? cellData24.colspan : 1) + '" data-column-hidden="' + soy.$$escapeHtml(cellHideColumnContent__soy53) + '"' + ((cellData24.key) ? 'data-column-key="' + soy.$$escapeHtml(cellData24.key) + '"' : '') + '>' + ((! cellHideColumnContent__soy53) ? soy.$$filterNoAutoescape(cellData24.html) : '') + '</' + soy.$$escapeHtml(cellElement__soy27) + '>';
    }
  }
  output += '<td class="infinite-scroll-table__cell infinite-scroll-table__cell--actions">';
  var actionList81 = opt_data.actions;
  var actionListLen81 = actionList81.length;
  for (var actionIndex81 = 0; actionIndex81 < actionListLen81; actionIndex81++) {
    var actionData81 = actionList81[actionIndex81];
    output += '<a href="' + soy.$$escapeHtml(actionData81.link ? actionData81.link : '#') + '" title="' + soy.$$escapeHtml(actionData81.title) + '" data-id="' + soy.$$escapeHtml(actionData81.id) + '">' + ((actionData81.icon) ? aui.icons.icon({icon: actionData81.icon, useIconFont: true, size: 'small', accessibilityText: actionData81.cantExecuteReason}) : soy.$$escapeHtml(actionData81.label)) + '</a>';
  }
  output += '</td>';
  return output;
};
if (goog.DEBUG) {
  bamboo.widget.infinite.scroll.table.tableRow.soyTemplateName = 'bamboo.widget.infinite.scroll.table.tableRow';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-infinite-scroll-table', location = '/widget/infinite-scroll-table/components/templates.js' */
define("widget/infinite-scroll-table/templates",[],function(){"use strict";return bamboo.widget.infinite.scroll.table});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-user-groups', location = '/feature/user-groups/user-groups.js' */
define("feature/user-groups",["jquery","marionette","aui","util/errors","widget/dialog2","widget/dialog2-confirmation","widget/table-add-bar","widget/infinite-scroll-table"],function(e,t,n,s,o,i,a,r){"use strict";var m=bamboo.feature.user.groups;return t.LayoutView.extend({regions:{add:".user-groups__add",table:".user-groups__table"},template:m.content,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e},onRender:function(){var e=this.options,t=e.username,s=e.encodedUserName,o=void 0===s?encodeURIComponent(t):s,i=e.readOnly,d=void 0!==i&&i,u={url:n.contextPath()+"/rest/api/latest/admin/users/"+o+"/assigned-groups",idAttribute:"name",emptyText:"This user is not a member of any group",columns:[{class:"group-name",caption:"Group name",template:m.groupNameColumn}],actions:[]};if(!d){u.actions.push({icon:"remove",id:"remove-group-membership",title:"Delete",action:this.onRemoveMembership.bind(this)});var l={url:n.contextPath()+"/rest/api/latest/admin/users/"+o+"/unassigned-groups",postUrl:n.contextPath()+"/rest/api/latest/admin/users/"+o+"/groups",placeholder:"Add more groups",idAttribute:"name",success:this.onAddMemberships.bind(this)};this.getRegion("add").show(new a(l))}this.getRegion("table").show(new r(u))},onAddMemberships:function(e){this.getRegion("table").currentView.addElements(e.toJSON());var t=1===e.size()?n.format("Added user to \u003cstrong\u003e{0}\u003c/strong\u003e group.",n.escapeHtml(e.at(0).get("name"))):n.format("Added user to \u003cstrong\u003e{0}\u003c/strong\u003e groups.",e.size());n.flag({type:"success",close:"auto",body:t})},onRemoveMembership:function(e,t){t.preventDefault(),new i({titleText:"Remove user from group",content:m.deleteDialog(e.toJSON()),onConfirm:this.onRemoveMembershipConfirmed.bind(this,e),size:o.MEDIUM}).show()},onRemoveMembershipConfirmed:function(t,o){var i=encodeURIComponent(this.options.username);e.ajax({url:n.contextPath()+"/rest/api/latest/admin/users/"+i+"/groups",type:"DELETE",contentType:"application/json",dataType:"json",data:JSON.stringify([t.get("name")])}).done(function(){t.collection.remove(t),n.flag({type:"success",body:n.format("User has been removed from group \u003cstrong\u003e{0}\u003c/strong\u003e.",n.escapeHtml(t.get("name"))),close:"auto"})}).fail(s),o.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-user-groups', location = '/feature/user-groups/user-groups.soy' */
// This file was automatically generated from user-groups.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.user.groups.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.user == 'undefined') { bamboo.feature.user = {}; }
if (typeof bamboo.feature.user.groups == 'undefined') { bamboo.feature.user.groups = {}; }


bamboo.feature.user.groups.content = function(opt_data, opt_ignored) {
  return '<div class="user-groups"><div class="user-groups__add"></div><div class="user-groups__table"></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.user.groups.content.soyTemplateName = 'bamboo.feature.user.groups.content';
}


bamboo.feature.user.groups.deleteDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Do you really want to remove this user from the group?") + '</p><p>' + soy.$$escapeHtml("Group name") + ': <strong>' + soy.$$escapeHtml(opt_data.name) + '</strong></p>';
};
if (goog.DEBUG) {
  bamboo.feature.user.groups.deleteDialog.soyTemplateName = 'bamboo.feature.user.groups.deleteDialog';
}


bamboo.feature.user.groups.groupNameColumn = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/admin/group/editGroup.action?groupName=' + soy.$$escapeUri(opt_data.name) + '">' + aui.avatar.avatar({size: 'small', avatarImageUrl: "" + '/images/group-avatar-96.png'}) + '<span>' + soy.$$escapeHtml(opt_data.name) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.feature.user.groups.groupNameColumn.soyTemplateName = 'bamboo.feature.user.groups.groupNameColumn';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-group-members', location = '/feature/group-members/group-members.soy' */
// This file was automatically generated from group-members.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.group.members.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.group == 'undefined') { bamboo.feature.group = {}; }
if (typeof bamboo.feature.group.members == 'undefined') { bamboo.feature.group.members = {}; }


bamboo.feature.group.members.content = function(opt_data, opt_ignored) {
  return '<div class="group-members"><div class="group-members__add"></div><div class="group-members__table"></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.group.members.content.soyTemplateName = 'bamboo.feature.group.members.content';
}


bamboo.feature.group.members.removeMemberDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Do you really want to remove this user from the group?") + '</p><ul><li>' + soy.$$escapeHtml("Full name") + ': <strong>' + soy.$$escapeHtml(opt_data.fullName) + '</strong></li><li>' + soy.$$escapeHtml("Username") + ': <strong>' + soy.$$escapeHtml(opt_data.name) + '</strong></li><li>' + soy.$$escapeHtml("Email") + ': <strong>' + soy.$$escapeHtml(opt_data.email) + '</strong></li></ul>';
};
if (goog.DEBUG) {
  bamboo.feature.group.members.removeMemberDialog.soyTemplateName = 'bamboo.feature.group.members.removeMemberDialog';
}


bamboo.feature.group.members.displayNameColumn = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/admin/user/viewUser.action?username=' + soy.$$escapeUri(opt_data.name) + '">' + aui.avatar.avatar({size: 'small', avatarImageUrl: opt_data.avatarUrl ? opt_data.avatarUrl : "" + '/images/icons/useravatar.png'}) + '<span>' + soy.$$escapeHtml(opt_data.fullName) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.feature.group.members.displayNameColumn.soyTemplateName = 'bamboo.feature.group.members.displayNameColumn';
}


bamboo.feature.group.members.usernameColumn = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.feature.group.members.usernameColumn.soyTemplateName = 'bamboo.feature.group.members.usernameColumn';
}


bamboo.feature.group.members.emailColumn = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.email);
};
if (goog.DEBUG) {
  bamboo.feature.group.members.emailColumn.soyTemplateName = 'bamboo.feature.group.members.emailColumn';
}


bamboo.feature.group.members.addMemberSelect2Result = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.fullName) + ' - ' + soy.$$escapeHtml(opt_data.email);
};
if (goog.DEBUG) {
  bamboo.feature.group.members.addMemberSelect2Result.soyTemplateName = 'bamboo.feature.group.members.addMemberSelect2Result';
}


bamboo.feature.group.members.addMemberSelect2Selection = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.fullName);
};
if (goog.DEBUG) {
  bamboo.feature.group.members.addMemberSelect2Selection.soyTemplateName = 'bamboo.feature.group.members.addMemberSelect2Selection';
}


bamboo.feature.group.members.statusColumn = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isActive) ? soy.$$escapeHtml("Active") : soy.$$escapeHtml("Inactive"));
};
if (goog.DEBUG) {
  bamboo.feature.group.members.statusColumn.soyTemplateName = 'bamboo.feature.group.members.statusColumn';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-group-members', location = '/feature/group-members/group-members.js' */
define("feature/group-members",["jquery","marionette","aui","util/errors","widget/dialog2","widget/dialog2-confirmation","widget/table-add-bar","widget/infinite-scroll-table"],function(e,t,o,n,a,s,r,i){"use strict";var m=bamboo.feature.group.members;return t.LayoutView.extend({regions:{add:".group-members__add",table:".group-members__table"},template:m.content,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e},onRender:function(){var e=this.options,t=e.groupName,n=e.encodedGroupName,a=void 0===n?encodeURIComponent(t):n,s=e.readOnly,l=void 0!==s&&s,u={url:o.contextPath()+"/rest/api/latest/admin/groups/"+a+"/more-members",idAttribute:"name",emptyText:"There are no members in this group",columns:[{class:"user-full-name",caption:"Full name",template:m.displayNameColumn},{class:"user-name",caption:"Username",template:m.usernameColumn},{class:"user-status",caption:"Status",template:m.statusColumn},{class:"user-email",caption:"Email",template:m.emailColumn}],actions:[]};if(!l){u.actions.push({icon:"remove",id:"remove-member",title:"Delete",action:this.onRemoveMember.bind(this)});var d={url:o.contextPath()+"/rest/api/latest/admin/groups/"+a+"/more-non-members",postUrl:o.contextPath()+"/rest/api/latest/admin/groups/"+a+"/add-users",placeholder:"Add more users",idAttribute:"name",formatResult:m.addMemberSelect2Result,formatSelection:m.addMemberSelect2Selection,success:this.onAddMembers.bind(this)};this.getRegion("add").show(new r(d))}this.getRegion("table").show(new i(u))},onAddMembers:function(e){this.getRegion("table").currentView.addElements(e.toJSON());var t=1===e.size()?o.format("Added \u003cstrong\u003e{0}\u003c/strong\u003e to the group.",o.escapeHtml(e.at(0).get("fullName"))):o.format("Added \u003cstrong\u003e{0}\u003c/strong\u003e users to the group.",e.size());o.flag({type:"success",close:"auto",body:t})},onRemoveMember:function(e,t){t.preventDefault(),new s({titleText:"Remove group member",content:m.removeMemberDialog(e.toJSON()),onConfirm:this.onRemoveMemberConfirmed.bind(this,e),size:a.MEDIUM}).show()},onRemoveMemberConfirmed:function(t,a){var s=encodeURIComponent(this.options.groupName);e.ajax({url:o.contextPath()+"/rest/api/latest/admin/groups/"+s+"/remove-users",data:JSON.stringify([t.get("name")]),contentType:"application/json",dataType:"json",type:"DELETE"}).done(function(){t.collection.remove(t),o.flag({type:"success",body:o.format("\u003cstrong\u003e{0}\u003c/strong\u003e has been removed from the group.",o.escapeHtml(t.get("fullName"))),close:"auto"})}).fail(n),a.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-user-repo-aliases', location = '/feature/user-repo-aliases/user-repo-aliases.js' */
define("feature/user-repo-aliases",["jquery","marionette","aui","util/errors","util/error-helper","widget/dialog2","widget/dialog2-confirmation","widget/table-add-bar","widget/infinite-scroll-table"],function(e,t,s,a,i,o,n,r,l){"use strict";var d=bamboo.feature.user.repo.aliases;return t.LayoutView.extend({regions:{add:".user-repo-aliases__add",table:".user-repo-aliases__table"},template:d.content,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.options.encodedUserName=encodeURIComponent(this.options.username)},onRender:function(){var e={url:s.contextPath()+"/rest/api/latest/admin/users/"+this.options.encodedUserName+"/unassigned-aliases",postUrl:s.contextPath()+"/rest/api/latest/admin/users/"+this.options.encodedUserName+"/alias",placeholder:"Add more aliases",idAttribute:"name",success:this.onAddAliasSuccess.bind(this),error:this.onAddAliasError.bind(this),freeText:!0},t={url:s.contextPath()+"/rest/api/latest/admin/users/"+this.options.encodedUserName+"/alias",idAttribute:"name",emptyText:"This user doesn\u0027t have any assigned aliases.",columns:[{class:"alias-name",caption:"Alias",template:d.aliasNameColumn}],actions:[{icon:"remove",id:"remove-alias",class:"remove-alias",title:"Disassociate",action:this.onRemoveAlias.bind(this)}]};this.getRegion("add").show(new r(e)),this.getRegion("table").show(new l(t))},onAddAliasSuccess:function(e){this.getRegion("table").currentView.addElements(e.toJSON());var t=1===e.size()?s.format("Alias \u003cstrong\u003e{0}\u003c/strong\u003e has been associated with the user.",s.escapeHtml(e.at(0).get("name"))):s.format("\u003cstrong\u003e{0}\u003c/strong\u003e aliases have been associated with the user.",e.size());s.flag({type:"success",close:"auto",body:t})},onAddAliasError:function(e){var t=i.getErrorFromResponse(e,"An unknown error occurred while trying to associate the aliases with the user. See the logs for more information.");s.flag({type:"error",close:"manual",body:s.escapeHtml(t)})},onRemoveAlias:function(e){new n({titleText:"Disassociate alias",content:d.removeUserRepositoryAliasDialog(e.toJSON()),onConfirm:this.onRemoveAliasConfirmed.bind(this,e),size:o.MEDIUM}).show()},onRemoveAliasConfirmed:function(t,i){e.ajax({url:s.contextPath()+"/rest/api/latest/admin/users/"+this.options.encodedUserName+"/alias",data:JSON.stringify(t.toJSON()),contentType:"application/json",dataType:"json",type:"DELETE"}).done(function(){t.collection.remove(t),s.flag({type:"success",body:s.format("Alias \u003cstrong\u003e{0}\u003c/strong\u003e has been disassociated from the user.",s.escapeHtml(t.get("name"))),close:"auto"})}).fail(a),i.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-user-repo-aliases', location = '/feature/user-repo-aliases/user-repo-aliases.soy' */
// This file was automatically generated from user-repo-aliases.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.user.repo.aliases.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.user == 'undefined') { bamboo.feature.user = {}; }
if (typeof bamboo.feature.user.repo == 'undefined') { bamboo.feature.user.repo = {}; }
if (typeof bamboo.feature.user.repo.aliases == 'undefined') { bamboo.feature.user.repo.aliases = {}; }


bamboo.feature.user.repo.aliases.content = function(opt_data, opt_ignored) {
  return '<div class="user-repo-aliases"><div class="user-repo-aliases__add"></div><div class="user-repo-aliases__table"></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.user.repo.aliases.content.soyTemplateName = 'bamboo.feature.user.repo.aliases.content';
}


bamboo.feature.user.repo.aliases.removeUserRepositoryAliasDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Do you really want to disassociate this alias from the user?") + '</p><p>' + soy.$$escapeHtml("Alias") + ': <strong>' + soy.$$escapeHtml(opt_data.name) + '</strong></p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("The alias itself will not be removed from Bamboo. You can manage all the aliases and their associations on the \x3ca href\x3d\x22{0}\x22\x3eauthors\x3c/a\x3e page.",typeof ("" + '/authors/viewAuthors.action') === 'number' ? "" + '/authors/viewAuthors.action' : soy.$$escapeHtml("" + '/authors/viewAuthors.action')))) + '</p>';
};
if (goog.DEBUG) {
  bamboo.feature.user.repo.aliases.removeUserRepositoryAliasDialog.soyTemplateName = 'bamboo.feature.user.repo.aliases.removeUserRepositoryAliasDialog';
}


bamboo.feature.user.repo.aliases.aliasNameColumn = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.feature.user.repo.aliases.aliasNameColumn.soyTemplateName = 'bamboo.feature.user.repo.aliases.aliasNameColumn';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-user-access-tokens', location = '/feature/user-access-tokens/user-access-tokens.js' */
define("feature/user-access-tokens",["jquery","marionette","aui","util/errors","util/error-helper","widget/dialog2","widget/dialog2-confirmation","widget/infinite-scroll-table"],function(e,t,o,s,n,a,i,c){"use strict";var r=bamboo.feature.user.access.tokens;return t.LayoutView.extend({regions:{add:".user-access-tokens__add",table:".user-access-tokens__table"},template:function(){return r.content({canAdd:this.options.canAdd})},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.options.encodedUserName=encodeURIComponent(this.options.username),this.options.canAdd=void 0!==this.options.urls.add,this.options.emptyTableText=this.options.emptyTableText||"This user doesn\u0027t have any access tokens."},onRender:function(){var e={url:this.options.urls.list,idAttribute:"tokenId",emptyText:this.options.emptyTableText,columns:[{class:"access-token-name",caption:"Name",template:r.accessTokenNameColumn},{class:"access-token-creation-date",caption:"Created",template:r.accessTokenCreationDateColumn}],actions:[{label:"Revoke",id:"revoke-access-token",class:"revoke-access-token",title:"Revoke",action:this.onRevokeAccessToken.bind(this)}]};if(this.options.canAdd){var s=t.LayoutView.extend({template:r.addAccessTokenBtn});this.getRegion("add").show(new s)}this.getRegion("table").show(new c(e))},onRevokeAccessToken:function(e){new i({titleText:"Revoke access token",content:r.revokeUserAccessTokenDialog(e.toJSON()),onConfirm:this.onRevokeAccessTokenConfirmed.bind(this,e),size:a.SMALL}).show()},onRevokeAccessTokenConfirmed:function(t,n){var a=this.options.urls;e.ajax({url:a.revoke+t.get("tokenId"),contentType:"application/json",dataType:"json",type:"DELETE"}).done(function(){t.collection.remove(t),o.flag({type:"success",body:o.format("Access token \u003cstrong\u003e{0}\u003c/strong\u003e has been revoked.",o.escapeHtml(t.get("name"))),close:"auto"})}).fail(s),n.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-user-access-tokens', location = '/feature/user-access-tokens/user-access-tokens.soy' */
// This file was automatically generated from user-access-tokens.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.user.access.tokens.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.user == 'undefined') { bamboo.feature.user = {}; }
if (typeof bamboo.feature.user.access == 'undefined') { bamboo.feature.user.access = {}; }
if (typeof bamboo.feature.user.access.tokens == 'undefined') { bamboo.feature.user.access.tokens = {}; }


bamboo.feature.user.access.tokens.content = function(opt_data, opt_ignored) {
  return '<div class="user-access-tokens">' + ((opt_data.canAdd) ? '<div class="user-access-tokens__add"></div>' : '') + '<div class="user-access-tokens__table"></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.user.access.tokens.content.soyTemplateName = 'bamboo.feature.user.access.tokens.content';
}


bamboo.feature.user.access.tokens.addAccessTokenBtn = function(opt_data, opt_ignored) {
  return '<div class="floating-toolbar"><a href="' + soy.$$escapeHtml("") + '/profile/createAccessToken.action" class="aui-button aui-button-primary">' + soy.$$escapeHtml("Create token") + '</a></div>';
};
if (goog.DEBUG) {
  bamboo.feature.user.access.tokens.addAccessTokenBtn.soyTemplateName = 'bamboo.feature.user.access.tokens.addAccessTokenBtn';
}


bamboo.feature.user.access.tokens.revokeUserAccessTokenDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Do you really want to revoke \x3cstrong\x3e{0}\x3c/strong\x3e access token?",typeof (opt_data.name) === 'number' ? opt_data.name : soy.$$escapeHtml(opt_data.name)))) + '</p>';
};
if (goog.DEBUG) {
  bamboo.feature.user.access.tokens.revokeUserAccessTokenDialog.soyTemplateName = 'bamboo.feature.user.access.tokens.revokeUserAccessTokenDialog';
}


bamboo.feature.user.access.tokens.accessTokenNameColumn = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.feature.user.access.tokens.accessTokenNameColumn.soyTemplateName = 'bamboo.feature.user.access.tokens.accessTokenNameColumn';
}


bamboo.feature.user.access.tokens.accessTokenCreationDateColumn = function(opt_data, opt_ignored) {
  return '' + bamboo.widget.time.timestamp({datetime: opt_data.creationDate, format: 'full'});
};
if (goog.DEBUG) {
  bamboo.feature.user.access.tokens.accessTokenCreationDateColumn.soyTemplateName = 'bamboo.feature.user.access.tokens.accessTokenCreationDateColumn';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-table-search-bar', location = '/widget/table-search-bar/table-search-bar.soy' */
// This file was automatically generated from table-search-bar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.table.search.bar.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.table == 'undefined') { bamboo.widget.table = {}; }
if (typeof bamboo.widget.table.search == 'undefined') { bamboo.widget.table.search = {}; }
if (typeof bamboo.widget.table.search.bar == 'undefined') { bamboo.widget.table.search.bar = {}; }


bamboo.widget.table.search.bar.content = function(opt_data, opt_ignored) {
  return '<div class="table-search-bar table-search-bar--wide"><form class="aui">' + aui.form.input({type: 'text', name: 'filter', extraClasses: 'table-search-bar__input full-width-field', placeholderText: opt_data.placeholder, autocomplete: 'off', value: ''}) + aui.icons.icon({extraClasses: 'table-search-bar__icon', icon: 'search-small', size: 'small', useIconFont: true}) + '</form></div>';
};
if (goog.DEBUG) {
  bamboo.widget.table.search.bar.content.soyTemplateName = 'bamboo.widget.table.search.bar.content';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:widget-table-search-bar', location = '/widget/table-search-bar/table-search-bar.js' */
define("widget/table-search-bar",["underscore","marionette"],function(e,t){"use strict";return t.ItemView.extend({template:bamboo.widget.table.search.bar.content,ui:{searchInput:".table-search-bar__input"},debouncePeriod:500,initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.debouncePeriod=t.debouncePeriod||this.debouncePeriod,this.debouncedSearchInputChange=e.debounce(this.onSearchInputChange.bind(this),this.debouncePeriod)},serializeData:function(){return e.pick(this.options,"placeholder")},events:function(){return{"input @ui.searchInput":this.debouncedSearchInputChange}},onSearchInputChange:function(){this.triggerMethod("search:change",{searchText:this.ui.searchInput.val()})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-groups-list', location = '/page/groups-list/groups-list.soy' */
// This file was automatically generated from groups-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.groups.list.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.groups == 'undefined') { bamboo.page.groups = {}; }
if (typeof bamboo.page.groups.list == 'undefined') { bamboo.page.groups.list = {}; }


bamboo.page.groups.list.content = function(opt_data, opt_ignored) {
  return '<div class="groups-list"><div class="groups-list__filter"></div><div class="groups-list__table"></div></div>';
};
if (goog.DEBUG) {
  bamboo.page.groups.list.content.soyTemplateName = 'bamboo.page.groups.list.content';
}


bamboo.page.groups.list.groupNameColumn = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/admin/group/editGroup.action?groupName=' + soy.$$escapeUri(opt_data.name) + '">' + aui.avatar.avatar({size: 'small', avatarImageUrl: "" + '/images/group-avatar-96.png'}) + '<span>' + soy.$$escapeHtml(opt_data.name) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.page.groups.list.groupNameColumn.soyTemplateName = 'bamboo.page.groups.list.groupNameColumn';
}


bamboo.page.groups.list.deleteDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Do you really want to delete this group? This operation can not be reversed.") + '</p><p>' + soy.$$escapeHtml("Group name") + ': <strong>' + soy.$$escapeHtml(opt_data.name) + '</strong></p>';
};
if (goog.DEBUG) {
  bamboo.page.groups.list.deleteDialog.soyTemplateName = 'bamboo.page.groups.list.deleteDialog';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-groups-list', location = '/page/groups-list/groups-list.js' */
define("page/groups-list",["marionette","aui","util/errors","widget/dialog2","widget/dialog2-confirmation","widget/table-search-bar","widget/infinite-scroll-table"],function(e,t,i,n,o,l,a){"use strict";var r=bamboo.page.groups.list;return e.LayoutView.extend({regions:{filter:".groups-list__filter",table:".groups-list__table"},template:r.content,initialize:function(){this.searchBarOptions={placeholder:"Search by name"},this.tableOptions={url:t.contextPath()+"/rest/api/latest/admin/groups?limit=100",idAttribute:"name",finishedText:"There are no more groups",columns:[{class:"group-name",caption:"Group name",template:r.groupNameColumn}],actions:[{icon:"remove",id:"delete-group",title:"Delete",applicable:function(e){return!!e.editable},action:this.deleteGroupAction.bind(this)}]},this.infiniteScrollComponent=new a(this.tableOptions)},deleteGroupAction:function(e,i){i.preventDefault(),new o({titleText:"Delete group",content:r.deleteDialog(e.toJSON()),onConfirm:this.deleteGroupCallback.bind(this,e),size:n.MEDIUM}).show()},deleteGroupCallback:function(e,n){e.destroy({success:function(){t.flag({type:"success",body:t.format("Successfully deleted group \u003cstrong\u003e{0}\u003c/strong\u003e.",t.escapeHtml(e.get("name"))),close:"auto"})},error:function(e,t){i(t)}}),n.hide()},onRender:function(){this.getRegion("filter").show(new l(this.searchBarOptions)),this.getRegion("table").show(this.infiniteScrollComponent)},onChildviewSearchChange:function(e,t){this.infiniteScrollComponent.applyResourceFilter(encodeURIComponent(t.searchText))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-users-list', location = '/page/users-list/users-list.js' */
define("page/users-list",["marionette","aui","util/errors","widget/dialog2","widget/dialog2-confirmation","widget/table-search-bar","widget/infinite-scroll-table"],function(e,t,i,n,s,l,a){"use strict";var o=bamboo.page.users.list;return e.LayoutView.extend({regions:{filter:".users-list__filter",table:".users-list__table"},template:o.content,initialize:function(){this.searchBarOptions={placeholder:"Search by full name, username or email"},this.tableOptions={url:t.contextPath()+"/rest/api/latest/admin/users?limit=100",idAttribute:"name",finishedText:"There are no more users",columns:[{class:"user-full-name",caption:"Full name",template:o.displayNameColumn},{class:"user-name",caption:"Username",template:o.userNameColumn},{class:"user-status",caption:"Status",template:o.statusColumn},{class:"user-email",caption:"Email",template:o.emailColumn},{class:"user-directory",caption:"Directory",template:o.dictionaryColumn}],actions:[{icon:"remove",id:"delete-user",title:"Delete",applicable:function(e){return!!e.editable},action:this.deleteUserAction.bind(this)}]},this.infiniteScrollComponent=new a(this.tableOptions)},deleteUserAction:function(e,i){i.preventDefault(),new s({titleText:"Delete user",content:o.deleteDialog(e.toJSON()),onConfirm:this.deleteUserCallback.bind(this,e),size:n.MEDIUM}).show()},deleteUserCallback:function(e,n){e.destroy({success:function(){t.flag({type:"success",body:t.format("Successfully deleted user \u003cstrong\u003e{0}\u003c/strong\u003e.",t.escapeHtml(e.get("fullName"))),close:"auto"})},error:function(e,t){i(t)}}),n.hide()},onRender:function(){this.getRegion("filter").show(new l(this.searchBarOptions)),this.getRegion("table").show(this.infiniteScrollComponent)},onChildviewSearchChange:function(e,t){this.infiniteScrollComponent.applyResourceFilter(encodeURIComponent(t.searchText))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:page-users-list', location = '/page/users-list/users-list.soy' */
// This file was automatically generated from users-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.users.list.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.users == 'undefined') { bamboo.page.users = {}; }
if (typeof bamboo.page.users.list == 'undefined') { bamboo.page.users.list = {}; }


bamboo.page.users.list.content = function(opt_data, opt_ignored) {
  return '<div class="users-list"><div class="users-list__filter"></div><div class="users-list__table"></div></div>';
};
if (goog.DEBUG) {
  bamboo.page.users.list.content.soyTemplateName = 'bamboo.page.users.list.content';
}


bamboo.page.users.list.displayNameColumn = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/admin/user/viewUser.action?username=' + soy.$$escapeUri(opt_data.name) + '">' + aui.avatar.avatar({size: 'small', avatarImageUrl: opt_data.avatarUrl ? opt_data.avatarUrl : "" + '/images/icons/useravatar.png'}) + '<span>' + soy.$$escapeHtml(opt_data.fullName) + '</span></a>';
};
if (goog.DEBUG) {
  bamboo.page.users.list.displayNameColumn.soyTemplateName = 'bamboo.page.users.list.displayNameColumn';
}


bamboo.page.users.list.userNameColumn = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name);
};
if (goog.DEBUG) {
  bamboo.page.users.list.userNameColumn.soyTemplateName = 'bamboo.page.users.list.userNameColumn';
}


bamboo.page.users.list.emailColumn = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.email);
};
if (goog.DEBUG) {
  bamboo.page.users.list.emailColumn.soyTemplateName = 'bamboo.page.users.list.emailColumn';
}


bamboo.page.users.list.dictionaryColumn = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.directoryName);
};
if (goog.DEBUG) {
  bamboo.page.users.list.dictionaryColumn.soyTemplateName = 'bamboo.page.users.list.dictionaryColumn';
}


bamboo.page.users.list.deleteDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Do you really want to delete this user? This operation can not be reversed.") + '</p><ul><li>' + soy.$$escapeHtml("Username") + ': <strong>' + soy.$$escapeHtml(opt_data.name) + '</strong></li><li>' + soy.$$escapeHtml("Full name") + ': <strong>' + soy.$$escapeHtml(opt_data.fullName) + '</strong></li><li>' + soy.$$escapeHtml("Email") + ': <strong>' + soy.$$escapeHtml(opt_data.email) + '</strong></li></ul>';
};
if (goog.DEBUG) {
  bamboo.page.users.list.deleteDialog.soyTemplateName = 'bamboo.page.users.list.deleteDialog';
}


bamboo.page.users.list.statusColumn = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isActive) ? soy.$$escapeHtml("Active") : soy.$$escapeHtml("Inactive"));
};
if (goog.DEBUG) {
  bamboo.page.users.list.statusColumn.soyTemplateName = 'bamboo.page.users.list.statusColumn';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plans-with-custom-expiry-settings', location = '/feature/plans-with-custom-expiry-settings/plans-with-custom-expiry-settings.soy' */
// This file was automatically generated from plans-with-custom-expiry-settings.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.plans.with.custom.expiry.settings.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.plans == 'undefined') { bamboo.feature.plans = {}; }
if (typeof bamboo.feature.plans.with == 'undefined') { bamboo.feature.plans.with = {}; }
if (typeof bamboo.feature.plans.with.custom == 'undefined') { bamboo.feature.plans.with.custom = {}; }
if (typeof bamboo.feature.plans.with.custom.expiry == 'undefined') { bamboo.feature.plans.with.custom.expiry = {}; }
if (typeof bamboo.feature.plans.with.custom.expiry.settings == 'undefined') { bamboo.feature.plans.with.custom.expiry.settings = {}; }


bamboo.feature.plans.with.custom.expiry.settings.content = function(opt_data, opt_ignored) {
  return '<div class="plans-with-custom-expiry-settings"><div class="plans-with-custom-expiry-settings__table"></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.plans.with.custom.expiry.settings.content.soyTemplateName = 'bamboo.feature.plans.with.custom.expiry.settings.content';
}


bamboo.feature.plans.with.custom.expiry.settings.planNameColumn = function(opt_data, opt_ignored) {
  return '<a href=\'' + soy.$$escapeHtml(opt_data.configLink.href) + '\' title=\'' + soy.$$escapeHtml("View expiry settings") + '\'>' + soy.$$escapeHtml(opt_data.planName) + '</a>';
};
if (goog.DEBUG) {
  bamboo.feature.plans.with.custom.expiry.settings.planNameColumn.soyTemplateName = 'bamboo.feature.plans.with.custom.expiry.settings.planNameColumn';
}


bamboo.feature.plans.with.custom.expiry.settings.expirySettingsColumn = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.expiryConfig.expiryTypeNothing) {
    output += '<p><span class="aui-icon aui-icon-small aui-icon-warning"></span> ' + soy.$$escapeHtml("Keep all builds") + '</p>';
  } else {
    output += '<p>' + bamboo.feature.plans.with.custom.expiry.settings.icon({global: opt_data.globalExpiryLevel, plan: opt_data.planExpiryLevel}) + ((opt_data.expiryConfig.expiryTypeResult) ? soy.$$escapeHtml("Delete results with artifacts and logs") : (opt_data.expiryConfig.expiryTypeArtifact) ? soy.$$escapeHtml(AJS.format("Delete {0,choice,0#only artifacts|1#artifacts and logs}",opt_data.expiryConfig.expiryBuildLog)) : (opt_data.expiryConfig.expiryBuildLog) ? soy.$$escapeHtml("Delete only logs") : '') + '</p><p title="Global value is ' + soy.$$escapeHtml(opt_data.globalExpirySettings.duration) + ' ' + soy.$$escapeHtml(opt_data.globalExpirySettings.period) + '">' + bamboo.feature.plans.with.custom.expiry.settings.icon({global: opt_data.globalExpiryDurationInDays, plan: opt_data.planExpiryDurationInDays}) + soy.$$filterNoAutoescape(AJS.format("Keep builds for \x3cstrong\x3e{0}\x3c/strong\x3e {1}",opt_data.expiryConfig.duration,opt_data.expiryConfig.period)) + '</p>';
    if (opt_data.expiryConfig.labelsList != '') {
      var labels__soy45 = '' + soy.$$escapeHtml(opt_data.expiryConfig.labelsList);
      output += '<p>' + bamboo.feature.plans.with.custom.expiry.settings.icon({global: 1, plan: '' + ((opt_data.expiryConfig.labelsList == opt_data.globalExpirySettings.labelsList) ? '1' : '2')}) + soy.$$filterNoAutoescape(AJS.format("Keep builds with labels: \x3cstrong\x3e{0}\x3c/strong\x3e",labels__soy45)) + '</p>';
    }
    output += ((opt_data.expiryConfig.maximumBuildsToKeep > 0 || opt_data.globalExpirySettings.maximumBuildsToKeep > 0) ? '<p title="Global value is ' + soy.$$escapeHtml(opt_data.globalExpirySettings.maximumBuildsToKeep) + ' builds">' + bamboo.feature.plans.with.custom.expiry.settings.icon({global: opt_data.globalExpirySettings.maximumBuildsToKeep, plan: opt_data.expiryConfig.maximumBuildsToKeep}) + soy.$$filterNoAutoescape(AJS.format("Keep no more than \x3cstrong\x3e{0}\x3c/strong\x3e {0,choice,1#build|1\x3cbuilds}",opt_data.expiryConfig.maximumBuildsToKeep)) + '</p>' : '') + ((opt_data.expiryConfig.buildsToKeep > 0 || opt_data.globalExpirySettings.buildsToKeep > 0) ? '<p title="Global value is ' + soy.$$escapeHtml(opt_data.globalExpirySettings.buildsToKeep) + ' builds">' + bamboo.feature.plans.with.custom.expiry.settings.icon({global: opt_data.globalExpirySettings.buildsToKeep, plan: opt_data.expiryConfig.buildsToKeep}) + soy.$$filterNoAutoescape(AJS.format("Keep last \x3cstrong\x3e{0}\x3c/strong\x3e {0,choice,1#build|1\x3cbuilds}",opt_data.expiryConfig.buildsToKeep)) + '</p>' : '');
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.plans.with.custom.expiry.settings.expirySettingsColumn.soyTemplateName = 'bamboo.feature.plans.with.custom.expiry.settings.expirySettingsColumn';
}


bamboo.feature.plans.with.custom.expiry.settings.icon = function(opt_data, opt_ignored) {
  var output = '';
  var more__soy83 = 'aui-iconfont-chevron-double-up';
  var less__soy84 = 'aui-iconfont-chevron-double-down';
  var neutral__soy85 = 'aui-iconfont-custom-bullet';
  output += '<span class="aui-icon aui-icon-small ' + ((opt_data.global == opt_data.plan) ? soy.$$escapeHtml(neutral__soy85) : (opt_data.plan != 0 && opt_data.global > opt_data.plan || opt_data.global == 0) ? soy.$$escapeHtml(less__soy84) + ' custom-is-better' : (opt_data.global != 0 && opt_data.global < opt_data.plan || opt_data.plan == 0) ? soy.$$escapeHtml(more__soy83) + ' custom-is-worse' : '') + '"></span>&nbsp';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.plans.with.custom.expiry.settings.icon.soyTemplateName = 'bamboo.feature.plans.with.custom.expiry.settings.icon';
}


bamboo.feature.plans.with.custom.expiry.settings.removeOverrideDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(AJS.format("Do you want to remove custom expiry settings for plan {0}?",opt_data.planName)) + '</p>';
};
if (goog.DEBUG) {
  bamboo.feature.plans.with.custom.expiry.settings.removeOverrideDialog.soyTemplateName = 'bamboo.feature.plans.with.custom.expiry.settings.removeOverrideDialog';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-plans-with-custom-expiry-settings', location = '/feature/plans-with-custom-expiry-settings/plans-with-custom-expiry-settings.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};define("feature/plans-with-custom-expiry-settings",["jquery","aui","marionette","widget/infinite-scroll-table","widget/dialog2","widget/dialog2-confirmation","util/errors"],function(e,t,i,n,o,a,r){"use strict";var l=bamboo.feature.plans.with.custom.expiry.settings;return i.LayoutView.extend({regions:{table:".plans-with-custom-expiry-settings__table"},template:l.content,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e},onRender:function(){var e=this.options,i=this.calculateDurationInDays,o=this.calculateExpiryLevel,a={url:t.contextPath()+"/rest/api/latest/admin/expiry/custom/plan",idAttribute:"planKey",emptyText:"No more plans with custom expiry settings",columns:[{class:"plan-name",caption:"Plan name",template:l.planNameColumn},{class:"expiry-settings",caption:"Expiry settings",template:function(t){var n=i(t.expiryConfig.duration,t.expiryConfig.period),a=i(e.globalExpirySettings.duration,e.globalExpirySettings.period),r=o(e.globalExpirySettings.expiryResults,e.globalExpirySettings.expiryArtifacts,e.globalExpirySettings.expiryLogs),s=o(t.expiryConfig.expiryTypeResult,t.expiryConfig.expiryTypeArtifact,t.expiryConfig.expiryBuildLog);return l.expirySettingsColumn(_extends({},t,{planExpiryDurationInDays:n,globalExpiryDurationInDays:a,globalExpiryLevel:r,planExpiryLevel:s,globalExpirySettings:e.globalExpirySettings}))}}],actions:[{label:"Reset to default",id:"remove-override",title:"Remove custom expiry settings and use global configuration.",action:this.onRemoveOverride.bind(this)}]};this.getRegion("table").show(new n(a))},calculateDurationInDays:function(e,t){return"days"===t?e:"weeks"===t?7*e:30*e},calculateExpiryLevel:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?0:t&&i?1:t?2:i?3:4},onRemoveOverride:function(e,i){i.preventDefault(),new a({titleText:"Remove expiry setting",content:l.removeOverrideDialog({planName:e.get("planName")}),onConfirm:this.onRemoveOverrideConfirmed.bind(this,e),size:o.MEDIUM}).show()},onRemoveOverrideConfirmed:function(i,n){e.ajax({url:t.contextPath()+"/rest/api/latest/admin/expiry/custom/plan/"+i.get("planKey"),contentType:"application/json",dataType:"json",type:"DELETE"}).done(function(){i.collection.remove(i),t.flag({type:"success",body:t.format("Removed custom expiry settings for {0}.",t.escapeHtml(i.get("planName"))),close:"auto"})}).fail(r),n.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:util-fetch-state-aware', location = '/util/fetch-state-aware/fetch-state-aware.js' */
define("util/fetch-state-aware",["marionette"],function(t){"use strict";var e={request:"onFetchStarted","sync error":"onFetchEnded"};return t.Behavior.extend({collectionEvents:e,modelEvents:e,initialize:function(){this.resetFetchState(),this.view.resetFetchState=this.resetFetchState.bind(this),this.view.isFetched=this.isFetched.bind(this),this.view.isFetching=this.isFetching.bind(this)},onFetchStarted:function(){this.fetchState.fetching=!0},onFetchEnded:function(){this.fetchState.fetching=!1,this.fetchState.fetched||(this.fetchState.fetched=!0,this.view.triggerMethod("initial:fetch:complete"))},resetFetchState:function(){this.fetchState={fetched:!1,fetching:!1}},isFetched:function(){return this.fetchState.fetched},isFetching:function(){return this.fetchState.fetching}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status.js' */
var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t};define("feature/specs-status",["jquery","underscore","backbone","marionette","aui/flag","util/error-helper","util/fetch-state-aware","feature/specs-status/templates","feature/specs-status/model"],function(t,e,r,s,o,n,i,a,c){"use strict";return s.CompositeView.extend({childView:s.ItemView.extend({tagName:"tr",template:a.logsTableRow,serializeData:function(){var t=s.ItemView.prototype.serializeData.apply(this);return _extends({},t,{formattedExecutionDate:BAMBOO.Time.format(t.specsExecutionDate,"full")})}}),childViewContainer:".logs-table__body",emptyView:s.ItemView.extend({tagName:"tr",template:a.logsTableEmptyRow,className:function(){return this.getOption("isFetchError")?"fetchError":"noResults"},serializeData:function(){return{isFetched:this.getOption("isFetched"),isFetchError:this.getOption("isFetchError"),fetchErrorContent:this.getOption("fetchErrorContent")}}}),emptyViewOptions:function(){return this.getFetchInfo()},modelEvents:{sync:"onModelSync",error:"onModelError"},behaviors:{FetchStateAware:{behaviorClass:i}},ui:{scanButton:".status-table__scan-button"},events:{"click @ui.scanButton":"onScanButtonClick"},template:a.layout,isFetchError:!1,fetchErrorContent:"",initialize:function(t){this.model=new c({repositoryId:t.repositoryId}),this.collection=this.model.getSpecsLogsCollection(),this.fetchSpecsStatus()},serializeData:function(){return _extends({},this.model.toJSON(),this.getFetchInfo())},getFetchInfo:function(){return{isFetched:this.isFetched(),isFetchError:this.isFetchError,fetchErrorContent:this.fetchErrorContent}},getScanUrl:function(){var t=this.model.getRepositoryId();return AJS.contextPath()+"/rest/api/latest/repository/"+t+"/scanNow"},scheduleSpecsStatusFetch:function(){clearTimeout(this.fetchTimer);var t=this.model.isInProgress()?1e4:6e4;this.fetchTimer=setTimeout(this.fetchSpecsStatus.bind(this),t)},fetchSpecsStatus:function(){clearTimeout(this.fetchTimer),this.model.fetch()},onModelSync:function(){this.isFetchError=!1,this.scheduleSpecsStatusFetch(),this.render()},onModelError:function(t,e){this.isFetchError=!0,this.scheduleSpecsStatusFetch(),this.model.reset(),this.fetchErrorContent=aui.message.error({content:n.getErrorFromResponse(e,"An error occurred while we were obtaining Bamboo Specs status for this repository. Try reloading the page.")}),this.render()},onInitialFetchComplete:function(){this.render()},onScanButtonClick:function(){this.model.isInProgress()||(t.ajax({type:"POST",url:this.getScanUrl()}).done(this.onManualScanSuccess.bind(this)).fail(this.onManualScanError.bind(this)).always(this.fetchSpecsStatus.bind(this)),this.model.setInProgress(!0),this.render())},onManualScanSuccess:function(){new o({type:"info",close:"auto",title:"Bamboo Specs scanning started",body:"The Specs status will appear in the table once the scanning completes."})},onManualScanError:function(t){new o({type:"error",close:"manual",title:"Couldn\u0027t start Bamboo Specs scanning",body:n.getErrorFromResponse(t,"An unknown error has occurred. See the logs for more details.")})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status.soy' */
// This file was automatically generated from specs-status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.specs.status.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.specs == 'undefined') { bamboo.feature.specs = {}; }
if (typeof bamboo.feature.specs.status == 'undefined') { bamboo.feature.specs.status = {}; }


bamboo.feature.specs.status.layout = function(opt_data, opt_ignored) {
  return '<div class="specs-status"><div class="specs-status__status-table ' + ((opt_data.isFetchError || ! opt_data.isFetched) ? 'hidden' : '') + '"><table class="aui"><tr><td><span class="status-table__status-row">' + bamboo.feature.specs.status.statusLineContent(opt_data) + '</span></td><td><a class="aui-button status-table__scan-button" ' + ((opt_data.inProgress) ? 'disabled="disabled"' : '') + '>' + soy.$$escapeHtml("Scan") + '</a></td></tr></table></div><div class="specs-status__logs-table"><table class="aui"><thead class="logs-table__head ' + ((opt_data.isFetchError) ? 'hidden' : '') + '"><tr><th>' + soy.$$escapeHtml("Timestamp") + '</th><th>' + soy.$$escapeHtml("Specs status") + '</th><th>' + soy.$$escapeHtml("Log") + '</th></tr></thead><tbody class="logs-table__body"></tbody></table></div></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.layout.soyTemplateName = 'bamboo.feature.specs.status.layout';
}


bamboo.feature.specs.status.logsTableRow = function(opt_data, opt_ignored) {
  return '<td>' + soy.$$escapeHtml(opt_data.formattedExecutionDate) + '</td><td>' + ((opt_data.specImportState == 'SUCCESS') ? bamboo.feature.specs.status.specsStatusCell({statusIcon: 'specs-success', statusIconText: "Specs execution was successful", statusText: "Specs execution successful"}) : (opt_data.specImportState == 'ERROR') ? bamboo.feature.specs.status.specsStatusCell({statusIcon: 'specs-failure', statusIconText: "Specs execution failed", statusText: "Error in Bamboo Specs"}) : bamboo.feature.specs.status.specsStatusCell({statusIcon: 'building', statusIconText: "Specs execution in progress", statusText: "Scanning in progress..."})) + '</td><td>' + ((opt_data.logFilename) ? '<a href="' + soy.$$escapeHtml("") + '/spec-logs/' + soy.$$escapeHtml(opt_data.vcsLocationId) + '/' + soy.$$escapeHtml(opt_data.logFilename) + '" target="_blank">' + ((opt_data.specImportState == 'ERROR') ? soy.$$escapeHtml("View error logs") : soy.$$escapeHtml("View logs")) + '</a>' : '') + '</td>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.logsTableRow.soyTemplateName = 'bamboo.feature.specs.status.logsTableRow';
}


bamboo.feature.specs.status.logsTableEmptyRow = function(opt_data, opt_ignored) {
  return '<td colspan="3">' + ((! opt_data.isFetched) ? '<span class="logs-table__loading-spinner">' + aui.icons.icon({size: 'large', icon: 'wait'}) + '</span>' : (opt_data.isFetchError) ? soy.$$filterNoAutoescape(opt_data.fetchErrorContent) : '<div class="logs-table__no-results"><h3>' + soy.$$escapeHtml("No specs logs yet") + '</h3><p class="description">' + soy.$$escapeHtml("Bamboo hasn\x27t detected any specs in your repository.") + '</p></div>') + '</td>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.logsTableEmptyRow.soyTemplateName = 'bamboo.feature.specs.status.logsTableEmptyRow';
}


bamboo.feature.specs.status.specsStatusCell = function(opt_data, opt_ignored) {
  return widget.icons.statusIcon({status: opt_data.statusIcon, text: opt_data.statusIconText}) + ' ' + soy.$$escapeHtml(opt_data.statusText);
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.specsStatusCell.soyTemplateName = 'bamboo.feature.specs.status.specsStatusCell';
}


bamboo.feature.specs.status.statusLineContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.inProgress) ? bamboo.feature.specs.status.scanningInProgress(null) : (opt_data.specsLogs.length) ? (opt_data.specsLogs[0].specImportState != null) ? soy.$$filterNoAutoescape(AJS.format("Last scanned {0} ago.",opt_data.specsLogs[0].relativeExecutionDate)) : bamboo.feature.specs.status.scanningInProgress(null) : soy.$$escapeHtml("This repository was never scanned."));
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.statusLineContent.soyTemplateName = 'bamboo.feature.specs.status.statusLineContent';
}


bamboo.feature.specs.status.scanningInProgress = function(opt_data, opt_ignored) {
  return '<span class="status-table__in-progress-icon">' + aui.icons.icon({icon: 'wait'}) + '</span>' + soy.$$escapeHtml("Scanning in progress...");
};
if (goog.DEBUG) {
  bamboo.feature.specs.status.scanningInProgress.soyTemplateName = 'bamboo.feature.specs.status.scanningInProgress';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status-model.js' */
define("feature/specs-status/model",["backbone"],function(t){"use strict";return t.Model.extend({url:function(){return AJS.contextPath()+"/rest/api/latest/repository/"+this.getRepositoryId()+"/scan/status"},initialize:function(e){var s=this;this.set("repositoryId",e.repositoryId),this.reset(),this.logsCollection=new t.Collection,this.on("change",function(){return s.logsCollection.reset(s.get("specsLogs"))})},reset:function(){this.set({inProgress:!1,specsLogs:[]})},getRepositoryId:function(){return this.get("repositoryId")},isInProgress:function(){return!!this.get("inProgress")},setInProgress:function(t){this.set("inProgress",t)},getSpecsLogsCollection:function(){return this.logsCollection}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-status/specs-status-templates.js' */
define("feature/specs-status/templates",[],function(){"use strict";return bamboo.feature.specs.status});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-usages-view.js' */
define("feature/specs-configuration/specs-configuration-usages-view",["marionette"],function(e){"use strict";return e.ItemView.extend({className:"specs-configuration-usages",template:function(){var e;return(e=bamboo.feature.specs).usages.apply(e,arguments)},serializeData:function(){var e=this.model.getUsages(),s=e.projects,t=void 0===s?[]:s,i=e.deploymentProjects,o=void 0===i?[]:i,r=e.repositories;return{projects:t,deploymentProjects:o,repositories:void 0===r?[]:r,hideRepositories:this.model.isAllRepositoriesAccess(),hideProjects:this.model.isAllProjectsAccess()}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-layout-view.js' */
define("feature/specs-configuration/specs-configuration-layout-view",["marionette","feature/specs-configuration/specs-configuration-settings-view","feature/specs-configuration/specs-configuration-access-view","feature/specs-configuration/specs-configuration-usages-view"],function(e,s,c,t){"use strict";return e.LayoutView.extend({className:"specs-configuration",template:function(){var e;return(e=bamboo.feature.specs).layout.apply(e,arguments)},regions:{settings:".specs-configuration-settings-container",access:".specs-configuration-access-container",usages:".specs-configuration-usages-container"},modelEvents:{"change:scan":"onScanChange","change:allProjectsAccess":"onAllProjectsAccessChange","change:allRepositoriesAccess":"onAllRepositoriesAccessChange"},initialize:function(e){var s=e.endpoints,c=s.enableCi,t=s.enableAllProjectsAccessUrl,n=s.enableAllRepositoriesAccessUrl;this.enableCi=c,this.enableAllProjectsAccessUrl=t,this.enableAllRepositoriesAccessUrl=n},onRender:function(){this.showSettings(),this.toggleAccess(),this.toggleUsages()},onScanChange:function(){this.toggleAccess(),this.toggleUsages()},onAllProjectsAccessChange:function(){this.toggleUsages()},onAllRepositoriesAccessChange:function(){this.toggleUsages()},showSettings:function(){this.settings.show(new s({enableCi:this.enableCi,model:this.model}))},toggleAccess:function(){var e=this.model,s=this.access,t=this.enableAllProjectsAccessUrl,n=this.enableAllRepositoriesAccessUrl;e.isScanEnabled()?s.show(new c({enableAllProjectsAccessUrl:t,enableAllRepositoriesAccessUrl:n,model:e})):(e.setAllProjectsAccess(!1),e.setAllRepositoriesAccess(!1),s.reset())},toggleUsages:function(){var e=this.model,s=this.usages;!e.isScanEnabled()||e.isAllProjectsAccess()&&e.isAllRepositoriesAccess()?s.reset():s.show(new t({model:e}))}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration.soy' */
// This file was automatically generated from specs-configuration.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.specs.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.specs == 'undefined') { bamboo.feature.specs = {}; }


bamboo.feature.specs.layout = function(opt_data, opt_ignored) {
  return '' + aui.form.form({action: '#', extraClasses: 'specs-configuration-settings-container', content: ''}) + aui.form.form({action: '#', isTopLabels: true, extraClasses: 'specs-configuration-access-container', content: ''}) + '<div class="specs-configuration-usages-container"></div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.layout.soyTemplateName = 'bamboo.feature.specs.layout';
}


bamboo.feature.specs.settings = function(opt_data, opt_ignored) {
  return '<tbody><tr><td class="specs-configuration-settings__header"><h3>' + soy.$$escapeHtml("Scan for Bamboo Specs") + '</h3><p class="description full-size">' + soy.$$escapeHtml("Allow Bamboo to scan this repository for YAML and Java Specs.") + '</p></td><td class="specs-configuration-settings__toggle-cell"><aui-toggle ' + ((opt_data.scan) ? 'checked="checked" ' : '') + 'class="specs-configuration-settings__toggle" label="' + soy.$$escapeHtml("Scan for Bamboo Specs") + '"></aui-toggle></td></tr>' + ((! opt_data.mailServerConfigured) ? '<tr class="specs-configuration-settings__mail-server-warning-row"><td colspan="2">' + bamboo.feature.specs.mailServerWarning(opt_data) + '</td></tr>' : '') + '</tbody>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.settings.soyTemplateName = 'bamboo.feature.specs.settings';
}


bamboo.feature.specs.mailServerWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({extraClasses: 'specs-configuration-settings__mail-server-warning', titleContent: "Email server not configured", content: '<p>' + soy.$$escapeHtml("Without an email server configured, we won\x27t be able to send you notifications about the status of your Bamboo Specs.") + '</p><p>' + ((opt_data.mailServerEditable) ? '<a class="mail-server-warning__link--active" href="' + soy.$$escapeHtml("") + '/admin/viewMailServer.action">' + soy.$$escapeHtml("Configure email server") + '</a>' : '<a class="mail-server-warning__link--passive" href="' + soy.$$escapeHtml("") + '/viewAdministrators.action">' + soy.$$escapeHtml("View administrators") + '</a>') + '</p>'});
};
if (goog.DEBUG) {
  bamboo.feature.specs.mailServerWarning.soyTemplateName = 'bamboo.feature.specs.mailServerWarning';
}


bamboo.feature.specs.access = function(opt_data, opt_ignored) {
  return ((opt_data.showWebhookLink) ? '<h4>' + soy.$$escapeHtml("Setup webhook") + '</h4>' + bamboo.feature.specs.onboarding.dialog.showWebhookUrl({bambooBaseUrl: opt_data.bambooBaseUrl, repositoryId: opt_data.repositoryId, cssClass: 'code-full-width', webhookSetupDocumentationUrl: opt_data.webhookSetupDocumentationUrl, showSecuritySettingsHint: opt_data.showSecuritySettingsHint}) : '') + '<h3>' + soy.$$escapeHtml("Access") + '</h3><div class="description">' + soy.$$escapeHtml("This repository has access to projects and repositories listed below.") + '</div><div class="specs-configuration-projects-settings">' + aui.form.checkboxField({legendContent: '', fields: [{id: 'specs-configuration-all-projects', name: 'specs-configuration-all-projects', isChecked: opt_data.allProjectsAccess, isDisabled: ! opt_data.allProjectsEditable, labelText: "Access all projects", descriptionText: "Allows this repository to access all projects and to create new projects."}]}) + '</div><div class="specs-configuration-repositories-settings">' + aui.form.checkboxField({legendContent: '', fields: [{id: 'specs-configuration-all-repositories', name: 'specs-configuration-all-repositories', isChecked: opt_data.allRepositoriesAccess, isDisabled: ! opt_data.allRepositoriesEditable, labelText: "Access all repositories", descriptionText: "Allows this repository to access all linked repositories."}]}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.feature.specs.access.soyTemplateName = 'bamboo.feature.specs.access';
}


bamboo.feature.specs.usages = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.hideProjects) ? bamboo.feature.specs.usagesSection({heading: "Build projects", items: opt_data.projects, emptyRowLabel: "Bamboo Specs in this repository are not accessing any projects", extraClasses: 'specs-configuration-usages-table--build-projects'}) + bamboo.feature.specs.usagesSection({heading: "Deployment projects", items: opt_data.deploymentProjects, emptyRowLabel: "Bamboo Specs in this repository are not accessing any deployment projects", extraClasses: 'specs-configuration-usages-table--deployment-projects'}) : '') + ((! opt_data.hideRepositories) ? bamboo.feature.specs.usagesSection({heading: "Linked repositories", items: opt_data.repositories, emptyRowLabel: "Bamboo Specs in this repository are not accessing any other repositories", extraClasses: 'specs-configuration-usages-table--repositories'}) : '');
};
if (goog.DEBUG) {
  bamboo.feature.specs.usages.soyTemplateName = 'bamboo.feature.specs.usages';
}


bamboo.feature.specs.usagesSection = function(opt_data, opt_ignored) {
  var output = '<h4>' + soy.$$escapeHtml(opt_data.heading) + '</h4><table class="aui specs-configuration-usages-table ' + soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses : null) + '"><tbody>';
  if (opt_data.items.length > 0) {
    var itemList107 = opt_data.items;
    var itemListLen107 = itemList107.length;
    for (var itemIndex107 = 0; itemIndex107 < itemListLen107; itemIndex107++) {
      var itemData107 = itemList107[itemIndex107];
      output += '<tr class="repository-row"><td><a href="' + soy.$$escapeHtml(itemData107.url) + '">' + soy.$$escapeHtml(itemData107.name) + '</a></td></tr>';
    }
  } else {
    output += '<tr class="specs-configuration-usages-empty"><td>' + soy.$$escapeHtml(opt_data.emptyRowLabel) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.specs.usagesSection.soyTemplateName = 'bamboo.feature.specs.usagesSection';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-settings-view.js' */
define("feature/specs-configuration/specs-configuration-settings-view",["aui","underscore","jquery","atlassian/libs/skate-0.12.6","marionette","aui/flag","util/help-links","feature/specs-onboarding-dialog"],function(e,o,t,s,i,n,a,r){"use strict";var c=function(){if(t("#dontshow").is(":checked")){var o=e.contextPath()+"/rest/pref/latest/user";t.post(o,{"bamboo.user.repository.specs.splashscreen.show":!1}),this.model.setShowOnboardingDialog(!1)}};return i.ItemView.extend({tagName:"table",className:"aui specs-configuration-settings",template:function(){var e;return(e=bamboo.feature.specs).settings.apply(e,arguments)},ui:{toggle:".specs-configuration-settings__toggle",mailServerWarning:".specs-configuration-settings__mail-server-warning-row"},events:{"change @ui.toggle":"scanChangeHandler"},onRender:function(){this.specsEnabled=!!this.ui.toggle.attr("checked"),this.toggleMailServerWarning()},toggleMailServerWarning:function(){this.model.isMailServerConfigured()||(this.model.isScanEnabled()?this.ui.mailServerWarning.show():this.ui.mailServerWarning.hide())},scanChangeHandler:function(){var o=this,s=this.ui.toggle.get(0),i=this.model.isShowOnboardingDialog();s.checked!==this.specsEnabled&&(s.busy=!0,t.ajax({url:this.options.enableCi,type:"PUT",contentType:"application/json",data:JSON.stringify({enable:s.checked})}).done(function(){o.specsEnabled=s.checked,s.checked&&(i?o.showOnboardingDialog():o.showFlag())}).fail(function(){var o=s.checked?"Could not enable Bamboo Specs for this repository. Try again.":"Could not disable Bamboo Specs for this repository. Try again.";s.checked=!s.checked,n({body:o,type:"error"})}).always(function(){s.busy=!1,o.model.setScanEnabled(o.specsEnabled),o.toggleMailServerWarning()}))},showFlag:function(){var o=e.format("\u003cb\u003eScanning for Bamboo specs\u003c/b\u003e has been enabled. To get you started, we\u0027\u0027ve prepared \u003ca href=\u0022{0}\u0022\u003eBamboo Specs documentation\u003c/a\u003e.",a.getHelpLink("bamboo.specs.help"));n({body:o,type:"success",close:"auto"})},showOnboardingDialog:function(){var t="PROJ";new r({repositoryId:this.model.getRepositoryId(),requiresWebhook:this.model.isShowWebhookLink(),bambooBaseUrl:this.model.getBambooBaseUrl(),bambooSpecsVersion:this.model.getBambooSpecsVersion(),webhookSetupDocumentationUrl:this.model.getWebhookSetupDocumentationUrl(),showSecuritySettingsHint:this.model.isShowSecuritySettingsHint(),onClose:o.bind(c,this),buildProjectKey:t,footerActionContent:bamboo.feature.specs.onboarding.dialog.dontShowAgain()}).show()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-model.js' */
define("feature/specs-configuration/specs-configuration-model",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{scan:!1,allProjectsAccess:!1,allProjectsEditable:!1,allRepositoriesAccess:!1,allRepositoriesEditable:!1,mailServerConfigured:!1,mailServerEditable:!1,repositoryId:null,requiresWebhook:!1,bambooBaseUrl:null,bambooSpecsVersion:null,webhookSetupDocumentationUrl:null,showSecuritySettingsHint:!1,showOnboardingDialog:!1,usages:{projects:[],deploymentProjects:[],repositories:[]}},isScanEnabled:function(){return this.get("scan")},setScanEnabled:function(e){this.set("scan",e)},isAllProjectsEditable:function(){return this.get("allProjectsEditable")},setAllProjectsEditable:function(e){this.set("allProjectsEditable",e)},isAllRepositoriesEditable:function(){return this.get("allRepositoriesEditable")},setAllRepositoriesEditable:function(e){this.set("allRepositoriesEditable",e)},isMailServerConfigured:function(){return this.get("mailServerConfigured")},isMailServerEditable:function(){return this.get("mailServerEditable")},isAllProjectsAccess:function(){return this.get("allProjectsAccess")},setAllProjectsAccess:function(e){this.set("allProjectsAccess",e)},isAllRepositoriesAccess:function(){return this.get("allRepositoriesAccess")},setAllRepositoriesAccess:function(e){this.set("allRepositoriesAccess",e)},getRepositoryId:function(){return this.get("repositoryId")},isShowWebhookLink:function(){return this.get("showWebhookLink")},getBambooBaseUrl:function(){return this.get("bambooBaseUrl")},getBambooSpecsVersion:function(){return this.get("bambooSpecsVersion")},getWebhookSetupDocumentationUrl:function(){return this.get("webhookSetupDocumentationUrl")},isShowSecuritySettingsHint:function(){return this.get("showSecuritySettingsHint")},isShowOnboardingDialog:function(){return this.get("showOnboardingDialog")},setShowOnboardingDialog:function(e){this.set("showOnboardingDialog",e)},getUsages:function(){return this.get("usages")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration.js' */
define("feature/specs-configuration",["feature/specs-configuration/specs-configuration-model","feature/specs-configuration/specs-configuration-layout-view"],function(e,o){"use strict";return function(s){var i=s.el,r=s.scan,t=s.allProjectsAccess,a=s.allProjectsEditable,n=s.allRepositoriesAccess,l=s.allRepositoriesEditable,c=s.usages,u=s.endpoints,b=s.mailServerConfigured,d=s.mailServerEditable,p=s.repositoryId,g=s.bambooBaseUrl,f=s.bambooSpecsVersion,m=s.showWebhookLink,S=s.webhookSetupDocumentationUrl,w=s.showOnboardingDialog,h=s.showSecuritySettingsHint,k=new e({scan:r,allProjectsAccess:t,allProjectsEditable:a,allRepositoriesAccess:n,allRepositoriesEditable:l,mailServerConfigured:b,mailServerEditable:d,usages:c,repositoryId:p,bambooBaseUrl:g,bambooSpecsVersion:f,showWebhookLink:m,webhookSetupDocumentationUrl:S,showOnboardingDialog:w,showSecuritySettingsHint:h});return new o({el:i,model:k,endpoints:u}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-configuration', location = '/feature/specs-configuration/specs-configuration-access-view.js' */
define("feature/specs-configuration/specs-configuration-access-view",["aui","jquery","marionette","aui/flag"],function(e,s,a,t){"use strict";return a.ItemView.extend({className:"specs-configuration-projects",template:function(){var e;return(e=bamboo.feature.specs).access.apply(e,arguments)},ui:{allProjects:'[name="specs-configuration-all-projects"]',allRepositories:'[name="specs-configuration-all-repositories"]'},events:{"change @ui.allProjects":"allProjectsChangeHandler","change @ui.allRepositories":"allRepositoriesChangeHandler"},allProjectsChangeHandler:function(s){return this.changeHandler({event:s,url:this.options.enableAllProjectsAccessUrl,modelUpdateHandler:this.model.setAllProjectsAccess.bind(this.model),errorMessage:"Could not change repository access settings. Try again."})},allRepositoriesChangeHandler:function(s){return this.changeHandler({event:s,url:this.options.enableAllRepositoriesAccessUrl,modelUpdateHandler:this.model.setAllRepositoriesAccess.bind(this.model),errorMessage:"Could not change repository access settings. Try again."})},changeHandler:function(e){var a=e.event.currentTarget,r=a.checked;a.disabled=!0,s.ajax({url:e.url,type:"PUT",contentType:"application/json",data:JSON.stringify({enable:r})}).fail(function(){a.checked=!r,t({type:"error",body:e.errorMessage})}).always(function(){a.disabled=!1,e.modelUpdateHandler(a.checked)})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-list-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-list-view",["feature/specs-repositories-selection/specs-repositories-selection-list-item-view","feature/specs-repositories-selection/specs-repositories-selection-empty-list-view","marionette"],function(e,s,t){"use strict";return t.CompositeView.extend({className:"specs-repositories-selection-list",template:function(){var e;return(e=bamboo.page.project.specs.repositories).list.apply(e,arguments)},childViewContainer:"tbody",childView:e,emptyView:s,emptyViewOptions:function(){return{targetType:this.options.targetType}},childViewOptions:function(){return{destroy:this.options.sync===!0}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection.js' */
define("feature/specs-repositories-selection",["feature/specs-repositories-selection/specs-repositories-selection-layout-view"],function(e){"use strict";return function(t){var s=t.el,i=t.targetType,r=void 0===i?"project":i,n=t.sync,o=void 0===n||n,c=t.endpoints;return new e({el:s,sync:o,endpoints:void 0===c?{}:c,targetType:r}).render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-spinner-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-spinner-view",["marionette"],function(e){"use strict";return e.ItemView.extend({className:"specs-repositories-selection-spinner",template:!1,onShow:function(){this.$el.spin()},onDestroy:function(){this.$el.spinStop()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-list-item-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-list-item-view",["aui","marionette","aui/flag"],function(e,t,i){"use strict";return t.ItemView.extend({tagName:"tr",className:"specs-repositories-selection-list-item",template:function(){var e;return(e=bamboo.page.project.specs.repositories).listItem.apply(e,arguments)},ui:{remove:".specs-repositories-selection-remove",spinner:".specs-repositories-selection-remove-spinner"},events:{"click @ui.remove":"removeClickHandler"},removeClickHandler:function(e){e.preventDefault(),this.options.destroy?this.destroyEntry():this.removeEntry()},destroyEntry:function(){var t=this;this.ui.spinner.spin(),this.model.destroy({wait:!0}).fail(function(){t.ui.spinner.spinStop(),i({type:"error",body:"Could not remove repository from the list. Try again."})})},removeEntry:function(){this.model.collection.remove(this.model)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-layout-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-layout-view",["aui","feature/specs-repositories-selection/specs-repositories-selection-add-view","feature/specs-repositories-selection/specs-repositories-selection-spinner-view","feature/specs-repositories-selection/specs-repositories-selection-list-view","marionette","aui/flag"],function(e,s,o,i,t,n){"use strict";return t.LayoutView.extend({className:"specs-repositories-selection",template:function(){var e;return(e=bamboo.page.project.specs.repositories).layout.apply(e,arguments)},regions:{add:".specs-repositories-selection-add-container",list:".specs-repositories-selection-list-container"},onRender:function(){var t=this,r=this.options,c=r.sync,p=r.endpoints,a=r.targetType,l=p.add,d=p.search,u=p.list,f=new Backbone.Collection([],{url:u});this.add.show(new s({collection:f,add:l,search:d,sync:c})),this.list.show(new o),f.fetch().done(function(){t.list.show(new i({collection:f,sync:c,targetType:a}))}).fail(function(){n({type:"error",body:"Could not load the list of repositories. Try again."})})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-empty-list-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-empty-list-view",["marionette"],function(e){"use strict";return e.ItemView.extend({tagName:"tr",className:"specs-repositories-selection-empty-list",initialize:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.targetType=t[0].targetType},template:function(){return bamboo.page.project.specs.repositories.emptyList({targetType:this.targetType})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection-add-view.js' */
define("feature/specs-repositories-selection/specs-repositories-selection-add-view",["aui","jquery","marionette","aui/flag"],function(e,t,i,n){"use strict";return i.ItemView.extend({tagName:"form",className:"specs-repositories-selection-add aui",template:function(){var e;return(e=bamboo.page.project.specs.repositories).add.apply(e,arguments)},ui:{input:'[name="specs-repositories-selection-input"]',submit:'[type="submit"]'},events:{input:"toggleSubmit",change:"toggleSubmit",submit:"submitHandler"},onShow:function(){this.initSelect2(),this.toggleSubmit()},submitHandler:function(e){e.preventDefault();var t=this.options.sync,i=this.ui.input.select2("data");t?this.addAndSyncWithServer(i):this.addWithoutSyncingWithServer(i)},initSelect2:function(){var e=this.convertToSelect2Result.bind(this);this.ui.input.auiSelect2({multiple:!0,placeholder:"",formatResult:bamboo.page.project.specs.repositories.result,id:function(e){return e?e.id:void 0},initSelection:function(e,t){var i=e.select2("data"),n=e.val().split(",");t(i.filter(function(e){return n.indexOf(e.id)!==-1}))},ajax:{url:this.options.search,dataType:"json",quietMillis:250,data:function(e,t){return{"start-index":25*(t-1),"max-result":25,searchTerm:e}},results:function(t,i){var n=25*i<t.size;return{results:t.searchResults.map(e),more:n}}}})},toggleSubmit:function(e){var t=this.ui,i=t.submit,n=t.input;/true|false/.test(e)?i.prop("disabled",e):i.prop("disabled",0===n.select2("data").length)},convertToSelect2Result:function(e){var t=e.id,i=e.name,n=e.url,s=e.rssEnabled;return{id:String(t),text:i,url:n,rssEnabled:s}},convertFromSelect2Result:function(e){var t=e.id,i=e.text,n=e.url,s=e.rssEnabled;return{id:String(t),name:i,url:n,rssEnabled:s}},addWithoutSyncingWithServer:function(e){var t=this;0!==e.length&&(this.ui.input.select2("val","",!0),this.collection.add(e.map(function(e){return t.convertFromSelect2Result(e)})))},addAndSyncWithServer:function(i){var s=this;if(0!==i.length){var r=_.after(i.length,function(){var t=_.where(i,{isSaved:!0}),r=t.length;if(r){t.reverse().forEach(function(e){s.collection.add(s.convertFromSelect2Result(e),{at:0})});var o=void 0;o=1===r?e.format("\u003cb\u003e{0}\u003c/b\u003e has been added.",e.escapeHtml(t[0].text)):e.format("{0} repositories have been added.",r),n({type:"success",close:"auto",body:o})}var a=_.where(i,{isSaved:!1}),u=a.length;if(u){var c=void 0;c=1===u?e.format("Could not add \u003cb\u003e{0}\u003c/b\u003e. Try again.",e.escapeHtml(a[0].text)):e.format("Could not add {0} repositories. Try again.",u),n({type:"error",body:c})}s.ui.input.select2("val",a.length?_.pluck(a,"id"):"",!0),s.toggleSubmit()});this.toggleSubmit(!0),i.forEach(function(e){t.ajax({url:s.options.add,data:JSON.stringify({id:e.id}),contentType:"application/json",dataType:"json",type:"POST"}).done(function(){e.isSaved=!0}).fail(function(){e.isSaved=!1}).always(r)})}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:feature-specs-repositories-selection', location = '/feature/specs-repositories-selection/specs-repositories-selection.soy' */
// This file was automatically generated from specs-repositories-selection.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.project.specs.repositories.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.project == 'undefined') { bamboo.page.project = {}; }
if (typeof bamboo.page.project.specs == 'undefined') { bamboo.page.project.specs = {}; }
if (typeof bamboo.page.project.specs.repositories == 'undefined') { bamboo.page.project.specs.repositories = {}; }


bamboo.page.project.specs.repositories.layout = function(opt_data, opt_ignored) {
  return '<div class="specs-repositories-selection-add-container"></div><div class="specs-repositories-selection-list-container"><div class="spinner"></div></div>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.layout.soyTemplateName = 'bamboo.page.project.specs.repositories.layout';
}


bamboo.page.project.specs.repositories.add = function(opt_data, opt_ignored) {
  return '<div>' + aui.form.input({type: 'text', name: 'specs-repositories-selection-input', extraClasses: 'full-width-field'}) + '</div><div class="specs-repositories-selection-add-cell">' + aui.buttons.button({text: "Add", type: 'primary', tagName: 'input', inputType: 'submit', id: 'add-repository-to-project'}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.add.soyTemplateName = 'bamboo.page.project.specs.repositories.add';
}


bamboo.page.project.specs.repositories.result = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.text) + ((! opt_data.rssEnabled) ? widget.lozenges.auilozenge({colour: 'current', text: "Scan for Bamboo Specs disabled", subtle: true, extraClasses: 'specs-disabled-lozenge'}) : '');
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.result.soyTemplateName = 'bamboo.page.project.specs.repositories.result';
}


bamboo.page.project.specs.repositories.list = function(opt_data, opt_ignored) {
  return '<table class="aui"><tbody></tbody></table>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.list.soyTemplateName = 'bamboo.page.project.specs.repositories.list';
}


bamboo.page.project.specs.repositories.listItem = function(opt_data, opt_ignored) {
  return '<td><a href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + soy.$$escapeHtml(opt_data.name) + '</a>' + ((! opt_data.rssEnabled) ? widget.lozenges.auilozenge({colour: 'current', text: "Scan for Bamboo Specs disabled", subtle: true, extraClasses: 'specs-disabled-lozenge'}) : '') + '<input type="hidden" name="repositoryIds" value="' + soy.$$escapeHtml(opt_data.id) + '" /></td><td><span class="specs-repositories-selection-remove-spinner"></span><a class="specs-repositories-selection-remove" href="#">' + aui.icons.icon({icon: 'remove', useIconFont: true}) + '</a></td>';
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.listItem.soyTemplateName = 'bamboo.page.project.specs.repositories.listItem';
}


bamboo.page.project.specs.repositories.emptyList = function(opt_data, opt_ignored) {
  return '' + ((opt_data.targetType == 'repository') ? '<td>' + soy.$$escapeHtml("No Bamboo Specs repositories granted access to this repository") + '</td>' : '<td>' + soy.$$escapeHtml("No Bamboo Specs repositories in this project") + '</td>');
};
if (goog.DEBUG) {
  bamboo.page.project.specs.repositories.emptyList.soyTemplateName = 'bamboo.page.project.specs.repositories.emptyList';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-progress-indicator', location = 'src/js/aui/progress-indicator.js' */
("undefined"===typeof window?global:window).__006abce3407e8c401b8b4a54b6dae46f=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function s(a,b,d){(0,t.recomputeStyle)(a);a.css("width",100*d+"%");b.attr("data-value",d)}function u(a,b,d){var e=d.currentProgress,c=d.value,a=(0,k.default)(a),f=(0,k.default)(b);"number"===typeof c&&(1>=c&&0<=c)&&(f.trigger(x,[e,c]),(0,y.supportsCssTransition)()?(a.one(z,function(){f.trigger(v,[e,c])}),s(a,f,c)):(s(a,f,c),f.trigger(v,[e,c])))}function w(a){var a=
(0,k.default)(a).first(),b=a.children(".aui-progress-indicator-value");a.removeAttr("data-value");(0,t.recomputeStyle)(a);b.css("width","")}function q(a){return l.default.isNumber(a)&&l.default.isFinite(a)&&!l.default.isNaN(a)}function g(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,d=parseFloat(a);return q(d)?d:Number(b)}function m(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return Number(parseFloat(a).toFixed(b))}function n(a){var b=a.max,b=0<b?b:f.max,
a=Math.max(0,Math.min(a.val,b)),d=m(a/b,6),e=m(100*d,2);return{max:b,val:a,valAsFraction:d,valAsPercent:e}}function h(a){var b=n(a._data),d=b.val,e=b.valAsFraction,b=b.max,c=a.querySelector(".aui-progress-indicator"),f=c.getAttribute("data-value");a.indeterminate?(c.removeAttribute("aria-valuenow"),w(c)):(c.setAttribute("aria-valuenow",d),c.setAttribute("aria-valuemax",b),u(c.querySelector(".aui-progress-indicator-value"),c,{currentProgress:f,value:e}))}var o={};"use strict";Object.defineProperty(o,
"__esModule",{value:!0});var k=j(__bd7207540b95ff683caa1d3c0bfcc3d7),l=j(__b8debe7dbacd8c0f9a68380b427aca10),p=j(__23d805956abb7113753ee633dcc7a634),t=__5751b8a604ec61b53b208676ae78d41d,y=__02837eb0ab28736e09825f2207c8fe9b,e;e=__c88c0dc6258c37804917fb6a0e4092fa;if(!e||!e.__esModule){var r={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);r.default=e;e=r}i=j(__9a668cbde1e182d8e721c23580356df2);var v="aui-progress-indicator-after-update",x="aui-progress-indicator-before-update",
z="transitionend webkitTransitionEnd",f={indeterminate:!1,max:1,val:0};(0,p.default)("aui-progressbar",{template:function(a){a._data.max=g(a.getAttribute("max"),f.max);a._data.val=g(a.getAttribute("value"),f.val);a._data.indeterminate=a.hasAttribute("indeterminate");var b=n(a._data),d=b.valAsFraction;a.innerHTML='<div class="aui-progress-indicator"\n         '+(a._data.indeterminate?"":'data-value="'+d+'"')+'\n         role="progressbar"\n         aria-valuemin="0"\n         aria-valuenow="'+b.val+
'"\n         aria-valuemax="'+b.max+'"\n         tabindex="0"\n     >\n        <span class="aui-progress-indicator-value" style="width: '+b.valAsPercent+'%"></span>\n    </div>'},attached:function(a){h(a)},attributes:{indeterminate:{created:function(a){a.indeterminate=!0},removed:function(a){a.indeterminate=!1}},value:{value:f.val,fallback:function(a,b){if(a._updating)return!1;a._data.val=g(b.newValue,b.oldValue||f.val);h(a)}},max:{value:f.max,fallback:function(a,b){if(a._updating)return!1;a._data.max=
g(b.newValue,b.oldValue||f.max);h(a)}}},prototype:{get _data(){return this.__data||(this._data=l.default.defaults({},f))},set _data(a){return this.__data=a},get indeterminate(){return this._data.indeterminate},set indeterminate(a){this._data.indeterminate=!!a;h(this)},get value(){return n(this._data).val},set value(a){if(!q(a))return!1;a={newValue:m(a,6)};this._updating=!0;this.setAttribute("value",a.newValue);this._updating=!1;this._data.val=g(a.newValue,a.oldValue||f.val);h(this)},get max(){return n(this._data).max},
set max(a){if(!q(a))return!1;a={newValue:m(a,6)};this._updating=!0;this.setAttribute("max",a.newValue);this._updating=!1;this._data.max=g(a.newValue,a.oldValue||f.max);h(this)}}});p={update:e.fn(function(a,b){if("string"===typeof a){var d=document.getElementById(a);d&&(a=d)}var d=(0,k.default)(a).first(),e=d.children(".aui-progress-indicator-value"),c=d.attr("data-value"),f=!c,g=parseFloat(c)||0;if(c=c&&g===b)c=parseFloat(e.get(0).style.width)||0,c=g===100*c;if(!c)return f&&e.css("width",0),u(e,d,
{currentProgress:g,value:b}),d},"AJS.progressBars.update",{sinceVersion:"7.7.0",extraInfo:"Use the <aui-progressbar> web component instead"}),setIndeterminate:e.fn(w,"AJS.progressBars.setIndeterminate",{sinceVersion:"7.7.0",extraInfo:"Use the <aui-progressbar> web component instead"})};(0,i.default)("progressBars",p);o.default=p;return o=o["default"]}.call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:progress-bar', location = '/widget/progress-bar/progress-bar.js' */
define("widget/progress-bar",["jquery"],function(s){"use strict";function o(o){this.options=o||{};var r=bamboo.widget.progressBar.progressBarIndicator({value:this.options.value}),t=s(this.options.el);t.addClass("aui-progress-indicator"),t.html(r),AJS.progressBars.update(this.options.el,this.options.value)}return o});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:progress-bar', location = '/widget/progress-bar/progress-bar.soy' */
// This file was automatically generated from progress-bar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.widget.progressBar.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.widget == 'undefined') { bamboo.widget = {}; }
if (typeof bamboo.widget.progressBar == 'undefined') { bamboo.widget.progressBar = {}; }


bamboo.widget.progressBar.progressBarIndicator = function(opt_data, opt_ignored) {
  return '<span class="aui-progress-indicator-value ' + ((opt_data.value == 1) ? 'warning' : '') + '"></span>';
};
if (goog.DEBUG) {
  bamboo.widget.progressBar.progressBarIndicator.soyTemplateName = 'bamboo.widget.progressBar.progressBarIndicator';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:artifact-storage', location = '/page/artifact-storage-config/artifact-storage-config.js' */
define("page/artifact-storage-config",["jquery","underscore","widget/help-dialog"],function(t,e,n){"use strict";function i(e){this.options=e||{};var i=t(this.options.target),o=i.attr("id"),a=bamboo.page.artifactStorageConfig.warningIcon({id:o});return i.parent().append(a),new n({el:t("#helpDialog-"+o),content:t("#helpDialog-"+o+"-content")})}return i});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:artifact-storage', location = '/page/artifact-storage-config/artifact-storage-config.soy' */
// This file was automatically generated from artifact-storage-config.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.page.artifactStorageConfig.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.page == 'undefined') { bamboo.page = {}; }
if (typeof bamboo.page.artifactStorageConfig == 'undefined') { bamboo.page.artifactStorageConfig = {}; }


bamboo.page.artifactStorageConfig.warningIcon = function(opt_data, opt_ignored) {
  return '<a id="helpDialog-' + soy.$$escapeHtml(opt_data.id) + '" class="storageWarningHelpIcon" href="#" rel="help"><span class="aui-icon aui-icon-small aui-iconfont-error" original-title=""></span></a><div id="helpDialog-' + soy.$$escapeHtml(opt_data.id) + '-content" style="display: none;">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3ch3\x3eStorage limit exceeded\x3c/h3\x3e\x3cp\x3eSet your location to Amazon S3 to enable more storage.\x3c/p\x3e\x3cp\x3eRead about \x3ca href\x3d\x22http://aws.amazon.com/s3/\x22 target\x3d\x22_blank\x22\x3eAmazon S3 storage\x3c/a\x3e.\x3c/p\x3e")) + '</div>';
};
if (goog.DEBUG) {
  bamboo.page.artifactStorageConfig.warningIcon.soyTemplateName = 'bamboo.page.artifactStorageConfig.warningIcon';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:artifact-handlers', location = '/page/artifact-handlers/artifact-handlers.js' */
define("page/artifact-handlers",[],function(){"use strict";return function(){}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/entity/trusted-keys-collection.js' */
define("feature/trusted-keys/entity/trusted-keys-collection",["backbone","feature/trusted-keys/entity/trusted-keys-model"],function(e,t){"use strict";return e.Collection.extend({model:t,url:AJS.contextPath()+"/rest/admin/latest/security/trustedKey",comparator:"id"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-add-view.js' */
define("feature/trusted-keys/trusted-keys-add-view",["jquery","marionette","feature/trusted-keys/entity/trusted-keys-model","aui/flag"],function(e,t,s,r){"use strict";var n=function(e){var t=[];return e&&e.responseJSON&&e.responseJSON.errors&&(t=e.responseJSON.errors),t};return t.ItemView.extend({settings:null,template:bamboo.feature.trustedKeys.createTrustedKeyForm,ui:{key:"#key",host:"#host",errors:".control-form-error"},initialize:function(e){this.settings=e||{}},save:function(t){this.hideErrors();var o=new s;o.set("key",this.ui.key.val()),o.set("host",this.ui.host.val());var i=o.validate(o.attributes);i?(i.forEach(function(t){var s=e('[data-field-name="'+t.name+'"]');s.html=t.message,s.show()}),t.error&&t.error()):this.settings.collection.create(o,{wait:!0,success:function(){t.success&&t.success(),new r({type:"success",close:"auto",body:"Trusted key has been added"})},error:function(e,s){if(409===s.status)t.success&&t.success(),new r({type:"success",close:"auto",body:"A trusted key with given host and SSH key already exists."});else{t.error&&t.error();var o=n(s),i=o.length?o.join(" "):"View the server logs for the details.";new r({type:"error",close:"manual",body:"The trusted key can\u0027t be added."+" "+i})}}})},hideErrors:function(){this.ui.errors.hide()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-add-dialog.js' */
define("feature/trusted-keys/trusted-keys-add-dialog",["underscore","marionette","widget/dialog","feature/trusted-keys/trusted-keys-add-view"],function(t,e,i,o){"use strict";return i.extend({defaultSettings:{height:350,width:800,id:"dialog-add-trusted-key",header:"Add trusted key",collection:null,buttons:[{id:"dialog-save-trusted-key",label:"Add",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Close",type:"link"}]},initialize:function(e){var o=e||{};o.content=bamboo.feature.trustedKeys.addDialog(),AJS.bind("show.dialog",t.bind(this.onDialogShow,this)),AJS.bind("remove.dialog",t.bind(this.onDialogHide,this)),i.prototype.initialize.call(this,t.defaults(o,this.defaultSettings))},onDialogShow:function(t,i){i.dialog&&i.dialog===this.dialog&&(this.region=new e.Region({el:".dialog-add-trusted-key__content"}),this.region.show(new o({collection:this.collection})),this.dialog.updateHeight())},onDialogHide:function(){this.region&&this.region.empty()},onButtonClick:function(e){for(var o,n=arguments.length,d=Array(n>1?n-1:0),a=1;a<n;a++)d[a-1]=arguments[a];if((o=i.prototype.onButtonClick).call.apply(o,[this,e].concat(d)),"dialog-save-trusted-key"===e){this.region.currentView.save({success:t.bind(function(){this.dialog.remove()},this),error:t.bind(function(){this.dialog.updateHeight()},this)})}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-inline-add.js' */
define("feature/trusted-keys/trusted-keys-inline-add",["underscore","marionette","feature/trusted-keys/entity/trusted-keys-collection","jquery","aui/flag"],function(e,t,s,r,n){"use strict";var i=function(e){var t=[];return e&&e.responseJSON&&e.responseJSON.errors&&(t=e.responseJSON.errors),t};return t.ItemView.extend({settings:{},initialize:function(t){this.settings=t||{};var s=r(bamboo.feature.trustedKeys.addTrustedKeyInline({linkId:this.settings.linkId}));s.on("click",e.bind(this.addClickHandler,this));var n=r(this.settings.anchor);r(s).insertBefore(n)},addClickHandler:function(e){e.preventDefault(),e.stopPropagation();var t={host:this.settings.host,key:this.settings.key};(new s).create(t,{wait:!0,success:function(){r(e.target).off("click"),new n({type:"success",close:"auto",body:"Trusted key has been added"})},error:function(t,s){if(409===s.status)r(e.target).off("click"),new n({type:"success",close:"auto",body:"A trusted key with given host and SSH key already exists."});else{var a=i(s),o=a.length?a.join(" "):"View the server logs for the details.";new n({type:"error",close:"manual",body:"The trusted key can\u0027t be added."+" "+o})}}})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-confirm-delete-dialog.js' */
define("feature/trusted-keys/trusted-keys-confirm-delete-dialog",["jquery","marionette","widget/dialog","aui/flag"],function(e,t,i,o){"use strict";return i.extend({defaultSettings:{height:200,width:400,id:"dialog-confirm-delete-trusted-key",model:null,header:"Delete trusted key",buttons:[{id:"dialog-confirm-delete-trusted-key-confirm",label:"Delete",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}]},initialize:function(e){var t=e||{};t.content=bamboo.feature.trustedKeys.confirmDeleteTrustedKey({host:t.model.get("host")}),i.prototype.initialize.call(this,_.defaults(t,this.defaultSettings))},onButtonClick:function(e){for(var t,o=arguments.length,n=Array(o>1?o-1:0),l=1;l<o;l++)n[l-1]=arguments[l];(t=i.prototype.onButtonClick).call.apply(t,[this,e].concat(n)),"dialog-confirm-delete-trusted-key-confirm"===e&&(this.model.destroy({wait:!0,success:_.bind(this.onDeleteSuccess,this),error:_.bind(this.onDeleteError,this)}),this.dialog.remove())},onDeleteSuccess:function(){new o({type:"success",close:"auto",body:"Trusted key was removed"})},onDeleteError:function(){new o({type:"error",close:"manual",body:"The trusted key can\u0027t be removed. View the server logs for the details."})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-app.js' */
define("feature/trusted-keys/trusted-keys-app",["jquery","feature/trusted-keys/trusted-keys-list-view","feature/trusted-keys/entity/trusted-keys-collection","feature/trusted-keys/trusted-keys-add-dialog","marionette","aui/flag"],function(t,e,n,i,o,r){"use strict";return o.Application.extend({collection:null,el:null,addBtn:null,initialize:function(t){var e=t||{};this.el=e.el,this.addBtn=e.addBtn},onStart:function(){this.addRegions({main:this.el}),this.collection=new n,this.collection.fetch({error:_.bind(this.onFetchErrorHandler,this)});var o=this.collection;this.getRegion("main").show(new e({collection:o})),t(this.addBtn).on("click",_.bind(function(){new i({collection:this.collection})},this))},onFetchErrorHandler:function(){new r({type:"error",close:"manual",body:"The trusted key can\u0027t be read from the server."})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/entity/trusted-keys-model.js' */
define("feature/trusted-keys/entity/trusted-keys-model",["backbone"],function(e){"use strict";return e.Model.extend({idAttribute:"id",defaults:{id:null,host:"",key:""},validate:function(e){var t=[];return e.host||t.push({name:"host",message:"This field is required"}),e.key||t.push({name:"key",message:"This field is required"}),t.length>0&&t}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys.soy' */
// This file was automatically generated from trusted-keys.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.trustedKeys.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.trustedKeys == 'undefined') { bamboo.feature.trustedKeys = {}; }


bamboo.feature.trustedKeys.view = function(opt_data, opt_ignored) {
  return '<div class="trusted_keys"><table id="trusted-keys" class="aui"><thead><tr><th id="trusted-keys-host" class="trusted-keys-host-col">' + soy.$$escapeHtml("Host") + '</th><th id="trusted-keys-key" class="trusted-keys-key-col">' + soy.$$escapeHtml("SSH key") + '</th><th id="trusted-keys-action" class="trusted-keys-action"></th></tr></thead><tbody></tbody></table></div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.view.soyTemplateName = 'bamboo.feature.trustedKeys.view';
}


bamboo.feature.trustedKeys.trustedKeyRow = function(opt_data, opt_ignored) {
  return '<td class="trusted-keys-host-col" title="' + soy.$$escapeHtml(opt_data.host) + '"><span>' + soy.$$escapeHtml(opt_data.host) + '</span></td><td class="trusted-keys-key-col" title="' + soy.$$escapeHtml(opt_data.key) + '"><span>' + soy.$$escapeHtml(opt_data.key) + '</span></td><td class="trusted-keys-action"><a id="delete-trusted-key-' + soy.$$escapeHtml(opt_data.id) + '" data-id="' + soy.$$escapeHtml(opt_data.id) + '" href="" class="delete delete-trusted-key" title="' + soy.$$escapeHtml("Revoke access for this key") + '">' + soy.$$escapeHtml("Delete") + '</a></td>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.trustedKeyRow.soyTemplateName = 'bamboo.feature.trustedKeys.trustedKeyRow';
}


bamboo.feature.trustedKeys.confirmDeleteTrustedKey = function(opt_data, opt_ignored) {
  return '<div >' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("Do you want to remove the trusted key for \x3cstrong\x3e\x27\x27{0}\x27\x27\x3c/strong\x3e?",typeof (opt_data.host) === 'number' ? opt_data.host : soy.$$escapeHtml(opt_data.host)))) + '</div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.confirmDeleteTrustedKey.soyTemplateName = 'bamboo.feature.trustedKeys.confirmDeleteTrustedKey';
}


bamboo.feature.trustedKeys.addDialog = function(opt_data, opt_ignored) {
  return '<div class="dialog-add-trusted-key__content"></div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.addDialog.soyTemplateName = 'bamboo.feature.trustedKeys.addDialog';
}


bamboo.feature.trustedKeys.createTrustedKeyForm = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><form class="aui"><fieldset class="trusted-keys-fieldset group"><div id="fieldArea_host" class="field-group required"><label for="host">' + soy.$$escapeHtml("Host") + '<span class="aui-icon icon-required"> required</span></label><input name="host" id="host" class="text long-field" /><div class="error control-form-error" data-field-name="host" style="display:none">' + soy.$$escapeHtml("This field is required") + '</div></div><div id="fieldArea_key" class="field-group required"><label for="key">' + soy.$$escapeHtml("SSH key") + '<span class="aui-icon icon-required"> required</span></label><textarea spellcheck="false" name="key" id="key" class="textarea long-field" rows="5"></textarea><div class="error control-form-error" data-field-name="key" style="display:none">' + soy.$$escapeHtml("This field is required") + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.createTrustedKeyForm.soyTemplateName = 'bamboo.feature.trustedKeys.createTrustedKeyForm';
}


bamboo.feature.trustedKeys.addTrustedKeyInline = function(opt_data, opt_ignored) {
  return '<a href="#" id="' + soy.$$escapeHtml(opt_data.linkId) + '">' + soy.$$escapeHtml("Add to trusted keys") + '</a>';
};
if (goog.DEBUG) {
  bamboo.feature.trustedKeys.addTrustedKeyInline.soyTemplateName = 'bamboo.feature.trustedKeys.addTrustedKeyInline';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:trusted-keys', location = '/feature/trusted-keys/trusted-keys-list-view.js' */
define("feature/trusted-keys/trusted-keys-list-view",["marionette","feature/trusted-keys/trusted-keys-confirm-delete-dialog"],function(e,t){"use strict";return e.CompositeView.extend({template:function(){return bamboo.feature.trustedKeys.view()},childViewContainer:"tbody",childView:e.ItemView.extend({template:bamboo.feature.trustedKeys.trustedKeyRow,tagName:"tr",ui:{deleteBtn:".delete-trusted-key"},events:{"click @ui.deleteBtn":"warnBeforeDelete"},warnBeforeDelete:function(e){e.preventDefault(),new t({model:this.model})}})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:agent-assignment-configuration', location = '/feature/agent-assignment/agent-assignment.js' */
define("feature/agent-assignment",["jquery","underscore","brace","backbone","widget/single-select","widget/selected-list","widget/autocomplete-ajax","util/events","util/ajax"],function(t,e,i,n,s,a,o,d,l){"use strict";var r=o.extend({mixins:[d.EventBusMixin],initialize:function(i){this.params=t.extend({url:AJS.contextPath()+"/rest/api/latest/agent/assignment/search",cache:!1},i.params||{}),this.query=t.extend({},i.query||{});var n=e.bind(function(e,n){return t.extend({searchTerm:e,entityType:n,executorType:i.options.executableType,executorId:i.options.agentId},this.query)},this),s={minimumInputLength:0,ajax:{cache:!1,url:this.params.url,dataType:"json",data:n,results:e.bind(function(t){return this.processData({results:t.searchResults})},this)},id:function(t){return t.searchEntity.id}};this.onEvent("unbind",this.onUnbind),this.onEvent("agent:dedicate:entity:change",this.onEntityChange),this.onEvent("agent:dedicate:added",this.onAgentDedicated),this.$fieldGroup=this.$el.parents(".field-group:first"),o.prototype.initialize.apply(this,[t.extend(s,this.params)]),this.disable()},onUnbind:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.offEventNamespace("agent")},onEntityChange:function(t,i,n){if(this.clearQueryCache().disable(),this.query.entityType=t,this.query=e.omit(e.defaults(this.query,this.config),"entity"),n!==!0&&this.$el.select2("val",""),this.query.entityType){var s=this.$el.val();this.toggleContainer(!0).promise().done(e.bind(function(){this.addLoadingIcon()},this)),s.length?(this.config.entity=s,this.getRemoteData(this.params.url,{dataType:this.settings.ajax.dataType,data:this.config}).done(e.bind(function(t){this.triggerEvent("agent:dedicate:change",t),this.$el.auiSelect2("data",t),this.removeLoadingIcon().enable()},this))):this.getRemoteData(this.settings.ajax.url,{dataType:this.settings.ajax.dataType,data:this.settings.ajax.data("",t,!1)}).done(e.bind(function(t){t.searchResults&&t.searchResults.length||this.removeLoadingIcon(),this.processData({results:t.searchResults||[]}),this.removeLoadingIcon().enable()},this))}},onAgentDedicated:function(){this.$el.val(""),this.clearValue()},onRegisterEvents:function(){this.$el.on("change",e.bind(function(t){t.val.length>0&&this.triggerEvent("agent:dedicate:change",t.val)},this))},onFormatResult:function(t){if(!e.isEmpty(t))return bamboo.feature.agent.assignment.entityItemResult({item:t.searchEntity})},onFormatSelection:function(t){if(!e.isEmpty(t))return bamboo.feature.agent.assignment.entityItemLabel({item:t.searchEntity})},onRemoteError:function(){},toggleContainer:function(t,i){var n=i||this.$fieldGroup.parent();return e.isUndefined(t)?n.slideToogle():t?n.slideDown():n.slideUp()},getRemoteData:function(t,i){return l(e.defaults({url:t,type:"GET",dataType:"json",cache:!1},i)).fail(e.bind(this.onRemoteError,this)).complete(e.bind(function(){this.$el.data("ajax-completed",(new Date).getTime())},this))}}),c=a.extend({initialize:function(t){this.capabilitiesTooltipUrl=t.capabilitiesTooltipUrl;var i=AJS.contextPath()+t.assignmentsBaseUrl+"?executorType="+t.executableType+"&executorId="+t.agentId+"&_="+(new Date).getTime(),s=n.Collection.extend({url:i});t=e.extend({bootstrap:new s},t||{}),a.prototype.initialize.call(this,t)},init:function(){this.model.collection.fetch({success:e.bind(this.render,this)}),this.listenTo(this.model.collection,"remove",this.render,this)},render:function(t){this.$el.html(bamboo.feature.agent.assignment.entitiesList({entities:this.model.collection.toJSON(),addedEntity:t?t.attributes:null,executableType:this.options.executableType,agentId:this.options.agentId,capabilitiesTooltipUrl:this.capabilitiesTooltipUrl}))},removeItem:function(i){var n=t(i.target).parents("tr:first");t.ajax({type:"DELETE",url:[AJS.contextPath(),this.options.assignmentsBaseUrl,"?executorType=",this.options.executableType,"&executorId=",this.options.agentId,"&assignmentType=",n.data("executabletype"),"&entityId=",n.data("id")].join(""),success:e.bind(function(){this.model.collection.remove(n.data("id"))},this)}),i.preventDefault(),i.stopPropagation()}});return i.View.extend({mixins:[d.EventBusMixin],initialize:function(i){t(i.typeSelector).auiSelect2({minimumResultsForSearch:-1}).on("change",e.bind(this.handleTypeSelection,this)),this.onEvent("agent:dedicate:change",this.enableAddButton),this.assignmentSelect=new r({el:this.$el,options:this.options}),this.selectedAssignments=new c({el:i.selectedAssignmentsEl,executableType:i.executableType,agentId:i.agentId,assignmentsBaseUrl:i.assignmentsBaseUrl,capabilitiesTooltipUrl:i.capabilitiesTooltipUrl}),this.selectedAssignments.init(),i.addButton.on("click",e.bind(this.handleAdd,this)),i.addButton.attr("disabled",!0)},handleTypeSelection:function(t){this.entityType=t.val,d.EventBus.trigger("agent:dedicate:entity:change",this.entityType)},handleAdd:function(e){e.preventDefault();var i=AJS.contextPath()+this.options.assignmentsBaseUrl+"?executorType="+this.options.executableType+"&executorId="+this.options.agentId+"&assignmentType="+this.entityType+"&entityId="+this.entityId,n=this.updateTable.bind(this);t.post(i,n)},updateTable:function(t){this.selectedAssignments.addItem(t),this.options.addButton.attr("disabled",!0),d.EventBus.trigger("agent:dedicate:added")},enableAddButton:function(t){this.entityId=t.el.value,this.options.addButton.attr("disabled",!1)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources.common:agent-assignment-configuration', location = '/feature/agent-assignment/agent-assignment.soy' */
// This file was automatically generated from agent-assignment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.feature.agent.assignment.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.feature == 'undefined') { bamboo.feature = {}; }
if (typeof bamboo.feature.agent == 'undefined') { bamboo.feature.agent = {}; }
if (typeof bamboo.feature.agent.assignment == 'undefined') { bamboo.feature.agent.assignment = {}; }


bamboo.feature.agent.assignment.entityItemResult = function(opt_data, opt_ignored) {
  var output = '<div class="metadata">';
  var nameList4 = opt_data.item.nameElements;
  var nameListLen4 = nameList4.length;
  for (var nameIndex4 = 0; nameIndex4 < nameListLen4; nameIndex4++) {
    var nameData4 = nameList4[nameIndex4];
    output += '<span class="name columns' + soy.$$escapeHtml(opt_data.item.nameElements.length) + ' ' + ((! (nameIndex4 == 0)) ? 'divider' : '') + '">' + soy.$$escapeHtml(nameData4) + '</span>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.agent.assignment.entityItemResult.soyTemplateName = 'bamboo.feature.agent.assignment.entityItemResult';
}


bamboo.feature.agent.assignment.entityItemLabel = function(opt_data, opt_ignored) {
  var output = '<div class="metadata">';
  var nameList18 = opt_data.item.nameElements;
  var nameListLen18 = nameList18.length;
  for (var nameIndex18 = 0; nameIndex18 < nameListLen18; nameIndex18++) {
    var nameData18 = nameList18[nameIndex18];
    output += '<span class="name columns' + soy.$$escapeHtml(opt_data.item.nameElements.length) + ' ' + ((! (nameIndex18 == 0)) ? 'divider' : '') + '">' + soy.$$escapeHtml(nameData18) + '</span>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.agent.assignment.entityItemLabel.soyTemplateName = 'bamboo.feature.agent.assignment.entityItemLabel';
}


bamboo.feature.agent.assignment.assignmentTypeItemResult = function(opt_data, opt_ignored) {
  return '<span>' + soy.$$escapeHtml(opt_data.label) + '</span>';
};
if (goog.DEBUG) {
  bamboo.feature.agent.assignment.assignmentTypeItemResult.soyTemplateName = 'bamboo.feature.agent.assignment.assignmentTypeItemResult';
}


bamboo.feature.agent.assignment.entitiesList = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.entities && opt_data.entities.length > 0) {
    var entityList37 = opt_data.entities;
    var entityListLen37 = entityList37.length;
    for (var entityIndex37 = 0; entityIndex37 < entityListLen37; entityIndex37++) {
      var entityData37 = entityList37[entityIndex37];
      output += '<tr data-id="' + soy.$$escapeHtml(entityData37.executableId) + '" data-executableid="' + soy.$$escapeHtml(entityData37.executableId) + '" data-executabletype="' + soy.$$escapeHtml(entityData37.executableType) + '" data-executortype="' + soy.$$escapeHtml(opt_data.executableType) + '" data-executorid="' + soy.$$escapeHtml(opt_data.agentId) + '"  ' + ((opt_data.addedEntity && opt_data.addedEntity.executableId == entityData37.executableId) ? 'class="multi-select-added"' : '') + '>' + bamboo.feature.agent.assignment.entityItem({nameElements: entityData37.nameElements, executableType: entityData37.executableType, executableId: entityData37.executableId, executableTypeLabel: entityData37.executableTypeLabel, capabilitiesMatch: entityData37.capabilitiesMatch, capabilitiesTooltipUrl: opt_data.capabilitiesTooltipUrl}) + '</tr>';
    }
  } else {
    output += '<tr id="no-item-row"><td colspan="3"><div id="no-item-selected"><h2>' + ((opt_data.executableType == 'IMAGE') ? soy.$$escapeHtml("This image is not dedicated.") : soy.$$escapeHtml("This agent is not dedicated.")) + '</h2><p>' + soy.$$escapeHtml("It is available for any build or deployment.") + '</p></div></td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.agent.assignment.entitiesList.soyTemplateName = 'bamboo.feature.agent.assignment.entitiesList';
}


bamboo.feature.agent.assignment.entityItem = function(opt_data, opt_ignored) {
  var output = '<td>' + soy.$$escapeHtml(opt_data.executableTypeLabel) + '</td><td>';
  var nameList76 = opt_data.nameElements;
  var nameListLen76 = nameList76.length;
  for (var nameIndex76 = 0; nameIndex76 < nameListLen76; nameIndex76++) {
    var nameData76 = nameList76[nameIndex76];
    output += soy.$$escapeHtml(nameData76) + ((! (nameIndex76 == nameListLen76 - 1)) ? ' &rsaquo; ' : '');
  }
  output += '</td><td class="agent-assignment-operations">' + ((! opt_data.capabilitiesMatch) ? '<span id="failed-capability-match-' + soy.$$escapeHtml(opt_data.executableId) + '" class="aui-lozenge aui-lozenge-subtle aui-lozenge-error">' + soy.$$escapeHtml("Not capable") + '</span> ' + ((opt_data.executableType == 'JOB') ? bamboo.widget.tooltip.tooltip({trigger: '#failed-capability-match-' + opt_data.executableId, url: opt_data.capabilitiesTooltipUrl + '&jobId=' + opt_data.executableId, showDelay: 300}) : bamboo.widget.tooltip.tooltip({trigger: '#failed-capability-match-' + opt_data.executableId, url: opt_data.capabilitiesTooltipUrl + '&environmentId=' + opt_data.executableId, showDelay: 300})) : '') + '<a class=\'remove\' href="#">' + aui.icons.icon({icon: 'remove', useIconFont: true, accessibilityText: "Delete", extraAttributes: {title: "Delete"}}) + '</a></td>';
  return output;
};
if (goog.DEBUG) {
  bamboo.feature.agent.assignment.entityItem.soyTemplateName = 'bamboo.feature.agent.assignment.entityItem';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.bamboo-artifact-downloader-plugin:artifactdownloaderjs', location = 'js/artifact.js' */
(function(b,a){a.ArtifactDownloaderConfiguration=(function(){var f={planSelector:null,planKey:null,addArtifactSelector:null,removeArtifactSelector:null,artifactListSelector:null,templates:{artifactListItem:null},i18n:{allArtifacts:null,individualArtifacts:null}};var m;var i;var g=function(){var o=+i.data("nextTransferId")+1;i.data("nextTransferId",o);b(AJS.template.load(m.templates.artifactListItem).fill({index:o}).toString()).appendTo(i).find(m.selectedArtifactSelector).end().slideDown();l(o).done(function(){a.DynamicFieldParameters.syncFieldShowHide(i)});if(o===0){var n=b('[data-artifact-id="0"]',i);b(m.removeArtifactSelector,n).remove()}};var e=function(n,o){if(o instanceof Backbone.Model){var p=o.get("key");if(m.planKey===p){return}m.planKey=p;c();g();if(m.planKey!==""){b(m.addArtifactSelector).show()}}};var l=function(o){var p;b(m.artifactListSelector).find("li").each(function(){var q=b(this).attr("data-artifact-id");if(+q===o){p=b(this);return false}});p.find("input").val("");var n=p.find("select");n.find("optgroup").remove();return h().then(function(q){d(n,q)})};var h=function(){var n=b.Deferred();j().then(function(p){var s=p.artifacts.size;var o=p.artifacts["max-result"];if(s>o){var q=[];for(var r=1;r<Math.ceil(s/o);r++){q.push(j(r*o,o))}b.when.apply(b,q).done(function(){var t=p.artifacts.artifact;(q.length===1?[arguments]:_.toArray(arguments)).forEach(function(u){t=t.concat(u[0].artifacts.artifact)});n.resolve(t)})}else{n.resolve(p.artifacts.artifact)}}).fail(function(p,q,o){console.log("couldn't retrieve artifacts: "+q)});return n};var j=function(o,n){return b.ajax({url:AJS.contextPath()+"/rest/api/latest/plan/"+m.planKey+"/artifact",dataType:"json",data:_.extend({"start-index":o||0},n?{"max-results":n}:{})})};var d=function(n,q){var p=b("<optgroup/>").attr("label",m.i18n.individualArtifacts);for(var r=0,t=q.length;r<t;r++){var o=q[r];var s=b("<option/>").attr("value",o.id).text(o.name);p.append(s)}n.append(p)};var k=function(n){n.preventDefault();b(this).closest("li").slideUp(function(){b(this).remove()})};var c=function(){b(m.artifactListSelector).find("li").remove()};return{init:function(n){m=b.extend(true,f,n);b(function(){m.planKey=b(m.planSelector).val();i=b(m.artifactListSelector).on("click",m.removeArtifactSelector,k);require("util/events").EventBus.on("plan:selected",e);b(m.addArtifactSelector).click(g);if(m.planKey===""){b(m.addArtifactSelector).hide()}})}}}())}(jQuery,window.BAMBOO=(window.BAMBOO||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.troubleshooting.plugin-bamboo:atst-healthchecks-notification', location = 'js/ajs-amd.js' */
define('troubleshooting/ajs', [], function () {
    'use strict';

    return AJS;
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.troubleshooting.plugin-bamboo:atst-healthchecks-notification', location = 'js/notification.js' */
/* global AJS */
require([
    "jquery",
    "aui/flag",
    "troubleshooting/ajs",
    "troubleshooting/location"
], function ($, flag, AJS, location) {
    'use strict';

    if (location.isOnSupportToolsPage()) {
        // Exit if we are on the ATST screen, we don't want to display healthcheck notification if user browsing on ATST
        return;
    }
    
    var pluginPageUrl =  AJS.contextPath() + '/plugins/servlet/troubleshooting/view';

    AJS.toInit(function () {
        var restBase = AJS.contextPath() + '/rest/troubleshooting/1.0';
        var user = $('meta[name=ajs-remote-user]').attr('content');

        // Initialise the healthcheck notification. Make a GET call to /check/{username} endpoint to get the list of failed check by user
        var initHealthcheckNotification = function () {
            $.getJSON(restBase + '/check/' + user).done(function (statusReport) {
                statusReport.statuses.forEach(function (status) {
                    showNotification(status);
                });

                // Listen to click event to dismiss or snooze notification
                $(document).find('.dismiss-notification').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    dismissNotification($notification);
                });

                $(document).find('.healthcheck-detail').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    var application = $notification.attr('application');
                    var severity = $notification.attr('severity');
                    var completeKey = $notification.attr('completeKey');

                    analyticsModule.run("Viewed", completeKey, application, severity);
                    snoozeNotification($notification);
                });
            });
        };

        // Renders the flat notification here, and set the necessary attribute to the flag
        var showNotification = function (status) {

            var healthCheckName = status.name;
            var severity = status.severity;
            var notificationId = status.id;
            var application = status.application;
            var completeKey = status.completeKey;
            var key = completeKey.split(':').pop();

            var flagType = severity === 'warning' ? 'warning' : 'error';
            var healthCheckUrl = pluginPageUrl + '?source=notification&healthCheck=' + key;

            var healthcheckNotification = flag({
                type: flagType,
                body: '<p>' + AJS.format("The {0} health check has failed in your system.", '<strong>' + healthCheckName + '</strong>') + '</p>' +
                    '<ul class="aui-nav-actions-list">' +
                        '<li><a href="' + healthCheckUrl + '" class="healthcheck-detail" target="_self">' + "Find out more" + '</a></li>' +
                        '<li><a href="#" class="dismiss-notification">' + "Don\u0027t remind me again" + '</a></li>' +
                    '</ul>',
                close: 'manual'
            });

            healthcheckNotification.setAttribute('id', 'healthcheck-notification');
            healthcheckNotification.setAttribute('healthcheck-name', healthCheckName);
            healthcheckNotification.setAttribute('notification-id', notificationId);
            healthcheckNotification.setAttribute('application', application);
            healthcheckNotification.setAttribute('severity', severity);
            healthcheckNotification.setAttribute('completeKey', completeKey);

            healthcheckNotification.addEventListener('aui-flag-close', function () {
                var $notification = $(this);
                snoozeNotification($notification);
            });


            analyticsModule.run('Display', completeKey, application, severity);
        };

        // Called when the "Dont remind me again" link is clicked. Notifications that are dismissed / marked as read won't reappear to the user anymore
        var dismissNotification = function ($notification) {
            $notification.attr("aria-hidden", "true");

            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = false;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function () {

                    analyticsModule.run("Dismissed", completeKey, application, severity);
                }
            })
        };

        // Called when the notification is closed via the cross button or if user open the link to the healthcheck
        // A notification is dismissed / marked as read automatically if it snoozes 3 times
        var snoozeNotification = function ($notification) {
            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = true;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function (data, textStatus, jqXHR) {

                    isAutoDismissed(id, completeKey, name, application, severity);
                    analyticsModule.run("Snoozed", completeKey, application, severity);

                }
            })
        };

        var isAutoDismissed = function (notificationId, completeKey, name, application, severity) {
            var url = restBase + '/dismissNotification/' + user + '/' + notificationId;

            AJS.$.ajax({
                async: false,
                type: 'GET',
                url: url,
                contentType: "text/xml",
                success: function (data, textStatus, jqXHR) {
                    if (jqXHR.status == 200) {
                        notificationAutoDismissed(name);
                        analyticsModule.run("Autodismissed", completeKey, application, severity);
                    }


                }
            });
        };

        // This module allows for us to capture the correct Analytics events per display as per SHC-344.
        var analyticsModule = (function () {
            var lastEvent;
            var event = {};

            event.run = function (action, completeKey, application, severity) {
                if (lastEvent == "Viewed") {
                    // when user views info, we snooze the notification. We only want to record the Viewed AA event.
                    lastEvent = action;
                } else {
                    lastEvent = action;
                    if (action == "Display") {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.display",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    } else {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.action",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    }
                }
            };
            return event;
        }());

        // This function is called when a notification is automatically marked as read (normally is called when a notification is snoozed 3 times)
        var notificationAutoDismissed = function (healthCheckName) {
            // We set a quick timeout here so the animation will be displayed properly
            setTimeout(function () {
                flag({
                    type: "info",
                    body: "<p>The <strong>" + healthCheckName + "</strong> notification is now dismissed. </p>" +
                    "<p>Please visit <a href='" + AJS.contextPath() + "/plugins/servlet/troubleshooting/view/?source=notification' class='healthcheck-detail' target='_self'>this link</a> for more on the check.</p>",
                    close: "auto"
                });
            }, 1500);
        };

        initHealthcheckNotification();
    });
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.troubleshooting.plugin-bamboo:atst-healthchecks-notification', location = 'js/shc-location.js' */
define('troubleshooting/location', [], function () {
    return {
        // Get the path name of the current page URL, and returns true if user is on ATST page or false if user is on other admin screens
        isOnSupportToolsPage: function () {
            return window.location.pathname.toLowerCase().indexOf("/troubleshooting/view") >= 0;
        }
    }
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/credentials/dialog-form-add-credentials.soy' */
// This file was automatically generated from dialog-form-add-credentials.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.aws.dialog.form.add.credentials.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.aws == 'undefined') { bamboo.plugins.aws = {}; }
if (typeof bamboo.plugins.aws.dialog == 'undefined') { bamboo.plugins.aws.dialog = {}; }
if (typeof bamboo.plugins.aws.dialog.form == 'undefined') { bamboo.plugins.aws.dialog.form = {}; }
if (typeof bamboo.plugins.aws.dialog.form.add == 'undefined') { bamboo.plugins.aws.dialog.form.add = {}; }
if (typeof bamboo.plugins.aws.dialog.form.add.credentials == 'undefined') { bamboo.plugins.aws.dialog.form.add.credentials = {}; }


bamboo.plugins.aws.dialog.form.add.credentials.form = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: '<p>' + soy.$$escapeHtml("These credentials are availale for use by all Bamboo users.") + '</p>'}) + aui.form.form({action: "" + '/rest/aws/latest/credentials', method: 'POST', content: '' + aui.form.textField({labelContent: "Credential name", isRequired: true, name: 'name'}) + aui.form.textField({labelContent: "Access key ID", isRequired: true, name: 'accessKey'}) + aui.form.passwordField({labelContent: "Secret access key", isRequired: true, name: 'secretKey'})});
};
if (goog.DEBUG) {
  bamboo.plugins.aws.dialog.form.add.credentials.form.soyTemplateName = 'bamboo.plugins.aws.dialog.form.add.credentials.form';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/codedeploy/aws-autocomplete.soy' */
// This file was automatically generated from aws-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.aws.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.aws == 'undefined') { bamboo.plugins.aws = {}; }
if (typeof bamboo.plugins.aws.autocomplete == 'undefined') { bamboo.plugins.aws.autocomplete = {}; }


bamboo.plugins.aws.autocomplete.error = function(opt_data, opt_ignored) {
  return '<div class="error control-form-error ajax-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.aws.autocomplete.error.soyTemplateName = 'bamboo.plugins.aws.autocomplete.error';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/codedeploy/aws-autocomplete.js' */
define("codedeploy/aws-autocomplete",["jquery","underscore","util/ajax","widget/autocomplete","credentials/dialog-form-add-credentials"],function(f,b,e,d,a){var c=Backbone.View.extend({defaultSettings:{urlBuckets:b.template(AJS.contextPath()+"/rest/aws/latest/credentials/<%=credentialId%>/s3/buckets"),urlApplications:b.template(AJS.contextPath()+"/rest/aws/latest/credentials/<%=credentialId%>/regions/<%=region%>/codedeploy/applications"),urlDeploymentGroups:b.template(AJS.contextPath()+"/rest/aws/latest/credentials/<%=credentialId%>/regions/<%=region%>/codedeploy/applications/<%=application%>/deploymentGroups"),$credentialsEl:undefined,$regionEl:undefined,$bucketsEl:undefined,$applicationsEl:undefined,$deploymentGroupsEl:undefined},initialize:function(g){b.extend(this,this.defaultSettings,g);this.bucketsAutocomplete=this.createAutocomplete(this.$bucketsEl,"bucketsAutocomplete");this.applicationsAutocomplete=this.createAutocomplete(this.$applicationsEl,"applicationsAutocomplete");this.deploymentGroupsAutocomplete=this.createAutocomplete(this.$deploymentGroupsEl,"deploymentGroupsAutocomplete");this.attachEvents();this.populateAutocomplete()},createAutocomplete:function(h,g){return new d({el:h,formatResult:this.onAutocompleteFormat,formatSelection:this.onAutocompleteFormat,query:b.bind(this.onQuery,this,g)})},attachEvents:function(){f(this.$credentialsEl).add(this.$regionEl).change(b.bind(function(){[this.bucketsAutocomplete,this.applicationsAutocomplete,this.deploymentGroupsAutocomplete].forEach(function(g){g.clearValue();g.processData([])},this);this.populateAutocomplete()},this));this.$applicationsEl.change(b.bind(this.populateDeploymentGroups,this));this.$addCredentialsEl.click(b.bind(function(g){g.preventDefault();new a({$credentialsEl:this.$credentialsEl})},this))},onQuery:function(g,h){h.callback({results:b.filter(this[g].data,function(i){return h.text===""||i.text.toUpperCase().indexOf(h.term.toUpperCase())>=0})})},onAutocompleteFormat:function(g){return g.text},populateAutocomplete:function(){this.populateBuckets();this.populateApplications()},populateBuckets:function(){var g=this.$credentialsEl.val();if(!g){return}return this.fetchResults(this.bucketsAutocomplete,this.urlBuckets({credentialId:g}))},populateApplications:function(){var g=this.$credentialsEl.val();if(!g){return}return this.fetchResults(this.applicationsAutocomplete,this.urlApplications({credentialId:g,region:this.$regionEl.val()}))},populateDeploymentGroups:function(){var g=this.$applicationsEl.val();if(!g){return}return this.fetchResults(this.deploymentGroupsAutocomplete,this.urlDeploymentGroups({credentialId:this.$credentialsEl.val(),region:this.$regionEl.val(),application:g}))},fetchResults:function(h,g){h.$el.parent().find(".ajax-error, .aui-icon-wait").remove();h.addLoadingIcon();h.disable();return e({url:g,error:{}}).then(b.bind(this.onRequestSuccess,h)).fail(b.bind(this.onRequestError,h)).always(b.bind(this.onRequestEnd,h))},onRequestSuccess:function(j){var h=j.results.map(function(k){return{text:k.name,id:k.name}});var i=h[0];var g=this.$el.val();if(g){i=h.filter(function(k){return k.text===g},this)[0]||i}this.$el.auiSelect2("data",i);this.$el.trigger("change");this.processData(h)},onRequestError:function(g){if(g.responseJSON&&g.responseJSON.message){this.$el.after(f(bamboo.plugins.aws.autocomplete.error({message:g.responseJSON.message})))}this.clearValue();this.processData([])},onRequestEnd:function(){this.removeLoadingIcon();this.enable()}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-aws-codedeploy:aws-resources', location = '/aws/credentials/dialog-form-add-credentials.js' */
define("credentials/dialog-form-add-credentials",["jquery","underscore","widget/dialog-form","widget/dialog","util/ajax","util/ajax-form"],function(g,d,e,c,f,a){var b=e.extend({template:bamboo.plugins.aws.dialog.form.add.credentials,defaultSettings:{buttons:[{id:"save",label:"Save credentials",cssClass:"aui-button aui-button-primary"},{id:"cancel",label:"Cancel",type:"link"}],header:"Add Amazon Web Services credentials",width:550,height:400},initialize:function(h){var i=h||{};i.content=this.template.form();e.prototype.initialize.call(this,i)},onCreateInstance:function(){c.prototype.onCreateInstance.apply(this,arguments);var h=this.dialog.getPage(0).body.find("form");this.form=new a(h,{url:h.attr("action"),type:h.attr("method")});this.form.bind(this.formSettings);this.form.on("error",d.bind(this.onFormError,this)).on("submit",d.bind(this.onFormSubmit,this)).on("success",d.bind(this.onFormSuccess,this))},onFormSuccess:function(i,h){g(this.settings.$credentialsEl).append(g("<option />",{val:h.id,text:h.name})).val(h.id).trigger("change");e.prototype.onFormSuccess.call(this)}});return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'bamboo.web.resources:widget-autocomplete-static', location = '/widget/autocomplete/autocomplete-static.js' */
define('widget/autocomplete-static', [
    'jquery',
    'underscore',
    'widget/autocomplete'
], function(
    $,
    _,
    Autocomplete
) {

    'use strict';

    var AutocompleteStatic = Autocomplete.extend({

        initialize: function(options) {
            var settings = $.extend({
                data: [],
                query: function(query) {
                    var pageSize = options.pageSize || 10;
                    var results = _.filter(this.data, function(e) {
                        return (query.text === '' ||
                            e.text.toUpperCase().indexOf(
                                query.term.toUpperCase()
                            ) >= 0
                        );
                    });

                    query.callback({
                        results: results.slice(Math.max(query.page - 1, 0) * pageSize, query.page * pageSize),
                        more: results.length >= query.page * pageSize
                    });

                    results = null;
                    pageSize = null;
                }
            }, options || {});

            if (_.isFunction(this.onFormatSelection)) {
                settings.formatSelection = _.bind(this.onFormatSelection, this);
            }

            if (_.isFunction(this.onFormatResult)) {
                settings.formatResult = _.bind(this.onFormatResult, this);
            }

            Autocomplete.prototype.initialize.apply(
                this, [settings]
            );
        }

    });

    return AutocompleteStatic;
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/repository-form.js' */
define("plugin-bitbucket/repository-form",["jquery","underscore","brace","util/events","util/elements"],function(f,a,c,b,e){var d=c.View.extend({mixins:[b.EventBusMixin,e],elements:{repository:'input[name="repository.bitbucket.repository"]'},inheritedData:{repository:""},initialize:function(g){this.params=g.params||{};if(g.elements){this.elements=g.elements}if(g.params.inheritedData){this.inheritedData=g.params.inheritedData}this.onEvent("unbind",this.onUnbind);this.onEvent("repository:server:toggle-override",this.onToggleBranchOverride);this.onEvent("bitbucket:repository:update",this.onRepositoryUpdate);this.onEvent("bitbucket:repository:init",a.bind(function(h,i){this.onRepositoryUpdate(h,i,true)},this));this.onEvent("bitbucket:errors:show",this.onShowFieldErrors);this.onEvent("bitbucket:errors:clear",this.onClearFieldErrors);this.triggerEvent("bitbucket:form:config",this.getConfig());this.triggerEvent("bitbucket:repository:selection:init")},onUnbind:function(){this.undelegateEvents();this.clearElementsCache();this.$el.removeData().unbind();this.offEventNamespace("repository");this.offEventNamespace("bitbucket")},isOverrideOn:function(){return !this.params.overrideRepositoryLocation.length||this.params.overrideRepositoryLocation.val()==="true"},onToggleBranchOverride:function(){if(this.inheritedData&&this.inheritedData.repository){var g=this.getElement("repository").val();if(g!==this.inheritedData.repository){if(this.isOverrideOn()){this.triggerEvent("bitbucket:repository:change",{fullName:g},false)}else{this.triggerEvent("bitbucket:repository:change",{fullName:this.inheritedData.repository},false)}}}},onRepositoryUpdate:function(g,h,i){this.triggerEvent("bitbucket:form:config",this.getConfig());this.triggerEvent("bitbucket:repository:change",h,!!i);this.params.scmEl.val(h.scm.toUpperCase());BAMBOO.DynamicFieldParameters.syncFieldShowHide(this.params.scmEl.parent(),true);if(this.params.detailedConfiguration.hasClass("hidden")){this.params.detailedConfiguration.hide().removeClass("hidden").slideDown()}},onClearFieldErrors:function(){this.$el.find(".error").remove()},onShowFieldErrors:function(g,h,i){if(a.isString(h)){h=this.getElement(h)}h.parent().find(".error").remove();BAMBOO.addFieldErrors(h.closest("form"),h.attr("name"),i,true)},getConfig:function(){return{repository:this.getElement("repository").val()}}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/branch-autocomplete.js' */
define("plugin-bitbucket/branch-autocomplete",["jquery","underscore","widget/autocomplete-ajax","plugin-bitbucket/bitbucket-autocomplete","util/events","util/elements"],function(g,b,a,e,d,f){var c=e.extend({mixins:[d.EventBusMixin,f],initialize:function(h){this.params=g.extend({url:AJS.contextPath()+"/rest/hg/latest/bb/branches",urlSingle:AJS.contextPath()+"/rest/hg/latest/bb/branch",urlDefault:AJS.contextPath()+"/rest/hg/latest/bb/branches/default"},h.params||{});this.query={limit:10};var j=b.bind(function(l,n,k){var m=g.extend({start:Math.max((n-1),0),query:l},this.query);if(!k&&(n-1)>0&&this.data.nextPage){m.start=this.data.nextPage}b.extend(m,this.getJsonAuthenticationParams());return JSON.stringify(m)},this);var i={minimumInputLength:0,ajax:{type:"POST",url:this.params.url,dataType:"json",data:j,params:{error:b.bind(this.onRemoteError,this)},results:b.bind(function(l,k){return this.processData({results:l.values,nextPage:l.nextPageStart||0,more:!l.lastPage})},this)},id:function(k){return k.branch}};this.onEvent("unbind",this.onUnbind);this.onEvent("bitbucket:repository:change",this.onRepositoryChange);this.onEvent("bitbucket:repository:selection:init",this.onRepositorySelectionInit);this.onEvent("bitbucket:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");a.prototype.initialize.apply(this,[g.extend(i,this.params)]);this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("bitbucket")},onFormConfig:function(h,i){this.config=i},onRepositorySelectionInit:function(){this.clearQueryCache().clearValue().disable().toggleContainer(this.$fieldGroup.parent(),false)},clearBranchErrorMessages:function(){this.$fieldGroup.find(".error").remove()},onRepositoryChange:function(h,i,l){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.clearBranchErrorMessages();this.clearQueryCache().disable();this.query={limit:10};if(i&&i.fullName){this.query.repository=i.fullName}if(l!==true){this.$el.val("")}if(this.query.repository){var j=this.$el.val();var k=b.bind(function(m){this.triggerEvent("bitbucket:branch:change",m);this.$el.auiSelect2("data",m);this.removeLoadingIcon().enable()},this);this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(b.bind(function(){this.addLoadingIcon()},this));if(!j.length){this.getRemoteData(this.params.urlDefault,{dataType:this.settings.ajax.dataType,data:this.query}).done(k)}else{this.query.branch=j;this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:this.query}).always(function(){k({branch:j})})}}},onRegisterEvents:function(){this.$el.on("change",b.bind(function(h){if(h.val.length>0){this.triggerEvent("bitbucket:errors:clear");this.triggerEvent("bitbucket:branch:change",h.added)}},this))},onFormatResult:function(h){if(!b.isEmpty(h)){return bamboo.plugins.bitbucket.branch.autocomplete.row({item:h})}},onFormatSelection:function(h){if(!b.isEmpty(h)){return bamboo.plugins.bitbucket.branch.autocomplete.row({item:h})}}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/branch-autocomplete.soy' */
// This file was automatically generated from branch-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.bitbucket.branch.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.bitbucket == 'undefined') { bamboo.plugins.bitbucket = {}; }
if (typeof bamboo.plugins.bitbucket.branch == 'undefined') { bamboo.plugins.bitbucket.branch = {}; }
if (typeof bamboo.plugins.bitbucket.branch.autocomplete == 'undefined') { bamboo.plugins.bitbucket.branch.autocomplete = {}; }


bamboo.plugins.bitbucket.branch.autocomplete.row = function(opt_data, opt_ignored) {
  return aui.icons.icon({icon: 'devtools-branch', useIconFont: true}) + ' ' + soy.$$escapeHtml(opt_data.item.branch);
};
if (goog.DEBUG) {
  bamboo.plugins.bitbucket.branch.autocomplete.row.soyTemplateName = 'bamboo.plugins.bitbucket.branch.autocomplete.row';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/bitbucket-autocomplete.js' */
define("plugin-bitbucket/bitbucket-autocomplete",["jquery","underscore","widget/autocomplete-ajax"],function(d,b,a){var c=a.extend({getRemoteData:function(e,g){this.$el.removeClass("ajax-completed");var f=b.extend(g.data,this.getJsonAuthenticationParams());return d.ajax({type:"POST",url:e,data:JSON.stringify(f),contentType:"application/json",dataType:"json"}).fail(b.bind(this.onRemoteError,this)).complete(b.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime());this.$el.addClass("ajax-completed")},this))},onRemoteError:function(f){var g=[];this.$fieldGroup.show();this.$el.auiSelect2("close");this.removeLoadingIcon().clearValue().enable().$el.val("");if(f.responseText){var e=JSON.parse(f.responseText);if(e.errors){g=e.errors}}if(!g.length){g.push("Failed to load data from Bitbucket.")}this.triggerEvent("bitbucket:errors:show",this.$el,g)},isOverrideOn:function(){return !this.params.overrideRepositoryLocation.length||this.params.overrideRepositoryLocation.val()==="true"},getJsonAuthenticationParams:function(){if(this.isOverrideOn()){var e={accessLevel:this.params.accessLevel.val()};if(e.accessLevel==="PUBLIC"){e.username=this.params.owner.val()}else{e.credentialsSource=this.getCredentialsSource();if(e.credentialsSource==="SHARED_CREDENTIALS"){e.sharedCredentialsId=this.params.sharedCredentialsId.val()}else{e.username=this.params.username.val();e.password=this.params.password.val()}}e.repositoryId=this.params.repositoryId;return e}else{return{repositoryId:this.params.inheritedData.id,repository:this.params.inheritedData.repository}}},getCredentialsSource:function(){return this.params.credentialsSource.filter(function(f,e){return d(e).is(":checked")}).val()}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/repository-autocomplete.js' */
define("plugin-bitbucket/repository-autocomplete",["jquery","underscore","widget/autocomplete-ajax","plugin-bitbucket/bitbucket-autocomplete","widget/help-dialog","util/events","util/elements","util/ajax"],function(c,g,b,e,d,i,a,f){var h=e.extend({mixins:[i.EventBusMixin,a],initialize:function(j){this.params=c.extend({url:AJS.contextPath()+"/rest/hg/latest/bb/repositories",urlSingle:AJS.contextPath()+"/rest/hg/latest/bb/repository"},j.params||{});this.query=c.extend({limit:10},j.query||{});var l=g.bind(function(n,p,m){var o=c.extend({start:Math.max((p-1),0),query:n},this.query);if(!m&&(p-1)>0&&this.data.nextPage){o.start=this.data.nextPage}g.extend(o,this.getJsonAuthenticationParams());return JSON.stringify(o)},this);var k={minimumInputLength:0,ajax:{url:this.params.url,type:"POST",dataType:"json",data:l,params:{error:g.bind(this.onRemoteError,this)},results:g.bind(function(n,m){return this.processData({results:n.values,nextPage:n.nextPageStart||0,more:!n.lastPage})},this)},id:function(m){return m.fullName}};this.onEvent("unbind",this.onUnbind);this.onEvent("bitbucket:repository:selection:init",this.onRepositorySelectionInit);this.onEvent("bitbucket:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");b.prototype.initialize.apply(this,[c.extend(k,this.params)]);this.addDescriptionField();this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("bitbucket")},onFormConfig:function(j,k){this.config=k},onRepositorySelectionInit:function(){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.clearRepositoryErrorMessages();this.$fieldGroup.find(".aui-message").remove();this.clearQueryCache().disable();this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(g.bind(function(){this.addLoadingIcon()},this));if(this.params.slugEl.val().length){var k=this.params.slugEl.val();var j=this.params.scmEl.val().toLowerCase();this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:{repository:k}}).done(g.bind(function(l){this.triggerEvent("bitbucket:repository:init",l);this.$el.auiSelect2("data",l)},this)).fail(g.bind(function(){var l={fullName:k,scm:j};this.triggerEvent("bitbucket:repository:init",l);this.$el.auiSelect2("data",l)},this)).always(g.bind(function(){this.removeLoadingIcon().enable()},this))}else{this.removeLoadingIcon().enable()}},onRegisterEvents:function(){this.$el.on("change",g.bind(this.onRepositoryChange,this))},onRepositoryChange:function(k){if(k.val.length>0){this.triggerEvent("bitbucket:errors:clear");var j=k.added;this.triggerEvent("bitbucket:repository:update",j)}},onFormatResult:function(j){if(!g.isEmpty(j)){return bamboo.plugins.bitbucket.repository.autocomplete.row({item:j})}},onFormatSelection:function(j){if(!g.isEmpty(j)){return bamboo.plugins.bitbucket.repository.autocomplete.row({item:j})}},clearRepositoryErrorMessages:function(){this.$fieldGroup.find(".aui-message").remove()},addDescriptionField:function(){var j=c(document.createElement("div")).addClass("description");this.$el.parent(".field-value").after(j);return this}});return h});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.atlassian-bamboo-plugin-bitbucket:bitbucket', location = '/javascript/repository-autocomplete.soy' */
// This file was automatically generated from repository-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.bitbucket.repository.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.bitbucket == 'undefined') { bamboo.plugins.bitbucket = {}; }
if (typeof bamboo.plugins.bitbucket.repository == 'undefined') { bamboo.plugins.bitbucket.repository = {}; }
if (typeof bamboo.plugins.bitbucket.repository.autocomplete == 'undefined') { bamboo.plugins.bitbucket.repository.autocomplete = {}; }


bamboo.plugins.bitbucket.repository.autocomplete.row = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.item.fullName) + ' (' + soy.$$escapeHtml(opt_data.item.scm) + ')';
};
if (goog.DEBUG) {
  bamboo.plugins.bitbucket.repository.autocomplete.row.soyTemplateName = 'bamboo.plugins.bitbucket.repository.autocomplete.row';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.bamboo-docker-plugin:docker-resources', location = '/docker/docker.js' */
(function(b,a){a.DOCKER={};a.DOCKER.DockerTaskConfiguration=(function(){var f={pluginSelector:"#docker-plugin",portsSelector:null,volumesSelector:null,templates:{portsListItem:null,volumesListItem:null}},q,p=/^[0-9]{1,5}$/,n,d,l=function(){var x=n.children("tbody");var w=x.children(":first");var v=x.children(":last");var z=(x.children().length>1?(parseInt(v.attr("data-ports-id"),10)+1):0);var y=w.find('input[name="hostPort"]');var t=w.find('input[name="containerPort"]');var r="";var u="";y.parent().find(".error").remove();t.parent().find(".error").remove();var B=n.find("input").serializeArray().filter(function(C){return(C.name&&(C.name.indexOf("containerPort_")===0||C.name.indexOf("hostPort_")===0))});var s=B.some(function(C){return(C.name.indexOf("hostPort")===0&&y.val()===C.value)});var A=B.some(function(C){return(C.name.indexOf("containerPort")===0&&t.val()===C.value)});if(y.val()){if(!p.test(y.val())){r="Invalid port"}else{if(s){r="Port already defined"}}}if(!t.val()){u="You must specify a container port"}else{if(!p.test(t.val())){u="Invalid port"}else{if(A){u="Port already defined"}}}if(r||u){y.after(b('<div class="error control-form-error"/>').text(r));t.after(b('<div class="error control-form-error"/>').text(u));return}b(AJS.template.load(q.templates.portsListItem).fill({index:z,hostPort:y.val(),containerPort:t.val()}).toString()).hide().appendTo(x).end().slideDown();y.val("");t.val("");a.DynamicFieldParameters.syncFieldShowHide(x)},i=function(){b(this).closest("tr").slideUp(function(){b(this).remove()})},j=function(r){b(this).parents("tr").addClass("active")},m=function(r){b(this).parents("tr").removeClass("active")},o=function(s){n.find(".error.control-form-error").remove();var r=n.find("input").serializeArray().filter(function(t){return(t.name&&(t.name.indexOf("containerPort_")===0||t.name.indexOf("hostPort_")===0))});r.forEach(function(v){var t="";var u=r.some(function(w){return(w.name.indexOf("containerPort")===0&&v.name.indexOf("containerPort")===0&&w.value===v.value&&v.name!==w.name)||(w.name.indexOf("hostPort")===0&&v.name.indexOf("hostPort")===0&&w.value===v.value&&v.name!==w.name)});if(!v.value){if(v.name.indexOf("containerPort")===0){t="You must specify a container port"}}else{if(!p.test(v.value)){t="Invalid port"}else{if(u){t="Port already defined"}}}if(t){b("#"+v.name).closest("td").append(b("<div/>").addClass("error control-form-error").text(t));s.stopPropagation();s.preventDefault()}})},e=function(){var w=d.children("tbody");var u=w.children(":first");var v=w.children(":last");var t=(w.children().length>1?(parseInt(v.attr("data-volumes-id"),10)+1):0);var r=u.find('input[name="hostDirectory"]');var s=u.find('input[name="containerDataVolume"]');s.parent().find(".error").remove();if(!s.val()){return s.after(b('<div class="error control-form-error"/>').text("Container data volume must be specified"))}b(AJS.template.load(q.templates.volumesListItem).fill({index:t,hostDirectory:r.val(),containerDataVolume:s.val()}).toString()).hide().appendTo(w).end().slideDown();r.val("");s.val("");a.DynamicFieldParameters.syncFieldShowHide(w)},k=function(){b(this).closest("tr").slideUp(function(){b(this).remove()})},g=function(r){b(this).parents("tr").addClass("active")},h=function(r){b(this).parents("tr").removeClass("active")},c=function(r){if(!b(this).val()){b(this).parents("tr").addClass("error");b(this).after(b('<div class="error control-form-error"/>').text("Container data volume must be specified"))}else{b(this).parents("tr").removeClass("error");b(this).parent().find(".error").remove()}};return{init:function(r){q=b.extend(true,f,r);b(function(){n=b(q.portsSelector).on("focus",'input[type="text"]',j).on("blur",'input[type="text"]',m).on("input",q.portsSelector+'-host--edit input[type="text"]',o).on("input",q.portsSelector+'-container--edit input[type="text"]',o).on("click",q.portsSelector+"-actions--add",l).on("click",q.portsSelector+"-actions--remove",i);n.find(".error").parents("tr").addClass("error");b(q.pluginSelector).closest("form").submit(function(){return n.find(q.portsSelector+"-container--edit.error").length});d=b(q.volumesSelector).on("focus",'input[type="text"]',g).on("blur",'input[type="text"]',h).on("input",q.volumesSelector+'-container--edit input[type="text"]',c).on("click",q.volumesSelector+"-actions--add",e).on("click",q.volumesSelector+"-actions--remove",k);d.find(".error").parents("tr").addClass("error");b(q.pluginSelector).closest("form").submit(function(){return d.find(q.volumesSelector+"-container--edit.error").length})})}}}())}(jQuery,window.BAMBOO=(window.BAMBOO||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-form.soy' */
// This file was automatically generated from repository-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.repository.form.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.repository == 'undefined') { bamboo.plugins.stash.repository = {}; }
if (typeof bamboo.plugins.stash.repository.form == 'undefined') { bamboo.plugins.stash.repository.form = {}; }


bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("A new public key for the selected repository will be stored as a repository access key.");
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription.soyTemplateName = 'bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription';
}


bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription = function(opt_data, opt_ignored) {
  return aui.icons.icon({useIconFont: true, size: 'small', icon: 'warning'}) + '<span>' + soy.$$escapeHtml("A new public key for the selected repository will be stored in your Bitbucket Server user profile because you don\x27t have administrative permissions.") + '</span>';
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription.soyTemplateName = 'bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/branch-autocomplete.soy' */
// This file was automatically generated from branch-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.branch.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.branch == 'undefined') { bamboo.plugins.stash.branch = {}; }
if (typeof bamboo.plugins.stash.branch.autocomplete == 'undefined') { bamboo.plugins.stash.branch.autocomplete = {}; }


bamboo.plugins.stash.branch.autocomplete.row = function(opt_data, opt_ignored) {
  return aui.icons.icon({icon: 'devtools-branch', useIconFont: true}) + ' ' + soy.$$escapeHtml(opt_data.item.displayId);
};
if (goog.DEBUG) {
  bamboo.plugins.stash.branch.autocomplete.row.soyTemplateName = 'bamboo.plugins.stash.branch.autocomplete.row';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/server-autocomplete.soy' */
// This file was automatically generated from server-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.server.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.server == 'undefined') { bamboo.plugins.stash.server = {}; }
if (typeof bamboo.plugins.stash.server.autocomplete == 'undefined') { bamboo.plugins.stash.server.autocomplete = {}; }


bamboo.plugins.stash.server.autocomplete.row = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.plugins.stash.server.autocomplete.row.soyTemplateName = 'bamboo.plugins.stash.server.autocomplete.row';
}


bamboo.plugins.stash.server.autocomplete.serverEmpty = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="stash-server-empty">' + aui.message.info({titleContent: "Bitbucket Server application link required", content: '' + ((opt_data.appLinkRemoved) ? '<p>' + ((opt_data.hasGlobalAdminPermission) ? soy.$$escapeHtml("Your application link to this Bitbucket Server instance has been removed. You will need to link it again to be able to use the available repositories and branches.") : soy.$$escapeHtml("Your application link to this Bitbucket Server instance has been removed. Please contact your Bamboo administrator to link it again to use the available repositories and branches.")) + '</p>' : '<p>' + ((opt_data.hasGlobalAdminPermission) ? soy.$$escapeHtml("On first use, Bamboo needs to establish an application link to a Bitbucket Server instance. It will then be able to display all available repositories and branches. This has to be done only once per Bitbucket Server instance.") : soy.$$escapeHtml("On first use, Bamboo needs to establish an application link to a Bitbucket Server instance. It will then be able to display all available repositories and branches. Please contact your Bamboo administrator to establish a link to Bitbucket Server.")) + '</p>') + ((opt_data.hasGlobalAdminPermission) ? '<button class="aui-button" type="button" id="start-create-applink" onclick="window.open(\'' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks\')" >' + soy.$$escapeHtml("Link Bamboo to Bitbucket Server") + '</button>' : '')}) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.stash.server.autocomplete.serverEmpty.soyTemplateName = 'bamboo.plugins.stash.server.autocomplete.serverEmpty';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-autocomplete.soy' */
// This file was automatically generated from repository-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.repository.autocomplete.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.repository == 'undefined') { bamboo.plugins.stash.repository = {}; }
if (typeof bamboo.plugins.stash.repository.autocomplete == 'undefined') { bamboo.plugins.stash.repository.autocomplete = {}; }


bamboo.plugins.stash.repository.autocomplete.row = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.item.project.name) + ' / ' + soy.$$escapeHtml(opt_data.item.name);
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.autocomplete.row.soyTemplateName = 'bamboo.plugins.stash.repository.autocomplete.row';
}


bamboo.plugins.stash.repository.autocomplete.oauthError = function(opt_data, opt_ignored) {
  return '' + aui.message.info({titleContent: '' + soy.$$escapeHtml(AJS.format("{0} - approval required",opt_data.instanceName)), content: '<p><p>' + soy.$$escapeHtml("Bamboo requires your approval before it can display repositories and branches, and automatically set up authentication.") + '</p><br/><a class="oauth-approve" href="' + soy.$$escapeHtml(opt_data.redirectUrl) + '" target="_blank">' + soy.$$escapeHtml("Login \x26 approve") + '</a></p>'});
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.autocomplete.oauthError.soyTemplateName = 'bamboo.plugins.stash.repository.autocomplete.oauthError';
}


bamboo.plugins.stash.repository.autocomplete.unauthorizedError = function(opt_data, opt_ignored) {
  var param20 = '<p>';
  switch (opt_data.requestStatus) {
    case 401:
      param20 += soy.$$escapeHtml("You don\x27t have permission to see this repository. Bamboo can still access this repository at build time, but simply can\x27t show you any details. Bamboo will continue to work without problems.");
      break;
    case 404:
      param20 += soy.$$escapeHtml("Your repository was renamed or deleted. This will make it impossible for Bamboo to work with this repository. Please adjust your configuration as soon as possible.");
      break;
  }
  param20 += '</p>';
  var output = '' + aui.message.error({titleContent: "Repository could not be found", content: param20});
  return output;
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.autocomplete.unauthorizedError.soyTemplateName = 'bamboo.plugins.stash.repository.autocomplete.unauthorizedError';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/mirror-autocomplete.js' */
define("plugin-stash/mirror-autocomplete",["jquery","underscore","widget/autocomplete","util/events","util/elements"],function(e,a,c,b,d){var f=c.extend({mixins:[b.EventBusMixin,d],initialize:function(g){this.queryParams={};g=g||{};this.params=g.params||{};this.mirrors=[];this.onEvent("stash:server:change",this.onServerChange);this.onEvent("stash:repository:change",this.onRepositoryChange);this.$outerDiv=g.params.outerDiv;this.mirrosSelectInput=this.$outerDiv.find(".repository-stash-mirror-available");this.primaryObject=(function(){var j=g.params.primary;return function(){return{id:"",name:j}}})();if(g.params){delete g.params}var i=function(){return this.queryParams}.bind(this);var h={formatSelection:a.bind(this.onFormatSelection,this),formatResult:a.bind(this.onFormatResult,this),query:function(j){return j.callback({results:this.mirrors})}.bind(this),minimumResultsForSearch:-1};c.prototype.initialize.apply(this,[e.extend(h,g||{})])},onRegisterEvents:function(){this.$el.on("change",this.onMirrorChange.bind(this))},onMirrorChange:function(g){this.params.elName.val(g.added.name);this.params.elUrl.val(g.added.url);this.hideErrorMessage()},onFormatResult:function(g){return g.name},onFormatSelection:function(g){return g.name},onServerChange:function(g,h){this.queryParams.serverKey=h&&h.id?h.id:""},showInput:function(){this.mirrosSelectInput.show();this.toggleContainer(this.$outerDiv,true)},showErrorMessage:function(){this.errorMessageBox=AJS.messages.error("#mirror-configuration-error",{body:"Bamboo doesn\u0027t support Smart Mirroring with the version of Bitbucket Server you\u0027re using. Upgrade your Bitbucket Server to version 5.0 or later with the Data Center license to be able to use Smart Mirroring in Bamboo. Alternatively, switch back to \u0022Primary\u0022 mirror to save the configuration. "})},hideErrorMessage:function(){if(this.errorMessageBox){this.errorMessageBox.hide()}},handleMirrorUnsupported:function(){var g=e.extend(this.primaryObject(),{url:""});this.onMirrorChange({added:g});if(this.$el.val()){this.showInput();this.showErrorMessage()}else{this.mirrosSelectInput.hide()}},fetchData:function(){this.addLoadingIcon();var g=this.removeLoadingIcon.bind(this);var i=this.handleMirrorUnsupported.bind(this);var h=this.mirrors;var j=this.params;e.ajax(AJS.contextPath()+"/rest/stash/latest/projects/repository/mirrors",{data:this.queryParams,dataType:"json"}).fail(function(k){g();var l=k.responseJSON;if(l.errorCode==="mirrors.not.supported"){i()}}).done(function(k){k.values.filter(function(l){return l&&l.enabled}).forEach(function(l){h.push({id:l.id,name:l.name,url:l.sshUrl});if(l.name===j.initialName&&!j.initialId.length){j.initialId=l.id}});g()})},onRepositoryChange:function(g,h,i){if(h&&h.id){this.queryParams.projectKey=h.project.key;this.queryParams.repositorySlug=h.slug}else{this.queryParams.projectKey=null;this.queryParams.repositorySlug=null}if(this.queryParams.projectKey&&this.queryParams.repositorySlug&&this.queryParams.serverKey){this.mirrors=[this.primaryObject()];this.fetchData();this.showInput()}if(i!==true){this.$el.auiSelect2("data",this.primaryObject());this.params.elName.val("")}else{this.$el.auiSelect2("data",this.getInitialData())}},getInitialData:function(){var g=this.primaryObject();if(this.params.initialId){g.id=this.params.initialId;g.name=this.params.initialName}return g}});return f});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-form.js' */
define("plugin-stash/repository-form",["jquery","underscore","brace","util/events","util/elements"],function(f,a,c,b,e){var d=c.View.extend({mixins:[b.EventBusMixin,e],elements:{serverKey:'input[name="repository.stash.server"]',projectKey:'input[name="repository.stash.projectKey"]',repositoryUrl:'input[name="repository.stash.repositoryUrl"]',repositorySlug:'input[name="repository.stash.repositorySlug"]',isAdmin:'input[name="repository.stash.temporary.isAdmin"]',repositoryMessages:"#repository-stash-messages"},initialData:{serverKey:"",projectKey:"",repositoryUrl:"",repositorySlug:"",isAdmin:""},initialize:function(g){this.params=g.params||{};if(g.elements){this.elements=g.elements}if(g.params.initialData){this.initialData=g.params.initialData}this.$repositoryDisplayName=f("#repository-display-name");this.$repositoryAccessPoint=f("#repository-access-option");this.onEvent("unbind",this.onUnbind);this.onEvent("repository:selector:change",a.bind(function(h,j,i){this.updateWebRepository(i);if(i===this.params.namespace&&j==="NEW"){this.triggerEvent("stash:server:init")}},this));this.onEvent("repository:server:reset",this.onServerReset);this.onEvent("stash:repository:update",this.onRepositoryUpdate);this.onEvent("stash:repository:init",a.bind(function(h,i){this.onRepositoryUpdate(h,i,true)},this));this.onEvent("stash:server:update",this.onServerUpdate);this.onEvent("stash:server:error:empty",this.onServerEmpty);this.onEvent("stash:server:error:permissions",this.onServerPermissions);this.onEvent("stash:errors:show",this.onShowFieldErrors);this.onEvent("stash:errors:clear",this.onClearFieldErrors);this.triggerEvent("stash:form:config",this.getConfig());if(f("#selectedRepository").val()===this.params.namespace||f("#repositoryPluginKey").val()===this.params.namespace){this.updateWebRepository(this.params.namespace);this.triggerEvent("stash:server:init")}},onUnbind:function(){this.undelegateEvents();this.clearElementsCache();this.$el.removeData().unbind();this.offEventNamespace("repository");this.offEventNamespace("stash")},onServerUpdate:function(g,h){if(h&&h.id&&h.id!==this.getElement("serverKey").val()){this.getElement("serverKey").val(h.id);this.getElement("projectKey").val("");this.getElement("repositoryUrl").val("");this.getElement("repositorySlug").val("");this.getElement("isAdmin").val("")}this.triggerEvent("stash:form:config",this.getConfig());this.triggerEvent("stash:server:change",h)},onServerReset:function(){if(this.initialData&&this.initialData.serverKey){var h=this.getElement("serverKey").val();var i=this.getElement("projectKey").val();var g=this.getElement("repositorySlug").val();this.getElement("serverKey").val(this.initialData.serverKey);this.getElement("projectKey").val(this.initialData.projectKey);this.getElement("repositoryUrl").val(this.initialData.repositoryUrl);this.getElement("repositorySlug").val(this.initialData.repositorySlug);this.getElement("isAdmin").val(this.initialData.isAdmin);this.triggerEvent("stash:form:config",this.getConfig());if(h!==this.initialData.serverKey||i!==this.initialData.projectKey||g!==this.initialData.repositorySlug){this.triggerEvent("stash:server:change",{id:this.initialData.serverKey,project:{key:this.initialData.projectKey},sshCloneUrl:this.initialData.repositoryUrl,slug:this.initialData.repositorySlug,permission:this.initialData.isAdmin?"ADMIN":""})}}},onRepositoryUpdate:function(g,i,j){if(i&&i.id){this.getElement("projectKey").val(i.id?i.project.key:"");this.getElement("repositoryUrl").val(i.id?i.sshCloneUrl:"");this.getElement("repositorySlug").val(i.id?i.slug:"");this.getElement("isAdmin").val(i.id?i.permission==="ADMIN":"");var h=i.permission==="ADMIN"?bamboo.plugins.stash.repository.form.userHasRepositoryAdminPermissionsDescription():bamboo.plugins.stash.repository.form.userHasRepositoryReadPermissionsDescription();this.triggerEvent("stash:repository:description:set",h)}this.triggerEvent("stash:form:config",this.getConfig());this.triggerEvent("stash:repository:change",i,!!j)},onServerEmpty:function(g,h){if(a.isUndefined(h)){h=true}this.toggleContainer(this.$repositoryDisplayName,!h)},onServerPermissions:function(g,h){if(a.isUndefined(h)){h=true}if(this.$repositoryAccessPoint.length){this.toggleContainer(this.$repositoryAccessPoint,!h)}},onClearFieldErrors:function(){this.$el.find(".error").remove()},onShowFieldErrors:function(g,h,i){if(a.isString(h)){h=this.getElement(h)}h.parent().find(".error").remove();BAMBOO.addFieldErrors(h.closest("form"),h.attr("name"),i,true)},updateWebRepository:function(g){var h=this.$el.parents("form:first");if(h.length){var i=h.find('input[name="repositoryType"]');if(i.length&&g!==this.params.namespace){i.val("")}else{if(+h.find('input[name="repositoryId"]').val()===0||i.val()!==g){h.find("#selectedWebRepositoryViewer").val(this.params.viewer).change()}}}},getConfig:function(){return{serverKey:this.getElement("serverKey").val(),projectKey:this.getElement("projectKey").val(),repositorySlug:this.getElement("repositorySlug").val(),repositoryUrl:this.getElement("repositoryUrl").val()}}});return d});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/branch-autocomplete.js' */
define("plugin-stash/branch-autocomplete",["jquery","underscore","widget/autocomplete-ajax","util/events","util/elements"],function(f,b,a,d,e){var c=a.extend({mixins:[d.EventBusMixin,e],initialize:function(g){this.params=f.extend({url:AJS.contextPath()+"/rest/stash/latest/projects/repositories/branches",urlSingle:AJS.contextPath()+"/rest/stash/latest/projects/repositories/branch",urlDefault:AJS.contextPath()+"/rest/stash/latest/projects/repositories/branches/default"},g.params||{});this.query=f.extend({limit:10},g.query||{});var i=b.bind(function(k,m,j){var l=f.extend({start:Math.max((m-1),0),query:k},this.query);if(!j&&(m-1)>0&&this.data.nextPage){l.start=this.data.nextPage}return l},this);var h={minimumInputLength:0,ajax:{url:this.params.url,dataType:"json",data:i,params:{error:f.noop},results:b.bind(function(k,j){return this.processData({results:k.values,nextPage:k.nextPageStart||0,more:!k.lastPage})},this)},id:function(j){return j.displayId}};this.onEvent("unbind",this.onUnbind);this.onEvent("stash:repository:change",this.onRepositoryChange);this.onEvent("stash:server:error:empty",this.onServerEmpty);this.onEvent("stash:server:change",this.onServerChange);this.onEvent("stash:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");a.prototype.initialize.apply(this,[f.extend(h,this.params)]);this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("stash");f(window).off("applinks.auth.completion")},onFormConfig:function(g,h){this.config=h},onServerEmpty:function(g,h){if(b.isUndefined(h)){h=true}else{if(h){this.clearValue().$el.val("")}}this.toggleContainer(this.$fieldGroup,!h)},onServerChange:function(g,h){if(h.id){this.query.serverKey=h.id}this.clearQueryCache().clearValue().disable().toggleContainer(this.$fieldGroup.parent(),false)},onRepositoryChange:function(g,h,k){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.$fieldGroup.find(".aui-message").remove();this.clearQueryCache().disable();if(h&&h.id){this.query.projectKey=h.project.key;this.query.repositorySlug=h.slug}this.query=b.omit(b.defaults(this.query,this.config),"branch");if(k!==true){this.$el.val("")}if(this.query.projectKey&&this.query.repositorySlug&&this.query.serverKey){var i=this.$el.val();var j=b.bind(function(l){this.triggerEvent("stash:branch:change",l);this.$el.auiSelect2("data",l);this.removeLoadingIcon().enable()},this);this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(b.bind(function(){this.addLoadingIcon()},this));if(!i.length){this.getRemoteData(this.params.urlDefault,{dataType:this.settings.ajax.dataType,data:this.settings.ajax.data("",1,false)}).done(j)}else{this.config.branch=i;this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:this.config}).done(j)}}},onRegisterEvents:function(){this.$el.on("change",b.bind(function(g){if(g.val.length>0){this.triggerEvent("stash:errors:clear");this.triggerEvent("stash:branch:change",g.added)}},this))},onFormatResult:function(g){if(!b.isEmpty(g)){return bamboo.plugins.stash.branch.autocomplete.row({item:g})}},onFormatSelection:function(g){if(!b.isEmpty(g)){return bamboo.plugins.stash.branch.autocomplete.row({item:g})}},onRemoteError:function(h){var i=[];this.$fieldGroup.show();this.$el.auiSelect2("close");this.removeLoadingIcon().clearValue().enable().$el.val("");if(h.responseText){var g=JSON.parse(h.responseText);if(g.authenticationInstanceName){this.$fieldGroup.find(".field-value").hide();this.$fieldGroup.append(bamboo.plugins.stash.repository.autocomplete.oauthError({instanceName:g.authenticationInstanceName,redirectUrl:g.authenticationRedirectUrl}));f(window).on("applinks.auth.completion",b.bind(function(j,l,k){if(k){f(window).off("applinks.auth.completion");this.triggerEvent("stash:repository:change")}},this));return}if(g.errors){i=g.errors}}if(!i.length){i.push("Failed to load data from Bitbucket Server.")}this.triggerEvent("stash:errors:show",this.$el,i)},getRemoteData:function(g,h){this.$el.removeClass("ajax-completed");return f.ajax(g,b.defaults({type:"GET",dataType:"json"},h)).fail(b.bind(this.onRemoteError,this)).complete(b.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime())},this))}});return c});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-view.soy' */
// This file was automatically generated from repository-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.plugins.stash.repository.view.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.plugins == 'undefined') { bamboo.plugins = {}; }
if (typeof bamboo.plugins.stash == 'undefined') { bamboo.plugins.stash = {}; }
if (typeof bamboo.plugins.stash.repository == 'undefined') { bamboo.plugins.stash.repository = {}; }
if (typeof bamboo.plugins.stash.repository.view == 'undefined') { bamboo.plugins.stash.repository.view = {}; }


bamboo.plugins.stash.repository.view.error = function(opt_data, opt_ignored) {
  return '<div class="error control-form-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  bamboo.plugins.stash.repository.view.error.soyTemplateName = 'bamboo.plugins.stash.repository.view.error';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/server-autocomplete.js' */
define("plugin-stash/server-autocomplete",["jquery","underscore","widget/autocomplete-static","util/events"],function(e,c,b,d){var a=b.extend({mixins:[d.EventBusMixin],initialize:function(f){this.params=e.extend({serverPollingTimeout:3000,minimumResultsForSearch:-1,url:AJS.contextPath()+"/rest/stash/latest/servers/"},f.params||{});this.onEvent("unbind",this.onUnbind);this.onEvent("stash:server:init",this.onServerInit);this.onEvent("stash:server:loaded",this.onServerLoaded);this.$fieldGroup=this.$el.parents(".field-group:first");this.serverPolling=null;b.prototype.initialize.apply(this,[this.params]);this.initConfig()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("stash");if(this.serverPolling){this.serverPolling=null}},onServerInit:function(){this.initConfig({placeholder:this.settings.loadingPlaceholder}).clearValue().disable();this.getRemoteData(this.params.url).done(c.bind(function(f){this.triggerEvent("stash:server:loaded",(f&&f.servers)?f.servers:[])},this))},onServerLoaded:function(f,h){if(h&&h.length){if(this.serverPolling){this.serverPolling=null;this.triggerEvent("stash:server:error:empty",false);this.$fieldGroup.find(".field-value").show();this.$fieldGroup.find("#stash-server-empty").remove()}this.initConfig({data:h,placeholder:this.settings.placeholder});var g=this.$el.data("initial");var i=null;if(g&&g.length){i=c.find(h,function(j){return j.id===g})}if(!i&&g){if(!this.$fieldGroup.find("#stash-server-empty").length){this.triggerEvent("stash:server:error:empty",true);this.$fieldGroup.append(bamboo.plugins.stash.server.autocomplete.serverEmpty({hasGlobalAdminPermission:this.params.hasGlobalAdminPermission,appLinkRemoved:true}))}}else{if(!i&&h.length===1){i=h[h.length-1]}if(i){this.triggerEvent("stash:server:error:empty",false);this.triggerEvent("stash:server:update",i)}this.$el.removeData("initial").auiSelect2("data",i)}this.enable()}else{if(this.$fieldGroup.is(":visible")){if(!this.$fieldGroup.find("#stash-server-empty").length){this.$fieldGroup.find(".field-value").hide();this.$fieldGroup.append(bamboo.plugins.stash.server.autocomplete.serverEmpty({hasGlobalAdminPermission:this.params.hasGlobalAdminPermission,appLinkRemoved:!!this.$el.data("initial")})).append(this.$fieldGroup.find(".error.control-form-error"))}this.serverPolling=true;this.triggerEvent("stash:server:error:empty");this.triggerEvent("stash:server:error:permissions");setTimeout(c.bind(function(){this.triggerEvent("stash:server:init")},this),this.params.serverPollingTimeout)}}},onInitSelection:function(f,g){f.data("initial",f.val())},onRegisterEvents:function(){this.$el.on("change",c.bind(function(f){if(f.val.length>0){this.$fieldGroup.find(".field-value").show();this.$fieldGroup.find("#stash-server-empty").remove();this.triggerEvent("stash:server:update",f.added);this.triggerEvent("stash:server:error:empty",false);this.triggerEvent("stash:errors:clear")}},this))},onFormatResult:function(f){if(!c.isEmpty(f)){return bamboo.plugins.stash.server.autocomplete.row({item:f})}},onFormatSelection:function(f){if(!c.isEmpty(f)){return bamboo.plugins.stash.server.autocomplete.row({item:f})}},onRemoteError:function(g){var h=[];this.$el.auiSelect2("close");this.clearValue().$el.val("");if(g.responseText){var f=JSON.parse(g.responseText);if(f.errors){h=f.errors}}if(!h.length){h.push("Failed to load data from Bitbucket Server.")}this.triggerEvent("stash:errors:show",this.$el,h)},getRemoteData:function(f){this.$el.removeClass("ajax-completed");return e.ajax({url:f,type:"GET",dataType:"json"}).fail(c.bind(this.onRemoteError,this)).complete(c.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime())},this))}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-autocomplete.js' */
define("plugin-stash/repository-autocomplete",["jquery","underscore","widget/autocomplete-ajax","widget/help-dialog","util/events","util/elements","util/ajax"],function(h,c,b,e,d,g,f){var a=b.extend({mixins:[d.EventBusMixin,g],initialize:function(i){this.params=h.extend({url:AJS.contextPath()+"/rest/stash/latest/projects/repositories",urlSingle:AJS.contextPath()+"/rest/stash/latest/projects/repository"},i.params||{});this.query=h.extend({limit:10},i.query||{});var k=c.bind(function(m,o,l){var n=h.extend({start:Math.max((o-1),0),query:m},this.query);if(!l&&(o-1)>0&&this.data.nextPage){n.start=this.data.nextPage}return n},this);var j={minimumInputLength:0,ajax:{url:this.params.url,dataType:"json",data:k,params:{error:h.noop},results:c.bind(function(m,l){return this.processData({results:m.values,nextPage:m.nextPageStart||0,more:!m.lastPage})},this)}};this.onEvent("unbind",this.onUnbind);this.onEvent("stash:repository:description:set",this.onDescriptionSet);this.onEvent("stash:server:error:empty",this.onServerEmpty);this.onEvent("stash:server:change",this.onServerChange);this.onEvent("stash:form:config",this.onFormConfig);this.$fieldGroup=this.$el.parents(".field-group:first");b.prototype.initialize.apply(this,[h.extend(j,this.params)]);this.addDescriptionField();this.linkHelpDialog(this.params.helpDialogEl);this.disable()},onUnbind:function(){this.undelegateEvents();this.$el.removeData().unbind();this.offEventNamespace("stash");h(window).off("applinks.auth.completion")},onFormConfig:function(i,j){this.config=j},onServerEmpty:function(i,j){if(c.isUndefined(j)){j=true}else{if(j){this.clearValue();this.$el.val("")}}this.toggleContainer(this.$fieldGroup,!j)},onServerChange:function(i,j){this.$fieldGroup.show();this.$fieldGroup.find(".field-value").show();this.clearRepositoryErrorMessages();this.$fieldGroup.find(".aui-message").remove();this.clearQueryCache().disable();if(j.id){this.query.serverKey=j.id;this.triggerEvent("stash:server:error:permissions",false);this.toggleContainer(this.$fieldGroup.parent(),true).promise().done(c.bind(function(){this.addLoadingIcon()},this));if(this.params.slugEl.val().length){this.getRemoteData(this.params.urlSingle,{dataType:this.settings.ajax.dataType,data:this.config}).then(c.bind(function(k){return this.appendPermissions(k,j.id)},this)).done(c.bind(function(k){this.triggerEvent("stash:repository:init",k);this.$el.auiSelect2("data",k)},this)).always(c.bind(function(){this.removeLoadingIcon().enable()},this))}else{this.config.serverKey=j.id;this.getRemoteData(this.params.url,{dataType:this.settings.ajax.dataType,data:this.config}).done(c.bind(function(k){if(k.values&&k.values.length){this.addQueryCache(this.settings.ajax.data("",1,true),{results:k.values||[],nextPage:k.nextPageStart||0,more:!k.lastPage});this.removeLoadingIcon().enable()}else{this.removeLoadingIcon().triggerEvent("stash:errors:show",this.$el,["Selected server has no repositories."])}},this))}}else{this.clearValue()}},onRegisterEvents:function(){this.$el.on("change",c.bind(this.onRepositoryChange,this))},onRepositoryChange:function(j){if(j.val.length>0){this.triggerEvent("stash:errors:clear");var i=j.added;if(i&&i.id){this.addLoadingIcon();this.clearRepositoryErrorMessages();this.appendPermissions(i,this.config.serverKey).done(c.bind(this.triggerEvent,this,"stash:repository:update")).always(c.bind(this.removeLoadingIcon,this))}else{this.triggerEvent("stash:repository:update",i)}}},onFormatResult:function(i){if(!c.isEmpty(i)){return bamboo.plugins.stash.repository.autocomplete.row({item:i})}},onFormatSelection:function(i){if(!c.isEmpty(i)){return bamboo.plugins.stash.repository.autocomplete.row({item:i})}},onRemoteError:function(k){var l=[];this.$fieldGroup.show();this.$el.auiSelect2("close");var i=this.$el.val();this.removeLoadingIcon().clearValue().enable().$el.val("");if(k.responseText){var j=JSON.parse(k.responseText);if(j.serverErrorMessage){this.$fieldGroup.hide();this.triggerEvent("stash:errors:show","serverKey",[j.serverErrorMessage]);return}if(j.authenticationInstanceName){this.triggerEvent("stash:server:error:permissions");this.$fieldGroup.find(".field-value").hide();this.$fieldGroup.append(bamboo.plugins.stash.repository.autocomplete.oauthError({instanceName:j.authenticationInstanceName,redirectUrl:j.authenticationRedirectUrl})).append(this.$fieldGroup.find(".error.control-form-error"));h(window).on("applinks.auth.completion",c.bind(function(m,o,n){if(n){h(window).off("applinks.auth.completion");this.$el.val(i);this.triggerEvent("stash:server:change",{id:this.config.serverKey})}},this));return}if(j.remoteRequestStatus&&c.contains([401,404],j.remoteRequestStatus)){this.$fieldGroup.parent().append(bamboo.plugins.stash.repository.autocomplete.unauthorizedError({requestStatus:j.remoteRequestStatus}));return}if(j.errors){l=j.errors}}if(!l.length){l.push("Failed to load data from Bitbucket Server.")}this.triggerEvent("stash:errors:show",this.$el,l)},getRemoteData:function(i,j){this.$el.removeClass("ajax-completed");return h.ajax(i,c.defaults({type:"GET",dataType:"json"},j)).fail(c.bind(this.onRemoteError,this)).complete(c.bind(function(){this.$el.data("ajax-completed",(new Date()).getTime());this.$el.addClass("ajax-completed")},this))},clearRepositoryErrorMessages:function(){this.$fieldGroup.find(".aui-message").remove()},linkHelpDialog:function(j){var i=h(document.createElement("span")).attr("id",this.$el.attr("id")+"-help-dialog-trigger").addClass("aui-icon aui-icon-small aui-iconfont-help");this.$el.siblings(".select2-container:first").append(i);new e({el:i,content:j});return this},addDescriptionField:function(){var i=h(document.createElement("div")).addClass("description");this.$el.parent(".field-value").after(i);return this},onDescriptionSet:function(i,j){this.$el.parent(".field-value").siblings(".description").html(j)},appendPermissions:function(j,i){return f({url:AJS.contextPath()+"/rest/stash/latest/projects/repositories/permission",type:"GET",data:{serverKey:i,projectKey:j.project.key,repositorySlug:j.slug}}).then(function(k){return c.extend(j,{permission:k.permissionLevel})})}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.bamboo.plugins.stash.atlassian-bamboo-plugin-stash:stash', location = '/javascript/repository-view.js' */
define("plugin-stash/repository-view",["jquery","underscore","brace","util/events","util/elements"],function(f,b,d,c,e){var a=d.View.extend({mixins:[c.EventBusMixin,e],elements:{serverKey:'input[name="repository.stash.readonly.serverKey"]',projectKey:'input[name="repository.stash.readonly.projectKey"]',repositorySlug:'input[name="repository.stash.readonly.repositorySlug"]',repositoryUrl:'input[name="repository.stash.readonly.repositoryUrl"]'},initialize:function(g){this.params=f.extend({url:AJS.contextPath()+"/rest/stash/latest/projects/repository"},g.params||{});if(g.elements){this.elements=g.elements}this.$container=this.$el.parents(".repository:first");this.onEvent("unbind",this.onUnbind);this.onEvent("repository:selector:change",b.bind(function(h,j,i){if(i&&i.length&&j==="LINKED"){if(+i===this.$container.data("key")){this.$el.hide();this.$container.show();this.onReadonlyInit()}}},this));this.onReadonlyInit()},onUnbind:function(){this.undelegateEvents();this.clearElementsCache();this.$el.removeData().unbind();this.offEvent("repository:selector:change")},onReadonlyInit:function(){this.clearElementsCache();this.$el.parent().find(".aui-message").remove();this.$container.find(".field-group:first").append(f(document.createElement("span")).addClass("aui-icon aui-icon-wait"));this.getRemoteData(this.params.url,{data:this.getConfig()}).done(b.bind(this.onRepositoryLoaded,this)).always(b.bind(function(){this.$container.find(".aui-icon.aui-icon-wait").fadeOut(function(){f(this).remove()})},this))},onRepositoryLoaded:function(g){this.$el.find(".stash-repository > option").text(bamboo.plugins.stash.repository.autocomplete.row({item:g}));this.$el.slideDown()},onRemoteError:function(i){if(i.responseText){var g=JSON.parse(i.responseText,{errors:["Failed to load data from Bitbucket Server."]});if(g.authenticationInstanceName){this.$el.hide().parent().append(bamboo.plugins.stash.repository.autocomplete.oauthError({instanceName:g.authenticationInstanceName,redirectUrl:g.authenticationRedirectUrl}));f(window).on("applinks.auth.completion",b.bind(function(j,l,k){if(k){f(window).off("applinks.auth.completion");this.onReadonlyInit()}},this));return}if(g.remoteRequestStatus&&b.contains([401,404],g.remoteRequestStatus)){this.$el.hide().parent().append(bamboo.plugins.stash.repository.autocomplete.unauthorizedError({requestStatus:g.remoteRequestStatus}));return}if(g.errors){this.$container.find(".error").remove();this.$el.slideDown();var h=this.$container.find(".stash-repository").parent();b.each(g.errors,b.bind(function(j){h.append(bamboo.plugins.stash.repository.view.error({message:j}))},this))}}},getRemoteData:function(g,h){return f.ajax(g,b.defaults({type:"GET",dataType:"json"},h)).fail(b.bind(this.onRemoteError,this))},getConfig:function(){return{serverKey:this.getElement("serverKey").val(),projectKey:this.getElement("projectKey").val(),repositorySlug:this.getElement("repositorySlug").val(),repositoryUrl:this.getElement("repositoryUrl").val()}}});return a});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.feature.discovery.feature-discovery-plugin-bamboo:feature.discovery.resources', location = '/static/feature-discovery-dialog.soy' */
// This file was automatically generated from feature-discovery-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace feature.discovery.notifications.
 */

if (typeof feature == 'undefined') { var feature = {}; }
if (typeof feature.discovery == 'undefined') { feature.discovery = {}; }
if (typeof feature.discovery.notifications == 'undefined') { feature.discovery.notifications = {}; }


feature.discovery.notifications.discoveryDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.id) + '" class="feature-discovery__discovery-dialog aui-help" persistent="true" open="true" alignment="bottom right"><p><strong>' + soy.$$escapeHtml(AJS.format("Bamboo {0}",[opt_data.currentVersion])) + '</strong></p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("Your Bamboo has been upgraded! Check out the \x3cstrong\x3eWhat\x27s new\x3c/strong\x3e section from the help menu to find out about new features and fixes.")) + '</p><br/><button class="feature-discovery__discovery-dialog__acknowledge-button aui-button">' + soy.$$escapeHtml("OK, got it") + '</button></aui-inline-dialog>';
};
if (goog.DEBUG) {
  feature.discovery.notifications.discoveryDialog.soyTemplateName = 'feature.discovery.notifications.discoveryDialog';
}


feature.discovery.notifications.menuLink = function(opt_data, opt_ignored) {
  return '<aui-item-link for="feature-discovery__dropdown-menu" id="feature-discovery__dropdown-trigger">' + soy.$$escapeHtml("What\x27s new") + '</aui-item-link>';
};
if (goog.DEBUG) {
  feature.discovery.notifications.menuLink.soyTemplateName = 'feature.discovery.notifications.menuLink';
}


feature.discovery.notifications.menuContent = function(opt_data, opt_ignored) {
  var output = '<aui-dropdown-menu id="feature-discovery__dropdown-menu"><div class="feature-discovery__dropdown-menu__container"><p class="feature-discovery__dropdown-menu__title">' + soy.$$escapeHtml("What\x27s new") + '</p><p class="feature-discovery__dropdown-menu__description">' + soy.$$escapeHtml(AJS.format("Your are using Bamboo version {0}. Here are some of the new features:",[opt_data.currentVersion])) + '</p><ul class="feature-discovery__dropdown-menu__notifications">';
  var notificationList22 = opt_data.notifications;
  var notificationListLen22 = notificationList22.length;
  for (var notificationIndex22 = 0; notificationIndex22 < notificationListLen22; notificationIndex22++) {
    var notificationData22 = notificationList22[notificationIndex22];
    output += '<li class="feature-discovery__dropdown-menu__notification">' + ((notificationData22.title) ? '<div class="feature-discovery__dropdown-menu__notification-title"><p>' + soy.$$escapeHtml(notificationData22.title) + '</p>' + ((notificationData22.productVersion) ? '<div class="feature-discovery__dropdown-menu__lozenge-version"><span class="aui-lozenge aui-lozenge-subtle">' + soy.$$escapeHtml(notificationData22.productVersion) + '</span></div>' : '') + '</div>' : '') + ((notificationData22.description) ? '<p class="feature-discovery__dropdown-menu__notification-description">' + soy.$$escapeHtml(notificationData22.description) + '</p>' : '') + ((notificationData22.featureUrl || notificationData22.documentationUrl) ? '<p class="feature-discovery__dropdown-menu__notification-links">' + ((notificationData22.featureUrl) ? '<a class="feature-discovery__dropdown-menu__notification-link" href="' + soy.$$escapeHtml(notificationData22.featureUrl) + '" target="' + soy.$$escapeHtml(notificationData22.featureUrlTarget) + '" data-bamboo-analytics-event=\'' + soy.$$escapeHtml(notificationData22.featureUrlAnalyticsData) + '\'>' + soy.$$escapeHtml("Try it") + '</a>' : '') + ((notificationData22.documentationUrl) ? ((notificationData22.featureUrl) ? '<span class="feature-discovery__dropdown-menu__notification-link-separator">&bull;</span>' : '') + '<a class="feature-discovery__dropdown-menu__notification-link" href="' + soy.$$escapeHtml(notificationData22.documentationUrl) + '" target="' + soy.$$escapeHtml(notificationData22.documentationUrlTarget) + '" data-bamboo-analytics-event=\'' + soy.$$escapeHtml(notificationData22.documentationUrlAnalyticsData) + '\'>' + soy.$$escapeHtml("Read more") + '</a>' : '') + '</p>' : '') + '</li>';
  }
  output += '</ul><div><a class="feature-discovery__dropdown-menu__documentation-home-link" href="' + soy.$$escapeHtml(opt_data.featuresSummaryPageUrl) + '" target="_blank" data-bamboo-analytics-event=\'' + soy.$$escapeHtml(opt_data.featuresSummaryPageAnalyticsData) + '\'>' + soy.$$escapeHtml("All features and fixes") + '</a></div></div></aui-dropdown-menu>';
  return output;
};
if (goog.DEBUG) {
  feature.discovery.notifications.menuContent.soyTemplateName = 'feature.discovery.notifications.menuContent';
}

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;
try {
/* module-key = 'com.atlassian.feature.discovery.feature-discovery-plugin-bamboo:feature.discovery.resources', location = '/static/feature-discovery-dialog.js' */
require([
    'jquery',
    'underscore'
], function(
    $,
    _
) {
    'use strict';

    /**
     * Tests whether the given URL is absolute or relative to the product's context path.
     * @param {String} url
     * @return {Boolean}
     */
    var isAbsolute = function(url) {
        return url && (url.indexOf('http://') === 0 || url.indexOf('https://') === 0);
    };

    /**
     * Prepends the context path to the URL if it doesn't already contain it.
     * @param {String} url
     * @return {String}
     */
    var prependContextPath = function(url) {
        if (url.indexOf('/') !== 0) {
            url = '/' + url;
        }
        return url.indexOf(AJS.contextPath()) === 0 ? url : AJS.contextPath() + url;
    };

    /**
     * Convert the given URL to an effective one which can be used in a product.
     * @param {String} url
     * @return {String}
     */
    var getEffectiveUrl = function(url) {
        return (!url || isAbsolute(url)) ? url : prependContextPath(url);
    };

    /**
     * Retrieve the 'target' attribute for a given URL.
     * @param {String} url
     * @return {String}
     */
    var getUrlTarget = function(url) {
        return isAbsolute(url) ? '_blank' : '_self';
    };

    /**
     * Get the value of the 'bamboo-analytics-event' link attribute.
     * @param {String} type type of link which triggered the analytics event
     * @param {Number} [id] unique ID of the notification
     * @return {String}
     */
    var getAnalyticsEventData = function(type, id) {
        var analyticsData = {
            name: 'bamboo.feature.discovery.link.clicked',
            data: {
                type: type
            }
        };
        if (id) {
            analyticsData.data.id = id;
        }
        return JSON.stringify(analyticsData)
    };

    /**
     * Acknowledges product version for current user. Will affect future feature discovery notifications.
     * @param {String} version
     */
    var acknowledgeProductVersion = function(version) {
        var url = AJS.contextPath() + '/rest/featureDiscovery/latest/notifications/acknowledge/' + version;
        $.ajax({ url: url, type: 'PUT' });
    };

    $(document).ready(function() {
        var templates = feature.discovery.notifications;

        var pluginKey = 'com.atlassian.feature.discovery.feature-discovery-plugin-bamboo';
        var webResourceDataKey = 'feature.discovery.resources.feature-discovery-data';
        var fullKey = pluginKey + ':' + webResourceDataKey;
        var data = WRM.data.claim(fullKey);

        if (!data || !data.currentUser) {
            return;
        }

        var $body = $('body');
        var $helpMenuListEntry = $('#system_help_menu');
        var $helpMenuLink = $('#bamboo\\.global\\.header-help\\.menu');

        // adjust links
        var notifications = data.notificationsForUser.map(function(notification) {
            return _.defaults({
                featureUrl: getEffectiveUrl(notification.featureUrl),
                featureUrlTarget: getUrlTarget(notification.featureUrl),
                featureUrlAnalyticsData: getAnalyticsEventData('TRY_IT', notification.id),
                documentationUrl: getEffectiveUrl(notification.documentationUrl),
                documentationUrlTarget: getUrlTarget(notification.documentationUrl),
                documentationUrlAnalyticsData: getAnalyticsEventData('READ_MORE', notification.id)
            }, notification);
        });

        // append the notifications
        $body.append(templates.menuContent({
            notifications: notifications,
            currentVersion: data.currentProductVersion,
            featuresSummaryPageUrl: data.featuresSummaryPageUrl,
            featuresSummaryPageAnalyticsData: getAnalyticsEventData('DOCUMENTATION_HOME', -1)
        }));
        $helpMenuLink.find('ul').append(templates.menuLink());

        // if user has not yet been notified about the upgrade
        if (data.showDiscoveryDialog) {

            // display the discovery dialog after a short delay
            setTimeout(function() {
                var discoveryDialogId = 'feature-discovery__discovery-dialog';
                var $discoveryDialog = $(templates.discoveryDialog({
                    id: discoveryDialogId,
                    currentVersion: data.currentProductVersion
                }));

                // register handlers to persist that the user has acknowledged the new version
                var dialogHidden = false;
                var hideDialog = function() {
                    if (!dialogHidden) {
                        dialogHidden = true;
                        acknowledgeProductVersion(data.currentProductVersion);
                        $discoveryDialog.remove();
                    }
                };

                $helpMenuLink.on('aui-dropdown2-show', hideDialog);
                $discoveryDialog.on('click', '.feature-discovery__discovery-dialog__acknowledge-button', function(e) {
                    e.preventDefault();
                    hideDialog();
                });

                // make sure the dialog will be pointing at the menu
                $helpMenuListEntry.attr('data-aui-trigger', '');
                $helpMenuListEntry.attr('aria-controls', discoveryDialogId);

                // append the discovery dialog
                $helpMenuListEntry.append($discoveryDialog);
            }, 500);

        } else if (data.currentProductVersion !== data.lastProductVersionForUser) {
            // acknowledge current version for future releases
            acknowledgeProductVersion(data.currentProductVersion);
        }
    });
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;